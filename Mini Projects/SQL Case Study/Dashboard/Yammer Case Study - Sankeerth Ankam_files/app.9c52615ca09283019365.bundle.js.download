webpackJsonp([1],{"+G1s":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),t.b=function(e,t){return t.filter(function(t){return!!e[t.token]}).map(function(t){return e[t.token].with({queryName:t.name||"Query"}).toJSON()})};var r,o=n("vqB5"),i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=function(e){function ReportDataset(t){return t?e.call(this,t)||this:e.call(this)||this}return i(ReportDataset,e),Object.defineProperty(ReportDataset.prototype,"id",{get:function(){return this.get("id",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"isLoaded",{get:function(){return this.get("isLoaded",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"content",{get:function(){return this.get("content",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"state",{get:function(){return this.get("state",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"columns",{get:function(){return this.get("columns",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"count",{get:function(){return this.get("count",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"query_token",{get:function(){return this.get("query_token",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"queryName",{get:function(){return this.get("queryName",void 0)},set:function(e){this.set("queryName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"reportDataUrl",{get:function(){return this.get("reportDataUrl",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"reportQueryUrl",{get:function(){return this.get("reportQueryUrl",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"content_length",{get:function(){return this.get("content_length",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"oversized",{get:function(){return this.get("oversized",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataset.prototype,"csv",{get:function(){return this.get("csv",void 0)},enumerable:!0,configurable:!0}),ReportDataset.prototype.with=function(e){return this.merge(e)},ReportDataset}(Object(o.e)({id:null,isLoaded:!1,content:[],columns:[],count:0,state:"succeeded",queryName:null,reportDataUrl:null,reportQueryUrl:null,query_token:null,content_length:0,oversized:!1,csv:null}))},"+OPr":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var r,o={Small:"small",Medium:"medium",Large:"large",Full:"full",Default:"medium"};!function(e){e.Table="table",e.Chart="chart",e.Python="python",e.Text="text"}(r||(r={}))},"+YZJ":function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">Report Settings<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.cancel()"></a></h3>\n  <div class="modal-container report-settings-container">\n    <div class="report-settings-option form-item-report-theme">\n      <strong>Report Theme</strong>\n      <strong class="pull-right">\n        <a ng-href="{{ ctrl.owner.themesSettingsLink }}" target="_blank">Learn about themes</a>\n      </strong>\n      <select\n         name="theme"\n         class="form-control form-control-block"\n         ng-model="ctrl.theme.value"\n         ng-options="opt[1] as opt[0] for opt in ctrl.theme.options">\n      </select>\n    </div>\n    <div class="report-settings-option checkbox-lg checkbox-right checkbox-block has-secondary-label">\n      <input type="checkbox" ng-model="ctrl.toggles.fullWidth" id="full-width-report" />\n      <label for="full-width-report">\n        <span class="toggle">\n          <i class="icon-success-check-inverted checkmark"></i>\n          <span class="switch"></span>\n        </span>\n        Full width report\n        <div class="secondary-label">\n          Removes report gutters to give you more space on larger screens\n        </div>\n      </label>\n    </div>\n    <div ng-if="ctrl.manualRunDisabled" class="report-settings-option checkbox-lg checkbox-right checkbox-block has-secondary-label">\n      <input type="checkbox" ng-model="ctrl.toggles.manualRunDisabled" id="manual-run-disabled" />\n      <label for="manual-run-disabled">\n        <span class="toggle">\n          <i class="icon-success-check-inverted checkmark"></i>\n          <span class="switch"></span>\n        </span>\n        Disable Runs from report view\n        <div class="secondary-label">\n          Viewers won\'t be able to run the report manually. The report will still update via schedules or runs from the query editor.\n        </div>\n      </label>\n    </div>\n  </div>\n  <div class="modal-action-bar">\n    <button type="submit" class="btn btn-lg btn-primary" ng-click="ctrl.submit()">Save</button>\n  </div>\n</div>\n'},"/JGi":function(e,t){e.exports='<div class="chart-accordion">\n  <div class="chart-nav">\n    <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n    <li ng-class="{active:accordion.chart}"><a ng-click="switchAccordion(\'chart\')">Data</a></li>\x3c!--\n    --\x3e<li ng-class="{active:accordion.format}"><a ng-click="switchAccordion(\'format\')">Format</a></li>\n    </ul>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.chart">\n    <div class="form-field">\n      <label class="axis-label">X-Axis</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.x" ng-options="column.name as column.name for column in columns.all" ng-change="updateXColumns()"></select>\n    </div>\n    <div class="form-field" ng-if="series.number.length">\n      <label class="axis-label">Bars</label>\n      <select class="form-control form-control-sm form-control-block" block="true" ng-model="view.ybars" ng-options="series.name as series.name for series in series.number" ng-change="updateYColumns()"></select>\n    </div>\n    <div class="form-field" ng-if="series.number.length">\n      <label class="axis-label">Lines</label>\n      <select class="form-control form-control-sm form-control-block" block="true" ng-model="view.ylines" ng-options="series.name as series.name for series in series.number" ng-change="updateYColumns()"></select>\n    </div>\n    <div class="form-field" ng-if="(view.y.length && (view.y.length < 2 || !view.g)) || !series.number.length">\n      <label class="axis-label">Aggregate</label>\n      <select ng-if="!view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" ng-model="view.aggregate" ng-change="aggregateChanged(view.aggregate)" ng-options="fn.value as fn.name for fn in ::aggregates"><option value="">None</option></select>\n      <select ng-if="view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" ng-model="view.gValueFn" ng-options="fn.value as fn.name for fn in ::aggregates" ng-change="updateSettings()"></select>\n    </div>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.format">\n    <h3 class="setting-title">X-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.xlabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Rotate Label</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xangle" ng-options="item.value as item.name for item in ::rotations" ng-change="updateSettings()">\n        <option value="">none</option>\n      </select>\n    </div>\n    <div class="clearfix">\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="form-field" ng-show="isDateType();">\n      <label class="axis-label">Format</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::dateFormats" ng-change="updateSettings()">\n        <option value="">auto</option>\n      </select>\n    </div>\n\n    <h3 class="setting-title">Y-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.ylabel" ng-change="updateSettings()" />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Range</label>\n      <input class="form-control form-control-sm range-input" placeholder="min" type="text" ng-model="tempYmin" ng-model-options="{ updateOn: \'blur\' }" ng-change="setYMin(true);" mode-enter /> to\n      <input class="form-control form-control-sm range-input pull-right" placeholder="max" type="text" ng-model="tempYmax" ng-model-options="{ updateOn: \'blur\' }" ng-change="setYMax(true);" mode-enter="setYMax();" />\n    </div>\n    <div class="clearfix">\n      <div class="half-width">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <h3 class="setting-title">Details</h3>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="lineplusbarhidelegend" value="hideLegend" ng-model="view.hideLegend" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="lineplusbarhidelegend">\n        Hide Legend\n        </label>\n      </span>\n    </div>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="lineplusbarnulltozero" value="nullToZero" ng-model="view.nullToZero" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="lineplusbarnulltozero">\n        Show Null Values as Zero\n        </label>\n      </span>\n    </div>\n    <h3 class="setting-title">Color Palette</h3>\n    <div uib-dropdown class="advanced-theme dropdown dropup">\n      <a href="#" class="chart-toggle-container clearfix dropdown-toggle" uib-dropdown-toggle>\n        <div href="#" class="chart-toggle-theme">\n          <div class="angle" style="{{currentTheme}}"></div>\n          <i class="icon-double-carets pull-right"></i>\n        </div>\n      </a>\n      <ul uib-dropdown-menu class="dropdown-menu">\n        <li ng-repeat="color in ::simpleThemes">\n          <a href="javascript:void(0);" ng-click="setTheme(color.value);" class="checkbox-icon"><div class="swatches"><span class="swatch" style="background:{{color.color_0}}"></span><span class="swatch" style="background:{{color.color_1}}"></span><span class="swatch" style="background:{{color.color_2}}"></span><span class="swatch" style="background:{{color.color_3}}"></span><span class="swatch" style="background:{{color.color_4}}"></span></div>{{ color.name }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>'},"/kuU":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzcycHgiIGhlaWdodD0iMTA2cHgiIHZpZXdCb3g9IjAgMCAzNzIgMTA2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZW1wdHktZ3JhcGhpYy1kb251dF9hbmRfcGllPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMSIgeD0iMCIgeT0iNCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjEwMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMCwxLjk5NDA2MDI4IEMwLDAuODkyNzcxMTk2IDAuOTA0NzI0MTIxLDAgMi4wMDMyOTg2MywwIEw2MS45OTY3MDE0LDAgQzYzLjEwMzA5MjcsMCA2NCwwLjg5NDUxMzc1NiA2NCwxLjk5NDA2MDI4IEw2NCwxNiBMMCwxNiBMMCwxLjk5NDA2MDI4IFoiIGlkPSJwYXRoLTIiPjwvcGF0aD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0zIiB4PSIwIiB5PSIzNiIgd2lkdGg9IjY0IiBoZWlnaHQ9IjE2Ij48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtNCIgeD0iMCIgeT0iNzIiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTUiIHg9IjYiIHk9IjIwIiB3aWR0aD0iNTIiIGhlaWdodD0iMTIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtNiIgeD0iMCIgeT0iNCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjEwMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMCwxLjk5NDA2MDI4IEMwLDAuODkyNzcxMTk2IDAuOTA0NzI0MTIxLDAgMi4wMDMyOTg2MywwIEw2MS45OTY3MDE0LDAgQzYzLjEwMzA5MjcsMCA2NCwwLjg5NDUxMzc1NiA2NCwxLjk5NDA2MDI4IEw2NCwxNiBMMCwxNiBMMCwxLjk5NDA2MDI4IFoiIGlkPSJwYXRoLTciPjwvcGF0aD4KICAgICAgICA8cmVjdCBpZD0icGF0aC04IiB4PSIwIiB5PSIzNiIgd2lkdGg9IjY0IiBoZWlnaHQ9IjE2Ij48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtOSIgeD0iMCIgeT0iNzIiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEwIiB4PSI2IiB5PSIyMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTExIiB4PSIwIiB5PSIwIiB3aWR0aD0iNTIiIGhlaWdodD0iMTIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMTIiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMjMxLDg5IEwyMzEsOTIuOTkwNzQ1NSBDMjMxLDk0LjY1MjcxMDkgMjMyLjA3MTkyNyw5NS4xOTYwNTUxIDIzMy4zOTYwOTUsOTQuMjAyOTI4OSBMMjM1LDkzIEwyMzcsOTcgTDIzOSw5NiBMMjM3LDkyIEwyMzkuMDYyNTU5LDkxLjU4NzQ4ODMgQzI0MC42ODQ4NjMsOTEuMjYzMDI3NSAyNDAuOTUxODM2LDkwLjE2MTQ2ODkgMjM5LjY2MTAzNCw4OS4xMjg4MjY5IEwyMzcsODcgTDIzMy4zMDI1OTcsODMuOTE4ODMwOSBDMjMyLjAzMDkwOCw4Mi44NTkwODk4IDIzMSw4My4zNDk2NzA0IDIzMSw4NS4wMDkyNTQ1IEwyMzEsODkgWiIgaWQ9InBhdGgtMTMiPjwvcGF0aD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xNCIgeD0iMTYwIiB5PSI1NiIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgPC9kZWZzPgogICAgPGcgaWQ9ImNoYXJ0LWVkaXRvciIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImVtcHR5LWRvbnV0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzM5LjAwMDAwMCwgLTEzOC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9ImVtcHR5LWdyYXBoaWMtZG9udXRfYW5kX3BpZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzM5LjAwMDAwMCwgMTM4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE2Ij4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDQwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5IiBmaWxsPSIjRjdGN0Y5IiB4PSIxMTkiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5LTMiIGZpbGw9IiNGRkZGRkYiIHg9IjAiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5LTQiIGZpbGw9IiNGRkZGRkYiIHg9IjIyOCIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktMiIgZmlsbD0iI0Y3RjdGOSIgeD0iMTMxIiB5PSIyNCIgd2lkdGg9IjEwOCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMCIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NC4wMDAwMDAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJwZXJmb3JtYW5jZS10YWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iNSIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwMCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGMUYyRjUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMiI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjQzhDQUQwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik02MywxNSBMMSwxNSBMMSwxLjk5NDA2MDI4IEMxLDEuNDQ5Mzc5ODIgMS40NTI2Nzg1NywxIDIuMDAzMjk4NjMsMSBMNjEuOTk2NzAxNCwxIEM2Mi41NTExMDEzLDEgNjMsMS40NDcwOTgzMSA2MywxLjk5NDA2MDI4IEw2MywxNSBaIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTctQ29weS0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGMUYyRjUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3Qgc3Ryb2tlPSIjQzhDQUQwIiBzdHJva2Utd2lkdGg9IjIiIHg9IjEiIHk9IjM3IiB3aWR0aD0iNjIiIGhlaWdodD0iMTQiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5LTUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC00Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iNzMiIHdpZHRoPSI2MiIgaGVpZ2h0PSIxMCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS03Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0NBRjBGOSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC01Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzg5REFFRCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSI3IiB5PSIyMSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0IGlkPSJ4LWF4aXMiIGZvbnQtZmFtaWx5PSJHcmFwaGlrLUJvbGQsIEdyYXBoaWsiIGZvbnQtc2l6ZT0iOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxldHRlci1zcGFjaW5nPSIwLjUzMzMzMzM2MSIgZmlsbD0iI0IxQjJCQSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIxNjEuNjgiIHk9IjExIj54LWF4aXM8L3RzcGFuPgogICAgICAgICAgICAgICAgICAgIDwvdGV4dD4KICAgICAgICAgICAgICAgICAgICA8dGV4dCBpZD0ieS1heGlzIiBmb250LWZhbWlseT0iR3JhcGhpay1Cb2xkLCBHcmFwaGlrIiBmb250LXNpemU9IjgiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZXR0ZXItc3BhY2luZz0iMC41MzMzMzMzNjEiIGZpbGw9IiNCMUIyQkEiPgogICAgICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iMTYxLjE2NCIgeT0iNDciPnktYXhpczwvdHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE2Ij4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDQwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5IiBmaWxsPSIjRjdGN0Y5IiB4PSIxMTkiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5LTMiIGZpbGw9IiNGRkZGRkYiIHg9IjAiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5LTQiIGZpbGw9IiNGRkZGRkYiIHg9IjIyOCIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktMiIgZmlsbD0iI0Y3RjdGOSIgeD0iMTMxIiB5PSIyNCIgd2lkdGg9IjEwOCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMCIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NC4wMDAwMDAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJwZXJmb3JtYW5jZS10YWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC02Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iNSIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwMCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGMUYyRjUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtNyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjQzhDQUQwIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik02MywxNSBMMSwxNSBMMSwxLjk5NDA2MDI4IEMxLDEuNDQ5Mzc5ODIgMS40NTI2Nzg1NywxIDIuMDAzMjk4NjMsMSBMNjEuOTk2NzAxNCwxIEM2Mi41NTExMDEzLDEgNjMsMS40NDcwOTgzMSA2MywxLjk5NDA2MDI4IEw2MywxNSBaIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTctQ29weS0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGMUYyRjUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtOCI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3Qgc3Ryb2tlPSIjQzhDQUQwIiBzdHJva2Utd2lkdGg9IjIiIHg9IjEiIHk9IjM3IiB3aWR0aD0iNjIiIGhlaWdodD0iMTQiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5LTUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC05Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iNzMiIHdpZHRoPSI2MiIgaGVpZ2h0PSIxMCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS03Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0NBRjBGOSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMCI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiM4OURBRUQiIHN0cm9rZS13aWR0aD0iMiIgeD0iNyIgeT0iMjEiIHdpZHRoPSI1MCIgaGVpZ2h0PSIxMCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTYyLjMzMDY2NywxMS4wOTYgQzE2MS4zNTQ2NjIsMTEuMDk2IDE2MC42MTMzMzYsMTAuODM0NjY5MyAxNjAuMTA2NjY3LDEwLjMxMiBDMTU5LjU5OTk5Nyw5Ljc4OTMzMDcyIDE1OS4zNDY2NjcsOS4wNzczMzc4NCAxNTkuMzQ2NjY3LDguMTc2IEwxNTkuMzQ2NjY3LDguMTEyIEMxNTkuMzQ2NjY3LDcuMjQyNjYyMzIgMTU5LjYyMTMzMSw2LjUzODY2OTM2IDE2MC4xNzA2NjcsNiBDMTYwLjcyMDAwMyw1LjQ2MTMzMDY0IDE2MS40MTg2NjIsNS4xOTIgMTYyLjI2NjY2Nyw1LjE5MiBDMTYzLjAzNDY3LDUuMTkyIDE2My42NTMzMzEsNS4zNzQ2NjQ4NCAxNjQuMTIyNjY3LDUuNzQgQzE2NC41OTIwMDIsNi4xMDUzMzUxNiAxNjQuODU4NjY2LDYuNjU1OTk2MzIgMTY0LjkyMjY2Nyw3LjM5MiBMMTYzLjIzNDY2Nyw3LjM5MiBDMTYzLjE3MDY2Niw2Ljc4OTMzMDMyIDE2Mi44NTA2NjksNi40ODggMTYyLjI3NDY2Nyw2LjQ4OCBDMTYxLjkwMTMzMSw2LjQ4OCAxNjEuNjA4MDAxLDYuNjI5MzMxOTIgMTYxLjM5NDY2Nyw2LjkxMiBDMTYxLjE4MTMzMiw3LjE5NDY2ODA4IDE2MS4wNzQ2NjcsNy41OTE5OTc0NCAxNjEuMDc0NjY3LDguMTA0IEwxNjEuMDc0NjY3LDguMTY4IEMxNjEuMDc0NjY3LDguNjg1MzM1OTIgMTYxLjE4MTMzMiw5LjA4Mzk5ODYgMTYxLjM5NDY2Nyw5LjM2NCBDMTYxLjYwODAwMSw5LjY0NDAwMTQgMTYxLjkwOTMzMSw5Ljc4NCAxNjIuMjk4NjY3LDkuNzg0IEMxNjIuNTkyMDAxLDkuNzg0IDE2Mi44MzMzMzIsOS43MDUzMzQxMiAxNjMuMDIyNjY3LDkuNTQ4IEMxNjMuMjEyMDAxLDkuMzkwNjY1ODggMTYzLjMyNTMzMyw5LjE1NzMzNDg4IDE2My4zNjI2NjcsOC44NDggTDE2NC45OTQ2NjcsOC44NDggQzE2NC45NDEzMzMsOS41NzMzMzY5NiAxNjQuNjc0NjY5LDEwLjEyOTMzMTQgMTY0LjE5NDY2NywxMC41MTYgQzE2My43MTQ2NjQsMTAuOTAyNjY4NiAxNjMuMDkzMzM3LDExLjA5NiAxNjIuMzMwNjY3LDExLjA5NiBaIE0xNjguOTc2LDkuODA4IEMxNjkuMzgxMzM1LDkuODA4IDE2OS43MDEzMzIsOS42NjEzMzQ4IDE2OS45MzYsOS4zNjggQzE3MC4xNzA2NjgsOS4wNzQ2NjUyIDE3MC4yODgsOC42NzIwMDI1NiAxNzAuMjg4LDguMTYgTDE3MC4yODgsOC4wOTYgQzE3MC4yODgsNy41ODkzMzA4IDE3MC4xNjkzMzQsNy4xOTMzMzQ3NiAxNjkuOTMyLDYuOTA4IEMxNjkuNjk0NjY1LDYuNjIyNjY1MjQgMTY5LjM3MzMzNSw2LjQ4IDE2OC45NjgsNi40OCBDMTY4LjU2MjY2NSw2LjQ4IDE2OC4yNDI2NjgsNi42MjEzMzE5MiAxNjguMDA4LDYuOTA0IEMxNjcuNzczMzMyLDcuMTg2NjY4MDggMTY3LjY1Niw3LjU4NjY2NDA4IDE2Ny42NTYsOC4xMDQgTDE2Ny42NTYsOC4xNjggQzE2Ny42NTYsOC42ODAwMDI1NiAxNjcuNzc1OTk5LDkuMDgxMzMxODggMTY4LjAxNiw5LjM3MiBDMTY4LjI1NjAwMSw5LjY2MjY2ODEyIDE2OC41NzU5OTgsOS44MDggMTY4Ljk3Niw5LjgwOCBaIE0xNjguOTQ0LDExLjA5NiBDMTY4LjAzMTk5NSwxMS4wOTYgMTY3LjMwNDAwMywxMC44MjY2Njk0IDE2Ni43NiwxMC4yODggQzE2Ni4yMTU5OTcsOS43NDkzMzA2NCAxNjUuOTQ0LDkuMDQ1MzM3NjggMTY1Ljk0NCw4LjE3NiBMMTY1Ljk0NCw4LjExMiBDMTY1Ljk0NCw3LjI1MzMyOTA0IDE2Ni4yMzA2NjQsNi41NTMzMzYwNCAxNjYuODA0LDYuMDEyIEMxNjcuMzc3MzM2LDUuNDcwNjYzOTYgMTY4LjA5ODY2Miw1LjIgMTY4Ljk2OCw1LjIgQzE2OS44NTMzMzgsNS4yIDE3MC41Nzk5OTcsNS40NTk5OTc0IDE3MS4xNDgsNS45OCBDMTcxLjcxNjAwMyw2LjUwMDAwMjYgMTcyLDcuMTk3MzI4OTYgMTcyLDguMDcyIEwxNzIsOC4xMzYgQzE3Miw5LjAyMTMzNzc2IDE3MS43MjEzMzYsOS43MzU5OTcyOCAxNzEuMTY0LDEwLjI4IEMxNzAuNjA2NjY0LDEwLjgyNDAwMjcgMTY5Ljg2NjY3MSwxMS4wOTYgMTY4Ljk0NCwxMS4wOTYgWiBNMTczLjMzMzMzMywxMSBMMTczLjMzMzMzMyw1LjI4IEwxNzQuOTgxMzMzLDUuMjggTDE3NC45ODEzMzMsOS43MjggTDE3Ny4xNDEzMzMsOS43MjggTDE3Ny4xNDEzMzMsMTEgTDE3My4zMzMzMzMsMTEgWiBNMTgwLjk5NDY2Nyw5LjgwOCBDMTgxLjQwMDAwMiw5LjgwOCAxODEuNzE5OTk5LDkuNjYxMzM0OCAxODEuOTU0NjY3LDkuMzY4IEMxODIuMTg5MzM1LDkuMDc0NjY1MiAxODIuMzA2NjY3LDguNjcyMDAyNTYgMTgyLjMwNjY2Nyw4LjE2IEwxODIuMzA2NjY3LDguMDk2IEMxODIuMzA2NjY3LDcuNTg5MzMwOCAxODIuMTg4MDAxLDcuMTkzMzM0NzYgMTgxLjk1MDY2Nyw2LjkwOCBDMTgxLjcxMzMzMiw2LjYyMjY2NTI0IDE4MS4zOTIwMDIsNi40OCAxODAuOTg2NjY3LDYuNDggQzE4MC41ODEzMzEsNi40OCAxODAuMjYxMzM1LDYuNjIxMzMxOTIgMTgwLjAyNjY2Nyw2LjkwNCBDMTc5Ljc5MTk5OSw3LjE4NjY2ODA4IDE3OS42NzQ2NjcsNy41ODY2NjQwOCAxNzkuNjc0NjY3LDguMTA0IEwxNzkuNjc0NjY3LDguMTY4IEMxNzkuNjc0NjY3LDguNjgwMDAyNTYgMTc5Ljc5NDY2NSw5LjA4MTMzMTg4IDE4MC4wMzQ2NjcsOS4zNzIgQzE4MC4yNzQ2NjgsOS42NjI2NjgxMiAxODAuNTk0NjY1LDkuODA4IDE4MC45OTQ2NjcsOS44MDggWiBNMTgwLjk2MjY2NywxMS4wOTYgQzE4MC4wNTA2NjIsMTEuMDk2IDE3OS4zMjI2NjksMTAuODI2NjY5NCAxNzguNzc4NjY3LDEwLjI4OCBDMTc4LjIzNDY2NCw5Ljc0OTMzMDY0IDE3Ny45NjI2NjcsOS4wNDUzMzc2OCAxNzcuOTYyNjY3LDguMTc2IEwxNzcuOTYyNjY3LDguMTEyIEMxNzcuOTYyNjY3LDcuMjUzMzI5MDQgMTc4LjI0OTMzLDYuNTUzMzM2MDQgMTc4LjgyMjY2Nyw2LjAxMiBDMTc5LjM5NjAwMyw1LjQ3MDY2Mzk2IDE4MC4xMTczMjksNS4yIDE4MC45ODY2NjcsNS4yIEMxODEuODcyMDA0LDUuMiAxODIuNTk4NjY0LDUuNDU5OTk3NCAxODMuMTY2NjY3LDUuOTggQzE4My43MzQ2Nyw2LjUwMDAwMjYgMTg0LjAxODY2Nyw3LjE5NzMyODk2IDE4NC4wMTg2NjcsOC4wNzIgTDE4NC4wMTg2NjcsOC4xMzYgQzE4NC4wMTg2NjcsOS4wMjEzMzc3NiAxODMuNzQwMDAzLDkuNzM1OTk3MjggMTgzLjE4MjY2NywxMC4yOCBDMTgyLjYyNTMzMSwxMC44MjQwMDI3IDE4MS44ODUzMzgsMTEuMDk2IDE4MC45NjI2NjcsMTEuMDk2IFogTTE4NS4zNTIsMTEgTDE4NS4zNTIsNS4yOCBMMTg3LjU5Miw1LjI4IEMxODguMzQ0MDA0LDUuMjggMTg4LjkxOTk5OCw1LjQzMzMzMTggMTg5LjMyLDUuNzQgQzE4OS43MjAwMDIsNi4wNDY2NjgyIDE4OS45Miw2LjQ5ODY2MzY4IDE4OS45Miw3LjA5NiBMMTg5LjkyLDcuMTI4IEMxODkuOTIsNy44NjQwMDM2OCAxODkuNTc2MDAzLDguMzY1MzMyIDE4OC44ODgsOC42MzIgTDE5MC4yNTYsMTEgTDE4OC41MjgsMTEgTDE4Ny4zNjgsOC45NTIgTDE4Ni45ODQsOC45NTIgTDE4Ni45ODQsMTEgTDE4NS4zNTIsMTEgWiBNMTg2Ljk4NCw3Ljg4OCBMMTg3LjUxMiw3Ljg4OCBDMTg4LjA2MTMzNiw3Ljg4OCAxODguMzM2LDcuNjU2MDAyMzIgMTg4LjMzNiw3LjE5MiBMMTg4LjMzNiw3LjE2IEMxODguMzM2LDYuNzI3OTk3ODQgMTg4LjA2NDAwMyw2LjUxMiAxODcuNTIsNi41MTIgTDE4Ni45ODQsNi41MTIgTDE4Ni45ODQsNy44ODggWiIgaWQ9ImNvbG9yIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2MC4yNzg2NjcsNDcgTDE2Mi4xMTA2NjcsNDEuMjggTDE2NC4yMzA2NjcsNDEuMjggTDE2Ni4wNDY2NjcsNDcgTDE2NC4zMTA2NjcsNDcgTDE2NC4wMDY2NjcsNDUuOTM2IEwxNjIuMTEwNjY3LDQ1LjkzNiBMMTYxLjgwNjY2Nyw0NyBMMTYwLjI3ODY2Nyw0NyBaIE0xNjMuMDYyNjY3LDQyLjYwOCBMMTYyLjQzMDY2Nyw0NC44MDggTDE2My42ODY2NjcsNDQuODA4IEwxNjMuMDYyNjY3LDQyLjYwOCBaIE0xNjcuMjM2LDQ3IEwxNjcuMjM2LDQxLjI4IEwxNjkuMDg0LDQxLjI4IEwxNzAuOTE2LDQ0LjUwNCBMMTcwLjkxNiw0MS4yOCBMMTcyLjM0OCw0MS4yOCBMMTcyLjM0OCw0NyBMMTcwLjc2NCw0NyBMMTY4LjY3Niw0My40MDggTDE2OC42NzYsNDcgTDE2Ny4yMzYsNDcgWiBNMTc2LjY4MTMzMyw0Ny4wOTYgQzE3NS43MzE5OTUsNDcuMDk2IDE3NC45OTQ2NjksNDYuODI5MzM2IDE3NC40NjkzMzMsNDYuMjk2IEMxNzMuOTQzOTk3LDQ1Ljc2MjY2NCAxNzMuNjgxMzMzLDQ1LjA1NjAwNDQgMTczLjY4MTMzMyw0NC4xNzYgTDE3My42ODEzMzMsNDQuMTEyIEMxNzMuNjgxMzMzLDQzLjI0Nzk5NTcgMTczLjk2Mzk5Nyw0Mi41NDUzMzYgMTc0LjUyOTMzMyw0Mi4wMDQgQzE3NS4wOTQ2NjksNDEuNDYyNjY0IDE3NS44MTE5OTYsNDEuMTkyIDE3Ni42ODEzMzMsNDEuMTkyIEMxNzcuNDEyMDA0LDQxLjE5MiAxNzguMDI1MzMxLDQxLjM2NjY2NDkgMTc4LjUyMTMzMyw0MS43MTYgQzE3OS4wMTczMzYsNDIuMDY1MzM1MSAxNzkuMjkyLDQyLjU5MTk5NjUgMTc5LjM0NTMzMyw0My4yOTYgTDE3Ny43MjEzMzMsNDMuMjk2IEMxNzcuNjQxMzMzLDQyLjc1MTk5NzMgMTc3LjI5NzMzNiw0Mi40OCAxNzYuNjg5MzMzLDQyLjQ4IEMxNzYuMjgzOTk4LDQyLjQ4IDE3NS45NjY2NjgsNDIuNjI2NjY1MiAxNzUuNzM3MzMzLDQyLjkyIEMxNzUuNTA3OTk5LDQzLjIxMzMzNDggMTc1LjM5MzMzMyw0My42MTg2NjQxIDE3NS4zOTMzMzMsNDQuMTM2IEwxNzUuMzkzMzMzLDQ0LjIgQzE3NS4zOTMzMzMsNDQuNzAxMzM1OCAxNzUuNDk4NjY2LDQ1LjEwMTMzMTggMTc1LjcwOTMzMyw0NS40IEMxNzUuOTIwMDAxLDQ1LjY5ODY2ODIgMTc2LjI1OTk5OCw0NS44NDggMTc2LjcyOTMzMyw0NS44NDggQzE3Ny4xMDI2NjksNDUuODQ4IDE3Ny4zODEzMzIsNDUuNzY2NjY3NSAxNzcuNTY1MzMzLDQ1LjYwNCBDMTc3Ljc0OTMzNCw0NS40NDEzMzI1IDE3Ny44NDkzMzMsNDUuMjM0NjY3OSAxNzcuODY1MzMzLDQ0Ljk4NCBMMTc2Ljc5MzMzMyw0NC45ODQgTDE3Ni43OTMzMzMsNDMuODQgTDE3OS40ODEzMzMsNDMuODQgTDE3OS40ODEzMzMsNDQuNTQ0IEMxNzkuNDgxMzMzLDQ1LjMwMTMzNzEgMTc5LjIzODY2OSw0NS45MTU5OTc2IDE3OC43NTMzMzMsNDYuMzg4IEMxNzguMjY3OTk4LDQ2Ljg2MDAwMjQgMTc3LjU3NzMzOCw0Ny4wOTYgMTc2LjY4MTMzMyw0Ny4wOTYgWiBNMTgwLjgxNDY2Nyw0NyBMMTgwLjgxNDY2Nyw0MS4yOCBMMTgyLjQ2MjY2Nyw0MS4yOCBMMTgyLjQ2MjY2Nyw0NS43MjggTDE4NC42MjI2NjcsNDUuNzI4IEwxODQuNjIyNjY3LDQ3IEwxODAuODE0NjY3LDQ3IFogTTE4NS45NDgsNDcgTDE4NS45NDgsNDEuMjggTDE4OS45LDQxLjI4IEwxODkuOSw0Mi41NDQgTDE4Ny41OCw0Mi41NDQgTDE4Ny41OCw0My41MjggTDE4OS40MjgsNDMuNTI4IEwxODkuNDI4LDQ0LjY5NiBMMTg3LjU4LDQ0LjY5NiBMMTg3LjU4LDQ1LjczNiBMMTkwLjAyOCw0NS43MzYgTDE5MC4wMjgsNDcgTDE4NS45NDgsNDcgWiIgaWQ9ImFuZ2xlIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5My4wMDAwMDAsIDc2LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS0xMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS05Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsLW9wYWNpdHk9IjAuNCIgZmlsbD0iIzk4RDVCMCIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMiI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkZpbGwtMS1Db3B5LTYiPgogICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iIzYzNjU2RSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzQuNjQxNDMsOTQuNTE4OTI3NiBMMjM2LjEwNTU3Myw5Ny40NDcyMTM2IEwyMzYuNTUyNzg2LDk4LjM0MTY0MDggTDIzNy40NDcyMTQsOTcuODk0NDI3MiBMMjM5LjQ0NzIxNCw5Ni44OTQ0MjcyIEwyNDAuMzQxNjQxLDk2LjQ0NzIxMzYgTDIzOS44OTQ0MjcsOTUuNTUyNzg2NCBMMjM4LjQ3OTk0Miw5Mi43MjM4MTU1IEwyMzkuMjU4Njc1LDkyLjU2ODA2OSBDMjQxLjcxMzg1NSw5Mi4wNzcwMzI4IDI0Mi4yNDAyNTMsODkuOTExNTc3NCAyNDAuMjg1NzI5LDg4LjM0Nzk1ODEgTDIzNy42MjQ2OTUsODYuMjE5MTMxMiBMMjMzLjk0Mjc4MSw4My4xNTA2MDk2IEMyMzIuMDE4MTQ5LDgxLjU0Njc0OTYgMjMwLDgyLjUwMzkxMTIgMjMwLDg1LjAwOTI1NDUgTDIzMCw4OSBMMjMwLDkyLjk5MDc0NTUgQzIzMCw5NS40NzQyMjEyIDIzMi4wMTA2NDMsOTYuNDkyMDE3NiAyMzMuOTk2MDk1LDk1LjAwMjkyODkgTDIzNC42NDE0Myw5NC41MTg5Mjc2IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS04Ij4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGwtb3BhY2l0eT0iMC40IiBmaWxsPSIjOThENUIwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTE0Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiM5OEQ1QjAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMTYxIiB5PSI1NyIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},0:function(e,t){},"0Kl5":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDx0aXRsZT4KICAgICAgICBkZXRhaWwtbWFyawogICAgPC90aXRsZT4KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMikiIHN0cm9rZT0iIzc1Nzc4MyIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iMiIgcj0iMiIvPgogICAgICAgIDxjaXJjbGUgY3g9IjIiIGN5PSI4IiByPSIyIi8+CiAgICAgICAgPGNpcmNsZSBjeD0iOCIgY3k9IjgiIHI9IjIiLz4KICAgIDwvZz4KPC9zdmc+"},"0Luh":function(e,t){e.exports='<div class="default-modal switch-to-org-modal">\n  <h3 class="modal-header">Connect your Data Source<a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <div class="modal-container">\n    <p>To work with a privately connected data source, you\'ll need to create an organization first. Organizations help teams work together on analysis and share data privately.</p>\n  </div>\n  <div class="modal-action-bar">\n   <a href="/organizations/new" target="_self"><button class="btn btn-lg btn-filled-primary">Create Organization</button></a>\n  </div>\n</div>\n'},"0UVZ":function(e,t){e.exports='<div class="default-modal viz-lightbox-modal-content">\n  <visualization-container\n    visualization="visualization"\n    sidebar-open="sidebarOpen"\n    owner="owner"\n    on-dismiss="$dismiss();">\n  </visualization-container>\n</div>\n'},"0YuG":function(e,t){e.exports=window.angular},"0e28":function(e,t,n){"use strict";n.d(t,"e",function(){return p}),n.d(t,"b",function(){return g}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return b});var r,o=n("Zz1P"),i=(n.n(o),n("vqB5")),a=n("m9my"),l=(n.n(a),n("sGhr")),s=n("xEvw"),c=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),d=function(e){function SingleValueSelection(t){return t?e.call(this,t)||this:e.call(this)||this}return c(SingleValueSelection,e),Object.defineProperty(SingleValueSelection.prototype,"all",{get:function(){return this.get("all",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueSelection.prototype,"value",{get:function(){return this.get("value",void 0)},enumerable:!0,configurable:!0}),SingleValueSelection.prototype.with=function(e){return this.merge(e)},SingleValueSelection}(Object(i.e)({all:!0,value:null})),u={id:null,name:"",position:null,formula:"NULL",dataType:a.DataType.STRING,formulaType:a.DataType.STRING,varType:a.VariableType.DISCRETE,filterType:s.b.Single,controlType:s.a.List,default:new d,selected:new d,options:new l.b},p=function(e){function SingleValueFilterControl(t){return t?e.call(this,t)||this:e.call(this)||this}return c(SingleValueFilterControl,e),SingleValueFilterControl.fromJS=function(e){return new SingleValueFilterControl(e).with({options:new l.b({isLoaded:e.options.isLoaded,values:Object(i.a)(e.options.values)}),default:new d({all:e.default.all,value:e.default.value}),selected:new d({all:e.selected.all,value:e.selected.value})})},Object.defineProperty(SingleValueFilterControl.prototype,"id",{get:function(){return this.get("id",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"name",{get:function(){return this.get("name",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"position",{get:function(){return this.get("position",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"formula",{get:function(){return this.get("formula",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"dataType",{get:function(){return this.get("dataType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"formulaType",{get:function(){return this.get("formulaType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"varType",{get:function(){return this.get("varType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"filterType",{get:function(){return s.b.Single},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"controlType",{get:function(){return this.get("controlType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"selected",{get:function(){return this.get("selected",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"default",{get:function(){return this.get("default",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"options",{get:function(){return this.get("options",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"isDiscrete",{get:function(){return this.varType===a.VariableType.DISCRETE},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"isContinuous",{get:function(){return this.varType===a.VariableType.CONTINUOUS},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"isDateType",{get:function(){switch(this.formulaType){case a.DataType.DATE:case a.DataType.DATETIME:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"isDiscreteDateType",{get:function(){switch(this.formulaType){case a.DataType.DATEQTR:case a.DataType.DATEMONTH:case a.DataType.DATEWKDAY:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"isStringType",{get:function(){switch(this.formulaType){case a.DataType.STRING:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(SingleValueFilterControl.prototype,"isNumericType",{get:function(){switch(this.formulaType){case a.DataType.FLOAT:case a.DataType.INTEGER:case a.DataType.NUMBER:return!0;default:return!1}},enumerable:!0,configurable:!0}),SingleValueFilterControl.prototype.with=function(e){return this.merge(e)},SingleValueFilterControl}(Object(i.e)(u)),h={all:!0,values:Object(i.f)()},g=function(e){function MultiValueSelection(t){return t?e.call(this,t)||this:e.call(this)||this}return c(MultiValueSelection,e),Object.defineProperty(MultiValueSelection.prototype,"all",{get:function(){return this.get("all",!1)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueSelection.prototype,"values",{get:function(){return this.get("values",void 0)},enumerable:!0,configurable:!0}),MultiValueSelection.prototype.with=function(e){return this.merge(e)},MultiValueSelection}(Object(i.e)(h)),m={id:null,name:"",position:null,formula:"NULL",dataType:a.DataType.STRING,formulaType:a.DataType.STRING,varType:a.VariableType.DISCRETE,filterType:s.b.Multi,controlType:s.a.List,selected:new g,default:new g,options:new l.b},f=function(e){function MultiValueFilterControl(t){return t?e.call(this,t)||this:e.call(this)||this}return c(MultiValueFilterControl,e),MultiValueFilterControl.fromJS=function(e){return new MultiValueFilterControl(e).with({options:new l.b({isLoaded:e.options.isLoaded,values:Object(i.a)(e.options.values)}),default:new g({all:e.default.all,values:Object(i.f)(e.default.values)}),selected:new g({all:e.selected.all,values:Object(i.f)(e.selected.values)})})},Object.defineProperty(MultiValueFilterControl.prototype,"id",{get:function(){return this.get("id",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"name",{get:function(){return this.get("name",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"position",{get:function(){return this.get("position",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"formula",{get:function(){return this.get("formula",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"dataType",{get:function(){return this.get("dataType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"formulaType",{get:function(){return this.get("formulaType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"varType",{get:function(){return this.get("varType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"filterType",{get:function(){return s.b.Multi},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"controlType",{get:function(){return this.get("controlType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"selected",{get:function(){return this.get("selected",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"default",{get:function(){return this.get("default",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"options",{get:function(){return this.get("options",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"isDiscrete",{get:function(){return this.varType===a.VariableType.DISCRETE},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"isContinuous",{get:function(){return this.varType===a.VariableType.CONTINUOUS},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"isDateType",{get:function(){switch(this.formulaType){case a.DataType.DATE:case a.DataType.DATETIME:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"isDiscreteDateType",{get:function(){switch(this.formulaType){case a.DataType.DATEQTR:case a.DataType.DATEMONTH:case a.DataType.DATEWKDAY:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"isStringType",{get:function(){switch(this.formulaType){case a.DataType.STRING:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(MultiValueFilterControl.prototype,"isNumericType",{get:function(){switch(this.formulaType){case a.DataType.FLOAT:case a.DataType.INTEGER:case a.DataType.NUMBER:return!0;default:return!1}},enumerable:!0,configurable:!0}),MultiValueFilterControl.prototype.with=function(e){return this.merge(e)},MultiValueFilterControl}(Object(i.e)(m)),C={id:null,name:"",position:null,formula:"NULL",dataType:a.DataType.NUMBER,formulaType:a.DataType.NUMBER,varType:a.VariableType.CONTINUOUS,filterType:s.b.Range,controlType:s.a.Range,selected:new l.c,default:new l.c,includeNulls:!1,options:new l.d},y=function(e){function RangeValueFilterControl(t){return t?e.call(this,t)||this:e.call(this)||this}return c(RangeValueFilterControl,e),RangeValueFilterControl.fromJS=function(e){return new RangeValueFilterControl(e).with({options:new l.d({isLoaded:e.options.isLoaded,values:new l.c(e.options.values)}),default:new l.c(e.default),selected:new l.c(e.selected)})},Object.defineProperty(RangeValueFilterControl.prototype,"id",{get:function(){return this.get("id",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"name",{get:function(){return this.get("name",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"position",{get:function(){return this.get("position",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"formula",{get:function(){return this.get("formula",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"dataType",{get:function(){return this.get("dataType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"formulaType",{get:function(){return this.get("formulaType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"varType",{get:function(){return this.get("varType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"filterType",{get:function(){return s.b.Range},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"controlType",{get:function(){return this.get("controlType",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"selected",{get:function(){return this.get("selected",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"default",{get:function(){return this.get("default",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"options",{get:function(){return this.get("options",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"includeNulls",{get:function(){return this.get("includeNulls",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"isDiscrete",{get:function(){return this.varType===a.VariableType.DISCRETE},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"isContinuous",{get:function(){return this.varType===a.VariableType.CONTINUOUS},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"isDateType",{get:function(){switch(this.formulaType){case a.DataType.DATE:case a.DataType.DATETIME:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"isDiscreteDateType",{get:function(){switch(this.formulaType){case a.DataType.DATEQTR:case a.DataType.DATEMONTH:case a.DataType.DATEWKDAY:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"isStringType",{get:function(){switch(this.formulaType){case a.DataType.STRING:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueFilterControl.prototype,"isNumericType",{get:function(){switch(this.formulaType){case a.DataType.FLOAT:case a.DataType.INTEGER:case a.DataType.NUMBER:return!0;default:return!1}},enumerable:!0,configurable:!0}),RangeValueFilterControl.prototype.with=function(e){return this.merge(e)},Object.defineProperty(RangeValueFilterControl.prototype,"selectedAsDates",{get:function(){var e=this.selected,t=e.min,n=e.max,r=null===t?null:o.utc(t),i=null===n?null:o.utc(n);return r&&r.isValid()&&r.startOf("day"),i&&i.isValid()&&(i.add(1,"days"),i.startOf("day")),this.selected.with({min:r&&r.valueOf(),max:i&&i.valueOf()})},enumerable:!0,configurable:!0}),RangeValueFilterControl.prototype.withDates=function(e){var t=null===e.max?null:o.utc(e.max);return t&&t.isValid()&&t.subtract(1,"days"),this.merge({selected:e.with({max:t&&t.valueOf()})})},RangeValueFilterControl}(Object(i.e)(C)),b=function(){function ReportFilterControlFactory(){}return ReportFilterControlFactory.buildFromResource=function(e){switch(e.filter_type){case s.b.Single:return new p({id:e.token,name:e.name,position:e.row_order,formula:e.formula,dataType:e.data_type,formulaType:e.formula_type,varType:e.variable_type,controlType:e.control_type,default:new d({all:(e.options.default||{all:!0}).all,value:(e.options.default||{value:null}).value}),selected:new d({all:(e.options.default||{all:!0}).all,value:(e.options.default||{value:null}).value})});case s.b.Multi:return new f({id:e.token,name:e.name,position:e.row_order,formula:e.formula,dataType:e.data_type,formulaType:e.formula_type,varType:e.variable_type,controlType:e.control_type,default:new g({all:(e.options.default||{all:!0}).all,values:Object(i.f)((e.options.default||{values:[]}).values)}),selected:new g({all:(e.options.default||{all:!0}).all,values:Object(i.f)((e.options.default||{values:[]}).values)})});case s.b.Range:return new y({id:e.token,name:e.name,position:e.row_order,formula:e.formula,dataType:e.data_type,formulaType:e.formula_type,varType:e.variable_type,controlType:e.control_type,default:new l.c(e.options.default),selected:new l.c(e.options.default)})}},ReportFilterControlFactory.buildDefaultSelectControl=function(e){var t="["+e.name+"]";return new f({id:e.dataType+":"+t,name:e.name,formula:t,dataType:e.dataType,formulaType:e.dataType,varType:a.VariableType.DISCRETE})},ReportFilterControlFactory.buildDefaultRangeControl=function(e){var t="["+e.name+"]";return new y({id:e.dataType+":"+t,name:e.name,formula:t,dataType:e.dataType,formulaType:e.dataType,varType:a.VariableType.CONTINUOUS})},ReportFilterControlFactory.buildDefaultDateControl=function(e){var t="["+e.name+"]";return new y({id:e.dataType+":"+t,name:e.name,formula:t,dataType:e.dataType,formulaType:e.dataType})},ReportFilterControlFactory.buildDefaultYearControl=function(e){var t="DATEPART('year', ["+e.name+"])";return new f({id:e.dataType+":"+t,name:"Year ("+e.name+")",formula:t,dataType:e.dataType,formulaType:a.DataType.INTEGER})},ReportFilterControlFactory.buildDefaultQuarterControl=function(e){var t="DATEPART('quarter', ["+e.name+"])";return new f({id:e.dataType+":"+t,name:"Quarter ("+e.name+")",formula:t,dataType:e.dataType,formulaType:a.DataType.DATEQTR})},ReportFilterControlFactory.buildDefaultMonthControl=function(e){var t="DATEPART('month', ["+e.name+"])";return new f({id:e.dataType+":"+t,name:"Month ("+e.name+")",formula:t,dataType:e.dataType,formulaType:a.DataType.DATEMONTH})},ReportFilterControlFactory.buildDefaultDayControl=function(e){var t="DATEPART('day', ["+e.name+"])";return new f({id:e.dataType+":"+t,name:"Day of Month ("+e.name+")",formula:t,dataType:e.dataType,formulaType:a.DataType.INTEGER})},ReportFilterControlFactory.buildDefaultWeekControl=function(e){var t="DATEPART('week', ["+e.name+"])";return new f({id:e.dataType+":"+t,name:"Week of Year ("+e.name+")",formula:t,dataType:e.dataType,formulaType:a.DataType.INTEGER})},ReportFilterControlFactory.buildDefaultWeekdayControl=function(e){var t="DATEPART('weekday', ["+e.name+"])";return new f({id:e.dataType+":"+t,name:"Day of Week ("+e.name+")",formula:t,dataType:e.dataType,formulaType:a.DataType.DATEWKDAY})},ReportFilterControlFactory.convertToFilterType=function(e,t){var n=e.id,r=e.name,o=e.position,i=e.formula,l=e.formulaType,c=e.dataType;switch(t){case s.b.Single:return new p({id:n,name:r,position:o,formula:i,formulaType:l,dataType:c,varType:a.VariableType.DISCRETE,default:this.convertToSingleValueDefault(e),selected:this.convertToSingleValueSelection(e)});case s.b.Multi:return new f({id:n,name:r,position:o,formula:i,formulaType:l,dataType:c,varType:a.VariableType.DISCRETE,default:this.convertToMultiValueDefault(e),selected:this.convertToMultiValueSelection(e)});case s.b.Range:return new y({id:n,name:r,position:o,formula:i,formulaType:l,dataType:c,varType:a.VariableType.CONTINUOUS})}},ReportFilterControlFactory.convertToSingleValueDefault=function(e){switch(e.filterType){case s.b.Single:return e.default;case s.b.Multi:return this.convertMultiSelectionToSingleSelection(e.default);default:return new d}},ReportFilterControlFactory.convertToSingleValueSelection=function(e){switch(e.filterType){case s.b.Single:return e.selected;case s.b.Multi:return this.convertMultiSelectionToSingleSelection(e.selected);default:return new d}},ReportFilterControlFactory.convertMultiSelectionToSingleSelection=function(e){return e.all,new d},ReportFilterControlFactory.convertToMultiValueDefault=function(e){switch(e.filterType){case s.b.Multi:return e.default;case s.b.Single:return this.convertSingleSelectionToMultiSelection(e.default);default:return new g}},ReportFilterControlFactory.convertToMultiValueSelection=function(e){switch(e.filterType){case s.b.Multi:return e.selected;case s.b.Single:return this.convertSingleSelectionToMultiSelection(e.selected);default:return new g}},ReportFilterControlFactory.convertSingleSelectionToMultiSelection=function(e){return e.all?new g:new g({all:!1,values:Object(i.f)([e.value])})},ReportFilterControlFactory}()},"0iPh":function(e,t){e.exports=window.jQuery},"0ivk":function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.notifySafely=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window.bugsnagClient&&window.bugsnagClient.notify&&(e=window.bugsnagClient).notify.apply(e,t)},e.leaveBreadcrumbSafely=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window.bugsnagClient&&window.bugsnagClient.leaveBreadcrumb&&(e=window.bugsnagClient).leaveBreadcrumb.apply(e,t)}}(r||(r={}))},"0joF":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNnB4IiBoZWlnaHQ9IjRweCIgdmlld0JveD0iMCAwIDYgNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDIgKDM2NzgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT50b29sYmFyLWRyb3Bkb3duLXNlbGVjdGVkPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Im1vY2t1cHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIGQ9Ik0yLjM4ODAxNTU2LDAuMzUzODY1MTQzIEMyLjcyNTYxODYzLC0wLjA4NDUxOTI0MDQgMy4yNjc1OTg4OSwtMC4wOTE1MDg0OTM4IDMuNjEwNTg0NDQsMC4zNTM4NjUxNDMgTDUuODA3MjE1NTYsMy4yMDYyMzQ4NiBDNi4xNDQ4MTg2MywzLjY0NDYxOTI0IDUuOTY5ODEzNDgsNCA1LjQwOTQ3MDUzLDQgTDAuNTg5MTI5NDcxLDQgQzAuMDMxODU3ODgyLDQgLTAuMTUxNjAxMTExLDMuNjUxNjA4NDkgMC4xOTEzODQ0MzgsMy4yMDYyMzQ4NiBMMi4zODgwMTU1NiwwLjM1Mzg2NTE0MyBaIiBpZD0idG9vbGJhci1kcm9wZG93bi1zZWxlY3RlZCIgZmlsbD0iIzAwQTNDNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy4wMDAwMDAsIDIuMDAwMDAwKSBzY2FsZSgtMSwgLTEpIHRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0yLjAwMDAwMCkgIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="},1:function(e,t){},"1XgQ":function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">Rename Query</h3>\n  <form name="queryRenameForm">\n    <div class="modal-container-sm">\n      <label class="form-label">Name</label>\n      <span class="form-control-error" ng-show="queryRenameForm.queryName.$error.required">Name cannot be empty</span>\n      <span class="form-control-error" ng-show="queryRenameForm.queryName.$error.maxlength">Name must be under 255 characters long</span>\n      <input type="text" name="queryName" class="form-control form-control-block next-form-control" autocomplete="off" focus-me ng-maxlength="255" required ng-model="ctrl.queryName" placeholder="Query name">\n    </div>\n    <div class="modal-action-bar">\n      <button type="submit" ng-disabled="queryRenameForm.$invalid" class="btn btn-lg btn-filled-primary" ng-click="ctrl.saveAndClose()">Save</button>\n      <button class="btn btn-lg btn-filled-secondary pull-left" ng-click="$dismiss()">Cancel</button>\n    </div>\n  </form>\n</div>'},"1azF":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return c});var r,o=n("SdCE"),i=(n.n(o),n("vqB5")),a=n("pJkt"),l=n("hbv7"),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function immutableEqualityCheck(e,t,n){return Object(i.h)(e,t)}!function(e){e.Python="python",e.R="r",e.Markdown="markdown"}(r||(r={}));var c,d=Object(o.createSelectorCreator)(o.defaultMemoize,immutableEqualityCheck),u=Object(o.createSelectorCreator)(o.defaultMemoize,function(e,t,n){if(immutableEqualityCheck(e,t))return!0;if(Array.isArray(e)&&Array.isArray(t)){var r=e,o=t;return r.length===o.length&&r.every(function(e,t){return e.content===o[t].content&&e.content_type===o[t].content_type&&e.result_type===o[t].result_type&&e.token===o[t].token})}if(null!=e&&null!=t){var i=e,a=e;return i.content===a.content&&i.content_type===a.content_type&&i.result_type===a.result_type&&i.token===a.token}return!1});function getNormalizedCellRunResult(e,t){return{token:t,result_type:e.resultTypes.get(t),content_type:e.contentTypes.get(t),content:e.contents.get(t),resource:e.resources.get(t)}}function notebookPath(e){return e.client.notebooks}function cellPath(e){return notebookPath(e).cells}function runPath(e){return notebookPath(e).cellRuns}function vizPath(e){return e.client.selectedReport.notebookViz}!function(e){function createResultTokensByVizSelector(e){return Object(o.createSelector)(function(t){return t.client.selectedReport.notebookViz.cellTokens.get(e)},function(e){return e.client.notebooks.cells.lastRunTokens},function(e){return e.client.notebooks.cellRuns.resultTokens},function(e,t,n){if(e&&t.has(e)){var r=n.get(t.get(e));if(r)return r.filter(function(e){return null!=e})}})}function createLastResultsByCellSelector(t){var n=d(function(n){return e.runsResultTokensArray(n).get(e.cellLastRunTokensArray(n).get(t))},function(e){return e.client.notebooks.cellRunResults},function(e,t){return e&&t.tokens.intersect(e).map(function(e){return getNormalizedCellRunResult(t,e)}).toArray()||[]});return u(n,function(e){return e})}function createMemoizedResultsByVizSelector(e){var t=d(createResultTokensByVizSelector(e),function(e){return e.client.notebooks.cellRunResults},function(e,t){return e&&t.tokens.intersect(e).map(function(e){return getNormalizedCellRunResult(t,e)}).toArray()||[]});return u(t,function(e){return e})}function createIsCellEditingSelector(t){return Object(o.createSelector)(e.selectedCellToken,e.isEditing,function(e,n){return e===t&&n})}function createNotebookStateSelector(t){return Object(o.createSelector)(function(n){return e.notebookStatesArray(n).get(t)},function(e){return e})}e.notebookTokensArray=function(e){return notebookPath(e).books.tokens},e.notebookCellTokensArray=function(e){return notebookPath(e).books.cellTokensByNotebook},e.notebookSessionsArray=function(e){return notebookPath(e).books.sessions},e.notebookStatesArray=function(e){return notebookPath(e).books.states},e.notebookTypesArray=function(e){return notebookPath(e).books.notebookTypes},e.notebookAwaitingRunArray=function(e){return notebookPath(e).books.awaitingInitialRun},e.notebookResourcesArray=function(e){return notebookPath(e).books.resources},e.cellContentsArray=function(e){return cellPath(e).contents},e.cellContentTypesArray=function(e){return cellPath(e).contentTypes},e.cellCreatedAtArray=function(e){return cellPath(e).createdAt},e.cellExecutingArray=function(e){return cellPath(e).executing},e.cellFoldedArray=function(e){return cellPath(e).folded},e.cellFrozenArray=function(e){return cellPath(e).frozen},e.cellLastRunTokensArray=function(e){return cellPath(e).lastRunTokens},e.cellMissingRunsArray=function(e){return cellPath(e).missingRuns},e.cellResourcesArray=function(e){return cellPath(e).resources},e.runsResultTokensArray=function(e){return runPath(e).resultTokens},e.runsExecutionCountsArray=function(e){return runPath(e).executionCounts},e.resultsTokensArray=function(e){return function(e){return notebookPath(e).cellRunResults}(e).tokens},e.vizTokensArray=function(e){return vizPath(e).tokens},e.vizCellTokensArray=function(e){return vizPath(e).cellTokens},e.vizTitlesArray=function(e){return vizPath(e).titles},e.vizResourcesArray=function(e){return vizPath(e).resources},e.vizRunState=function(e){return vizPath(e).runState},e.selectedNotebookToken=function(t){return e.notebookTokensArray(t).first()},e.selectedNotebookCellTokens=Object(o.createSelector)(e.selectedNotebookToken,e.notebookCellTokensArray,function(e,t){return t.get(e)}),e.selectedNotebookSession=Object(o.createSelector)(e.selectedNotebookToken,e.notebookSessionsArray,function(e,t){return t.get(e)}),e.selectedNotebookResource=Object(o.createSelector)(e.selectedNotebookToken,e.notebookResourcesArray,function(e,t){return t.get(e)}),e.selectedNotebookType=Object(o.createSelector)(e.selectedNotebookToken,e.notebookTypesArray,function(e,t){return t.get(e)}),e.selectedNotebookState=Object(o.createSelector)(e.selectedNotebookToken,e.notebookStatesArray,function(e,t){return t.get(e)}),e.selectedNotebookLabel=Object(o.createSelector)(e.selectedNotebookType,function(e){return e?"python"===e?"Python Notebook":"R Notebook":"New Notebook"}),e.selectedNotebookIcon=Object(o.createSelector)(e.selectedNotebookType,function(e){return e?"python"===e?"icon-notebook-py-gray":"icon-notebook-r-gray":"icon-notebook-gray"}),e.reportVisuals=Object(o.createSelector)(e.vizTokensArray,e.vizCellTokensArray,e.vizTitlesArray,e.vizResourcesArray,e.cellLastRunTokensArray,e.runsResultTokensArray,function(e){return e.client.notebooks.cellRunResults},function(e,t,n,r,o,i,a){return e.map(function(e){var l=t.get(e),s=o.get(l),c=i.get(s);if(null!=c){var d=c.map(function(e){return getNormalizedCellRunResult(a,e)});return{token:e,title:n.get(e),vizResource:r.get(e),results:d.toArray()}}}).filter(function(e){return null!=e}).toArray()}),e.cellTokensForSelectedReport=Object(o.createSelector)(e.vizTokensArray,e.vizCellTokensArray,function(e,t){return e.map(function(e){return t.get(e)})}),e.isEditing=function(e){return notebookPath(e).editor.isEditing},e.selectedCellToken=function(e){return e.client.notebooks.editor.selectedCellToken},e.editingCellToken=Object(o.createSelector)(e.selectedCellToken,e.isEditing,function(e,t){return t&&e}),e.selectedCellExecuting=Object(o.createSelector)(e.selectedCellToken,e.cellExecutingArray,function(e,t){return t.get(e)||!1}),e.selectedCellContentType=Object(o.createSelector)(e.selectedCellToken,e.cellContentTypesArray,function(e,t){return t.get(e)}),e.selectedCellContent=Object(o.createSelector)(e.selectedCellToken,e.cellContentsArray,function(e,t){return t.get(e)}),e.selectedCellIsInLayout=Object(o.createSelector)(e.selectedCellToken,e.cellTokensForSelectedReport,function(e,t){return t.has(e)}),e.selectedCellDirty=Object(o.createSelector)(e.selectedCellToken,e.cellContentsArray,e.cellResourcesArray,function(e,t,n){return n.has(e)&&t.get(e)!==n.get(e).content}),e.selectedCellFrozen=Object(o.createSelector)(e.selectedCellToken,e.cellFrozenArray,function(e,t){return t.get(e)}),e.selectedCellFolded=Object(o.createSelector)(e.selectedCellToken,e.cellFoldedArray,function(e,t){return t.get(e)}),e.selectedCellHasResult=Object(o.createSelector)(e.selectedCellToken,e.selectedCellContentType,e.cellLastRunTokensArray,e.runsResultTokensArray,function(e,t,n,r){return e&&t!==l.a.Markdown&&n.has(e)&&r.has(n.get(e))&&r.get(n.get(e)).size>0}),e.selectedNextCellToken=Object(o.createSelector)(e.selectedCellToken,e.selectedNotebookCellTokens,function(e,t){if(t){var n=t.toIndexedSeq(),r=n.indexOf(e);if(r>-1)return n.get(r+1)}}),e.selectedPrevCellToken=Object(o.createSelector)(e.selectedCellToken,e.selectedNotebookCellTokens,function(e,t){if(t){var n=t.toIndexedSeq(),r=n.indexOf(e);if(r>0)return n.get(r-1)}}),e.createCellTokensInNotebookSelector=function(t){return Object(o.createSelector)(e.notebookCellTokensArray,function(e){return e.get(t)})},e.createResultTokensByVizSelector=createResultTokensByVizSelector,e.createLastResultsByCellSelector=createLastResultsByCellSelector,e.createMemoizedResultsByVizSelector=createMemoizedResultsByVizSelector,e.createVizRenderSelector=function(e){return Object(o.createSelector)(createMemoizedResultsByVizSelector(e),function(e){return e.client.selectedReport.notebookViz.frozen},function(e){return e.client.selectedReport.notebookViz.titles},function(e){return e.client.selectedReport.notebookViz.runState},function(e){return e.client.selectedReport.notebookViz.resources},function(e){return e.client.selectedReport.reportRun},function(t,n,r,o,i,a){var l=i.get(e);if(null!=l){var s=l.hasLink("report_run_pythonviz_web")?l.links("report_run_pythonviz_web").$expand({token:a.token},{excludeSSLPort:!0}):"",c=l.hasLink("report_run_pythonviz_web")?l.links("report_run_pythonviz_web").$expand({token:a.token},{excludeSSLPort:!0}):"";return{_name:"pythonVisualization",id:"python_"+l.token,title:r.get(l.token),frozen:n.has(l.token),state:o,vizLink:s,vizReportRunLink:c,results:t.map(function(e){return{token:l.token,content:e.content,type:e.content_type,result_type:e.result_type,content_type:e.content_type}})}}return null})},e.createVizByCellSelector=function(t){return Object(o.createSelector)(function(n){return e.vizCellTokensArray(n).findKey(function(e){return t===e})},e.vizTitlesArray,e.vizResourcesArray,createLastResultsByCellSelector(t),function(e,t,n,r){return{vizToken:e,title:t.get(e),vizResource:n.get(e),results:r}})},e.createIsNotebookReadySelector=function(t){return Object(o.createSelector)(e.notebookTokensArray,function(e){return e.has(t)})},e.createCellExecutionCountSelector=function(t){return Object(o.createSelector)(function(e){return cellPath(e).lastRunTokens.get(t)},e.runsExecutionCountsArray,function(e,t){return t.get(e)})},e.createNormalizedCellExResSelector=function(t){return Object(o.createStructuredSelector)({token:function(){return t},content:function(n){return e.cellContentsArray(n).get(t)},content_type:function(n){return e.cellContentTypesArray(n).get(t)},created_at:function(n){return e.cellCreatedAtArray(n).get(t)},frozen:function(n){return e.cellFrozenArray(n).get(t)},executing:function(n){return e.cellExecutingArray(n).get(t)},lastRunToken:function(n){return e.cellLastRunTokensArray(n).get(t)},folded:function(n){return e.cellFoldedArray(n).get(t)},missingRun:function(n){return e.cellMissingRunsArray(n).has(t)}})},e.createIsCellInLayoutSelector=function(t){return Object(o.createSelector)(e.cellTokensForSelectedReport,function(e){return e.contains(t)})},e.createIsCellEditingSelector=createIsCellEditingSelector,e.createMarkdownViewModeSelector=function(t){return Object(o.createSelector)(createIsCellEditingSelector(t),function(n){return e.cellContentTypesArray(n).get(t)},function(e,t){return!e&&t===l.a.Markdown})},e.createNotebookStateSelector=createNotebookStateSelector,e.createCanCellRunSelector=function(t){return Object(o.createSelector)(createNotebookStateSelector(t),e.selectedCellToken,e.selectedCellExecuting,e.selectedCellContentType,e.selectedCellContent,e.selectedCellDirty,e.selectedCellFrozen,function(e,t,n,r,o,i,s){return e===a.a.Ready&&null!=t&&!n&&!s&&null!=o&&o.trim().length>0&&(r!==l.a.Markdown||i)})},e.createCellAceLangSelector=function(t){return Object(o.createSelector)(e.selectedNotebookType,e.cellContentTypesArray,function(e,n){if(n.get(t)===l.a.Markdown)return r.Markdown;switch(e){case l.b.R:return r.R;case l.b.Python:default:return r.Python}})},e.notebookTokenByNotebook=function(t,n){return e.notebookTokensArray(t).get(n)},e.normalizedNotebookByToken=Object(o.createSelector)(function(e,t){return t},function(e){return e.client.notebooks.books},function(e,t){return function(e,t){return{token:t,pusherChannelName:e.pusherChannelNames.get(t),initialized:e.initialized.get(t),resource:e.resources.get(t),session:e.sessions.get(t),cellTokens:e.cellTokensByNotebook.get(t)&&e.cellTokensByNotebook.get(t).toArray()||[]}}(t,e)}),e.cellTokensByNotebook=function(t,n){return e.notebookCellTokensArray(t).get(n)},e.runnableCellTokensByNotebook=Object(o.createSelector)(e.cellTokensByNotebook,e.cellFrozenArray,e.cellContentTypesArray,e.cellContentsArray,function(e,t,n,r){return e.filterNot(function(e){return t.get(e)||"markdown"===n.get(e)||!r.get(e)})}),e.normalizedCellsByNotebook=Object(o.createSelector)(e.cellTokensByNotebook,function(e){return cellPath(e)},function(e,t){if(e)return t.tokens.filter(function(t){return e.contains(t)}).map(function(e){return function(e,t){return{token:t,content:e.contents.get(t),content_type:e.contentTypes.get(t),created_at:e.createdAt.get(t),frozen:e.frozen.get(t),executing:e.executing.get(t),lastRunToken:e.lastRunTokens.get(t),missingRun:e.missingRuns.has(t),resource:e.resources.get(t),folded:e.folded.get(t)}}(t,e)}).toArray()}),e.cellsByNotebook=Object(o.createSelector)(e.normalizedCellsByNotebook,e.cellTokensForSelectedReport,function(e,t){if(e)return e.map(function(e){return s({},e,{isInLayout:t.contains(e.token)})})}),e.cellRunTokensByNotebook=Object(o.createSelector)(e.cellTokensByNotebook,e.cellLastRunTokensArray,function(e,t){return t.filter(function(t,n){return e.has(n)}).valueSeq().toSet()}),e.cellRunResultTokensByNotebook=Object(o.createSelector)(e.cellRunTokensByNotebook,e.runsResultTokensArray,function(e,t){return t.filter(function(t,n){return e.has(n)}).valueSeq().flatten().toSet()}),e.sessionByNotebook=function(t,n){return e.notebookSessionsArray(t).get(n)},e.isRunningByNotebook=Object(o.createSelector)(e.cellTokensByNotebook,e.cellExecutingArray,function(e,t){return t.some(function(t,n){return t&&e.has(n)})}),e.stateByNotebook=Object(o.createSelector)(e.isRunningByNotebook,function(t,n){return e.notebookStatesArray(t).get(n)},function(e,t){return e?a.a.Running:t}),e.statusBarStateByNotebook=Object(o.createSelector)(e.stateByNotebook,function(e){switch(e){case a.a.Busy:return a.a.Error;case a.a.Session:return a.a.Loading;default:return e}}),e.stateMessageByNotebook=Object(o.createSelector)(e.stateByNotebook,e.sessionByNotebook,function(e,t){switch(e){case a.a.Error:if(t)switch(t.termination_reason){case"CRASHED":return"Notebook has encounted an unexpected error";case"EXPIRED":return"Notebook session ended due to inactivity";case"OOM":return"Notebook ran out of memory";default:return"Notebook session ended"}break;case a.a.Busy:return"Notebook session currently unavailable";case a.a.Loading:return"Loading data frames";case a.a.Session:return"Setting up notebook";default:return""}}),e.canRunByNotebook=Object(o.createSelector)(e.sessionByNotebook,e.stateByNotebook,function(e,t){return e&&e.active&&t===a.a.Ready}),e.canFreezeByCell=Object(o.createSelector)(function(t,n){return e.cellContentTypesArray(t).get(n)},function(e){return e!==l.a.Markdown}),e.vizTokenByCell=function(t,n){return e.vizCellTokensArray(t).findKey(function(e){return e===n})}}(c||(c={}))},2:function(e,t){},"2BGn":function(e,t,n){"use strict";for(var r=n("PbPb"),o=[{id:"contrast",name:"Vivid",thumb_colors:[2,1],colors:["#EE8D24","#43A5DA","#6AB328","#BB60F8","#E14459","#EAD022","#06D0AD","#DB38B7"],thumbnail:""},{id:"toughtea",name:"Subdued",thumb_colors:[0,2],colors:["#D09B61","#8BAF69","#7395C2","#B07DD0","#CB6262","#DED076","#81C2B7","#BF84B2"],thumbnail:""},{id:"rainbow",name:"Rainbow Sherbet",thumb_colors:[3,1],colors:["#0482C1","#F08E00","#19B02B","#E3352C","#B86EC6","#B06353","#00C3D2","#D4C500","#E67FC8","#A18D8D","#BCD6DF","#EEC37D","#B7DB92","#F0A5A1","#D8B8D5","#D8A89F","#D8C9C9","#E0D893","#CAC9E0"],thumbnail:""},{id:"candy",name:"Candy",thumb_colors:[3,1],colors:["#8EC37E","#F0C85B","#3EA5E7","#C16561","#F67919"],thumbnail:""},{id:"colorblind",name:"Colorblind Safe",thumb_colors:[3,1],colors:["#8853B8","#C2A4DB","#116578","#6DC590","#37B067"],thumbnail:""},{id:"monochrome",name:"Monochrome",thumb_colors:[2,0],colors:["#459595","#A0C9C9","#367272","#65D2CD","#16BDBD"],thumbnail:""},{id:"pastel",name:"Pastel",thumb_colors:[3,5],colors:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],thumbnail:""},{id:"green",name:"Green",thumb_colors:[3,1],colors:["#267B48","#2E9356","#37B067","#6DC590","#98D5B0"],thumbnail:""},{id:"blue",name:"Blue",thumb_colors:[3,1],colors:["#0E819A","#22A3C0","#77C7D9","#AEDEE9","#D0ECF2"],thumbnail:""},{id:"orange",name:"Orange",thumb_colors:[3,1],colors:["#A75126","#C7612E","#EE7437","#F39E73","#F6BA9D"],thumbnail:""},{id:"purple",name:"Purple",thumb_colors:[3,1],colors:["#72429C","#894FBA","#A072C7","#C2A4DB","#D4BFE6"],thumbnail:""},{id:"gray",name:"Gray",thumb_colors:[3,1],colors:["#2B2B2B","#394242","#646C6C","#95A1A1","#C3CBCB"],thumbnail:""}],i=0,a=o;i<a.length;i++){var l=a[i],s=l.colors[l.thumb_colors[0]],c=l.colors[l.thumb_colors[1]];l.thumbnail=["border-top-color:",s,";border-left-color:",s,";border-right-color:",c,";border-bottom-color:",c,";"].join("")}var d=function(){function ChartThemeService(){this.DEFAULT_THEME_ID="contrast",this.DEFAULT_SIMPLE_THEME_ID="green"}return ChartThemeService.prototype.getTheme=function(e){var t=this;return this.hasTheme(e)?o.filter(function(t){return t.id===e})[0]:o.filter(function(e){return e.id===t.DEFAULT_THEME_ID})[0]},ChartThemeService.prototype.getThemes=function(e){return o.filter(function(t){return!!~e.indexOf(t.id)})},ChartThemeService.prototype.getThemesAll=function(){return o},ChartThemeService.prototype.hasTheme=function(e){return o.some(function(t){return t.id===e})},ChartThemeService.prototype.getPalettes=function(e){return this.getThemes(e).map(function(e){var t=e.name,n=e.id,o=Object(r.take)(e.colors,5).map(function(e,t){var n;return(n={})["color_"+t]=e,n}).reduce(r.assign,{});return Object(r.assign)({name:t,value:n},o)})},ChartThemeService.prototype.getThumbPalette=function(e){if(!this.hasTheme(e))return null;var t=this.getTheme(e),n=t.colors,r=t.thumb_colors;return[n[r[0]],n[r[1]]]},ChartThemeService}();t.a=d},"2lJM":function(e,t){e.exports='<div class="default-modal context-modal">\n  <h3 class="modal-header">{{ ctrl.existingSpace ? \'Rename Space\' : \'Create a Space\' }}<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <form name="createSpaceForm" ng-submit="ctrl.createSpace()" novalidate>\n    <div class="modal-container">\n      <div class="form-element">\n        <label for="spaceName">Space Name</label>\n        <div class="inline-error pull-right" ng-show="createSpaceForm.spaceName.$error.spaceName">Space name is unavailable</div>\n        <div class="inline-error pull-right" ng-show="createSpaceForm.spaceName.$error.required && createSpaceForm.spaceName.$touched">Space name is required</div>\n        <div ng-show="createSpaceForm.invalidRequired">Space name is taken</div>\n        <input name="spaceName" type="text" placeholder="e.g. Marketing" class="form-control next-form-control" ng-model="ctrl.space.name" required autofocus space-name-validation />\n      </div>\n      <div class="form-element">\n        <label for="spaceDescription">Description</label>\n        <textarea name="spaceDescription" class="form-control next-form-control form-control-sm no-resize" ng-model="ctrl.space.description"></textarea>\n      </div>\n      <div class="form-element" ng-if="!ctrl.existingSpace && ctrl.space._formElements.restricted">\n        <span class="checkbox-lg">\n          <input type="checkbox" id="publish-report-checkbox" ng-model="ctrl.space.restricted" />\n          <label for="publish-report-checkbox">\n            <span class="toggle">\n              <i class="icon-success-check-inverted checkmark"></i>\n              <span class="switch"></span>\n            </span>\n            Make this Space private\n          </label>\n        </span>\n      </div>\n    </div>\n    <div class="modal-action-bar">\n      <button class="btn btn-lg btn-filled-primary" ng-disabled="createSpaceForm.$invalid" type="submit">{{ ctrl.existingSpace ? \'Save\' : \'Create\' }}</button>\n    </div>\n  </form>\n</div>\n'},3:function(e,t){},"3Os4":function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.LoadEmbeddedQueries="LoadEmbeddedQueries",e.LoadQueriesSuccess="PersistentLoadQueriesSuccess",e.LoadQueriesFailure="PersistentLoadQueriesFailure",e.CreateQuery="CreateQuery",e.CreateQuerySuccess="CreateQuerySuccess",e.CreateQueryFailure="CreateQueryFailure",e.SaveQuery="SaveQuery",e.SaveQuerySuccess="SaveQuerySuccess",e.SaveQueryFailure="SaveQueryFailure",e.UpdateQuery="UpdateQuery",e.UpdateQuerySuccess="UpdateQuerySuccess",e.UpdateQueryFailure="UpdateQueryFailure",e.FormatQuery="FormatQuery",e.FormatQuerySuccess="FormatQuerySuccess",e.FormatQueryFailure="FormatQueryFailure",e.DestroyQuery="DestroyQuery",e.DestroyQuerySuccess="DestroyQuerySuccess",e.DestroyQueryFailure="DestroyQueryFailure",e.BatchUpdateQueries="BatchUpdateQueries",e.BatchSaveOrUpdateQueryState="BatchSaveOrUpdateQueryState",e.UpdateQueryText="UpdateQueryText",e.UpdateSelectedQueryText="UpdateSelectedQueryText",e.UpdateQueryName="UpdateQueryName",e.UpdateQueryLimit="UpdateQueryLimit",e.UpdateQueryDatasource="UpdateQueryDatasource",e.UpdateQueryState="UpdateQueryState"}(r||(r={}))},"3nxw":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return l});var r={EnableSearch:"ENABLE_SEARCH",DisableSearch:"DISABLE_SEARCH",OpenSidebar:"OPEN_SIDEBAR",CloseSidebar:"CLOSE_SIDEBAR"},o=function(){return{type:r.EnableSearch}},i=function(){return{type:r.DisableSearch}},a=function(){return{type:r.OpenSidebar}},l=function(){return{type:r.CloseSidebar}}},"4bls":function(e,t,n){"use strict";n("4uRg");var r=n("0YuG");r.module("mode.chart").controller("ChartSettingsController",["$scope","lodash","$timeout","ChartInterpolaterService","ChartThemeService","ViewService",function(e,t,n,o,i,a){function numberTypes(e){return"number"===e.type||"integer"===e.type||"float"===e.type}function dataTypes(e){return"number"===e.type||"integer"===e.type||"float"===e.type||"datetime"===e.type||"date"===e.type}function numberSort(e,t){var n=parseFloat(e.name),r=parseFloat(t.name);return n>r?1:n<r?-1:0}function updateSeries(n){if(r.isDefined(e.view)&&r.isDefined(e.view.g)&&null!==e.view.g){var o=numberTypes(t.find(n.columns,{name:e.view.g}))?numberSort:void 0;e.series.grouped=t.chain(n.content).map(e.view.g).sort().uniq(!0).map(function(e){return{name:e,type:"number",displayName:void 0===e||null===e?"&lt;null&gt;":e}}).value().sort(o),e.series.grouped.unshift({name:"$mode-select-all$",type:"number",displayName:"All Series"})}e.series.number=t.filter(n.columns,numberTypes)}e.advancedOpen=!1,e.tempYmin=e.view?e.view.ymin:"",e.tempYmax=e.view?e.view.ymax:"",e.tempXmin=e.view?e.view.xmin:"",e.tempXmax=e.view?e.view.xmax:"",e.series={number:[],grouped:[]},e.columns={all:[],number:[],numberAndDate:[],grouped:[]},e.accordion={chart:!0,format:!1},e.rotations=[{name:"+45\xb0",value:45},{name:"+90\xb0",value:90},{name:"-45\xb0",value:-45},{name:"-90\xb0",value:-90}],e.formats=[{name:"percent",value:"percent"},{name:"currency",value:"currency"},{name:"thousands",value:"thousands"},{name:"millions",value:"millions"},{name:"billions",value:"billions"},{name:"none",value:"none"}],e.precisions=[{name:"0",value:0},{name:"0.1",value:1},{name:"0.01",value:2},{name:"0.001",value:3}],e.dateFormats=[{name:"YYYY-MM-DD HH:MM:SS",value:"hour"},{name:"Mon YYYY",value:"full_mon"},{name:"Day Mon YYYY",value:"full_day"},{name:"Mon Day YYYY",value:"usa_full"},{name:"MM/DD",value:"mon_day"},{name:"YYYY",value:"year"},{name:"none",value:"none"}],e.themes=i.getPalettes(["contrast","toughtea","rainbow","candy","monochrome","pastel","green","blue","orange","purple","gray","colorblind"]),e.simpleThemes=i.getPalettes(["green","blue","orange","purple","gray"]),e.aggregates=[{name:"Sum",value:"sum"},{name:"Count",value:"count"},{name:"Count Unique",value:"countUnique"},{name:"Average",value:"average"},{name:"Median",value:"median"},{name:"Std Deviation",value:"stdDev"}],e.pieAggregates=[{name:"Sum",value:"sum"},{name:"Count",value:"count"}],e.$watch("data",function(n){r.isDefined(n)&&(updateSeries(n),function(n){e.columns.all=n.columns,e.columns.number=t.filter(n.columns,numberTypes),e.columns.numberAndDate=t.filter(n.columns,dataTypes),e.columns.grouped=t.filter(n.columns,function(e){return t.chain(n.content).map(e.name).uniq().value().length<100})}(n))}),e.$watch(function(){return{token:e.chartToken,view:e.view||{}}},function(t,n){t.view&&(t.view.g&&t.token!==n.token&&n.token&&updateSeries(e.data),t.token!==n.token&&(e.tempYmin=t.view.ymin,e.tempYmax=t.view.ymax,e.tempXmin=t.view.xmin,e.tempXmax=t.view.xmax))},!0),e.updateGroupBy=function(){e.view&&(e.view.gValueFn=e.view.gValueFn?e.view.gValueFn:e.view.aggregate?e.view.aggregate:"sum",e.view.aggregate=e.view.gValueFn),e.view&&(e.view.gValueColumn=e.columns.number&&e.columns.number.length?e.columns.number[0].name:e.view.x),updateSeries(e.data),e.view&&(e.series.grouped.length>10?e.view.f=[e.series.grouped[0].name]:e.view.f=["$mode-select-all$"]),e.updateSettings()},e.updateSettings=function(){a.updateChartSettingsForType(e.chartToken,e.view)},e.updateYColumns=function(){e.setXMin(),e.setXMax(),o.setRange(e.view,e.data.content,!0),delete e.view.xformat,e.updateSettings()},e.updateXColumns=function(){e.setXMin(),e.setXMax(),o.setRange(e.view,e.data.content,!0),delete e.view.xformat,e.updateSettings()},e.aggregateChanged=function(t){e.view&&(e.view.gValueFn=t,e.updateSettings())},e.switchAccordion=function(t){"chart"===t?(e.accordion.format=!1,e.accordion.chart=!0):(e.accordion.chart=!1,e.accordion.format=!0)},e.setYMin=function(t){void 0===t&&(t=!1),r.isDefined(e.tempYmin)&&""!==e.tempYmin?e.view.ymin=e.tempYmin:delete e.view.ymin,t&&e.updateSettings()},e.setYMax=function(t){void 0===t&&(t=!1),r.isDefined(e.tempYmax)&&""!==e.tempYmax?e.view.ymax=e.tempYmax:delete e.view.ymax,t&&e.updateSettings()},e.setXMin=function(t){void 0===t&&(t=!1),r.isDefined(e.tempXmin)&&""!==e.tempXmin?e.view.xmin=e.tempXmin:delete e.view.xmin,t&&e.updateSettings()},e.setXMax=function(t){void 0===t&&(t=!1),r.isDefined(e.tempXmax)&&""!==e.tempXmax?e.view.xmax=e.tempXmax:delete e.view.xmax,t&&e.updateSettings()},e.advancedText=function(){return e.advancedOpen?"less":"more"},e.isDateType=function(){return!(!e.columns||!e.view)&&t.some(e.columns.numberAndDate,function(t){return t.name===e.view.x&&("datetime"===t.type||"date"===t.type)})},e.isNumType=function(){return!(!e.columns||!e.view)&&t.some(e.columns.numberAndDate,function(t){return t.name===e.view.x&&numberTypes(t)})},e.toggleAdvanced=function(){e.advancedOpen=!e.advancedOpen},e.setTheme=function(t){var n=i.DEFAULT_THEME_ID;i.hasTheme(t)?a.updateChartTheme(e.chartToken,t,i.getTheme(t).colors):a.updateChartTheme(e.chartToken,t,i.getTheme(n).colors)}}]);var o=n("CIoY"),i=n.n(o),a=n("/JGi"),l=n.n(a),s=n("vgkc"),c=n.n(s),d=n("wP0l"),u=n.n(d),p=n("CWXl"),h=n.n(p),g=n("d6uO"),m=n.n(g),f={line:i.a,linePlusBar:l.a,scatter:c.a,area:u.a,pie:h.a,bar:m.a};r.module("mode.chart").directive("modeChartSettings",function(){return{template:function(e,t){return f[t.chartType]?f[t.chartType]:f.bar},scope:{view:"=",data:"=",chartToken:"=",currentTheme:"="},controller:"ChartSettingsController"}})},"4cGI":function(e,t,n){"use strict";t.a=function(){return{restrict:"A",link:function(e,t,n){var i=t.closest("[uib-dropdown]"),a=i.find(".dropdown-toggle");a.on("click.dropdownAutoOrient",function(e){return n=a,i=t,l=function(){return bottom(n[0])+i.height()},s=bottom(document.body),c=r,l="function"==typeof l?l():l,s="function"==typeof s?s():s,void(l+(c=c||0)-s>0?function(e,t){marginTop(e,-(e.height()+o+t.height())+"px")}(i,n):function(e){marginTop(e,"inherit")}(i));var n,i,l,s,c}),e.$on("$destroy",function(){return a.off("click.dropdownAutOrient")})}}};var r=50,o=10;function bottom(e){var t=e.getBoundingClientRect().bottom;return e===document.body&&(t=Math.max(t,$(window).height())),t}function marginTop(e,t){e.css("marginTop",t)}},"4tnq":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTFweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTEgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGlzY3JldGUtdGV4dDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAtMTktQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE3Ij4KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNiI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTktQ29weS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9ImRpc2NyZXRlLXRleHQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTMzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCw4LjUgQzAsOC43NzYxNDIzNyAwLjIyMjQ3MzE0NSw5IDAuNTA5NjY1ODQ3LDkgTDguNDkwMzM0MTUsOSBDOC43NzE4MTQ4Myw5IDksOC43NjgwNjY0MSA5LDguNSBMOSw4LjUgQzksOC4yMjM4NTc2MyA4Ljc3NzUyNjg2LDggOC40OTAzMzQxNSw4IEwwLjUwOTY2NTg0Nyw4IEMwLjIyODE4NTE3Miw4IDAsOC4yMzE5MzM1OSAwLDguNSBMMCw4LjUgWiIgaWQ9IkZpbGwtMSIgZmlsbD0iIzI3QjhEOSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iUGF0aC0xMCIgc3Ryb2tlPSIjMjdCOEQ5IiBwb2ludHM9IjEgMyAxIDAgOCAwIDggMyI+PC9wb2x5bGluZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNC41LDAuNSBMNC41LDUuNSIgaWQ9IkxpbmUiIHN0cm9rZT0iIzI3QjhEOSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zLjUsNi41IEw1LjUsNi41IiBpZD0iTGluZSIgc3Ryb2tlPSIjMjdCOEQ5IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},"4uRg":function(e,t,n){"use strict";var r=n("5TEl"),o=n("QUAy"),i=n("PbPb"),a=n("0YuG"),l=n("OJBd"),s=n.n(l),c=n("xqlZ"),d=n.n(c),u=n("u5jn"),p=function(){function ChartContainerController(e,t,n,r,o,i,a,l,s,c,d){this.$state=e,this.$scope=t,this.$element=n,this.$timeout=r,this.$window=o,this.Utils=i,this.ChartSanitizerService=a,this.ChartInterpolaterService=l,this.as=s,this.flipper=c,this.FeatureToggleService=d,this.isRendering=!0,this.handleOrientationChange=this.adjustForMobile.bind(this)}return ChartContainerController.prototype.$onInit=function(){this.$scope.$watch("view",this.handleViewUpdate.bind(this)),this.$scope.$watch("panelEnabled",this.handlePanelToggle.bind(this)),this.adjustForMobile(),this.$window.addEventListener("orientationchange",this.handleOrientationChange,!1)},ChartContainerController.prototype.$onChanges=function(e){this.model=this.$scope.model,this.relName=this.$scope.relName},ChartContainerController.prototype.$onDestroy=function(){this.$window.removeEventListener("orientationchange",this.handleOrientationChange,!1)},ChartContainerController.prototype.hasView=function(){return!Object(i.isEmpty)(this.$scope.view)},ChartContainerController.prototype.adjustForMobile=function(){this.Utils.clampElementWidthToAppleMobileBreakpoint(this.$element.children().first())},ChartContainerController.prototype.handleViewUpdate=function(e,t){var n=this.$scope,r=n.view,o=n.dataset,i=this.$state.includes("application.reports"),l=o&&r&&function(e){return a.isDefined(e)&&a.isDefined(e.columns)&&a.isDefined(e.content)}(o)&&!function(e){return a.isDefined(e.count)&&e.count>u.k}(o),s=l&&i;l&&this.ChartSanitizerService.sanitize(r,o,!i),s&&this.ChartInterpolaterService.interpolate(r,o)},ChartContainerController.prototype.handlePanelToggle=function(e){this.panelEnabled=e},Object.defineProperty(ChartContainerController.prototype,"drilldownEnabled$",{get:function(){var e=this;return this.FeatureToggleService.featureDrilldownEnabled$.map(function(t){return t&&e.$scope.view&&e.$scope.view.format&&e.$scope.view.format.drilldownEnabled})},enumerable:!0,configurable:!0}),Object.defineProperty(ChartContainerController.prototype,"exploreEnabled$",{get:function(){return this.FeatureToggleService.featureExploreEnabled$},enumerable:!0,configurable:!0}),ChartContainerController.prototype.isReportMode=function(){return!this.$state.includes("application.reports.edit")},ChartContainerController.prototype.isLightboxMode=function(){return this.isReportMode()&&(this.$state.includes("reportShow.reports.viz")||this.$state.includes("reportShow.reports.runs.viz"))},ChartContainerController.prototype.isDesignerMode=function(){return this.$state.includes("application.reports.edit")},ChartContainerController.prototype.onRenderStart=function(e){var t=this,n=e.$vizID;this.isReportMode()&&(this.$timeout(function(){t.isRendering=!0}),this.$timeout(function(){t.isRendering=!1},1e3),this.as.startVizRenderReportTiming(n))},ChartContainerController.prototype.onRenderEnd=function(e){var t=this,n=e.$vizID;this.isDesignerMode()&&this.as.endVizRenderDesignerTiming(n),this.isReportMode()&&(this.$timeout(function(){t.isRendering=!1}),this.as.endVizRenderReportTiming(n))},ChartContainerController.prototype.isMultiChart=function(e,t){return e&&["bigNumber","pivotTable"].indexOf(e)<0&&2!==t},ChartContainerController.prototype.isBigNumber=function(e){return e&&"bigNumber"===e},ChartContainerController.prototype.isPivotTable=function(e){return e&&"pivotTable"===e},ChartContainerController.prototype.isVegasMultiChart=function(e){return!!e},ChartContainerController.prototype.queryFailed=function(e){return a.isDefined(e)&&a.isDefined(e.state)&&"failed"===e.state},ChartContainerController.$inject=["$state","$scope","$element","$timeout","$window","Utils","ChartSanitizerService","ChartInterpolaterService","AnalyticsService","DataLayerFlipperService","FeatureToggleService"],ChartContainerController}();var h=n("om5q"),g=n("dsf/"),m=n("7n0L"),f=n("AEC+"),C=n("P6nd"),y={change_rate:"percentage",total_change:"number"};function changeRate(e,t){return(e-t)/t}function changeDifference(e,t){return e-t}function isNumberColumn(e){return void 0===e&&(e={type:""}),u.e.indexOf(e.type)>=0}var b={controller:function(){function BigNumberController(e,t,n,r,o,i,a,l,s){var c=this;this.$state=e,this.$element=t,this.$window=n,this.$scope=r,this.ds=o,this.cos=i,this.vos=a,this.fos=l,this.rls=s,this.isClipboardEnabled=!1,this.$onInit=function(){c.onRenderStart({$vizID:m.a.tokenFromVizID(c.chartID)}),c.view&&c.initViewModel(),c.$scope.$watch(function(){return c.$element.children().length},function(){c.$scope.$evalAsync(function(){c.onRenderEnd({$vizID:m.a.tokenFromVizID(c.chartID)})})}),c.$scope.$watch("ctrl.view",function(e,t){c.clearCache()},!0)},this.$onChanges=function(e){(e.view||e.dataset||e.chartID)&&c.clearCache()}}return BigNumberController.prototype.copySuccess=function(){this.onAction({$action:{type:C.a.ShowAlert,success:!0,message:"Link to big number copied successfully"}})},BigNumberController.prototype.initViewModel=function(){this.data=this.ds.getDatasetModel(this.queryToken(),{rowLimit:BigNumberController.DISPLAY_ROW_LIMIT},this.dataset)},BigNumberController.prototype.clearCache=function(){this.cachedFormattedAggregate=null,this.cachedTrendDirection=null,this.cachedChangeRate=null,this.initViewModel()},BigNumberController.prototype.isDesignerMode=function(){return this.$state.includes("application.reports.edit")},BigNumberController.prototype.isReportMode=function(){return!this.$state.includes("application.reports.edit")},BigNumberController.prototype.isPreviewMode=function(){return/embed-preview/.test(this.$window.document.body.className)},BigNumberController.prototype.isPhantomMode=function(){return!!this.$window._phantom||!!this.$window.callPhantom},BigNumberController.prototype.linkTo=function(e,t){this.rls.hasLinkToPageMethod()&&this.rls.isLinkable()&&(e.preventDefault(),e.stopPropagation(),this.rls.linkToPage("lightbox"===t?{id:this.chartID,view:this.view}:this.queryToken(),t))},BigNumberController.prototype.dataState=function(e){var t=this.ds.getDatasetState(this.queryToken());return e?!!~t.search(e):t},BigNumberController.prototype.getReportDataURL=function(){var e=this.getQueryData();return e&&e.reportDataUrl||""},BigNumberController.prototype.getReportQueryURL=function(){var e=this.getQueryData();return e&&e.reportQueryUrl||""},BigNumberController.prototype.getReportVizURL=function(){return this.view&&this.view._vizReportRunLink||""},BigNumberController.prototype.getQueryData=function(){return this.ds.getDatasetByKey(this.queryToken())},BigNumberController.prototype.titleEditDisabled=function(){return this.isReportMode()&&!this.isPreviewMode()},BigNumberController.prototype.displayTitle=function(e){return void 0===e&&(e=""),this.isReportMode()&&e.length||this.isDesignerMode()||this.isPreviewMode()},BigNumberController.prototype.chartTitle=function(){return this.view.chartTitle},BigNumberController.prototype.chartDescription=function(){return this.view.chartDescription},BigNumberController.prototype.trendLabel=function(){return this.bigNumberViewOptions().trendLabel},BigNumberController.prototype.colorScaleName=function(){return this.bigNumberViewOptions().colorScaleID},BigNumberController.prototype.broadcastEdit=function(){this.onEdit({$id:this.chartID,$view:this.view})},BigNumberController.prototype.aggregate=function(){var e=this.bigNumberViewOptions().aggregator,t=this.selectedColumnData(),n=t.filter(function(e){return!Object(i.isNil)(e)&&!f.d.isDirty(e)}),r=function(e,t){return e-t},o=function(e,t){return t-e};return{average:function(){return n.reduce(function(e,t){return parseFloat(e)+parseFloat(t)})/n.length},last_value:function(){return t[t.length-1]},min_value:function(){return n.sort(r)[0]},max_value:function(){return n.sort(o)[0]},count:function(){return n.length},count_distinct:function(){return Object(i.uniq)(n).length},median:function(){return Object(h.e)(n)},sum:function(){return Object(i.sum)(n)}}[e]()},BigNumberController.prototype.queryToken=function(){return this.vos.queryTokenFromVizID(this.vos.formatVizID(this.chartID,m.a.OPTION_TYPE_CHART))},BigNumberController.prototype.selectedColumnData=function(){var e=this.bigNumberViewOptions(),t=e.column,n=e.sortColumn,r=e.sortOrder,o=this.data,i=o.cols().indexOf(n);return-1!==i&&o.sort(i,r),o.rows().map(function(e){return o.tree[e][t].value().valueOf()})},BigNumberController.prototype.bigNumberViewOptions=function(){return this.view.bigNumber||{}},BigNumberController.prototype.trendAvailable=function(){var e=this.bigNumberViewOptions(),t=e.trend,n=e.aggregator;return"none"!==t&&"last_value"===n},BigNumberController.prototype.pastPresentValues=function(){var e=this.bigNumberViewOptions(),t=e.referencePoint,n=e.referencePointCustom,r=this.selectedColumnData(),o=r.length-1,a={custom:r[o-(parseInt(n)||0)],previous:r[o-1],first:r[0]};return{present:this.aggregate(),past:Object(i.isFinite)(a[t])?a[t]:a.previous}},BigNumberController.prototype.calculateTrend=function(){var e=this.bigNumberViewOptions(),t=e.trend,n=e.referencePoint,r=e.referencePointCustom,o=this.pastPresentValues(),i=o.past,a=o.present,l={auto:function(){return l.percentage()},percentage:function(){return changeRate},number:function(){return changeDifference}},s=y[t];return"none"===t?NaN:"custom"===n&&isNaN(parseInt(r))?NaN:(l[s]||l.auto)()(a,i)},BigNumberController.prototype.formattedAggregate=function(){if(this.invalidColumnSelected())return BigNumberController.UNDEFINED_AGGREGATE;if(this.cachedFormattedAggregate)return this.cachedFormattedAggregate;var e,t=this.bigNumberViewOptions(),n=t.column,r=t.columns,o=this.cos.columnType(r,n)||"automatic",i=this.fos.getPresetFormatters(r),a=this.aggregate();return f.d.isDirty(a)?this.cachedFormattedAggregate=BigNumberController.UNDEFINED_AGGREGATE:(e="automatic"===o?g.e():this.fos.getFormatter(r,n,a,o,i),this.cachedFormattedAggregate=e(a))},BigNumberController.prototype.font=function(){return'"Graphik", Helvetica, Arial, sans-serif'},BigNumberController.prototype.formattedChangeRate=function(){if(this.invalidColumnSelected())return BigNumberController.UNDEFINED_TREND;if(this.cachedChangeRate)return this.cachedChangeRate;var e=this.bigNumberViewOptions(),t=e.trend,n=e.trendPrecision,r=BigNumberController.UNDEFINED_TREND,o=this.calculateTrend(),a=function(e){return t=e%1?"0.01":"1",Object(i.find)(u.C,{name:t}).id;var t},l={auto:function(){return l.percentage()},percentage:function(){return Object(g.g)()},number:function(){return Object(g.e)()}},s={auto:function(e){return s.percentage(e)},percentage:function(e){return Object(g.f)(null,e)},number:function(e){return Object(g.d)(null,e)}},c=y[t],d=function(e,t){return Object(i.isFinite)(e)&&e>=0?e:t()}(n,function(){return a(o)}),p=n>=0&&"auto"!==n?(s[c]||s.auto)({precision:d}):function(e){return l[e]||l.auto}(c)();return Object(i.isFinite)(o)&&(r=p(Math.abs(o))),this.cachedChangeRate=r},BigNumberController.prototype.invalidColumnSelected=function(){var e=this.bigNumberViewOptions().column,t=-1===this.data.cols().indexOf(e),n=!isNumberColumn(Object(i.find)(this.dataset.columns,{name:e}));return t||n},BigNumberController.prototype.numericalColumnsAvailable=function(){return this.dataset.columns.filter(isNumberColumn).length>0},BigNumberController.prototype.isEmptyStateInDesigner=function(){return!this.numericalColumnsAvailable()&&this.isDesignerMode()},BigNumberController.prototype.trendDirection=function(){if(!this.invalidColumnSelected()){if(this.cachedTrendDirection)return this.cachedTrendDirection;var e="negative",t=this.calculateTrend();return Object(i.isFinite)(t)&&0!==t?t>0&&(e="positive"):e="neutral",this.cachedTrendDirection=e}},BigNumberController.prototype.trendArrowStyle=function(){switch(this.trendDirection()){case"positive":return"border-bottom-color: "+this.trendColorFromPalette();case"negative":return"border-top-color: "+this.trendColorFromPalette();case"neutral":return"display: none;"}},BigNumberController.prototype.trendColorFromPalette=function(){switch(this.trendDirection()){case"positive":return this.bigNumberViewOptions().colors[2];case"negative":return this.bigNumberViewOptions().colors[0];case"neutral":return this.bigNumberViewOptions().colors[1]}},BigNumberController.prototype.updateChartTitle=function(e){this.view.chartTitle=e,this.broadcastEdit()},BigNumberController.prototype.updateChartDescription=function(e){this.view.chartDescription=e,this.broadcastEdit()},BigNumberController.prototype.exceedsRowLimit=function(){return this.dataset.count>BigNumberController.DISPLAY_ROW_LIMIT},BigNumberController.prototype.getRowLimit=function(){return BigNumberController.DISPLAY_ROW_LIMIT},BigNumberController.$inject=["$state","$element","$window","$scope","DatasetService","ColumnOptionsService","ViewOptionsService","FormatOptionsService","ReportLinkService"],BigNumberController.UNDEFINED_TREND="--%",BigNumberController.UNDEFINED_AGGREGATE="--",BigNumberController.DISPLAY_ROW_LIMIT=1e4,BigNumberController}(),controllerAs:"ctrl",bindings:{view:"=?setView",dataset:"<",chartID:"@id",onAction:"&",onEdit:"&",onRenderStart:"&?",onRenderEnd:"&?",chartOptions:"<",viewer:"<"},template:'\n    <div\n      class="editor-module editor-chart mode-object editor-multi big-number"\n      ng-class="{\'has-trend-label\': ctrl.trendLabel().length > 0, \'is-phantom-mode\': ctrl.isPhantomMode(), \'is-report-mode\': ctrl.isReportMode() }"\n      ng-if="ctrl.view">\n\n      \x3c!-- Chart Wrapper Begins --\x3e\n      <div class="chart-wrapper" ng-class="{\'no-border\': ctrl.isEmptyStateInDesigner() }">\n\n        \x3c!-- Chart Content Begins --\x3e\n        <div class="chart-content" ng-if="!ctrl.isEmptyStateInDesigner()">\n\n          \x3c!-- Component Header Begins --\x3e\n          <div class="new-viz-actions">\n            <a\n              class="new-viz-action hide-2 hide-3 hide-4"\n              ng-show="isClipboardEnabled"\n              ng-if="ctrl.viewer !== \'whiteLabel\'"\n              href="javascript:void(0)"\n              uib-tooltip="Copy Link to Chart"\n              copy-to-clipboard\n              clipboard-text="ctrl.getReportVizURL()"\n              clipboard-success="ctrl.copySuccess()"\n              clipboard-enabled="isClipboardEnabled">\n              <svg-icon type="\'copy-link\'"></svg-icon>\n            </a>\n\n            <a class="new-viz-action kebab-action" href="javascript:void(0)" ng-if="ctrl.viewer !== \'whiteLabel\'">\n              <kebab-menu targetable="true">\n                <li menu-clipboard-link class="show-2 show-3 show-4" link="ctrl.getReportVizURL()" clipboard-enabled="isClipboardEnabled" clipboard-success="ctrl.copySuccess()" ng-show="isClipboardEnabled">Copy Link to Chart</li>\n                <li class="divider show-2 show-3 show-4"></li>\n                <li menu-item="exp" ng-click="ctrl.linkTo($event, \'query\')" ng-href="{{ ctrl.getReportQueryURL() }}" ng-if="!ctrl.viewer">View Query <span class="mode-show-embed-inline">in Mode</span></li>\n                <li menu-item="exp" ng-click="ctrl.linkTo($event, \'data\')" ng-href="{{ ctrl.getReportDataURL() }}">View Query Results <span class="mode-show-embed-inline">in Mode</span></li>\n              </kebab-menu>\n            </a>\n          </div>\n          \x3c!-- Component Header Ends --\x3e\n\n          \x3c!-- Big Number Chart Begins --\x3e\n          <div class="chart-big-number">\n            <div class="chart-title clearfix" ng-if="ctrl.displayTitle(ctrl.chartTitle())">\n              <in-place-edit\n                text="ctrl.chartTitle()"\n                alt-text="Click to add title"\n                on-change="ctrl.updateChartTitle($text)"\n                no-edit="ctrl.titleEditDisabled()"></in-place-edit>\n            </div>\n            <div class="chart-title chart-description clearfix" ng-if="ctrl.displayTitle(ctrl.chartDescription())">\n              <in-place-edit\n                text="ctrl.chartDescription()"\n                alt-text="Click to add a description"\n                on-change="ctrl.updateChartDescription($text)"\n                no-edit="ctrl.titleEditDisabled()"></in-place-edit>\n            </div>\n            <div class="aggregate">\n              <fillerbuster\n                font-size-max="48"\n                font-size-min="0"\n                font-name="ctrl.font()"\n                content="ctrl.formattedAggregate()"></fillerbuster>\n            </div>\n            <div\n              class="trend-with-palette trend-{{ctrl.trendDirection()}} color-scale-{{ctrl.colorScaleName()}}"\n              style="color: {{ctrl.trendColorFromPalette()}}"\n              ng-if="ctrl.trendAvailable()">\n              <span class="trend-direction-icon"\n                style="{{ ctrl.trendArrowStyle() }}"></span>\n              <span class="trend-value">\n                {{ ctrl.formattedChangeRate() }}\n              </span>\n              <span class="trend-label">\n                {{ ctrl.trendLabel() }}\n              </span>\n            </div>\n          </div>\n          \x3c!-- @Big Number Chart Ends --\x3e\n\n\n        </div>\n        \x3c!-- @Chart Content Ends --\x3e\n\n        \x3c!-- Intermediary Messages Begins --\x3e\n        <div ng-if="ctrl.exceedsRowLimit()" class="more-text">\n          This chart only shows the first {{ ctrl.getRowLimit() | number }} rows.\n        </div>\n        <div ng-if="ctrl.dataState(\'cancelled\')" class="error-message">\n          <i class="icon-warning-small error-icon"></i>\n          <div class="message">This query was canceled</div>\n          <div class="sub-message"></div>\n        </div>\n        <div ng-if="ctrl.isEmptyStateInDesigner()" class="error-message error-empty-message">\n          <div class="hero">\n            <i class="icon-abacus"></i>\n          </div>\n          <div class="message">\n            <h2 class="heading">Looks like your results don\'t contain numerical data</h1>\n            <h3 class="summary">To create a big number chart, make sure to use a data set that includes at least one numerical column</h3>\n          </div>\n        </div>\n        \x3c!-- @Intermediary Messages End --\x3e\n\n      </div>\n      \x3c!-- @Chart Wrapper --\x3e\n\n    </div>'},v=n("glR0"),I={controller:function(){function BigNumberSettingsController(e,t,n,r){this.DataLayerFlipperService=e,this.rxStore=t,this.StoreService=n,this.$scope=r,this.aggregatorTypes=u.t,this.relativeRangePoints=u.x,this.trends=u.D,this.trendPrecisions=u.C,this.orderTypes=u.u,this.colorScales=u.B,this.numberDataTypes=u.e,this.paletteType="divergent",this.colorScaleMenuOpen=!1,this.accordion={chart:!0,format:!1}}return BigNumberSettingsController.prototype.$onChanges=function(e){e.view&&(null==this.view.columns&&(this.view.columns={}),this.onSelectedColumnChanged());$("meta[name=report-owner-username]").attr("content")||$("meta[name=owner-username]").attr("content")},BigNumberSettingsController.prototype.$onInit=function(){var e=this;this.colorPalettes$=this.rxStore.select(v.r),this.StoreService.connectPath(this.$scope,"editor.viz",function(t){e.chartPalette=t?t.color_palette_token:""})},BigNumberSettingsController.prototype.colorScaleMenu=function(){this.colorScaleMenuOpen=!0},BigNumberSettingsController.prototype.closeColorScaleMenu=function(){this.colorScaleMenuOpen=!1},BigNumberSettingsController.prototype.toggleColorScaleMenu=function(){this.colorScaleMenuOpen=!this.colorScaleMenuOpen},BigNumberSettingsController.prototype.getColorScale=function(e){var t=this.view.colorScaleID;return Object(i.find)(this.getAllColorScales(),{id:t})[e]},BigNumberSettingsController.prototype.getAllColorScales=function(){return this.colorScales},BigNumberSettingsController.prototype.getDataRowCount=function(){return this.data.count},BigNumberSettingsController.prototype.selectColorScale=function(e){this.view.colorScaleID=e.id,this.updateSettings(),this.closeColorScaleMenu()},BigNumberSettingsController.prototype.trendAvailable=function(){return"last_value"===this.view.aggregator},BigNumberSettingsController.prototype.trendEnabled=function(){return"none"!==this.view.trend},BigNumberSettingsController.prototype.customTrendEnabled=function(){return"none"!==this.view.trend&&"custom"===this.view.referencePoint},BigNumberSettingsController.prototype.sortAvailable=function(){return"last_value"===this.view.aggregator},BigNumberSettingsController.prototype.selectTab=function(e){var t,n=this.accordion;n.hasOwnProperty(e)&&Object.keys(n).forEach((t=e,function(e){return r=t===e,n[e]=r;var r}))},BigNumberSettingsController.prototype.getColumn=function(){return this.view.column},BigNumberSettingsController.prototype.getColumns=function(){return this.data.columns},BigNumberSettingsController.prototype.getNumberColumns=function(){var e=this;return this.data.columns.filter(function(t){return!!~e.numberDataTypes.indexOf(t.type)})},BigNumberSettingsController.prototype.numericalColumnsAvailable=function(){return this.getNumberColumns().length>0},BigNumberSettingsController.prototype.getAggregators=function(){return this.aggregatorTypes},BigNumberSettingsController.prototype.getRelativeRangePoints=function(){return this.relativeRangePoints},BigNumberSettingsController.prototype.getTrends=function(){return this.trends},BigNumberSettingsController.prototype.getOrderTypes=function(){return this.orderTypes},BigNumberSettingsController.prototype.updateFormatSettings=function(e){this.view.columns[this.view.column]=e,this.updateSettings()},BigNumberSettingsController.prototype.updatePalette=function(e){this.onPaletteUpdate({$chartToken:this.token,$paletteToken:e.token,$paletteColors:e.value.split(",")})},BigNumberSettingsController.prototype.updateSettings=function(){this.onSettingsUpdate({$token:this.token,$view:this.view})},BigNumberSettingsController.prototype.getTrendPrecisions=function(){return this.trendPrecisions},BigNumberSettingsController.prototype.onSelectedColumnChanged=function(){this.columnView=this.view.columns[this.view.column]||{}},BigNumberSettingsController.$inject=["DataLayerFlipperService","RxStoreService","StoreService","$scope"],BigNumberSettingsController}(),controllerAs:"ctrl",bindings:{view:"<",data:"<",token:"<",onSettingsUpdate:"&",onPaletteUpdate:"&",owner:"<"},template:'\n    <div class="top chart-accordion big-number-settings" ng-if="ctrl.numericalColumnsAvailable()">\n\n      \x3c!-- Tab Navigation Begins --\x3e\n      <div class="chart-nav">\n        <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n        <li ng-class="{active:ctrl.accordion.chart}"><a ng-click="ctrl.selectTab(\'chart\')">Data</a></li>\x3c!--\n        --\x3e<li ng-class="{active:ctrl.accordion.format}"><a ng-click="ctrl.selectTab(\'format\')">Format</a></li>\n        </ul>\n      </div>\n      \x3c!-- @Tab Navigation Ends--\x3e\n\n      \x3c!-- Data Tab Begins --\x3e\n      <div class="chart-tab-content" ng-show="ctrl.accordion.chart">\n\n        \x3c!-- Value Input Begins --\x3e\n        <h3 class="setting-title no-border-top">Value</h3>\n        <div class="form-field">\n          <select\n            class="form-control form-control-sm form-control-block"\n            ng-model="ctrl.view.column"\n            ng-options="column.name as column.name for column in ctrl.getNumberColumns()"\n            ng-change="ctrl.updateSettings()"></select>\n        </div>\n        \x3c!-- @Value Input Ends --\x3e\n\n        \x3c!-- Aggregate Input Begins --\x3e\n        <div class="form-field">\n          <label class="axis-label">Aggregate</label>\n          <select\n            class="form-control form-control-sm form-control-block"\n            ng-model="ctrl.view.aggregator"\n            ng-options="aggregator.id as aggregator.name for aggregator in ctrl.getAggregators()"\n            ng-change="ctrl.updateSettings()"></select>\n        </div>\n        \x3c!-- @Aggregate Input Ends --\x3e\n\n        \x3c!-- Sort Section Begins --\x3e\n        <section class="clearfix" ng-if="ctrl.sortAvailable()">\n          <div class="half-width">\n            <div class="form-field half-width-left">\n              <label class="axis-label">Sort by</label>\n              <select\n                class="form-control form-control-sm form-control-block"\n                ng-model="ctrl.view.sortColumn"\n                ng-options="column.name as column.name for column in ctrl.getColumns()"\n                ng-change="ctrl.updateSettings()">\n                <option value="">None</option>\n              </select>\n            </div>\n          </div>\n          <div class="half-width">\n            <div class="form-field half-width-right">\n              <label class="axis-label">&nbsp;</label>\n              <select\n                class="form-control form-control-sm form-control-block"\n                ng-model="ctrl.view.sortOrder"\n                ng-options="order.id as order.name for order in ctrl.getOrderTypes()"\n                ng-change="ctrl.updateSettings()">\n              </select>\n            </div>\n          </div>\n        </section>\n        \x3c!-- @Sort Section Ends --\x3e\n\n        \x3c!-- Trend Section Begins --\x3e\n        <section class="trend-section" ng-if="ctrl.trendAvailable()">\n\n          \x3c!-- Trend Input Begins --\x3e\n          <h3 class="setting-title">Trend</h3>\n          <div class="form-field">\n            <select\n              class="form-control form-control-sm form-control-block"\n              ng-model="ctrl.view.trend"\n              ng-options="trend.id as trend.name for trend in ctrl.getTrends()"\n              ng-change="ctrl.updateSettings()"></select>\n          </div>\n          \x3c!-- @Trend Input Ends --\x3e\n\n          \x3c!-- Compare To Input Begins --\x3e\n          <div class="form-field" ng-if="ctrl.trendEnabled()">\n            <label class="axis-label">Compare To</label>\n            <select\n              class="form-control form-control-sm form-control-block"\n              ng-model="ctrl.view.referencePoint"\n              ng-options="point.id as point.name for point in ctrl.getRelativeRangePoints()"\n              ng-change="ctrl.updateSettings()"></select>\n          </div>\n          \x3c!-- @Compare To Input Ends --\x3e\n\n          \x3c!-- Custom Compare To Input Begins --\x3e\n          <div class="form-field" ng-if="ctrl.trendEnabled() && ctrl.customTrendEnabled()">\n            <label class="axis-label">Compare To\n              <input\n                type="number"\n                min="1"\n                max="{{ ctrl.getDataRowCount() }}"\n                class="form-control form-control-sm"\n                ng-model-options="{ updateOn: \'blur\' }"\n                ng-model="ctrl.view.referencePointCustom"\n                ng-change="ctrl.updateSettings()"\n                mode-enter />\n                values back\n            </label>\n          </div>\n          \x3c!-- @Custom Compare To Input Ends --\x3e\n\n        </section>\n        \x3c!-- @Trend Section Ends --\x3e\n\n      </div>\n      \x3c!-- @Data Tab Ends --\x3e\n\n      \x3c!-- Format Tab Begins --\x3e\n      <div class="chart-tab-content" ng-show="ctrl.accordion.format">\n        <format-settings\n          format-options="ctrl.columnView"\n          enabled-formats="[\'automatic\', \'number\', \'percentage\', \'financial\', \'currency\']"\n          on-change="ctrl.updateFormatSettings($formatOptions)"></format-settings>\n\n        \x3c!-- Trend Settings Begin --\x3e\n        <div class="trend-settings-section" ng-if="ctrl.trendAvailable()">\n\n          <h3 class="setting-title">Trend</h3>\n\n          \x3c!-- Trend Label Begins --\x3e\n          <div class="form-field">\n            <label class="axis-label">Label</label>\n            <input\n              type="text"\n              class="form-control form-control-sm axis-title-input"\n              ng-model-options="{ updateOn: \'blur\' }"\n              ng-model="ctrl.view.trendLabel"\n              ng-change="ctrl.updateSettings()"\n              mode-enter />\n          </div>\n          \x3c!-- @Trend Label Ends --\x3e\n\n          \x3c!-- Trend Formatting Begins --\x3e\n          <section class="clearfix">\n            <div class="form-field">\n              <label class="axis-label">Precision</label>\n              <select\n                class="form-control form-control-sm form-control-block"\n                ng-model="ctrl.view.trendPrecision"\n                ng-options="precision.id as precision.name for precision in ctrl.getTrendPrecisions()"\n                ng-change="ctrl.updateSettings()">\n              </select>\n            </div>\n          </section>\n          \x3c!-- @Trend Formatting Ends --\x3e\n\n          \x3c!-- Color Scale Settings Begin --\x3e\n          <div class="form-field">\n            <label class="axis-label">Color Scale -/0/+</label>\n            <color-palettes-dropdown\n              color-palette="ctrl.chartPalette"\n              color-palettes="ctrl.colorPalettes$ | async:this"\n              update-palette="ctrl.updatePalette(palette)"\n              select-palette="ctrl.updatePalette(palette)"\n              palette-type="ctrl.paletteType"\n              palettes-link="ctrl.owner.colorPalettesLink"\n              owner="ctrl.owner"\n              show-palettes-upsell="!ctrl.owner.user"\n            ></color-palettes-dropdown>\n          </div>\n\n          \x3c!-- @Color Scale Settings End--\x3e\n\n        </div>\n        \x3c!-- @Trend Settings End --\x3e\n\n      </div>\n      \x3c!-- @Format Tab Ends--\x3e\n\n    </div>\n    '},S=n("0iPh"),w=n.n(S);var A={controller:function(){function FillerbusterController(e,t,n){var r=this;this.$window=e,this.$element=t,this.$scope=n,this.$onChanges=function(){r.updateUI()},this.$postLink=function(){r.initWatchers(),r.initCSS(),r.updateUI(),r.bindResizeHandler()},this.$onDestroy=function(){r.unbindResizeHandler()},this.$=w.a}return FillerbusterController.prototype.initWatchers=function(){var e=this;this.$scope.$watch(function(){return e.$element.outerWidth()},function(t,n){t!==n&&e.updateUI()})},FillerbusterController.prototype.initCSS=function(){var e={display:"block",width:"100%",height:"100%"};this.$element.css(e),this.containerEl().css(e)},FillerbusterController.prototype.updateUI=function(){this.updateFontSize(this.containerEl(),this.calculateFontSize()+"px")},FillerbusterController.prototype.updateFontSize=function(e,t){e.css({fontSize:t})},FillerbusterController.prototype.containerEl=function(){return this.$element.find(".fb-container")},FillerbusterController.prototype.calculateFontSize=function(){var e=this.$element.outerWidth(),t=this.measureFontBase(this.content,1,this.fontName),n=this.scaleFontSize(1,t,e);return Object(i.clamp)(n,this.fontSizeMin,this.fontSizeMax)},FillerbusterController.prototype.measureFontBase=function(e,t,n){return this.canvas=this.canvas||window.document.createElement("canvas"),this.measureCanvasText(this.canvas,e,t,n)},FillerbusterController.prototype.measureCanvasText=function(e,t,n,r){var o=n+"px "+r,i=e.getContext("2d");return i.font=o,i.measureText(t).width},FillerbusterController.prototype.scaleFontSize=function(e,t,n){return 0|n*(e/t)},FillerbusterController.prototype.bindResizeHandler=function(){this.$(this.$window).on(this.eventNS("resize"),this.updateUI.bind(this))},FillerbusterController.prototype.unbindResizeHandler=function(){this.$(this.$window).off(this.eventNS("resize"))},FillerbusterController.prototype.eventNS=function(e){return e+".fb"},FillerbusterController.$inject=["$window","$element","$scope"],FillerbusterController}(),controllerAs:"ctrl",bindings:{content:"<",fontName:"<",fontSizeMax:"<",fontSizeMin:"<"},template:' \n    <div class="fb-container">\n      <span class="fb-content">\n        {{ctrl.content}}\n      </span>\n    </div>'},M={}.hasOwnProperty;function pivotTableRenderer(e,t){var n,r,o,a,l,s,c,d,u,p,h,g,m,f,C,y,b,v,I,S,A,k,T,x,D,L;c={localeStrings:{totals:"Totals"}},t=w.a.extend(c,t),a=e.colAttrs,f=e.rowAttrs,y=e.getRowKeys(),s=e.getColKeys(),(m=document.createElement("table")).className="pvtTable",b=function(e,t,n){var r,o,i,a,l,s,c,d;if(0!==t){for(a=!0,d=r=0,l=n;0<=l?r<=l:r>=l;d=0<=l?++r:--r)e[t-1][d]!==e[t][d]&&(a=!1);if(a)return-1}for(o=0;t+o<e.length;){for(c=!1,d=i=0,s=n;0<=s?i<=s:i>=s;d=0<=s?++i:--i)e[t][d]!==e[t+o][d]&&(c=!0);if(c)break;o++}return o},A=document.createElement("thead");var R=function(e,t,n){return void 0===n&&(n=!1),N(e,t)},N=function(e,t){return Object(i.reject)(e,function(n,r){return r>0&&e[r-1][t]===n[t]})},E=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),R(e.map(function(e,r){return{key:e[t],index:r+n}}),"key")},j=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),R(e.map(function(e,r){return{key:e[t],index:r+n}}).reverse(),"key",!0).reverse()},O=E(s).map(function(e){return b(s,e.index,0)}).reduce(function(e,t){return e+t},0),P=function(e,t,n){void 0===n&&(n=!1);var r=j(e),o=n?j:E;return t.map(function(t,n){if(r)return r.map(function(t,i){var a,l,s,c=t.index,d=r[i-1];return void 0===d?a=0:d.index>=0&&(a=d.index+1),l=c+1,s=e.slice(a,l),o(s,n,a).slice(-1)[0]})},[])},F=function(e){var t=[];return e.length&&(t=e[0].map(function(t,n){return e.map(function(e){return e.map(function(e){return e.index})}).reduce(function(e,t){return e.push(t[n])&&e},[])})),t},z=function(t){return e.valAttrs.length?t:""},_=F(P(y,f)),$=F([j(y)]),B=F(P(s,a)),V=F([j(s)]),U=f.length>1,Z=a.length>1,G=function(e){void 0===e&&(e=!1);var t=document.createElement("th");return t.className="pvtJoint pvtAxisLabel pvtNoSort",e||(t.setAttribute("colspan",f.length),t.setAttribute("rowspan",a.length)),t.appendChild(fixedHeader("  ")),t},Y=!0;if(t.beforeRender&&(Y=t.beforeRender({rowCount:y.length,colCount:s.length})),!Y)return m;for(p in a)if(M.call(a,p)){if(o=a[p],0===parseInt(p)&&0!==a.length){if(T=document.createElement("tr"),a.length>1)S=document.createElement("th"),(d=document.createElement("div")).className="pvtMainHeaderWrapper pvtFixedHeader",(n=document.createElement("div")).className="pvtMainHeaderContainer",d.appendChild(n),S.className="pvtMainHeader pvtAxisLabel pvtNoSort",S.setAttribute("colspan",f.length+O+1),S.appendChild(d),T.appendChild(S);else for(h in n=T,S=G(!0),T.appendChild(S),f)parseInt(h)>0&&((S=document.createElement("th")).className="pvtAxisLabel pvtNoSort",parseInt(h)===f.length-1&&(S.className+=" pvtDividerVertical"),S.appendChild(fixedHeader(" ")),T.appendChild(S));A.appendChild(T)}if(T=document.createElement("tr"),0===parseInt(p)&&0!==f.length&&a.length>1)for(h in S=G(!0),T.appendChild(S),f.slice(1))(S=document.createElement("th")).className="pvtAxisLabel pvtNoSort",parseInt(h)===f.length-2&&(S.className+=" pvtDividerVertical"),1===a.length&&f.length>0&&(S.className+=" pvtHideHeader"),S.appendChild(fixedHeader(" ")),T.appendChild(S);else for(h=0;h<Math.max(f.length,1);h++)(S=document.createElement("th")).className="pvtAxisLabel pvtNoSort",1===a.length&&f.length>0&&(S.className+=" pvtHideHeader"),parseInt(h)!==f.length-1&&f.length||!Z||(S.className+=" pvtDividerVertical"),S.appendChild(fixedHeader(" ")),T.appendChild(S);for(u in(S=document.createElement("th")).className="pvtAxisLabel",S.setAttribute("data-col-key",""),S.setAttribute("data-axis-key",w.a.trim(o)),1===a.length?(S.appendChild(fixedHeader(o)),S.setAttribute("colspan",O+1)):S.appendChild(fixedHeader(o,!0)),n.appendChild(S),s)M.call(s,u)&&(l=s[u],-1!==(L=b(s,parseInt(u),parseInt(p)))&&((S=document.createElement("th")).className="pvtColLabel",S.setAttribute("colspan",L),parseInt(p)===a.length-1&&0!==f.length&&S.setAttribute("rowspan",2),B.some(function(e){return e[parseInt(p)]==u})&&Z&&(S.className+=" pvtDividerVertical"),S.setAttribute("data-col-attr",w.a.trim(l[p])),S.appendChild(fixedHeader(l[p])),T.appendChild(S)));0===parseInt(p)&&((S=document.createElement("th")).className="pvtTotalLabel",S.setAttribute("rowspan",a.length+(0===f.length?0:1)),S.appendChild(fixedHeader(t.localeStrings.totals)),T.appendChild(S)),A.appendChild(T)}if(0!==f.length){for(u in T=document.createElement("tr"),f)M.call(f,u)&&(g=f[u],(S=document.createElement("th")).className="pvtAxisLabel",S.setAttribute("data-row-key",""),S.setAttribute("data-axis-key",w.a.trim(g)),S.appendChild(fixedHeader(g)),T.appendChild(S));0===a.length&&((S=document.createElement("th")).className="pvtTotalLabel",S.setAttribute("data-key",t.localeStrings.totals),S.appendChild(fixedHeader(t.localeStrings.totals)),T.appendChild(S)),A.appendChild(T)}m.appendChild(A),v=document.createElement("tbody");var Q=[];for(u in y)if(M.call(y,u)){for(p in C=y[u],T=document.createElement("tr"),C)M.call(C,p)&&(x=C[p],-1!==(L=b(y,parseInt(u),parseInt(p)))&&((S=document.createElement("th")).className="pvtRowLabel",(_.some(function(e){return e[parseInt(p)]==u})||Q[p])&&U&&(1!==L||Q[p]||(Q[p]=!0),Q&&$.some(function(e){return e[0]==u})&&(Q[p]=!1),Q[p]||(S.className+=" pvtDivider")),S.setAttribute("rowspan",L),S.setAttribute("data-row-attr",w.a.trim(x)),S.appendChild(fixedHeader(x)),T.appendChild(S)));for(p in s)M.call(s,p)&&(l=s[p],D=z((r=e.getAggregator(C,l)).value()),(I=document.createElement("td")).className="pvtVal row"+u+" col"+p,$.some(function(e){return e[0]==u})&&U&&(I.className+=" pvtDivider"),V.some(function(e){return e[0]==p})&&Z&&(I.className+=" pvtDividerVertical"),I.textContent=r.format(D),I.setAttribute("data-value",D),T.appendChild(I));D=z((k=e.getAggregator(C,[])).value()),(I=document.createElement("td")).className="pvtTotal rowTotal",$.some(function(e){return e[0]==u})&&U&&(I.className+=" pvtDivider"),I.textContent=k.format(D),I.setAttribute("data-value",D),I.setAttribute("data-for","row"+u),T.appendChild(I),v.appendChild(T)}for(h in T=document.createElement("tr"),f.slice(1))(S=document.createElement("th")).className="pvtRowLabel pvtTotalFillerLabel pvtNoSort",S.appendChild(fixedHeader(" ")),T.appendChild(S);for(p in(S=document.createElement("th")).className="pvtTotalLabel",S.setAttribute("data-key",t.localeStrings.totals),S.appendChild(fixedHeader(t.localeStrings.totals)),T.appendChild(S),s)M.call(s,p)&&(l=s[p],D=z((k=e.getAggregator([],l)).value()),(I=document.createElement("td")).className="pvtTotal colTotal",V.some(function(e){return e[0]==p})&&Z&&(I.className+=" pvtDividerVertical"),I.textContent=k.format(D),I.setAttribute("data-value",D),I.setAttribute("data-for","col"+p),T.appendChild(I));return D=z((k=e.getAggregator([],[])).value()),(I=document.createElement("td")).className="pvtGrandTotal",I.textContent=k.format(D),I.setAttribute("data-value",D),T.appendChild(I),v.appendChild(T),m.appendChild(v),m.setAttribute("data-numrows",y.length),m.setAttribute("data-numcols",s.length),m}function fixedHeader(e,t){var n=document.createElement("div"),r=document.createElement("span");return n.className="pvtFixedHeader",n.className+=t?" pvtFixedHeaderNoFollow":"",n.setAttribute("title",e),r.className="table-header-label",r.textContent=e,n.appendChild(r),n}var k="null",T=function(){function SortState(){this.stack=[]}return SortState.prototype.add=function(e){return this.stack.push(e)},SortState.prototype.update=function(e,t,n){return Object(i.assign)(Object(i.find)(this.stack,{key:e,type:t}),{order:n}),this},SortState.prototype.remove=function(e){return this},SortState.prototype.filter=function(e){return Object(i.filter)(this.stack,e)},SortState.prototype.has=function(e,t){return Object(i.findIndex)(this.stack,{key:e,type:t})>=0},SortState.prototype.getStack=function(){return this.stack},SortState}(),x=function(){function SortModule(){}return SortModule.nextSortState=function(e){return"desc"===e?"asc":"asc"===e?k:"desc"},SortModule.sortIcon=function(e){var t;return((t={}).asc="icon-sort-descending",t.desc="icon-sort-ascending",t[k]="icon-sort-descending",t)[e]},SortModule}(),D=n("nxEI"),L=5e4,R={controller:function(){function PivotTableController(e,t,n,r,o,i,a,l,s){var c=this;this.$state=e,this.$window=t,this.$element=n,this.$scope=r,this.$timeout=o,this.rls=i,this.vos=a,this.ds=l,this.fos=s,this.sortState=new T,this.message={limit_exceeded:"Mode pivot tables will display up to "+Object(g.e)()(u.k)+" data points right now",explore_info:"Explore this pivot table to access the rest of the dataset on the fly.",warning_info:"Keep pivot tables set to full width to allow exploring on your final report!"},this.CONTAINER_SELECTOR="#js-pivot-table-container",this.SIDE_PANEL_SELECTOR="#js-side-panel",this.contentArea={rowCount:0,colCount:0},this.contentAreaLimit=L,this.panelEnabled=!1,this.designerMode=!1,this.isClipboardEnabled=!1,this.$onDestroy=function(){c.$element.off("dragover"),$(c.$window).off("resize.pivotWidth")}}return PivotTableController.prototype.$onInit=function(){this.onRenderStart({$vizID:m.a.tokenFromVizID(this.chartID)}),this.dataExceedsLimit()||(this.$container=this.$element.find(this.CONTAINER_SELECTOR),this.designerMode=this.$container.closest("visualization-container").length,this.$scope.$on("preview.update",this.handlePreviewUpdate.bind(this)),this.$element.on("dragover",function(e){return e.preventDefault()}),this.renderTable());var e=D.a.locationSearchLookup(this.$window.location.search,"report_owner_plan");this.plan="plus"===e?"plus":"standard"},PivotTableController.prototype.$onChanges=function(e){this.dataExceedsLimit()||e.view&&!a.equals(e.view.previousValue,e.view.currentValue)&&(this.initializeSortState(),null!=this.$container&&this.renderTable())},PivotTableController.prototype.copySuccess=function(){this.onAction({$action:{type:C.a.ShowAlert,success:!0,message:"Link to pivot table copied successfully"}})},PivotTableController.prototype.dataExceedsLimit=function(){return this.dataset.count>=u.k},PivotTableController.prototype.initializeSortState=function(){var e=this,t=this.pivotTableViewOptions(),n=t.rows,r=t.columns;Object(i.uniq)(n.concat(r)).forEach(function(t){e.sortState.has(t,"axis")||e.sortState.add({key:t,type:"axis",order:k})})},PivotTableController.prototype.initializeSortableHeaders=function(){var e,t=this.$element.find("table").find(".pvtAxisLabel").not(".pvtNoSort"),n=k,r=((e={}).asc="sort-asc",e.desc="sort-desc",e[k]="",e),o=this.sortState.filter({type:"axis"}).reduce(function(e,t){var n=t.key,r=t.order;return(e[n]=r)&&e},{});t.removeClass(Object(i.values)(r).join(" ")),t.each(function(){var e=$(this),t=e.data("axis-key"),i=o[t]||n,a=r[i];return e.addClass(a)})},PivotTableController.prototype.initializeSortableHeaderTogglers=function(){var e,t=this.sortState,n=this.renderTable.bind(this),r=this.$element.find("table").find(".pvtAxisLabel .pvtFixedHeader").not(".pvtNoSort > .pvtFixedHeader"),o=$('\n      <a href="#" class="axel-dropdown dropdown active">\n        <span\n          class="action-menu axel-dropdown-toggle dropdown-toggle"\n          aria-haspopup="true"\n          aria-expanded="false"></span>\n      </a>\n    '),i=(e=o,function(t){var n=t.order,r=e.clone(),o=x.sortIcon(n);return r.on("click",handleTogglerClick),r.find(".axel-dropdown-toggle").addClass(o),r});function handleTogglerClick(e){!function(e){var r=e.key,o=e.order,i=e.type;t.has(r,i)?t.update(r,i,o):t.add({key:r,type:i,order:o});n()}({key:{$el:$(e.currentTarget)}.$el.closest("th, td").first().data("axis-key"),order:x.nextSortState(getSortState({$el:$(e.currentTarget)})),type:"axis"})}function getSortState(e){var t=e.$el.closest("td, th").get(0),n=t&&t.className&&t.className.match(/sort-(.*)/),r=[].slice.call(n||[]).slice(1);return r&&r.length&&r[0]||k}r.each(function(e,t){$(t).append(i({order:getSortState({$el:$(t)})}))})},PivotTableController.prototype.initializeColumnSort=function(){this.initializeSortableHeaders(),this.initializeSortableHeaderTogglers()},PivotTableController.prototype.dataState=function(e){var t=this.ds.getDatasetState(this.queryToken());return e?!!~t.search(e):t},PivotTableController.prototype.titleEditDisabled=function(){return this.isReportMode()&&!this.isPreviewMode()},PivotTableController.prototype.updateChartTitle=function(e){this.view.chartTitle=e,this.broadcastEdit()},PivotTableController.prototype.broadcastEdit=function(){this.onEdit({$id:this.chartID,$view:this.view})},PivotTableController.prototype.initStickyHeaders=function(){var e=this,t=this.pivotTableViewOptions(),n=t.rows,r=t.filters,o=this.$element.find("thead"),i=this.$element.find(".pvtTopFixedHeaderPanel"),a=this.$element.find(".pvtLeftFixedHeaderPanel"),l=this.$element.find(".pvtTopLeftFixedHeaderPanel"),s=this.$element.find(".pvtAxisLabel .pvtFixedHeader").not(".pvtFixedHeaderNoFollow"),c=this.$element.find("th.pvtRowLabel .pvtFixedHeader"),d=this.$element.find("tbody .pvtTotalLabel .pvtFixedHeader"),u=this.$element.find("th.pvtColLabel .pvtFixedHeader"),p=this.$element.find("th.pvtAxisLabel[data-col-key][colspan] .pvtFixedHeader"),h=(this.$element.find("th.pvtAxisLabel[data-row-key] .pvtFixedHeader"),this.$element.find("thead .pvtTotalLabel .pvtFixedHeader")),g=this.$element.find(".pvtMainHeaderWrapper"),m=this.$element.find(".pvtMainHeaderContainer"),f=this.$element.find("table"),C=c.add(d),y=u.add(h),b=this.$container[0].offsetWidth,v=f.height(),I=function(){return(n.length?c.slice(0,n.length):d).map(function(){return $(this).parent().get(0).offsetWidth}).get().reduce(function(e,t){return e+t},0)};function initHeaderPanels(){var e=I(),t=o.height(),n=o.width();a.css({top:"-"+v+"px",height:v+"px",width:e+"px",marginBottom:"-"+v+"px"}),i.css({top:"-"+v+"px",height:t+"px",width:n+"px",marginBottom:"-"+t+"px"}),l.css({top:"-"+v+"px",height:t+"px",width:e+"px",marginBottom:"-"+t+"px"})}function initHeaderAxisLabels(e){var t=e||b,n=I(),r=t-this.$container.prop("clientWidth"),o=p.outerWidth()-p.width(),i=t-(r+n),a=t-(r+(m.outerWidth()-m.width()));this.isDesignerMode()&&(i-=o),g.css({width:a}),p.css({width:i})}!function(){s.not(".pvtNoSort .pvtFixedHeader").each(function(e,t){var n=$(t).closest(".pvtAxisLabel"),o=n.data("axis-key");r.indexOf(o)>=0&&n.addClass("is-filtered")}),C.add(y).add(s).map(function(e,t){var n=$(t),r=n.parent().height();return{$el:n,containerHeight:r}}).get().forEach(function(e){var t=e.$el,n=e.containerHeight;t.css({height:n+"px"})})}(),initHeaderPanels(),this.$container.on("scroll",function(e){var t=e.currentTarget,n=t.scrollLeft,r=t.scrollTop;requestAnimationFrame(function(){a.css({left:n}),i.css({top:-v+r}),l.css({top:-v+r,left:n}),C.each(function(){$(this).css({left:n})}),y.each(function(){$(this).css({top:r})}),s.each(function(){$(this).css({top:r,left:n})})})}),this.$container.scroll(),initHeaderAxisLabels.call(this),setTimeout(function(){(function(){v=f.height(),b=this.$container.width()}).call(e),initHeaderAxisLabels.call(e),initHeaderPanels.call(e),e.$container.scroll()},100),this.initPivotResizeHandler.call(this,function(){initHeaderAxisLabels.call(this,this.$container.width())})},PivotTableController.prototype.initPivotResizeHandler=function(e){$(this.$window).on("resize.pivotWidth",Object(i.debounce)(e.bind(this),50))},PivotTableController.prototype.handlePreviewUpdate=function(e,t){(null==t||t.updateChart&&t.updateChart.token===this.chartID)&&this.renderTable()},PivotTableController.prototype.renderTable=function(){var e=this,t=this.pivotTableViewOptions(),n=t.rows,r=t.columns,o=t.values,a=t.aggregator,l=this.$container.parent(),s=l.width(),c=this.$container.outerWidth();this.$container.children().length&&l.append(function(e){return e.css({left:(c-s)/-2})}(this.$container.clone().addClass("pivot-table-container-mask")));this.$window.requestAnimationFrame(function(){e.$container.removeClass("reveal"),e.$container.addClass("conceal"),e.$container.off("scroll"),e.$container.pivot(e.dataset.content,{rows:n,cols:r,vals:o,aggregator:e.pivotTableAggregator(a),sorters:e.sortStateToSorters(),filter:e.pivotTableFilter(),renderer:pivotTableRenderer,rendererOptions:{beforeRender:function(t){var n=t.rowCount,r=t.colCount;return Object(i.assign)(e.contentArea,{rowCount:n,colCount:r}),!e.contentAreaExceedsLimit()}}}).append([$('<div class="pvtFixedHeaderPanel pvtLeftFixedHeaderPanel"></div>'),$('<div class="pvtFixedHeaderPanel pvtTopFixedHeaderPanel"></div>'),$('<div class="pvtFixedHeaderPanel pvtTopLeftFixedHeaderPanel"></div>')]).find("table:first-child").each(function(){e.$window.requestAnimationFrame(function(){e.$window.requestAnimationFrame(function(){e.initStickyHeaders.call(e),e.initializeColumnSort.call(e),l.find(".pivot-table-container-mask").hide().remove(),e.$container.removeClass("conceal"),e.$container.addClass("reveal"),e.onRenderEnd({$vizID:m.a.tokenFromVizID(e.chartID)}),e.$timeout(function(){e.$window.dispatchEvent(new Event("resize"))})})})})})},PivotTableController.prototype.pivotTableViewOptions=function(){return Object(i.defaults)({},this.view.pivotTable,{filters:[],filterValues:{},columnFormats:{},columns:[],rows:[],values:[]})},PivotTableController.prototype.pivotTableAggregator=function(e){var t=$.pivotUtilities.aggregatorTemplates,n=t.sum,r=t.count,o=t.countUnique,i=t.average,a=t.max,l=t.min,s=[this.pivotTableViewOptions().values[0]],c=this.getFormatter(),d={DEFAULT:function(){return d.count()},sum:function(){return n(c)(s)},count:function(){return r(c)()},countDistinct:function(){return o(c)(s)},average:function(){return i(c)(s)},max:function(){return a(c)(s)},min:function(){return l(c)(s)}};return(d[e]||d.DEFAULT)()},PivotTableController.prototype.sortStateToSorters=function(){var e,t=$.pivotUtilities.naturalSort,n=((e={}).asc=t,e.desc=function(e,n){return t.call(null,n,e)},e[k]=t,e);return this.sortState.getStack().reduce(function(e,t){return e[t.key]=n[String(t.order)],e},{})},PivotTableController.prototype.pivotTableFilter=function(){var e=this;return function(t){var n=e.pivotTableViewOptions().filterValues;return!Object.keys(n).some(function(e){return n[e].indexOf(t[e])>=0})}},PivotTableController.prototype.containerHeight=function(){return this.$element.find(this.SIDE_PANEL_SELECTOR).height()},PivotTableController.prototype.isDesignerMode=function(){return this.$state.includes("application.reports.edit")||this.designerMode},PivotTableController.prototype.isReportMode=function(){return!this.$state.includes("application.reports.edit")},PivotTableController.prototype.isPreviewMode=function(){return/embed-preview/.test(this.$window.document.body.className)},PivotTableController.prototype.isPhantomMode=function(){return!!this.$window._phantom||!!this.$window.callPhantom},PivotTableController.prototype.isEmptyStateInDesigner=function(){var e=this.pivotTableViewOptions(),t=e.rows,n=e.columns,r=e.values,o=e.filters;return!t.concat(n,r,o).length&&this.isDesignerMode()},PivotTableController.prototype.linkTo=function(e,t){this.rls.hasLinkToPageMethod()&&this.rls.isLinkable()&&(e.preventDefault(),e.stopPropagation(),this.rls.linkToPage("lightbox"===t||"explore"===t?{id:this.chartID,view:this.view}:this.queryToken(),t))},PivotTableController.prototype.getReportDataURL=function(){var e=this.getQueryData();return e&&e.reportDataUrl||""},PivotTableController.prototype.getReportQueryURL=function(){var e=this.getQueryData();return e&&e.reportQueryUrl||""},PivotTableController.prototype.getReportVizURL=function(){return this.view&&this.view._vizReportRunLink||""},PivotTableController.prototype.queryToken=function(){return this.vos.queryTokenFromVizID(this.vos.formatVizID(this.chartID,m.a.OPTION_TYPE_CHART))},PivotTableController.prototype.queryName=function(){var e=this.getQueryData();return e&&e.queryName||""},PivotTableController.prototype.getDOMClasses=function(){return{"is-design-mode":this.isDesignerMode(),"is-phantom-mode":this.isPhantomMode(),"is-report-mode":this.isReportMode(),"is-panel-open":this.panelEnabled,"no-row-dividers":(this.view.pivotTable.rows||[]).length<=1,"no-col-dividers":(this.view.pivotTable.columns||[]).length<=1}},PivotTableController.prototype.getFormatter=function(){var e=this.pivotTableViewOptions(),t=e.columnFormats,n=e.values[0],r=t[n]||{},o="automatic"!==r.type?r.type:"number",i=this.fos.getPresetFormatters(t);return this.fos.getFormatter(t,n,null,o,i)},PivotTableController.prototype.getQueryData=function(){return this.ds.getDatasetByKey(this.queryToken())},PivotTableController.prototype.togglePanel=function(e){this.linkTo(e,"explore")},PivotTableController.prototype.openPanel=function(){this.panelEnabled=!0},PivotTableController.prototype.closePanel=function(){this.panelEnabled=!1},PivotTableController.prototype.updateView=function(e){var t=this;this.$timeout(function(){t.view.pivotTable=e})},PivotTableController.prototype.contentAreaExceedsLimit=function(){var e=Object(i.partialRight)(i.assignWith,function(e,t){return t>0?t:e})({rowCount:1,colCount:1},this.contentArea),t=e.rowCount,n=e.colCount,r=Math.pow(2e3,1/11.25),o=Math.max(t,n)/Math.min(t,n);return t*n*(1+Math.log(o)/Math.log(r))>22500},PivotTableController.$inject=["$state","$window","$element","$scope","$timeout","ReportLinkService","ViewOptionsService","DatasetService","FormatOptionsService","Utils"],PivotTableController}(),controllerAs:"ctrl",bindings:{view:"<",dataset:"<",chartID:"@id",onAction:"&",onEdit:"&",onRenderStart:"&?",onRenderEnd:"&?",chartOptions:"<",panelEnabled:"=",viewer:"<"},template:'\n    <div\n      class="editor-module editor-chart mode-object editor-multi pivot-table"\n      ng-class="ctrl.getDOMClasses()" >\n\n        \x3c!-- Chart Content Begins --\x3e\n        <div class="chart-content"\n             ng-show="!ctrl.isEmptyStateInDesigner()">\n\n          \x3c!-- Component Header Begins --\x3e\n          <div class="chart-header"\n               ng-class="{ \'has-open-panel\': ctrl.panelEnabled }"\n               ng-show="!(ctrl.isDesignerMode() && ctrl.dataExceedsLimit())">\n            <span class="lightbox-title" ng-class="{\'chart-title\': ctrl.isDesignerMode()}">\n              <in-place-edit text="ctrl.view.chartTitle"\n                             alt-text="Click to add title"\n                             on-change="ctrl.updateChartTitle($text)"\n                             no-edit="ctrl.titleEditDisabled()"></in-place-edit>\n            </span>\n\n            \x3c!-- New Menu Actions Begin --\x3e\n            <div class="new-viz-actions" ng-if="ctrl.viewer !== \'whiteLabel\' && !ctrl.isDesignerMode()">\n\n              <a\n                class="new-viz-action hide-2"\n                ng-if="ctrl.viewer !== \'whiteLabel\'"\n                ng-show="isClipboardEnabled"\n                href="javascript:void(0)"\n                uib-tooltip="Copy Link to Table"\n                copy-to-clipboard\n                clipboard-text="ctrl.getReportVizURL()"\n                clipboard-success="ctrl.copySuccess()"\n                clipboard-enabled="isClipboardEnabled">\n                <svg-icon type="\'copy-link\'"></svg-icon>\n              </a>\n\n              <a class="new-viz-action" href="javascript:void(0)" ng-if="ctrl.dataset && ctrl.viewer !== \'whiteLabel\'">\n                <kebab-menu targetable="true">\n                  <li menu-clipboard-link class="show-2" link="ctrl.getReportVizURL()" clipboard-enabled="isClipboardEnabled" clipboard-success="ctrl.copySuccess()" ng-show="isClipboardEnabled">Copy Link to Pivot Table</li>\n                  <li class="show-3 show-2 divider"></li>\n                  <li menu-item="exp" ng-click="ctrl.linkTo($event, \'query\')" ng-href="{{ ctrl.dataset.reportQueryUrl }}" ng-if="!ctrl.viewer">View Query <span class="mode-show-embed-inline">in Mode</span></li>\n                  <li menu-item="exp" ng-click="ctrl.linkTo($event, \'data\')" ng-href="{{ ctrl.dataset.reportDataUrl }}">View Query Results <span class="mode-show-embed-inline">in Mode</span></li>\n                </kebab-menu>\n              </a>\n\n              <span class="divider" ng-if="!ctrl.viewer"></span>\n\n              <a class="new-viz-action" ng-href="{{ ctrl.getReportVizURL() }}"\n                ng-if="!ctrl.viewer && ctrl.plan === \'plus\'"\n                ng-click="ctrl.togglePanel($event)"\n                class="new-viz-action">\n                <svg-icon class="mode-hide-embed" type="\'toggle-explorer\'" uib-tooltip="Explore"></svg-icon>\n                <svg-icon class="mode-show-embed-flex-inline" type="\'toggle-explorer\'" uib-tooltip="Explore in Mode" tooltip-placement="left"></svg-icon>\n              </a>\n\n              <a class="new-viz-action" ng-href="{{ ctrl.getReportVizURL() }}"\n                ng-if="!ctrl.viewer && ctrl.plan !== \'plus\'"\n                ng-click="ctrl.togglePanel($event)"\n                class="new-viz-action">\n                <svg-icon class="mode-hide-embed" type="\'toggle-expanded-view\'" uib-tooltip="Explore"></svg-icon>\n                <svg-icon class="mode-show-embed-flex-inline" type="\'toggle-expanded-view\'" uib-tooltip="Explore in Mode" tooltip-placement="left"></svg-icon>\n              </a>\n\n            </div>\n            \x3c!-- New Menu Actions End --\x3e\n\n          </div>\n          \x3c!-- @Component Header Ends --\x3e\n\n          \x3c!-- Component Body Begins --\x3e\n          <div class="chart-body" ng-show="!ctrl.dataExceedsLimit()">\n\n            \x3c!-- Pivot Table Container Begins --\x3e\n            <div id="js-pivot-table-container" class="mode-table-grid pivot-table-container row-key-cnt-{{ctrl.view.pivotTable.rows.length}}" ></div>\n            \x3c!-- @Pivot Table Container Ends --\x3e\n\n          </div>\n          \x3c!-- @Component Body Ends --\x3e\n\n          \x3c!-- Side Column Begins --\x3e\n          <div\n            id="js-side-panel"\n            class="side-panel chart-sidebar"\n            ng-if="ctrl.panelEnabled && ctrl.isReportMode() && !ctrl.isPreviewMode()">\n\n            \x3c!-- Pivot Table Settings Begin --\x3e\n            <pivot-table-settings\n              ng-cloak\n              token="ctrl.chartID"\n              data="ctrl.dataset"\n              view="ctrl.view.pivotTable"\n              container-height="ctrl.containerHeight()"\n              on-settings-update="ctrl.updateView($view)">\n            </pivot-table-settings>\n            \x3c!-- @Pivot Table Settings End --\x3e\n\n          </div>\n          \x3c!-- @Side Column Ends --\x3e\n\n        </div>\n        \x3c!-- @Chart Content Ends --\x3e\n\n        \x3c!-- Intermediary Messages Begins --\x3e\n        <div ng-if="ctrl.dataState(\'cancelled\')" class="error-message">\n          <i class="icon-warning-small error-icon"></i>\n          <div class="message">This query was canceled</div>\n          <div class="sub-message"></div>\n        </div>\n        <div ng-if="ctrl.isEmptyStateInDesigner() && !ctrl.dataExceedsLimit()" class="error-message error-empty-message">\n          <div class="message">\n            <h2 class="heading">To create a pivot table, drag fields from the list on the right.</h2>\n          </div>\n          <div class="hero">\n            <i class="icon-pivot-empty-state"></i>\n          </div>\n        </div>\n        <div ng-if="ctrl.contentAreaExceedsLimit()" class="error-message error-cant-render-message">\n          <div class="message">\n            <h2 class="heading">This pivot table will be too large to display!</h2>\n            <h3 class="summary">Try using fields with fewer options</h3>\n          </div>\n          <div class="hero">\n            <i class="icon-performance-table"></i>\n          </div>\n        </div>\n        <div class="chart-error" ng-show="ctrl.dataExceedsLimit()">\n          <h3>Sorry, unable to render a chart with the given data</h3>\n          <p>{{ ctrl.message.limit_exceeded }}</p>\n        </div>\n        \x3c!-- @Intermediary Messages End --\x3e\n\n    </div>\n  '},N="single",E="multiple",j="multiple-invert",O=function(){function SettingsContextPanelController(e){var t=this;this.$element=e,this.enabled=!1,this.filterEnabled=!1,this.filterPattern="",this.filterOptions={debounce:100},this.CONTEXT_LIST_TYPE_SINGLE=N,this.CONTEXT_LIST_TYPE_MULTIPLE=E,this.CONTEXT_LIST_TYPE_MULTIPLE_INVERT=j,this.$onInit=function(){t.restrictScrollingToPanel()}}return SettingsContextPanelController.prototype.restrictScrollingToPanel=function(){return this.$element.find(".panel-body").on("wheel",function(e){var t=$(this),n=e.originalEvent.deltaY,r=t.get(0).scrollHeight-t.innerHeight();n<0&&0===t.scrollTop()?e.preventDefault():n>0&&t.scrollTop()===r&&e.preventDefault()})},SettingsContextPanelController.prototype.dismiss=function(e){e.preventDefault(),this.onDismiss?this.onDismiss():this.enabled=!1,this.filterPattern=""},SettingsContextPanelController.prototype.isListType=function(e){return Array.isArray(e)?e.indexOf(this.listType)>=0:this.listType===e},SettingsContextPanelController.prototype.isListTypeMultiple=function(){return this.isListType([E,j])},SettingsContextPanelController.prototype.isSelected=function(e){return this.listType===j?-1===this.listSelected.indexOf(e):this.listSelected.indexOf(e)>=0},SettingsContextPanelController.prototype.isAllSelected=function(){return this.listType===j?0===this.listSelected.length&&this.listAvailable.length:this.listAvailable.length===this.listSelected.length},SettingsContextPanelController.prototype.isPartiallySelected=function(){var e=this.listAvailable.length,t=this.listSelected.length;return Object(i.inRange)(t,1,e)},SettingsContextPanelController.prototype.getPanelHeight=function(){return this.enabled?this.panelHeight:0},SettingsContextPanelController.prototype.toggleSelection=function(e){this.listSelected=function(e,t){var n=e.indexOf(t),r=e.slice();n>=0?r.splice(n,1):r.push(t);return r}(this.listSelected,e),this.onUpdate({$selected:this.listSelected,$context:this.context})},SettingsContextPanelController.prototype.toggleAllSelection=function(){this.isAllSelected()||this.isPartiallySelected()?this.unselectAll():this.selectAll(),this.onUpdate({$selected:this.listSelected,$context:this.context})},SettingsContextPanelController.prototype.handleSelectAllClick=function(e){this.isPartiallySelected()&&e.preventDefault(),this.toggleAllSelection()},SettingsContextPanelController.prototype.unselectAll=function(){this.listType===j?this.listSelected=this.listAvailable.slice():this.listSelected=[]},SettingsContextPanelController.prototype.selectAll=function(){this.listType===j?this.listSelected=[]:this.listSelected=this.listAvailable.slice()},SettingsContextPanelController.prototype.setSelection=function(e){this.onUpdate({$selected:[e],$context:this.context})},SettingsContextPanelController.prototype.itemValue=function(e){return e.value||e},SettingsContextPanelController.prototype.itemDisplayName=function(e){return e.displayName||e},SettingsContextPanelController.$inject=["$element"],SettingsContextPanelController}();var P={controller:function(){function PivotTableSettingsController(e,t,n,r){this.$element=e,this.$timeout=t,this.$log=n,this.$state=r,this.pivotConfigIntro="",this.state={accordion:{chart:!0,format:!1},contextPanel:{quadrant:"",field:"",enabled:!1,filterEnabled:!1,available:[],selected:[]}}}return PivotTableSettingsController.prototype.$onInit=function(){this.initView(),"function"==typeof this.onSettingsUpdate&&(this.onSettingsUpdate=Object(i.debounce)(this.onSettingsUpdate,150))},PivotTableSettingsController.prototype.$onChanges=function(e){this.dataExceedsLimit()||e.view&&(this.initView(),this.onSelectedColumnChanged())},PivotTableSettingsController.prototype.initView=function(){this._view=Object(i.cloneDeep)(this.view||{}),null==this.view.columnFormats&&(this.view.columnFormats={})},PivotTableSettingsController.prototype.dataExceedsLimit=function(){return this.data.count>=u.k},PivotTableSettingsController.prototype.onSelectedColumnChanged=function(){this.columnView=this.view.columnFormats[this.view.values[0]]||{}},PivotTableSettingsController.prototype.isReportMode=function(){return!this.$state.includes("application.reports.edit")},PivotTableSettingsController.prototype.getPivotConfigHeight=function(){return this.containerHeight-this.$element.find(".chart-nav").outerHeight()},PivotTableSettingsController.prototype.updateSettings=function(e){var t=this,n=e.view;this.$timeout(function(){t.onSettingsUpdate({$token:t.token,$view:n})})},PivotTableSettingsController.prototype.handleItemContextTrigger=function(e,t){this.openQuadrantContextPanel(e,t)},PivotTableSettingsController.prototype.openQuadrantContextPanel=function(e,t){var n=this,r={filters:{quadrant:e,field:t,type:j,available:Object(i.uniq)(this.data.content.map(function(e){return e[t]})),selected:this.view.filterValues[t]||[],enabled:!0,filterEnabled:!0},values:{quadrant:e,field:t,type:N,available:["sum","count",{value:"countDistinct",displayName:"count distinct"},"average","max","min"],selected:[this.view.aggregator],enabled:!0,filterEnabled:!1}};this.$timeout(function(){Object(h.a)(n.state.contextPanel,r[e])})},PivotTableSettingsController.prototype.handleContextDismiss=function(){this.state.contextPanel.enabled=!1},PivotTableSettingsController.prototype.handleContextUpdate=function(e,t){var n=this,r=this.pivotTableViewOptions(),o=this.state.contextPanel.field,a={filters:"filterValues",values:"values"};({values:function(e){return n.updateSettingsProperty("aggregator",e[0])},filters:function(e){var l,s,c=""+a[t],d=r[c],u=((l={})[""+o]=e,l);return n.updateSettingsDeep(((s={})[c]=Object(i.assign)({},d,u),s))}})[t](e)},PivotTableSettingsController.prototype.handleFilterChange=function(e,t){var n=Object(i.cloneDeep)(this.pivotTableViewOptions()),r=t.filters.filter(function(t){return-1===e.indexOf(t)}),o=e.filter(function(e){return-1===t.filters.indexOf(e)});n.filters=e,r.forEach(function(e){return n.filterValues[e]=[]}),this.updateSettings({view:n}),o.length&&this.openQuadrantContextPanel("filters",o[0])},PivotTableSettingsController.prototype.handleValueChange=function(e,t){this.updateSettingsProperty("values",e),this.onSelectedColumnChanged()},PivotTableSettingsController.prototype.handleColumnChange=function(e,t){this.updateSettingsProperty("columns",e)},PivotTableSettingsController.prototype.handleRowChange=function(e,t){this.updateSettingsProperty("rows",e)},PivotTableSettingsController.prototype.updateSettingsDeep=function(e){var t=Object(i.cloneDeep)(this.pivotTableViewOptions());Object(i.assign)(t,e),this.updateSettings({view:t})},PivotTableSettingsController.prototype.updateSettingsProperty=function(e,t){var n=Object(i.cloneDeep)(this.pivotTableViewOptions());n.hasOwnProperty(e)||this.$log.error(new Error('Invalid property "'+e+'"')),n[e]=t,this.updateSettings({view:n})},PivotTableSettingsController.prototype.getFormatSettings=function(){return this.columnView},PivotTableSettingsController.prototype.pivotTableViewOptions=function(){return this._view},PivotTableSettingsController.prototype.selectTab=function(e){var t,n=this.state.accordion;n.hasOwnProperty(e)&&Object.keys(n).forEach((t=e,function(e){return r=t===e,n[e]=r;var r}))},PivotTableSettingsController.prototype.updateFormatSettings=function(e){var t,n=this.view.values[0];this.updateSettingsDeep({columnFormats:Object(i.assign)({},this.view.columnFormats,(t={},t[""+n]=e,t))})},PivotTableSettingsController.$inject=["$element","$timeout","$log","$state"],PivotTableSettingsController}(),controllerAs:"ctrl",bindings:{view:"<",data:"<",token:"<",containerHeight:"<",onSettingsUpdate:"&?"},template:'\n    <div\n      class="pivot-table-settings"\n      ng-if="!ctrl.dataExceedsLimit()"\n      style="height: {{ctrl.containerHeight}}px">\n    \n      <div class="chart-accordion">\n      \n        \x3c!-- Tab Navigation Begins --\x3e\n        <div class="chart-nav">\n          <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n          <li ng-class="{active:ctrl.state.accordion.chart}"><a ng-click="ctrl.selectTab(\'chart\')">Data</a></li>\x3c!--\n          --\x3e<li ng-class="{active:ctrl.state.accordion.format}"><a ng-click="ctrl.selectTab(\'format\')">Format</a></li>\n          </ul>\n        </div>\n        \x3c!-- @Tab Navigation Ends--\x3e\n        \n        \x3c!-- Data Tab Begins --\x3e\n        <div class="chart-tab-content no-overflow" ng-show="ctrl.state.accordion.chart">\n        \n          \x3c!-- Pivot Config Begins --\x3e\n          <pivot-config\n            intro-html="ctrl.pivotConfigIntro"\n            hide-intro="!ctrl.isReportMode()"\n            columns="ctrl.data.columns"\n            height="ctrl.getPivotConfigHeight()"\n            quadrant-map="ctrl.pivotTableViewOptions()"\n            on-item-context-triggered="ctrl.handleItemContextTrigger($quadrant, $itemId)"\n            on-filter-change="ctrl.handleFilterChange($field, $old)"\n            on-value-change="ctrl.handleValueChange($field, $old)"\n            on-column-change="ctrl.handleColumnChange($field, $old)"\n            on-row-change="ctrl.handleRowChange($field, $old)" ></pivot-config>\n          \x3c!-- @Pivot Config Ends--\x3e\n          \n        </div>\n        \x3c!-- @Data Tab Ends --\x3e\n        \n        \x3c!-- Format Tab Begins --\x3e\n        <div class="chart-tab-content" ng-show="ctrl.state.accordion.format">\n        \n          \x3c!-- Format Settings Begin --\x3e\n          <format-settings\n            format-options="ctrl.getFormatSettings()"\n            enabled-formats="[\'automatic\', \'number\', \'percentage\', \'financial\', \'currency\']"\n            on-change="ctrl.updateFormatSettings($formatOptions)">\n          </format-settings>\n          \x3c!-- @Format Settings End --\x3e\n          \n        </div>\n        \x3c!-- @Format Tab Ends--\x3e \n        \n        <settings-context-panel\n          context="ctrl.state.contextPanel.quadrant"\n          panel-height="ctrl.containerHeight"\n          title="{{ctrl.state.contextPanel.quadrant}}"\n          subtitle="{{ctrl.state.contextPanel.field}}"\n          list-type="ctrl.state.contextPanel.type"\n          list-available="ctrl.state.contextPanel.available"\n          list-selected="ctrl.state.contextPanel.selected"\n          enabled="ctrl.state.contextPanel.enabled"\n          filter-enabled="ctrl.state.contextPanel.filterEnabled"\n          on-dismiss="ctrl.handleContextDismiss()"\n          on-update="ctrl.handleContextUpdate($selected, $context)">\n        </settings-context-panel>\n        \n      </div>\n    '},F=0,z=1,_=2,B=function(){function DraggableItemController(e){var t=this;this.$element=e,this.type=F,this.LABEL_SELECTOR=".pill-label",this.$postLink=function(){var e=t.$element.find(t.LABEL_SELECTOR),n=e.get(0);e.attr("draggable","true"),e.on("mousedown",function(e){return t.handleMouseDown(e)}),n.addEventListener("dragstart",function(e){return t.handleDragStart(e)}),n.addEventListener("dragend",function(e){return t.handleDragEnd(e)})},this.$onDestroy=function(){var e=t.$element.find(t.LABEL_SELECTOR),n=e.get(0);e.off("mousedown"),n.parentNode.replaceChild(n.cloneNode(!0),n)}}return DraggableItemController.prototype.getId=function(){return this.value},DraggableItemController.prototype.selectLabel=function(){this.onSelect({$id:this.getId()})},DraggableItemController.prototype.trigger=function(){this.onTrigger&&this.onTrigger({$id:this.getId()})},DraggableItemController.prototype.getClassState=function(){return{"is-selected":this.selected,"is-type-dropdown":this.isTypeDropdown(),"is-type-simple":this.isTypeSimple(),"is-type-default":this.isTypeDefault(),"has-additional-text":this.additionalText}},DraggableItemController.prototype.isTypeSimple=function(){return this.type==z},DraggableItemController.prototype.isTypeDropdown=function(){return this.type==_&&!!this.onTrigger},DraggableItemController.prototype.isTypeDefault=function(){return this.type==F},DraggableItemController.prototype.handleMouseDown=function(e){this.selectLabel()},DraggableItemController.prototype.handleDragStart=function(e){var t=this.getId(),n=this.value,r=this.contextId,o=JSON.stringify({value:n,contextId:r});this.onDragStart&&this.onDragStart({$evt:e,$id:t}),e.dataTransfer.setData("data",o),this.selectLabel()},DraggableItemController.prototype.handleDragEnd=function(e){var t=this.getId();this.onDragEnd&&this.onDragEnd({$evt:e,$id:t})},DraggableItemController.$inject=["$element"],DraggableItemController}(),V=function(){function DraggableItemListController(e,t){var n=this;this.$timeout=e,this.$scope=t,this.itemType=F,this.ITEM_TYPE_DEFAULT=F,this.ITEM_TYPE_SIMPLE=z,this.ITEM_TYPE_DROPDOWN=_,this.selectedItem="",this.$onChanges=function(e){var t=e.selectedGroupListItem,r=n.listId();t&&(n.selectedItem=n.selectedGroupListItem[r]||"")}}return DraggableItemListController.prototype.listId=function(){return this.$scope.$id},DraggableItemListController.prototype.handleItemSelection=function(e){var t=this;this.onGroupListItemSelect?this.onGroupListItemSelect({$itemId:e,$listId:this.listId()}):this.$timeout(function(){return t.selectedItem=e})},DraggableItemListController.prototype.handleItemTrigger=function(e){this.onGroupListItemTrigger&&this.onGroupListItemTrigger({$itemId:e,$listId:this.listId()})},DraggableItemListController.prototype.handleItemDragStart=function(e,t){this.onItemDragStart&&this.onItemDragStart({$evt:e,$itemId:t})},DraggableItemListController.prototype.handleItemDragEnd=function(e,t){this.onItemDragEnd&&this.onItemDragEnd({$evt:e,$itemId:t})},DraggableItemListController.$inject=["$timeout","$scope"],DraggableItemListController}(),U={controller:function(){function PivotConfigController(e,t,n){var r=this;this.$element=e,this.$timeout=t,this.$sce=n,this.introHtml="",this.hideIntro=!1,this.quadrants=u.w,this.selectedListItem={},this.draggableStatus={listId:"",itemId:"",dropped:!0},this.dragInProgress=!1,this.$onChanges=function(e){e.columns&&r.initializeColumnNames()},this.$postLink=function(){r.quadrantEls=r.$element.find(".pivot-config-quadrants .drag-drop-target").toArray()}}return PivotConfigController.prototype.initializeColumnNames=function(){this.columnNames=this.columns.map(function(e){return e.name})},PivotConfigController.prototype.handleQuadrantUpdate=function(e,t,n){var r=this;void 0===n&&(n="add");var o=Object(i.cloneDeep)(this.quadrantMap),a={filters:function(e,t){r.onFilterChange({$field:e,$old:t})},values:function(e,t){r.onValueChange({$field:e,$old:t})},columns:function(e,t){r.onColumnChange({$field:e,$old:t})},rows:function(e,t){r.onRowChange({$field:e,$old:t})}},l=function(e,t){var n;return((n={}).add={filters:"add",values:"set",rows:"add",columns:"add"},n.remove={filters:"remove",values:"remove",rows:"remove",columns:"remove"},n)[t][e]||t}(e,n);"remove"!==n&&Object(i.assign)(this.draggableStatus,{listId:e,dropped:!0}),a[e](this.applyUpdateAction(e,t,l),o)},PivotConfigController.prototype.handleFieldListDragStart=function(){var e=this;this.$timeout(function(){return e.dragInProgress=!0})},PivotConfigController.prototype.handleFieldListDragEnd=function(){var e=this;this.$timeout(function(){return e.dragInProgress=!1})},PivotConfigController.prototype.applyUpdateAction=function(e,t,n){var r,o=this,a=((r={}).set=function(e,t){return[t]},r.add=function(e,t){return Object(i.union)(o.quadrantMap[e].slice(),[t])},r.remove=function(e,t){return o.quadrantMap[e].slice().filter(function(e){return e!==t})},r);return this.quadrantMap[e]=a[n](e,t)},PivotConfigController.prototype.getFieldListHeight=function(){return this.height-this.$element.find(".pivot-config-quadrants").outerHeight()},PivotConfigController.prototype.getIntroHtml=function(){return this.$sce.trustAsHtml(this.introHtml)},PivotConfigController.prototype.deleteQuadrantItem=function(e,t){this.handleQuadrantUpdate(e,t,"remove")},PivotConfigController.prototype.handleItemDragEnd=function(e,t,n){var r=this.draggableStatus,o=r.listId,i=r.itemId;(!r.dropped||o!==t)&&i===n&&this.deleteQuadrantItem(t,n)},PivotConfigController.prototype.handleItemDragStart=function(e,t,n){Object(i.assign)(this.draggableStatus,{listId:t,itemId:n,dropped:!1})},PivotConfigController.prototype.handleListItemSelection=function(e,t){var n=this;this.$timeout(function(){var r;n.selectedListItem=((r={})[""+e]=t,r)})},PivotConfigController.prototype.handleListItemTrigger=function(e,t,n){this.onItemContextTriggered({$quadrant:e,$itemId:n})},PivotConfigController.prototype.quadrantValues=function(e){return{filters:this.quadrantMap.filters,rows:this.quadrantMap.rows,columns:this.quadrantMap.columns,values:this.quadrantMap.values}[e]},PivotConfigController.prototype.quadrantHasValue=function(e){return Array.isArray(e)?!!Object(i.flatMap)(Object(i.pick)(this.quadrantMap,e.map(function(e){return e.id}))).length:!!this.quadrantValues(e).length},PivotConfigController.prototype.getQuadrantDraggableType=function(e){return{filters:_,rows:z,columns:z,values:_}[e]},PivotConfigController.prototype.getQuadrantListType=function(e){return{filters:1,rows:1,columns:1,values:0}[e]},PivotConfigController.prototype.getAdditionalText=function(e){var t={DEFAULT:"?",sum:"sum",average:"avg",min:"min",max:"max",count:"cnt",countDistinct:"cnt d"};return{filters:"",rows:"",columns:"",values:t[this.quadrantMap.aggregator]||t.DEFAULT}[e]},PivotConfigController.$inject=["$element","$timeout","$sce"],PivotConfigController}(),controllerAs:"ctrl",bindings:{height:"<",columns:"<",introHtml:"<?",hideIntro:"<?",quadrantMap:"<",onItemContextTriggered:"&?",onFilterChange:"&",onValueChange:"&",onColumnChange:"&",onRowChange:"&"},template:'\n    <div class="pivot-config">\n      <div class="columns" style="height: {{ctrl.getFieldListHeight()}}px">\n\n        <div class="intro"\n             ng-if="ctrl.introHtml && !ctrl.hideIntro"\n             ng-bind-html="ctrl.getIntroHtml()"></div>\n\n        <h4>Fields</h4>\n\n        \x3c!-- Draggable Column List Begins --\x3e\n        <draggable-item-list\n          on-item-drag-start="ctrl.handleFieldListDragStart()"\n          on-item-drag-end="ctrl.handleFieldListDragEnd()"\n          selected-group-list-item="ctrl.selectedListItem"\n          on-group-list-item-select="ctrl.handleListItemSelection($listId, $itemId)"\n          items="ctrl.columnNames"\n        />\n        \x3c!-- @Draggable Column List Ends --\x3e\n\n      </div>\n      <div class="pivot-config-quadrants"\n           ng-class="{\'has-value\': ctrl.quadrantHasValue(ctrl.quadrants), \'is-emphasized\': ctrl.dragInProgress }">\n        <div\n          ng-repeat="quadrant in ctrl.quadrants"\n          class="quadrant quadrant-{{quadrant.id}}">\n          <div class="quadrant-title"><i class="{{quadrant.icon}} quadrant-icon"></i><span>{{quadrant.name}}</span></div>\n\n          \x3c!-- Drag Drop Quadrant Target Begins --\x3e\n          <droppable-target\n            has-value="ctrl.quadrantHasValue(quadrant.id)"\n            on-update="ctrl.handleQuadrantUpdate(quadrant.id, $value)">\n\n            \x3c!-- Selected Column List Begins --\x3e\n            <draggable-item-list\n              context-id="quadrant.id"\n              additional-text="{{ctrl.getAdditionalText(quadrant.id)}}"\n              item-type="ctrl.getQuadrantDraggableType(quadrant.id)"\n              list-type="ctrl.getQuadrantListType(quadrant.id)"\n              selected-group-list-item="ctrl.selectedListItem"\n              on-item-drag-end="ctrl.handleItemDragEnd($evt, quadrant.id, $itemId)"\n              on-item-drag-start="ctrl.handleItemDragStart($evt, quadrant.id, $itemId)"\n              on-group-list-item-select="ctrl.handleListItemSelection($listId, $itemId)"\n              on-group-list-item-trigger="ctrl.handleListItemTrigger(quadrant.id, $listId, $itemId)"\n              items="ctrl.quadrantValues(quadrant.id)"\n            />\n            \x3c!-- @Selected Column List Ends --\x3e\n\n          </droppable-target>\n          \x3c!-- @Drag Drop Quadrant Target Ends --\x3e\n\n        </div>\n      </div>\n    </div>\n  '},Z={controller:B,controllerAs:"ctrl",bindings:{value:"<",selected:"<",type:"<",contextId:"<?",additionalText:"@?",onSelect:"&?",onTrigger:"&?",onDragStart:"&?",onDragEnd:"&?"},template:'\n    <span\n      class="pill-label"\n      ng-class="ctrl.getClassState()"\n      ng-click="ctrl.trigger()">\n      \n      \x3c!-- Draggable Pill Name Begins --\x3e\n      <span class="pill-name" title="{{ctrl.value}}">\n        <span class="pill-name-label">{{ctrl.value}}</span>\n        <span ng-if="ctrl.additionalText">({{ctrl.additionalText}})</span>\n      </span>\n      \x3c!-- @Draggable Pill Name Ends --\x3e\n      \n      \x3c!-- Draggable Pill Dropdown Begins --\x3e\n      <a\n        href="#"\n        class="pill-trigger"\n        ng-if="ctrl.isTypeDropdown()">\n      </a>\n      \x3c!-- @Draggable Pill Dropdown Ends --\x3e\n      \n    </span>\n  '},G={controller:V,controllerAs:"ctrl",bindings:{items:"<",itemType:"<?",contextId:"<?",additionalText:"@?",selectedGroupListItem:"<",onGroupListItemSelect:"&?",onGroupListItemTrigger:"&?",onItemDragStart:"&?",onItemDragEnd:"&?"},template:'\n    <div class="pill-list" >\n      <div ng-if="ctrl.itemType == ctrl.ITEM_TYPE_DEFAULT || ctrl.itemType == ctrl.ITEM_TYPE_SIMPLE">\n        <draggable-item\n          class="pill"\n          value="item"\n          type="ctrl.itemType"\n          additional-text="{{ctrl.additionalText}}"\n          context-id="ctrl.contextId"\n          selected="item === ctrl.selectedItem"\n          on-select="ctrl.handleItemSelection($id)"\n          on-drag-start="ctrl.handleItemDragStart($evt, $id)"\n          on-drag-end="ctrl.handleItemDragEnd($evt, $id)"\n          ng-repeat="item in ctrl.items" />\n      </div>\n      <div ng-if="ctrl.itemType == ctrl.ITEM_TYPE_DROPDOWN">\n        <draggable-item\n          class="pill"\n          value="item"\n          type="ctrl.itemType"\n          additional-text="{{ctrl.additionalText}}"\n          context-id="ctrl.contextId"\n          selected="item === ctrl.selectedItem"\n          on-drag-start="ctrl.handleItemDragStart($evt, $id)"\n          on-drag-end="ctrl.handleItemDragEnd($evt, $id)"\n          on-select="ctrl.handleItemSelection($id)"\n          on-trigger="ctrl.handleItemTrigger($id)"\n          ng-repeat="item in ctrl.items" />\n        </div>\n    </div>\n  '},Y={controller:function(){function DroppableTargetController(e){var t=this;this.$element=e,this.TARGET_SELECTOR=".drag-drop-target",this.$postLink=function(){var e=t.$element.find(t.TARGET_SELECTOR).get(0);e.addEventListener("dragover",function(e){e.preventDefault()}),e.addEventListener("drop",function(e){var n=e.dataTransfer.getData("data"),r=JSON.parse(n),o=r.value,i=r.contextId;e.preventDefault(),t.onUpdate({$contextId:i,$value:o})})}}return DroppableTargetController.$inject=["$element"],DroppableTargetController}(),controllerAs:"ctrl",transclude:!0,bindings:{hasValue:"<",onUpdate:"&"},template:'\n    <div class="drag-drop-target" ng-class="{\'has-value\': ctrl.hasValue}" ng-transclude></div>\n  '},Q={controller:O,controllerAs:"ctrl",bindings:{title:"@",subtitle:"@",context:"<",listType:"<",enabled:"=?",filterEnabled:"=?",panelHeight:"<",listAvailable:"<",listSelected:"<",onDismiss:"&?",onUpdate:"&"},template:'\n    <div class="settings-context-panel" ng-class="{\'is-disabled\': !ctrl.enabled}" style="height: {{ctrl.getPanelHeight()}}px">\n\n      <div class="settings-panel-header">\n        <span class="header-title">\n          {{ctrl.title}} - {{ctrl.subtitle}}\n        </span>\n        <a class="dismiss-trigger" href="#" ng-click="ctrl.dismiss($event)">\n          <i class="icon-dismiss-white-blue"></i>\n        </a>\n      </div>\n\n      \x3c!-- Settings Panel Body Begins --\x3e\n      <div class="settings-panel-body">\n\n        \x3c!-- Settings Panel Controls Begin --\x3e\n        <div class="settings-panel-controls" ng-if="ctrl.filterEnabled">\n          <input type="text"\n                 ng-if="ctrl.filterEnabled"\n                 class="form-control form-control-sm form-control-block"\n                 ng-model="ctrl.filterPattern"\n                 ng-model-options="ctrl.filterOptions"\n                 placeholder="Find..." />\n        </div>\n        \x3c!-- @Settings Panel Controls End --\x3e\n\n        \x3c!-- Settings Panel Container Begins --\x3e\n        <div class="settings-panel-container">\n\n          \x3c!-- Select All Begins --\x3e\n          <span ng-if="ctrl.isListTypeMultiple()" class="checkbox-icon option-field">\n            <input\n              id="select-all-{{$id}}"\n              name="select-all"\n              type="checkbox"\n              ng-class="{\'partially-selected\': ctrl.isPartiallySelected()}"\n              ng-checked="ctrl.isAllSelected()"\n              ng-click="ctrl.handleSelectAllClick($event)"\n              />\n            <label class="option-label inline-icon icon-editor-checkbox-light-unchecked"\n                   for="select-all-{{$id}}">\n              (Select All)\n            </label>\n          </span>\n          \x3c!-- @Select All End --\x3e\n\n          \x3c!-- List Item Begins --\x3e\n          <span ng-repeat="item in ctrl.listAvailable | filter:ctrl.filterPattern">\n\n            \x3c!-- Multiple Selection Item Iterator Begins --\x3e\n            <span ng-if="ctrl.isListTypeMultiple()" class="checkbox-icon option-field">\n              <input\n                id="field-{{ctrl.itemValue(item)}}-{{$id}}"\n                name="selectedItems[]"\n                type="checkbox"\n                value="{{ctrl.itemValue(item)}}"\n                ng-checked="ctrl.isSelected(ctrl.itemValue(item))"\n                ng-click="ctrl.toggleSelection(ctrl.itemValue(item))"\n                />\n              <label class="option-label inline-icon icon-editor-checkbox-light-unchecked"\n                     for="field-{{ctrl.itemValue(item)}}-{{$id}}">\n                {{ctrl.itemDisplayName(item)}}\n              </label>\n            </span>\n            \x3c!-- @Multiple Selection Item Iterator Ends --\x3e\n\n            \x3c!-- Simple Selection Item Iterator Begins --\x3e\n            <span ng-if="ctrl.isListType(ctrl.CONTEXT_LIST_TYPE_SINGLE)" class="radio-icon option-field">\n              <input\n                id="field-{{ctrl.itemValue(item)}}-{{$id}}"\n                group="radio-field-{{$id}}"\n                name="selectedItems[]"\n                type="radio"\n                value="{{ctrl.itemValue(item)}}"\n                ng-checked="ctrl.isSelected(ctrl.itemValue(item))"\n                ng-click="ctrl.setSelection(ctrl.itemValue(item))"\n                />\n              <label class="option-label inline-icon icon-radio-inactive"\n                     for="field-{{ctrl.itemValue(item)}}-{{$id}}">\n                {{ctrl.itemDisplayName(item)}}\n              </label>\n            </span>\n            \x3c!-- @Simple Selection Item Iterator Ends --\x3e\n\n          </span>\n          \x3c!-- @List Item Ends --\x3e\n\n        </div>\n        \x3c!-- @Settings Panel Container Ends --\x3e\n\n      </div>\n      \x3c!-- Settings Panel Body Begins --\x3e\n\n    </div>\n  '},H=n("zsFr"),W={controller:function(){function SvgIconController(e,t,n,r,o){this.$scope=e,this.$compile=t,this.$window=n,this.DataLayerFlipperService=r,this.Utils=o}return SvgIconController.prototype.$onInit=function(){var e=this.$scope.$new();switch(this.type){case"copy-link":this.iconTemplate=H.d;break;case"toggle-explorer":this.iconTemplate=H.f;break;case"toggle-expanded-view":this.iconTemplate=H.e;break;case"kebab":this.iconTemplate=H.k;break;case"filter":this.iconTemplate=H.g;break;case"back":this.iconTemplate=H.a;break;case"forward":this.iconTemplate=H.h;break;case"cancel-find":this.iconTemplate=H.b;break;case"clear-filter":this.iconTemplate=H.c;break;case"hierarchy-down":this.iconTemplate=H.i;break;case"hierarchy-up":this.iconTemplate=H.j}var t=this.$compile(this.iconTemplate)(e);$("#icon").replaceWith(t)},SvgIconController.$inject=["$scope","$compile","$window","DataLayerFlipperService","Utils"],SvgIconController}(),controllerAs:"ctrl",bindings:{type:"<"},template:'<span id="icon"></span>'},q=n("2BGn");a.module("mode.chart",["ui.router.compat","mode.components","mode.shared.services","mode.utils","ngCookies"]).constant("lodash",i).constant("nv",o).constant("d3",r).constant("numeral",s.a).constant("swivel",d.a).directive("modeChart",function(){return{controller:p,controllerAs:"ctrl",scope:{dataset:"=",model:"<",relName:"<",chartModel:"<",view:"=?setView",state:"<",status:"=?",chartExists:"=",chartId:"@id",onEdit:"&?",onAction:"&?",onTitleChanged:"&?",viewer:"<",panelEnabled:"="},template:'\n      <div class="chart-container-component">\n\n        \x3c!-- Placeholder Begins --\x3e\n        <placeholder-viz-internal ng-show="ctrl.hasView() && ctrl.isRendering && !ctrl.isDesignerMode() && !ctrl.isLightboxMode() && !ctrl.queryFailed(dataset)" ng-class="{\'is-active\': ctrl.isRendering}" />\n        \x3c!-- @Placeholder Ends --\x3e\n\n        <mode-multi-chart\n          id="{{chartId}}"\n          dataset="dataset"\n          set-view="view"\n          status="status"\n          chart-exists="chartExists"\n          viewer="viewer"\n          on-action="onAction({ $action: $action })"\n          on-edit="onEdit({\'$id\': $id, \'$view\': $view})"\n          on-render-start="ctrl.onRenderStart({\'$vizID\': $vizID})"\n          on-render-end="ctrl.onRenderEnd({\'$vizID\': $vizID})"\n          ng-if="ctrl.isMultiChart(view.selectedChart)"></mode-multi-chart>\n        <mode-big-number\n          id="{{chartId}}"\n          dataset="dataset"\n          set-view="view"\n          viewer="viewer"\n          on-action="onAction({ $action: $action })"\n          on-edit="onEdit({\'$id\': $id, \'$view\': $view})",\n          on-render-start="ctrl.onRenderStart({\'$vizID\': $vizID})"\n          on-render-end="ctrl.onRenderEnd({\'$vizID\': $vizID})"\n          ng-if="ctrl.isBigNumber(view.selectedChart)"></mode-big-number>\n        <mode-pivot-table\n          id="{{chartId}}"\n          dataset="dataset"\n          view="view"\n          viewer="viewer"\n          status="status"\n          chart-exists="chartExists"\n          on-action="onAction({ $action: $action })"\n          on-edit="onEdit({\'$id\': $id, \'$view\': $view})"\n          on-render-start="ctrl.onRenderStart({\'$vizID\': $vizID})"\n          on-render-end="ctrl.onRenderEnd({\'$vizID\': $vizID})"\n          panel-enabled="ctrl.panelEnabled"\n          ng-if="ctrl.isPivotTable(view.selectedChart)"></mode-pivot-table>\n        <vegas-multi-chart\n          id="{{chartId}}"\n          model="model"\n          rel-name="relName"\n          chart-model="chartModel"\n          view="view"\n          state="state"\n          dataset="dataset"\n          viewer="viewer"\n          status="status"\n          drilldown-enabled="(ctrl.drilldownEnabled$ | async:this)"\n          explore-enabled="(ctrl.exploreEnabled$ | async:this)"\n          on-action="onAction({ $action: $action })"\n          on-title-changed="onTitleChanged({ $id: $vizID, $title: $title })"\n          on-edit="onEdit({\'$id\': $id, \'$view\': $view})"\n          on-render-start="ctrl.onRenderStart({\'$vizID\': $vizID})"\n          on-render-end="ctrl.onRenderEnd({\'$vizID\': $vizID})"\n          is-designer-mode="ctrl.isDesignerMode()"\n          ng-if="ctrl.isVegasMultiChart(view.chartType)"></vegas-multi-chart>\n      </div>'}}).component("settingsContextPanel",Q).component("modePivotTable",R).component("modeBigNumber",b).component("bigNumberSettings",I).component("pivotTableSettings",P).component("pivotConfig",U).component("draggableItem",Z).component("draggableItemList",G).component("droppableTarget",Y).component("fillerbuster",A).component("svgIcon",W).service("ChartThemeService",q.a)},"5TEl":function(e,t){e.exports=window.d3},"6KMn":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r,o=n("m9my"),i=(n.n(o),n("0e28"));function buildFilterField(e,t,n,o){var i=o.find(function(e){var t=e.name,r=e.dataType;return t===n.name&&r===n.dataType});return i&&(t+=" (in use)"),{type:r.Field,id:e,name:t,inUse:Boolean(i),control:i||n}}!function(e){e.Field="FIELD",e.Folder="FOLDER"}(r||(r={}));var a=function(){function ReportFilterFieldFactory(){}return ReportFilterFieldFactory.buildDefaultSelectFilterField=function(e,t){var n=i.d.buildDefaultSelectControl(e);return buildFilterField(e.name+":"+e.dataType,n.name,n,t)},ReportFilterFieldFactory.buildDefaultRangeFilterField=function(e,t){var n=i.d.buildDefaultRangeControl(e);return buildFilterField(e.name+":"+e.dataType,n.name,n,t)},ReportFilterFieldFactory.buildDefaultDateFilterFolder=function(e,t){return{type:r.Folder,name:e.name,id:e.name+":CONTAINING_FOLDER",fields:this.buildDefaultDateFilterFields(e,t)}},ReportFilterFieldFactory.buildDefaultDateFilterFields=function(e,t){var n=e.name,r=e.dataType,a=new Array;if(r!==o.DataType.DATE&&r!==o.DataType.DATETIME)return a;function addDateSubfield(n,r,o){a.push(buildFilterField(n,r,o(e),t))}return addDateSubfield(n+":"+r,n,i.d.buildDefaultDateControl),addDateSubfield("Year("+n+"):"+r,"year",i.d.buildDefaultYearControl),addDateSubfield("Quarter("+n+"):"+r,"quarter",i.d.buildDefaultQuarterControl),addDateSubfield("Month("+n+"):"+r,"month",i.d.buildDefaultMonthControl),addDateSubfield("Day("+n+"):"+r,"day of month",i.d.buildDefaultDayControl),addDateSubfield("Week("+n+"):"+r,"week number",i.d.buildDefaultWeekControl),addDateSubfield("Weekday("+n+"):"+r,"day of week",i.d.buildDefaultWeekdayControl),a},ReportFilterFieldFactory}()},"6NYQ":function(e,t){e.exports='<div class="default-modal context-modal">\n  <h3 class="modal-header">Clone Report into&hellip;<a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <ul class="context-list">\n    <li ng-if="context === account.token">\n      <span class="context-avatar community-avatar"><i class="icon-community-blue-24"></i></span>\n      <h4>Community (current)</h4>\n      <p>Clone this report and use it in Mode\'s public analysis community.</p>\n      <div>\n        <form method="post" action="{{ clonePath }}" class="clearfix">\n          <input type="hidden" name="{{ csrfParam }}" value="{{ csrfToken }}">\n          <input type="hidden" name="owner_id" value="{{ account.id }}">\n          <button type="submit" class="btn btn-secondary btn-strong">Clone</button>\n        </form>\n      </div>\n    </li>\n    <li ng-repeat="org in organizations">\n      <mode-avatar options="org.avatar" size="25" class="context-avatar"></mode-avatar><h4>{{ org.name }} <span ng-if="context === org.token">(current)</span></h4>\n      <p>Clone this report and edit it in the <strong>{{ org.name }}</strong> organization.</p>\n      <div>\n        <form method="post" action="{{ clonePath }}" class="clearfix">\n          <input type="hidden" name="{{ csrfParam }}" value="{{ csrfToken }}">\n          <input type="hidden" name="owner_id" value="{{ org.id }}">\n          <button type="submit" class="btn btn-secondary btn-strong">{{ context === org.token ? \'Clone\' : \'Clone and Switch\' }}</button>\n        </form>\n      </div>\n    </li>\n    <li ng-if="context !== account.token">\n      <span class="context-avatar community-avatar"><i class="icon-community-blue-24"></i></span>\n      <h4>Community</h4>\n      <p>Clone this report and use it in Mode\'s public analysis community.</p>\n      <div>\n        <form method="post" action="{{ clonePath }}" class="clearfix">\n          <input type="hidden" name="{{ csrfParam }}" value="{{ csrfToken }}">\n          <input type="hidden" name="owner_id" value="{{ account.id }}">\n          <button type="submit" class="btn btn-secondary btn-strong">Clone and Switch</button>\n        </form>\n      </div>\n    </li>\n  </ul>\n</div>'},"7VZ8":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPHBhdGggc3Ryb2tlPSIjMDBCREU5IiBkPSJNNy41IDMuNUwxMy41IDMuNSA3LjUgMy41ek03LjUgNi41TDExLjUgNi41IDcuNSA2LjV6TTcuNSA5LjVMOS41IDkuNSA3LjUgOS41eiIvPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCAxMSkiPgogICAgICA8cGF0aCBzdHJva2U9IiMwMEJERTkiIGQ9Ik0yLjUsMi41IEwyLjUsNy41IEwyLjUsMi41IFoiLz4KICAgICAgPHBhdGggZmlsbD0iIzAwQkRFOSIgZD0iTTIuNjg3MDAxODksMC4wODI2MzI1MzczIEw0LjkzNDg4MjI2LDIuNTgyODU0MTEgQzUuMDI3MTk0MzksMi42ODU1Mjg5NSA1LjAxODc5Mzc1LDIuODQzNTk3MTMgNC45MTYxMTg5LDIuOTM1OTA5MjUgQzQuODcwMjI0NDEsMi45NzcxNzE3MyA0LjgxMDY4OTI3LDMgNC43NDg5NzMwMSwzIEwwLjI1MzIxMjI1NCwzIEMwLjExNTE0MTA2NywzIDAuMDAzMjEyMjU0MjgsMi44ODgwNzExOSAwLjAwMzIxMjI1NDI4LDIuNzUgQzAuMDAzMjEyMjU0MjgsMi42ODgyODM3NSAwLjAyNjA0MDUyNjIsMi42Mjg3NDg2IDAuMDY3MzAzMDAwMSwyLjU4Mjg1NDExIEwyLjMxNTE4MzM4LDAuMDgyNjMyNTM3MyBDMi40MDc0OTU1MSwtMC4wMjAwNDIzMDg3IDIuNTY1NTYzNjgsLTAuMDI4NDQyOTUyMSAyLjY2ODIzODUyLDAuMDYzODY5MTc1MSBDMi42NzQ4MjA3MywwLjA2OTc4NzA1NiAyLjY4MTA4NDAxLDAuMDc2MDUwMzMwNCAyLjY4NzAwMTg5LDAuMDgyNjMyNTM3MyBaIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},"7hvy":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iOXB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCA5IDEwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MiAoMzY3ODEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmNvbHVtbnM8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0ibW9ja3VwcyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IjIyLWNvcHktMTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05MTQuMDAwMDAwLCAtNjAwLjAwMDAwMCkiIGZpbGw9IiM5Mzk0QTAiPgogICAgICAgICAgICA8ZyBpZD0iY29sdW1ucyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTE4LjUwMDAwMCwgNjA1LjAwMDAwMCkgcm90YXRlKC0yNzAuMDAwMDAwKSB0cmFuc2xhdGUoLTkxOC41MDAwMDAsIC02MDUuMDAwMDAwKSB0cmFuc2xhdGUoOTEzLjUwMDAwMCwgNjAwLjUwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00MSIgeD0iMCIgeT0iLTEuMTM2ODY4MzhlLTEzIiB3aWR0aD0iMTAiIGhlaWdodD0iMSIgcng9IjAuNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00MS1Db3B5IiB4PSIwIiB5PSI0IiB3aWR0aD0iMTAiIGhlaWdodD0iMSIgcng9IjAuNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00MS1Db3B5LTIiIHg9IjAiIHk9IjgiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxIiByeD0iMC41Ij48L3JlY3Q+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},"7n0L":function(e,t,n){"use strict";var r=n("PbPb"),o=n("bAVf"),i=function(){function PseudoViewOptionModel(e,t){this.resource=e,this.token=t,this.stateStore={selectedColumn:"",sortedColumn:{index:null,order:null}}}return PseudoViewOptionModel.prototype.id=function(){return this.token||null},PseudoViewOptionModel.prototype.queryToken=function(){return this.resource._dataset||null},PseudoViewOptionModel.prototype.state=function(e,t){return arguments.length>1?this.stateStore[e]=t:this.stateStore[e]},PseudoViewOptionModel.prototype.excludedColumns=function(){return this.resource.excludeColumns||[]},PseudoViewOptionModel.prototype.columnFormatSettings=function(){return this.resource.columns||{}},PseudoViewOptionModel.prototype.chartType=function(){return this.resource.selectedChart||this.resource.chartType||""},PseudoViewOptionModel.prototype.view=function(){return this.resource},PseudoViewOptionModel.isPseudoViewOption=function(e){return e.hasOwnProperty("_dataset")||e.hasOwnProperty("_textElement")||e.hasOwnProperty("results")},PseudoViewOptionModel.prototype.assign=function(e){if("object"==typeof e)return Object(r.assign)(this.resource,e)},PseudoViewOptionModel.SORT_ORDER_ASC="asc",PseudoViewOptionModel.SORT_ORDER_DESC="desc",PseudoViewOptionModel}(),a=n("u5jn"),l=n("+OPr"),s=function(){function ViewOptionsService(){this.options={},this.embedStates={}}return ViewOptionsService.prototype.loadReport=function(e){var t=this,n=ViewOptionsService.tokenFromVizID,r=e.chart_view,o=e.table_view,i=e.python_view;r&&Object.keys(r).forEach(function(e){t.setOption(r[e],n(e),ViewOptionsService.OPTION_TYPE_CHART)}),o&&Object.keys(o).forEach(function(e){t.setOption(o[e],n(e),ViewOptionsService.OPTION_TYPE_TABLE)}),i&&Object.keys(i).forEach(function(e){t.setOption(i[e],n(e),ViewOptionsService.OPTION_TYPE_PYTHON)})},ViewOptionsService.tokenFromVizID=function(e){return e.split("_")[1]||e},ViewOptionsService.prototype.setOption=function(e,t,n){if(void 0===n&&(n=null),!e)throw new Error("Option undefined");if(!t)throw new Error("Token undefined");var r=this.optionToModel(e,t);if(!this.options.hasOwnProperty(t))return this.options[t]={resource:r,type:n}},ViewOptionsService.prototype.updateOption=function(e,t){if(this.options.hasOwnProperty(t))return this.options[t].resource.assign(e)},ViewOptionsService.prototype.setEmbedState=function(e,t){this.embedStates[e]=t},ViewOptionsService.prototype.getEmbedState=function(e){return this.embedStates[e]},ViewOptionsService.prototype.optionToModel=function(e,t){if(i.isPseudoViewOption(e))return new i(e,t);if(o.a.isViewOption(e))return new o.a(e);throw new Error("Option type not detected")},ViewOptionsService.prototype.formatVizID=function(e,t){if(!e)throw new Error("ID undefined");if(!this.validVizType(t))throw new Error("Invalid viz type");return!!~e.indexOf("_")?e:t+"_"+e},ViewOptionsService.prototype.validVizType=function(e){return!!~[ViewOptionsService.OPTION_TYPE_CHART,ViewOptionsService.OPTION_TYPE_PYTHON,ViewOptionsService.OPTION_TYPE_TABLE,ViewOptionsService.OPTION_TYPE_TEXT].indexOf(e)},ViewOptionsService.prototype.setChartOptions=function(e){this.setOptions(e,ViewOptionsService.OPTION_TYPE_CHART)},ViewOptionsService.prototype.setTableOptions=function(e){this.setOptions(e,ViewOptionsService.OPTION_TYPE_TABLE)},ViewOptionsService.prototype.setPythonOptions=function(e){this.setOptions(e,ViewOptionsService.OPTION_TYPE_PYTHON)},ViewOptionsService.prototype.setOptions=function(e,t){var n=this;if(void 0===t&&(t=null),!e)throw new Error("Option undefined");e.forEach(function(e){n.setOption(e,e.token,t)})},ViewOptionsService.prototype.hasOptionsFor=function(e){return this.options.hasOwnProperty(e)},ViewOptionsService.prototype.getOption=function(e){if(!e)throw new Error("Option retrieval failed.  Token undefined");return this.hasOptionsFor(e)?this.options[e]:{}},ViewOptionsService.prototype.getOptionResource=function(e){var t=this.getOption(e);return t&&t.resource||new o.a({})},ViewOptionsService.prototype.selectColumnByIndex=function(e,t){return this.getOptionResource(e).state("selectedColumn",t)},ViewOptionsService.prototype.selectedColumn=function(e){return this.getOptionResource(e).state("selectedColumn")},ViewOptionsService.prototype.unselectAllColumns=function(){var e=this;return Object.keys(this.getState()).forEach(function(t){e.selectColumnByIndex(t,null)})},ViewOptionsService.prototype.sortColumn=function(e,t,n){return this.getOptionResource(e).state("sortedColumn",{index:t,order:n})},ViewOptionsService.prototype.sortedColumn=function(e){return this.getOptionResource(e).state("sortedColumn")},ViewOptionsService.prototype.excludedColumns=function(e){return this.getOptionResource(e).excludedColumns()},ViewOptionsService.prototype.getState=function(){return this.options},ViewOptionsService.prototype.queryTokenFromVizID=function(e){if(!arguments.length)throw new Error("Chart ID not defined");return this.getOptionResource(ViewOptionsService.tokenFromVizID(e)).queryToken()},ViewOptionsService.prototype.viewModel=function(e){return this.getOptionResource(e).view()},ViewOptionsService.prototype.viewType=function(e){return this.getOptionResource(e).chartType()||this.getOption(e).type||""},ViewOptionsService.prototype.viewSuperType=function(e){return ViewOptionsService.viewTypeFromChartType(this.viewType(e))},ViewOptionsService.viewTypeFromChartType=function(e){var t,n,o,i=a.c.reduce(function(e,t){return e[t]=l.b.Chart,e},{}),s=((t={})[l.b.Table]=l.b.Table,t),c=((n={})[l.b.Text]=l.b.Text,n),d=((o={})[l.b.Python]=l.b.Python,o),u=Object(r.assign)({DEFAULT:""},c,s,i,d);return u[e]||u.DEFAULT},ViewOptionsService.prototype.viewProp=function(e,t,n){void 0===n&&(n=null);var r=this.viewModel(e);return arguments.length>2?r[t]=n:r[t]},ViewOptionsService.prototype.getOptionsCollectionByType=function(e){if(!e)throw new Error("Option type undefined");var t={};return Object(r.values)(this.getState()).filter(function(t){return t.type===e}).forEach(function(n){t[e+"_"+n.resource.token]=n.resource.resource}),t},ViewOptionsService.OPTION_TYPE_CHART=l.b.Chart,ViewOptionsService.OPTION_TYPE_TABLE=l.b.Table,ViewOptionsService.OPTION_TYPE_PYTHON=l.b.Python,ViewOptionsService.OPTION_TYPE_TEXT=l.b.Text,ViewOptionsService.$inject=[],ViewOptionsService}();t.a=s},"8Flc":function(e,t,n){"use strict";var r=n("u5jn"),o=n("PbPb"),i=(n.n(o),n("0YuG"));n.n(i);i.module("mode.chart").service("ChartInterpolaterService",["lodash","DataLayerFlipperService","Utils",function(e,t,n){function numberTypes(e){return"number"===e.type||"integer"===e.type||"float"===e.type}function nonNumberTypes(e){return"number"!==e.type&&"integer"!==e.type&&"float"!==e.type}function dateTypes(e){return"datetime"===e.type||"date"===e.type}function stringTypes(e){return"string"===e.type}function setIfEmpty(e,t){return[void 0,null,""].includes(e)?t:e}function initChartsWithNumbers(t,n,r,o){n&&n[0]&&(!function(e,t){e.bar.x?e.bar.y=e.bar.y?e.bar.y:[t[0].name]:(e.bar.x=setIfEmpty(e.bar.x,t[0].name),t[1]||(e.bar.y=e.bar.y?e.bar.y:[t[0].name])),e.line.x&&(e.line.y=e.line.y?e.line.y:[t[0].name]),e.area.x&&(e.area.y=e.area.y?e.area.y:[t[0].name]),e.scatter.x&&(e.scatter.y=e.scatter.y?e.scatter.y:[t[0].name],i.isArray(e.scatter.y)||(e.scatter.y=[e.scatter.y]))}(t,n),t.line.x=setIfEmpty(t.line.x,n[0].name),t.linePlusBar.x=setIfEmpty(t.linePlusBar.x,n[0].name),t.area.x=setIfEmpty(t.area.x,n[0].name),t.scatter.x=setIfEmpty(t.scatter.x,n[0].name),t.pie.value=setIfEmpty(t.pie.value,n[0].name),t.pie.label=setIfEmpty(t.pie.label,n[0].name)),n&&n[1]?(t.bar.y=t.bar.y?t.bar.y:[n[1].name],t.line.y=t.line.y?t.line.y:[n[1].name],t.area.y=t.area.y?t.area.y:[n[1].name],t.scatter.y=t.scatter.y?t.scatter.y:[n[1].name],i.isArray(t.scatter.y)||(t.scatter.y=[t.scatter.y]),t.linePlusBar.ybars&&t.linePlusBar.ylines||(t.linePlusBar.ybars=n[0].name,t.linePlusBar.ylines=n[1].name),t.linePlusBar.y=[t.linePlusBar.ybars,t.linePlusBar.ylines]):!t.line.y&&1===e.size(n)&&e.size(r)&&(t.line.y=t.line.y?t.line.y:[n[0].name],t.line.x=r[0].name,t.area.y=t.area.y?t.area.y:[n[0].name],t.area.x=r[0].name),t.scatter&&t.scatter.y&&!i.isArray(t.scatter.y)&&(t.scatter.y=[t.scatter.y]),n&&e.size(n)||!e.size(o)||(t.bar.x=setIfEmpty(t.bar.x,o[0].name),t.bar.y=void 0,t.bar.aggregate="count",t.line.x=setIfEmpty(t.line.x,o[0].name),t.line.y=void 0,t.line.aggregate="count",t.area.x=setIfEmpty(t.area.x,o[0].name),t.area.y=void 0,t.area.aggregate="count")}return{interpolate:function(t,i,a){if(t||i){({}),t.bar=t.bar||{},t.bigNumber=t.bigNumber||{},t.line=t.line||{},t.linePlusBar=t.linePlusBar||{},t.area=t.area||{},t.scatter=t.scatter||{},t.pie=t.pie||{},t.pivotTable=t.pivotTable||{};var l=e.find(i.columns,stringTypes);l=setIfEmpty(l,i.columns.length?i.columns[0]:null);var s=e.filter(i.columns,numberTypes),c=e.find(i.columns,dateTypes),d=e.filter(i.columns,nonNumberTypes),u=e.filter(i.columns,stringTypes),p=a?function(t,n,r,o){var i=[];e.size(n)>=1&&i.push(t.types.bar);var a=r?1:0;return e.size(n)+a>=2?(i.push(t.types.line),i.push(t.types.area),i.push(t.types.scatter)):e.size(n)>=1&&o>=2&&(i.push(t.types.line),i.push(t.types.area)),o>0&&(i.push(t.types.bar),i.push(t.types.line),i.push(t.types.area),i.push(t.types.pie),i.push(t.types.bigNumber),i.push(t.types.pivotTable)),e.size(n)>1&&i.push(t.types.linePlusBar),i}(a,s,c,e.size(i.columns)):[];return function(e,t){t&&t.name&&(e.bar.x=setIfEmpty(e.bar.x,t.name),e.line.label=setIfEmpty(e.line.label,t.name),e.linePlusBar.label=setIfEmpty(e.linePlusBar.label,t.name),e.area.label=setIfEmpty(e.area.label,t.name),e.scatter.label=setIfEmpty(e.scatter.label,t.name),e.pie.label=setIfEmpty(e.pie.label,t.name))}(t,l),function(t,n,r,o){if(n&&n.name){if(!t.selectedChart&&e.find(o,{type:"line"})&&r>4){var i=e.find(o,{type:"line"});t.selectedChart=i.type,t.chartIcon=i.icon}t.bar.x=setIfEmpty(t.bar.x,n.name),t.line.x=setIfEmpty(t.line.x,n.name),t.linePlusBar.x=setIfEmpty(t.linePlusBar.x,n.name),t.area.x=setIfEmpty(t.area.x,n.name),t.scatter.x=setIfEmpty(t.scatter.x,n.name)}}(t,c,i.content.length,p),initChartsWithNumbers(t,s,d,u),function(t,n,r,o){n.length?o.count>=20&&(t.pie.aggregate=setIfEmpty(t.pie.aggregate,"sum")):r&&r.length?(t.pie.aggregate=setIfEmpty(t.pie.aggregate,"count"),t.pie.value=setIfEmpty(t.pie.value,r[0].name),t.pie.label=setIfEmpty(t.pie.label,r[0].name)):e.size(o.columns)>0&&(t.pie.aggregate=setIfEmpty(t.pie.aggregate,"count"),t.pie.value=setIfEmpty(t.pie.value,o.columns[0].name),t.pie.label=setIfEmpty(t.pie.label,o.columns[0].name))}(t,s,u,i),function(e,t,n){e.bigNumber.trendLabel=setIfEmpty(e.bigNumber.trendLabel,""),e.bigNumber.trendFormat=setIfEmpty(e.bigNumber.trendFormat,"auto"),e.bigNumber.trendPrecision=setIfEmpty(e.bigNumber.trendPrecision,"auto"),e.bigNumber.colorScaleID=setIfEmpty(e.bigNumber.colorScaleID,"ggr"),e.bigNumber.aggregator=setIfEmpty(e.bigNumber.aggregator,"last_value"),e.bigNumber.trend=setIfEmpty(e.bigNumber.trend,"change_rate"),t.length&&(e.bigNumber.column=setIfEmpty(e.bigNumber.column,t[0].name)),e.bigNumber.referencePoint=setIfEmpty(e.bigNumber.referencePoint,"previous"),e.bigNumber.referencePointCustom=setIfEmpty(e.bigNumber.referencePointCustom,""),e.bigNumber.sortColumn=setIfEmpty(e.bigNumber.sortColumn,""),e.bigNumber.sortOrder=setIfEmpty(e.bigNumber.sortOrder,"asc"),e.bigNumber.columns=setIfEmpty(e.bigNumber.columns,{}),e.bigNumber.colors=setIfEmpty(e.bigNumber.colors,r.n)}(t,s),function(e,t,r,i){var a={aggregator:"sum",columns:[],filters:[],filterValues:{},columnFormats:{},format:{},rows:[],values:[]};Object(o.assign)(a.filterValues,Object(o.mapValues)(Object(o.keyBy)(i.columns,"name"),function(e){return[]})),n.defaults(e.pivotTable,a),n.defaults(e.pivotTable.filterValues,a.filterValues)}(t,0,0,i),i.content.length>r.v&&(t.bar.aggregate=t.bar.aggregate||"sum",t.line.aggregate=t.line.aggregate||"sum",t.linePlusBar.aggregate=t.linePlusBar.aggregate||"sum",t.area.aggregate=t.area.aggregate||"sum",t.pie.aggregate=t.pie.aggregate||"sum"),this.setRange(t.bar,i.content,!0),this.setRange(t.line,i.content,!0),this.setRange(t.linePlusBar,i.content,!0),this.setRange(t.area,i.content,!0),this.setRange(t.scatter,i.content,!0),p}},setRange:function(t,n,r){var o,a,l=function(t){var r,l=new Array(n.length),s=new Array(n.length);o=[],a=[],t=i.isArray(t)?t:[t],i.forEach(n,function(e,n){i.forEach(t,function(t){r=e[t],o.push(r),r>0?l[n]?l[n]+=r:l[n]=r:s[n]?s[n]+=r:s[n]=r})}),a=e.filter(e.uniq(l).concat(e.uniq(s)),function(e){return!isNaN(e)}),o=e.filter(o,function(e){return!isNaN(e)})};t&&t.y&&(r||!i.isDefined(t.yminFromData))&&(l(t.y),o&&o.length&&(t.yminFromData=e.min(o),t.ymaxFromData=e.max(o),t.yminTotal=e.min(a),t.ymaxTotal=e.max(a))),t&&t.x&&(r||!i.isDefined(t.xminFromData))&&(l(t.x),o&&o.length&&(t.xminFromData=e.min(o),t.xmaxFromData=e.max(o)))}}}])},"8SPo":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("m9my");n.n(o);!function(e){e.lookupYField=function(e,t){return e.y.find(function(e){return e.id===t})||e.y2.find(function(e){return e.id===t})},e.makeViewField=function(e,t){switch(t.formula){case o.SystemFieldName.NAMES:return e.buildViewNamesField(t.id);case o.SystemFieldName.VALUES:return e.buildViewValuesField(t.id);default:return e.buildViewCalcField(t.formula,t.variable.type,t.id)}},e.makeDefaultFieldName=function(e,t){return e.getDefaultFieldName(t)}}(r||(r={}))},"8SYn":function(e,t,n){"use strict";var r,o;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),function(e){e.LoadReportResources="LoadReportResources",e.RenameReport="RenameReport",e.LoadEmbeddedReport="LoadEmbeddedReport",e.UpdateEmbeddedReport="UpdateEmbeddedReport",e.UpdateReport="UpdateReport",e.UpdateReportSuccess="UpdateReportSuccess",e.UpdateReportFailure="UpdateReportFailure",e.UpdateReportLayout="UpdateReportLayout",e.UpdateReportState="UpdateReportState",e.UpdateSelectedReportSpace="UpdateSelectedReportSpace",e.UpdateSelectedReportSpaceSuccess="UpdateSelectedReportSpaceSuccess",e.UpdateSelectedReportSpaceFailure="UpdateSelectedReportSpaceFailure",e.UpdateSelectedReportLastSavedAt="UpdateSelectedReportLastSavedAt",e.UpdateIfReportNeedsUpdate="UpdateIfReportNeedsUpdate",e.SaveReportCharts="SaveReportCharts",e.SaveReportChartsSuccess="SaveReportChartsSuccess",e.SaveReportChartsFailure="SaveReportChartsFailure",e.SaveSingleReportChartSuccess="SaveSingleReportChartSuccess",e.SaveSingleReportChartFailure="SaveSingleReportChartFailure",e.SaveReportTables="SaveReportTables",e.SaveReportTablesSuccess="SaveReportTablesSuccess",e.SaveReportTablesFailure="SaveReportTablesFailure",e.SaveSingleReportTableSuccess="SaveSingleReportTableSuccess",e.SaveSingleReportTableFailure="SaveSingleReportTableFailure",e.SetSelectedReportEmbedded="SetSelectedReportEmbedded",e.SetSelectedReportEmbeddedSuccess="SetSelectedReportEmbeddedSuccess",e.SetSelectedReportEmbeddedFailure="SetSelectedReportEmbeddedFailure",e.SetSelectedReportShared="SetSelectedReportShared",e.SetSelectedReportSharedSuccess="SetSelectedReportSharedSuccess",e.SetSelectedReportSharedFailure="SetSelectedReportSharedFailure",e.SyncReport="SyncReport",e.SyncReportSuccess="SyncReportSuccess",e.SyncReportFailure="SyncReportFailure",e.ToggleReportUserStar="ToggleReportUserStar",e.ToggleReportUserStarSuccess="ToggleReportUserStarSuccess",e.ToggleReportUserStarFailure="ToggleReportUserStarFailure"}(r||(r={})),function(e){e.Default="Default",e.Silent="Silent",e.SilentAndSelectNewV2Chart="SilentAndSelectNewV2Chart",e.SilentAndRefreshPreview="SilentAndRefreshPreview",e.SilentAndSync="SilentAndSync",e.AlertAndRefreshPreview="AlertAndRefreshPreview"}(o||(o={}))},"8U7d":function(e,t){e.exports='<div class="default-modal" ng-class="{\'scroll-modal\': !(ctrl.emptyStateUpsellEnabled$ | async:this)}">\n  <h3 class="modal-header">Move to&hellip;<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <div class="modal-input" ng-if="ctrl.spacesAreSearchable()">\n    <input\n      type="text"\n      class="form-control next-form-control"\n      placeholder="Find Space..."\n      autocomplete="off"\n      focus-me\n      ng-model="ctrl.query.name" />\n    <i class="icon-search input-icon"></i>\n  </div>\n  <div class="modal-container">\n    <ul class="spaces-select-list">\n      <li class="spaces-select-list-item" ng-if="ctrl.canCreateSpace()">\n        <a href="#" create-space name="{{ ctrl.query.name }}" owner="ctrl.owner" account="ctrl.account" class="spaces-select-list-link new-space-link" state="ctrl.state" on-create="ctrl.moveReport($space)"><i class="icon-modal-add spaces-select-icon"></i>Create New Space</a>\n      </li>\n      <li ng-repeat="space in ctrl.spaces | filter:ctrl.query" class="spaces-select-list-item" ng-class="{selected: ctrl.selectedSpace === space}">\n        <a href="#" class="spaces-select-list-link" ng-click="ctrl.selectedSpace = space"><i class="{{ space.iconClassName }} spaces-select-icon"></i>{{ space.name }}</a>\n      </li>\n      <li ng-if="ctrl.spaceUpsellEnabled$ | async:this">\n        <a class="spaces-select-list-link spaces-select-list-promo-link" ng-href="{{ ctrl.trialLink() }}" target="_blank">\n          <i class="icon-nav-add-star spaces-select-icon icon-default"></i>\n          <i class="icon-nav-add-star-inverted spaces-select-icon icon-hover hide"></i>\n          <strong>Try Mode Business to create additional or private spaces</strong>\n        </a>\n      </li>\n    </ul>\n    <div class="spaces-empty" ng-if="ctrl.emptyStateUpsellEnabled$ | async:this">\n      <div class="spaces-empty-content">\n        <h5 class="modal-heading-2">Spaces</h5>\n        <p>There are no additional spaces to move your report to.</p>\n        <div class="spaces-promo-wrapper">\n          <business-promo-for-spaces org-username="ctrl.owner.username"></business-promo-for-spaces>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="modal-action-bar">\n    <div class="spaces-modal-alert" ng-hide="!ctrl.selectedSpace || (ctrl.currSpace.openSpace && ctrl.selectedSpace.openSpace)"><i class="icon-warning-small"></i><span class="spaces-modal-alert-message">Moving this report will change who can view the report and its details. <a href="https://help.modeanalytics.com/articles/types-of-spaces" target="_blank" rel="noopener">Learn more.</a></span></div>\n    <button\n      ng-if="!(ctrl.emptyStateUpsellEnabled$ | async:this)"\n      class="btn btn-lg btn-filled-primary"\n      ng-disabled="!ctrl.selectedSpace"\n      ng-click="ctrl.$close({ $space: ctrl.selectedSpace })">\n      Move\n    </button>\n    <button\n      ng-if="(ctrl.emptyStateUpsellEnabled$ | async:this)"\n      class="btn btn-lg btn-filled-primary"\n      ng-click="ctrl.$dismiss()">\n      Okay\n    </button>\n  </div>\n</div>\n'},"8YRt":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("jc3r"),i=n("PbPb"),a=(n.n(i),n("wB6Z")),l=n("ELUg"),s=n("l0Qb"),c=n("BP8X");!function(e){function flagsIntersect(e,t){return Object(i.intersectionWith)(t,e,i.isEqual).length>0}e.flagsIntersect=flagsIntersect,e.featureIsEnabled=function(e,t){return flagsIntersect(l.b.get(t).slice(),e)},e.flippersToFeatureFlags=function(e){var t=e.userFlippers,n=e.orgFlippers,r=[];if(t)for(var i=0,l=t;i<l.length;i++){var s=l[i];r.push(Object(o.a)({type:s,context:a.a.Context.User}))}if(n)for(var c in n)if(n.hasOwnProperty(c))for(var d=0,u=n[c];d<u.length;d++)s=u[d],r.push(Object(o.a)({type:s,context:a.a.Context.Organization,contextName:c}));return r},e.orgFeaturesToFeatureFlags=function(e,t){var n=[];for(var r in e)e.hasOwnProperty(r)&&!0===e[r]&&n.push(Object(o.a)({context:t,type:r}));return n},e.orgPlanCodeToFeatureFlag=function(e,t){if(e)return e.hasOwnProperty("plan_code")?Object(o.a)({context:t,type:e.plan_code}):Object(o.a)({context:t,type:c.c.Type.Standard})},e.appStatesToFeatureFlags=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&!0===e[n]&&t.push(Object(o.a)({context:null,type:n}));return t},e.orgToFeatureFlags=function(t,n){return Object(i.compact)([e.orgPlanCodeToFeatureFlag(n,c.c.Context.Report),e.orgPlanCodeToFeatureFlag(t,c.c.Context.User)].concat(e.orgFeaturesToFeatureFlags(c.b.getOrgFeatures(n),s.a.Context.Report),e.orgFeaturesToFeatureFlags(c.b.getOrgFeatures(t),s.a.Context.User)))}}(r||(r={}))},"9SHd":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Y2xlYXI8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTMiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9IjAiIHk9IjAiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxMyIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iR3JvdXAtMzUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzLjgyODQwMCwgMTEuNDg1MzAwKSByb3RhdGUoLTMxNS4wMDAwMDApIHRyYW5zbGF0ZSgtMTMuODI4NDAwLCAtMTEuNDg1MzAwKSB0cmFuc2xhdGUoMTAuODI4NDAwLCA4LjQ4NTMwMCkiPjwvZz4KICAgICAgICA8ZyBpZD0iQ2xlYXIiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNDIiPgogICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTQ1Ij4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTQtQ29weS0yIiBmaWxsPSIjQUVBRkI3IiB4PSIzIiB5PSI3IiB3aWR0aD0iMSIgaGVpZ2h0PSI2IiByeD0iMC41Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00LUNvcHktNCIgZmlsbD0iI0FFQUZCNyIgeD0iOSIgeT0iNSIgd2lkdGg9IjEiIGhlaWdodD0iOCIgcng9IjAuNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtNC1Db3B5LTMiIGZpbGw9IiNBRUFGQjciIHg9IjYiIHk9IjMiIHdpZHRoPSIxIiBoZWlnaHQ9IjEwIiByeD0iMC41Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBpZD0iUmVjdGFuZ2xlLTM1LUNvcHkiIHN0cm9rZT0iI0IxQjJCQSIgbWFzaz0idXJsKCNtYXNrLTIpIiBzdHJva2Utd2lkdGg9IjIiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAuMDAwMDAwLCA2LjAwMDAwMCkiIHN0cm9rZT0iIzYzNjU2RSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9Ik92YWwtMTIiIGZpbGw9IiNGRkZGRkYiIGN4PSI0LjUiIGN5PSI0LjUiIHI9IjQuNSI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC41MDAwMDAsIDQuNTAwMDAwKSByb3RhdGUoLTMxNS4wMDAwMDApIHRyYW5zbGF0ZSgtNC41MDAwMDAsIC00LjUwMDAwMCkgdHJhbnNsYXRlKDIuMDAwMDAwLCAyLjAwMDAwMCkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi41LDAuNSBMMi41LDQuNSIgaWQ9IkxpbmUiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjUsMi41IEwwLjUsMi41IiBpZD0iTGluZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},"9VQI":function(e,t){e.exports='<li ng-class="{open: ctrl.isOpen(\'intro\')}">\n  <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'intro\')">\n    <i class="icon-tree-caret-default align-md-icon"></i> Intro to Notebooks\n  </span>\n  <div class="notebook-sidebar-item-text">\n    <p>Your query results are accessible in Python as pandas DataFrames. You can access them in the variable\xa0<code>datasets</code> using the name of the query:\n    <ul><li>example: <code>datasets["your query name"]</code></ul>\n    <p><i>Note: <code>datasets</code> will update when you run a SQL query. It is best to run queries after you rename them so that your Python Notebook has the latest results.</i>\n    <p>If you prefer to access your query results in other ways, you can read more about datasets on <a href="https://help.modeanalytics.com/articles/how-to-use-datasets-in-python/">this Help page</a>.\n  </div>\n</li>\n'},"9g1q":function(e,t,n){"use strict";var r,o;n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),function(e){!function(e){e.LINE="LINE",e.BUBBLE="BUBBLE",e.NAMED_POINT="NAMED_POINT",e.PAIRED_POINT="PAIRED_POINT"}(e.SeriesType||(e.SeriesType={}))}(r||(r={})),function(e){!function(e){!function(e){!function(e){e.Boolean="BOOLEAN",e.Integer="INTEGER",e.Float="FLOAT",e.Decimal="DECIMAL",e.Date="DATE",e.String="STRING"}(e.Name||(e.Name={}))}(e.Type||(e.Type={})),function(e){!function(e){e.DatePart="DATE_PART"}(e.Name||(e.Name={}))}(e.Role||(e.Role={}))}(e.Column||(e.Column={})),function(e){!function(e){e.Empty="empty",e.Failed="failed",e.Succeeded="succeeded",e.Oversized="oversized"}(e.State||(e.State={}))}(e.Dataset||(e.Dataset={}))}(o||(o={}))},"9jGw":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("vqB5"),o=n("SdCE"),i=(n.n(o),n("VAhw")),a=n("KXXZ"),l=n("u5jn"),s=n("tt/G"),c=n("1azF"),d=n("yqn6");var u,p=Object(o.createSelectorCreator)(o.defaultMemoize,function(e,t,n){var r=e,o=t;return!(!r||!o)&&(r===o||r.chartType===o.chartType&&r.colorPaletteToken===o.colorPaletteToken&&r.encoding===o.encoding&&r.queryToken===o.queryToken&&r.format===o.format&&r.title===o.title&&r.v1View===o.v1View&&r.version===o.version)});!function(e){e.getSelectedVizToken=function(e){return e.client.selectedReport.currentVizToken},e.getModel=function(e){return e.client.selectedReport.model},e.getChartModels=function(e){return e.client.selectedReport.chartModels},e.getNormalizedChartArray=function(e){return e.client.selectedReport.charts},e.getQueries=function(e){return e.client.selectedReport.queries},e.getQueryTokens=function(e){return e.client.selectedReport.charts.queryTokens},e.getTitles=function(e){return e.client.selectedReport.charts.titles},e.getChartTypes=function(e){return e.client.selectedReport.charts.chartTypes},e.getQueryRuns=function(e){return e.client.selectedReport.queryRuns},e.getReportRunToken=function(e){return e.client.selectedReport.reportRun&&e.client.selectedReport.reportRun.resource&&e.client.selectedReport.reportRun.resource.token},e.getReportRunFormFields=function(e){return e.client.selectedReport.reportRun&&e.client.selectedReport.reportRun.resource&&e.client.selectedReport.reportRun.resource.form_fields},e.getReportManualRunDisabled=function(e){return e.client.selectedReport&&e.client.selectedReport.report&&e.client.selectedReport.report.manual_run_disabled},e.getNormalizedCharts=Object(o.createSelector)(e.getNormalizedChartArray,function(e){return e.tokens.toList().map(function(t){return Object(a.e)(e,t)})}),e.getHasNotebook=Object(o.createSelector)(function(e){return e.client.selectedReport.report},function(e){return null!=e&&e.hasLink("python_notebook")}),e.getNotebookLoading=Object(o.createSelector)(function(e){return e.client.selectedReport.report},e.getHasNotebook,c.b.selectedNotebookToken,function(e,t,n){return null==e||t&&null==n});var t=Object(o.createSelector)(e.getNormalizedChartArray,e.getSelectedVizToken,function(e,t){return t?Object(a.e)(e,t):void 0});e.getSelectedNormalizedChart=p(t,function(e){return e}),e.getSelectedChartTitle=Object(o.createSelector)(e.getTitles,e.getChartTypes,e.getSelectedVizToken,function(e,t,n){var r=e.get(n);return r||l.b[t.get(n)].name}),e.getSelectedModalChartTitle=Object(o.createSelector)(e.getSelectedChartTitle,function(e){return"Exploring"+(e?" "+e:"")}),e.getCharts=Object(o.createSelector)(e.getNormalizedCharts,e.getChartModels,function(e,t){return new i.a("token",e.map(function(e){var n=t.getRecord(e.queryToken);return Object(a.c)(e,n?n.model:void 0)}).toArray())}),e.getChartTokensByQueryMap=function(e){return e.client.selectedReport.chartsByQuery},e.getChartsByQueries=Object(o.createSelector)(e.getChartTokensByQueryMap,e.getNormalizedCharts,function(e,t){var n={};return e.forEach(function(e,r){n[r]=t.filter(function(t){return e.has(t.token)})}),Object(r.b)(n)}),e.getSelectedChart=Object(o.createSelector)(e.getSelectedNormalizedChart,e.getChartModels,function(e,t){if(e)return Object(a.c)(e,t.hasRecord(e.queryToken)?t.getRecord(e.queryToken).model:void 0)}),e.getModelForSelectedChart=Object(o.createSelector)(e.getChartModels,e.getSelectedChart,function(e,t){return t?e.getRecord(t.queryToken):void 0}),e.getSelectedChartDataset=function(e){return e.client.selectedReport.chartDesigner.dataPane.dataset},e.getChartSummaryData=Object(o.createSelector)(e.getSelectedChartDataset,e.getSelectedChart,e.getModelForSelectedChart,function(e,t,n){if(null!=e.summary&&null!=t&&null!=n){var r=t.format;if(n&&n.model){var o=n.model,i=e.encoding,a=e.summary;if(i&&a)return i=Object(d.m)(i),s.a.summary(o,i,a,r)}}return null}),e.getNotebookVizTokens=function(e){return e.client.selectedReport.notebookViz.tokens},e.getNotebookCellTokens=Object(o.createSelector)(e.getNotebookVizTokens,function(e){return e.client.selectedReport.notebookViz.cellTokens},function(e,t){return e.map(function(e){return t.get(e)}).filter(function(e){return null!=e})}),e.isCancelingSelectedQueryRun=Object(o.createSelector)(function(e){return e.transient.editor.selectedQueryToken},function(e){return e.client.selectedReport.queryRuns},function(e,t){var n=t.getRecord(e);return null!=n&&n.cancelQueued}),e.selectedQueryRunRecord=Object(o.createSelector)(function(e){return e.transient.editor.selectedQueryToken},function(e){return e.client.selectedReport.queryRuns},function(e,t){return t.getRecord(e)}),e.isSelectedQueryRunning=Object(o.createSelector)(e.selectedQueryRunRecord,function(e){return null!=e&&(e.running||e.runQueued)}),e.canCancelSelectedQueryRun=Object(o.createSelector)(function(e){return e.transient.editor.selectedQueryToken},function(e){return e.client.selectedReport.queryRuns},function(e,t){var n=t.getRecord(e);return null!=n&&null!=n.resource&&(n.running&&!n.cancelQueued)}),function(t){t.getResourceByToken=function(e,t){return e.client.selectedReport.charts.resources.get(t)},t.getQueryToken=function(e,t){return e.client.selectedReport.charts.queryTokens.get(t)},t.getChartTokensByQuery=function(e,t){return e.client.selectedReport.chartsByQuery.has(t)?e.client.selectedReport.chartsByQuery.get(t):Object(r.d)()},t.getNormalizedChartsByQuery=Object(o.createSelector)(t.getChartTokensByQuery,e.getNormalizedCharts,function(e,t){return t.filter(function(t){return e.has(t.token)})}),t.getQueryRunByChart=Object(o.createSelector)(e.getQueryRuns,t.getQueryToken,function(e,t){return e.getRecord(t)});t.getNormalizedChart=p(function(t,n){return Object(a.e)(e.getNormalizedChartArray(t),n)},function(e){return e}),t.getChart=Object(o.createSelector)(t.getNormalizedChart,e.getChartModels,function(e,t){if(e){var n=t.getRecord(e.queryToken);return Object(a.c)(e,n?n.model:void 0)}}),t.getChartModel=Object(o.createSelector)(t.getNormalizedChart,e.getChartModels,function(e,t){return e?t.getRecord(e.queryToken):void 0}),t.getChartRelName=Object(o.createSelector)(t.getNormalizedChart,function(e){return e?e.queryToken:void 0}),t.getChartTitle=Object(o.createSelector)(t.getNormalizedChart,function(e){return e?e.title:void 0}),t.getChartType=Object(o.createSelector)(t.getNormalizedChart,function(e){return e?e.chartType:void 0}),t.getChartPalette=Object(o.createSelector)(t.getNormalizedChart,function(e){return e?e.colorPaletteToken:void 0}),t.getChartEncoding=Object(o.createSelector)(t.getNormalizedChart,function(e){return e?e.encoding:void 0}),t.getChartFormat=Object(o.createSelector)(t.getNormalizedChart,function(e){return e?e.format:void 0})}(e.Parameterized||(e.Parameterized={}))}(u||(u={}))},"AEC+":function(e,t,n){"use strict";var r,o=function(){return function(){}}(),i=function(){function AxelType(e){this._newValue=void 0,this._originalValue=e}return AxelType.prototype.original=function(){return this._originalValue},AxelType.prototype.valueOf=function(){return this._newValue},AxelType.prototype.valueOrNull=function(){return null===this.original()?null:this.valueOf()},AxelType.prototype.setAsDirty=function(){this._newValue=AxelType.DIRTY},AxelType.isDirty=function(e){return null===e||void 0===e||("function"==typeof e.valueOf?e.valueOf()instanceof o:e instanceof o)},AxelType.prototype.toString=function(){return AxelType.isDirty(this.valueOf())?null===this.original()||void 0===this.original()?String(""):String(this.original()):String(this.valueOf())},AxelType.prototype.toStringOrNull=function(){return null===this.original()?null:this.toString()},AxelType.DIRTY=new o,AxelType}(),a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),l=function(e){function AxelDate(t){var n=e.call(this,t)||this,r=n.computeValue(t);return r.getTime&&!isNaN(r.getTime())?n._newValue=r:n.setAsDirty(),n}return a(AxelDate,e),AxelDate.prototype.computeValue=function(e){return isNaN(Number(e))?new Date(e):new Date(1e3*parseInt(e))},AxelDate}(i),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),c=function(e){function AxelNumber(t){var n=e.call(this,t)||this,r=n.computeValue(t);return isNaN(r)?n.setAsDirty():n._newValue=r,n}return s(AxelNumber,e),AxelNumber.prototype.computeValue=function(e){var t=null===e?NaN:Number(e);return isNaN(t)&&(t=this.findPercent(String(e))||t),isNaN(t)&&(t=this.findCurrency(String(e))||t),t},AxelNumber.prototype.findPercent=function(e){var t=e.match(/^([-+])?((\d*[,| |.]\d*)*)%$/);return t&&t.length?.01*parseFloat(this.cleanNumStr(t[2])):null},AxelNumber.prototype.findCurrency=function(e){var t=e.match(/^\$([-+])?((\d*[,| |.]\d*)*)$/);return t&&t.length?parseFloat(this.cleanNumStr(t[2])):null},AxelNumber.prototype.cleanNumStr=function(e){return e.replace(/\s|,/,"")},AxelNumber}(i),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),u=function(e){function AxelString(t){var n=e.call(this,t)||this,r=String(t);return"string"==typeof t||"number"==typeof t?n._newValue=r:n.setAsDirty(),n}return d(AxelString,e),AxelString}(i);n.d(t,"a",function(){return l}),n.d(t,!1,function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return i})},AGf9:function(e,t){e.exports='<h3>Supported Packages</h3>\n<ul class="notebook-sidebar-collapsible-list">\n  <li ng-class="{open: ctrl.isOpen(\'frequent\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'frequent\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Frequently Used\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="http://dplyr.tidyverse.org/#usage">dplyr</a>: grammar of data manipulation</li>\n      <li><a target="_blank" href="http://ggplot2.tidyverse.org/index.html#usage">ggplot2</a>: system for creating graphics</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/httr/versions/0.1.1">httr</a>: tools for working with URLs &amp; HTTP</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/kernlab/versions/0.9-25">kernlab</a>: kernel-based machine learning lab</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/lubridate/versions/1.7.0">lubridate</a>: do more with dates and times</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/MASS/versions/7.3-47">MASS</a>: functions &amp; datasets to support Venables &amp; Ripley</li>\n      <li><a target="_blank" href="https://github.com/tidyverse/modelr#modelr">modelr</a>: modelling functions that work with the pipe</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/RColorBrewer/versions/1.1-2/topics/RColorBrewer">RColorBrewer</a>: ColorBrewer palettes</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/scales/versions/0.4.1">scales</a>: scale functions for visualizations</li>\n      <li><a target="_blank" href="https://github.com/tidyverse/stringr#overview">stringr</a>: fast, correct implementations of string manipulations</li>\n      <li><a target="_blank" href="http://tidyr.tidyverse.org/">tidyr</a>: easily create tidy data</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/plotly/versions/4.7.1">plotly</a>: create interactive graphics</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'wrangling\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'wrangling\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Data Manipulation &amp; Wrangling\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html">data.table</a>: extends data.frame</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/DMwR/versions/0.4.1">DMwR</a>: functions &amp; data for Data Mining with R</li>\n      <li><a target="_blank" href="http://dplyr.tidyverse.org/#usage">dplyr</a>: a grammar of data manipulation</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/forcats/versions/0.0.0.9000">forcats</a>: working with categorical variables</li>\n      <li><a target="_blank" href="https://github.com/tidyverse/glue#usage">glue</a>: glue strings to data</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/iterators/versions/1.0.9">iterators</a>: provides iterator construct for R</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/itertools/versions/0.1-3">itertools</a>: various tools for creating iterators</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/lubridate/versions/1.7.0">lubridate</a>: do more with dates and times</li>\n      <li><a target="_blank" href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html">magrittr</a>: a forward-pipe operator</li>\n      <li><a target="_blank" href="http://pillar.r-lib.org/index.html">pillar</a>: tools for styling columns of data</li>\n      <li><a target="_blank" href="https://github.com/tidyverse/purrr#usage">purrr</a>: functional programming toolkit</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/reshape2/versions/1.4.3">reshape2</a>: transform data between wide &amp; long</li>\n      <li><a target="_blank" href="https://github.com/tidyverse/stringr#overview">stringr</a>: work with character strings &amp; regex</li>\n      <li><a target="_blank" href="http://tidyr.tidyverse.org/">tidyr</a>: easily create tidy data</li>\n      <li><a target="_blank" href="https://github.com/patperry/r-utf8#usage">utf8</a>: fixes bugs in\xa0R\'s UTF-8 handling </li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/xml2/versions/1.2.0">xml2</a>: parse xml</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'stats\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'stats\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Machine Learning &amp; Statistics\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/ada/versions/2.0-5/topics/ada">ada</a>: stochastic boosting models</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/BTYD/versions/2.4">BTYD</a>: implementing buy-til-you-die models</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/BTYDplus/versions/0.4.0">BTYDplus</a>: extends BTYD</li>\n      <li><a target="_blank" href="http://topepo.github.io/caret/index.html">caret</a>:\xa0streamlines creation of predictive models</li>\n      <li><a target="_blank" href="https://google.github.io/CausalImpact/CausalImpact.html">causalImpact</a>: estimates causal effects on time series</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/cluster/versions/2.0.6">cluster</a>: cluster analysis extended Rousseeuw et al.</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/forecast/versions/8.1">forecast</a>: forecasting for time series &amp; linear models</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/hts/versions/5.0">hts</a>: hierarchical &amp; grouped time series</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/kernlab/versions/0.9-25">kernlab</a>: kernel-based machine learning lab</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/kknn/versions/1.3.1">kknn</a>: weighted k-nearest neighbors</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/lars/versions/1.2">lars</a>: least angle regression, lasso &amp; forward stagewise</li>\n      <li><a target="_blank" href="https://github.com/tidyverse/modelr#modelr">modelr</a>: modelling functions that work with the pipe</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/nnet/versions/7.3-12">nnet</a>: feed-forward neural networks &amp; multinomial log-linear models\xa0</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/prophet/versions/0.2">prophet</a>: automatic forecasting procedure</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/tm/versions/0.7-3">tm</a>: text mining package</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/zoo/versions/1.8-1">zoo</a>:\xa0S3 infrastructure for regular &amp; irregular time series</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'viz\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'viz\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Visualization\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/colorspace/versions/1.3-2">colorspace</a>: color space manipulation</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/dichromat/versions/2.0-0">dichromat</a>: color schemes for dichromats</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/ggdendro/versions/0.1-20">ggdendro</a>: dendrograms &amp; tree plots with ggplot2</li>\n      <li><a target="_blank" href="http://ggobi.github.io/ggally/">GGally</a>: extension to ggplot2</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/Deducer/versions/0.7-9/topics/ggcorplot">ggcorplot</a>: plots a correlation matrix</li>\n      <li><a target="_blank" href="http://ggplot2.tidyverse.org/index.html#usage">ggplot2</a>: system for creating graphics</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/ggpubr/versions/0.1.0/readme">ggpubr</a>: publication-ready ggplot2 plots</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/ggridges/versions/0.5.0">ggridges</a>: ridgeline plots in ggplot2</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/gtable/versions/0.2.0">gtable</a>: arrange \'grobs\' in "tables"</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/ggthemes/versions/3.4.2">ggthemes</a>: extra themes, scales &amp; geoms for ggplot2</li>\n      <li><a target="_blank" href="http://ggvis.rstudio.com/">ggvis</a>: interactive graphics for exploratory analysis</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/labeling/versions/0.3">labeling</a>: axis labeling</li>\n      <li><a target="_blank" href="http://lattice.r-forge.r-project.org/documentation.php">lattice</a>: trellis graphics for R</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/munsell/versions/0.4.3">munsell</a>: utilities for using Munsell colors</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/RColorBrewer/versions/1.1-2/topics/RColorBrewer">RColorBrewer</a>:\xa0ColorBrewer palettes</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/scales/versions/0.4.1">scales</a>: scale functions for visualizations</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/viridisLite/versions/0.1.3/topics/viridis">viridisLite</a>:\xa0 port of matplotlib color maps\xa0</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/plotly/versions/4.7.1">plotly</a>: create interactive graphics</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'other\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'other\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Everything Else\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/assertthat/versions/0.2.0">assertthat</a>: easy pre- and post-assertions</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/blob/versions/1.1.0/topics/blob">blob</a>:\xa0S3 class to represent BLOBs</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/digest/versions/0.6.15/topics/digest">digest</a>: create compact hash digests of R objects</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/httr/versions/0.1.1">httr</a>: tools for working with URLs &amp; HTTP</li>\n      <li><a target="_blank" href="https://github.com/hadley/lazyeval#lazyeval">lazyeval</a>: lazy (non-standard) evaluation</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/MASS/versions/7.3-47">MASS</a>: functions &amp; datasets to support Venables &amp; Ripley</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/proto/versions/1.0.0">proto</a>: prototype object-based programming\xa0</li>\n      <li><a target="_blank" href="https://www.rdocumentation.org/packages/rlang/versions/0.1.6">rlang</a>: functions for base types &amp; core R &amp; tidyverse features</li>\n    </ul>\n  </li>\n</ul>\n<h3>Gallery</h3>\n<p class="notebook-sidebar-text"><a target="_blank" href="https://community.modeanalytics.com/gallery/">Mode Gallery</a>: Browse templates for common analytical tasks using R, Python, and HTML\n'},AKo7:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("5TEl"),i=(n.n(o),n("m9my"));n.n(i);!function(e){var t={1:"Q1",2:"Q2",3:"Q3",4:"Q4"},n={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},r={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"};for(var a in e.DateFormatStrings={date:"%x",hour:"%Y-%m-%d %H:%M:%S",full_mon:"%b %Y",full_day:"%e %b %Y",usa_full:"%b %e %Y",mon_day:"%m/%d",year:"%Y"},e.QuarterNamesByNumber={},t)t.hasOwnProperty(a)&&(e.QuarterNamesByNumber[t[a]]=parseInt(a));for(var l in e.MonthNamesByNumber={},n)n.hasOwnProperty(l)&&(e.MonthNamesByNumber[n[l]]=parseInt(l));for(var s in e.WeekdayNamesByNumber={},r)r.hasOwnProperty(s)&&(e.WeekdayNamesByNumber[r[s]]=parseInt(s));e.makeFormattedTimestamp=function(t,n,r){switch(t){case i.DatePart.HOUR:return o.time.format.utc("%Y-%m-%d %H:00")(new Date(r));case i.DatePart.MINUTE:return o.time.format.utc("%Y-%m-%d %H:%M")(new Date(r));case i.DatePart.SECOND:return o.time.format.utc("%Y-%m-%d %H:%M:%S")(new Date(r));default:return o.time.format.utc(e.DateFormatStrings[n]||"%m/%d/%Y")(new Date(r))}},e.getDatePart=function(e,t){if(t.type===i.FieldType.VIEWCALC&&t.formula.form===i.FormType.DATEFUNC&&("DATEPART"===t.formula.funcName||"DATETRUNC"===t.formula.funcName))switch(t.formula.datePart.toUpperCase()){case"QUARTER":return i.DatePart.QUARTER;case"MONTH":return i.DatePart.MONTH;case"WEEKDAY":return i.DatePart.WEEKDAY;case"HOUR":return i.DatePart.HOUR;case"MINUTE":return i.DatePart.MINUTE;case"SECOND":return i.DatePart.SECOND}return null},e.makeDatePartName=function(e,o,a,l,s){if(a.type===i.FieldType.VIEWCALC&&a.formula.form===i.FormType.DATEFUNC&&"DATEPART"===a.formula.funcName)switch(a.formula.datePart.toUpperCase()){case"QUARTER":return function(e,n){return t[n]||(null==n?n:n.toString())}(0,l);case"MONTH":return function(e,t){return n[t]||(null==t?t:t.toString())}(0,l);case"WEEKDAY":return function(e,t){return r[t]||(null==t?t:t.toString())}(0,l);case"HOUR":case"MINUTE":case"SECOND":return function(e,t){return null==t?t:t.toString()}(0,l)}return null==l?l:l.toString()}}(r||(r={}))},Azxg:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDx0aXRsZT4KICAgICAgICBsYWJlbC1tYXJrCiAgICA8L3RpdGxlPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgc3Ryb2tlPSIjNzU3NzgzIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxyZWN0IHg9Ii41IiB5PSIuNSIgd2lkdGg9IjExIiBoZWlnaHQ9IjExIiByeD0iMiIvPgogICAgICAgIDxyZWN0IHg9Ii41IiB5PSIuNSIgd2lkdGg9IjExIiBoZWlnaHQ9IjExIiByeD0iMiIvPgogICAgICAgIDxwYXRoIGQ9Ik0zLjI3MyA1LjM0VjMuMjcyaDUuNDU0djIuMTgyIi8+CiAgICAgICAgPHBhdGggZD0iTTYgMy44MTh2NS40NTVtLTEuMDkgMGgyLjE4IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIi8+CiAgICA8L2c+Cjwvc3ZnPg=="},BP8X:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i});var r,o,i,a=n("lzv4");!function(e){e.Uploaded="uploaded",e.Initials="initials",e.Gravatar="gravatar",e.Placeholder="placeholder"}(r||(r={})),function(e){!function(e){e.Standard="standard",e.Plus="plus",e.Free="free"}(e.Type||(e.Type={})),function(e){e.Report="[PlanCode] Report",e.User="[PlanCode] User"}(e.Context||(e.Context={}))}(o||(o={})),function(e){var t=a.ModeResourceHelper.isResource;e.isCommunityOrg=function(e){return e.user},e.canCreateDatasources=function(e){return t(e)&&e.hasLink("web_data_sources_settings")},e.hasSpaceDirectory=function(e){return t(e)&&e.hasLink("web_spaces")},e.getTrialLink=function(e){return t(e)&&e.hasLink("web_trial_appointments")&&e.links("web_trial_appointments").href||null},e.getOrgFeatures=function(e){return t(e)&&e.hasEmbedded("organization_features")?e.embedded("organization_features"):null},e.getOrgSpace=function(e){return t(e)&&e.hasEmbedded("organization_space")?e.embedded("organization_space"):null}}(i||(i={}))},"C/qa":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+c29ydC1kZXNjZW5kaW5nPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9ImVkaXRvciIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IlNvcnQtQXNjZW5kaW5nIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjAwMDAwMCwgMi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTM5LUNvcHktMiI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi41MDAwMDAsIDYuMDAwMDAwKSBzY2FsZSgxLCAtMSkgdHJhbnNsYXRlKC0yLjUwMDAwMCwgLTYuMDAwMDAwKSAiPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjQ5OTMxNzQwNSwxMC4wMDIzMDQgTDMuNjg5ODU3NzIsNy42NjUzMDgwMiBDNC4xMzY5MDk5Niw3LjMzNzg1Mjc0IDQuNDk5MzE3NCw3LjUxMjgzNjExIDQuNDk5MzE3NCw4LjA2NjQzNTA5IEw0LjQ5OTMxNzQsMTEuOTM4MTcyOSBDNC40OTkzMTc0LDEyLjQ4NzE2NDYgNC4xMzAxNzY3OCwxMi42NjE4MjM0IDMuNjg5ODU3NzIsMTIuMzM5MyBMMC40OTkzMTc0MDUsMTAuMDAyMzA0IFoiIGlkPSJUcmlhbmdsZS1Db3B5LTQiIGZpbGw9IiM2MzY1NkUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNDk5MzE3LCAxMC4wMDAwMDApIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTIuNDk5MzE3LCAtMTAuMDAwMDAwKSAiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi41LDkuNSBMMi41LDAuNSIgaWQ9IkxpbmUiIHN0cm9rZT0iIzYzNjU2RSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMzMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExLjUwMDAwMCwgNS41MDAwMDApIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTExLjUwMDAwMCwgLTUuNTAwMDAwKSB0cmFuc2xhdGUoNy4wMDAwMDAsIDAuMDAwMDAwKSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2U9IiM2MzY1NkUiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0LjUwMDAwMCwgNS41MDAwMDApIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTQuNTAwMDAwLCAtNS41MDAwMDApICI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjQ1LDEuNSBMMy40NSwxLjUiIGlkPSJMaW5lIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjQ1LDUuNSBMNi40NSw1LjUiIGlkPSJMaW5lLUNvcHktMTAwIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjQ1LDkuNSBMOC40NSw5LjUiIGlkPSJMaW5lLUNvcHktMTAxIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},CIoY:function(e,t){e.exports='<div class="chart-accordion">\n  <div class="chart-nav">\n    <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n    <li ng-class="{active:accordion.chart}"><a ng-click="switchAccordion(\'chart\')">Data</a></li>\x3c!--\n    --\x3e<li ng-class="{active:accordion.format}"><a ng-click="switchAccordion(\'format\')">Format</a></li>\n    </ul>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.chart">\n    <div class="form-field">\n      <label class="axis-label">X-Axis</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.x" ng-options="column.name as column.name for column in columns.all" ng-change="updateXColumns()"></select>\n    </div>\n    <div class="form-field" ng-if="series.number.length">\n      <label class="axis-label">Y-Axis</label>\n      <select\n        multiselect-dropdown="line-y"\n        class="multiselect"\n        classes="form-control form-control-sm"\n        block="true"\n        ng-multiple="true"\n        multiple="multiple"\n        ng-model="view.y"\n        ng-options="series.name as series.name for series in series.number"\n        ng-change="updateYColumns()">\n      </select>\n    </div>\n    <div class="form-field" ng-if="(view.y.length && (view.y.length < 2 || !view.g)) || !series.number.length">\n      <label class="axis-label">Aggregate</label>\n      <select ng-if="!view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" ng-model="view.aggregate" ng-change="aggregateChanged(view.aggregate)" ng-options="fn.value as fn.name for fn in ::aggregates"><option value="">None</option></select>\n      <select ng-if="view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" ng-model="view.gValueFn" ng-options="fn.value as fn.name for fn in ::aggregates" ng-change="updateSettings()"></select>\n    </div>\n    <div class="form-field" ng-if="(view.y.length && view.y.length < 2) || !series.number.length">\n      <label class="axis-label">Group By</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.g" ng-options="column.name as column.name for column in columns.grouped" ng-change="updateGroupBy()"><option value="">None</option></select>\n    </div>\n    <div class="form-field" ng-if="view.g && ((view.y.length && view.y.length < 2) || !series.number.length)">\n      <label class="axis-label">Selected</label>\n      <select\n        multiselect-dropdown="line-f"\n        class="multiselect"\n        classes="form-control form-control-sm"\n        select-all="true"\n        select-all-text="All Series"\n        select-all-value="string:$mode-select-all$"\n        select-all-button-text="All Series"\n        block="true"\n        ng-multiple="true"\n        multiple="multiple"\n        ng-model="view.f"\n        ng-options="series.name as series.displayName for series in series.grouped"\n        ng-change="updateSettings()">\n      </select>\n    </div>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.format">\n    <h3 class="setting-title">X-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.xlabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Rotate Label</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xangle" ng-options="item.value as item.name for item in ::rotations" ng-change="updateSettings()">\n        <option value="">none</option>\n      </select>\n    </div>\n    <div class="clearfix">\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="form-field" ng-show="isDateType();">\n      <label class="axis-label">Format</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::dateFormats" ng-change="updateSettings()">\n        <option value="">auto</option>\n      </select>\n    </div>\n\n    <h3 class="setting-title">Y-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.ylabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Range</label>\n      <input class="form-control form-control-sm range-input" placeholder="min" type="text" ng-model="tempYmin" ng-model-options="{ updateOn: \'blur\' }" ng-change="setYMin(true);" mode-enter /> to\n      <input class="form-control form-control-sm range-input pull-right" placeholder="max" type="text" ng-model="tempYmax" ng-model-options="{ updateOn: \'blur\' }" ng-change="setYMax(true);" mode-enter />\n    </div>\n    <div class="clearfix">\n      <div class="half-width">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <h3 class="setting-title">Details</h3>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="linehidelegend" value="hideLegend" ng-model="view.hideLegend" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="linehidelegend">\n        Hide Legend\n        </label>\n      </span>\n    </div>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="linenulltozero" value="nullToZero" ng-model="view.nullToZero" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="linenulltozero">\n        Show Null Values as Zero\n        </label>\n      </span>\n    </div>\n    <h3 class="setting-title">Color Palette</h3>\n    <div uib-dropdown class="advanced-theme dropdown dropup">\n      <a href="#" class="chart-toggle-container clearfix dropdown-toggle" uib-dropdown-toggle>\n        <div href="#" class="chart-toggle-theme">\n          <div class="angle" style="{{currentTheme}}"></div>\n          <i class="icon-double-carets pull-right"></i>\n        </div>\n      </a>\n      <ul uib-dropdown-menu class="dropdown-menu">\n        <li ng-repeat="color in ::themes">\n          <a href="javascript:void(0);" ng-click="setTheme(color.value);" class="checkbox-icon"><div class="swatches"><span class="swatch" style="background:{{color.color_0}}"></span><span class="swatch" style="background:{{color.color_1}}"></span><span class="swatch" style="background:{{color.color_2}}"></span><span class="swatch" style="background:{{color.color_3}}"></span><span class="swatch" style="background:{{color.color_4}}"></span></div>{{ color.name }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>'},CWXl:function(e,t){e.exports='<div class="chart-accordion">\n  <div class="chart-nav">\n    <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n    <li ng-class="{active:accordion.chart}"><a ng-click="switchAccordion(\'chart\')">Data</a></li>\x3c!--\n    --\x3e<li ng-class="{active:accordion.format}"><a ng-click="switchAccordion(\'format\')">Format</a></li>\n    </ul>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.chart">\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.label" ng-options="column.name as column.name for column in columns.all" ng-change="updateSettings()"></select>\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Value</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.value" ng-options="column.name as column.name for column in columns.all" ng-change="updateSettings()"></select>\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Aggregate</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.aggregate" ng-options="fn.value as fn.name for fn in ::pieAggregates" ng-change="updateSettings()"><option value="">None</option></select>\n    </div>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.format">\n    <h3 class="setting-title">Chart Options</h3>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="piehideval" value="angle" ng-model="view.xhideval" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="piehideval">\n        Hide Chart Values\n        </label>\n      </span>\n    </div>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="pieformat" value="angle" ng-model="view.realvalue" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="pieformat">\n        Show Real Values\n        </label>\n      </span>\n    </div>\n    <h3 class="setting-title">Legend</h3>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="piehidelegend" value="hideLegend" ng-model="view.hideLegend" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="piehidelegend">\n        Hide Legend\n        </label>\n      </span>\n    </div>\n    <h3 class="setting-title">Color Palette</h3>\n    <div uib-dropdown class="advanced-theme dropdown">\n      <a href="#" class="chart-toggle-container clearfix dropdown-toggle" uib-dropdown-toggle>\n        <div href="#" class="chart-toggle-theme">\n          <div class="angle" style="{{currentTheme}}"></div>\n          <i class="icon-double-carets pull-right"></i>\n        </div>\n      </a>\n      <ul uib-dropdown-menu class="dropdown-menu">\n        <li ng-repeat="color in ::themes">\n          <a href="javascript:void(0);" ng-click="setTheme(color.value);" class="checkbox-icon"><div class="swatches"><span class="swatch" style="background:{{color.color_0}}"></span><span class="swatch" style="background:{{color.color_1}}"></span><span class="swatch" style="background:{{color.color_2}}"></span><span class="swatch" style="background:{{color.color_3}}"></span><span class="swatch" style="background:{{color.color_4}}"></span></div>{{ color.name }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>'},CwcT:function(e,t,n){"use strict";var r=n("PbPb"),o=(n.n(r),function(){function TableDataService(e,t){this.ds=e,this.cos=t}return TableDataService.prototype.get=function(){return this.ds.get()},TableDataService.prototype.hasRows=function(e){var t=this.ds.getDatasetByKey(e);return t&&t.count>0},TableDataService.prototype.dataOversized=function(e){var t=this.ds.getDatasetByKey(e);return t&&"boolean"==typeof t.oversized?t.oversized:null},TableDataService.prototype.rowCount=function(e){return this.hasRows(e)?this.ds.getDatasetByKey(e).content.length:null},TableDataService.prototype.columnCount=function(e){return this.ds.getDatasetByKey(e).columns.length},TableDataService.prototype.dataset=function(e,t,n,o){var i=this;if(void 0===n&&(n={}),void 0===o&&(o=null),!e&&!o)throw new Error("Dataset query token or dataset undefined");if(!t)throw new Error("Table viz token undefined");if(!this.ds.hasContentFor(e))throw new Error("Dataset could not be found");var a=this.resolveColumnType.bind(this,e,t),l=Object(r.assign)({},{value:function(e,t){return function(){return i.ds.getValue.call(null,e,a(t))}},sorter:this.ds.sortTable.bind(this,a),rowLimit:TableDataService.DISPLAY_ROW_LIMIT},n);return this.ds.getDatasetModel(e,l,o)},TableDataService.prototype.resolveColumnType=function(e,t,n){var r,o=["plain-text","date","financial","currency","number","percentage"],i=this.cos.columnType(t,n)||"automatic";return i&&"automatic"!==i?(r=i,~o.indexOf(r)?r:"plain-text"):this.ds.resolveColumnDataType(e,n)},TableDataService.prototype.datasetState=function(e){return this.ds.getDatasetState(e)},TableDataService.prototype.queryData=function(e){return this.ds.getDatasetByKey(e)},TableDataService.$inject=["DatasetService","ColumnOptionsService"],TableDataService.DISPLAY_ROW_LIMIT=1e3,TableDataService.MIN_FILTER_QUERY_LENGTH=2,TableDataService}());t.a=o},DAkD:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.RemovePill="RemovePill",e.ChangePillFormula="ChangePillFormula"}(r||(r={}))},DMbl:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r,o,i=n("lzv4"),a=n("cM/6");!function(e){e.private="private",e.community="community",e.custom="custom"}(r||(r={})),function(e){var t=i.ModeResourceHelper.isResource;function isCommunitySpace(e){return t(e)&&e.space_type===r.community&&"Community"===e.name}function isRestricted(e){return t(e)&&e.restricted}function isPrivate(e){return t(e)&&e.space_type===r.private}function isOpen(e){return t(e)&&!isRestricted(e)&&!isCommunitySpace(e)&&!isPrivate(e)}function isCreatedBy(e,n){var r=t(e)&&e.hasLink("creator")&&e.links("creator").href,o=t(n)&&n.hasLink("self")&&n.links("self").href;return r&&o&&r===o}function isMemberOf(e){return t(e)&&e.hasLink("user_space_membership")}function canEditMemberships(e){return(isRestricted(e)||isOpen(e))&&e.hasEmbedded("new_space_membership")}e.isCommunitySpace=isCommunitySpace,e.isRestricted=isRestricted,e.isRestrictedPersonalSpace=function(e){return isPrivate(e)&&isRestricted(e)},e.isPrivate=isPrivate,e.isOpen=isOpen,e.resolveDisplayName=function(e,n,r,o){return a.a.isCommunity(r)&&o&&!o.user?"Community":(!t(e)||isPrivate(e))&&n&&n.name?n.name:t(e)?e.name:""},e.isCreatedBy=isCreatedBy,e.isPrivateAndNotCreatedBy=function(e,t){return isPrivate(e)&&!isCreatedBy(e,t)},e.isMemberOf=isMemberOf,e.canLeave=function(e){return isRestricted(e)||isOpen(e)&&isMemberOf(e)},e.canJoin=function(e){return isOpen(e)&&!isMemberOf(e)&&canEditMemberships(e)},e.canDestroy=function(e){return t(e)&&e.hasForm("destroy")},e.canCreate=function(e){return t(e)&&e.hasForm("create")},e.canEditMemberships=canEditMemberships}(o||(o={}))},DN7e:function(e,t){e.exports='<div class="default-modal scroll-modal">\n  <h3 class="modal-header">Email Report<a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <div class="modal-container clearfix">\n    <p>The following don\'t appear to be valid or <a target="_blank" rel="noopener" href="https://help.modeanalytics.com/articles/who-can-receive-emails/">authorized</a> email addresses:</p>\n    <ul class="icons-list">\n      <li ng-repeat="email in failed"><i class="icon-fail-color"></i>{{ email }}</li>\n    </ul>\n    <div ng-if="succeeded.length">\n      <p>Email sent to:</p>\n      <ul class="icons-list">\n        <li ng-repeat="email in succeeded"><i class="icon-success-check-color"></i>{{ email }}</li>\n      </ul>\n    </div>\n  </div>\n</div>\n'},DPDX:function(e,t){e.exports='<div class="default-modal scroll-modal">\n  <h3 class="modal-header">Add Group Members<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <div class="modal-container-lg">\n    <group-membership group="ctrl.group" owner="ctrl.owner" account="ctrl.account"></group-membership>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-primary" ng-click="ctrl.$close()">Done</button>\n  </div>\n</div>'},DR9S:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("m9my"),i=(n.n(o),n("yU+A"));n.n(i);!function(e){function compile(t,n,r){var o=i.Model.Relations.find(t,n);return e.adapter.compile(t,o,r)}e.adapter=new i.DefaultAdapter,e.compile=compile,e.column=function(e,t,n,r,o,a,l){return i.Adapter.column(e,t,n,r,o,a)},e.calc=function(t,n,r,o,a){var l=i.Model.Relations.find(t,n);return i.Adapter.calc(e.adapter,t,l,r,o,a)},e.field=function(t,n,r,o,a){var l=i.Model.Relations.find(t,n);return i.Adapter.field(e.adapter,t,l,r,o,a)},function(e){e.isValid=function(e,t,n){try{return compile(e,t,n),null}catch(e){return e}},e.isNames=function(e){return e===i.Attr.Names.Key},e.isValues=function(e){return e===i.Attr.Values.Key},e.reference=function(e){switch(e.expr.form){case i.Expression.Form.Access:case i.Expression.Form.Aggregate:case i.Expression.Form.DatePart:case i.Expression.Form.DateTrunc:return e.expr.ref;default:return null}}}(e.Formulas||(e.Formulas={})),function(e){function find(e,t,n){var r=i.Model.Relations.find(e,t);return i.Model.Attrs.findInRelation(e,r,n)}e.isNames=function(e){return e.source===i.Attr.Source.Names},e.isValues=function(e){return e.source===i.Attr.Source.Values},e.isContinuous=function(e){return e.type===i.Attr.Type.Continuous},e.isDiscrete=function(e){return e.type===i.Attr.Type.Discrete},e.find=find,e.findByFormula=function(e,t,n){switch(i.Model.Relations.find(e,t),n.expr.form){case i.Expression.Form.Access:case i.Expression.Form.Aggregate:case i.Expression.Form.DatePart:case i.Expression.Form.DateTrunc:return find(e,t,n.expr.ref.name);default:return null}},e.dimensions=function(e,t){var n=i.Model.Relations.find(e,t);return i.Model.Attrs.dimensions(e,n)},e.measures=function(e,t){var n=i.Model.Relations.find(e,t);return i.Model.Attrs.measures(e,n)}}(e.Attrs||(e.Attrs={})),function(t){function isNames(e){return e.source===i.Attr.Source.Names}function isValues(e){return e.source===i.Attr.Source.Values}t.names=function(t){return i.Adapter.Fields.names(e.adapter,t)},t.values=function(t){return i.Adapter.Fields.values(e.adapter,t)},t.isNames=isNames,t.isValues=isValues,t.isSystem=function(e){return isValues(e)||isNames(e)},t.isContinuous=function(e){return e.type===i.Attr.Type.Continuous},t.isDiscrete=function(e){return e.type===i.Attr.Type.Discrete}}(e.Fields||(e.Fields={})),function(t){t.make=function(t,n,r){for(var o=[],a=0,l=r||[];a<l.length;a++){var s=l[a],c=s.name,d="["+c+"]";switch(s.type){case"boolean":o.push(e.column(c,d,i.DataType.Boolean.make(),i.DataType.Boolean.make(),i.Attr.Type.Discrete,i.Attr.Role.Dimension));break;case"float":case"decimal":case"double precision":case"double":case"real":case"fixed":case"number":o.push(e.column(c,d,i.DataType.Float.make(),i.DataType.Float.make(),i.Attr.Type.Continuous,i.Attr.Role.Measure));break;case"int":case"bigint":case"integer":o.push(e.column(c,d,i.DataType.Integer.make(),i.DataType.Integer.make(),i.Attr.Type.Continuous,i.Attr.Role.Measure));break;case"json":case"text":case"string":case"character":case"character varying":case"varchar":case"varchar2":case"nvarchar2":o.push(e.column(c,d,i.DataType.String.make(),i.DataType.String.make(),i.Attr.Type.Discrete,i.Attr.Role.Dimension));break;case"date":case"time":case"datetime":case"timestamp":case"timestamp with time zone":case"timestamp without time zone":o.push(e.column(c,d,i.DataType.Timestamp.make(),i.DataType.Timestamp.make(),i.Attr.Type.Continuous,i.Attr.Role.Dimension))}}return i.View.make(i.View.Source.table(n),t,o)},t.add=function(e,t){return i.Model.Views.add(e,t)},t.merge=function(e,t){var n,r=i.Model.Views.find(e,t.name);if(null==r)return i.View.Columns.merge(t);for(var o=i.View.Columns.all(t),a=new Map,l=0,s=o;l<s.length;l++){var c=s[l];a.set(c.name,c)}return r=i.View.Columns.filter(r,function(e){return a.has(e.name)}),(n=i.View.Columns).merge.apply(n,[r].concat(o))}}(e.Views||(e.Views={})),function(e){e.from=function(e,t){return i.Relation.make(t.name,t.name,{attrs:[i.Attr.names(i.DataRole.Names.make()),i.Attr.values(i.DataRole.Values.make())]})},e.add=function(e,t){return i.Model.Relations.add(e,t)}}(e.Relations||(e.Relations={})),function(e){function make(e){return i.Adapter.model(e)}e.empty=function(){return make(null)},e.make=make,e.view=function(e,t){return i.Adapter.relation(e,t||e)}}(e.Models||(e.Models={})),function(t){function makeDataType(e){switch(e.name){case i.DataType.Name.Float:case i.DataType.Name.Decimal:return o.DataType.FLOAT;case i.DataType.Name.Integer:return o.DataType.INTEGER;case i.DataType.Name.Timestamp:return o.DataType.DATETIME;case i.DataType.Name.Regexp:return o.DataType.REGEXP;case i.DataType.Name.String:return o.DataType.STRING;case i.DataType.Name.Null:return o.DataType.NULL}}function makeRoleType(e){switch(e){case i.Attr.Role.Dimension:return o.RoleType.DIMENSION;case i.Attr.Role.Measure:return o.RoleType.MEASURE}}function makeVariableType(e){switch(e){case i.Attr.Type.Continuous:return o.VariableType.CONTINUOUS;case i.Attr.Type.Discrete:return o.VariableType.DISCRETE}}t.makeField=function(t,n){var r,o,a;switch(n.source){case i.Attr.Source.Calc:case i.Attr.Source.Column:return r=makeRoleType(n.role),o=makeVariableType(n.type),a=makeDataType(n.formula.type),t.buildDataField(n.name,a,r,o);case i.Attr.Source.Field:return function(e){var r=n.formula.source,o=makeVariableType(n.type);return t.buildViewCalcField(r,o,e)}(n.alias);case i.Attr.Source.Names:return t.buildViewNamesField(e.adapter.alias());case i.Attr.Source.Values:return t.buildViewValuesField(e.adapter.alias())}},t.makeDataType=makeDataType,t.makeRoleType=makeRoleType,t.makeVariableType=makeVariableType}(e.Compat||(e.Compat={}))}(r||(r={}))},"Ddw+":function(e,t){e.exports='<li ng-class="{open: ctrl.isOpen(\'shortcuts\')}">\n  <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'shortcuts\')">\n    <i class="icon-tree-caret-default align-md-icon"></i> Keyboard Shortcuts\n  </span>\n  <div class="notebook-sidebar-item-text">\n    <h3>Command Mode (Esc to Enable)</h3>\n    <div class="table">\n      <div class="table-row clearfix">\n        <div class="left-cell">Enter Edit Mode</div>\n        <div class="right-cell">Return</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Run Cell</div>\n        <div class="right-cell">&#8984;/Ctrl + Return</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Run Cell &amp; Advance</div>\n        <div class="right-cell">Shift + Return</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Select Cell Above</div>\n        <div class="right-cell">K or &uarr;</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Select Cell Below</div>\n        <div class="right-cell">J or &darr;</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Insert Cell Above</div>\n        <div class="right-cell">A</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Insert Cell Below</div>\n        <div class="right-cell">B</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Move Cell Above</div>\n        <div class="right-cell">Shift + Alt + &uarr;</div>\n      </div>\n      <div class="table-row clearfix">\n        <div class="left-cell">Move Cell Below</div>\n        <div class="right-cell">Shift + Alt + &darr;</div>\n      </div>\n    </div>\n    <h3>Edit Mode (Enter to Enable)</h3>\n    <div class="table">\n    <div class="table-row clearfix">\n      <div class="left-cell">Code Complete or Indent</div>\n      <div class="right-cell">Tab</div>\n    </div>\n    <div class="table-row clearfix">\n      <div class="left-cell">Select All</div>\n      <div class="right-cell">&#8984;/Ctrl + A</div>\n    </div>\n    <div class="table-row clearfix">\n      <div class="left-cell">Undo</div>\n      <div class="right-cell">&#8984;/Ctrl + Z</div>\n    </div>\n    <div class="table-row clearfix">\n      <div class="left-cell">Run Cell</div>\n      <div class="right-cell">&#8984;/Ctrl + Return</div>\n    </div>\n    <div class="table-row clearfix">\n      <div class="left-cell">Run Cell &amp; Advance</div>\n      <div class="right-cell">Shift + Return</div>\n    </div>\n    <div class="table-row clearfix">\n      <div class="left-cell">Insert Cell Below</div>\n      <div class="right-cell">Opt/Alt + Return</div>\n    </div>\n  </div>\n  </div>\n</li>\n'},DovP:function(e,t,n){"use strict";var r,o=n("0YuG"),i=n("5TEl"),a=n("PbPb"),l=n("m9my"),s=n("wB6Z"),c=n("RRsi"),d=n("KXXZ"),u=n("zdl5"),p=n("0iPh"),h=n("zsFr"),g=n("kZ7C"),m=n("WRVt"),f=n("YzgE"),C=n("P6nd"),y=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};!function(e){e.options=function(e){return y({enableExploration:!1,preventExpandingInteraction:!0},e)};var t,n,r="chart-context-menu";function removeMenu(e){p(document.body).find("."+r).remove();var t=p(document.body).find(".chart-svg");t.length>0&&t.map(function(e,n){!function(e){var t=p(e).highcharts();if(!t)return!1;var n=t.getSelectedPoints()[0],r=t.hoverPoint;if(!n||!r)return!1;if(n.x===r.x&&n.y===r.y)return!0}(n)?deselectChartPoints(n):Object(a.defer)(deselectChartPoints,t)})}function deselectChartPoints(e){var t=p(e).highcharts();t&&t.getSelectedPoints().map(function(e){e.select()})}function removeClickListener(e){document.removeEventListener("click",t),t=null}function removeScrollListener(e){document.removeEventListener("scroll",n),n=null}function clear(e){removeClickListener(),removeScrollListener(),function(e){e&&e.options&&(e.options.tooltip.enabled=!0)}(e),removeMenu()}function makeExploreItemElem(e){return e=e.length>19?Object(a.truncate)(e,{length:19}):e,p('\n      <div class="context-menu-link">\n        <div class="context-menu-label-wrapper">\n          '+h.f+'\n          <div class="context-menu-text">\n            Explore <div class="value link-section-name">'+e+"</div>...\n          </div>\n        </div>\n      </div>\n    ")}function makeExploreMarkAction(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return{target:e.target,filters:t,type:u.a.ContextItemType.ExploreMark}}function dispatchAnalyticsEvent(e,t){var n=t.analyticsProps;n.event_id=t.generateUUID(),t.boundOnEmbedAction({$action:{type:C.a[e],chartToken:t.chartToken,props:n}})}e.clear=clear,e.show=function(e,o,i,l,s,c){var d=function(e,t,n,o,i,l){var s=t.target.series.name,c=t.target.series.color.color,d=m.a.nextDatePart(o,i),h=m.a.checkLowestDatePart(o,i),y=function(e,t,n){return void 0===n&&(n=""),p('<div class="'+(r+n)+'"></div>').css({opacity:1,position:"fixed",left:t.position.clientX+"px",top:t.position.clientY-30+"px"})}(0,t,l.enableExploration?" has-explorer-icon":"");return y=y.append(function(e,t,n,r,o){var i=r.length>25?Object(a.truncate)(r,{length:25}):r;return p('\n      <div class="section-descriptor">\n        <div class="section-color" style="color:'+o+'">\u25cf</div>\n        <div class="value label-section-name">'+i+"</div>\n      </div>\n    ")}(0,0,0,s,c)),l.enableExploration&&(y=y.append(function(e,t,n,r,o,i,a){switch(g.a.shape(o)){case g.a.Shape.Stacked:return function(e,t,n,r,o,i,a){var l=o.marks,s=l.series,c=l.properties,d=s.length?s[0].properties:c,u=(f.a.formatValue(r,o,o.x[0],t.target.x.value),makeExploreItemElem(f.a.formatValue(r,o,d.color.values[0],t.target.series.color.value)).one("click",function(e){a.reportContext&&dispatchAnalyticsEvent(C.a.ClickExploreFromHere,a),i(makeExploreMarkAction(t,{name:d.color.values[0].formula,value:t.target.series.color.value}))}));return e.append(u)}(e,t,0,r,o,i,a);case g.a.Shape.Grouped:return function(e,t,n,r,o,i,a){var l=o.marks,s=l.series,c=l.properties,d=s.length?s[0].properties:c,u=(f.a.formatValue(r,o,o.column[0],t.target.columns[0].value),makeExploreItemElem(f.a.formatValue(r,o,d.color.values[0],t.target.series.color.value)).one("click",function(e){return i(makeExploreMarkAction(t,{name:d.color.values[0].formula,value:t.target.series.color.value}))}));return e.append(u)}(e,t,0,r,o,i);case g.a.Shape.Combo:return function(e,t,n,r,o,i,a){return e}(e);case g.a.Shape.Radial:return function(e,t,n,r,o,i,a){var l=o.marks,s=l.series,c=l.properties,d=s.length?s[0].properties:c,u=makeExploreItemElem(f.a.formatValue(r,o,d.color.values[0],t.target.series.color.value)).one("click",function(e){return i(makeExploreMarkAction(t,{name:d.color.values[0].formula,value:t.target.series.color.value}))});return e.append(u)}(e,t,0,r,o,i)}}(y,t,0,o,i,e,l))),l.preventExpandingInteraction||(y=y.append(function(e,t,n,r){return p('\n      <div class="context-menu-link">\n        <div class="context-menu-label-wrapper">\n          <div class="context-menu-text">View Data...</div>\n        </div>\n      </div>\n    ').one("click",function(n){r.reportContext&&dispatchAnalyticsEvent(C.a.ClickViewData,r),e({target:t.target,type:u.a.ContextItemType.ViewData})})}(e,t,0,l))),!l.enableExploration&&l.preventExpandingInteraction||!d||(y=y.append(p('<div class="section-divider"></div>'))),d&&(y=y.append(function(e,t,n,r,o,i,l,s){var c=function(e,t,n){return f.a.formatTargetValue(e,t,n.target)}(r,o,t),d=c.length>18?Object(a.truncate)(c,{length:18}):c;return p('\n      <div class="context-menu-link '+(l?"disabled":"")+'">\n        <div class="context-menu-label-wrapper">\n          <div class="context-menu-text">\n            Drilldown <div class="value link-section-name">'+d+"</div>"+(l?"":" by ")+'<div class="value time-scale">'+(l?"":i)+"</div>\n          </div>\n        </div>\n      </div>\n    ").one("click",function(n){s.reportContext&&dispatchAnalyticsEvent(C.a.ClickDrilldownInterval,s),e({target:t.target,type:u.a.ContextItemType.Drilldown})})}(e,t,0,o,i,d,h,l))),y}(e,o,0,l,s,c);removeMenu(),function(e){e&&e.options&&(e.tooltip.hide(),e.options.tooltip.enabled=!1)}(i),function(e){null!=n&&removeClickListener(),t=function(t){0===p(t.target).closest("."+r).length&&clear(e)},document.addEventListener("click",t,!0)}(i),function(e){null!=n&&removeScrollListener(),n=function(t){return clear(e)},document.addEventListener("scroll",n,!0)}(i),function(e,t){p(document.body).append(t)}(0,d)}}(r||(r={}));var b,v=n("Z2ya"),I=n("8SPo"),S=n("yfIQ"),w=n("9g1q"),A=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};!function(e){function makeDiscreteLineData(e,t,n,r,o,i,a){var l=new Set,s=new Map,c=new Map,d=n.getResultSet(i.alias).data,u=S.a.makeXValueFormatter(e,t,o,a),p=S.a.makeSeriesNameFormatter(e,t,r,a);d.forEach(function(e,t){var n=p(e[r.alias]),a=s.get(n);void 0===a&&(a=new Array,s.set(n,a));var d=c.get(n);void 0===d&&(d=new Set,c.set(n,d));var h=u(e[o.alias]);l.add(h),d.add(h),a.push(e[i.alias])});for(var h=new Array,g=function(e){var t=s.get(e),n=c.get(e);Array.from(l).forEach(function(e,r){n.has(e)||t.splice(r,0,null)}),h.push({name:e,data:t})},m=0,f=Array.from(s.keys());m<f.length;m++){g(f[m])}return{series:h,seriesType:w.b.SeriesType.LINE,categories:Array.from(l)}}function makeContinuousLineData(e,t,n,r,o,i,a){var l=new Map,s=n.getResultSet(i.alias).data,c=S.a.makeXValueFormatter(e,t,o,a),d=S.a.makeSeriesNameFormatter(e,t,r,a);s.forEach(function(e,t){var n=d(e[r.alias]),a=l.get(n);void 0===a&&(a=new Array,l.set(n,a));var s=c(e[o.alias]);a.push([s,e[i.alias]])});var u=new Array;return l.forEach(function(e,t){u.push({name:t,data:e})}),{series:u,seriesType:w.b.SeriesType.LINE}}function makeDiscreteComboData(e,t,n,r,o,i){var a,l=new Set,s=new Array;return o.forEach(function(o){(a=makeDiscreteLineData(e,t,n,o.groupField,r,o.yField,i)).series.forEach(function(e){s.push({type:o.type,name:o.name,yAxis:o.yAxis,data:e.data})});for(var c=0,d=Array.from(a.categories);c<d.length;c++){var u=d[c];l.add(u)}}),{series:s,seriesType:w.b.SeriesType.LINE,categories:Array.from(l)}}function makeContinuousComboData(e,t,n,r,o,i){var a=new Array;return o.forEach(function(o){makeContinuousLineData(e,t,n,o.groupField,r,o.yField,i).series.forEach(function(e){a.push({type:o.type,name:o.name,yAxis:o.yAxis,data:e.data})})}),{series:a,seriesType:w.b.SeriesType.LINE}}function makeDiscreteBubbleData(e,t,n,r,o,i,a,l){var s=new Set,c=new Map,d=n.getResultSet(i.alias).data,u=S.a.makeXValueFormatter(e,t,o,l),p=S.a.makeSeriesNameFormatter(e,t,r,l);d.forEach(function(e,t){var n=p(e[r.alias]),l=c.get(n);void 0===l&&(l=new Array,c.set(n,l));var d=u(e[o.alias]);s.add(d),l.push({y:e[i.alias],z:e[a.alias],name:d})});for(var h=new Array,g=0,m=Array.from(c.keys());g<m.length;g++){var f=m[g],C=c.get(f);h.push({name:f,data:C})}return{series:h,seriesType:w.b.SeriesType.BUBBLE,categories:Array.from(s)}}function makeContinuousBubbleData(e,t,n,r,o,i,a,l){var s=new Map,c=n.getResultSet(i.alias).data,d=S.a.makeXValueFormatter(e,t,o,l),u=S.a.makeSeriesNameFormatter(e,t,r,l);c.forEach(function(e,t){var n=u(e[r.alias]),l=s.get(n);void 0===l&&(l=new Array,s.set(n,l));var c=d(e[o.alias]);l.push({y:e[i.alias],z:e[a.alias],x:c})});var p=new Array;return s.forEach(function(e,t){p.push({name:t,data:e})}),{series:p,seriesType:w.b.SeriesType.BUBBLE}}e.makeLineData=function(e,t,n,r,o,i,a){switch(o.varType){case l.VariableType.DISCRETE:return makeDiscreteLineData(e,t,n,r,o,i,a);case l.VariableType.CONTINUOUS:return makeContinuousLineData(e,t,n,r,o,i,a)}},e.makeDiscreteLineData=makeDiscreteLineData,e.makeContinuousLineData=makeContinuousLineData,e.makeComboData=function(e,t,n,r,o,i){switch(r.varType){case l.VariableType.DISCRETE:return makeDiscreteComboData(e,t,n,r,o,i);case l.VariableType.CONTINUOUS:return makeContinuousComboData(e,t,n,r,o,i)}},e.makeDiscreteComboData=makeDiscreteComboData,e.makeContinuousComboData=makeContinuousComboData,e.makeBubbleData=function(e,t,n,r,o,i,a,s){switch(o.varType){case l.VariableType.DISCRETE:return makeDiscreteBubbleData(e,t,n,r,o,i,a,s);case l.VariableType.CONTINUOUS:return makeContinuousBubbleData(e,t,n,r,o,i,a,s)}},e.makeDiscreteBubbleData=makeDiscreteBubbleData,e.makeContinuousBubbleData=makeContinuousBubbleData,e.makeNamedPointData=function(e,t,n,r,o,i){var a=new Array,l=n.getResultSet("*").data,s=S.a.makeSeriesNameFormatter(e,t,r,i);return l.forEach(function(e,t){var n=s(e[r.alias]);a.push({name:n,y:e[o.alias]})}),{series:[{name:I.a.makeDefaultFieldName(e,o),data:a,colorByPoint:!0}],seriesType:w.b.SeriesType.NAMED_POINT}},e.makePairedPointData=function(e,t,n,r,o,i){var a=new Set,l=new Array,s=n.getResultSet("*").data,c=S.a.makeSeriesNameFormatter(e,t,r,i);return s.forEach(function(e,t){var n=c(e[r.alias]);a.add(n),l.push([n,e[o.alias]])}),{series:[{name:I.a.makeDefaultFieldName(e,o),data:l}],seriesType:w.b.SeriesType.PAIRED_POINT,categories:Array.from(a)}},e.fetchChartData=function(e,t){return l.PivotBuilder.makePivot(e,t).execute(e)},e.transformNullstoZero=function(e,t){if(t.nullToZero){var n=new Array;return e.series.forEach(function(e,t){n.push(A({},e,{data:e.data.map(function(e){return e||0})}))}),A({},e,{series:n})}return e},e.transformOrphanPoints=function(e){return e===l.VariableType.DISCRETE?function(e,t){return A({},e,{series:e.series.map(function(e){var t=e.data,n=t.map(function(e,n){var r=0===n||null===t[n-1],o=n===t.length-1||null===t[n+1];return r&&o?{y:e,marker:{radius:4}}:e});return A({},e,{data:n})})})}:function(e,t){return A({},e,{series:e.series.map(function(e){var t=e.data,n=t;if(1===t.length){var r=t[0];n=[{x:r[0],y:r[1],marker:{radius:4}}]}return A({},e,{data:n})})})}},e.transformPointInnerSize=function(e,t){switch(e.seriesType){case w.b.SeriesType.PAIRED_POINT:var n=new Array;return e.series.forEach(function(e,t){n.push(A({},e,{innerSize:"50%"}))}),A({},e,{series:n});default:return e}}}(b||(b={}));var M,k=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};!function(e){e.makeChartEvents=function(e,t,n,r){return{click:function(e){r({event:e,target:{id:n},type:u.a.Type.ChartClick})}}},e.makeLineMarkEvents=function(e,t,n,r){var o,i=I.a.makeViewField(e,t.x[0]),a=I.a.makeViewField(e,t.y[0]);return o=t.marks.series[0].properties.color.values.length?I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]):e.buildViewNamesField("Measure Names"),{click:function(e){e.point&&r&&r({event:e,target:{id:n,x:{name:i.name,value:e.point.category},y:{name:a.name,value:e.point.y},series:{name:e.point.series.name,color:{name:o.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.LineChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})},mouseOut:function(e){e.target.chart.tooltip.hide()}}},e.makeGroupedBarMarkEvents=function(e,t,n,r){var o,i=I.a.makeViewField(e,t.x[0]),a=I.a.makeViewField(e,t.y[0]),l=I.a.makeViewField(e,t.column[0]);return o=t.marks.series[0].properties.color.values.length?I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]):e.buildViewNamesField("Measure Names"),{click:function(e){e.point&&r&&r({event:e,target:{id:n,x:{name:i.name,value:e.point.series.name},y:{name:a.name,value:e.point.y},columns:[{name:l.name,value:e.point.category}],series:{name:e.point.series.name,color:{name:o.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.GroupedBarChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})},mouseOver:function(e){e.target.group.element.setAttribute("clip-path","")}}},e.makeStackedBarMarkEvents=function(e,t,n,r){var o,i=I.a.makeViewField(e,t.x[0]),a=I.a.makeViewField(e,t.y[0]);return o=t.marks.series[0].properties.color.values.length?I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]):e.buildViewNamesField("Measure Names"),{click:function(e){e.point&&r&&r({event:e,target:{id:n,x:{name:i.name,value:e.point.category},y:{name:a.name,value:e.point.y},series:{name:e.point.series.name,color:{name:o.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.BarChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})},mouseOver:function(e){e.target.update({zIndex:1}),e.target.group.element.setAttribute("clip-path","")},mouseOut:function(e){e.target.chart.tooltip.options.hideDelay=1,e.target.chart.tooltip.hide(),e.target.points.every(function(e){return"select"!==e.state})&&e.target.update({zIndex:0})}}},e.makeComboMarkEvents=function(e,t,n,r){var o=new Array,i=I.a.makeViewField(e,t.x[0]);return t.marks.series.forEach(function(n){var r,i=I.a.lookupYField(t,n.field),a=I.a.makeViewField(e,i);r=n.properties.color&&n.properties.color.values.length>0?I.a.makeViewField(e,n.properties.color.values[0]):e.buildViewNamesField("Measure Names"),o.push({name:I.a.makeDefaultFieldName(e,a),groupField:r,yField:a})}),{click:function(e){e.point&&r&&r({event:e,target:k({id:n,x:{name:i.name,value:e.point.category}},0===e.point.series.index?{y:{name:o[e.point.series.index].name,value:e.point.y}}:{y2:{name:o[e.point.series.index].name,value:e.point.y}},{series:{name:e.point.series.name,color:{name:o[e.point.series.index].groupField.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.LinePlusBarChart}),position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})},mouseOver:function(e){e.target.group.element.setAttribute("clip-path","")},mouseOut:function(e){e.target.chart.tooltip.options.hideDelay=1,e.target.chart.tooltip.hide()}}},e.makeAreaMarkEvents=function(e,t,n,r){var o,i=I.a.makeViewField(e,t.x[0]),a=I.a.makeViewField(e,t.y[0]);return o=t.marks.series[0].properties.color.values.length?I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]):e.buildViewNamesField("Measure Names"),{click:function(e){e.point&&r&&r({event:e,target:{id:n,x:{name:i.name,value:e.point.category},y:{name:a.name,value:e.point.y},series:{name:e.point.series.name,color:{name:o.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.AreaChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})}}},e.makeTotalAreaMarkEvents=function(e,t,n,r){var o,i=I.a.makeViewField(e,t.x[0]),a=I.a.makeViewField(e,t.y[0]);return o=t.marks.series[0].properties.color.values.length?I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]):e.buildViewNamesField("Measure Names"),{click:function(e){e.point&&r&&r({event:e,target:{id:n,x:{name:i.name,value:e.point.category},y:{name:a.name,value:e.point.y},series:{name:e.point.series.name,color:{name:o.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.TotalAreaChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})}}},e.makeScatterMarkEvents=function(e,t,n,r){var o=I.a.makeViewField(e,t.x[0]),i=I.a.makeViewField(e,t.y[0]),a=I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]);return{click:function(e){e.point&&r&&r({event:e,target:{id:n,x:{name:o.name,value:e.point.category},y:{name:i.name,value:e.point.y},series:{name:e.point.series.name,color:{name:a.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.BubbleChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})}}},e.makeBubbleMarkEvents=function(e,t,n,r){var o=I.a.makeViewField(e,t.x[0]),i=I.a.makeViewField(e,t.y[0]),a=I.a.makeViewField(e,t.marks.series[0].properties.size.values[0]),l=I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]);return{click:function(e){e.point&&r&&r({event:e,target:{id:n,x:{name:o.name,value:e.point.category},y:{name:i.name,value:e.point.y},series:{name:e.point.series.name,size:{name:a.name,size:e.point.marker.radius,value:e.point.z},color:{name:l.name,color:e.point.color,value:e.point.series.name}},type:u.a.TargetType.BubbleChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})}}},e.makePieMarkEvents=function(e,t,n,r){var o=I.a.makeViewField(e,t.marks.properties.color.values[0]),i=I.a.makeViewField(e,t.marks.properties.angle.values[0]);return{click:function(e){e.point&&r&&r({event:e,target:{id:n,series:{name:e.point.series.name,color:{name:o.name,color:e.point.color,value:e.point.name},angle:{name:i.name,angle:e.point.percentage,value:e.point.y}},type:u.a.TargetType.PieChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})}}},e.makeDonutMarkEvents=function(e,t,n,r){var o=I.a.makeViewField(e,t.marks.properties.color.values[0]),i=I.a.makeViewField(e,t.marks.properties.angle.values[0]);return{click:function(e){e.point&&r&&r({event:e,target:{id:n,series:{name:e.point.series.name,color:{name:o.name,color:e.point.color,value:e.point.name},angle:{name:i.name,angle:e.point.percentage,value:e.point.y}},type:u.a.TargetType.DonutChart},position:{clientX:e.clientX,clientY:e.clientY},type:u.a.Type.MarkClick})}}},e.makeStackedBarSelectionEvents=function(){return{select:function(e){var t=e.target.series,n=e.target.shapeArgs,r=n.x+t.group.translateX,o=n.y+t.group.translateY,i=n.width,a=n.height;t.chart.rect=t.chart.renderer.rect(r,o,i,a).attr({"stroke-width":1,zIndex:999,class:"updated-column-mark"}).add()},unselect:function(e){e.target.selected&&(e.target.series.chart.rect.destroy(),delete e.target.series.chart.rect)}}}}(M||(M={}));var T,x=n("ZLRu"),D=n("M/pt");!function(e){function makeLineData(e,t,n){return(e||[]).slice().reduce(function(e,n){return n(e,t)},n)}function makePointData(e,t,n){return(e||[]).slice().reduce(function(e,n){return n(e,t)},n)}function makeChartOptions(e,t,n,r,o,i,a){return[S.a.formatChart,S.a.formatColors,S.a.formatPlotSeries,S.a.formatSeries,S.a.formatTitle].concat(e||[]).reduce(function(e,i){return i(t,n,e,r,o,a)},i)}function initBarChart(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeGroupedBarMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"bar",events:i},plotOptions:{bar:{allowPointSelect:c,cursor:s,events:l,dataLabels:{inside:!1},states:{select:{color:null},hover:{brightness:0,halo:{attributes:{stroke:"black","stroke-width":1}}}}}}},initCartesianTitles(r,x.a.makeGroupedTitles(e,t)))}function initColumnChart(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeGroupedBarMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"column",events:i},plotOptions:{column:{allowPointSelect:c,cursor:s,events:l,dataLabels:{inside:!1},states:{select:{color:null},hover:{brightness:0,halo:{attributes:{stroke:"black","stroke-width":1}}}}}}},initCartesianTitles(r,x.a.makeGroupedTitles(e,t)))}function initStackedBarChart(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeStackedBarMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"bar",events:i},plotOptions:{series:{allowPointSelect:c,stickyTracking:!1},bar:{cursor:s,events:l,stacking:"normal",states:{hover:{brightness:0},select:{color:null}}}}},initCartesianTitles(r,x.a.makeStackedTitles(e,t)))}function initStackedBar100Chart(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeStackedBarMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"bar",events:i},plotOptions:{series:{allowPointSelect:c,stickyTracking:!1},bar:{cursor:s,events:l,stacking:"percent",states:{hover:{brightness:0},select:{color:null}}}}},initCartesianTitles(r,x.a.makeStackedTitles(e,t)))}function initStackedColumnChart(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeStackedBarMarkEvents(e,t,o.chartToken,o.handler),s=M.makeStackedBarSelectionEvents(),c=o.drilldownEnabled?"pointer":void 0,d=o.drilldownEnabled;return Object(a.merge)({chart:{type:"column",events:i},plotOptions:{series:{allowPointSelect:d,stickyTracking:!1},column:{cursor:c,events:l,stacking:"normal",states:{hover:{brightness:0},select:{color:null}},point:{events:s}}}},initCartesianTitles(r,x.a.makeStackedTitles(e,t)))}function initStackedColumn100Chart(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeStackedBarMarkEvents(e,t,o.chartToken,o.handler),s=M.makeStackedBarSelectionEvents(),c=o.drilldownEnabled?"pointer":void 0,d=o.drilldownEnabled;return Object(a.merge)({chart:{type:"column",events:i},plotOptions:{series:{allowPointSelect:d,stickyTracking:!1},column:{cursor:c,events:l,stacking:"percent",states:{hover:{brightness:0},select:{color:null}},point:{events:s}}}},initCartesianTitles(r,x.a.makeStackedTitles(e,t)))}function initPieChart(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makePieMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"pie",events:i},plotOptions:{pie:{allowPointSelect:c,cursor:s,events:l,showInLegend:!0,dataLabels:{distance:10},slicedOffset:0},series:{states:{hover:{brightness:0},select:{fillColor:null}}}}},function(e,t){return{legend:{title:{text:e.legend.titleEnabled?e.legend.title||t.legend:null}}}}(r,x.a.makePieTitles(e,t)))}function initCartesianTitles(e,t){return{xAxis:[{title:{text:e.xAxis.titleEnabled?e.xAxis.title||t.xAxis:null}}],yAxis:[{title:{text:e.yAxis.titleEnabled?e.yAxis.title||t.yAxis:null}}],legend:{title:{text:e.legend.titleEnabled?e.legend.title||t.legend:null}}}}function initStackedData(e,t,n){return prepareStackedData(e,t,b.fetchChartData(e,t),n)}function prepareStackedData(e,t,n,r){var o,i=I.a.makeViewField(e,t.x[0]),a=I.a.makeViewField(e,t.y[0]);return o=t.marks.series[0].properties.color.values.length?I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]):e.buildViewNamesField("Measure Names"),b.makeLineData(e,t,n,o,i,a,r)}function prepareBubbleData(e,t,n,r){var o=I.a.makeViewField(e,t.x[0]),i=I.a.makeViewField(e,t.y[0]),a=I.a.makeViewField(e,t.marks.series[0].properties.size.values[0]),l=I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]);return b.makeBubbleData(e,t,n,l,o,i,a,r)}function preparePieData(e,t,n,r){var o=I.a.makeViewField(e,t.marks.properties.color.values[0]),i=I.a.makeViewField(e,t.marks.properties.angle.values[0]);return b.makeNamedPointData(e,t,n,o,i,r)}function prepareDonutData(e,t,n,r){var o=I.a.makeViewField(e,t.marks.properties.color.values[0]),i=I.a.makeViewField(e,t.marks.properties.angle.values[0]);return b.makePairedPointData(e,t,n,o,i,r)}e.renderGroupedBarChart=function(e,t,n,r,o,i){var a=n||D.a,l=makeLineData([b.transformNullstoZero],a,function(e,t,n){return function(e,t,n,r){I.a.makeViewField(e,t.x[0]);var o,i=I.a.makeViewField(e,t.y[0]),a=I.a.makeViewField(e,t.column[0]);return o=t.marks.series[0].properties.color.values.length?I.a.makeViewField(e,t.marks.series[0].properties.color.values[0]):e.buildViewNamesField("Measure Names"),b.makeLineData(e,t,n,o,a,i,r)}(e,t,b.fetchChartData(e,t),n)}(e,t,a)),s=o?initBarChart:initColumnChart,c=makeChartOptions([S.a.formatXAxis,S.a.formatYAxis,S.a.formatLegend,S.a.formatIndividualTooltipContent,S.a.formatPlotSeriesDataLabels],e,t,l,a,s(e,t,l,a,i),i);return v.chart(r,c)},e.renderStackedBarChart=function(e,t,n,r,o,i,a){var l=n||D.a,s=makeLineData([b.transformNullstoZero],l,initStackedData(e,t,l)),c=i?initStackedColumn100Chart:initStackedColumnChart;o&&(c=i?initStackedBar100Chart:initStackedBarChart);var d=makeChartOptions([S.a.formatXAxis,S.a.formatStackedBarXAxisPadding,S.a.formatStackedYAxis,S.a.formatLegend,S.a.formatSharedTooltips,S.a.formatTotalAreaTooltipContent],e,t,s,l,c(e,t,s,l,a),a);return v.chart(r,d)},e.renderComboChart=function(e,t,n,r,o){var i=n||D.a,s=makeLineData([b.transformNullstoZero],i,function(e,t,n){return function(e,t,n,r){var o=new Array;t.marks.series.forEach(function(n,r){var i,a,s=I.a.lookupYField(t,n.field),c=I.a.makeViewField(e,s);switch(i=n.properties.color&&n.properties.color.values.length>0?I.a.makeViewField(e,n.properties.color.values[0]):e.buildViewNamesField("Measure Names"),n.properties.type.value){case l.MarkType.Bar:a="column";break;case l.MarkType.Line:a="line";break;case l.MarkType.Area:a="area";break;default:a="line"}o.push({type:a,name:I.a.makeDefaultFieldName(e,c),groupField:i,yField:c,yAxis:r})});var i=I.a.makeViewField(e,t.x[0]);return b.makeComboData(e,t,n,i,o,r)}(e,t,b.fetchChartData(e,t),n)}(e,t,i)),c=makeChartOptions([S.a.formatXAxis,S.a.formatComboYAxis,S.a.formatLegend,S.a.formatSharedTooltips,S.a.formatSharedTooltipContent],e,t,s,i,function(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeComboMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{events:i},plotOptions:{line:{cursor:s,events:l,marker:{enabled:!0,fillColor:null,lineColor:null,radius:.1,symbol:"circle",states:{hover:{lineWidth:.5,lineColor:"black",radius:6},select:{fillColor:null,lineWidth:.5,radius:6}}}},column:{cursor:s,events:l,states:{hover:{borderColor:"black",brightness:0},select:{color:null}}},series:{allowPointSelect:c,stickyTracking:!1}}},function(e,t){return{xAxis:[{title:{text:e.xAxis.titleEnabled?e.xAxis.title||t.xAxis:null}}],yAxis:[{title:{text:e.yAxis.titleEnabled?e.yAxis.title||t.yAxis:null}},{title:{text:e.y2Axis.titleEnabled?e.y2Axis.title||t.y2Axis:null}}],legend:{title:{text:e.legend.titleEnabled?e.legend.title||t.legend:null}}}}(r,x.a.makeComboTitles(e,t)))}(e,t,0,i,o),o);return v.chart(r,c)},e.renderLineChart=function(e,t,n,r,o){var i=n||D.a,l=makeLineData([b.transformNullstoZero,b.transformOrphanPoints(t.x[0].variable.type)],i,initStackedData(e,t,i)),s=makeChartOptions([S.a.formatXAxis,S.a.formatYAxis,S.a.formatLegend,S.a.formatSharedTooltips,S.a.formatSharedTooltipContent],e,t,l,i,function(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeLineMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"line",events:i},plotOptions:{line:{allowPointSelect:c,cursor:s,events:l,marker:{enabled:!0,fillColor:null,radius:.1,symbol:"circle",states:{hover:{lineWidth:.5,radius:6,lineColor:null},select:{fillColor:null,lineWidth:.5,radius:6}}}},series:{stickyTracking:!1}}},initCartesianTitles(r,x.a.makeStackedTitles(e,t)))}(e,t,0,i,o),o);return v.chart(r,s)},e.renderAreaChart=function(e,t,n,r,o){var i=n||D.a,l=makeLineData([b.transformNullstoZero],i,initStackedData(e,t,i)),s=makeChartOptions([S.a.formatXAxis,S.a.formatYAxis,S.a.formatLegend,S.a.formatSharedTooltips,S.a.formatAreaTooltipContent],e,t,l,i,function(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeAreaMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"area",events:i},plotOptions:{area:{allowPointSelect:c,cursor:s,events:l,lineWidth:.5,stacking:"normal",marker:{enabled:!0,fillColor:null,lineColor:null,radius:.1,symbol:"circle",states:{hover:{lineWidth:.5,lineColor:"black",radius:6},select:{fillColor:null,lineWidth:.5,radius:6}}},stickyTracking:!1,trackByArea:!0}}},initCartesianTitles(r,x.a.makeStackedTitles(e,t)))}(e,t,0,i,o),o);return v.chart(r,s)},e.renderTotalAreaChart=function(e,t,n,r,o){var i=n||D.a,l=makeLineData([b.transformNullstoZero],i,initStackedData(e,t,i)),s=makeChartOptions([S.a.formatXAxis,S.a.formatTotalAreaYAxis,S.a.formatLegend,S.a.formatSharedTooltips,S.a.formatTotalAreaTooltipContent],e,t,l,i,function(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeTotalAreaMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"area",events:i},plotOptions:{area:{allowPointSelect:c,cursor:s,events:l,lineWidth:.5,stacking:"percent",marker:{enabled:!0,fillColor:null,lineColor:null,radius:.1,symbol:"circle",states:{hover:{lineWidth:.5,lineColor:"black",radius:6},select:{fillColor:null,lineWidth:.5,radius:6}}},stickyTracking:!1,trackByArea:!0}}},initCartesianTitles(r,x.a.makeStackedTitles(e,t)))}(e,t,0,i,o),o);return v.chart(r,s)},e.renderScatterChart=function(e,t,n,r,o){var i=n||D.a,l=makeLineData([b.transformNullstoZero],i,initStackedData(e,t,i)),s=makeChartOptions([S.a.formatXAxis,S.a.formatYAxis,S.a.formatLegend,S.a.formatIndividualTooltipContent],e,t,l,i,function(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeScatterMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"scatter",events:i},plotOptions:{scatter:{cursor:s,events:l,marker:{symbol:"circle",states:{hover:{lineWidth:1},select:{enabled:!0,fillColor:null,lineWidth:1,radius:6}}}},series:{allowPointSelect:c,stickyTracking:!1}}},initCartesianTitles(r,x.a.makeScatterTitles(e,t)))}(e,t,0,i,o),o);return v.chart(r,s)},e.renderBubbleChart=function(e,t,n,r,o){var i=n||D.a,l=function(e,t,n){return(e||[]).slice().reduce(function(e,n){return n(e,t)},n)}([],i,function(e,t,n){return prepareBubbleData(e,t,b.fetchChartData(e,t),n)}(e,t,i)),s=makeChartOptions([S.a.formatXAxis,S.a.formatYAxis,S.a.formatLegend,S.a.formatIndividualTooltipContent],e,t,l,i,function(e,t,n,r,o){var i=M.makeChartEvents(e,t,o.chartToken,o.handler),l=M.makeBubbleMarkEvents(e,t,o.chartToken,o.handler),s=o.drilldownEnabled?"pointer":void 0,c=o.drilldownEnabled;return Object(a.merge)({chart:{type:"bubble",events:i},plotOptions:{bubble:{cursor:s,allowPointSelect:c,events:l,marker:{states:{hover:{lineWidth:1},select:{enabled:!0,fillColor:null,lineWidth:1}}}}}},initCartesianTitles(r,x.a.makeScatterTitles(e,t)))}(e,t,0,i,o),o);return v.chart(r,s)},e.renderPieChart=function(e,t,n,r,o){var i=n||D.a,a=makePointData([],i,function(e,t,n){return preparePieData(e,t,b.fetchChartData(e,t),n)}(e,t,i)),l=makeChartOptions([S.a.formatPieLegend,S.a.formatPieTooltipContent,S.a.formatPlotSeriesDataLabels,S.a.formatPieDataLabels,S.a.formatPieSize],e,t,a,i,initPieChart(e,t,a,i,o),o);return v.chart(r,l)},e.renderDonutChart=function(e,t,n,r,o){var i=n||D.a,a=makePointData([b.transformPointInnerSize],i,function(e,t,n){return prepareDonutData(e,t,b.fetchChartData(e,t),n)}(e,t,i)),l=makeChartOptions([S.a.formatPieLegend,S.a.formatPieTooltipContent,S.a.formatPlotSeriesDataLabels,S.a.formatPieDataLabels,S.a.formatPieSize],e,t,a,i,initPieChart(e,t,a,i,o),o);return v.chart(r,l)},e.prepareStackedData=prepareStackedData,e.prepareBubbleData=prepareBubbleData,e.preparePieData=preparePieData,e.prepareDonutData=prepareDonutData}(T||(T={}));var L,R=n("7n0L"),N=n("yqn6"),E=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};!function(e){e.designer="designer",e.report="report"}(L||(L={}));var j={bindings:{chartId:"<",chartType:"<",renderContext:"@",drilldownEnabled:"<",model:"<",relName:"<",chartModel:"<",encoding:"<",format:"<",isWhiteLabel:"<",onEmbedAction:"&",renderStart:"&",renderEnd:"&",preventExpandingInteraction:"<?"},controller:function(){function ChartRendererController(e,t,n,r,o){this.$element=e,this.$window=t,this.reportApiService=n,this.flipperService=r,this.Utils=o;var i=$("meta[name=report-owner-username]").attr("content"),a=$("meta[name=owner-username]").attr("content"),l=o.locationSearchLookup(this.$window.location.search,"report_owner_username");this.enableContextExploration=r.enabled(s.a.Type.TheMalteseFalcon9)||r.enabled(s.a.Type.TheMalteseFalcon9,i||a||l)}return ChartRendererController.prototype.$onInit=function(){this.renderContext=this.renderContext||L.report,this.enableContextExploration=this.enableContextExploration&&this.renderContext===L.report&&!this.isWhiteLabel,this.hideContextMenu=this.isWhiteLabel&&("donut"===this.chartType||"pie"===this.chartType)},ChartRendererController.prototype.$onChanges=function(e){var t=null!=e.model,n=e.encoding&&!o.equals(e.encoding.currentValue,e.encoding.previousValue),r=e.format&&!o.equals(e.format.currentValue,e.format.previousValue),i=null!=e.chartType;this.chartModel&&this.encoding&&(t||n||r||i)&&this.render()},ChartRendererController.prototype.$onDestroy=function(){this.subscription&&this.subscription.unsubscribe()},ChartRendererController.prototype.render=function(){var e=this;this.hasInvalidFields=!1,this.hasIncompleteEncoding=!1,this.renderStart(),this.$element.find(".chart-svg").html("");var t=Object(d.p)(this.encoding,this.chartModel);if(t.length)return console.log(t),this.hasInvalidFields=!0,void this.renderEnd();if(!Object(d.g)(this.encoding,this.chartType))return console.log("Chart encoding is incomplete"),this.hasIncompleteEncoding=!0,void this.renderEnd();i.selectAll(this.$element.find("svg > *").toArray()).remove();var n=!1,o=!1,s=!1,c=l.MarkType.Line;c=this.encoding.marks.series.length>0?this.encoding.marks.series[0].properties.type.value:this.encoding.marks.properties.type.value;var p=Object(N.m)(this.encoding);p.x.length>0&&p.x[0].formula===l.SystemFieldName.NAMES&&(n=!0),p.marks.series.length&&p.marks.series[0].properties.size.values.length&&(o=!0),p.marks.series.length>1&&(s=!0);var h=null,g=this.$element.find(".chart-svg")[0],m=this.format||D.a,f={palette:Object(d.b)(m),containerHeight:this.$element.height(),chartToken:this.chartId.replace(/^[\w]+\_/,""),handler:function(t){e.reportApiService.dispatch(e.chartId,t)},drilldownEnabled:this.drilldownEnabled};switch(c!==l.MarkType.Pie&&c!==l.MarkType.Donut||this.renderContext!==L.designer||(f=E({},f,{size:"medium"})),c){case l.MarkType.Bar:if(s)h=T.renderComboChart(this.chartModel,p,m,g,f);else if(n)h=T.renderGroupedBarChart(this.chartModel,p,m,g,"hBar"===this.chartType,f);else{var y="hStackedBar"===this.chartType||"hStackedBar100"===this.chartType,b="hStackedBar100"===this.chartType||"stackedBar100"===this.chartType;h=T.renderStackedBarChart(this.chartModel,p,m,g,y,b,f)}break;default:case l.MarkType.Line:h=T.renderLineChart(this.chartModel,p,m,g,f);break;case l.MarkType.Area:h=T.renderAreaChart(this.chartModel,p,m,g,f);break;case l.MarkType.TotalArea:h=T.renderTotalAreaChart(this.chartModel,p,m,g,f);break;case l.MarkType.Circle:h=o?T.renderBubbleChart(this.chartModel,p,m,g,f):T.renderScatterChart(this.chartModel,p,m,g,f);break;case l.MarkType.Pie:h=T.renderPieChart(this.chartModel,p,m,g,f);break;case l.MarkType.Donut:h=T.renderDonutChart(this.chartModel,p,m,g,f)}return this.subscription&&this.subscription.unsubscribe(),this.subscription=this.reportApiService.subscribe(this.chartId,function(t){switch(t.type){case u.a.Type.MarkClick:if(e.drilldownEnabled){var n=t.event.point,o=n.x,i=n.y;if(e.currentContextMenuX===o&&e.currentContextMenuY===i)return r.clear(h),e.currentContextMenuX=null,void(e.currentContextMenuY=null);e.currentContextMenuX=o,e.currentContextMenuY=i;var l=r.options({enableExploration:e.enableContextExploration,preventExpandingInteraction:e.preventExpandingInteraction}),s=void 0;if(e.renderContext===L.report){var c=e.getContextMenuAnalyticsOptions();e.onEmbedAction({$action:{type:C.a.ClickChartMark,chartToken:R.a.tokenFromVizID(e.chartId),props:c}}),s={analyticsProps:c,boundOnEmbedAction:e.onEmbedAction.bind(e),generateUUID:e.Utils.generateUUID,chartToken:R.a.tokenFromVizID(e.chartId),reportContext:!0},l=Object(a.assign)(l,s)}e.hideContextMenu||r.show(function(t){e.reportApiService.dispatch(e.chartId,{item:t,type:u.a.Type.ContextClick})},t,h,e.chartModel,p,l)}break;case u.a.Type.ChartClick:e.currentContextMenuX=null,e.currentContextMenuY=null,r.clear(h);break;case u.a.Type.AxisClick:case u.a.Type.HeaderClick:break;case u.a.Type.ContextClick:switch(t.item.type){case u.a.ContextItemType.ExploreMark:r.clear(h),e.onEmbedAction({$action:{type:C.a.ExploreChartMark,target:t.item.target,filters:t.item.filters,chartToken:e.chartId.replace("chart_","")}});break;case u.a.ContextItemType.Drilldown:r.clear(h),e.onEmbedAction({$action:{type:C.a.DrillDown,target:t.item.target,chartToken:e.chartId.replace("chart_","")}});break;case u.a.ContextItemType.Keep:case u.a.ContextItemType.Exclude:case u.a.ContextItemType.ViewData:r.clear(h)}}}),this.renderEnd(),h},ChartRendererController.prototype.getContextMenuAnalyticsOptions=function(){return{event_id:this.Utils.generateUUID(),product_context:c.a.Context.Report,sub_context:c.a.SubContext.Chart,chart_id:this.chartId,chart_type:this.chartType}},ChartRendererController.$inject=["$element","$window","ReportApiService","DataLayerFlipperService","Utils"],ChartRendererController}(),controllerAs:"ctrl",template:'<div class="chart-svg render-zone"></div>'};o.module("mode.components").component("chartRenderer",j)},EABs:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"k",function(){return a}),n.d(t,"h",function(){return l}),n.d(t,"j",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"e",function(){return p}),n.d(t,"i",function(){return h});var r={SelectDefinition:"SELECT_DEFINITION",SelectDataSource:"SELECT_DATA_SOURCE",RunDefinition:"RUN_DEFINITION",RunDefinitionFulfilled:"RUN_DEFINITION_FULFILLED",ShowSQL:"SHOW_SQL",SetView:"SET_VIEW",ToggleSidebar:"TOGGLE_SIDEBAR",ToggleSecondarySidebar:"TOGGLE_SECONDARY_SIDEBAR",ToggleVerticalMode:"TOGGLE_VERTICAL_MODE",SetVerticalMode:"SET_VERTICAL_MODE",MaximizeTop:"MINIMIZE_TOP",MinimizeTop:"MAXIMIZE_TOP",MaximizeBottom:"MINIMIZE_BOTTOM",MinimizeBottom:"MAXIMIZE_BOTTOM",SelectSecondaryTab:"SELECT_SECONDARY_TAB",ReportRunDataLoaded:"REPORT_RUN_DATA_LOADED"},o=function(){return{type:r.RunDefinition}},i=function(e,t){return{type:r.RunDefinitionFulfilled,canceled:e,failed:t}},a=function(){return{type:r.ToggleVerticalMode}},l=function(e){return{type:r.SelectDefinition,definition:e}},s=function(){return{type:r.ToggleSidebar}},c=function(){return{type:r.MaximizeBottom}},d=function(){return{type:r.MinimizeBottom}},u=function(){return{type:r.MaximizeTop}},p=function(){return{type:r.MinimizeTop}},h=function(e){return{type:r.SelectSecondaryTab,tab:e}}},EBwt:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzcycHgiIGhlaWdodD0iMTA2cHgiIHZpZXdCb3g9IjAgMCAzNzIgMTA2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZW1wdHktZ3JhcGhpY19zY2F0dGVyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMSIgeD0iMCIgeT0iNCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjEwMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMCwxLjk5NDA2MDI4IEMwLDAuODkyNzcxMTk2IDAuOTA0NzI0MTIxLDAgMi4wMDMyOTg2MywwIEw2MS45OTY3MDE0LDAgQzYzLjEwMzA5MjcsMCA2NCwwLjg5NDUxMzc1NiA2NCwxLjk5NDA2MDI4IEw2NCwxNiBMMCwxNiBMMCwxLjk5NDA2MDI4IFoiIGlkPSJwYXRoLTIiPjwvcGF0aD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0zIiB4PSIwIiB5PSIzNiIgd2lkdGg9IjY0IiBoZWlnaHQ9IjE2Ij48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtNCIgeD0iMCIgeT0iNzIiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTUiIHg9IjYiIHk9IjIwIiB3aWR0aD0iNTIiIGhlaWdodD0iMTIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtNiIgeD0iMCIgeT0iNCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjEwMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMCwxLjk5NDA2MDI4IEMwLDAuODkyNzcxMTk2IDAuOTA0NzI0MTIxLDAgMi4wMDMyOTg2MywwIEw2MS45OTY3MDE0LDAgQzYzLjEwMzA5MjcsMCA2NCwwLjg5NDUxMzc1NiA2NCwxLjk5NDA2MDI4IEw2NCwxNiBMMCwxNiBMMCwxLjk5NDA2MDI4IFoiIGlkPSJwYXRoLTciPjwvcGF0aD4KICAgICAgICA8cmVjdCBpZD0icGF0aC04IiB4PSIwIiB5PSIzNiIgd2lkdGg9IjY0IiBoZWlnaHQ9IjE2Ij48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtOSIgeD0iMCIgeT0iNzIiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEwIiB4PSI2IiB5PSIyMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTExIiB4PSIwIiB5PSIwIiB3aWR0aD0iNTIiIGhlaWdodD0iMTIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMTIiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cGF0aCBkPSJNMjMxLDg5IEwyMzEsOTIuOTkwNzQ1NSBDMjMxLDk0LjY1MjcxMDkgMjMyLjA3MTkyNyw5NS4xOTYwNTUxIDIzMy4zOTYwOTUsOTQuMjAyOTI4OSBMMjM1LDkzIEwyMzcsOTcgTDIzOSw5NiBMMjM3LDkyIEwyMzkuMDYyNTU5LDkxLjU4NzQ4ODMgQzI0MC42ODQ4NjMsOTEuMjYzMDI3NSAyNDAuOTUxODM2LDkwLjE2MTQ2ODkgMjM5LjY2MTAzNCw4OS4xMjg4MjY5IEwyMzcsODcgTDIzMy4zMDI1OTcsODMuOTE4ODMwOSBDMjMyLjAzMDkwOCw4Mi44NTkwODk4IDIzMSw4My4zNDk2NzA0IDIzMSw4NS4wMDkyNTQ1IEwyMzEsODkgWiIgaWQ9InBhdGgtMTMiPjwvcGF0aD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xNCIgeD0iMTYwIiB5PSI1NiIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgPC9kZWZzPgogICAgPGcgaWQ9ImNoYXJ0LWVkaXRvciIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImVtcHR5LXNjYXR0ZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMzkuMDAwMDAwLCAtMTM4LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iZW1wdHktZ3JhcGhpY19zY2F0dGVyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMzkuMDAwMDAwLCAxMzguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTYiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHkiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktMyIgZmlsbD0iI0ZGRkZGRiIgeD0iMCIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktNCIgZmlsbD0iI0ZGRkZGRiIgeD0iMjI4IiB5PSIxMiIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS0yIiBmaWxsPSIjRjdGN0Y5IiB4PSIxMzEiIHk9IjI0IiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOCIgZmlsbD0iI0Y3RjdGOSIgeD0iMTE5IiB5PSIwIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9InBlcmZvcm1hbmNlLXRhYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI1IiB3aWR0aD0iNjIiIGhlaWdodD0iMTAwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTYzLDE1IEwxLDE1IEwxLDEuOTk0MDYwMjggQzEsMS40NDkzNzk4MiAxLjQ1MjY3ODU3LDEgMi4wMDMyOTg2MywxIEw2MS45OTY3MDE0LDEgQzYyLjU1MTEwMTMsMSA2MywxLjQ0NzA5ODMxIDYzLDEuOTk0MDYwMjggTDYzLDE1IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5LTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0zIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iMzciIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHktNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTQiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI3MyIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0xNC1Db3B5LTciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjQ0FGMEY5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTUiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3Qgc3Ryb2tlPSIjODlEQUVEIiBzdHJva2Utd2lkdGg9IjIiIHg9IjciIHk9IjIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPHRleHQgaWQ9IngtYXhpcyIgZm9udC1mYW1pbHk9IkdyYXBoaWstQm9sZCwgR3JhcGhpayIgZm9udC1zaXplPSI4IiBmb250LXdlaWdodD0iYm9sZCIgbGV0dGVyLXNwYWNpbmc9IjAuNTMzMzMzMzYxIiBmaWxsPSIjQjFCMkJBIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRzcGFuIHg9IjE2MS42OCIgeT0iMTEiPngtYXhpczwvdHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICAgICAgICAgIDx0ZXh0IGlkPSJ5LWF4aXMiIGZvbnQtZmFtaWx5PSJHcmFwaGlrLUJvbGQsIEdyYXBoaWsiIGZvbnQtc2l6ZT0iOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxldHRlci1zcGFjaW5nPSIwLjUzMzMzMzM2MSIgZmlsbD0iI0IxQjJCQSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIxNjEuMTY0IiB5PSI0NyI+eS1heGlzPC90c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTYiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHkiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktMyIgZmlsbD0iI0ZGRkZGRiIgeD0iMCIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktNCIgZmlsbD0iI0ZGRkZGRiIgeD0iMjI4IiB5PSIxMiIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS0yIiBmaWxsPSIjRjdGN0Y5IiB4PSIxMzEiIHk9IjI0IiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOCIgZmlsbD0iI0Y3RjdGOSIgeD0iMTE5IiB5PSIwIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9InBlcmZvcm1hbmNlLXRhYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTYiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI1IiB3aWR0aD0iNjIiIGhlaWdodD0iMTAwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC03Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTYzLDE1IEwxLDE1IEwxLDEuOTk0MDYwMjggQzEsMS40NDkzNzk4MiAxLjQ1MjY3ODU3LDEgMi4wMDMyOTg2MywxIEw2MS45OTY3MDE0LDEgQzYyLjU1MTEwMTMsMSA2MywxLjQ0NzA5ODMxIDYzLDEuOTk0MDYwMjggTDYzLDE1IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5LTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC04Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iMzciIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHktNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTkiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI3MyIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0xNC1Db3B5LTciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjREFFREUwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEwIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSI3IiB5PSIyMSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTkuNDEyLDExIEwxNjEuMTgsOC4wNTYgTDE1OS41NDgsNS4yOCBMMTYxLjQxMiw1LjI4IEwxNjIuMzA4LDYuOTg0IEwxNjMuMTg4LDUuMjggTDE2NC44NjgsNS4yOCBMMTYzLjMzMiw4IEwxNjUuMSwxMSBMMTYzLjIyOCwxMSBMMTYyLjE2NCw5LjAzMiBMMTYxLjEsMTEgTDE1OS40MTIsMTEgWiBNMTY1LjYxNzMzMyw4Ljk2IEwxNjUuNjE3MzMzLDcuODI0IEwxNjguMDQxMzMzLDcuODI0IEwxNjguMDQxMzMzLDguOTYgTDE2NS42MTczMzMsOC45NiBaIE0xNjguNzY2NjY3LDExIEwxNzAuNTk4NjY3LDUuMjggTDE3Mi43MTg2NjcsNS4yOCBMMTc0LjUzNDY2NywxMSBMMTcyLjc5ODY2NywxMSBMMTcyLjQ5NDY2Nyw5LjkzNiBMMTcwLjU5ODY2Nyw5LjkzNiBMMTcwLjI5NDY2NywxMSBMMTY4Ljc2NjY2NywxMSBaIE0xNzEuNTUwNjY3LDYuNjA4IEwxNzAuOTE4NjY3LDguODA4IEwxNzIuMTc0NjY3LDguODA4IEwxNzEuNTUwNjY3LDYuNjA4IFogTTE3NS4zMDgsMTEgTDE3Ny4wNzYsOC4wNTYgTDE3NS40NDQsNS4yOCBMMTc3LjMwOCw1LjI4IEwxNzguMjA0LDYuOTg0IEwxNzkuMDg0LDUuMjggTDE4MC43NjQsNS4yOCBMMTc5LjIyOCw4IEwxODAuOTk2LDExIEwxNzkuMTI0LDExIEwxNzguMDYsOS4wMzIgTDE3Ni45OTYsMTEgTDE3NS4zMDgsMTEgWiBNMTgyLjI4OTMzMywxMSBMMTgyLjI4OTMzMyw1LjI4IEwxODMuOTQ1MzMzLDUuMjggTDE4My45NDUzMzMsMTEgTDE4Mi4yODkzMzMsMTEgWiBNMTg3LjcwMjY2NywxMS4wOTYgQzE4Ni45MDc5OTYsMTEuMDk2IDE4Ni4zMDUzMzUsMTAuOTMzMzM1IDE4NS44OTQ2NjcsMTAuNjA4IEMxODUuNDgzOTk4LDEwLjI4MjY2NSAxODUuMjY1MzM0LDkuODA4MDAzMTIgMTg1LjIzODY2Nyw5LjE4NCBMMTg2Ljc5ODY2Nyw5LjE4NCBDMTg2LjgyLDkuNDE4NjY3ODQgMTg2Ljg5NzMzMyw5LjYwMTMzMjY4IDE4Ny4wMzA2NjcsOS43MzIgQzE4Ny4xNjQwMDEsOS44NjI2NjczMiAxODcuMzg3OTk4LDkuOTI4IDE4Ny43MDI2NjcsOS45MjggQzE4Ny45MzIwMDEsOS45MjggMTg4LjExMTk5OSw5Ljg3NjAwMDUyIDE4OC4yNDI2NjcsOS43NzIgQzE4OC4zNzMzMzQsOS42Njc5OTk0OCAxODguNDM4NjY3LDkuNTMwNjY3NTIgMTg4LjQzODY2Nyw5LjM2IEMxODguNDM4NjY3LDkuMTg5MzMyNDggMTg4LjM3NzMzNCw5LjA2ODAwMDM2IDE4OC4yNTQ2NjcsOC45OTYgQzE4OC4xMzE5OTksOC45MjM5OTk2NCAxODcuODkyMDAyLDguODYxMzMzNiAxODcuNTM0NjY3LDguODA4IEMxODYuNzI5MzI5LDguNzExOTk5NTIgMTg2LjE2ODAwMiw4LjUyOTMzNDY4IDE4NS44NTA2NjcsOC4yNiBDMTg1LjUzMzMzMiw3Ljk5MDY2NTMyIDE4NS4zNzQ2NjcsNy41NjUzMzYyNCAxODUuMzc0NjY3LDYuOTg0IEMxODUuMzc0NjY3LDYuNDYxMzMwNzIgMTg1LjU3NTk5OCw2LjAzMzMzNSAxODUuOTc4NjY3LDUuNyBDMTg2LjM4MTMzNSw1LjM2NjY2NSAxODYuOTE4NjYzLDUuMiAxODcuNTkwNjY3LDUuMiBDMTg4Ljk5MzM0LDUuMiAxODkuNzQ1MzMzLDUuNzk0NjYwNzIgMTg5Ljg0NjY2Nyw2Ljk4NCBMMTg4LjMyNjY2Nyw2Ljk4NCBDMTg4LjI2OCw2LjU3MzMzMTI4IDE4OC4wMjI2NjksNi4zNjggMTg3LjU5MDY2Nyw2LjM2OCBDMTg3LjM3NzMzMiw2LjM2OCAxODcuMjEzMzM0LDYuNDExOTk5NTYgMTg3LjA5ODY2Nyw2LjUgQzE4Ni45ODM5OTksNi41ODgwMDA0NCAxODYuOTI2NjY3LDYuNzA2NjY1OTIgMTg2LjkyNjY2Nyw2Ljg1NiBDMTg2LjkyNjY2Nyw3LjAyMTMzNDE2IDE4Ni45ODc5OTksNy4xNDM5OTk2IDE4Ny4xMTA2NjcsNy4yMjQgQzE4Ny4yMzMzMzQsNy4zMDQwMDA0IDE4Ny40Njc5OTgsNy4zNjc5OTk3NiAxODcuODE0NjY3LDcuNDE2IEMxODguNTgyNjcxLDcuNTAxMzMzNzYgMTg5LjEzOTk5OCw3LjY3MDY2NTQgMTg5LjQ4NjY2Nyw3LjkyNCBDMTg5LjgzMzMzNSw4LjE3NzMzNDYgMTkwLjAwNjY2Nyw4LjU5OTk5NzA0IDE5MC4wMDY2NjcsOS4xOTIgQzE5MC4wMDY2NjcsOS43MzYwMDI3MiAxODkuODAxMzM1LDEwLjE4OTMzMTUgMTg5LjM5MDY2NywxMC41NTIgQzE4OC45Nzk5OTgsMTAuOTE0NjY4NSAxODguNDE3MzM3LDExLjA5NiAxODcuNzAyNjY3LDExLjA5NiBaIiBpZD0ieC1heGlzIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2MS45OTYsNDcgTDE2MS45OTYsNDQuNTUyIEwxNjAuMTMyLDQxLjI4IEwxNjEuOTE2LDQxLjI4IEwxNjIuODg0LDQzLjIwOCBMMTYzLjg1Miw0MS4yOCBMMTY1LjQyLDQxLjI4IEwxNjMuNjQ0LDQ0LjU1MiBMMTYzLjY0NCw0NyBMMTYxLjk5Niw0NyBaIE0xNjUuNzg1MzMzLDQ0Ljk2IEwxNjUuNzg1MzMzLDQzLjgyNCBMMTY4LjIwOTMzMyw0My44MjQgTDE2OC4yMDkzMzMsNDQuOTYgTDE2NS43ODUzMzMsNDQuOTYgWiBNMTY4LjkzNDY2Nyw0NyBMMTcwLjc2NjY2Nyw0MS4yOCBMMTcyLjg4NjY2Nyw0MS4yOCBMMTc0LjcwMjY2Nyw0NyBMMTcyLjk2NjY2Nyw0NyBMMTcyLjY2MjY2Nyw0NS45MzYgTDE3MC43NjY2NjcsNDUuOTM2IEwxNzAuNDYyNjY3LDQ3IEwxNjguOTM0NjY3LDQ3IFogTTE3MS43MTg2NjcsNDIuNjA4IEwxNzEuMDg2NjY3LDQ0LjgwOCBMMTcyLjM0MjY2Nyw0NC44MDggTDE3MS43MTg2NjcsNDIuNjA4IFogTTE3NS40NzYsNDcgTDE3Ny4yNDQsNDQuMDU2IEwxNzUuNjEyLDQxLjI4IEwxNzcuNDc2LDQxLjI4IEwxNzguMzcyLDQyLjk4NCBMMTc5LjI1Miw0MS4yOCBMMTgwLjkzMiw0MS4yOCBMMTc5LjM5Niw0NCBMMTgxLjE2NCw0NyBMMTc5LjI5Miw0NyBMMTc4LjIyOCw0NS4wMzIgTDE3Ny4xNjQsNDcgTDE3NS40NzYsNDcgWiBNMTgyLjQ1NzMzMyw0NyBMMTgyLjQ1NzMzMyw0MS4yOCBMMTg0LjExMzMzMyw0MS4yOCBMMTg0LjExMzMzMyw0NyBMMTgyLjQ1NzMzMyw0NyBaIE0xODcuODcwNjY3LDQ3LjA5NiBDMTg3LjA3NTk5Niw0Ny4wOTYgMTg2LjQ3MzMzNSw0Ni45MzMzMzUgMTg2LjA2MjY2Nyw0Ni42MDggQzE4NS42NTE5OTgsNDYuMjgyNjY1IDE4NS40MzMzMzQsNDUuODA4MDAzMSAxODUuNDA2NjY3LDQ1LjE4NCBMMTg2Ljk2NjY2Nyw0NS4xODQgQzE4Ni45ODgsNDUuNDE4NjY3OCAxODcuMDY1MzMzLDQ1LjYwMTMzMjcgMTg3LjE5ODY2Nyw0NS43MzIgQzE4Ny4zMzIwMDEsNDUuODYyNjY3MyAxODcuNTU1OTk4LDQ1LjkyOCAxODcuODcwNjY3LDQ1LjkyOCBDMTg4LjEwMDAwMSw0NS45MjggMTg4LjI3OTk5OSw0NS44NzYwMDA1IDE4OC40MTA2NjcsNDUuNzcyIEMxODguNTQxMzM0LDQ1LjY2Nzk5OTUgMTg4LjYwNjY2Nyw0NS41MzA2Njc1IDE4OC42MDY2NjcsNDUuMzYgQzE4OC42MDY2NjcsNDUuMTg5MzMyNSAxODguNTQ1MzM0LDQ1LjA2ODAwMDQgMTg4LjQyMjY2Nyw0NC45OTYgQzE4OC4yOTk5OTksNDQuOTIzOTk5NiAxODguMDYwMDAyLDQ0Ljg2MTMzMzYgMTg3LjcwMjY2Nyw0NC44MDggQzE4Ni44OTczMjksNDQuNzExOTk5NSAxODYuMzM2MDAyLDQ0LjUyOTMzNDcgMTg2LjAxODY2Nyw0NC4yNiBDMTg1LjcwMTMzMiw0My45OTA2NjUzIDE4NS41NDI2NjcsNDMuNTY1MzM2MiAxODUuNTQyNjY3LDQyLjk4NCBDMTg1LjU0MjY2Nyw0Mi40NjEzMzA3IDE4NS43NDM5OTgsNDIuMDMzMzM1IDE4Ni4xNDY2NjcsNDEuNyBDMTg2LjU0OTMzNSw0MS4zNjY2NjUgMTg3LjA4NjY2Myw0MS4yIDE4Ny43NTg2NjcsNDEuMiBDMTg5LjE2MTM0LDQxLjIgMTg5LjkxMzMzMyw0MS43OTQ2NjA3IDE5MC4wMTQ2NjcsNDIuOTg0IEwxODguNDk0NjY3LDQyLjk4NCBDMTg4LjQzNiw0Mi41NzMzMzEzIDE4OC4xOTA2NjksNDIuMzY4IDE4Ny43NTg2NjcsNDIuMzY4IEMxODcuNTQ1MzMyLDQyLjM2OCAxODcuMzgxMzM0LDQyLjQxMTk5OTYgMTg3LjI2NjY2Nyw0Mi41IEMxODcuMTUxOTk5LDQyLjU4ODAwMDQgMTg3LjA5NDY2Nyw0Mi43MDY2NjU5IDE4Ny4wOTQ2NjcsNDIuODU2IEMxODcuMDk0NjY3LDQzLjAyMTMzNDIgMTg3LjE1NTk5OSw0My4xNDM5OTk2IDE4Ny4yNzg2NjcsNDMuMjI0IEMxODcuNDAxMzM0LDQzLjMwNDAwMDQgMTg3LjYzNTk5OCw0My4zNjc5OTk4IDE4Ny45ODI2NjcsNDMuNDE2IEMxODguNzUwNjcxLDQzLjUwMTMzMzggMTg5LjMwNzk5OCw0My42NzA2NjU0IDE4OS42NTQ2NjcsNDMuOTI0IEMxOTAuMDAxMzM1LDQ0LjE3NzMzNDYgMTkwLjE3NDY2Nyw0NC41OTk5OTcgMTkwLjE3NDY2Nyw0NS4xOTIgQzE5MC4xNzQ2NjcsNDUuNzM2MDAyNyAxODkuOTY5MzM1LDQ2LjE4OTMzMTUgMTg5LjU1ODY2Nyw0Ni41NTIgQzE4OS4xNDc5OTgsNDYuOTE0NjY4NSAxODguNTg1MzM3LDQ3LjA5NiAxODcuODcwNjY3LDQ3LjA5NiBaIiBpZD0ieS1heGlzIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5My4wMDAwMDAsIDc2LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS0xMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS05Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsLW9wYWNpdHk9IjAuNCIgZmlsbD0iIzk4RDVCMCIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMiI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkZpbGwtMS1Db3B5LTYiPgogICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iIzYzNjU2RSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzQuNjQxNDMsOTQuNTE4OTI3NiBMMjM2LjEwNTU3Myw5Ny40NDcyMTM2IEwyMzYuNTUyNzg2LDk4LjM0MTY0MDggTDIzNy40NDcyMTQsOTcuODk0NDI3MiBMMjM5LjQ0NzIxNCw5Ni44OTQ0MjcyIEwyNDAuMzQxNjQxLDk2LjQ0NzIxMzYgTDIzOS44OTQ0MjcsOTUuNTUyNzg2NCBMMjM4LjQ3OTk0Miw5Mi43MjM4MTU1IEwyMzkuMjU4Njc1LDkyLjU2ODA2OSBDMjQxLjcxMzg1NSw5Mi4wNzcwMzI4IDI0Mi4yNDAyNTMsODkuOTExNTc3NCAyNDAuMjg1NzI5LDg4LjM0Nzk1ODEgTDIzNy42MjQ2OTUsODYuMjE5MTMxMiBMMjMzLjk0Mjc4MSw4My4xNTA2MDk2IEMyMzIuMDE4MTQ5LDgxLjU0Njc0OTYgMjMwLDgyLjUwMzkxMTIgMjMwLDg1LjAwOTI1NDUgTDIzMCw4OSBMMjMwLDkyLjk5MDc0NTUgQzIzMCw5NS40NzQyMjEyIDIzMi4wMTA2NDMsOTYuNDkyMDE3NiAyMzMuOTk2MDk1LDk1LjAwMjkyODkgTDIzNC42NDE0Myw5NC41MTg5Mjc2IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS04Ij4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGwtb3BhY2l0eT0iMC40IiBmaWxsPSIjOThENUIwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTE0Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiM5OEQ1QjAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMTYxIiB5PSI1NyIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},ELUg:function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return d});var r,o,i,a=n("vqB5"),l=n("wB6Z"),s=n("jc3r"),c=n("BP8X");!function(e){!function(e){e.ModeBusinessUpsell="[Common] ModeBusinessUpsell",e.ModeStudio="[Common] ModeStudio",e.IntercomChat="[Common] IntercomChat"}(e.Common||(e.Common={})),function(e){e.PlatformHeader="[Editor] PlatformHeader"}(e.Editor||(e.Editor={})),function(e){e.DrillDown="[Report] DrillDown",e.Explore="[Report] Explore",e.VizToolbar="[Report] VizToolbar",e.ChartDataExport="[Report] ChartDataExport",e.ParameterRunButton="[Report] ParameterRunButton",e.Parameters="[Report] Parameters"}(e.Report||(e.Report={}))}(o||(o={})),function(e){!function(e){!function(e){e.DrillDownsEnabled="[Type] [SelectedReport] DrillDownsEnabled"}(e.SelectedReport||(e.SelectedReport={}))}(e.Type||(e.Type={}))}(i||(i={}));var d=Object(a.b)(((r={})[o.Editor.PlatformHeader]=[Object(s.a)({type:l.a.Type.HeaderRivers,context:l.a.Context.User})],r[o.Report.DrillDown]=[Object(s.a)({type:i.Type.SelectedReport.DrillDownsEnabled,context:null})],r[o.Report.Explore]=[Object(s.a)({type:i.Type.SelectedReport.DrillDownsEnabled,context:null})],r[o.Report.VizToolbar]=[Object(s.a)({type:i.Type.SelectedReport.DrillDownsEnabled,context:null})],r[o.Report.ChartDataExport]=[Object(s.a)({type:c.c.Type.Plus,context:c.c.Context.Report})],r[o.Report.ParameterRunButton]=[Object(s.a)({type:c.c.Type.Plus,context:c.c.Context.Report})],r[o.Report.Parameters]=[Object(s.a)({type:c.c.Type.Plus,context:c.c.Context.Report})],r[o.Common.ModeBusinessUpsell]=[Object(s.a)({type:c.c.Type.Free,context:c.c.Context.Report})],r[o.Common.ModeStudio]=[Object(s.a)({type:c.c.Type.Free,context:c.c.Context.Report})],r[o.Common.IntercomChat]=[Object(s.a)({type:c.c.Type.Plus,context:c.c.Context.Report}),Object(s.a)({type:c.c.Type.Standard,context:c.c.Context.Report})],r))},EpWU:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iN3B4IiBoZWlnaHQ9IjlweCIgdmlld0JveD0iMCAwIDcgOSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDIgKDM2NzgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5zb3J0LWFzY2VuZGluZy1jb250aW51b3VzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Im1vY2t1cHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgICAgICAgPGcgaWQ9IjIyLWNvcHktMTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDQ1LjAwMDAwMCwgLTY1My4wMDAwMDApIiBzdHJva2U9IiMyMDk1NTEiPgogICAgICAgICAgICA8ZyBpZD0ic29ydC1hc2NlbmRpbmctY29udGludW91cyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA0NS4wMDAwMDAsIDY1My4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zLjUsMC41IEwzLjUsNy41IiBpZD0iTGluZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJQYXRoLTEyIiBwb2ludHM9IjAgNSAzLjUgOCA3IDUiPjwvcG9seWxpbmU+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},F4Ad:function(e,t){e.exports='<div class="default-modal switch-to-org-modal">\n  <h3 class="modal-header">Connect your Data Source<a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <div class="modal-container">\n    <p>To work with a privately connected data source, you\'ll need to switch to an organization first. Organizations help teams work together on analysis and share data privately.</p>\n  </div>\n  <div class="modal-action-bar">\n   <button ng-click="$dismiss();" class="btn btn-lg btn-filled-primary" context-modal="true" orgs="ctrl.organizations" current-context="{{ctrl.contextId}}" account="ctrl.account" home-name="{{ctrl.home}}">Switch to Organization</button>\n  </div>\n</div>\n'},F5TX:function(e,t){e.exports='<li ng-class="{open: ctrl.isOpen(\'intro\')}">\n  <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'intro\')">\n    <i class="icon-tree-caret-default align-md-icon"></i> Intro to Notebooks\n  </span>\n  <div class="notebook-sidebar-item-text">\n    <p>A new Notebook automatically loads an index of your report queries. Your query results are accessible in R as <code>data.frame</code> objects.\n    <p>Your <code>data.frame</code> objects may be accessed by querying the datasets object (example: <code>datasets[["your query name"]]</code> or <code>datasets[[1]]</code>). You can also access them by token or index ID. Learn more about accessing your queries <a target="_blank" href="https://help.modeanalytics.com/articles/how-to-use-query-results-in-r/">here</a>.\n    <p>The R Notebook will process R code when input cells are run, and return output accordingly. In order to use any of the R packages supported, you must first import the package to the Notebook (example: <code>library(ggplot2)</code>).\n    <p><a ng-click="ctrl.goToSupportedLibraries()">Supported packages</a> are referenced in this side panel, along with helpful notebook <a ng-click="ctrl.goToKeyboardShortcuts()">keyboard shortcuts</a> and links to other resources, including various <a target="_blank" href="https://community.modeanalytics.com/gallery/">recipes</a> for analysis that will help you get started or accelerate your analysis for some common use cases.\n    <p><i>Note: the <code>datasets</code> object updates when you run your SQL queries. If you rename a query, remember to run it again so that your Notebook has the latest results.</i>\n  </div>\n</li>\n'},FC4A:function(e,t){e.exports='<div class="ace-editor-wrapper editor-notepad">\n  <div class="text-editor"></div>\n</div>'},FX5C:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZHVwbGljYXRlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHBhdGggZD0iTTUsMS45OTIwMTcwMiBDNSwwLjg5MTg1NjM5NyA1LjkwMDE3NjE3LDAgNi45OTIwMTcwMiwwIEwxNC4wMDc5ODMsMCBDMTUuMTA4MTQzNiwwIDE2LDAuOTAwMTc2MTY3IDE2LDEuOTkyMDE3MDIgTDE2LDkuMDA3OTgyOTggQzE2LDEwLjEwODE0MzYgMTUuMDk5ODIzOCwxMSAxNC4wMDc5ODMsMTEgTDYuOTkyMDE3MDIsMTEgQzUuODkxODU2NCwxMSA1LDEwLjA5OTgyMzggNSw5LjAwNzk4Mjk4IEw1LDEuOTkyMDE3MDIgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIG1hc2tDb250ZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTEiIGhlaWdodD0iMTEiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICA8L21hc2s+CiAgICAgICAgPHBhdGggZD0iTTAsNC45OTIwMTcwMiBDMCwzLjg5MTg1NjQgMC45MDAxNzYxNjcsMyAxLjk5MjAxNzAyLDMgTDkuMDA3OTgyOTgsMyBDMTAuMTA4MTQzNiwzIDExLDMuOTAwMTc2MTcgMTEsNC45OTIwMTcwMiBMMTEsMTIuMDA3OTgzIEMxMSwxMy4xMDgxNDM2IDEwLjA5OTgyMzgsMTQgOS4wMDc5ODI5OCwxNCBMMS45OTIwMTcwMiwxNCBDMC44OTE4NTYzOTcsMTQgMCwxMy4wOTk4MjM4IDAsMTIuMDA3OTgzIEwwLDQuOTkyMDE3MDIgWiIgaWQ9InBhdGgtMyI+PC9wYXRoPgogICAgICAgIDxtYXNrIGlkPSJtYXNrLTQiIG1hc2tDb250ZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTEiIGhlaWdodD0iMTEiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0zIj48L3VzZT4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0ibW9ja3VwcyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkR1cGxpY2F0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4wMDAwMDAsIDEuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zNiI+CiAgICAgICAgICAgICAgICA8dXNlIGlkPSJSZWN0YW5nbGUtMzQtQ29weSIgc3Ryb2tlPSIjQjFCMkJBIiBtYXNrPSJ1cmwoI21hc2stMikiIHN0cm9rZS13aWR0aD0iMiIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8dXNlIGlkPSJSZWN0YW5nbGUtMzQiIHN0cm9rZT0iIzYzNjU2RSIgbWFzaz0idXJsKCNtYXNrLTQpIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9IiNGMUYyRjUiIHhsaW5rOmhyZWY9IiNwYXRoLTMiPjwvdXNlPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNSw2LjUgTDUuNSwxMC41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjUsOC41IEwzLjUsOC41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},GtTN:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i});var r,o,i,a=n("bl/5"),l=n.n(a),s=n("0iPh"),c=n.n(s),d=n("3cAX");n.n(d);!function(e){e.ResultCreated="result_created",e.NotebookIdle="kernel_idle",e.BatchRunComplete="batch_run_complete",e.DataLoaded="load_complete",e.SessionTerminated="session_terminated"}(r||(r={})),function(e){e.ReportSaved="report_saved"}(o||(o={})),function(e){e.Connected="connected",e.Disconnected="disconnected"}(i||(i={}));var u=function(){function RealtimeService(e,t,n){this.$rootScope=e,this.$window=t,this.$log=n,this.pusherKey=c()("meta[name=pusher-key]").attr("content"),this.subscriptions={},this._events$=new d.BehaviorSubject(null),this.events$=this._events$.skip(1).publish()}return RealtimeService.prototype.initPusher=function(){var e=this,t=c()("meta[name=csrf-token]").attr("content");this.pusherKey&&(this.$window.Pusher.log=function(t){return e.$log.debug(t)},this.pusher=new l.a(this.pusherKey,{encrypted:!0,auth:{headers:{"X-CSRF-Token":t}}}),this.events$.connect(),this.pusher.connection.bind("connected",function(t){return e._events$.next({name:i.Connected,data:t})}),this.pusher.connection.bind("disconnected",function(t){e._events$.next({name:i.Disconnected,data:t})}))},RealtimeService.prototype.connect=function(e){if(!this.pusher&&this.pusherKey&&this.initPusher(),this.pusher)return this.connectToChannel(e)},RealtimeService.prototype.connectToChannel=function(e){var t=this;if(null==this.subscriptions[e]){var n=this.pusher.subscribe(e);n.bind_all(function(n,r){t.$rootScope.$apply(function(){t._events$.next({name:n,channel:e,data:r})})}),this.subscriptions[e]=n}return this.subscriptions[e]},RealtimeService.prototype.disconnectFromChannel=function(e){var t=this.subscriptions[e];t&&(t.unbind_all(),this.pusher.unsubscribe(t.name),delete this.subscriptions[e])},RealtimeService.$inject=["$rootScope","$window","$log"],RealtimeService}();t.d=u},HPXR:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aG9tZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0yLDMuODQ5NDIxNzYgTDcuOTUyMjg3OTUsMCBMMTQsMy44NDk0MjE3NiBMMTMuMjI2NjA0MywxMy4wMDgyMzgxIEMxMy4xODAzNTIsMTMuNTU1OTczMSAxMi43MDA4OTI5LDE0IDEyLjEzNzg5MTgsMTQgTDMuODYyMTA4MTgsMTQgQzMuMzA3MDgxMTYsMTQgMi44MTkyMDY1MiwxMy41NTA3NDUgMi43NzMzOTU3NSwxMy4wMDgyMzgxIEwyLDMuODQ5NDIxNzYgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIG1hc2tDb250ZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTIiIGhlaWdodD0iMTQiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICA8L21hc2s+CiAgICAgICAgPHBhdGggZD0iTTYsOS45OTc5MTMxMiBDNiw4Ljg5NDQ5NjE3IDYuODg3NzI5NjQsOCA4LDggTDgsOCBDOS4xMDQ1Njk1LDggMTAsOC44OTgyNjA2MiAxMCw5Ljk5NzkxMzEyIEwxMCwxNCBMNiwxNCBMNiw5Ljk5NzkxMzEyIFoiIGlkPSJwYXRoLTMiPjwvcGF0aD4KICAgICAgICA8bWFzayBpZD0ibWFzay00IiBtYXNrQ29udGVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgbWFza1VuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeD0iMCIgeT0iMCIgd2lkdGg9IjQiIGhlaWdodD0iNiIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTMiPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iSG9tZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4wMDAwMDAsIDEuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zNiI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNiw5Ljk5NzkxMzEyIEM2LDguODk0NDk2MTcgNi44ODc3Mjk2NCw4IDgsOCBMOCw4IEM5LjEwNDU2OTUsOCAxMCw4Ljg5ODI2MDYyIDEwLDkuOTk3OTEzMTIgTDEwLDE0IEw2LDE0IEw2LDkuOTk3OTEzMTIgWiIgaWQ9IlJlY3RhbmdsZS04IiBmaWxsPSIjRjFGMkY1Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8dXNlIGlkPSJSZWN0YW5nbGUtNyIgc3Ryb2tlPSIjNjM2NTZFIiBtYXNrPSJ1cmwoI21hc2stMikiIHN0cm9rZS13aWR0aD0iMiIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8cG9seWxpbmUgaWQ9IlBhdGgtMyIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHBvaW50cz0iMC4wMjE3Mjg1MTU2IDUuNjgyNjE3MTkgOCAwLjUxMTQ3NDYwOSAxNi4wNDQ0MzM2IDUuNjgyNjE3MTkiPjwvcG9seWxpbmU+CiAgICAgICAgICAgICAgICA8dXNlIGlkPSJSZWN0YW5nbGUtOCIgc3Ryb2tlPSIjNjM2NTZFIiBtYXNrPSJ1cmwoI21hc2stNCkiIHN0cm9rZS13aWR0aD0iMiIgeGxpbms6aHJlZj0iI3BhdGgtMyI+PC91c2U+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},IU2V:function(e,t,n){"use strict";var r=n("0YuG");n.n(r);r.module("mode.api",[])},"JFI/":function(e,t,n){"use strict";t.b=function(e){if(e.attr("class")){var t=o.exec(e.attr("class"));if(t.length>1)return parseInt(t[1])}return 0},t.c=function(e){var t=function(){var e=DOMParser.prototype.parseFromString;try{var t=new DOMParser;if(t.parseFromString("","text/html"))return t}catch(e){}return{parseFromString:function(t,n){if(/^\s*text\/html\s*(?:;|$)/i.test(n)){var r=document.implementation.createHTMLDocument("");return t.toLowerCase().indexOf("<!doctype")>-1?r.documentElement.innerHTML=t:r.body.innerHTML=t,r}return e.apply(this,arguments)}}}().parseFromString(e,"text/html");return{body:t.body.children,head:Array.from(t.head.children).filter(function(e){return"TITLE"!==e.nodeName})}},t.d=function(e,t){void 0===t&&(t=null);if(e){var n=parseInt(e);return isNaN(n)?t:n}},t.a=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)};var r=n("0iPh"),o=(n.n(r),/col-md-(-?[0-9]+)/)},JUru:function(e,t){e.exports='<div ng-show="dataset" class="editor-table mode-object" style="height:100%; overflow: hidden">\n  <div class="grid-element mode-handsontable" ng-show="dataset.count > 0"></div>\n  <div ng-show="dataset.count <= 0" class="empty">No rows returned</div>\n</div>\n'},JW7B:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n("i7j0"),o=n("PbPb"),i=(n.n(o),{reportList:[],nextPage:null,searchOptions:{},reportListLoading:!0,noReports:!1,hasArchived:!1,reportsCollection:null}),a=o.memoize(function(e){return o.keyBy(e,"token")}),l={selectedSpace:{token:"",name:"recent",title:"Recently Viewed",subTitle:"Recently Viewed",space:null,preferenceView:"reports",allSpaces:null},reportListToggle:"tile",reportState:{reportList:[],nextPage:null,searchOptions:{},reportListLoading:!1,noReports:!1,hasArchived:!1,reportsCollection:null},definitionState:{definitionList:[],definitionListLoading:!1},mySpaces:[],totalSpaceCount:0,totalDataSourceCount:0},s=function(e,t){return o.extend(l,e,function(e,t){switch(t.type){case r.a.SelectStarred:return{selectedSpace:{token:"",name:"starred",title:"Starred",subTitle:"Starred",space:null,preferenceView:"starred",allSpaces:null},reportState:i};case r.a.SelectMyWork:return{selectedSpace:{token:"",name:"mywork",title:"My Work",subTitle:"My Work",space:null,preferenceView:"search",allSpaces:null},reportState:i};case r.a.SelectDiscover:return{selectedSpace:{token:"",name:"discover",title:"Discover",subTitle:"Discover",space:null,preferenceView:"discover",allSpaces:null},reportState:{reportList:[],nextPage:null,searchOptions:{},reportListLoading:!1,noReports:!0,hasArchived:!1,reportsCollection:null}};case r.a.SelectRecent:return{selectedSpace:{token:"",name:"recent",title:"Recently Viewed",subTitle:"Recently Viewed",space:null,preferenceView:"reports",allSpaces:null},reportState:i};case r.a.SelectSpacesIndexPending:return{selectedSpace:{token:"",name:"spacesIndex",title:"All Spaces",subTitle:"All Spaces",space:null,preferenceView:"",allSpaces:null},reportState:i};case r.a.SelectSpacesIndexFulfilled:return{selectedSpace:{token:"",name:"spacesIndex",title:"All Spaces",subTitle:"All Spaces",space:null,preferenceView:"",allSpaces:t.payload.filter(function(e){return e.openSpace||e.restricted})},reportState:i};case r.a.SelectOrganizationSpaceRejected:case r.a.SelectSpacesIndexRejected:case r.a.SelectSpaceRejected:return{selectedSpace:{token:"",name:"space",title:"",subTitle:"",space:null,preferenceView:"",allSpaces:null},reportState:i};case r.a.SelectSpacePending:case r.a.SelectOrganizationSpacePending:return{selectedSpace:{token:"",name:"spaceLoading",title:"",subTitle:"",space:null,preferenceView:"",allSpaces:null},reportState:i};case r.a.SelectSpaceFulfilled:case r.a.SelectOrganizationSpaceFulfilled:return{selectedSpace:{token:t.payload?t.payload.token:"",name:"space",title:t.payload?t.payload.name:"",subTitle:t.payload?t.payload.description:"",space:t.payload,preferenceView:t.payload&&t.payload.free_default?"organization_space":"",allSpaces:null},reportState:i};case r.a.SelectDefinitions:return{selectedSpace:{token:"",name:"datasource",title:"Datasources",subTitle:"",space:null,preferenceView:e.selectedSpace.preferenceView,datasourceToken:t.dataSourceToken,allSpaces:null},reportState:i}}}(e,t),function(e,t){var n;switch(t.type){case r.a.GetReportList:case r.a.GetReportListPending:return{reportState:i};case r.a.GetReportListFulfilled:return{reportState:{reportList:t.payload.reports?t.payload.reports:t.payload,nextPage:t.payload.nextPage,searchOptions:t.meta?t.meta.options:{},reportListLoading:!1,noReports:t.payload.reports?!t.payload.reports.length:!t.payload.length,hasArchived:t.payload.archivedReports||!1,reportsCollection:t.payload.reportsCollection}};case r.a.FilterReportList:return{reportState:i};case r.a.FilterReportListPending:return{reportState:{reportList:e.reportState.reportList,nextPage:e.reportState.nextPage,searchOptions:e.reportState.searchOptions,forthcomingSearchOptions:t.meta.options,reportListLoading:!0,noReports:!1,hasArchived:!1,reportsCollection:null}};case r.a.FilterReportListFulfilled:var a=!o.isEqual(t.meta.options,e.reportState.forthcomingSearchOptions);return{reportState:{reportList:a?e.reportState.reportList:t.payload.reports,nextPage:a?e.reportState.nextPage:t.payload.nextPage,searchOptions:a?e.reportState.searchOptions:t.meta.options,reportListLoading:!!a,noReports:!1,hasArchived:!1,reportsCollection:null}};case r.a.MoreReportList:return{reportState:i};case r.a.MoreReportListPending:return{reportState:{reportList:e.reportState.reportList,nextPage:e.reportState.nextPage,searchOptions:e.reportState.searchOptions,reportListLoading:!0,noReports:!1,hasArchived:!1,reportsCollection:e.reportState.reportsCollection}};case r.a.MoreReportListFulfilled:return{reportState:{reportList:o.unionBy(e.reportState.reportList,t.payload.reports,"token"),nextPage:t.payload.nextPage,searchOptions:t.meta?t.meta.options:{},reportListLoading:!1,noReports:!1,hasArchived:!1,reportsCollection:t.payload.reportsCollection}};case r.a.CreateSpaceReportPinFulfilled:return(n=o.find(e.reportState.reportList,function(e){return e.token===t.payload.report.token}))&&(n.savedSpaceReportPin=t.payload.spaceReportPin),{reportState:{reportList:e.reportState.reportList,nextPage:e.reportState.nextPage,searchOptions:e.reportState.searchOptions,reportListLoading:e.reportState.reportListLoading,noReports:e.reportState.noReports,hasArchived:e.reportState.hasArchived,reportsCollection:e.reportState.reportsCollection}};case r.a.RemoveSpaceReportPinFulfilled:return(n=o.find(e.reportState.reportList,function(e){return e.token===t.payload.token}))&&(n.savedSpaceReportPin=null),{reportState:{reportList:e.reportState.reportList,nextPage:e.reportState.nextPage,searchOptions:e.reportState.searchOptions,reportListLoading:e.reportState.reportListLoading,noReports:e.reportState.noReports,hasArchived:e.reportState.hasArchived,reportsCollection:e.reportState.reportsCollection}}}}(e,t),function(e,t){switch(t.type){case r.a.SetReportListToggleList:return{reportListToggle:"list"};case r.a.SetReportListToggleTile:return{reportListToggle:"tile"}}}(0,t),function(e,t){switch(t.type){case r.a.GetDefinitionList:case r.a.GetDefinitionListPending:return{definitionState:{definitionList:[],definitionListLoading:!0,nextPage:null}};case r.a.GetDefinitionListFulfilled:return{definitionState:{definitionList:t.payload.definitions,definitionListLoading:!1,nextPage:t.payload.nextPage}};case r.a.MoreDefinitionList:case r.a.MoreDefinitionListPending:return{definitionState:{definitionList:e.definitionState.definitionList,definitionListLoading:!0,nextPage:e.definitionState.nextPage}};case r.a.MoreDefinitionListFulfilled:return{definitionState:{definitionList:o.unionBy(e.definitionState.definitionList,t.payload.definitions,"token"),definitionListLoading:!1,nextPage:t.payload.nextPage}}}}(e,t),function(e,t){switch(t.type){case r.a.SetSpaces:return{mySpaces:t.spaces};case r.a.GetSpacesFulfilled:return{mySpaces:t.payload};case r.a.InsertSpace:case r.a.CreateSpace:return{mySpaces:o.unionBy(e.mySpaces,[t.space],"token")};case r.a.RemoveSpace:case r.a.RenameSpace:case r.a.DeleteSpace:return{mySpaces:e.mySpaces.filter(function(e){return e.token!==t.space.token})}}}(e,t),function(e,t){switch(t.type){case r.a.SetSpaceCount:return{totalSpaceCount:t.count};case r.a.DeleteSpace:return{totalSpaceCount:Math.max(e.totalSpaceCount-1,0)};case r.a.CreateSpace:return{totalSpaceCount:e.totalSpaceCount+1}}}(e,t),function(e,t){switch(t.type){case r.a.GetDataSourcesFulfilled:return{totalDataSourceCount:t.payload}}}(0,t))}},KVaf:function(e,t,n){"use strict";var r=n("PbPb"),o=(n.n(r),function(){function TimingService(e){this.UtilsService=e,this._timerQueue=[]}return TimingService.prototype.start=function(e){var t=this.UtilsService.telemetryNow();return this._timerQueue.push({id:e,startTime:t,endTime:null}),parseInt(String(1e6*Math.random())).toString()},TimingService.prototype.end=function(e){if(!e)throw new Error("ID not defined");var t=Object(r.head)(Object(r.remove)(this._timerQueue,{id:e}));return t?Object(r.assign)(t,{endTime:this.UtilsService.telemetryNow()}):null},TimingService.prototype.hasTimer=function(e){return this._timerQueue.some(function(t){return t.id===e})},TimingService.buildKey=function(e,t){return[e,t].join("::")},TimingService.$inject=["Utils"],TimingService}());t.a=o},KVso:function(e,t){e.exports='<div class="default-modal context-modal">\n  <h3 class="modal-header">{{ ctrl.existingGroup ? \'Rename Group\' : \'Create a Group\' }}<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <form name="createGroupForm" ng-submit="ctrl.createGroup()" novalidate>\n    <div class="modal-container">\n      <div class="form-element">\n        <label for="groupName">Group Name</label>\n        <div class="inline-error pull-right" ng-show="createGroupForm.groupName.$error.groupName">Group name is unavailable</div>\n        <div class="inline-error pull-right" ng-show="createGroupForm.groupName.$error.required && createGroupForm.groupName.$touched">Group name is required</div>\n        <div ng-show="createGroupForm.invalidRequired">Group name is taken</div>\n        <input name="groupName" type="text" placeholder="e.g. Marketing" class="form-control next-form-control" ng-model="ctrl.group.name" required autofocus group-name-validation />\n      </div>\n    </div>\n    <div class="modal-action-bar">\n      <button class="btn btn-lg btn-filled-primary" ng-disabled="createGroupForm.$invalid" type="submit">{{ ctrl.existingGroup ? \'Save\' : \'Create\' }}</button>\n    </div>\n  </form>\n</div>'},KXXZ:function(e,t,n){"use strict";var r=n("0YuG"),o=n("m9my"),i=n("DAkD"),a=n("yqn6"),l=n("yfIQ"),s=n("vqB5"),c={undoStack:Object(s.a)(),redoStack:Object(s.g)()},d=n("M/pt"),u=n("2BGn"),p=n("kZ7C");t.q=validateSortField,t.p=validateEncoding,t.g=isChartEncodingComplete,t.d=function(e,t,n){var r;switch(n.type){case o.FieldType.DATA:case o.FieldType.MODELCALC:r=Object(a.f)(n,a.a.Aggregate).formula;break;case o.FieldType.VIEWCALC:r=Object(a.g)(n,t,a.a.Aggregate).formula}return e.value.find(function(e){return e.formula===r})},t.b=computePalette,t.e=function(e,t){return{token:t,resource:e.resources.get(t),queryToken:e.queryTokens.get(t),version:e.versions.get(t),v1View:e.v1Views.get(t),history:e.histories.has(t)?e.histories.get(t):c,encoding:e.encodings.get(t),format:e.formats.get(t),chartType:e.chartTypes.get(t),title:e.titles.get(t),colorPaletteToken:e.colorPaletteTokens.get(t)}},t.c=function(e,t){var n;2===e.version?(n=new d.b,n=e.encoding?new d.b(Object(a.s)(e.encoding)):new d.b(Object(a.r)(e.chartType))):n=new d.b(Object(a.s)(o.EMPTY_ENCODING));var r={canSort:!1,canSwap:!1,canRender:!1,isCompleteEncoding:!1,isValidEncoding:!0,invalidEncodingErrors:[],canGoUp:!1,canGoDown:!1};if(t){var i=validateEncoding(n.encoding,t),l=isChartEncodingComplete(n.encoding,e.chartType),s=Object(a.h)(n.encoding,t);r={canSort:checkCanSort(n.encoding,e.chartType)&&i.length<=0,canSwap:checkCanSwap(n.encoding,e.chartType)&&i.length<=0,canRender:i.length<=0&&l,isCompleteEncoding:l,isValidEncoding:i.length<=0,invalidEncodingErrors:i,canGoUp:s.back,canGoDown:s.forward}}return h({token:e.token,resource:e.resource,v1View:e.v1View,queryToken:e.queryToken,version:e.version,history:e.history,chartType:e.chartType,colorPaletteToken:e.colorPaletteToken,encResult:n,format:e.format,title:e.title,canRedo:e.history.redoStack.size>0,canUndo:e.history.undoStack.size>0,undoDesc:e.history.redoStack.size?e.history.redoStack.peek().action:"",redoDesc:e.history.undoStack.size?e.history.undoStack.get(0).action:""},r)},t.f=getSeriesNames,t.a=backfillMapFromSeriesToColor,t.m=function(e,t,n,r){var o=updateMapFromSeriesToColor(e.format,t,e.encoding,n.encoding,r);return h({},e,{format:h({},e.format,{colors:h({},e.format.colors,{map:o})}),encoding:n.encoding})},t.o=updateMapFromSeriesToColor,t.l=function(e,t,n){if(!t.colors.map)return;var r={};if(e.canRender){var o=t.colors.custom,i=getSeriesNames(e.encResult.encoding,n,t);i.forEach(function(e,t){r[e]=o[t%o.length]})}return r},t.n=function(e,t){return h({},pushUndoStack(e,"update chart format"),{format:t})},t.h=function(e){var t=e.view_vegas&&e.view_vegas.format;if(!t)return r.copy(d.a);void 0===t.drilldownEnabled&&(t=h({},t,{drilldownEnabled:!0}));return t},t.k=pushUndoStack,t.j=function(e,t){var n=e.history.undoStack.last();if(n){e.history.undoStack.pop().last();return h({},e,n.state,{history:{undoStack:e.history.undoStack.pop(),redoStack:e.history.redoStack.push(generateChartHistoryEntry(e,n.action))}})}return e},t.i=function(e,t){var n=e.history.redoStack.peek();if(n){e.history.redoStack.pop().peek();return h({},e,n.state,{history:{undoStack:e.history.undoStack.push(generateChartHistoryEntry(e,n.action)),redoStack:e.history.redoStack.pop()}})}return e};var h=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g=100;function validateEncodingChannel(e,t,n){var r=t.validate(e);r.length&&n.push(r[0].message)}function validateSortField(e,t,n,r){var o=n.validate(e),i=t?n.validate(t):[];(o.length||i.length)&&r.push("Sort on "+e+" is invalid")}function validateMarks(e,t,n){for(var r=0,o=e.color.values;r<o.length;r++){validateEncodingChannel(o[r].formula,t,n)}for(var i=0,a=e.angle.values;i<a.length;i++){validateEncodingChannel(a[i].formula,t,n)}for(var l=0,s=e.size.values;l<s.length;l++){validateEncodingChannel(s[l].formula,t,n)}for(var c=0,d=e.tooltip.values;c<d.length;c++){validateEncodingChannel(d[c].formula,t,n)}for(var u=0,p=e.label.values;u<p.length;u++){validateEncodingChannel(p[u].formula,t,n)}for(var h=0,g=e.detail.values;h<g.length;h++){validateEncodingChannel(g[h].formula,t,n)}for(var m=0,f=e.text.values;m<f.length;m++){validateEncodingChannel(f[m].formula,t,n)}}function validateEncoding(e,t){if(!t||!e)return[];for(var n=[],r=0,o=e.column;r<o.length;r++){validateEncodingChannel((C=o[r]).formula,t,n)}for(var i=0,a=e.x;i<a.length;i++){validateEncodingChannel((C=a[i]).formula,t,n)}for(var l=0,s=e.value;l<s.length;l++){validateEncodingChannel((C=s[l]).formula,t,n)}for(var c=0,d=e.y;c<d.length;c++){validateEncodingChannel((C=d[c]).formula,t,n)}for(var u=0,p=e.y2;u<p.length;u++){validateEncodingChannel((C=p[u]).formula,t,n)}for(var h=0,g=e.sorts;h<g.length;h++){validateSortField((C=g[h]).source,C.byField?C.byField.formula:"",t,n)}for(var m=0,f=e.filter;m<f.length;m++){var C;validateEncodingChannel((C=f[m]).formula,t,n)}for(var y=0,b=e.marks.series;y<b.length;y++){validateMarks(b[y].properties,t,n)}return validateMarks(e.marks.properties,t,n),n}function isChartEncodingComplete(e,t){if(!e||!e.marks)return!1;if("*"!==e.marks.channel||"pie"!==t&&"donut"!==t){var n=Object(a.o)(e),r=n.primary,i=n.secondary,l=n.secondaryDiscrete;if(!i.length)return!1;if((i[0].formula===o.SystemFieldName.NAMES||"bar"===t||"hBar"===t)&&!l.length)return!1;if(!r.length)return!1;if(r[0].formula===o.SystemFieldName.VALUES&&!e.value.length)return!1;if("linePlusBar"===t&&!e.y2.length)return!1}else switch(e.marks.properties.type.value){case o.MarkType.Pie:case o.MarkType.Donut:if(!e.marks.properties.angle.values.length||!e.marks.properties.color.values.length)return!1}return!0}function checkCanSort(e,t){switch(t){case"pie":case"donut":return e.marks.properties.angle.values.length&&e.marks.properties.color.values.length&&e.marks.properties.color.values[0].variable.type===o.VariableType.DISCRETE;case"bar":case"hBar":return e.value.length>1||e.marks.series.length&&e.marks.series[0].properties.color.values.length&&e.marks.series[0].properties.color.values[0].formula!==o.SystemFieldName.NAMES;default:var n=Object(a.o)(e),r=n.primary,i=n.secondary;return r.length&&i.length&&i[0].variable.type===o.VariableType.DISCRETE}}function checkCanSwap(e,t){switch(t){case"hBar":case"bar":case"stackedBar":case"hStackedBar":case"stackedBar100":case"hStackedBar100":return!0;default:return!1}}var m=new u.a;function computePalette(e){var t=e.colors,n=t.custom,r=t.theme;return n&&n.length?n:m.getTheme(r).colors}function getSeriesNames(e,t,n){if(!(validateEncoding(e,t).length>0)){var r,i;e=Object(a.m)(e);var s=o.PivotBuilder.makePivot(t,e).execute(t);switch(p.a.shape(e)){case p.a.Shape.Combo:return[e.y,e.y2].map(function(e){var n=e[0];if(n){var r=t.buildViewCalcField(n.formula,n.variable.type,n.id);return t.getDefaultMeasureName(r)}}).filter(function(e){return e});case p.a.Shape.Stacked:case p.a.Shape.Grouped:if(0===e.y.length)return[];if(r=s.getResultSet(e.y[0].id).data,0===e.marks.series.length)return[];i=e.marks.series[0].properties.color.values[0];break;case p.a.Shape.Radial:r=s.getResultSet("*").data,i=e.marks.properties.color.values[0]}if(!r||!i)return[];for(var c=t.buildViewCalcField(i.formula,i.variable.type,i.id),d=l.a.makeSeriesNameFormatter(t,e,c,n),u=new Set,h=0,g=r;h<g.length;h++){var m=g[h];u.add(d(m[c.alias]))}return Array.from(u).filter(function(e){return"No Measure Value"!==e})}}var f={};function backfillMapFromSeriesToColor(e,t,n){var r,i,a=e.colors.map;if(a&&a!==f)return a;if(validateEncoding(n,t).length>0)return f;if(n.marks.series.length){var s=n.marks.series[0];if(s.properties.color.values.length)r=s.properties.color.values[0];else{var c=n.y[0],d=n.y2[0];c&&d&&(r=[c,d])}}else n.marks.properties.color.values&&(r=n.marks.properties.color.values[0]);if(!r)return e.colors.map;if(r instanceof Array)i=r.map(function(e){var n=t.buildViewCalcField(e.formula,e.variable.type,e.id);return t.getDefaultMeasureName(n)});else if(r.formula===o.SystemFieldName.NAMES)i=n.value.map(function(e){var n=t.buildViewCalcField(e.formula,e.variable.type,e.id);return t.getDefaultMeasureName(n)}).sort();else{var u=t.buildViewCalcField(r.formula,r.variable.type,r.id),p=t.onDomain(function(e){return e.onField(u)}).execute().getDomain(u.alias),h=l.a.makeSeriesNameFormatter(t,n,u,e);if(p.type!==o.VariableType.DISCRETE)throw new Error("Color field was not discrete");i=p.values.sort().map(h)}var g={},m=computePalette(e);return i.forEach(function(e,t){g[e]=m[t%m.length]}),g}function colorFieldFormula(e){var t;switch(p.a.shape(e)){case p.a.Shape.Combo:return"LINE+BAR";case p.a.Shape.Stacked:case p.a.Shape.Grouped:t=e.marks.series[0]&&e.marks.series[0].properties.color.values[0];break;case p.a.Shape.Radial:t=e.marks.properties.color.values[0]}if(t)return t.formula}function updateMapFromSeriesToColor(e,t,n,a,l){var s,c=getSeriesNames(a=a||n,t,e);if(!c||!e.colors.map)return e.colors.map;if(e.colors.map===f)return backfillMapFromSeriesToColor(e,t,a);var d=colorFieldFormula(n),u=colorFieldFormula(a);if(u!==d)s={};else{s=r.copy(e.colors.map);var p=function(e,t){return e.filter(function(e){return!t.some(function(t){return t===e})})};if(l===i.a.ChangePillFormula)if(m=getSeriesNames(n,t,e)){var h=p(m,c)[0],g=p(c,m)[0];g!==h&&s[h]&&(s[g]=s[h],delete s[h])}else console.error("This should never happen, changing a pill's formula should be atomic, the dataset/model shouldn't change in the meantime causing an encoding that was invalid against the model to become valid.");if(u===o.SystemFieldName.NAMES)for(var m,C=0,y=p(m=Object.keys(s),c);C<y.length;C++){delete s[h=y[C]]}}for(var b={},v=0,I=Object.keys(s);v<I.length;v++){b[L=s[M=I[v]]]=(b[L]||0)+1}for(var S=computePalette(e),w=0,A=c;w<A.length;w++){var M;if(!s[M=A[w]]){for(var k=1/0,T=void 0,x=0,D=S;x<D.length;x++){var L;if(void 0===b[L=D[x]]){T=L;break}b[L]<k&&(k=b[L],T=L)}b[T]=(b[T]||0)+1,s[M]=T}}return s}function generateChartHistoryEntry(e,t){return{action:t,state:{colorPaletteToken:e.colorPaletteToken,title:e.title,encoding:e.encoding,format:e.format,chartType:e.chartType}}}function pushUndoStack(e,t){for(var n=e.history.undoStack;n.size>=g;)n=n.shift();return h({},e,{history:{undoStack:n.push(generateChartHistoryEntry(e,t)),redoStack:e.history.redoStack.clear()}})}},Kb94:function(e,t){e.exports='<div class="row">\n  <div class="discover-main-container col-xs-12 col-md-8">\n    <div class="discover-section">\n      <h3>Hi {{ctrl.firstName() || \'there\'}}!</h3>\n      <p>This is the place to discover all things Mode. Welcome.</p>\n    </div>\n    <div class="discover-section">\n      <h3>Reporting: explore the building blocks</h3>\n      <p>Analyze data and build reports that inform decisions. Start simple, by exploring the building blocks featured in these example reports.</p>\n      <ul class="report-list-tile">\n        <li class="report-list-tile-item">\n          <a href="https://modeanalytics.com/demo/reports/d46eddf7bb56" target="_blank" rel="noopener" class="report-link-tile">\n            <div class="report-tile-media">\n              <div class="report-tile-preview">\n                <img class="report-tile-image" ng-src="{{ ctrl.AssetService.exampleReport1 }}" />\n              </div>\n              <div class="report-tile-hover-content">\n                <div class="report-tile-callout">View Report</div>\n              </div>\n            </div>\n            <div class="report-tile-body">\n              <div class="report-tile-main">\n                <div class="report-title">Instant Charts</div>\n              </div>\n              <div class="report-creator">Write SQL, build charts</div>\n            </div>\n          </a>\n        </li>\n        <li class="report-list-tile-item">\n          <a href="https://modeanalytics.com/demo/reports/e5e22a55bbd0" target="_blank" rel="noopener" class="report-link-tile">\n            <div class="report-tile-media">\n              <div class="report-tile-preview">\n                <img class="report-tile-image" ng-src="{{ ctrl.AssetService.exampleReport2 }}" />\n              </div>\n              <div class="report-tile-hover-content">\n                <div class="report-tile-callout">View Report</div>\n              </div>\n            </div>\n            <div class="report-tile-body">\n              <div class="report-tile-main">\n                <div class="report-title">Data Tables</div>\n              </div>\n              <div class="report-creator">Share data pulls instantly</div>\n            </div>\n          </a>\n        </li>\n        <li class="report-list-tile-item">\n          <a href="https://modeanalytics.com/demo/reports/812b0528773d" target="_blank" rel="noopener" class="report-link-tile">\n            <div class="report-tile-media">\n              <div class="report-tile-preview">\n                <img class="report-tile-image" ng-src="{{ ctrl.AssetService.exampleReport6 }}" />\n              </div>\n              <div class="report-tile-hover-content">\n                <div class="report-tile-callout">View Report</div>\n              </div>\n            </div>\n            <div class="report-tile-body">\n              <div class="report-tile-main">\n                <div class="report-title">Dashboards</div>\n              </div>\n              <div class="report-creator">KPIs, KPIs, KPIs</div>\n            </div>\n          </a>\n        </li>\n        <li class="report-list-tile-item">\n          <a href="https://modeanalytics.com/demo/reports/016cd563bb9f" target="_blank" rel="noopener" class="report-link-tile">\n            <div class="report-tile-media">\n              <div class="report-tile-preview">\n                <img class="report-tile-image" ng-src="{{ ctrl.AssetService.exampleReport4 }}" />\n              </div>\n              <div class="report-tile-hover-content">\n                <div class="report-tile-callout">View Report</div>\n              </div>\n            </div>\n            <div class="report-tile-body">\n              <div class="report-tile-main">\n                <div class="report-title">Filters</div>\n              </div>\n              <div class="report-creator">Add interactivity</div>\n            </div>\n          </a>\n        </li>\n        <li class="report-list-tile-item">\n          <a href="https://modeanalytics.com/demo/reports/c3a1d4a62f63" target="_blank" rel="noopener" class="report-link-tile">\n            <div class="report-tile-media">\n              <div class="report-tile-preview">\n                <img class="report-tile-image" ng-src="{{ ctrl.AssetService.exampleReport5 }}" />\n              </div>\n              <div class="report-tile-hover-content">\n                <div class="report-tile-callout">View Report</div>\n              </div>\n            </div>\n            <div class="report-tile-body">\n              <div class="report-tile-main">\n                <div class="report-title">Custom Viz</div>\n              </div>\n              <div class="report-creator">HTML, Javascript, and CSS</div>\n            </div>\n          </a>\n        </li>\n        <li class="report-list-tile-item">\n          <a href="https://modeanalytics.com/demo/reports/94bbed18898b" target="_blank" rel="noopener" class="report-link-tile">\n            <div class="report-tile-media">\n              <div class="report-tile-preview">\n                <img class="report-tile-image" ng-src="{{ ctrl.AssetService.exampleReport3 }}" />\n              </div>\n              <div class="report-tile-hover-content">\n                <div class="report-tile-callout">View Report</div>\n              </div>\n            </div>\n            <div class="report-tile-body">\n              <div class="report-tile-main">\n                <div class="report-title">Python Analysis</div>\n              </div>\n              <div class="report-creator">Curate the best output cells</div>\n            </div>\n          </a>\n        </li>\n        <li class="report-list-tile-item after-empty"></li>\n        <li class="report-list-tile-item after-empty"></li>\n        <li class="report-list-tile-item after-empty"></li>\n        <li class="report-list-tile-item after-empty"></li>\n        <li class="report-list-tile-item after-empty"></li>\n        <li class="report-list-tile-item after-empty"></li>\n      </ul>\n      <div class="discover-links-container">\n        <a class="discover-link" ng-href="{{ ctrl.owner.newReportLink }}" target="_self">Build a report from scratch</a>\n        <span class="spacer"></span>\n        <a class="discover-link" target="_blank" rel="noopener" href="https://help.modeanalytics.com/articles/key-features/">Learn about key features</a>\n      </div>\n    </div>\n    <div class="discover-section">\n      <h3>Build dashboards</h3>\n      <p>Mode Dashboards, a whole set of powerful new features, make it a snap to deliver meaningful metrics to every team. Full screen, data that automatically refreshes, and interactive charts powered by SQL help keep everyone up to date.</p>\n      <div class="discover-links-container">\n        <a class="discover-link" href="https://help.modeanalytics.com/dashboards/" target="_blank" rel="noopener">Check out the Dashboard guides</a>\n      </div>\n    </div>\n    <div class="discover-section">\n      <h3>Themes: for reports as good looking as the data itself</h3>\n      <p>Re-skin your reports in just a few clicks. \u201cMode Dark\u201d is perfect for displaying reports around your office. Add a custom theme to set your own brand colors, fonts, and styling for instant use in all of your reports.</p>\n      <div class="discover-links-container">\n        <a class="discover-link" target="_blank" rel="noopener" href="https://help.modeanalytics.com/articles/using-report-themes">How to use themes</a>\n        <span ng-if="ctrl.account.planCode === \'plus\' || ctrl.account.planCode === \'standard\'" class="spacer"></span>\n        <a ng-if="ctrl.account.planCode === \'plus\'" class="discover-link" target="_blank" rel="noopener" href="/organizations/themes">Add a theme</a>\n        <a ng-if="ctrl.account.planCode === \'standard\'" class="ng-isolate-scope discover-link" ng-click="$dismiss()" intercom-show="I\'m interested in custom themes!" intercom-email="sales@modeanalytics.com">Request a demo</a>\n      </div>\n    </div>\n    <div class="discover-section">\n      <h3>Spaces: fast access to your team\'s reports</h3>\n      <p>Spaces help you organize groups of reports for teams or projects. Every report starts its life in your Personal Space. When you\'re ready to share, simply move the report to a Space.</p>\n      <a href="{{ ctrl.owner.spacesIndexLink }}" class="btn btn-lg btn-primary">View Spaces Directory</a>\n      <div class="discover-links-container">\n        <a class="discover-link" href="https://help.modeanalytics.com/articles/spaces-best-practices/" target="_blank" rel="noopener">Spaces best practices</a>\n      </div>\n    </div>\n    <div class="discover-section">\n      <h3>Definitions: save time, build trust</h3>\n      <p>Definitions are saved SELECT statements that can be referenced throughout the platform. Set reusable, SQL-based business logic in one central place to ensure teams are pulling data correctly.</p>\n      <div class="discover-links-container">\n        <a class="discover-link" href="http://about.modeanalytics.com/definitions" target="_blank" rel="noopener">Learn about Definitions</a>\n      </div>\n    </div>\n    <div class="discover-section">\n      <h3>White-Label Embeds: get analytics to customers in record time</h3>\n      <p>Embedding analytics directly in your application or customer portal can be tough, but it doesn\'t have to be. Mode\'s White-Label Embeds help you display data to customers and partners.</p>\n      <div class="discover-links-container">\n        <a class="discover-link" href="https://about.modeanalytics.com/embedded-analytics/" target="_blank" rel="noopener">Request a demo</a>\n      </div>\n    </div>\n  </div>\n  <div class="discover-right-sidebar col-xs-12 col-md-4">\n    <div class="discover-new-container">\n      <div class="discover-new-header">\n        <h3>What\'s New</h3>\n      </div>\n      <ul class="mode-list">\n        <li class="discover-new-item"><a href="https://blog.modeanalytics.com/python-requests-library/" target="_blank" rel="noopener">Mode\'s Python Notebooks now support the Requests library</a></li>\n        <li class="discover-new-item"><a href="https://blog.modeanalytics.com/introducing-mode-webhooks/" target="_blank" rel="noopener">Product Update: Webhooks and Mode\'s API</a></li>\n        <li class="discover-new-item"><a href="https://blog.modeanalytics.com/visualization-filters/" target="_blank" rel="noopener">Product Update: Visualization Filters</a></li>\n      </ul>\n      <div class="discover-new-footer">\n        <a href="https://help.modeanalytics.com/articles/release-notes/" target="_blank" rel="noopener">Read Release Notes</a>\n      </div>\n    </div>\n    <div class="sidebar-container">\n      <h4>Discuss best practices</h4>\n      <p>Check out the Mode Community Forum to see how other analysts are getting the most out of Mode.</p>\n      <a href="https://forum.modeanalytics.com/" target="_blank" rel="noopener"><div class="btn btn-lg btn-secondary">Visit the Forum</div></a>\n    </div>\n    <div class="sidebar-container">\n      <h4>Learn SQL and Python</h4>\n      <p>Explore our tutorials to learn the tricks of the trade. Each lesson features practice problems and real-world data.</p>\n      <a href="https://community.modeanalytics.com/sql/tutorial/introduction-to-sql/" target="_blank" rel="noopener"><div class="btn btn-lg btn-secondary">Go to Tutorials</div></a>\n    </div>\n    <div class="sidebar-container">\n      <h4>Build custom data viz</h4>\n      <p>Learn to use HTML, CSS, and Javascript to display data in completely custom ways.</p>\n      <a href="https://community.modeanalytics.com/gallery/" target="_blank" rel="noopener"><div class="btn btn-lg btn-secondary">Explore the Gallery</div></a>\n    </div>\n    <div class="sidebar-container">\n      <h4>Helpful Links</h4>\n      <div><a href="https://blog.modeanalytics.com/" target="_blank" rel="noopener">Mode Blog</a></div>\n      <div><a href="https://community.modeanalytics.com/" target="_blank" rel="noopener">Community</a></div>\n      <div><a href="https://community.modeanalytics.com/gallery/" target="_blank" rel="noopener">Data Visualization Gallery</a></div>\n    </div>\n  </div>\n</div>'},KxDM:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Y29udGludW91cy1kYXRlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMSIgeD0iMCIgeT0iMiIgd2lkdGg9IjEwIiBoZWlnaHQ9IjgiIHJ4PSIxIj48L3JlY3Q+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9IjAiIHk9IjAiIHdpZHRoPSIxMCIgaGVpZ2h0PSI4IiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgPC9tYXNrPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Im1vY2t1cHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJkYXRlLWNvbnRpbnVvdXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMjItQ29weS0yIj4KICAgICAgICAgICAgICAgIDx1c2UgaWQ9IlJlY3RhbmdsZS0yMzA3LUNvcHkiIHN0cm9rZT0iIzRDRDJBMiIgbWFzaz0idXJsKCNtYXNrLTIpIiBzdHJva2Utd2lkdGg9IjIiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xOCIgZmlsbD0iIzRDRDJBMiIgeD0iMCIgeT0iNCIgd2lkdGg9IjkiIGhlaWdodD0iMSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuNSwyLjUgTDIuNSwwLjUiIGlkPSJMaW5lIiBzdHJva2U9IiM0Q0QyQTIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNSwyLjUgTDcuNSwwLjUiIGlkPSJMaW5lLUNvcHktOTQiIHN0cm9rZT0iIzRDRDJBMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},LF2W:function(e,t,n){"use strict";var r=n("PbPb"),o=(n.n(r),n("0iPh")),i=n.n(o),a=n("0YuG");n.n(a),n("PiCI");a.module("mode.components").directive("multiselectDropdown",["$timeout","$compile",function(e,t){return function(n,o,l){var s=i()(o[0]),c="dropdown btn-group",d="";l.block&&(c="btn-group-block clearfix",d=" btn-block");var u="";l.classes&&(u+=" "+l.classes);var p="";l.appendToBody&&(p="dropdown-append-to-body");var h="All Series";l.selectAllText&&(h=l.selectAllText);var g="All Selected";l.selectAllButtonText&&(g=l.selectAllButtonText);var m="multiselect-all";l.selectAllValue&&(m=l.selectAllValue);var f="";l.dropdownClasses&&(f=" "+l.dropdownClasses);var C={filter:'<div class="multiselect-filter"><input class="form-control multiselect-search next-form-control form-control-sm form-control-block" type="text"><div>',ul:'<ul uib-dropdown-menu class="multiselect-container dropdown-menu'+f+'"></ul>'};function checkAllOptions(e,t,n){var r=this;e.toArray().forEach(function(e){r.getInputByValue(e.value).prop("checked",n)}),e.prop("selected",t)}l.autoHeight&&(C.ul='<ul uib-dropdown-menu class="multiselect-container dropdown-menu'+f+'" select-height="'+l.autoHeight+'"></ul>'),s.multiselect({buttonClass:"btn btn-sm btn-select"+d+u,buttonContainer:"<div uib-dropdown "+p+' class="'+c+'" />',maxHeight:l.autoHeight?null:200,buttonWidth:l.block?"100%":"auto",selectedClass:l.selectAll?"":"active",appendToBody:!!l.appendToBody,id:l.multiselectDropdown,includeSelectAllOption:!!l.selectAll&&!l.initWithoutSelectAll,selectAllText:h,selectAllValue:m,enableFiltering:!!l.multiselectFilter,enableCaseInsensitiveFiltering:!!l.multiselectFilter,filterPlaceholder:"Find\u2026",templates:C,buttonTitle:function(e,t){if(0===e.length)return this.nonSelectedText;var n="";return e.each(function(){n+=i()(this).text().trim()+", "}),n.substr(0,n.length-2)},buttonText:function(e,t){if(l.selectAll&&i()('option[value="'+m+'"]:selected',t).length){var n=i()('option[value="'+m+'"]:selected',t).first();return checkAllOptions.call(this,n.siblings(),!1,!0),g+' <i class="icon-dropdown-arrow"></i>'}return 0===e.length?'<i class="icon-dropdown-arrow"></i>':e.length>1?r.first(e).text+" + "+(e.length-1)+' more selected <i class="icon-dropdown-arrow"></i>':r.first(e).text+' <i class="icon-dropdown-arrow"></i>'},onChange:function(e,t){if(e.prop("selected",!1),t){if(e.prop("selected",!0),l.selectAll&&e.prop("value")!==m)checkAllOptions.call(this,e.siblings('[value="'+m+'"]'),!1,!1),i()(this.getInputByValue(e.siblings('[value="'+m+'"]')[0].value)).addClass("partially-selected");else if(l.selectAll&&e.prop("value")===m){var n=!!e.siblings(":selected").length;checkAllOptions.call(this,e,!n,!n),checkAllOptions.call(this,e.siblings(),!1,!n),i()(this.getInputByValue(e[0].value)).removeClass("partially-selected")}}else l.selectAll&&e.prop("value")===m?(checkAllOptions.call(this,e.siblings(),!1,!1),i()(this.getInputByValue(e[0].value)).removeClass("partially-selected")):l.selectAll&&e.prop("value")!==m&&e.siblings('[value="'+m+'"]:selected').length&&(checkAllOptions.call(this,e.siblings('[value!="'+m+'"]'),!0,!0),checkAllOptions.call(this,e.siblings('[value="'+m+'"]'),!1,!1),i()(this.getInputByValue(e.siblings('[value="'+m+'"]')[0].value)).addClass("partially-selected"));s.change()},onMultipleChange:function(e,t){a.forEach(e,function(e){e.prop("selected",!1),t&&e.prop("selected",!0)}),s.change()},onCreateOption:function(e,t){l.selectAll&&e.prop("value")===m&&!e.prop("selected")&&e.siblings(":selected").length&&t.addClass("partially-selected")}}),t(s.next())(n),e(function(){n.$watch(function(){return r.map(s[0].options,function(e){return e.label})},function(t){e(function(){s.multiselect("rebuild")})},!0)}),n.$watch(l.ngModel,function(t){e(function(){s.multiselect("refresh")})})}}])},LHp7:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("PbPb"),o=(n.n(r),n("l1Lc")),i=n.n(o),a=n("u5jn"),l=n("JFI/"),s={controller:function(){function FormatSettingsController(){this.formatTypes=a.f,this.currencyTypes=a.j,this.decimalStyles=a.m,this.thousandDigits=a.A,this.datePresets=a.l,this.MAX_DECIMAL_PLACES=20,this.symbols=[{name:"$",value:"$"},{name:"Euro",value:"euro"}],this.columnTypeMenuOpen=!1,this.currencyTypeMenuOpen=!1,this.datePresetMenuOpen=!1}return FormatSettingsController.prototype.enabledFormatTypes=function(){var e=this;return this.enabledFormats&&this.enabledFormats.length?this.formatTypes.filter(function(t,n){return!!~e.enabledFormats.indexOf(t.id)}):this.formatTypes},FormatSettingsController.prototype.hasOptions=function(){return this.isInColumnTypes("currency","financial","number","percentage","date")},FormatSettingsController.prototype.isCurrencyType=function(){return this.isInColumnTypes("currency","financial")},FormatSettingsController.prototype.isCustomCurrencyType=function(){return this.isCurrencyType()&&"custom"===this.formatOptions[this.formatOptions.type].type},FormatSettingsController.prototype.isDateType=function(){return this.isInColumnTypes("date")},FormatSettingsController.prototype.hasDecimalOptions=function(){return this.isCustomCurrencyType()||this.isInColumnTypes("number","percentage")},FormatSettingsController.prototype.hasThousandsOptions=function(){return this.isCustomCurrencyType()||this.isInColumnTypes("number")},FormatSettingsController.prototype.getSampleCurrencyFormat=function(e){return"custom"!==e.id?e.symbol+"1"+e.thousandSeparator+"00000".slice(-e.thousandGroup)+e.decimalStyle+"00":""},FormatSettingsController.prototype.getName=function(e,t){var n=Object(r.find)(t,{id:e});return n?n.name:t[0].name},FormatSettingsController.prototype.closeColumnTypeMenu=function(){this.columnTypeMenuOpen=!1},FormatSettingsController.prototype.toggleColumnTypeMenu=function(){this.columnTypeMenuOpen=!this.columnTypeMenuOpen},FormatSettingsController.prototype.closeCurrencyTypeMenu=function(){this.currencyTypeMenuOpen=!1},FormatSettingsController.prototype.toggleCurrencyTypeMenu=function(){this.currencyTypeMenuOpen=!this.currencyTypeMenuOpen},FormatSettingsController.prototype.closeDatePresetMenu=function(){this.datePresetMenuOpen=!1},FormatSettingsController.prototype.toggleDatePresetMenu=function(){this.datePresetMenuOpen=!this.datePresetMenuOpen},FormatSettingsController.prototype.selectType=function(e){this.formatOptions.type=e.id,this.formatOptions[e.id]||(this.formatOptions[e.id]=e.defaultSettings()),this.pushChange(),this.closeColumnTypeMenu()},FormatSettingsController.prototype.selectCurrencyType=function(e){if("custom"===e.id){var t=Object(r.find)(a.j,{id:this.formatOptions[this.formatOptions.type].type||"usd"});this.formatOptions[this.formatOptions.type]=Object(r.omit)(t,["name","id"])}this.formatOptions[this.formatOptions.type].type=e.id,this.pushChange(),this.closeCurrencyTypeMenu()},FormatSettingsController.prototype.selectDatePreset=function(e){this.formatOptions[this.formatOptions.type].preset=e.id,this.pushChange(),this.closeDatePresetMenu()},FormatSettingsController.prototype.pushChange=function(){this.onChange({$formatOptions:this.formatOptions})},FormatSettingsController.prototype.decimalPlaces=function(e){if(!arguments.length)return this.formatOptions[this.formatOptions.type].decimalPlaces;this.formatOptions[this.formatOptions.type].decimalPlaces=Math.min(Object(l.d)(e),this.MAX_DECIMAL_PLACES)},FormatSettingsController.prototype.$onChanges=function(e){e.formatOptions&&this.onColumnViewChanged()},FormatSettingsController.prototype.isInColumnTypes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.indexOf(this.formatOptions.type)>=0},FormatSettingsController.prototype.onColumnViewChanged=function(){var e=this.formatOptions.type;e=Object(r.find)(this.formatTypes,{id:e})?e:"automatic";var t=Object(r.find)(this.formatTypes,{id:e});this.formatOptions[e]=this.formatOptions[e]?this.formatOptions[e]:t.defaultSettings(),this.formatOptions.type=e},FormatSettingsController}(),controllerAs:"ctrl",template:i.a,bindings:{formatOptions:"<",enabledFormats:"<",onChange:"&"}}},"Le+v":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Y2xlYXJfc2VsZWN0ZWQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTMiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9IjAiIHk9IjAiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxMyIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQ2xlYXItRHJvcGRvd24iPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNDYiPgogICAgICAgICAgICAgICAgPHVzZSBpZD0iUmVjdGFuZ2xlLTM1LUNvcHktNCIgc3Ryb2tlPSIjMDBCREU5IiBtYXNrPSJ1cmwoI21hc2stMikiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0iI0U5RjZGOCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTQtQ29weS0xMCIgZmlsbD0iIzAwQkRFOSIgeD0iMyIgeT0iNyIgd2lkdGg9IjEiIGhlaWdodD0iNiIgcng9IjAuNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00LUNvcHktMTEiIGZpbGw9IiMwMEJERTkiIHg9IjkiIHk9IjUiIHdpZHRoPSIxIiBoZWlnaHQ9IjgiIHJ4PSIwLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtNC1Db3B5LTEyIiBmaWxsPSIjMDBCREU5IiB4PSI2IiB5PSIzIiB3aWR0aD0iMSIgaGVpZ2h0PSIxMCIgcng9IjAuNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTQ0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMC4wMDAwMDAsIDYuMDAwMDAwKSIgc3Ryb2tlPSIjMDA4MTlDIj4KICAgICAgICAgICAgICAgICAgICA8ZWxsaXBzZSBpZD0iT3ZhbC0xMi1Db3B5LTIiIGZpbGw9IiNGRkZGRkYiIGN4PSI0LjUiIGN5PSI0LjUiIHJ4PSI0LjUiIHJ5PSI0LjUiPjwvZWxsaXBzZT4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNDMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuNTAwMDAwLCA0LjUwMDAwMCkgcm90YXRlKC0zMTUuMDAwMDAwKSB0cmFuc2xhdGUoLTQuNTAwMDAwLCAtNC41MDAwMDApIHRyYW5zbGF0ZSgyLjAwMDAwMCwgMi4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi41LDAuNSBMMi41LDQuNSIgaWQ9IkxpbmUiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQuNSwyLjUgTDAuNSwyLjUiIGlkPSJMaW5lIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},Lp8k:function(e,t){e.exports='<form method="POST" name="report-form" id="report-form" accept-charset="UTF-8" role="form">\n  <input name="utf8" type="hidden" value="\u2713" autocomplete="off">\n  <input type="hidden" name="authenticity_token" value="" autocomplete="off">\n  <input type="hidden" name="last_run_id" id="last_run_id" value="" autocomplete="off">\n  <input type="hidden" name="trk_source" id="trk_source" value="refresh_button" autocomplete="off">\n  <div class="run-parameters-header-container">\n    <div class="row">\n      <div class="col-sm-12">\n        <div class="parameters-header">\n          <div class="parameters-action pull-right">\n            <report-run-button\n              ng-if="(ctrl.formFields$ | async:this) && (ctrl.showRunButton$ | async:this) && ctrl.parametersFeatureToggleAvailable"\n              on-run-click="ctrl.handleRunClick()"\n              classes="btn btn-filled-primary parameters-run-button"\n              disabled="ctrl.manualRunDisabled$ | async:this"\n              expected-runtime="ctrl.expectedRuntime$ | async:this">\n            </report-run-button>\n          </div>\n          <h4 class="parameters-header-title font-note">\n            REPORT PARAMETERS\n            <i\n              ng-if="!(ctrl.parametersEnabled$ | async:this) && ctrl.parametersFeatureToggleAvailable"\n              class="icon-info"\n              uib-tooltip="Only Mode Business users can change parameters and refresh reports."\n              tooltip-placement="bottom"\n              tooltip-class="disabled-params-tooltip">\n            </i>\n          </h4>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="run-parameters-list">\n    <div class="run-parameters-container">\n      <div class="row">\n        <report-parameter-field\n          class="run-parameters-field"\n          ng-repeat="field in (ctrl.formFields$ | async:this) track by field.name"\n          field="field"\n          is-disabled="!(ctrl.parametersEnabled$ | async:this)"\n          ng-if="(ctrl.formFields$ | async:this) && ctrl.parametersFeatureToggleAvailable">\n        </report-parameter-field>\n      </div>\n    </div>\n  </div>\n</form>'},LtlW:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDx0aXRsZT4KICAgICAgICBjb2xvci1tYXJrCiAgICA8L3RpdGxlPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMy41MDggNC41djVIMi4wMDJjLS4yNzUgMC0uNTAyLS4yMjUtLjUwMi0uNDlWNC45OWMwLS4yNy4yMi0uNDkuNTAyLS40OWgxLjUwNnoiIHN0cm9rZT0iIzMyQjhENyIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMC41IDkuNXYtNWgxLjUwNmMuMjc1IDAgLjUwMi4yMjUuNTAyLjQ5djQuMDJjMCAuMjctLjIyLjQ5LS41MDIuNDlIMTAuNXoiIHN0cm9rZT0iIzY2Qzc4QyIvPgogICAgICAgIDxwYXRoIHN0cm9rZT0iI0Y3OUU2QSIgZD0iTTUuNSA0LjVoM3Y1aC0zeiIvPgogICAgPC9nPgo8L3N2Zz4="},"M/Ot":function(e,t){e.exports='<div class="progress" ng-show="!ctrl.pulseOnly">\n  <div class="progress-bar" role="progressbar" aria-valuenow="{{ ctrl.percent }}" aria-valuemin="0" aria-valuemax="100">\n    <span class="sr-only">{{ ctrl.percent }}% Complete</span>\n  </div>\n</div>\n<span class="loading-beacon" ng-if="!ctrl.simple"><span class="pulse one"></span><span class="pulse two"></span><span class="pulse three"></span><span class="spinner"></span></span>\n<span class="status" ng-if="!ctrl.simple && !ctrl.pulseOnly">Running <span mode-counter="ctrl.createdAt" class="counter"></span></span>'},"M/pt":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s});var r,o=n("m9my"),i=(n.n(o),n("vqB5")),a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),l={xAxis:{rotate:null,dateFormat:"auto",numberRange:{min:null,max:null},numberFormat:{format:null,precision:null},title:null,titleEnabled:!0},yAxis:{numberRange:{min:null,max:null},numberFormat:{format:null,precision:null},title:null,titleEnabled:!0,scaleType:"linear"},y2Axis:{numberRange:{min:null,max:null},numberFormat:{format:null,precision:null},title:null,titleEnabled:!0,scaleType:"linear"},legend:{enabled:!0,position:"auto",title:null,titleEnabled:!0},nullToZero:!1,showValues:!0,pieLabelsNotPercentages:!1,colors:{theme:"contrast",custom:[],map:{}},drilldownEnabled:!0},s=function(e){function EncResult(){return null!==e&&e.apply(this,arguments)||this}return a(EncResult,e),Object.defineProperty(EncResult.prototype,"encoding",{get:function(){return this.get("encoding",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(EncResult.prototype,"summary",{get:function(){return this.get("summary",void 0)},enumerable:!0,configurable:!0}),EncResult}(Object(i.e)({encoding:o.EMPTY_ENCODING,summary:new o.MarksSummary}))},"MUJ/":function(e,t,n){"use strict";var r=n("xqlZ"),o=n.n(r),i=n("zjEd"),a=n.n(i),l=n("0iPh"),s=n.n(l),c=n("PbPb"),d=(n("4uRg"),n("0YuG")),u=n("5TEl"),p=n("u5jn"),h=n("7n0L");function optionTypeToChartOption(e){return{name:e.name,type:e.id,icon:e.iconTrunc}}d.module("mode.chart").controller("ChartController",["$scope","$state","ChartSanitizerService","ChartInterpolaterService","ChartThemeService","WindowMessageService","DataLayerFlipperService","$timeout","$log","$window",function(e,t,n,r,o,i,a,l,u,g){var m=this;m.$onInit=function(){e.onRenderStart({$vizID:h.a.tokenFromVizID(e.chartId)})},m.trackRenderComplete=function(){e.onRenderEnd({$vizID:h.a.tokenFromVizID(e.chartId)})},m.isReportMode=function(){return!t.includes("application.reports.edit")},m.isPreviewMode=function(){return/embed-preview/.test(g.document.body.className)},m.titleEditDisabled=function(){return m.isReportMode()&&!m.isPreviewMode()},e.linkable="true"===s()("meta[name=linkable-report]").attr("content"),e.chartOptions={types:Object(c.keyBy)(p.a.map(optionTypeToChartOption),"type")},e.validTypes=[],e.isClipboardEnabled=!1,e.simpleThemes=["green","blue","orange","purple","gray"],t.includes("application.reports")&&(e.showSettings=!0),e.status=e.status||{unavailable:!1,message:""},e.errorImg=ASSET_PATHS.ERROR_GIF_PATH,e.title={editing:!1,value:""},e.setTheme=function(t){e.view.theme=t,e.view.chartColors=(o.getTheme(t)||o.getTheme(o.DEFAULT_THEME_ID)).colors},e.isSelected=function(t){return!(d.isUndefined(e.view)||!e.view)&&t===e.view.selectedChart},e.linkToData=function(t){e.linkable&&(t.preventDefault(),t.stopPropagation(),mode&&mode.linkToPage&&mode.linkToPage(e.data.query_token,"data"))},e.linkToQuery=function(t){e.linkable&&(t.preventDefault(),t.stopPropagation(),mode&&mode.linkToPage&&mode.linkToPage(e.data.query_token,"query"))},e.linkToLightbox=function(t){e.linkable&&(t.preventDefault(),t.stopPropagation(),mode&&mode.linkToPage&&mode.linkToPage({id:e.chartId,view:e.view},"lightbox"))},e.selectedType=function(){return e.view.selectedChart},e.select=function(t){e.view.selectedChart!==t&&e.chartOptions.types[t]&&(e.view.selectedChart=t)},e.toggle=function(){e.view&&e.data&&t.includes("application.reports")&&(e.view.showChart=!e.view.showChart,e.view.showChart&&refreshData(e.data))},e.toggleMessage=function(){return e.view&&e.view.showChart?"Hide chart":"Show chart"},e.updateChartTitle=function(t){e.view.chartTitle=t,"function"==typeof e.onEdit&&e.onEdit({$id:e.chartId,$view:e.view})},e.showChart=function(){return t.includes("application.reports")||d.isDefined(e.view)&&e.view&&d.isDefined(e.data)},e.isDateFormat=function(e){return"date"===e||"hour"===e||"full_mon"===e||"full_day"===e||"usa_full"===e||"mon_day"===e||"year"===e||"none"===e};var f=function(e){return d.isDefined(e)&&d.isDefined(e.columns)&&d.isDefined(e.content)};function isDatasetLarge(e){return d.isDefined(e.count)&&e.count>p.k}function isValidChartData(){if(!e.view.selectedChart)return u.warn("No chart type selected"),!1;var t=e.view.selectedChart;return d.isUndefined(e.view[t])||!function(e,t){switch(e){case"pie":return d.isDefined(t.value)&&d.isDefined(t.label);case"bar":case"line":case"linePlusBar":case"area":return d.isDefined(t.x)&&(d.isDefined(t.y)||d.isDefined(t.aggregate));default:return d.isDefined(t.x)&&d.isDefined(t.y)}}(t,e.view[t])?(u.warn("No settings found for chart"),!1):"line"!==t&&"area"!==t&&"scatter"!==t||!d.isUndefined(e.view[t].label)||(u.warn("Chart has no label"),!1)}function refreshData(o){var i;e.view&&(e.data=o&&o.datasets?o.datasets[e.view._dataset]:o,f(e.data)&&!isDatasetLarge(e.data)?(!0,n.sanitize(e.view,e.data,!t.includes("application.reports")),t.includes("application.reports")?(e.validTypes=r.interpolate(e.view,e.data,e.chartOptions),!e.view.selectedChart&&e.validTypes.length||e.validTypes.length&&!c.find(e.validTypes,{type:e.view.selectedChart})?e.select(e.validTypes[0].type):e.view.selectedChart&&c.find(e.validTypes,{type:e.view.selectedChart})?(i=e.view.selectedChart,e.view.selectedChart=void 0,e.select(i)):(u.warn("Selected chart type is not valid with given data"),e.status.unavailable=!0,e.status.invalidData=!0,e.status.message="")):isValidChartData()?(i=e.view.selectedChart,e.view.selectedChart=void 0,e.select(i)):(e.status.unavailable=!0,e.status.invalidData=!0,e.status.message="")):f(e.data)&&isDatasetLarge(e.data)&&(e.status.unavailable=!0,e.status.message="Mode charts will display up to 20K data points right now"))}e.$watch("dataset",refreshData);e.$watch("[chartId,view]",function(t,n){var r=n[0],o=t[0],i=t[1],a=n[1];if(i&&a&&i.selectedChart&&function(t){return d.isDefined(t)&&d.isDefined(e.view)&&d.isDefined(e.view.selectedChart)&&d.isDefined(e.data)}(i[i.selectedChart])){var l=i[i.selectedChart];((function(e,t){return d.isDefined(e.ylabel)&&e.ylabel!==t.ylabel&&e.ylabel.length>1||d.isDefined(e.xlabel)&&e.xlabel!==t.xlabel&&e.xlabel.length>1})(l,a[i.selectedChart])||function(e,t){return d.isDefined(e.chartTitle)&&e.chartTitle!==t.chartTitle}(i,a))&&r===o||function(t){if(!isValidChartData())return e.status.unavailable=!0,e.status.invalidData=!0,void(e.status.message=e.view.errorMsg||"");if(isDatasetLarge(e.data)&&!t.aggregate)return e.status.unavailable=!0,void(e.status.message="Mode charts will display up to 20K data points right now");var n,r=c.cloneDeep(e.data.content)||[],o={};if(t&&t.type){var i=c.find(e.data.columns,function(e){return e.name===t.x});!i||"datetime"!==i.type&&"date"!==i.type?i&&"datetime"!==i.type&&"date"!==i.type&&e.isDateFormat(t.xformat)&&delete t.xformat:(r=c.sortBy(r,function(t){return new Date(t[e.view[e.selectedType()].x])}),o={xformat:e.isDateFormat(t.xformat)?t.xformat:"date"}),i&&"number"!==(n=i).type&&"integer"!==n.type&&"float"!==n.type&&"real"!==n.type&&"datetime"!==n.type&&"date"!==n.type&&(o={xtype:"string"}),t.g&&t.f&&c.includes(t.f,"$mode-select-all$")&&(t.f=c.chain(r).map(t.g).uniq().map(function(e){return e}).value().sort(function(e,t){return e>t?1:e<t?-1:0}))}e.status.unavailable=!1,e.status.message="",e.render(r,e.selectedType(),d.extend({},t,o))}(d.extend({type:i.selectedChart},l))}},!0)}]);var g=n("dsf/"),m=n("P6nd");function isValidData(e){return null!==e&&void 0!==e&&("string"!=typeof e||e.length>0)}d.module("mode.chart").directive("modeMultiChart",["nv","numeral","$window","$timeout","ChartThemeService","Utils",function(e,t,n,r,i,l){var h=i.getTheme(i.DEFAULT_THEME_ID).colors,f=i.DEFAULT_SIMPLE_THEME_ID,C=i.getTheme(f).colors,y=175;function pivotDataset(e,t,n,r,i,a){void 0===a&&(a=null);var l={fields:[{type:"group",name:t}],aggregates:[]};d.isArray(i)||(i=[i]),d.forEach(i,function(e){var t={type:r,field:e,as:void 0};a&&(t.as=e+a),l.aggregates.push(t)}),n&&l.fields.push({type:"pivot",name:n});var s=o()(e).config(l).all(),u=[];if(n){u=e[0]&&"number"==typeof e[0][n]?s.values(n).sort(function(e,t){var n=parseFloat(e),r=parseFloat(t);return n<r?-1:n>r?1:0}):s.values(n).sort();var p=[];return c.forEach(s.data,function(e){var n={};n[t]=e[t],c.forEach(u,function(t){n[t]=null==e[t]?null:e[t]}),p.push(n)}),p}return s.data}var b=function(t,n,r,o){!function(e){e.yAxis&&null!==e.yAxis.ticks()&&e.yAxis.ticks()<3&&e.yAxis.ticks(3)}(r),function(t,n,r){t.dispatch.hasOwnProperty("renderEnd")?t.dispatch.on("renderEnd",r):e.dispatch.on("render_end",r)}(r,o.selectedType(),o.ctrl.trackRenderComplete),t.find("svg")[0]&&u.select(t[0]).select(".chart-svg").html(""),u.select(t[0]).select(".chart-svg").append("svg").attr("class","nvd3svg").datum(n).call(r);var i,a=r.tooltip.valueFormatter(),s=r.tooltip.keyFormatter(),c=r.tooltip.headerFormatter();return r.tooltip.valueFormatter(function(e,t){return l.escapeHTML(a(e,t))}).keyFormatter(function(e,t){return l.escapeHTML(s(e,t))}).headerFormatter(function(e){return l.escapeHTML(c(e))}),r.update&&(r.update(),i=e.utils.windowResize(r.update)),o.setChart(r,i),r};function shouldFormat(e){return Math.abs(e)>9999999||Math.abs(e)<1e-4&&0!==e}function truncateStringAxes(e){return"string"==typeof e.x&&e.x.length>y&&(e.x=e.x.substring(0,y)),"string"==typeof e.label&&e.label.length>y&&(e.label=e.label.substring(0,y)),e}function formatChart(e,n,r,o){function xStringTooLong(e){return e.length>20}function setFontSize(){e.xAxis.fontSize("8px")}if(void 0===o&&(o=void 0),e.margin({right:40,left:60}),e.xAxis&&e.xAxis.showMaxMin(!1),e.yAxis&&e.yAxis.showMaxMin(!1),e.y1Axis&&e.y1Axis.showMaxMin(!1),e.y2Axis&&e.y2Axis.showMaxMin(!1),e.xAxis&&e.xAxis.tickPadding(8),e.yAxis&&e.yAxis.tickPadding(8),n.xlabel&&e.margin({bottom:70}),n.ylabel&&e.margin({left:90}),n.xangle&&(e.xAxis.rotateLabels(n.xangle),e.margin({bottom:90}),o&&o.values&&"date"!==n.xformat&&c.some(o.values,function(e){return e.x&&xStringTooLong(e.x.toString())})&&setFontSize()),n.hideLegend&&e.showLegend&&e.showLegend(!1),e.legend&&(e.legend.options().key=function(e){return void 0===e.key||null===e.key?"<null>":e.key}),d.isDefined(n.ymin)||d.isDefined(n.ymax)){var i,a,l=e.stacked&&d.isDefined(n.yminTotal)?n.yminTotal:n.yminFromData,s=e.stacked&&d.isDefined(n.ymaxTotal)?n.ymaxTotal:n.ymaxFromData;n.ymin>n.yminFromData||n.ymax<n.ymaxFromData?(e.clipEdge&&e.clipEdge(!0),e.bars&&e.bars.clipEdge(!0),e.lines&&e.lines.clipEdge(!0)):(e.clipEdge&&e.clipEdge(!1),e.lines&&e.lines.clipEdge(!1)),i=isNaN(n.ymin)||null==n.ymin?(i=l)>0?0:i:n.ymin,a=isNaN(n.ymax)||null==n.ymax?s:n.ymax,d.isDefined(n.ymin)&&(e.forceY&&e.forceY([i]),e.bars&&e.bars.forceY([i]),e.lines&&e.lines.forceY([i])),d.isDefined(n.ymax)&&(e.forceY&&e.forceY([a]),e.bars&&e.bars.forceY([a]),e.lines&&e.lines.forceY([a])),d.isDefined(n.ymin)&&d.isDefined(n.ymax)&&(e.forceY&&e.forceY([i,a]),e.bars&&e.bars.forceY([i,a]),e.lines&&e.lines.forceY([i,a])),(i>l||a<s)&&(e.yDomain&&e.yDomain([i,a]),e.bars&&e.bars.yDomain([i,a]),e.lines&&e.lines.yDomain([i,a]))}else e.yNice&&e.yNice(!0),e.lines&&e.lines.yNice&&e.lines.yNice(!0),e.lines&&e.lines.clipEdge&&e.lines.clipEdge(!1);var p,h;(d.isDefined(n.xmin)||d.isDefined(n.xmax))&&(p=isNaN(n.xmin)?n.xminFromData:n.xmin,h=isNaN(n.xmax)?n.xmaxFromData:n.xmax,e.xDomain([p,h]));if(n.yformat){if("none"!==n.yformat){var m=(function(e,t,n){if(n)return customAxisFormat(n,e,t)}).bind(this,n.yformat,n.yprecision);e.yAxis&&e.yAxis.tickFormat(m),e.y1Axis&&e.y1Axis.tickFormat(m),e.y2Axis&&e.y2Axis.tickFormat(m),e.valueFormat&&e.valueFormat(m)}}else{var f=(function(e,n,r){if(shouldFormat(r)){if(!d.isNumber(r))return"";var o=u.formatPrefix(e),i=d.isNumber(n)?"toFixed":"toPrecision",a=d.isNumber(n)?Math.max(1,Math.min(n,21)):Math.min(5,getPrecisionOfNumber(r));return t(o.scale(r)[i](a))+o.symbol}return d.isNumber(n)?t(r).format("0,0"+getPrecisionString(n)):t(r).format("0,0[.][0000]")}).bind(this,r,n.yprecision);e.yAxis&&e.yAxis.tickFormat(f),e.y1Axis&&e.y1Axis.tickFormat(f),e.y2Axis&&e.y2Axis.tickFormat(f),e.valueFormat&&e.valueFormat(f)}if(!n||"string"!==n.xtype)if(n&&isDateFormat(n.xformat))if(e.lines&&e.lines.xScale(u.time.scale()),e.bars&&e.lines&&e.bars.xScale(u.time.scale()),e.lines&&e.lines.scatter&&e.lines.scatter.xScale(u.time.scale()),e.stacked&&e.stacked.scatter&&e.stacked.scatter.xScale(u.time.scale()),e.scatter&&e.scatter.xScale(u.time.scale()),(e.multibar||e.discretebar)&&e.reduceXTicks(!0),"date"===n.xformat){var C=u.time.format.multi([["%-I:%M%p",function(e){return e.getMinutes()}],["%-I%p",function(e){return e.getHours()}],["%b %-d",function(e){return 1!==e.getDate()}],["%b %-d",function(e){return e.getMonth()}],["%Y",function(){return!0}]]);if(e.x(function(t){return e.scatter||e.bars&&e.lines?new Date(t.x):function(e){var t=new Date(e),n=6e4*t.getTimezoneOffset();return new Date(t.getTime()+n)}(t.x)}).xAxis.tickFormat(function(e){var t=C(new Date(e));return n.xangle&&xStringTooLong(t)&&setFontSize(),t}),e.interactiveLayer||e.tooltip){var y=e.interactiveLayer&&e.interactiveLayer.tooltip||e.tooltip,b=e.scatter||e.bars&&e.lines?{}:{ignoreTimezone:!0},v=Object(g.b)("MMM D, YYYY hh:mmA",b);y.headerFormatter(function(e){if(e)return v(e)})}}else{var I={date:"%x",hour:"%x %X",full_mon:"%b %Y",full_day:"%e %b %Y",usa_full:"%b %e %Y",mon_day:"%m/%d",year:"%Y"};e.x(function(e){return new Date(e.x)}).xAxis.tickFormat(function(e){return u.time.format.utc(I[n.xformat]||"%x")(new Date(e))})}else if(n.xformat){if("none"!==n.xformat){var S=(function(e,t,n,r){if(e){if(d.isUndefined(e.values[r]))return;r=e.values[r].x}if(r)return customAxisFormat(r,t,n)}).bind(this,o,n.xformat,n.xprecision);e.xAxis.tickFormat(S)}}else switch(e.xAxis.tickFormat(function(e,r,i){if(d.isDefined(i)&&o&&(e=d.isDefined(o.values[e])?o.values[e].x:void 0),void 0!==e){if(shouldFormat(e)){if(!d.isNumber(e))return e;var a=u.formatPrefix(e),l=d.isNumber(n.xprecision)?"toFixed":"toPrecision",s=d.isNumber(n.xprecision)?Math.max(1,Math.min(n.xprecision,21)):Math.min(5,getPrecisionOfNumber(e));return a.scale(e)[l](s)+a.symbol}return d.isNumber(n.xprecision)?t(e).format("0,0"+getPrecisionString(n.xprecision)):t(e).format("0,0[.][0000]")}}),n.type){case"area":case"line":e.tooltip.headerEnabled()&&e.tooltip.headerFormatter(function(t,n){return e.xAxis.tickFormat()(o.values[t].x,n)}),e.interactiveLayer&&e.interactiveLayer.tooltip.headerEnabled()&&e.interactiveLayer.tooltip.headerFormatter(function(t,n){return e.xAxis.tickFormat()(o.values[t].x,n)})}}function getPrecisionOfNumber(e){if(!isFinite(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;for(t=1;0!==Math.floor(e/t);)t*=10,n++;return n}function getPrecisionString(e){for(var t,n=0;n<e;n++)t=t?t+"0":".0";return t}function customAxisFormat(e,n,r){var o;if("percent"===n)o=100*e;else{var i={thousands:1e3,millions:1e6,billions:1e9};o=i[n]?e/i[n]:e}switch(o=d.isNumber(r)?t(o).format("0,0"+getPrecisionString(r)):t(o).format("0,0[.][0000]"),n){case"percent":return o+"%";case"currency":return"$"+o;default:return o}}function tooManyRows(e){return e.length>p.v}function showTooManyRowsError(e){e.status.unavailable=!0,e.status.hasTooManyRows=!0,e.status.message="Mode can plot up to 2,000 distinct values. To create a chart, try selecting an aggregate or pick a different x-axis."}function fillColorsToColumns(e,t){if(t>e.length){for(var n=[].concat(e),r=1,o=e.length;o<t;o+=e.length){for(var i=0;i<e.length&&i+o<t;i++)n.push(l.colorLuminance(n[(r-1)*e.length+i],-.2));r++}return n}return e}var v=function(t,n,r,o){var i=r&&r.x?r.x:"",a=r&&d.isArray(r.y)?r.y:d.isDefined(r.y)?[r.y]:[r.x],l=r&&d.isArray(r.y)?r.y:d.isDefined(r.y)?[r.y]:[r.x];r.g&&a&&a.length&&a.length<2&&(a=r&&d.isArray(r.f)?r.f:[r.f]);var s,u=[];d.forEach(a,function(e,t){u.push({values:[],key:e})});var p=n;if(d.isDefined(r.g)&&null!==r.g&&l.length&&l.length<2)p=pivotDataset(n,r.x,r.g,r.gValueFn,l[0]),a=c.reject(a,function(e){return p[0]&&void 0===p[0][e]});else if(r.aggregate&&l.length){var g="_aggregate_of";if((p=pivotDataset(n,r.x,void 0,r.aggregate,l,g))&&p[0]&&isNaN(p[0][l[0]+g]))return void(o.chartError=!0)}a.length&&tooManyRows(p)?showTooManyRowsError(o):(d.forEach(p,function(e){d.forEach(a,function(t,n){var o=g?t+g:t;if(a.length>1||"number"==typeof e[o]&&!isNaN(e[o])){var l="number"!=typeof e[o]||isNaN(e[o])?r.nullToZero?0:null:e[o];s=d.isDefined(s)?Math.max(s,l):l,isValidData(e[i])&&u[n].values.push(truncateStringAxes({x:e[i],y:l}))}})}),e.addGraph(function(){var n,i=a.length>1?e.models.multiBarChart():e.models.discreteBarChart();i.staggerLabels(!1).duration(0),a.length<=1&&!r.xhideval&&i.showValues&&i.showValues(!0),u[0]&&u[0].values.length>75?(a.length>1&&i.reduceXTicks(!0),i.showValues&&i.showValues(!1)):a.length>1&&i.reduceXTicks(!1),!r.g||l.length>1?(i.x(function(e,t){return d.isDefined(t)?t:e.x}).xAxis.tickFormat((n=u,function(e,t,r){return d.isDefined(r)?d.isDefined(n[0].values[e])?n[0].values[e].x:void 0:e})),formatChart(i,r,s,u[0])):formatChart(i,r,s),r.stacked&&i.stacked&&i.stacked(!0),i.showControls&&i.showControls(!1),r.xangle&&i.staggerLabels(!1);var c=r.colors||h;a.length>1?i.color(fillColorsToColumns(c,a.length)):i.color([c[0]]);try{return b(t,u,i,o)}catch(e){console.error(e)}}))};function isDateFormat(e){return"date"===e||"hour"===e||"full_mon"===e||"full_day"===e||"usa_full"===e||"mon_day"===e||"year"===e}return{template:a.a,controller:"ChartController",controllerAs:"ctrl",restrict:"AE",scope:{dataset:"=",view:"=?setView",status:"=?",chartExists:"=",chartId:"@id",removeFn:"&",saveFn:"&",cancelFn:"&",onAction:"&",onEdit:"&?",onRenderStart:"&?",onRenderEnd:"&?",viewer:"<"},link:function(t,o,i){l.locationSearchLookup(n.location.search,"report_owner_username");t.chartReference,t.chartHandler;var a=s()(o);t.copySuccess=function(){t.onAction({$action:{type:m.a.ShowAlert,success:!0,message:"Link to chart copied successfully"}})},t.setChart=function(e,n){t.chartHandler&&t.chartHandler.clear(),t.chartHandler=n,t.chartReference=e},t.render=function(n,i,l){t.chartMessage="",t.chartError=!1,s()(o).find("svg")[0]&&a.find("svg").first().remove(),r(function(){switch(i){case"bar":v(a,n,d.extend({colors:t.view.chartColors},l),t);break;case"line":!function(t,n,r,o){var i=r&&r.x?r.x:"",a=r&&d.isArray(r.y)?r.y:d.isDefined(r.y)?[r.y]:[r.x],l=r&&d.isArray(r.y)?r.y:d.isDefined(r.y)?[r.y]:[r.x];r.g&&a.length&&a.length<2&&(a=r&&d.isArray(r.f)?r.f:[r.f]);var s,u=r&&r.label?r.label:"",p=[];d.forEach(a,function(e,t){p.push({values:[],key:e})});var g=n;if(d.isDefined(r.g)&&null!==r.g&&l.length&&l.length<2)g=pivotDataset(n,r.x,r.g,r.gValueFn,l[0]),a=c.reject(a,function(e){return g[0]&&void 0===g[0][e]});else if(r.aggregate&&l.length){var m="_aggregate_of";if((g=pivotDataset(n,r.x,void 0,r.aggregate,l,m))&&g[0]&&isNaN(g[0][l[0]+m]))return void(o.chartError=!0)}if(a.length&&tooManyRows(g))showTooManyRowsError(o);else{var f=Number.MAX_VALUE,C=Number.MIN_VALUE;d.forEach(g,function(e,t){d.forEach(a,function(n,o){var a=m?n+m:n,l="number"!=typeof e[a]||isNaN(e[a])?r.nullToZero?0:null:e[a];s=d.isDefined(s)?Math.max(s,l):l,d.isNumber(l)&&(f=Math.min(f,l),C=Math.max(C,l)),isValidData(e[i])&&p[o].values.push(truncateStringAxes({x:e[i],y:l,index:t,label:e[u]}))})}),c.every(p,function(e){return e.values&&1===e.values.length})&&(p=[]),(f<0&&C<0||f>0&&C>0)&&(!d.isDefined(r.ymin)&&f>0&&(C-f)/C>.2?r.ymin=0:!d.isDefined(r.ymax)&&C<0&&(f-C)/f>.2&&(r.ymax=0)),e.addGraph(function(){var n=e.models.lineChart().color(fillColorsToColumns(r.colors||h,a.length));n.x(function(e,t){return e.index}).xAxis.tickFormat(function(e){var t={index:e},n=c.find(p[0].values,t);return d.isDefined(n)?n.x:void 0}),p.length&&formatChart(n,r,s,p[0]),n.useVoronoi(!1),n.interactiveLayer.showGuideLine(!1),n.useInteractiveGuideline(!0);try{return b(t,p,n,o)}catch(e){console.error(e)}})}}(a,n,d.extend({colors:t.view.chartColors},l),t);break;case"linePlusBar":!function(t,n,r,o){var i,a,l=r&&r.x?r.x:"";i=a=r.ybars&&r.ylines?[r.ybars,r.ylines]:r&&d.isArray(r.y)?r.y:d.isDefined(r.y)?[r.y]:[r.x];var s,p=r&&r.label?r.label:"",h=[];d.forEach(i,function(e,t){h.push({values:[],key:e})});var g=n;if(r.aggregate&&a.length){var m="_aggregate_of";if((g=pivotDataset(n,r.x,void 0,r.aggregate,a,m))&&g[0]&&isNaN(g[0][a[0]+m]))return void(o.chartError=!0)}if(i.length&&tooManyRows(g))showTooManyRowsError(o);else{var y,v,I=Number.MAX_VALUE,S=Number.MIN_VALUE;r.colors&&c.includes(o.simpleThemes,o.view.theme)?y=r.colors:(y=C,o.setTheme(f)),d.forEach(g,function(e){d.forEach(i,function(t,n){var o=m?t+m:t,i="number"!=typeof e[o]||isNaN(e[o])?r.nullToZero?0:null:e[o];s=d.isDefined(s)?Math.max(s,i):i,d.isNumber(i)&&(I=Math.min(I,i),S=Math.max(S,i)),r.ybars&&h[n].key===r.ybars&&(v=h[n]),isValidData(e[l])&&h[n].values.push(truncateStringAxes({x:e[l],y:i,label:e[p]}))})}),!r.ybars&&h[0]&&(v=h[0]),v&&(v.bar=!0,v.color=y[4]),c.every(h,function(e){return e.values&&1===e.values.length})&&(h=[]),(I<0&&S<0||I>0&&S>0)&&(!d.isDefined(r.ymin)&&I>0&&(S-I)/S>.2?r.ymin=0:!d.isDefined(r.ymax)&&I<0&&(I-S)/I>.2&&(r.ymax=0)),e.addGraph(function(){var n,i,a=e.models.linePlusBarChart().color(y),l=r.xformat&&isDateFormat(r.xformat);a.lines.duration(0),a.lines2.duration(0),a.y1Axis.duration(0),a.y2Axis.duration(0),a.y3Axis.duration(0),a.y4Axis.duration(0),a.xAxis.duration(0),a.x2Axis.duration(0),a.focusEnable(!1),a.x(function(e,t){return d.isDefined(t)?t:e.x}).xAxis.tickFormat((n=h,function(e,t,r){var o;return d.isDefined(r)?(o=d.isDefined(n[0].values[e])?n[0].values[e].x:void 0,l?u.time.format.utc("%x")(new Date(o)):o):e})),a.tooltip.keyFormatter((i=a.tooltip.keyFormatter(),function(e,t){return i.call(null,void 0===(n=e)?"":n,t);var n})),h.length&&(formatChart(a,r,s,h[0]),r.xangle||r.xlabel||a.margin({bottom:50})),a.useVoronoi(!0);try{return b(t,h,a,o)}catch(e){console.error(e)}})}}(a,n,d.extend({colors:t.view.chartColors},l),t);break;case"area":!function(t,n,r,o){var i=r&&r.x?r.x:"",a=r&&d.isArray(r.y)?r.y:d.isDefined(r.y)?[r.y]:[r.x],l=r&&d.isArray(r.y)?r.y:d.isDefined(r.y)?[r.y]:[r.x];r.g&&a.length&&a.length<2&&(a=r&&d.isArray(r.f)?r.f:[r.f]);var s,u=r&&r.label?r.label:"",p=[];d.forEach(a,function(e,t){p.push({values:[],key:e})});var g=n;if(d.isDefined(r.g)&&null!==r.g&&l.length&&l.length<2)g=pivotDataset(n,r.x,r.g,r.gValueFn,l[0]),a=c.reject(a,function(e){return g[0]&&void 0===g[0][e]});else if(r.aggregate&&l.length){var m="_aggregate_of";if((g=pivotDataset(n,r.x,void 0,r.aggregate,l,m))&&g[0]&&isNaN(g[0][l[0]+m]))return void(o.chartError=!0)}a.length&&tooManyRows(g)?showTooManyRowsError(o):(d.forEach(g,function(e){d.forEach(a,function(t,n){var r=m?t+m:t;if(a.length>1||"number"==typeof e[r]&&!isNaN(e[r])){var o="number"!=typeof e[r]||isNaN(e[r])?0:e[r];s=d.isDefined(s)?Math.max(s,o):o,isValidData(e[i])&&p[n].values.push(truncateStringAxes({x:e[i],y:o,label:e[u]}))}})}),c.every(p,function(e){return e.values&&1===e.values.length})&&(p=[]),e.addGraph(function(){var n=e.models.stackedAreaChart();n.color(fillColorsToColumns(r.colors||h,a.length)),n.x(function(e){return e.index}).xAxis.tickFormat(function(e){return d.isDefined(p[0].values[e])?p[0].values[e].x:void 0}),n.showControls(!1),r.expanded&&n.style&&n.style("expand"),p.length&&formatChart(n,r,s,p[0]),n.useVoronoi(!1),n.interactiveLayer.showGuideLine(!1),n.useInteractiveGuideline(!0);try{return b(t,p,n,o)}catch(e){console.error(e)}}))}(a,n,d.extend({colors:t.view.chartColors},l),t);break;case"scatter":!function(t,n,r,o){var i=r&&r.x?r.x:"",a=r&&d.isArray(r.y)?r.y:[r.y],l=r&&r.size?r.size:void 0;r.g&&(a=r&&d.isArray(r.f)?r.f:[r.f]);var s,c=r&&r.label?r.label:"",u=[];d.forEach(a,function(e,t){u.push({values:[],key:e})}),d.forEach(n,function(e){d.forEach(a,function(t,n){s=d.isDefined(s)?Math.max(s,e[t]):e[t],isValidData(e[i])&&u[n].values.push(truncateStringAxes({x:e[i],y:e[t],label:e[c],size:l?e[l]:1}))})}),e.addGraph(function(){var n,i=e.models.scatterChart().color(fillColorsToColumns(r.colors||h,a.length));if(a.length<=1&&i.showLegend(!1),i.clipVoronoi(!1),i.interactiveLayer||i.tooltip){var l=i.interactiveLayer&&i.interactiveLayer.tooltip||i.tooltip;l.contentGenerator((n=l.contentGenerator(),function(e){var t,r=n.apply(void 0,[e]),o=i.scatter||i.bars&&i.lines?{}:{ignoreTimezone:!0};return[function(e){return"<h3>"+e+"</h3>"}((t=e.point.label,"string"==typeof t&&Date.parse(t)>0?Object(g.b)("MMM D, YYYY hh:mmA",o)(new Date(t)):t)),r].join("")}))}formatChart(i,r,s);try{return b(t,u,i,o)}catch(e){console.error(e)}})}(a,n,d.extend({colors:t.view.chartColors},l),t);break;case"pie":!function(t,n,r,o){var i=r&&r.value?r.value:"",a=r&&d.isArray(r.label)?r.label:[r.label],l=[],s=n;if(r.aggregate&&a){var c="_aggregate_of";if((s=pivotDataset(n,a,void 0,r.aggregate,[i],c))&&s[0]&&isNaN(s[0][i+c]))return void(o.chartError=!0)}tooManyRows(s)?showTooManyRowsError(o):(d.forEach(s,function(e){var t=c?i+c:i;"number"!=typeof e[t]||isNaN(e[t])||isValidData(e[t])&&l.push(truncateStringAxes({value:e[t],label:e[a]}))}),l.length>30&&(o.chartMessage="The legend is hidden for pie charts with over 30 slices"),e.addGraph(function(){var n=e.models.pieChart().x(function(e){return e.label}).y(function(e){return e.value}).showLabels(!0).labelThreshold(.05).labelsOutside(!0).color(fillColorsToColumns(r.colors||h,l.length));(l.length>30||r.hideLegend)&&n.showLegend(!1),r.xhideval&&n.showLabels(!1),r.donut&&n.donut(!0).donutRatio(.35),r.realvalue||n.labelType("percent");try{return b(t,l,n,o)}catch(e){console.error(e)}}))}(a,n,d.extend({colors:t.view.chartColors},l),t);break;default:v(a,n,null,t)}},100)},t.$on("$destroy",function(){t.chartReference&&(t.chartReference.interactiveLayer&&t.chartReference.interactiveLayer.tooltip&&"function"==typeof t.chartReference.interactiveLayer.tooltip.id&&s()("#"+t.chartReference.interactiveLayer.tooltip.id()).remove(),t.chartReference.tooltip&&"function"==typeof t.chartReference.tooltip.id&&s()("#"+t.chartReference.tooltip.id()).remove()),a.find("svg")[0]&&u.select(a[0]).select(".chart-svg").select("svg").remove(),t.setChart()})}}}])},OR75:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGlzY3JldGUtZGF0ZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAiIHk9IjIiIHdpZHRoPSIxMCIgaGVpZ2h0PSI4IiByeD0iMSI+PC9yZWN0PgogICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIG1hc2tDb250ZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAiIGhlaWdodD0iOCIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZGF0ZS1kaXNjcmV0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS4wMDAwMDAsIDEuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yMiI+CiAgICAgICAgICAgICAgICA8dXNlIGlkPSJSZWN0YW5nbGUtMjMwNy1Db3B5IiBzdHJva2U9IiMyN0I4RDkiIG1hc2s9InVybCgjbWFzay0yKSIgc3Ryb2tlLXdpZHRoPSIyIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTgiIGZpbGw9IiMyN0I4RDkiIHg9IjAiIHk9IjQiIHdpZHRoPSI5IiBoZWlnaHQ9IjEiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yLjUsMi41IEwyLjUsMC41IiBpZD0iTGluZSIgc3Ryb2tlPSIjMjdCOEQ5IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjUsMi41IEw3LjUsMC41IiBpZD0iTGluZS1Db3B5LTk0IiBzdHJva2U9IiMyN0I4RDkiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},OZ53:function(e,t,n){"use strict";t.a=function(e){e.config(["ModeAPIProvider",function(e){e.configure(document.domain,location.port,{ssl:"https:"===location.protocol})}]),e.factory("httpErrorHandler",[function(){var e={};return{set:function(t,n){e.message=t,e.detail=n},clear:function(){e={}}}}]),e.config(["$httpProvider",function(e){l()("meta[name=csrf-param]").attr("content");var t=l()("meta[name=csrf-token]").attr("content"),n=l()("meta[name=webapp-revision]").attr("content");e.defaults.headers.common["X-CSRF-Token"]=t,e.defaults.headers.common["X-REQUESTED-WITH"]="XMLHttpRequest",e.defaults.headers.common.Accept="application/vnd.mode+json",e.defaults.headers.common["Webapp-Revision"]=n}]),e.config(["$logProvider",function(e){var t=!!l()("meta[name=debugjs]").attr("content");e.debugEnabled(t)}]),e.config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|localhost):/)}]),e.config(["$uibTooltipProvider",function(e){e.options({animation:!1})}]),e.config(["$animateProvider",function(e){e.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/)}]),e.config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","https://assets*.modeanalytics.com/**","https://modesandbox.com/**","https://staging.modesandbox.com/**","https://lab.modesandbox.com/**","https://assets*.modesandbox.com/**","http://assets*.modeanalytics.dev:3000/**","http://*modeanalysis.dev:3000/**","http://assets*.goat.farm:3000/**","http://*.goatpen.farm:3000/**"])}]),e.constant("angularMomentConfig",{preprocess:function(e){return o.a.utc(e)},timezone:null}),e.config(["$provide",function(e){e.decorator("$q",["$delegate",function(e){var t;return i.isUndefined(e.spread)&&(e.spread=function(e,t){return function(){var n=[].concat(arguments[0]);e.apply(t,n)}}),i.isUndefined(e.resolve)&&(e.resolve=(t=e,function(e){var n=t.defer();return n.resolve(e),n.promise})),e}])}])};var r=n("Zz1P"),o=n.n(r),i=n("0YuG"),a=(n.n(i),n("0iPh")),l=n.n(a)},"OxY+":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Zm9yd2FyZF9kaXNhYmxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iRm9yd2FyZC1EaXNhYmxlZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS4wMDAwMDAsIDQuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC00Mi1Db3B5LTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMDAwMDAwLCAzLjUwMDAwMCkgc2NhbGUoLTEsIC0xKSByb3RhdGUoLTM2MC4wMDAwMDApIHRyYW5zbGF0ZSgtOS4wMDAwMDAsIC0zLjUwMDAwMCkgIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjUsMy41IEwxNy41LDMuNSIgaWQ9IkxpbmUiIHN0cm9rZT0iI0IxQjJCQSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4zMDQ1MTY2MjksNC4wODcyOTMxMyBDLTAuMTQ0MzU4NTA1LDMuNzYzNTc4NDQgLTAuMTQ2ODMyNDQ1LDMuMjQwNTE3MzYgMC4zMDQ1MTY2MjksMi45MTUwMTg1NCBMNC4xODcyMzk2NywwLjExNDkyMDI3NiBDNC42MzYxMTQ4MSwtMC4yMDg3OTQ0MTQgNSwtMC4wMjEzMDk3MzU4IDUsMC41MzQ5OTA1MTUgTDUsNi40NjczMjExNiBDNSw3LjAyMzAzNDI0IDQuNjM4NTg4NzUsNy4yMTI4OTAyMiA0LjE4NzIzOTY3LDYuODg3MzkxNCBMMC4zMDQ1MTY2MjksNC4wODcyOTMxMyBaIiBpZD0iVHJpYW5nbGUiIGZpbGw9IiNCMUIyQkEiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},P6nd:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.UpdateEncoding="UpdateEncoding",e.ChangeHierarchy="ChangeHierarchy",e.DrillDown="DrillDown",e.Forward="HistoryForward",e.Back="HistoryBack",e.ClickChartMark="ClickChartMark",e.ClickDrilldownInterval="ClickDrilldownInterval",e.ClickViewData="ClickViewData",e.ClickExploreFromHere="ClickExploreFromHere",e.Keep="Keep",e.Exclude="Exclude",e.ViewData="ViewData",e.ShowAlert="ShowAlert",e.ToggleExpandedView="ToggleExpandedView",e.ExploreChart="ExploreChart",e.ExploreChartMark="ExploreChartMark",e.ExpandKebab="ExpandKebab"}(r||(r={}))},PKNu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("0YuG");n.n(r),n("IU2V");r.module("mode.api").factory("ModeInput",[function(){var e=function(e){this.$initialize.apply(this,arguments)};return e.prototype={$initialize:function(e){this.type=e.type,this.name=e.name,this.value=e.value,this.options=e.options}},e}])},PbPb:function(e,t){e.exports=window._},PecA:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNnB4IiBoZWlnaHQ9IjRweCIgdmlld0JveD0iMCAwIDYgNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDIgKDM2NzgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT50b29sYmFyLWRyb3Bkb3duPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Im1vY2t1cHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIGQ9Ik0yLjM4ODAxNTU2LDAuMzUzODY1MTQzIEMyLjcyNTYxODYzLC0wLjA4NDUxOTI0MDQgMy4yNjc1OTg4OSwtMC4wOTE1MDg0OTM4IDMuNjEwNTg0NDQsMC4zNTM4NjUxNDMgTDUuODA3MjE1NTYsMy4yMDYyMzQ4NiBDNi4xNDQ4MTg2MywzLjY0NDYxOTI0IDUuOTY5ODEzNDgsNCA1LjQwOTQ3MDUzLDQgTDAuNTg5MTI5NDcxLDQgQzAuMDMxODU3ODgyLDQgLTAuMTUxNjAxMTExLDMuNjUxNjA4NDkgMC4xOTEzODQ0MzgsMy4yMDYyMzQ4NiBMMi4zODgwMTU1NiwwLjM1Mzg2NTE0MyBaIiBpZD0idG9vbGJhci1kcm9wZG93biIgZmlsbD0iIzYzNjU2RSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy4wMDAwMDAsIDIuMDAwMDAwKSBzY2FsZSgtMSwgLTEpIHRyYW5zbGF0ZSgtMy4wMDAwMDAsIC0yLjAwMDAwMCkgIj48L3BhdGg+CiAgICA8L2c+Cjwvc3ZnPg=="},PiCI:function(e,t,n){"use strict";var r=n("0YuG"),o=n("LHp7"),i=n("PbPb"),a=n("6KMn"),l=n("glR0"),s=function(){function InsertFilterModalController(e,t,n){var r=this;this._storeService=e,this._reportFilterService=t,this.$timeout=n,this._storeService.select(l.y).subscribe(function(e){return r.loadFields(e)})}return InsertFilterModalController.prototype.handleSelection=function(e){this.selectedField=this.getFieldById(e,this.fields)},InsertFilterModalController.prototype.loadFields=function(e){this.fields=e},InsertFilterModalController.prototype.insertFilter=function(){this.selectedField&&this._reportFilterService.createReportFilter(this.selectedField),this.$close(this.selectedField)},InsertFilterModalController.prototype.getFieldById=function(e,t){for(var n=null,r=0,o=t;r<o.length;r++){var i=o[r];switch(i.type){case a.b.Field:if(i.id===e)return i;break;case a.b.Folder:if(n=this.getFieldById(e,i.fields))return n}}return n},InsertFilterModalController.$inject=["RxStoreService","ReportFilterService","$timeout"],InsertFilterModalController}(),c=n("mAOC"),d=n.n(c),u=n("nxEI"),p={},h={bindToController:!0,controller:s,controllerAs:"ctrl",template:d.a};var g="insertfilter",m=function(){function InsertFilterModalTriggerController(e,t){var n=this;this.$element=e,this.Modal=t,this.$postLink=function(){n.$element.on(n.namespaceEvent("click"),n.handleClick.bind(n))},this.$onDestroy=function(){n.$element.off(n.namespaceEvent("click"))}}return InsertFilterModalTriggerController.prototype.namespaceEvent=function(e){return[e,g].join(".")},InsertFilterModalTriggerController.prototype.handleClick=function(e){e.preventDefault(),e.stopPropagation(),this.openModal().then(this.handleModalClose.bind(this)).catch(function(){})},InsertFilterModalTriggerController.prototype.openModal=function(){return function(e){void 0===e&&(e={});var t=Object(i.assign)({},p,e),n=u.a.getAppInjector().invoke(["ModalService",function(e){return e.open(t,h)}]),r=n.result;return r.catch(function(){}),{modal:n,result:r}}().result},InsertFilterModalTriggerController.prototype.handleModalClose=function(e){this.onInsert&&this.onInsert({$field:e})},InsertFilterModalTriggerController.$inject=["$element","ModalService"],InsertFilterModalTriggerController}(),f=n("m9my"),C=n("om5q");function treeNodeFactory(e,t,n,r,o,i){return void 0===r&&(r=[]),void 0===i&&(i=!1),Object(C.a)({},{key:e,name:t,props:n,nodes:r,icon:o,disabled:i})}function fieldsToTreeNodes(e){return e.map(fieldToTreeNode)}function fieldToTreeNode(e){var t=[],n={},r=e.name,o=e.id,i=!1,l=null;switch(e.type){case a.b.Field:i=e.inUse,n={type:e.control.filterType};var s=e.control,c=s.varType,d=function(e){switch(e){case f.DataType.BOOLEAN:return"text";case f.DataType.INTEGER:case f.DataType.FLOAT:return"number";case f.DataType.DATE:case f.DataType.DATETIME:return"date";case f.DataType.DATEWKDAY:case f.DataType.DATEMONTH:case f.DataType.DATEQTR:return"number";case f.DataType.STRING:return"text"}}(s.dataType);c===f.VariableType.DISCRETE&&"date"===d&&(d="number"),l="icon-"+c.toLowerCase()+"-"+d;break;case a.b.Folder:t=fieldsToTreeNodes(e.fields)}return treeNodeFactory(o,r,n,t,l,i)}var y={controller:function(){function FieldTreeViewController(){}return FieldTreeViewController.prototype.$onChanges=function(e){e.fields&&this.updateTreeNodes(this.fields)},FieldTreeViewController.prototype.handleSelection=function(e){this.onSelect({$id:e})},FieldTreeViewController.prototype.updateTreeNodes=function(e){void 0===e&&(e=[]),e.length&&(this.treeNodes=fieldsToTreeNodes(e))},FieldTreeViewController.$inject=[],FieldTreeViewController}(),controllerAs:"ctrl",bindings:{fields:"<",onSelect:"&?"},template:'\n    <div class="field-tree-view">\n      <tree-view\n        nodes="ctrl.treeNodes"\n        on-select="ctrl.handleSelection($key)" />\n    </div>\n  '},b={controller:function(){function TreeViewController(e){this.$timeout=e}return TreeViewController.prototype.$onInit=function(){this.initialSelection&&this.handleSelection(this.initialSelection)},TreeViewController.prototype.handleSelection=function(e){var t=this;this.$timeout(function(){!function walkTreeNodes(e,t){for(var n=0,r=e;n<r.length;n++){var o=r[n];t(o),o&&o.nodes.length&&walkTreeNodes(o.nodes,t)}}(t.nodes,function(t){t&&(t.selected=t.key==e)})}),this.onSelect&&this.onSelect({$key:e})},TreeViewController.$inject=["$timeout"],TreeViewController}(),controllerAs:"ctrl",bindings:{nodes:"<",initialSelection:"@?",onSelect:"&?"},template:'\n    <div class="tree-view">\n      <tree-view-item\n        is-divider="node === null"\n        expanded="false"\n        key="{{node.key}}"\n        name="{{node.name}}"\n        icon="node.icon"\n        selected = "node.selected"\n        props="node.props"\n        nodes="node.nodes"\n        on-select="ctrl.handleSelection($key)"\n        ng-disabled="node.disabled"\n        ng-repeat="node in ctrl.nodes" />\n    </div>\n  '};var v,I={controller:function(){function TreeItemViewController(e){var t=this;this.$element=e,this.expanded=!1,this.selected=!1,this.$onInit=function(){var e=Object(i.assign)({},t.props),n=t.$element.children().first();TreeItemViewController.spreadPropsToDataAttributes(e,n)}}return TreeItemViewController.prototype.turn=function(){this.expanded=!this.expanded},TreeItemViewController.prototype.select=function(e){void 0===e&&(e=this.key),this.disabled||this.onSelect({$key:e})},TreeItemViewController.prototype.hasChildren=function(){return this.nodes&&this.nodes.length},TreeItemViewController.prototype.handleChildTreeSelection=function(e){this.select(e)},TreeItemViewController.spreadPropsToDataAttributes=function(e,t){var n;t.attr((n=e,Object(i.mapKeys)(n,function(e,t){return"data-"+t.toLowerCase()})))},TreeItemViewController.$inject=["$element"],TreeItemViewController}(),controllerAs:"ctrl",bindings:{isDivider:"<",expanded:"<",selected:"<",icon:"<",key:"@",name:"@",disabled:"@",nodes:"<",onSelect:"&?",props:"<"},template:'\n    <div class="tree-view-item"\n         ng-if="!ctrl.isDivider"\n         ng-class="{\'has-children\': ctrl.hasChildren(), \'is-leaf-selected\': ctrl.selected}">\n      <div class="item-actions">\n        <a href="javascript://"\n           class="item-turner"\n           ng-class="{ \'is-closed\': !ctrl.expanded }"\n           ng-if="ctrl.hasChildren()"\n           ng-click="ctrl.turn()"> </a>\n      </div>\n      <i ng-if="ctrl.icon" class="icon {{ ctrl.icon }}"></i>\n      <div class="item-leaf"\n           ng-class="{ \'is-selected\': ctrl.selected }"\n           ng-click="ctrl.hasChildren() ? ctrl.turn() : ctrl.select()">\n        <span class="item-leaf-name">{{ctrl.name}}</span>\n      </div>\n      <div class="item-branch"\n           ng-if="ctrl.hasChildren()"\n           ng-class="{ \'is-closed\': !ctrl.expanded }">\n        <tree-view\n          nodes="ctrl.nodes"\n          on-select="ctrl.handleChildTreeSelection($key)"/>\n      </div>\n    </div>\n    <div class="divider" ng-if="ctrl.isDivider"></div>\n  '},S=n("RpJj"),w={controller:function(){function FilterPanelTogglerController(e,t){var n=this;this.storeService=e,this.$scope=t,this.filterPanelIsOpen=!1,this.onToggle||e.connectPath(t,"editor",function(e){n.filterPanelIsOpen=e.filterPanel})}return FilterPanelTogglerController.prototype.handleClick=function(){var e=!this.filterPanelIsOpen;this.onToggle?this.onToggle({$state:e}):this.setFilterPanelDisplayState(e)},FilterPanelTogglerController.prototype.setFilterPanelDisplayState=function(e){e?this.storeService.dispatch(Object(S.d)()):this.storeService.dispatch(Object(S.a)())},FilterPanelTogglerController.$inject=["StoreService","$scope"],FilterPanelTogglerController}(),controllerAs:"ctrl",bindings:{filterPanelIsOpen:"<?",onToggle:"&?"},template:'\n    <a class="filter-panel-toggler"\n       href="javascript://"\n       ng-class="{ \'is-active\': ctrl.filterPanelIsOpen }"\n       ng-click="ctrl.handleClick()"\n       ng-dblclick="$event.stopPropagation()">\n      <span class="toggler-label">Filters</span>\n      <span class="toggler-icon">\n        <i ng-if="ctrl.filterPanelIsOpen" class="icon-filter-panel-toggle-active"></i>\n        <i ng-if="!ctrl.filterPanelIsOpen" class="icon-filter-panel-toggle"></i>\n      </span>\n    </a>\n  '},A=n("beEA"),M=n("7n0L"),k=n("CwcT"),T=n("0iPh"),x=n.n(T),D=function(){function ColumnSelect(e,t){this.renderer=e,this.ui={colHeader:"thead th.js-col-header"},this.opts=t,this.label="column-select",this.state={selected:null}}return ColumnSelect.prototype.initialize=function(e,t){this.$container=x()(t),this.$body=this.$container.parents("body")},ColumnSelect.prototype.buildTable=function(e){return this.$table=x()(e),this.$table.addClass(ColumnSelect.NAMESPACE),e},ColumnSelect.prototype.afterRender=function(e){return this.initializeTableHeaders(this.$table),this.initializeTableClickHandler(this.$table),e},ColumnSelect.prototype.destroy=function(){this.$body.off(this.namespace("click")),this.$table.find(this.ui.colHeader).off(this.namespace("click"))},ColumnSelect.prototype.initializeTableHeaders=function(e){var t=e.find(this.ui.colHeader),n=this.tableHeaderClickHandler.bind(this),r=this.getSelectedColumn();r&&this.highlightColumn(r),t.on(this.namespace("click"),n)},ColumnSelect.prototype.initializeTableClickHandler=function(e){e.on(this.namespace("click"),this.tableCellClickHandler.bind(this))},ColumnSelect.prototype.namespace=function(e){return e+"."+ColumnSelect.NAMESPACE},ColumnSelect.prototype.tableHeaderClickHandler=function(e){var t=this.getSelectedColumn(),n=Object(C.c)(x()(e.target).closest("th").get(0),"column");this.setSelectedColumn(n),this.highlightColumn(n,t)},ColumnSelect.prototype.tableCellClickHandler=function(e){var t=this.getSelectedColumn(),n=Object(C.c)(e.target,"column"),r=Object(C.c)(e.target,"row"),o=e.target.tagName.toLowerCase();(r&&n!==t||!r&&!n&&"th"===o)&&this.unselectColumn()},ColumnSelect.prototype.getSelectedColumn=function(){return this.opts.selectedCol instanceof Function?this.opts.selectedCol():this.state.selected},ColumnSelect.prototype.setSelectedColumn=function(e){return this.opts.selectCol instanceof Function?this.opts.selectCol(e):this.state.selected=e},ColumnSelect.prototype.highlightColumn=function(e,t){void 0===t&&(t=null);var n=this.$table,r=this.$body,o=this.globalClickHandler.bind(this),i=this.namespace("click");t&&this.unhighlightColByIndex(t),this.findCellsByColumnIndex(e,n).addClass(ColumnSelect.IS_SELECTED_CLASS),r.off(i),r.on(i,o)},ColumnSelect.prototype.findCellsByColumnIndex=function(e,t){return t.find(".col-"+e)},ColumnSelect.prototype.globalClickHandler=function(e){var t=this.$body,n=this.namespace("click");this.validDeadzoneClickEvent(e)&&(this.unselectColumn(),t.off(n))},ColumnSelect.prototype.validDeadzoneClickEvent=function(e){var t=this.elementParentSeeker(e.target),n=t(".js-table-container"),r=t(".main-editor")||t(".mode-embed");return!n&&r},ColumnSelect.prototype.elementParentSeeker=function(e){return function(t){return!!x()(e).closest(t).length}},ColumnSelect.prototype.unselectColumn=function(){this.unhighlightColByIndex(this.getSelectedColumn()),this.setSelectedColumn(null)},ColumnSelect.prototype.unhighlightColByIndex=function(e){this.findCellsByColumnIndex(e,this.$table).removeClass(ColumnSelect.IS_SELECTED_CLASS)},ColumnSelect.NAMESPACE="axel-column-select",ColumnSelect.IS_SELECTED_CLASS="is-selected-col",ColumnSelect}(),L=n("bAVf"),R=((v={})[L.a.SORT_ORDER_ASC]="sort-asc",v[L.a.SORT_ORDER_DESC]="sort-desc",v),N=function(){function ColumnSort(e,t){void 0===t&&(t={}),this.opts=t,this.label="column-sort",this.ui={itemAsc:".js-btn-asc",itemDesc:".js-btn-desc",itemClear:".js-btn-clear"},this.state={sorted:{index:null,order:"desc"},selectedColumn:null,dropdownOpen:[0,null]}}return ColumnSort.prototype.initialize=function(e,t){this.$container=x()(t)},ColumnSort.prototype.buildHeader=function(e,t){void 0===t&&(t={});var n=this.$headerCells=x()(e).find("th:not(.js-axel-ignore)");return n.each(this.initializeTableHeaderLabels.bind(this)),n.each(this.initializeAndAppendDropdownButton.bind(this)),e},ColumnSort.prototype.buildTable=function(e,t,n){void 0===n&&(n={});var r=this.$table=x()(e),o=this.$headerCells;return this.$dropdownMenu=x()('\n  <ul class="dropdown-menu axel-dropdown-menu offset-shadow">\n    <li>\n      <span class="button-link btn-asc js-btn-asc icon-sort-ascending" data-axel-order="asc">\n        <i class="icon-check-mark align-md-icon"></i>\n        <span class="button-label">Sort Ascending</span>\n      </span>\n    </li>\n    <li>\n      <span class="button-link btn-desc js-btn-desc icon-sort-descending" data-axel-order="desc">\n        <i class="icon-check-mark align-md-icon "></i>\n        <span class="button-label">Sort Descending</span>\n      </span>\n    </li>\n    <li>\n      <span class="button-link js-btn-clear" data-axel-order="clear">\n        <i class="icon-check-mark align-md-icon "></i>\n        <span class="button-label">No Sort</span>\n      </span>\n    </li>\n  </ul>\n').appendTo(this.$container.parents("body")),o.each(this.delegateDropdownToggleHandlers.bind(this)),this.delegateDropdownMenuItemHandlers(),r.addClass(ColumnSort.NAMESPACE),e},ColumnSort.prototype.destroy=function(e){this.$headerCells.each(function(e,t){return ColumnSort.findAndDestroyDropdownButton(t)}),this.$container.parents("body").off(this.namespace("mousedown")),this.$dropdownMenu.remove()},ColumnSort.findAndDestroyDropdownButton=function(e){x()(e).find(".axel-column-sort-dropdown").remove()},ColumnSort.prototype.initializeTableHeaderLabels=function(e,t){var n=this,r=parseInt(Object(C.c)(t,"column"));x()(t).wrapInner('<span class="axel-table-header-label"></span>').addClass(function(e){var t=n.getColumnSortState(),r=t.index,o=t.order;return r===e?R[o]:""}(r))},ColumnSort.prototype.initializeAndAppendDropdownButton=function(e,t){parseInt(Object(C.c)(t,"column"));x()(t).addClass("axel-column-sort-header").append('\n  <div class="axel-column-sort-dropdown">\n    <a href="#" class="axel-dropdown dropdown active">\n      <span\n        class="action-menu axel-dropdown-toggle dropdown-toggle"\n        aria-haspopup="true"\n        aria-expanded="false"></span>\n    </a>\n  </div>\n')},ColumnSort.prototype.initDropdownMenu=function(e){var t,n=this,r=this.getColumnSortState(),o=r.index,i=r.order,a=o===e&&(i===L.a.SORT_ORDER_ASC||i===L.a.SORT_ORDER_DESC);t=this.$dropdownMenu,a&&i===L.a.SORT_ORDER_ASC?t.find(n.ui.itemAsc).addClass("selected"):a&&i===L.a.SORT_ORDER_DESC&&t.find(n.ui.itemDesc).addClass("selected")},ColumnSort.prototype.namespace=function(e){return e+"."+ColumnSort.NAMESPACE},ColumnSort.prototype.setColumnSortState=function(e,t){this.opts.sortCol instanceof Function?this.opts.sortCol.call(null,e,t):(this.state.selectedColumn=e,this.state.sorted.index=e,this.state.sorted.order=t)},ColumnSort.prototype.getColumnSortState=function(){return this.opts.sortedCol instanceof Function?this.opts.sortedCol.call(null):this.state.sorted},ColumnSort.prototype.selectedColumn=function(){return this.opts.selectedColumn instanceof Function?this.opts.selectedColumn.call(null):this.state.selectedColumn},ColumnSort.prototype.onDropdownOpen=function(e){if(this.opts.onDropdownOpen instanceof Function)return this.opts.onDropdownOpen.call(null,e)},ColumnSort.prototype.onDropdownClose=function(e){if(this.opts.onDropdownClose instanceof Function)return this.opts.onDropdownClose.call(null,e)},ColumnSort.prototype.dropdownState=function(e,t){return void 0===t&&(t=null),this.opts.dropdownState?this.opts.dropdownState.call(null,e,t):arguments.length>1?this.state.dropdownOpen=[e,t]:this.state.dropdownOpen},ColumnSort.prototype.isOpenInColumn=function(e){var t=this.dropdownState(e);return t[0]===e&&"open"===t[1]},ColumnSort.prototype.positionMenu=function(e,t){var n=e[0].getBoundingClientRect(),r=n.bottom,o=n.right;t.css({top:Math.max(5,pageYOffset+r),left:Math.max(5,pageXOffset+o-160-7-1)})},ColumnSort.prototype.delegateDropdownToggleHandlers=function(e,t){var n=this,r=this.namespace,o=this.$container,i=x()(t),a=Object(C.c)(i,"column"),l=i.find(".dropdown"),s=this.$dropdownMenu,c=function(e){var t=function(t){return x.a.contains(t.get(0),e.target)};t(s)||t(l)||d()},d=function(){n.dropdownState(a,"closed"),s.removeClass("dropdown-open"),o.parents("body").off(r("mousedown"),c),n.onDropdownClose(a)},u=function(){return n.isOpenInColumn(a)?d():(n.selectedColumn()!==a&&i.trigger("click"),n.initDropdownMenu(a),n.positionMenu(i,s),n.dropdownState(a,"open"),s.addClass("dropdown-open"),o.parents("body").on(r("mousedown"),c),n.onDropdownOpen(a),n.columnIndexOfOpenMenu=a,void(n.closeMenu=d))};l.on(r("click"),function(e){e.preventDefault(),e.stopPropagation(),u()})},ColumnSort.prototype.delegateDropdownMenuItemHandlers=function(){var e=this,t=this.namespace,n=this.$dropdownMenu;n.find(".js-btn-asc").on(t("click"),function(t){t.preventDefault(),t.stopPropagation(),e.setColumnSortState(e.columnIndexOfOpenMenu,L.a.SORT_ORDER_ASC),e.closeMenu()}),n.find(".js-btn-desc").on(t("click"),function(t){t.preventDefault(),t.stopPropagation(),e.setColumnSortState(e.columnIndexOfOpenMenu,L.a.SORT_ORDER_DESC),e.closeMenu()}),n.find(".js-btn-clear").on(t("click"),function(t){t.preventDefault(),t.stopPropagation(),e.setColumnSortState(null,null),e.closeMenu()})},ColumnSort.NAMESPACE="axel-column-sort",ColumnSort}(),E=/col\-(\d+)/,j=/row\-(\d+)/,O=function(){function CellSelect(e,t){this.renderer=e,this.opts=t,this.label="cell-select",this.$contentView=this.createContentView(),this.state={selectedCell:{row:null,col:null}}}return CellSelect.prototype.buildBody=function(e,t){var n=this.$tbody=x()(e);return this.$container=x()(t),n.on(this.namespace("dblclick"),this.requestCellContentViewerHandler.bind(this)),n.on(this.namespace("click"),this.destroyCellContentViewerHandler.bind(this)),e},CellSelect.prototype.buildTable=function(e,t){return x()(e).addClass(CellSelect.NAMESPACE),e},CellSelect.prototype.afterRender=function(e,t){return this.$contentView.appendTo(e),e},CellSelect.prototype.destroy=function(e){this.$contentView.remove(),this.$contentView=null,this.$tbody.off(this.namespace("dblclick")),this.$tbody.off(this.namespace("click"))},CellSelect.prototype.namespace=function(e){return e+"."+CellSelect.NAMESPACE},CellSelect.prototype.createContentView=function(){return x()('<div class="cell-content-view is-hidden" />').on("wheel",function(e){var t=x()(this),n=e.originalEvent.deltaY,r=t.get(0).scrollHeight-t.innerHeight();n<0&&0===t.scrollTop()?e.preventDefault():n>0&&t.scrollTop()===r&&e.preventDefault()}).on("click",function(e){return e.stopPropagation()})},CellSelect.prototype.requestCellContentViewerHandler=function(e){var t=e.target;this.isCell(t)&&(this.selectCellFromEl(t),this.revealCellContent())},CellSelect.prototype.destroyCellContentViewerHandler=function(e){this.$contentView.addClass("is-hidden")},CellSelect.prototype.isCell=function(e){return E.test(e.className)&&j.test(e.className)},CellSelect.prototype.selectCellFromEl=function(e){var t=this.getCellCoordsFromEl(e),n=t.row,r=t.col;this.updateSelectedCell(n,r)},CellSelect.prototype.getCellCoordsFromEl=function(e){var t=e.className,n=parseInt(t.match(E)[1]);return{row:parseInt(t.match(j)[1]),col:n}},CellSelect.prototype.updateSelectedCell=function(e,t){if(!e||!t)throw new Error("Invalid table cell coordinates");this.state.selectedCell.row=e,this.state.selectedCell.col=t},CellSelect.prototype.revealCellContent=function(){var e=this.getSelectedCellCoords(),t=e.row,n=e.col;if(this.cellIsSelected){var r=this.getSelectedCellContentByCoords(t,n),o=this.getSelectedCellElementPosition(),i=o.x,a=o.y,l=this.getContentViewBounds(i,a),s=l.w,c=l.h;this.renderCellContentView(r,i,a,s,c)}},CellSelect.prototype.getSelectedCellCoords=function(){return{row:this.state.selectedCell.row,col:this.state.selectedCell.col}},CellSelect.prototype.getSelectedCellElementPosition=function(){var e=this.getSelectedCellElement(),t=x()(e).offset(),n=this.$container.offset(),r=t.top-n.top+this.$container.scrollTop();return{x:t.left-n.left+this.$container.scrollLeft(),y:r}},CellSelect.prototype.getContentViewBounds=function(e,t){var n=this.getSelectedCellElement().offsetWidth,r=this.$container.get(0).getBoundingClientRect(),o=r.height,i=r.width,a=o+this.$container.scrollTop()-t,l=i+this.$container.scrollLeft()-e;return n<l&&(l=n),{w:l,h:a}},CellSelect.prototype.cellIsSelected=function(){var e=this.getSelectedCellCoords(),t=e.row,n=e.col;return!(!t||!n)},CellSelect.prototype.getSelectedCellContentByCoords=function(e,t){var n=this;return"function"==typeof this.opts.getCellContentByCoords?this.opts.getCellContentByCoords(e,t):x()(n.getSelectedCellElement()).text()},CellSelect.prototype.getSelectedCellElement=function(){var e,t=this.getSelectedCellCoords(),n=t.row,r=t.col;return this.$tbody.find("."+(e=n,"row-"+e)+"."+function(e){return"col-"+e}(r)).get(0)},CellSelect.prototype.renderCellContentView=function(e,t,n,r,o){this.$contentView.css({position:"absolute",left:t,top:n,width:r,maxHeight:o}),this.$contentView.text(e),this.$contentView.removeClass("is-hidden")},CellSelect.NAMESPACE="axel-cell-select",CellSelect}(),P=function(){function VirtualScroll(e,t){void 0===t&&(t={}),this.$=x.a,this.opts=t,this.renderer=e,this.label="virtual-scroll"}return VirtualScroll.prototype.initialize=function(e,t){return this.containerEl=t,e.buildBody(tableBodyLayoutFrame),e},VirtualScroll.prototype.buildTable=function(e,t,n){void 0===n&&(n={});var r=function(e){var t=x()('<div class="js-table-content-container"/>').append(e),n=x()('<div class="js-table-container-body"/>').append(t);return{$tableContentContainer:t,$tableContainer:n}}(e),o=r.$tableContentContainer,i=r.$tableContainer,a=i.get(0);return this.$tableContentContainer=o,this.$table=this.$(e),this.$tbody=this.$table.find("tbody"),i.addClass(VirtualScroll.NAMESPACE),a},VirtualScroll.prototype.beforeRender=function(e,t){var n=this.getBodyHeight(this.dimensionsAtCapacity());return this.$tableContentContainer.height(n),e},VirtualScroll.prototype.afterRender=function(e,t){var n=this.namespace("scroll"),r=this.updateRows();return r(),this.$(t).off(n),this.$(t).on(n,r),e},VirtualScroll.prototype.namespace=function(e){return e+"."+VirtualScroll.NAMESPACE},VirtualScroll.prototype.getBodyHeight=function(e){return void 0===e&&(e=!1),this.contentHeight()+(e?this.height():0)},VirtualScroll.prototype.updateRows=function(){var e=this;return function(){var t=e.rowRange(e.rowOffset(),VirtualScroll.ROW_RANGE_BUFFER);t.length&&(e.dimensionsAtCapacity()?e.$tbody.children().length||e.renderAllRows():e.renderVirtualRows(t))}},VirtualScroll.prototype.renderAllRows=function(){this.renderer.data().rows().reduce(this.insertRow.bind(this),this.$tbody)},VirtualScroll.prototype.renderVirtualRows=function(e){var t=this.$table,n=this.$tbody;t.css("top",this.position()),this.cleanUpRows(n,e),e.forEach(this.insertOrUpdateRow.bind(this,n))},VirtualScroll.prototype.rowOffset=function(){var e=this.height(),t=this.containerEl.scrollTop;return Math.ceil(t/e)},VirtualScroll.prototype.rowRange=function(e,t){void 0===t&&(t=0);var n=this.renderer.data().rows(),r=this.limit(),o=function(t){var r=n.length,o=t<=r-e;return o||0!==e?o?e+t:e%t:r},i=o(r)>e?o(r)+t:o(r);return n.slice(e,i)},VirtualScroll.prototype.position=function(){var e=this.height(),t=this.containerEl.scrollTop;return t-t%e},VirtualScroll.prototype.insertOrUpdateRow=function(e,t,n){var r=this.renderer.data(),o=this.renderer.buildRow(),i=this.renderer.buildCell(),a=e.children(),l=r.rows().indexOf(t),s=this.selectedColumn(),c=o(r.tree,t,l,i,s),d=a.get(n);d?this.updateRow(d,c):e.find("[data-axel-row="+(l+1)+"]").length||e.append(c)},VirtualScroll.prototype.dimensionsAtCapacity=function(){return"function"!=typeof this.opts.dimensionsAtCapacity||this.opts.dimensionsAtCapacity(this.containerEl)},VirtualScroll.prototype.selectedColumn=function(){return"function"==typeof this.opts.selectedCol?this.opts.selectedCol():null},VirtualScroll.prototype.insertRow=function(e,t){var n=this.renderer.data(),r=n.rows().indexOf(t),o=this.renderer.buildRow(),i=this.renderer.buildCell();return e.append(o(n.tree,t,r,i)),e},VirtualScroll.prototype.contentHeight=function(){return this.renderer.data().rows().length*this.height()},VirtualScroll.prototype.height=function(){return this.opts.rowHeight||30},VirtualScroll.prototype.limit=function(){return Math.floor(this.containerEl.offsetHeight/this.height())},VirtualScroll.prototype.cleanUpRows=function(e,t){for(var n,r,o=this.renderer.data().rows(),a=e.children(),l=t.map(function(e){return o.indexOf(e)}),s=a.toArray().map(function(e){return parseInt(Object(C.c)(function(e){return e.querySelector("[data-axel-row]")}(e),"row"))}),c=0;c<s[c];c++){for(var d=0;d<l.length;d++)s[c]===l[d]&&(Object(i.isUndefined)(n)&&(n=c),Object(i.isUndefined)(n)||(r=c),c++);if(c===l.length||![n,r].some(i.isUndefined))break}a.filter(function(e){return!Object(i.inRange)(e,n,r+1)}).remove()},VirtualScroll.prototype.updateRow=function(e,t){var n=this,r=this.$(e).find("th, td").toArray(),o=this.$(t).find("th, td").toArray();r.forEach(function(e,t){n.updateElement(n.$(r[t]),n.$(o[t]))})},VirtualScroll.prototype.updateElement=function(e,t){e.text(t.text());for(var n=0,r=t.prop("attributes");n<r.length;n++){var o=r[n];e.attr(o.name,o.value)}},VirtualScroll.NAMESPACE="axel-virtual-scroll",VirtualScroll.ROW_RANGE_BUFFER=3,VirtualScroll}();function tableBodyLayoutFrame(){return document.createElement("tbody")}var F=function(){function RowHeader(e,t){void 0===t&&(t={}),this.opts=t,this.renderer=e,this.label="row-header"}return RowHeader.prototype.initialize=function(e,t){var n=e.buildRow();return e.buildRow(function(e,t,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=r+1,l=n.apply(null,[e,t,r].concat(o));return l.insertBefore(function(e){var t=document.createElement("th");return t.textContent=e,t}(a),l.firstChild),l}),e},RowHeader.prototype.buildHeader=function(e,t,n){void 0===n&&(n={});var r=e.querySelector("tr"),o=document.createElement("th");return o.className="js-axel-ignore",r.insertBefore(o,r.firstChild),e},RowHeader.prototype.buildTable=function(e,t,n){return void 0===n&&(n={}),x()(e).addClass(RowHeader.NAMESPACE),e},RowHeader.NAMESPACE="axel-row-header",RowHeader.namespace=function(e){return e+"."+RowHeader.NAMESPACE},RowHeader}(),z=function(){function StickyHeader(e,t){void 0===t&&(t={}),this.opts=t,this.renderer=e,this.label="sticky-header"}return StickyHeader.prototype.initialize=function(e,t){return e},StickyHeader.prototype.buildTable=function(e,t,n){void 0===n&&(n={});var r=StickyHeader.namespace,o=x()("<div/>",{class:"js-table-header-container header-container"}),i=e.querySelector("thead"),a=i.parentElement,l=(e instanceof HTMLTableElement?x()(e):x()(e.querySelector(".js-main-table")),function(){o.css("top",t.scrollTop)});return e instanceof HTMLTableElement||x()(e).append(o.append(x()("<table/>",{class:"js-header-table"}).append(i))),a.insertBefore(x()(i).clone().get(0),a.firstChild),x()(t).on(r("scroll"),l),l(),x()(e).addClass(StickyHeader.NAMESPACE),e},StickyHeader.NAMESPACE="axel-sticky-header",StickyHeader.namespace=function(e){return e+"."+StickyHeader.NAMESPACE},StickyHeader}(),_=function(){function DynamicColumnWidth(e,t){void 0===t&&(t={}),this.containerBodyWidth=0,this.$=x.a,this.opts=t,this.renderer=e,this.label="dynamic-column-width",this.columnWidths=[]}return DynamicColumnWidth.prototype.initialize=function(e,t){return this.$window=this.$(window),this.window=window,this.containerEl=t,Object(C.d)("foobar",'"Graphik", Helvetica, Arial, sans-serif',12),Object(C.d)("foobar","system-ui",12),e},DynamicColumnWidth.prototype.buildTable=function(e){return this.$table=this.$(this.resolveTableElement(e)),this.$headerTable=this.$(this.resolveTableHeaderElement(e)),this.$(e).addClass(DynamicColumnWidth.NAMESPACE),this.enableDefaultTableWidth(),e},DynamicColumnWidth.prototype.afterRender=function(e){var t=this.updateColumnWidths.bind(this,{override:!0});return this.updateColumnWidths(),this.updateColumnWidths({override:!0,delay:1e3}),this.$window.on(this.namespace("resize"),t),e},DynamicColumnWidth.prototype.destroy=function(e){this.$window.off(this.namespace("resize"))},DynamicColumnWidth.prototype.resolveTableElement=function(e){return e instanceof HTMLTableElement?e:e.querySelector(".js-main-table")},DynamicColumnWidth.prototype.resolveTableHeaderElement=function(e){return e.querySelector(".js-header-table")},DynamicColumnWidth.prototype.namespace=function(e){return e+"."+DynamicColumnWidth.NAMESPACE},DynamicColumnWidth.prototype.updateColumnWidths=function(e){var t=this,n=void 0===e?{}:e,r=n.override,o=void 0!==r&&r,i=n.delay,a=void 0===i?0:i,l=!0===o||!this.columnWidthsAreSaved(),s=function(e){var n=t.containerBodyWidth-2;t.disableDefaultTableWidth(),l&&e.length&&t.saveColumnWidths(e),t.columnWidthsAreSaved()&&t.updateTableColumnWidths(t.scaleWidths(e,n,!0))};return this.loadContainerBodyWidth().done(function(){return t.getColumnWidths(a).done(s)}).fail(function(){})},DynamicColumnWidth.prototype.enableDefaultTableWidth=function(){this.$table.css("width","100%"),this.$headerTable.css("width","100%")},DynamicColumnWidth.prototype.disableDefaultTableWidth=function(){this.$table.css("width",0),this.$headerTable.css("width",0)},DynamicColumnWidth.prototype.loadContainerBodyWidth=function(){var e=this,t=this.$.Deferred();return requestAnimationFrame(function(){e.containerBodyWidth=e.containerEl.firstChild.offsetWidth||e.containerEl.offsetWidth,t.resolve(e.containerBodyWidth)}),t},DynamicColumnWidth.prototype.scaleWidths=function(e,t,n){void 0===n&&(n=!1);var r,o=e.reduce(function(e,t){return e+t}),i=n?e[0]:0,a=o>t?4:0,l=function(e,t,n){var r=e>t?e:t;return function(t){return t*function(e,t,n){return(e-n)/(t-n)}(r,e,n)+a}},s=[o,t,i],c=!0===n?(r=l.apply(null,s),function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return 0===t?e:r.apply(null,[e,t].concat(n))}):l.apply(null,s);return e.map(c).map(function(e){return Math.ceil(e)})},DynamicColumnWidth.prototype.getColumnWidths=function(e){var t=this;void 0===e&&(e=0);var n=this.$.Deferred();return this.columnWidthsAreSaved()?n.resolve(this.columnWidths):setTimeout(function(){return n.resolve(t.scanColumnWidths(t.renderer.data()))},e),n},DynamicColumnWidth.prototype.scanColumnWidths=function(e){var t=e.cols(),n=e.selectColumn(t),r=e.records.length,o=e.tree;return this.measureColumnWidths(o,n,t,r)},DynamicColumnWidth.prototype.measureColumnWidths=function(e,t,n,r){for(var o=[],a=this.window.document.createElement("canvas"),l=function(e){return Object(C.d)(e,'"Graphik", Helvetica, Arial, sans-serif',12,a)},s=function(e){return Object(C.d)(e,"system-ui",12,a)},c=this.largestColumns(e,t,n),d=[[r.toString()].concat(n),[""].concat(c)],u=i.zip.apply(void 0,d),p=0;p<u.length;p++)l(u[p][0])>s(u[p][1])?o.push(this.applyWidthConstraints(l(u[p][0])+14,p)):o.push(this.applyWidthConstraints(s(u[p][1])+14,p));return o},DynamicColumnWidth.prototype.largestColumns=function(e,t,n){for(var r=function(e){return(e[0]||"").toString().length},o=[],a=0,l=n;a<l.length;a++){var s=l[a],c=e[Object(i.sortBy)(t[s].map(function(e,t){return[e,t]}),r).pop()[1]][s].format();o.push(c)}return o},DynamicColumnWidth.prototype.columnWidthsAreSaved=function(){return!!this.columnWidths.length},DynamicColumnWidth.prototype.saveColumnWidths=function(e){this.columnWidths=e},DynamicColumnWidth.prototype.updateTableColumnWidths=function(e){this.updateColumnGroup(e)},DynamicColumnWidth.prototype.applyWidthConstraints=function(e,t){var n=function(e,t,n){return e<n?e>t?e:t:n};return n(e,DynamicColumnWidth.COL_MIN_WIDTH,0===t?DynamicColumnWidth.FIRST_COL_MAX_WIDTH:DynamicColumnWidth.DEFAULT_COL_MAX_WIDTH)},DynamicColumnWidth.prototype.updateColumnGroup=function(e){var t=this,n=this.$table,r=this.$headerTable,o=this.getAndInitColumnGroup(n),i=o.$group,a=o.$cols,l=this.getAndInitColumnGroup(r),s=l.$group,c=l.$cols;e.forEach(function(e,n){t.applyAndInitColumnWidth(i,a[n],e),t.applyAndInitColumnWidth(s,c[n],e)}),this.onColumnWidthUpdate({$table:n,containerEl:this.containerEl})},DynamicColumnWidth.prototype.onColumnWidthUpdate=function(e){if(this.opts.onColumnWidthUpdate instanceof Function)return this.opts.onColumnWidthUpdate.call(null,e)},DynamicColumnWidth.prototype.getAndInitColumnGroup=function(e){var t=e.find("colgroup").length?e.find("colgroup"):e.prepend(this.$("<colgroup/>")).find("colgroup");return{$group:t,$cols:t.find("col").toArray()}},DynamicColumnWidth.prototype.applyAndInitColumnWidth=function(e,t,n){if(t)var r=this.$(t);else r=this.$("<col/>");r.prop("width")!=n&&r.prop("width",n),t||e.append(r)},DynamicColumnWidth.NAMESPACE="axel-dynamic-column-width",DynamicColumnWidth.COL_MIN_WIDTH=50,DynamicColumnWidth.FIRST_COL_MAX_WIDTH=80,DynamicColumnWidth.DEFAULT_COL_MAX_WIDTH=450,DynamicColumnWidth}(),B=function(){function AsyncRender(e,t){void 0===t&&(t={}),this.label="async-render",this.opts=t}return AsyncRender.prototype.beforeRender=function(e,t){return this.dimensionsAtCapacity(t)&&this.hideRows(e),e},AsyncRender.prototype.afterRender=function(e,t){return this.dimensionsAtCapacity(t)&&this.revealRowsAsync(e),e},AsyncRender.prototype.hideRows=function(e){x()(e).find("tbody tr").hide()},AsyncRender.prototype.revealRowsAsync=function(e){var t=x()(e).find("tbody"),n=t.find("tr"),r=document.createDocumentFragment(),o=n.length,i=this;n.remove(),function showRows(e,a){var l=e>100?e:0,s=function(e,t,n){return e>t||e===t?t:e<t&&e+n<t?e+n:e<t&&e+n>t?t:void 0}(e,o,100);n.slice(l,s).show().toArray().forEach(function(e){r.appendChild(e)}),t.get(0).appendChild(r),s<o&&setTimeout(showRows.bind(i,s,a),100)}(0,n.length)},AsyncRender.prototype.dimensionsAtCapacity=function(e){return this.opts.dimensionsAtCapacity&&this.opts.dimensionsAtCapacity(e)},AsyncRender.NAMESPACE="axel-async-render",AsyncRender}(),V=n("N0am"),U=function(){function TextHighlight(e,t){this.searchTree={},this.renderer=e,this.opts=t,this.label="text-highlight",this.wrapCellLayout(e)}return TextHighlight.prototype.data=function(e){return this.searchTree=this.generateSearchTree(e.tree,e.rows(),e.cols()),e},TextHighlight.prototype.buildTable=function(e,t){return this.$container=x()(t),x()(e).addClass(TextHighlight.NAMESPACE),e},TextHighlight.prototype.generateSearchTree=function(e,t,n){var r=this.getQueryString(),o=RegExp(V(r.toString()),"i"),i=[];return r&&r.length&&r.length>this.minQueryLength()&&function(e,t,n,r){for(var o=0,i=t;o<i.length;o++)for(var a=i[o],l=0,s=n;l<s.length;l++){var c=s[l];r.call(null,e[a][c],a,c,e)}}(e,t,n,function(e,t){return function(n,r,o){var i=n.format().search(e);i>=0&&function(e,t,n,r){e[t]=e[t]||{},e[t][n]=e[t][n]||{},e[t][n]=r}(t,r,o,i)}}(o,i)),i},TextHighlight.prototype.getQueryString=function(){return this.opts.pattern||""},TextHighlight.prototype.minQueryLength=function(){return this.opts.minQueryLength||2},TextHighlight.prototype.wrapCellLayout=function(e){var t=this,n=e.buildCell(),r=this.renderer.data().rows(),o=this.renderer.data().cols(),i=this.getQueryString().length;e.buildCell(function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var l=n.apply(null,e.slice()),s=e[0],c=e[1],d=(e[2],c.data.column),u=c.data.row,p=r[u-1],h=o[d-1];if(t.searchTree[p]&&!isNaN(parseInt(t.searchTree[p][h]))){var g=t.searchTree[p][h];l.innerHTML=[s.substring(0,g),"<span class='highlight'>",s.substring(g,g+i),"</span>",s.substring(g+i)].join("")}return l})},TextHighlight.NAMESPACE="axel-text-highlight",TextHighlight}();function pluginDecorator(e,t){var n={},r={};return Object.create({plugins:r,hooks:n,decorate:function(t,o){return n.hasOwnProperty(o)&&Object.keys(n[o]).length?Object.keys(n[o]).reduce(function(t,i){var a=n[o][i],l=r[i].plugin,s=l.opts;return a.call(l,t,e,s)},t):t},registerer:function(e){return(function(e,o,i){var a=new o(e,i),l=a.label;if(r.hasOwnProperty(l))throw new Error("Plugin already defined");return r[l]={plugin:a,opts:i},Object.keys(o.prototype).filter(function(e){return!!~t.indexOf(e)}).forEach(function(e){return(n[e]||(n[e]={}))[l]=a[e]}),e}).bind(null,e)}})}var Z="axel";function table_renderer_table(e,t,n){if(void 0===n&&(n={}),!t)throw new Error("Container element undefined");if(!e)throw new Error("Data undefined");var r=tableLayout,o=tableHeaderLayout,i=tableBodyLayout,a=tableRowLayout,l=tableCellLayout,s=pluginDecorator(t,["data","buildHeader","buildBody","buildTable","initialize","beforeRender","afterRender","destroy"]),c=function table(){s.decorate(table,"initialize");var n=s.decorate(e,"data"),c=s.decorate(o.call(this,n.cols()),"buildHeader"),d=s.decorate(i.call(this,n,a,l),"buildBody"),u=s.decorate(r.call(this,c,d),"buildTable");s.decorate(u,"beforeRender"),t.hasChildNodes()?t.replaceChild(u,t.childNodes[0]):t.appendChild(u),s.decorate(u,"afterRender")};return c.buildTable=function(e){return arguments.length?(r=e,c):r},c.buildHeader=function(e){return arguments.length?(o=e,c):o},c.buildBody=function(e){return arguments.length?(i=e,c):i},c.buildRow=function(e){return arguments.length?(a=e,c):a},c.buildCell=function(e){return arguments.length?(l=e,c):l},c.decorator=function(){return s},c.data=function(){return e},c.destroy=function(){s.decorate(null,"destroy")},c.plugin=s.registerer(c),c}function tableLayout(e,t){var n=document.createElement("table");return n.className="js-main-table main-table",n.appendChild(e),n.appendChild(t),n}function tableHeaderLayout(e){void 0===e&&(e=[]);var t=document.createElement("thead");return t.appendChild(e.reduce(function(e,t,n){var r=n+1,o={className:[columnClassLayout(r),"js-col-header","col-header"].join(" "),data:{column:r}};return e.appendChild(tableCellLayout(t,o,"th")),e},document.createElement("tr"))),t}function tableBodyLayout(e,t,n){var r=t||tableRowLayout,o=e.rows();return o.reduce(function(t,i,a){return t.appendChild(r(e.tree,i,o.indexOf(i),n)),t},document.createElement("tbody"))}function tableRowLayout(e,t,n,r,o){void 0===r&&(r=tableCellLayout),void 0===o&&(o=null);var i=n+1,a=document.createElement("tr");return Object.keys(e[t]).reduce(function(n,a,l){var s,c,d=e[t][a],u=d.format(),p=l+1,h={className:[(c=i,"row-"+c),columnClassLayout(p),(s=d.type(),"cell-type-"+s),o==p?"is-selected-col":""].join(" "),data:{row:i,rowKey:t,column:p}};return n.appendChild(r(u,h)),n},a)}function tableCellLayout(e,t,n){void 0===n&&(n="td");t.data;var r=document.createElement(n);if(t.data)for(var o in t.data)r.setAttribute(["data",Z,o].join("-"),t.data[o]);return r.textContent=e,r.className=t.className||"",r}function columnClassLayout(e){return"col-"+e}var G=n("P6nd"),Y=function(){function TableGridController(e,t,n,r,o,i,a,l,s,c,d,u){var p=this;this.$scope=e,this.$state=t,this.$element=n,this.$window=r,this.Utils=o,this.as=i,this.tds=a,this.vos=l,this.cos=s,this.rls=c,this.fos=d,this.wms=u,this.destroyQueue=[],this.isFilterFocus=!1,this.isClipboardEnabled=!1,this.applyColumnSelection=function(e,t){p.$scope.$apply(function(){p.$scope.selectColumn({id:e,name:t})})}}return TableGridController.prototype.$onInit=function(){this.trackReportRenderStart(),this.adjustForMobile()},TableGridController.prototype.trackReportRenderStart=function(){var e=this.tableToken();this.isReportMode()&&this.as.startVizRenderReportTiming(e),this.isDesignerMode()&&this.as.startVizRenderDesignerTiming(e)},TableGridController.prototype.adjustForMobile=function(){this.Utils.clampElementWidthToAppleMobileBreakpoint(this.$element.children().first())},TableGridController.prototype.trackReportRenderEnd=function(){var e=this.tableToken();this.isReportMode()&&this.as.endVizRenderReportTiming(e),this.isDesignerMode()&&this.as.endVizRenderDesignerTiming(e),this.as.endTableSortTiming(this.tableToken(),this.queryToken())},TableGridController.prototype.trackColumnSelectStart=function(){this.as.startColumnSelectTiming(this.tableToken())},TableGridController.prototype.trackColumnSelectEnd=function(){this.as.endColumnSelectTiming(this.tableToken(),this.queryToken())},TableGridController.prototype.getTableId=function(){return this.$scope.tableID},TableGridController.prototype.tableToken=function(){return M.a.tokenFromVizID(this.getTableId())},TableGridController.prototype.queryToken=function(){return this.vos.queryTokenFromVizID(this.getTableId())},TableGridController.prototype.queryName=function(){var e=this.getQueryData();return e&&e.queryName||""},TableGridController.prototype.showTable=function(){return this.vos.hasOptionsFor(M.a.tokenFromVizID(this.getTableId()))},TableGridController.prototype.formatVizID=function(e){return this.vos.formatVizID(e,M.a.OPTION_TYPE_TABLE)},TableGridController.prototype.reportDataURL=function(){var e=this.getQueryData();return e&&e.reportDataUrl||""},TableGridController.prototype.reportVizURL=function(){return this.$scope.view&&this.$scope.view._vizReportRunLink||""},TableGridController.prototype.copySuccess=function(){this.$scope.onAction({$action:{type:G.a.ShowAlert,success:!0,message:"Link to table copied successfully"}})},TableGridController.prototype.isDesignerMode=function(){return this.$state.includes("application.reports.edit")},TableGridController.prototype.isReportMode=function(){return!this.$state.includes("application.reports.edit")},TableGridController.prototype.isPreviewMode=function(){return/embed-preview/.test(this.$window.document.body.className)},TableGridController.prototype.isPhantomMode=function(){return!!this.$window._phantom||!!this.$window.callPhantom},TableGridController.prototype.dataAvailable=function(){return!!this.tds.hasRows(this.queryToken())},TableGridController.prototype.selectFilterInput=function(e){e.preventDefault(),$(e.target).parents(".table-filter-module").find("input").focus()},TableGridController.prototype.clearFilterInput=function(e){e.preventDefault(),this.filterQuery="",this.applyFilter("")},TableGridController.prototype.dataState=function(){if(this.dataset)return this.boundDataState();var e=this.tds.datasetState(this.queryToken());return e?"succeeded"===e||"ready"===e?this.tds.dataOversized(this.queryToken())?"oversized":this.tds.hasRows(this.queryToken())?"succeeded":"empty":e:"failed"},TableGridController.prototype.boundDataState=function(){var e=this.dataset&&this.dataset.state;if(!e)return"failed";if("succeeded"===e||"ready"===e){var t=this.dataset&&this.dataset.count;this.dataset&&this.dataset.oversized;return this.dataset.oversized?"oversized":0===t?"empty":"succeeded"}},TableGridController.prototype.rowLimit=function(){return k.a.DISPLAY_ROW_LIMIT},TableGridController.prototype.exceedsRowLimit=function(){var e=this.tds,t=this.rowLimit();return e.rowCount(this.queryToken())>t},TableGridController.prototype.applyFilter=function(e){this.$scope.filterQuery=e},TableGridController.prototype.selectAllInputText=function(e){this.setFilterFocus(),e.target.setSelectionRange(0,e.target.value.length)},TableGridController.prototype.setFilterFocus=function(){this.isFilterFocus=!0},TableGridController.prototype.removeFilterFocus=function(){this.isFilterFocus=!1},TableGridController.prototype.loadTable=function(e){var t=this.getTableContainer(e),n=this.renderer(t).bind(this);this.tds.get().then(Object(i.debounce)((function(){var e=this,t=Object(i.debounce)(n,10);t(),this.$scope.$watch("selected",function(n){!0===n?e.subscribeToWindowResize(t):!1===n&&e.unsubscribeToWindowResize()}),this.Utils.iOS()&&this.subscribeToWindowOrientationChange(t),this.$scope.$watchGroup([function(){return e.getTableId()},function(){return JSON.stringify(e.vos.sortedColumn(e.tableToken()))},function(){return e.vos.excludedColumns(e.tableToken()).toString()},function(){return JSON.stringify(e.cos.allColumnSettings(e.tableToken()))},"filterQuery"],function(e,n){e!==n&&Object(i.defer)(t)})}).bind(this),10))},TableGridController.prototype.subscribeToWindowResize=function(e){var t=this.namespacedEventLabel("resize"),n=r.element(this.$window);n.off(t),n.on(t,e),this.$scope.$on("$destroy",function(){return n.off(t,e)})},TableGridController.prototype.unsubscribeToWindowResize=function(){r.element(this.$window).off(this.namespacedEventLabel("resize"))},TableGridController.prototype.subscribeToWindowOrientationChange=function(e){var t=this;this.Utils.iOS()&&(this.$window.addEventListener("orientationchange",e,!1),this.$scope.$on("$destroy",function(){return t.$window.removeEventListener("orientationchange",e,!1)}))},TableGridController.prototype.namespacedEventLabel=function(e){return[e,this.tableToken()].join(".")},TableGridController.prototype.getTableContainer=function(e){return e[0].querySelector(".js-table-container")},TableGridController.prototype.getQueryData=function(){return this.dataset?this.dataset:this.tds.queryData(this.queryToken())},TableGridController.prototype.getTableData=function(e){return void 0===e&&(e={}),this.tds.dataset(this.queryToken(),this.tableToken(),e)},TableGridController.prototype.linkTo=function(e,t){this.rls.hasLinkToPageMethod()&&this.rls.isLinkable()&&(e.preventDefault(),e.stopPropagation(),this.rls.linkToPage("lightbox"===t?{id:this.$scope.tableID,view:this.$scope.view}:this.queryToken(),t))},TableGridController.prototype.isLinkable=function(){return this.dataAvailable()&&this.rls.isLinkable()},TableGridController.prototype.errorImage=function(){return this.$window.ASSET_PATHS.ERROR_GIF_PATH},TableGridController.prototype.renderer=function(e){var t=this;if(!e)throw new Error("Table container not provided");return function(){t.adjustForMobile(),t.dataAvailable()&&Object(i.defer)(function(){var n;t.destroyQueueFlush();var r=t.getTableRenderer(),o=t.vos.sortedColumn(t.tableToken()),i=k.a.MIN_FILTER_QUERY_LENGTH,a=t.$scope.filterQuery,l=t.fos.getPresetFormatters(t.tableToken()),s=t.vos.excludedColumns(t.tableToken()),c=function(e){return!~s.indexOf(e)},d=!t.componentDimensionsAtCapacity(t.$element),u=t.getTableData({formatter:function(e,n){return function(){return t.applyFormatter.call(t,e,n,l)}},filterColumns:function(e){return e.filter(c)},memoize:!0}),p={rowHeight:26,dimensionsAtCapacity:t.componentDimensionsAtCapacity.bind(t),selectedCol:t.getSelectedColumn.bind(t)},h={sortCol:t.sortColumn.bind(t),sortedCol:t.getSortedColumn.bind(t),onDropdownOpen:t.selectColumn.bind(t,u)},g={selectCol:t.selectColumn.bind(t,u),selectedCol:t.getSelectedColumn.bind(t)},m={onColumnWidthUpdate:t.centerSelectedColumn.bind(t)},f={dimensionsAtCapacity:t.componentDimensionsAtCapacity.bind(t)},C={pattern:a,minQueryLength:i};a&&a.length>=i&&u.filterRows(a),o&&parseInt(o.index)>=0&&o.order&&u.sort(o.index-1,o.order),(n=t.initRenderer(r,u,e)).plugin(P,p),n.plugin(F,{}),n.plugin(N,h),n.plugin(D,g),n.plugin(O,{}),d&&n.plugin(z,{}),n.plugin(_,m),n.plugin(B,f),n.plugin(U,C),n(),t.destroyQueueAdd(n.destroy),t.trackReportRenderEnd()})}},TableGridController.prototype.centerSelectedColumn=function(e){var t,n=e.$table,r=e.containerEl,o=$(r),i=n.find(".is-selected-col"),a=o.outerWidth(!0);i.length&&(t=i.outerWidth(!0),o.scrollLeft(i.prop("offsetLeft")-a/2+t/2))},TableGridController.prototype.destroyQueueAdd=function(e){this.destroyQueue.push(e)},TableGridController.prototype.destroyQueueFlush=function(){this.destroyQueue.forEach(function(e){return e()}),this.destroyQueue=[]},TableGridController.prototype.sortTable=function(e,t,n,r){var o=n.data,i=r.data,a=function(e){return e.getTime?e.getTime():null},l=this.tds.resolveColumnType(this.queryToken(),this.tableToken(),e),s=function(e){return Object(C.g)(A.b,e,t)},c={"plain-text":function(){return s(A.a)(o.toStringOrNull(),i.toStringOrNull())},date:function(){return s(A.c)(a(o.valueOf()),a(i.valueOf()))},number:function(){return s(A.c)(o.valueOrNull(),i.valueOrNull())},percentage:function(){return c.number()},financial:function(){return c.number()},currency:function(){return c.number()}};return(c[l]||c["plain-text"])()},TableGridController.prototype.applyFormatter=function(e,t,n){var r=this.tds.resolveColumnType(this.queryToken(),this.tableToken(),t),o=this.tableToken();return this.fos.getFormatter(o,t,e,r,n)(e)},TableGridController.prototype.sortColumn=function(e,t){var n=this,r=this.getSortedColumn(),o=r.index,i=r.order;this.$scope.$apply(function(){n.vos.sortColumn(n.tableToken(),e,t),o===e&&i===t||n.as.startTableSortTiming(n.tableToken())})},TableGridController.prototype.getSortedColumn=function(){return this.vos.sortedColumn(this.tableToken())},TableGridController.prototype.selectColumn=function(e,t){var n=t-1,r=e.cols()[n],o=this.$scope;this.isPreviewMode()?this.postColumnSelection(this.getTableId(),r):this.isDesignerMode()&&o.selectColumn&&this.applyColumnSelection(this.getTableId(),r),this.vos.selectColumnByIndex(this.tableToken(),t),this.trackColumnSelectEnd()},TableGridController.prototype.postColumnSelection=function(e,t){this.wms.selectTableColumn(e,t)},TableGridController.prototype.getSelectedColumn=function(){return this.vos.selectedColumn(this.tableToken())},TableGridController.prototype.getTableRenderer=function(){return table_renderer_table},TableGridController.prototype.componentDimensionsAtCapacity=function(e){if(this.$scope.capacityOverride)return!0;var t,n=$(e);return t=".mode-embed .row:not([data-row-height]) .col-md-12",n.closest(t).length>0},TableGridController.prototype.initRenderer=function(e,t,n){return e(t,n,this.getRendererOptions())},TableGridController.prototype.getRendererOptions=function(){},TableGridController.$inject=["$scope","$state","$element","$window","Utils","AnalyticsService","TableDataService","ViewOptionsService","ColumnOptionsService","ReportLinkService","FormatOptionsService","WindowMessageService"],TableGridController}();var Q,H={controller:function(){function FilterModuleSingleController(){this.filterPattern=""}return Object.defineProperty(FilterModuleSingleController.prototype,"position",{get:function(){return this.filter.position},enumerable:!0,configurable:!0}),FilterModuleSingleController.prototype.$onInit=function(){this.selected=this.filter.selected,this.options=this.filter.options.values.toArray()},FilterModuleSingleController.prototype.isSelected=function(e){return!this.selected.all&&this.selected.value===e},FilterModuleSingleController.prototype.selectOption=function(e){this.selected=this.selected.with({all:!1,value:e}),this.onSelection({$filter:this.filter,$value:this.selected})},FilterModuleSingleController.prototype.selectAllOption=function(){this.selected=this.selected.with({all:!0,value:null}),this.onSelection({$filter:this.filter,$value:this.selected})},FilterModuleSingleController.prototype.minimumOptionsAvailable=function(){return this.options.length>=12},FilterModuleSingleController.$inject=[],FilterModuleSingleController}(),controllerAs:"ctrl",bindings:{key:"<",filter:"<",onSelection:"&?"},template:'\n    <div class="filter-module-single">\n\n      \x3c!-- Option Filter Begins --\x3e\n      <div class="filter-module-search-container" ng-if="ctrl.minimumOptionsAvailable()">\n        <input type="text"\n               class="form-control form-control-sm form-control-block"\n               ng-model="ctrl.filterPattern"\n               ng-model-options="ctrl.options"\n               placeholder="Find..." />\n      </div>\n      \x3c!-- @Option Filter Ends --\x3e\n\n      <div class="field-group">\n          <span class="checkbox-icon option-field">\n            <input\n              id="filter-select-all-{{ctrl.position}}"\n              name="Select All"\n              type="radio"\n              value="Select All"\n              ng-checked="ctrl.selected.all"\n              ng-click="ctrl.selectAllOption()"\n              />\n            <label class="option-label inline-icon" ng-class="{\'icon-radio-on\': ctrl.selected.all, \'icon-radio-off\': !ctrl.selected.all}" for="filter-select-all-{{ctrl.position}}">\n              <span>(All)</span>\n            </label>\n          </span>\n\n        \x3c!-- List Item Begins --\x3e\n        <span ng-repeat="option in ctrl.options | filter:{ label: ctrl.filterPattern } | limitTo: 250 track by $index">\n          \x3c!-- Single Selection Item Iterator Begins --\x3e\n          <span class="checkbox-icon option-field">\n            <input\n              id="filter-{{ctrl.position}}-{{option.value}}"\n              name="{{option.value}}"\n              type="radio"\n              value="{{option.value}}"\n              ng-checked="ctrl.isSelected(option.value)"\n              ng-click="ctrl.selectOption(option.value)"\n              />\n            <label class="option-label inline-icon" ng-class="{\'icon-radio-on\': ctrl.isSelected(option.value), \'icon-radio-off\': !ctrl.isSelected(option.value)}" for="filter-{{ctrl.position}}-{{option.value}}">\n              <span ng-class="{\'null-option\': !option.selected.all && option.value === null}" uib-tooltip="{{option.label}}" tooltip-placement="left" tooltip-append-to-body="true">{{option.label}}</span>\n            </label>\n          </span>\n          \x3c!-- @Single Selection Item Iterator Ends --\x3e\n\n        </span>\n        \x3c!-- @List Item Ends --\x3e\n      </div>\n    </div>\n  '},W=n("vqB5"),q={controller:function(){function FilterModuleMultiController(){}return Object.defineProperty(FilterModuleMultiController.prototype,"position",{get:function(){return this.filter.position},enumerable:!0,configurable:!0}),FilterModuleMultiController.prototype.$onChanges=function(){this.selected=this.filter.selected,this.options=this.filter.options.values.toArray()},FilterModuleMultiController.prototype.isSelected=function(e){return!!this.selected.all||this.selected.values.has(e)},FilterModuleMultiController.prototype.isPartiallySelected=function(){return!this.selected.all&&this.selected.values.size>0},FilterModuleMultiController.prototype.toggleSelection=function(e){var t=this.selected.all?Object(W.f)(this.options.map(function(e){return e.value})):this.selected.values,n=t.has(e)?t.remove(e):t.add(e),r=n.size===this.options.length;this.selected=this.selected.with({all:r,values:r?Object(W.f)([]):n}),this.onSelection({$filter:this.filter,$value:this.selected})},Object.defineProperty(FilterModuleMultiController.prototype,"selectAll",{get:function(){return this.selected.all},set:function(e){this.selected=this.selected.with({all:!this.selected.all&&!this.isPartiallySelected(),values:this.selected.values.clear()}),this.onSelection({$filter:this.filter,$value:this.selected})},enumerable:!0,configurable:!0}),FilterModuleMultiController.prototype.minimumOptionsAvailable=function(){var e="number"==typeof this.searchMin?this.searchMin:12;return this.options.length>=e},FilterModuleMultiController.$inject=[],FilterModuleMultiController}(),controllerAs:"ctrl",bindings:{filter:"<",searchMin:"<",fullNameTooltip:"<",onSelection:"&?"},template:'\n    <div class="filter-module-multi">\n\n      \x3c!-- Option Filter Begins --\x3e\n      <div class="filter-module-search-container" ng-if="ctrl.minimumOptionsAvailable()">\n        <input type="text"\n               class="form-control form-control-sm form-control-block"\n               ng-model="ctrl.filterPattern"\n               ng-model-options="ctrl.options"\n               placeholder="Find..." />\n      </div>\n      \x3c!-- @Option Filter Ends --\x3e\n\n      <div class="field-group">\n\n        \x3c!-- List Item Begins --\x3e\n        <span class="checkbox-icon option-field">\n          <input\n            id="filter-select-all-{{ctrl.position}}"\n            name="Select All"\n            type="checkbox"\n            value="Select All"\n            ng-model="ctrl.selectAll"\n            ng-class="{\'partially-selected\': ctrl.isPartiallySelected()}"\n            />\n          <label class="option-label inline-icon icon-editor-checkbox-light-unchecked" for="filter-select-all-{{ctrl.position}}">\n            <span>(Select All)</span>\n          </label>\n        </span>\n\n        <span ng-repeat="option in ctrl.options | filter:{ label: ctrl.filterPattern } | limitTo: 250 track by $index">\n\n          \x3c!-- Multiple Selection Item Iterator Begins --\x3e\n          <span class="checkbox-icon option-field">\n            <input\n              id="filter-{{ctrl.position}}-{{option.value}}"\n              name="{{option.value}}"\n              type="checkbox"\n              value="{{option.value}}"\n              ng-checked="ctrl.isSelected(option.value)"\n              ng-click="ctrl.toggleSelection(option.value)"\n              />\n            <label class="option-label inline-icon icon-editor-checkbox-light-unchecked" for="filter-{{ctrl.position}}-{{option.value}}">\n              <span\n                ng-class="{\'null-option\': option.value === null}"\n                ng-attr-uib-tooltip="{{ctrl.fullNameTooltip ? option.label : undefined}}"\n                ng-attr-tooltip-placement="{{ctrl.fullNameTooltip ? \'left\' : undefined}}"\n                ng-attr-tooltip-append-to-body="{{ctrl.fullNameTooltip ? true : undefined}}"\n              >\n                {{option.label}}\n              </span>\n            </label>\n          </span>\n          \x3c!-- @Multiple Selection Item Iterator Ends --\x3e\n\n        </span>\n        \x3c!-- @List Item Ends --\x3e\n\n      </div>\n\n    </div>\n  '},J=n("Zz1P"),X=n("h3aq");function makeLabelValueList(e){for(var t=[],n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var o=r[n];t.push({label:e[o],value:o})}return t.sort(function(e,t){return e.value-t.value})}var K=((Q={})[f.DataType.DATEQTR]=makeLabelValueList(X.a.QuarterNames),Q[f.DataType.DATEMONTH]=makeLabelValueList(X.a.MonthNames),Q[f.DataType.DATEWKDAY]=makeLabelValueList(X.a.WeekdayNames),Q),ee={controller:function(){function FilterModuleRangeController(){}return FilterModuleRangeController.prototype.$onChanges=function(){this.selected=this.filter.selected},Object.defineProperty(FilterModuleRangeController.prototype,"position",{get:function(){return this.filter.position},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"options",{get:function(){return this.filter.options.values},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"isDate",{get:function(){return this.filter.isDateType},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"isDatePart",{get:function(){return this.filter.isDiscreteDateType},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"isNumber",{get:function(){return this.filter.isNumericType},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"dateParts",{get:function(){return K[this.filter.formulaType]},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"min",{get:function(){return this.selected.min},set:function(e){void 0===e&&(e=null),e!==this.selected.min&&(this.selected=this.selected.with({min:e}),this.onSelection({$filter:this.filter,$value:this.selected}))},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"max",{get:function(){return this.selected.max},set:function(e){void 0===e&&(e=null),e!==this.selected.max&&(this.selected=this.selected.with({max:e}),this.onSelection({$filter:this.filter,$value:this.selected}))},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"minDateString",{get:function(){var e=J.utc(this.min);return e.isValid()?e.format("YYYY-MM-DD"):null},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"minDatePlaceholder",{get:function(){var e=J.utc(this.filter.options.values.min);return e.isValid()?e.format("YYYY-MM-DD"):"Invalid minimum date"},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"maxDateString",{get:function(){var e=J.utc(this.max);return e.isValid()?e.format("YYYY-MM-DD"):null},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"maxDatePlaceholder",{get:function(){var e=J.utc(this.filter.options.values.max);return e.isValid()?e.format("YYYY-MM-DD"):"Invalid maximum date"},enumerable:!0,configurable:!0}),FilterModuleRangeController.prototype.setMinDate=function(e){var t=e;if(void 0!==t)if(null===t)this.min=null;else{var n=J.utc(t);n.isValid()&&(this.min=n.valueOf())}},FilterModuleRangeController.prototype.setMaxDate=function(e){var t=e;if(void 0!==t)if(null===t)this.max=null;else{var n=J.utc(t);n.isValid()&&(this.max=n.valueOf())}},Object.defineProperty(FilterModuleRangeController.prototype,"minDatePart",{get:function(){return String(this.min)},set:function(e){this.min=Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(FilterModuleRangeController.prototype,"maxDatePart",{get:function(){return String(this.max)},set:function(e){this.max=Number(e)},enumerable:!0,configurable:!0}),FilterModuleRangeController.prototype.onFocusInput=function(e){e.target.select()},FilterModuleRangeController.$inject=[],FilterModuleRangeController}(),controllerAs:"ctrl",bindings:{key:"<",filter:"<",onSelection:"&?"},template:'\n    <div class="filter-module-range">\n      <div class="field-group number" ng-if="ctrl.isNumber">\n        <input\n          type="number"\n          class="form-control form-control-sm range-filter-input range-min"\n          ng-model="ctrl.min"\n          placeholder="{{ctrl.options.min}}"\n          ng-focus="ctrl.onFocusInput($event)"\n        />\n        <span class="range-separator">&ndash;</span>\n        <input\n          type="number"\n          class="form-control form-control-sm range-filter-input range-max"\n          ng-model="ctrl.max"\n          placeholder="{{ctrl.options.max}}"\n          ng-focus="ctrl.onFocusInput($event)"\n        />\n      </div>\n      <div class="field-group date" ng-if="ctrl.isDate">\n        <input\n          type="text"\n          mode-date-picker="{{ ctrl.minDateString }}"\n          on-change="ctrl.setMinDate($value)"\n          ng-click="ctrl.onFocusInput($event)"\n          placeholder="{{ ctrl.minDatePlaceholder }}"\n          id="{{ ctrl.filter.position }}-min"\n          name="{{ ctrl.filter.position }}-min"\n          class="form-control form-control-sm range-filter-input range-min" />\n        <span class="range-separator">&ndash;</span>\n        <input\n          type="text"\n          mode-date-picker="{{ ctrl.maxDateString }}"\n          on-change="ctrl.setMaxDate($value)"\n          ng-click="ctrl.onFocusInput($event)"\n          placeholder="{{ ctrl.maxDatePlaceholder }}"\n          id="{{ ctrl.filter.position }}-max"\n          name="{{ ctrl.filter.position }}-max"\n          class="form-control form-control-sm range-filter-input range-max" />\n      </div>\n      <div class="field-group date" ng-if="ctrl.isDiscreteDate">\n        <select\n          class="form-control form-control-sm range-filter-input"\n          ng-model="ctrl.minDiscreteDate"\n        >\n          <option\n            ng-repeat="option in ctrl.discreteDateOptions"\n            value="{{option.value}}"\n          >{{option.label}}</option>\n        </select>\n        <span class="range-separator">&ndash;</span>\n        <select\n          class="form-control form-control-sm range-filter-input"\n          ng-model="ctrl.maxDiscreteDate"\n        >\n          <option\n            ng-repeat="option in ctrl.discreteDateOptions"\n            value="{{option.value}}"\n          >{{option.label}}</option>\n        </select>\n      </div>\n    </div>\n  '},te=n("yqn6"),ne=n("0e28"),re=n("sGhr"),oe=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ie=function(){function ConfigureFilterModalController(){}return ConfigureFilterModalController.prototype.choseFilterType=function(e){switch(e){case"range":var t=void 0;t=this.initDataField.dataType===f.DataType.DATE||this.initDataField.dataType===f.DataType.DATETIME?"DATETRUNC('day', ["+this.initDataField.name+"])":"["+this.initDataField.name+"]",this.viewField=this.chartModel.buildViewCalcField(t,f.VariableType.CONTINUOUS,this.initDataField.name),this.currentStep="filter_range";break;case"individual_values":this.viewField=this.chartModel.buildViewCalcField("["+this.initDataField.name+"]",f.VariableType.DISCRETE,this.initDataField.name),this.currentStep="filter_multi_values";break;case f.DatePart.YEAR:case f.DatePart.QUARTER:case f.DatePart.MONTH:case f.DatePart.DAY:case f.DatePart.WEEK:case f.DatePart.WEEKDAY:t="DATEPART('"+e+"', ["+this.initDataField.name+"])";this.viewField=this.chartModel.buildViewCalcField(t,f.VariableType.DISCRETE,t),this.currentStep="filter_multi_values"}},ConfigureFilterModalController}(),ae=function(){function ConfigureFilterModalService(e){this.Modal=e}return ConfigureFilterModalService.prototype.open=function(e,t){return void 0===t&&(t={}),this.Modal.openDraggable(e,oe({bindToController:!0,controllerAs:"ctrl",controller:ie,template:'\n        <config-filter-type-step\n          ng-if="ctrl.currentStep === \'filter_type\'"\n          on-chose-filter-type="ctrl.choseFilterType($filterType)"\n          on-dismiss="ctrl.$dismiss()"\n          field="ctrl.initDataField"\n          model="ctrl.model"\n          rel-name="ctrl.relName"\n          chart-model="ctrl.chartModel" />\n        <config-filter-multi-values-step\n          ng-if="ctrl.currentStep === \'filter_multi_values\'"\n          on-enc-filter-field="ctrl.$close($filterField)"\n          on-dismiss="ctrl.$dismiss()"\n          apply-filter="ctrl.applyFilter"\n          field="ctrl.viewField"\n          model="ctrl.model"\n          rel-name="ctrl.relName"\n          chart-model="ctrl.chartModel"\n          is-replacing="ctrl.isReplacing"\n          init-enc="ctrl.initEnc" />\n        <config-filter-range-step\n          ng-if="ctrl.currentStep === \'filter_range\'"\n          on-enc-filter-field="ctrl.$close($filterField)"\n          on-dismiss="ctrl.$dismiss()"\n          apply-filter="ctrl.applyFilter"\n          field="ctrl.viewField"\n          model="ctrl.model"\n          rel-name="ctrl.relName"\n          chart-model="ctrl.chartModel"\n          is-replacing="ctrl.isReplacing"\n          init-enc="ctrl.initEnc" />\n      '},t)).result},ConfigureFilterModalService.prototype.addFilter=function(e,t,n,r){void 0===r&&(r={});var o,i=Object(te.n)(e,t);switch(i.dataType){case f.DataType.BOOLEAN:case f.DataType.STRING:o={currentStep:"filter_multi_values",viewField:t.buildViewCalcField("["+i.name+"]",f.VariableType.DISCRETE,i.name)};break;default:o={currentStep:"filter_type",initDataField:i}}this.open(oe({chartModel:t,applyFilter:n},o),r).then(n,function(){})},ConfigureFilterModalService.prototype.editFilter=function(e,t,n,r,o){void 0===o&&(o={});var i;t.buildViewCalcField(e.formula,e.variable.type,e.id);switch(e.filterType){case f.FilterType.Discrete:case f.FilterType.DiscreteBoolean:i="filter_multi_values";break;case f.FilterType.Continuous:case f.FilterType.ContinuousDate:i="filter_range";break;default:throw new Error("Unexpected filter type: "+e.filterType)}var a=t.buildViewCalcField(e.formula,e.variable.type,e.id);this.open({chartModel:t,isReplacing:n,applyFilter:r,currentStep:i,viewField:a,initEnc:e},o).then(r,function(){})},ConfigureFilterModalService.$inject=["ModalService"],ConfigureFilterModalService}(),le={controller:function(){return function(){}}(),controllerAs:"ctrl",bindings:{title:"@",submit:"@",onSubmit:"&",onDismiss:"&",onApply:"&?",onReset:"&?",canApply:"<?",canReset:"<?",modalContainerClass:"@"},transclude:!0,template:'\n    <div class="default-modal scroll-modal viz-filter-config-modal">\n      <div class="modal-header">\n        <h3 class="modal-title">{{ ctrl.title }}</h3>\n        <a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.onDismiss()"></a>\n      </div>\n      <div class="{{ ctrl.modalContainerClass }}" ng-transclude></div>\n      <div class="modal-action-bar">\n        <div class="modal-action-bar-links">\n          <button class="btn btn-lg btn-optional-action" ng-if="ctrl.onReset" ng-click="ctrl.onReset()" ng-disabled="!ctrl.canReset">Reset</button>\n          <button class="btn btn-lg btn-optional-action" ng-if="ctrl.onApply" ng-click="ctrl.onApply()" ng-disabled="!ctrl.canApply">Apply</button>\n        </div>\n        <button class="btn btn-primary-link" ng-click="ctrl.onDismiss()">Cancel</button>\n        <button class="btn btn-lg btn-filled-primary" ng-click="ctrl.onSubmit()">{{ ctrl.submit }}</button>\n      </div>\n    </div>\n  '},se={controller:function(){function ConfigFilterTypeStepController(){}return ConfigFilterTypeStepController.prototype.$onInit=function(){switch(this.field.dataType){case f.DataType.DATE:case f.DataType.DATETIME:this.treeNodes=[treeNodeFactory("range","Range of Dates",void 0,void 0,"icon-continuous-date"),treeNodeFactory("individual_values","Individual Dates",void 0,void 0,"icon-discrete-number"),null,treeNodeFactory(f.DatePart.YEAR,"Year",void 0,void 0,"icon-discrete-number"),treeNodeFactory(f.DatePart.QUARTER,"Quarter",void 0,void 0,"icon-discrete-number"),treeNodeFactory(f.DatePart.MONTH,"Month",void 0,void 0,"icon-discrete-number"),treeNodeFactory(f.DatePart.DAY,"Day of Month",void 0,void 0,"icon-discrete-number"),treeNodeFactory(f.DatePart.WEEK,"Week Number",void 0,void 0,"icon-discrete-number"),treeNodeFactory(f.DatePart.WEEKDAY,"Day of Week",void 0,void 0,"icon-discrete-number")];break;default:this.treeNodes=[treeNodeFactory("range","Range of Values",void 0,void 0,"icon-continuous-number"),treeNodeFactory("individual_values","Individual Values",void 0,void 0,"icon-discrete-number")]}},ConfigFilterTypeStepController.prototype.handleSelection=function(e){this.selection=e},ConfigFilterTypeStepController}(),controllerAs:"ctrl",bindings:{field:"<",onChoseFilterType:"&",onDismiss:"&"},template:'\n    <config-step\n      title="How would you like to filter {{ ctrl.field.name }}?"\n      submit="Next"\n      on-submit="ctrl.onChoseFilterType({ $filterType: ctrl.selection })"\n      on-dismiss="ctrl.onDismiss()"\n      modal-container-class="viz-filter-type-modal-container"\n    >\n      <tree-view\n        nodes="ctrl.treeNodes"\n        initial-selection="range"\n        on-select="ctrl.handleSelection($key)" />\n    </config-step>\n  '},ce={controller:function(){function ConfigFilterMultiValuesStepController(){this.savedSelection=new ne.b}return ConfigFilterMultiValuesStepController.prototype.$onInit=function(){var e=this.field.formula.form===f.FormType.DATEFUNC&&this.field.formula.datePart;this.initEnc&&(this.savedSelection=new ne.b({all:this.initEnc.selection.mode===f.SelectionMode.ALL,values:Object(W.f)(this.initEnc.selection.selected)}));var t=ne.d.buildDefaultSelectControl(this.field),n=Object(te.p)(this.chartModel,this.field.source,f.VariableType.DISCRETE,this.field.id);this.savedSelection.values.forEach(function(e){return n.add(e)}),this.filterControl=t.with({options:new re.b({isLoaded:!0,values:X.a.buildDiscreteValueOptions(n,e)}),selected:this.savedSelection})},ConfigFilterMultiValuesStepController.prototype.filterTypePhrase=function(){var e=Object(te.n)(this.field,this.chartModel);if(this.field.formula.form===f.FormType.DATEFUNC){var t=this.field.formula.datePart;return t.slice(0,1).toUpperCase()+t.slice(1)+" of "+e.name}return e.name},ConfigFilterMultiValuesStepController.prototype.handleSelection=function(e){this.filterControl=this.filterControl.with({selected:e})},ConfigFilterMultiValuesStepController.prototype.toFilterField=function(){var e=this.filterControl.selected,t={formula:this.field.source,variable:{type:f.VariableType.DISCRETE},selection:{selected:e.values.toArray(),mode:e.all?f.SelectionMode.ALL:f.SelectionMode.INCLUDE}};return this.field.dataType===f.DataType.BOOLEAN?oe({filterType:f.FilterType.DiscreteBoolean},t):oe({filterType:f.FilterType.Discrete},t)},ConfigFilterMultiValuesStepController.prototype.submit=function(){this.onEncFilterField({$filterField:this.toFilterField()})},ConfigFilterMultiValuesStepController.prototype.apply=function(){this.applyFilter(this.toFilterField()),this.savedSelection=this.filterControl.selected,this.isReplacing=!1},ConfigFilterMultiValuesStepController.prototype.reset=function(){this.filterControl=this.filterControl.with({selected:this.savedSelection})},ConfigFilterMultiValuesStepController.prototype.isDirty=function(){return!this.filterControl.selected.equals(this.savedSelection)},ConfigFilterMultiValuesStepController}(),controllerAs:"ctrl",bindings:{field:"<",model:"<",relName:"<",chartModel:"<",isReplacing:"<",initEnc:"<",onEncFilterField:"&",onDismiss:"&",applyFilter:"<"},template:'\n    <config-step\n      title="Filter - {{ ctrl.filterTypePhrase() }}"\n      submit="OK"\n      on-submit="ctrl.submit()"\n      on-dismiss="ctrl.onDismiss()"\n      on-apply="ctrl.apply()"\n      on-reset="ctrl.reset()"\n      can-apply="ctrl.isDirty() || ctrl.isReplacing"\n      can-reset="ctrl.isDirty()"\n      modal-container-class="modal-container"\n    >\n      <filter-module-multi\n        filter="ctrl.filterControl"\n        search-min="0"\n        on-selection="ctrl.handleSelection($value)" />\n    </config-step>\n  '},de={controller:function(){function ConfigFilterRangeStepController(){this.savedSelection=new re.c}return ConfigFilterRangeStepController.prototype.$onInit=function(){var e=ne.d.buildDefaultRangeControl(this.field),t=Object(te.p)(this.chartModel,this.field.source,f.VariableType.CONTINUOUS,this.field.id);if(this.filterControl=e.with({options:new re.d({isLoaded:!0,values:new re.c({min:t.min,max:t.max})})}),this.initEnc){var n=new re.c(this.initEnc.range);this.isDateType()?this.filterControl=this.filterControl.withDates(n):this.filterControl=this.filterControl.with({selected:n}),this.savedSelection=this.filterControl.selected}else this.savedSelection=this.filterControl.options.values,this.filterControl=this.filterControl.with({selected:this.savedSelection})},ConfigFilterRangeStepController.prototype.handleSelection=function(e){this.filterControl=this.filterControl.with({selected:e})},ConfigFilterRangeStepController.prototype.isDateType=function(){return this.field.dataType===f.DataType.DATE||this.field.dataType===f.DataType.DATETIME},ConfigFilterRangeStepController.prototype.toFilterField=function(){var e=this.isDateType()?this.filterControl.selectedAsDates:this.filterControl.selected,t={formula:this.field.source,variable:{type:f.VariableType.CONTINUOUS},range:{min:e.min,max:e.max},includeMin:!0,includeMax:!this.isDateType(),includeNulls:!1};return this.isDateType()?oe({filterType:f.FilterType.ContinuousDate},t):oe({filterType:f.FilterType.Continuous},t)},ConfigFilterRangeStepController.prototype.submit=function(){this.onEncFilterField({$filterField:this.toFilterField()})},ConfigFilterRangeStepController.prototype.apply=function(){this.applyFilter(this.toFilterField()),this.savedSelection=this.filterControl.selected,this.isReplacing=!1},ConfigFilterRangeStepController.prototype.reset=function(){this.filterControl=this.filterControl.with({selected:this.savedSelection})},ConfigFilterRangeStepController.prototype.isDirty=function(){return!this.filterControl.selected.equals(this.savedSelection)},ConfigFilterRangeStepController}(),controllerAs:"ctrl",bindings:{field:"<",model:"<",relName:"<",chartModel:"<",isReplacing:"<",initEnc:"<",onEncFilterField:"&",onDismiss:"&",applyFilter:"<"},template:'\n    <config-step\n      title="Filter - {{ ctrl.field.name }}"\n      submit="OK"\n      on-submit="ctrl.submit()"\n      on-dismiss="ctrl.onDismiss()"\n      on-apply="ctrl.apply()"\n      on-reset="ctrl.reset()"\n      can-apply="ctrl.isDirty() || ctrl.isReplacing"\n      can-reset="ctrl.isDirty()"\n      modal-container-class="modal-container"\n    >\n      <filter-module-range\n        filter="ctrl.filterControl"\n        on-selection="ctrl.handleSelection($value)" />\n    </config-step>\n  '};r.module("mode.configureFilterModalSteps",[]).component("configStep",le).component("configFilterTypeStep",se).component("configFilterMultiValuesStep",ce).component("configFilterRangeStep",de);var ue,pe={bindings:{colorPalette:"<",colorPalettes:"<",dropupClass:"<",updatePalette:"&",selectPalette:"&",paletteType:"<",palettesLink:"<",owner:"<",accordion:"<",showPalettesUpsell:"<"},template:'\n    <div uib-dropdown ng-attr-dropdown-append-to-body="{{ctrl.accordion}}" class="advanced-theme" ng-class="{dropup: ctrl.dropupClass}">\n      <a href="#" class="chart-toggle-container clearfix dropdown-toggle" uib-dropdown-toggle>\n        <div href="#" class="chart-toggle-theme">\n          <div class="theme-name">{{ctrl.getCurrentPalette().name}}</div>\n          <i class="icon-double-carets pull-right"></i>\n          <div class="divergent-gradient" ng-if="ctrl.getCurrentPalette().palette_type === \'divergent\'">\n            <span style="background: linear-gradient(to right, {{ctrl.getCurrentPalette().value.split(\',\')[0]}}, {{ctrl.getCurrentPalette().value.split(\',\')[1]}}, {{ctrl.getCurrentPalette().value.split(\',\')[2]}} )"></span>\n          </div>\n        </div>\n      </a>\n      <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-left advanced-theme" select-height="390">\n        <div class="header" ng-if="ctrl.showCustomPalettes()">Custom Palettes</div>\n        <li ng-if="ctrl.showCustomPalettes()" ng-repeat="colorPalette in ctrl.colorPalettes | filter: {palette_type: ctrl.paletteType, predefined: false} track by $index">\n          <a href="#" ng-class="{\'active\': colorPalette.token === ctrl.colorPalette}" class="checkbox-icon" ng-click="ctrl.onSelectPalette({palette: colorPalette})">\n            <span class="selected-indicator"></span>\n            <div class="palette-name">{{ colorPalette.name }}</div>\n            <div class="swatches" ng-if="ctrl.getCurrentPalette().palette_type === \'categorical\'">\n              <span class="swatch" ng-repeat="color in colorPalette.value.split(\',\') track by $index" ng-if="$index < 3" style="background:{{color}}"></span>\n            </div>\n            <div class="divergent-gradient" ng-if="ctrl.getCurrentPalette().palette_type === \'divergent\'">\n              <span style="background: linear-gradient(to right, {{colorPalette.value.split(\',\')[0]}}, {{colorPalette.value.split(\',\')[1]}}, {{colorPalette.value.split(\',\')[2]}} )"></span>\n            </div>\n          </a>\n        </li>\n        <hr ng-if="ctrl.showCustomPalettes()" />\n        <div class="header">Mode Default Palettes</div>\n        <li ng-repeat="colorPalette in ctrl.colorPalettes | filter: {palette_type: ctrl.paletteType, predefined: true} track by $index">\n          <a ng-class="{\'active\': colorPalette.token === ctrl.colorPalette}" href="#" class="checkbox-icon" ng-click="ctrl.onSelectPalette({palette: colorPalette})">\n            <span class="selected-indicator"></span>\n            <div class="palette-name">{{ colorPalette.name }}</div>\n            <div class="swatches" ng-if="ctrl.getCurrentPalette().palette_type === \'categorical\'">\n              <span class="swatch" ng-repeat="color in colorPalette.value.split(\',\') track by $index" ng-if="$index < 3" style="background:{{color}}"></span>\n            </div>\n            <div class="divergent-gradient" ng-if="ctrl.getCurrentPalette().palette_type === \'divergent\'">\n              <span style="background: linear-gradient(to right, {{colorPalette.value.split(\',\')[0]}}, {{colorPalette.value.split(\',\')[1]}}, {{colorPalette.value.split(\',\')[2]}} )"></span>\n            </div>\n          </a>\n        </li>\n        <div class="custom-upsell" ng-if="ctrl.showPalettesUpsell">\n          + Or add a <a href="{{ctrl.palettesLink}}" target="_blank">custom palette here</a>\n        </div>\n      </ul>\n    </div>\n  ',controller:function(){function ColorPalettesDropdownController(){}return ColorPalettesDropdownController.prototype.getCurrentThemeValue=function(){var e=this;if(this.colorPalette&&this.colorPalette.length){var t=this.colorPalettes.filter(function(t){return t.token===e.colorPalette});return t.length?t[0].value.split(","):[]}},ColorPalettesDropdownController.prototype.getCurrentPalette=function(){var e=this;if(this.colorPalette&&this.colorPalette.length){var t=this.colorPalettes.filter(function(t){return t.token===e.colorPalette});return t.length?t[0]:void 0}},ColorPalettesDropdownController.prototype.onSelectPalette=function(e){this.accordion?this.selectPalette(e):this.updatePalette(e)},ColorPalettesDropdownController.prototype.onUpdatePalette=function(e){this.updatePalette({palette:e})},ColorPalettesDropdownController.prototype.showCustomPalettes=function(){var e=this;return this.colorPalettes.filter(function(t){return!t.predefined&&t.palette_type===e.paletteType}).length},ColorPalettesDropdownController}(),controllerAs:"ctrl"},he=n("KXXZ"),ge=n("9jGw"),me=function(){function ColorPickerModalController(e,t,n){var r,o=this;this.store=e,this.flipperService=t,this.Utils=n,e.select(l.v).subscribe(function(e){r=e}),this.owner=r,this.formatSubscriber=e.select(ge.a.getSelectedChart).subscribe(function(e){o.format=e.format,o.redrawSeries(),o.redrawColors()})}return ColorPickerModalController.prototype.$onDestroy=function(){this.formatSubscriber.unsubscribe()},ColorPickerModalController.prototype.updatePalette=function(e){this.chartService.updateTheme("",e.token,e.value.split(",")),this.colorPalette=e.token},ColorPickerModalController.prototype.redrawSeries=function(){this.series=[];for(var e=0,t=Object(he.f)(this.encoding,this.chartModel,this.format);e<t.length;e++){var n=t[e];this.series.push({color:this.format.colors.map[n],name:n})}},ColorPickerModalController.prototype.redrawColors=function(){var e=this,t=this.colorPalettes.filter(function(t){return t.token===e.colorPalette});this.colors=0===t.length?[]:t[0].value.split(",").map(function(t){return{used:e.series.some(function(e){return e.color===t}),value:t}})},ColorPickerModalController.prototype.getCurrentThemeValue=function(){return this.colors},ColorPickerModalController.prototype.dragstart=function(e,t){this.colorBeingDragged=t},ColorPickerModalController.prototype.dragover=function(e,t){e.preventDefault()},ColorPickerModalController.prototype.drop=function(e,t){this.chartService.updateSeriesSpecificColor(t.name,this.colorBeingDragged),t.color=this.colorBeingDragged,this.redrawColors()},ColorPickerModalController.$inject=["RxStoreService","DataLayerFlipperService","Utils"],ColorPickerModalController}(),fe=function(){function ColorPickerModalService(e){this.Modal=e}return ColorPickerModalService.prototype.open=function(e){this.Modal.openDraggable(e,{bindToController:!0,controllerAs:"ctrl",controller:me,template:'\n        <div class="default-modal vegas-chart-color-picker-modal">\n          <div class="modal-header">\n            <h3 class="modal-title">Choose Colors</h3>\n            <a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss()"></a>\n          </div>\n          <div class="modal-container">\n            <color-palettes-dropdown\n              color-palette="ctrl.colorPalette"\n              color-palettes="ctrl.colorPalettes"\n              dropup-class="false"\n              update-palette="ctrl.updatePalette(palette)"\n              palette-type="\'categorical\'"\n              palettes-link="ctrl.palettesLink"\n              show-palettes-upsell="!ctrl.owner.user"\n              owner="ctrl.owner"\n            ></color-palettes-dropdown>\n            <p style="margin: 12px 2px 0">Drag and drop colors onto series:</p>\n            <div class="swatches to-be-dragged" style="float: none; margin-bottom: 10px">\n              <span\n                class="swatch"\n                ng-repeat="color in ctrl.getCurrentThemeValue()"\n                ng-class="{used: color.used}"\n                style="background: {{color.value}}; border-color: {{color.value}}"\n                draggable="true"\n                ng-dragstart="ctrl.dragstart($event, color.value)"\n              ></span>\n            </div>\n            <ul class="list-unstyled">\n              <li\n                ng-repeat="series in ctrl.series"\n                ng-dragover="ctrl.dragover($event, series)"\n                ng-drop="ctrl.drop($event, series)"\n                style="display: block"\n              >\n                <span style="display: inline-block; height: 12px; width: 12px; border-radius: 6px; background: {{ series.color }}"></span>\n                {{ series.name }}\n              </li>\n            </ul>\n          </div>\n          <div class="modal-action-bar">\n            <button class="btn btn-lg btn-filled-primary" ng-click="ctrl.$close()">OK</button>\n          </div>\n        </div>\n      '})},ColorPickerModalService.$inject=["ModalService"],ColorPickerModalService}(),Ce=function(e){return void 0===e&&(e="{{ctrl.orgUsername}}"),'\n    <aside class="business-promo business-promo-for-report-runs">\n      \x3c!-- Illustration --\x3e\n      <figure>\n        <i class="icon-run-now-click-illo"></i>\n      </figure>\n      \x3c!-- @Illustration --\x3e\n\n      <section class="promo-wrapper">\n\n        \x3c!-- Header --\x3e\n        <header class="promo-header">\n          <h3 class="promo-heading">Try Mode Business</h3>\n          <span class="promo-sub-heading">to streamline collaboration</span>\n        </header>\n        \x3c!-- @Header --\x3e\n\n        \x3c!-- Body --\x3e\n        <div class="promo-body">\n          <ul class="promo-props">\n            <li class="promo-prop icon-check-mark">Run anyone\'s reports, anytime</li>\n            <li class="promo-prop icon-check-mark">Schedule automatic runs</li>\n            <li class="promo-prop icon-check-mark">Collaboratively edit reports</li>\n          </ul>\n        </div>\n        \x3c!-- @Body --\x3e\n\n        \x3c!-- Footer --\x3e\n        <footer class="promo-footer">\n          <a class="promo-cta-btn btn btn-lg btn-filled-primary" target="_blank" href="/organizations/'+e+'/start_trial?trk_element_id=2" target="_self">Learn More</a>\n        </footer>\n        \x3c!-- @Footer --\x3e\n\n      </section>\n    </aside>\n  '},ye={controllerAs:"ctrl",bindings:{orgUsername:"<"},template:Ce()},be=n("RRsi"),ve={controller:function(){function PromoPopoverLinkController(e,t,n){this.$element=e,this.$timeout=t,this.as=n,this.openState=!1}return PromoPopoverLinkController.prototype.promoModeBusinessTemplate=function(e){return'\n      <div class="popover-wrapper">\n        <div class="popover-content">\n          '+Ce(e)+"\n        </div>\n      </div>\n    "},PromoPopoverLinkController.prototype.handleClick=function(e){var t=this,n={product_context:"report_view",product_subcontext:"run_timestamp",interaction_type:"click",upsell_element_id:2,organization_id:this.orgId};this.popoverIsOpen()||(this.openState=!this.openState,this.$timeout(function(){return t.bootstrapPopover()},100),this.as.run(be.c.Track,be.d,n))},PromoPopoverLinkController.prototype.bootstrapPopover=function(){var e=r.element(window.document),t=r.element(".mode-business-promo-tooltip"),n=function(e,t){return!!r.element(e).closest(t).length},o=this,i=function(){o.$timeout(function(){o.openState=!1,e.off("click.business-promo"),t.off("click.business-promo")})};e.on("click.business-promo",function(e){n(e.target,t)||i()}),t.on("click.business-promo",function(e){n(e.target,".close-link")&&i()}),t.addClass("custom-fade-in")},PromoPopoverLinkController.prototype.popoverIsOpen=function(){return this.openState},PromoPopoverLinkController.$inject=["$element","$timeout","AnalyticsService"],PromoPopoverLinkController}(),controllerAs:"ctrl",transclude:!0,bindings:{placement:"@",orgUsername:"<",orgId:"<"},template:'\n    <a class="nav-link-simple report-run-at-from-now"\n       ng-click="ctrl.handleClick($evt)"\n       uib-tooltip-html="ctrl.promoModeBusinessTemplate(ctrl.orgUsername)"\n       tooltip-animation="false"\n       tooltip-class="mode-business-promo-tooltip"\n       tooltip-trigger="none"\n       tooltip-is-open="ctrl.popoverIsOpen()"\n       tooltip-append-to-body="true"\n       tooltip-placement="{{ctrl.placement}}">\n      <span ng-transclude></span>\n    </a>\n  '},Ie={controller:function(){function BusinessPromoForSpacesController(e){this.AssetService=e}return BusinessPromoForSpacesController.prototype.moveToHeroImageSrc=function(){return this.AssetService.moveToIllo},BusinessPromoForSpacesController.$inject=["AssetService"],BusinessPromoForSpacesController}(),controllerAs:"ctrl",bindings:{orgUsername:"<"},template:'\n    <aside class="business-promo business-promo-for-spaces">\n    \n      \x3c!-- Illustration --\x3e\n      <figure>\n        <img src="{{ctrl.moveToHeroImageSrc()}}" />\n      </figure>\n      \x3c!-- @Illustration --\x3e\n\n      <section class="promo-wrapper">\n\n        \x3c!-- Header --\x3e\n        <header class="promo-header">\n          <h3 class="promo-heading">Try Mode Business</h3>\n          <span class="promo-sub-heading">to organize & govern your work</span>\n        </header>\n        \x3c!-- @Header --\x3e\n\n        \x3c!-- Body --\x3e\n        <div class="promo-body">\n          <ul class="promo-props">\n            <li class="promo-prop icon-check-mark">Create as many spaces as you like</li>\n            <li class="promo-prop icon-check-mark">Work separately with private spaces</li>\n            <li class="promo-prop icon-check-mark">Limit database access with user roles</li>\n          </ul>\n        </div>\n        \x3c!-- @Body --\x3e\n\n        \x3c!-- Footer --\x3e\n        <footer class="promo-footer">\n          <a class="promo-cta-link" href="/organizations/{{ctrl.orgUsername}}/start_trial?trk_element_id=4" target="_blank">Learn More.</a>\n        </footer>\n        \x3c!-- @Footer --\x3e\n\n      </section>\n    </aside>\n  '};r.module("mode.components",["asyncFilter","ngSanitize","ngCookies","ngDrag","ui.bootstrap.contextMenu","ui.bootstrap.datepicker","ui.bootstrap.accordion","ui.select","mode.configureFilterModalSteps"]).component("formatSettings",o.a).component("fieldTreeView",y).component("treeView",b).component("treeViewItem",I).constant("ace",window.ace).component("filterPanelToggler",w).directive("insertFilterModalTrigger",function(){return{controller:m,controllerAs:"ctrl",restrict:"A",scope:{onInsert:"&?"}}}).directive("modeTable",function(){return{scope:{tableID:"@id",dataset:"<",view:"=?setView",selectColumn:"&?",selected:"@",viewer:"<",capacityOverride:"<",onAction:"&"},controller:Y,template:'\n      <div\n        class="editor-module editor-multi mode-object editor-table"\n        ng-show="ctrl.showTable()"\n        ng-class="{\'is-report-mode\': ctrl.isReportMode(), \'is-design-mode\': !ctrl.isReportMode(), \'is-linkable\': ctrl.isLinkable(), \'is-phantom-mode\': ctrl.isPhantomMode()}">\n        <div class="chart-content" ng-class="{\'content-exceeds-limit\': ctrl.exceedsRowLimit()}">\n\n          \x3c!-- Component Header Begins --\x3e\n          <div class="chart-header" ng-if="ctrl.isReportMode()">\n            <span class="chart-title">{{ctrl.queryName()}}</span>\n\n            <div class="new-viz-actions">\n              \x3c!-- Filter Begins --\x3e\n              <div ng-if="!ctrl.isPhantomMode()" class="table-filter-module" ng-class="{\'with-lightbox\': !viewer, \'with-focus\': ctrl.isFilterFocus}">\n                <div class="filter-container">\n                  <input\n                    type="text"\n                    class="filter-field"\n                    placeholder="Filter..."\n                    ng-model="ctrl.filterQuery"\n                    ng-model-options="{ debounce: 100 }"\n                    ng-change="ctrl.applyFilter(ctrl.filterQuery)"\n                    ng-focus="ctrl.selectAllInputText($event)"\n                    ng-blur="ctrl.removeFilterFocus()"/>\n                </div>\n                <a class="filter-apply-btn"\n                   href="#"\n                   uib-tooltip="{{ ctrl.filterQuery.length ? \'Clear Filter\' : \'Filter Table\' }}"\n                   tooltip-placement="{{ viewer === \'whiteLabel\' ? \'left\' : \'top\' }}">\n                  <svg-icon type="\'filter\'" ng-if="!ctrl.filterQuery.length" ng-click="ctrl.selectFilterInput($event)"></svg-icon>\n                  <svg-icon type="\'cancel-find\'" ng-if="ctrl.filterQuery.length && ctrl.isFilterFocus" ng-mousedown="ctrl.clearFilterInput($event)"></svg-icon>\n                  <svg-icon type="\'clear-filter\'" ng-if="ctrl.filterQuery.length && !ctrl.isFilterFocus" ng-mousedown="ctrl.clearFilterInput($event)"></svg-icon>\n                </a>\n              </div>\n              \x3c!-- @Filter Ends --\x3e\n\n              <a\n                class="new-viz-action hide-2"\n                ng-show="isClipboardEnabled"\n                ng-if="viewer !== \'whiteLabel\'"\n                href="javascript:void(0)"\n                uib-tooltip="Copy Link to Table"\n                copy-to-clipboard\n                clipboard-text="ctrl.reportVizURL()"\n                clipboard-success="ctrl.copySuccess()"\n                clipboard-enabled="isClipboardEnabled">\n                <svg-icon type="\'copy-link\'"></svg-icon>\n              </a>\n\n              <a class="new-viz-action" href="javascript:void(0)" ng-if="viewer !== \'whiteLabel\'">\n                <kebab-menu targetable="true">\n                  <li menu-clipboard-link class="show-2" link="ctrl.reportVizURL()" clipboard-enabled="isClipboardEnabled" clipboard-success="ctrl.copySuccess()" ng-show="isClipboardEnabled">Copy Link to Table</li>\n                  <li class="show-3 show-2 divider"></li>\n                  <li menu-item="exp" ng-click="ctrl.linkTo($event, \'query\')" ng-href="{{ ctrl.reportDataURL() }}" ng-if="!viewer">View Query <span class="mode-show-embed-inline">in Mode</span></li>\n                  <li menu-item="exp" ng-click="ctrl.linkTo($event, \'data\')" ng-href="{{ ctrl.reportDataURL() }}">View Query Results <span class="mode-show-embed-inline">in Mode</span></li>\n                </kebab-menu>\n              </a>\n\n              <span class="divider" ng-if="!viewer"></span>\n\n              <a class="new-viz-action"\n                 ng-href="{{ ctrl.reportVizURL() }}"\n                 ng-if="!viewer"\n                 ng-click="ctrl.linkTo($event, \'lightbox\')" class="new-viz-action">\n                <svg-icon class="mode-hide-embed" type="\'toggle-expanded-view\'" uib-tooltip="Expand"></svg-icon>\n                <svg-icon class="mode-show-embed-flex-inline" type="\'toggle-expanded-view\'" uib-tooltip="Expand in Mode" tooltip-placement="left"></svg-icon>\n              </a>\n            </div>\n          </div>\n          \x3c!-- Component Header Ends --\x3e\n\n          \x3c!-- Table Container Begins --\x3e\n          <div ng-show="ctrl.dataState() === \'succeeded\'" class="js-table-container mode-table-grid"></div>\n          \x3c!-- @Table Container Ends --\x3e\n\n          \x3c!-- Intermediary Messages Begin --\x3e\n          <div ng-if="ctrl.dataState() === \'oversized\'" class="error-message" >\n            <i class="icon-warning-small error-icon"></i>\n            <div class="message">\n              This query is too large to show in browser\n              <a\n                ng-click="ctrl.linkTo($event, \'data\')"\n                ng-href="{{ ctrl.reportDataURL() }}"\n                target="_blank"\n                rel="noopener"\n                class="sub-message">\n                Access the data\n              </a>\n            </div>\n          </div>\n          <div ng-show="ctrl.exceedsRowLimit()" class="more-text">\n            This table only shows the first {{ ctrl.rowLimit() | number }} rows. View complete results in\n            <a ng-click="ctrl.linkTo($event, \'data\')" ng-href="{{ ctrl.reportDataURL() }}" target="_blank" rel="noopener">Report Details</a>.\n          </div>\n          <div ng-if="ctrl.dataState() === \'failed\'" class="error-message">\n            <img ng-src="{{ ctrl.errorImage() }}" class="error-icon">\n            <div class="message">Looks like something went wrong with your query</div>\n            <a href="#" ng-click="ctrl.linkTo($event, \'data\')" ng-href="{{ ctrl.reportDataURL() }}" target="_blank" rel="noopener" class="sub-message">\n              Take a look at the issue\n            </a>\n          </div>\n          <div ng-if="ctrl.dataState() === \'cancelled\'" class="error-message">\n            <i class="icon-warning-small error-icon"></i>\n            <div class="message">This query was canceled</div>\n            <div class="sub-message"></div>\n          </div>\n          <div ng-if="ctrl.dataState() === \'running\' && ctrl.dataAvailable()" class="error-message">\n            <i class="icon-warning-small error-icon"></i>\n            <div class="message">This query is still running. Refresh the page to see the results.</div>\n            <div class="sub-message"></div>\n          </div>\n          <div ng-if="ctrl.dataState() === \'empty\'" class="error-message">\n            <div class="message">No rows returned</div>\n          </div>\n          \x3c!-- @Intermediary Messages End --\x3e\n        </div>\n      </div>\n    ',controllerAs:"ctrl",link:function(e,t,n,o){o.loadTable(t),t.get(0).addEventListener("click",function(e){var t=r.element(e.target).closest(".js-col-header");t.length>0&&!t.hasClass("is-selected-col")&&o.trackColumnSelectStart()},!0)}}}).component("promoPopoverLink",ve).component("filterModuleSingle",H).component("filterModuleMulti",q).component("filterModuleRange",ee).component("colorPalettesDropdown",pe).component("businessPromoForReportRuns",ye).component("businessPromoForSpaces",Ie).service("ConfigureFilterModalService",ae).service("ColorPickerModalService",fe),ue={},r.forEach("drag dragend dragenter dragexit dragleave dragover dragstart drop".split(" "),function(e){var t="ng"+e.charAt(0).toUpperCase()+e.slice(1);ue[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(r,o){var i=n(o[t],null,!0);return function(t,n){n[0].addEventListener(e,function(e){t.$apply(function(){i(t,{$event:e})})})}}}}]}),r.module("ngDrag",[]).directive(ue)},Pprw:function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">Export<a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <div class="modal-container clearfix">\n    <label class="modal-subheading">{{ title || \'Untitled Report\' }}</label>\n    <div class="file-generation">\n      <div class="icon-pdf-hover file-type-icon"><i class="status-icon" ng-class="pdfExport.state !== \'completed\' ? \'icon-generating spin\' : \'icon-complete\'"></i></div>\n      <span class="file-status">{{ pdfExport.state !== \'completed\' ? \'Generating PDF\' : \'PDF Complete\' }}</span>\n      <span class="file-name">{{ pdfExport.filename }}</span>\n    </div>\n    <status-loader\n      class="file-progress"\n      ng-if="pdfExport.state !== \'completed\'"\n      created-at="pdfExport.createdAt"\n      simple="true"\n      target-percent="80"\n      target-seconds="10">\n    </status-loader>\n  </div>\n  <div class="modal-action-bar">\n    <a ng-href="{{ pdfExport._resource.links(\'download\').href }}" target="_self" class="btn btn-lg btn-filled-primary" ng-click="$dismiss()" ng-disabled="pdfExport.state !== \'completed\'">{{ pdfExport.state !== \'completed\' ? \'Generating\' : \'Download\' }}</a>\n  </div>\n</div>'},PvkM:function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">{{ title}}<a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <div class="modal-container-sm">\n    <p ng-bind-html="text"></p>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg" ng-class="[confirmButtonClass || \'btn-filled-primary\']" ng-click="$close()">{{ confirmText || \'Ok\' }}</button>\n    <button ng-if="!onlyConfirm" class="btn btn-lg btn-secondary" ng-click="$dismiss()">{{ cancelText || \'Cancel\' }}</button>\n  </div>\n</div>'},Q4DI:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+c3dhcDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0ic3dhcCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS4wMDAwMDAsIDEuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zMyI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTAsMTIgTDEwLDEyIEMxMi43NjE0MjM3LDEyIDE1LDkuNzYxNDIzNzUgMTUsNyIgaWQ9Ik92YWwtMTEiIHN0cm9rZT0iIzYzNjU2RSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLDYuODM1NiBMMTYuMjAwMTU0LDQuNDM1NDg0NSBDMTYuNjQxODk2OCw0LjEwNDE3NzQ0IDE3LDQuMjg2NTc1MTggMTcsNC44MjYzNzc5NyBMMTcsOC44NDQ4MjIwMyBDMTcsOS4zOTIwMTM1OSAxNi42NDUwMjY3LDkuNTY5MzcwMDEgMTYuMjAwMTU0LDkuMjM1NzE1NSBMMTMsNi44MzU2IFoiIGlkPSJUcmlhbmdsZS1Db3B5IiBmaWxsPSIjNjM2NTZFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNS41MDAwMDAsIDYuNTAwMDAwKSByb3RhdGUoLTI3MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTUuNTAwMDAwLCAtNi41MDAwMDApICI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTYsMTIgTDkuMjAwMTU0MDEsOS41OTk4ODQ1IEM5LjY0MTg5Njc1LDkuMjY4NTc3NDQgMTAsOS40NTA5NzUxOCAxMCw5Ljk5MDc3Nzk3IEwxMCwxNC4wMDkyMjIgQzEwLDE0LjU1NjQxMzYgOS42NDUwMjY2OCwxNC43MzM3NyA5LjIwMDE1NDAxLDE0LjQwMDExNTUgTDYsMTIgWiIgaWQ9IlRyaWFuZ2xlLUNvcHkiIGZpbGw9IiM2MzY1NkUiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjUsMi41IEwxNS41LDIuNSIgaWQ9IkxpbmUiIHN0cm9rZT0iI0IxQjJCQSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi41LDAuNSBMMi41LDEyLjUiIGlkPSJMaW5lIiBzdHJva2U9IiNCMUIyQkEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},QUAy:function(e,t){e.exports=window.nv},RRsi:function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s});var r,o,i=n("PbPb"),a=(n.n(i),n("KVaf")),l="upsell_interaction";!function(e){!function(e){e.ClickExplore="click_explore",e.ClickKebab="click_kebab",e.ClickDecreaseGranularity="click_decrease_granularity",e.ClickIncreaseGranularity="click_increase_granularity",e.ClickChartDataSeries="click_chart_data_series",e.ClickDrilldownInterval="click_drilldown_interval",e.ClickViewData="click_view_data",e.ClickExploreFromHere="click_explore_from_here",e.ConnectDbIntentSignaled="connect_db_intent_signaled",e.NotebookSidebarContentImpression="notebook_sidebar_content_impression",e.NotebookSidebarExpanded="notebook_sidebar_expanded",e.NotebookSidebarCollapsed="notebook_sidebar_collapsed",e.NotebookSidebarTabChange="notebook_sidebar_tab_change",e.NotebookSidebarResourcesLinkClicked="notebook_sidebar_resources_link_clicked",e.NotebookSidebarExpandableTextToggled="notebook_sidebar_expandable_text_opened"}(e.Name||(e.Name={})),function(e){e.Report="report",e.Notebook="notebook"}(e.Context||(e.Context={})),function(e){e.Chart="chart",e.ChartExpandedView="chart_expanded_view",e.Sidebar="sidebar"}(e.SubContext||(e.SubContext={}))}(r||(r={})),function(e){e.Track="track",e.Identify="identify"}(o||(o={}));var s=function(){function AnalyticsService(e,t,n,r){this.$window=e,this.ts=t,this.vos=n,this.tds=r,this._interactionQueue=[],this._segment=this.$window.analytics||{},this._newrelic=this.$window.newrelic||{},this._performance=this.$window.performance||{}}return AnalyticsService.prototype.timing=function(e,t,n,r){var o=this,a=o.run;return Object(i.curry)(function(l,s){var c=Object(i.assign)({},t,{timingValue:s-l}),d=[e,c,n,r].filter(function(e){return!Object(i.isNil)(e)});a.apply(o,["track"].concat(d))})},AnalyticsService.prototype.run=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this._segment;"function"==typeof r[e]&&r[e].apply(r,t)},AnalyticsService.prototype.vizTimingHelper=function(e,t,n){return this.timingHelper(e,Object(i.assign)({},n,{vizType:t}))},AnalyticsService.prototype.timingHelper=function(e,t){return this.timing(e,Object(i.assign)({},t))},AnalyticsService.prototype.startVizRenderDesignerTiming=function(e){this.startTimer("timing_designer_viz_render",e),this.startInteraction(AnalyticsService.buildKey("timing_designer_viz_render",e))},AnalyticsService.prototype.startVizRenderReportTiming=function(e){this.startTimer("timing_report_viz_render",e),this.startInteraction(AnalyticsService.buildKey("timing_report_viz_render",e))},AnalyticsService.prototype.startColumnSelectTiming=function(e){this.startTimer("timing_table_column_select",e),this.startInteraction(AnalyticsService.buildKey("timing_table_column_select",e))},AnalyticsService.prototype.startTableSortTiming=function(e){this.startTimer("timing_table_sort",e),this.startInteraction(AnalyticsService.buildKey("timing_table_sort",e))},AnalyticsService.prototype.startTimer=function(e,t){this.ts.start(a.a.buildKey(e,t))},AnalyticsService.prototype.endVizRenderDesignerTiming=function(e){this.endAndBroadcastTiming("timing_designer_viz_render",e)},AnalyticsService.prototype.endVizRenderReportTiming=function(e){this.endAndBroadcastTiming("timing_report_viz_render",e)},AnalyticsService.prototype.endColumnSelectTiming=function(e,t){this.endAndBroadcastTableTiming("timing_table_column_select",e,t)},AnalyticsService.prototype.endTableSortTiming=function(e,t){this.endAndBroadcastTableTiming("timing_table_sort",e,t)},AnalyticsService.prototype.recordPerformanceEvent=function(e,t,n){if(void 0===n&&(n=!1),"function"==typeof this._performance.mark&&this._performance.mark(e),"function"==typeof this._performance.measure&&this._performance.measure(e),"function"==typeof this._newrelic.addPageAction){this._newrelic.addPageAction(e,t);var r=this.$window.performance;if(n&&r&&"function"==typeof r.getEntriesByType){var o=t,i=r.getEntriesByType("navigation")[0];for(var a in i)o[a]=i[a];for(var l=0,s=r.getEntriesByType("mark");l<s.length;l++){var c=s[l];o[c.name]=c.startTime}this._newrelic.addPageAction("ModeSpaLoad",o),this._newrelic.finished()}}},AnalyticsService.prototype.endAndBroadcastTableTiming=function(e,t,n){var r,o=a.a.buildKey(e,t);this.ts.hasTimer(o)&&(r=this.endTimer(e,t),this.broadcastTiming(r,e,{rowCount:this.tds.rowCount(n),columnCount:this.tds.columnCount(n)})),this.hasInteraction(o)&&this.endInteractionAndBroadcast(o,e,[{key:"rowCount",value:this.tds.rowCount(n)},{key:"columnCount",value:this.tds.columnCount(n)}])},AnalyticsService.prototype.endAndBroadcastTiming=function(e,t){var n,r=a.a.buildKey(e,t);this.ts.hasTimer(r)&&(n=this.endTimer(e,t),this.broadcastVizTiming(n,e,t)),this.hasInteraction(r)&&this.endInteractionAndBroadcast(a.a.buildKey(e,t),e)},AnalyticsService.prototype.endTimer=function(e,t){var n=a.a.buildKey(e,t);return this.ts.end(n)},AnalyticsService.prototype.broadcastTiming=function(e,t,n){void 0===n&&(n={});var r=e.startTime,o=e.endTime,i=this.timingHelper(t,n);r&&o&&i(r,o)},AnalyticsService.prototype.broadcastVizTiming=function(e,t,n){var r=e.startTime,o=e.endTime,i=this.vos.viewType(n),a=this.vizTimingHelper(t,i);r&&o&&a(r,o)},AnalyticsService.prototype.startInteraction=function(e){var t=this._newrelic,n=null;return"function"==typeof t.interaction&&(n=t.interaction().save(),this._interactionQueue.push({id:e,interaction:n})),n},AnalyticsService.prototype.endInteractionAndBroadcast=function(e,t,n){if(!e)throw new Error("ID not defined");var r=AnalyticsService.mixinInteractionOpts,o=Object(i.head)(Object(i.remove)(this._interactionQueue,{id:e})).interaction;return o&&n&&(o=r(o,n)),o?(o.setName(t),o.end(),o):null},AnalyticsService.prototype.hasInteraction=function(e){return this._interactionQueue.some(function(t){return t.id===e})},AnalyticsService.mixinInteractionOpts=function(e,t){var n=e;return t.reduce(function(e,t){return e.setAttribute(t.key,t.value)},n)},AnalyticsService.buildKey=function(e,t){return[e,t].join("::")},AnalyticsService.$inject=["$window","TimingService","ViewOptionsService","TableDataService"],AnalyticsService.EVENT_PRIVATE_EDITOR_RUN="triggered_private_report_from_editor",AnalyticsService.EVENT_TIMING_REPORT_VIZ_RENDER="timing_report_viz_render",AnalyticsService.EVENT_TIMING_DESIGNER_VIZ_RENDER="timing_designer_viz_render",AnalyticsService.EVENT_TIMING_TABLE_COLUMN_SELECT="timing_table_column_select",AnalyticsService.EVENT_TIMING_TABLE_SORT="timing_table_sort",AnalyticsService}()},RTaK:function(e,t,n){"use strict";var r=n("0iPh"),o=n.n(r),i=n("PbPb"),a=(n.n(i),n("0YuG"));n.n(a),n("4uRg");a.module("mode.chart").directive("chartSelector",["$cookies",function(e){return{scope:{view:"=",owner:"<",select:"&"},template:'<button class="btn btn-sm btn-select btn-block form-control-sm" ng-click="toggleChartSelectorMenu()"><span class="chart-selector-text"><a href="#"><i class="{{ selectedChartIcon() }}"></i>{{ selectedChartName() }}</a></span><i class="icon-dropdown-arrow"></i></button><ul class="chart-selector-menu dropdown-menu"><li ng-repeat="chart in charts" ng-hide="chart.type === \'bigNumber\'" ng-class="{\'active\': view.selectedChart == \'{{chart.type}}\' && {{chart.condition || true}}}" ng-disabled="!enabledChart(\'{{chart.type}}\')"><a href ng-click="chartSelectHandler($event, chart.type, chart.subtype, chart.icon)"><i class="{{chart.icon}}"></i> {{chart.description}}</a></li><li class="border"></li><li ng-class="{\'show-gallery\': exploreGallery}"><a href="https://community.modeanalytics.com/gallery?utm_source=product&utm_medium=chart_editor&utm_campaign=gallery" target="_blank" rel="noopener" class="explore-link"><i class="icon-caret-right-white explore-icon"></i> Explore Custom Visualizations</a><div class="explore-gallery"><a href="#" class="explore-close icon-x-large-white" ng-click="closeExplore()"></a><div class="explore-content"><i class="icon-gallery-illo gallery-icon"></i>Learn how to make custom visualizations</div><a href="https://community.modeanalytics.com/gallery?utm_source=product&utm_medium=chart_editor&utm_campaign=gallery" target="_blank" rel="noopener"><i class="icon-caret-right-white explore-icon"></i> Explore the Gallery</a></div></li></ul>',controller:["$scope","$element","$attrs","DataLayerFlipperService",function(t,n,r,a){function chartComparator(e){return t.view&&t.view.selectedChart&&t.view.selectedChart===e.type&&(!e.getCondition||e.getCondition())}n=o()(n[0]),t.charts=[{type:"bar",subtype:"bar",description:"Grouped Bar Chart",icon:"icon-chart-grouped-bar-color",condition:"!view.bar.stacked",getCondition:function(){return!t.view.bar.stacked},setSubtype:function(){t.view.bar.stacked=!1}},{type:"bar",subtype:"stackedBar",description:"Bar Chart",icon:"icon-chart-bar-color",condition:"view.bar.stacked",getCondition:function(){return t.view.bar.stacked},setSubtype:function(){t.view.bar.stacked=!0}},{type:"line",subtype:"line",description:"Line Chart",icon:"icon-chart-line-color"},{type:"linePlusBar",subtype:"linePlusBar",description:"Line + Bar Chart",icon:"icon-chart-linebar-color"},{type:"area",subtype:"area",description:"Area Chart",icon:"icon-chart-area-color",condition:"!view.area.expanded",getCondition:function(){return!t.view.area.expanded},setSubtype:function(){t.view.area.expanded=!1}},{type:"area",subtype:"expandedArea",description:"100% Area Chart",icon:"icon-chart-area100-color",condition:"view.area.expanded",getCondition:function(){return t.view.area.expanded},setSubtype:function(){t.view.area.expanded=!0}},{type:"pie",subtype:"pie",description:"Pie Chart",icon:"icon-chart-pie-color",condition:"!view.pie.donut",getCondition:function(){return!t.view.pie.donut},setSubtype:function(){t.view.pie.donut=!1}},{type:"pie",subtype:"donut",description:"Donut Chart",icon:"icon-chart-donut-color",condition:"view.pie.donut",getCondition:function(){return t.view.pie.donut},setSubtype:function(){t.view.pie.donut=!0}},{type:"scatter",subtype:"scatter",description:"Scatter Plot",icon:"icon-chart-scatter-color"},{type:"bigNumber",subtype:"bigNumber",description:"Big Number",icon:"icon-chart-bignumber-color"}],t.exploreGallery=!e.get("modeHideExploreGallery"),t.closeExplore=function(){e.put("modeHideExploreGallery","true"),t.exploreGallery=!1},t.selectedChartIcon=function(){var e=i.find(t.charts,chartComparator);if(e)return e.icon},t.selectedChartName=function(){var e=i.find(t.charts,chartComparator);if(e)return e.description},t.toggleChartSelectorMenu=function(){var e=n.find(".chart-selector-menu");e.toggleClass("dropdown-open"),e.is(".dropdown-open")?o()(document).on("click.chartSelectorDocClick",function(e){0===o()(e.target).closest(".chart-selector").length&&t.toggleChartSelectorMenu()}):o()(document).off(".chartSelectorDocClick")},t.chartSelectHandler=function(e,n,r,o){var a;e.preventDefault(),a=r,i.each(t.charts,function(e){e.subtype===a&&e.setSubtype&&e.setSubtype()}),function(e,n,r){t.select({type:e,subtype:n,icon:r})}(n,r,o),t.toggleChartSelectorMenu()}}]}}])},RpJj:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"n",function(){return i}),n.d(t,"r",function(){return a}),n.d(t,"q",function(){return l}),n.d(t,"o",function(){return s}),n.d(t,"l",function(){return c}),n.d(t,"p",function(){return d}),n.d(t,"s",function(){return u}),n.d(t,"z",function(){return p}),n.d(t,"y",function(){return h}),n.d(t,"j",function(){return g}),n.d(t,"i",function(){return m}),n.d(t,"x",function(){return f}),n.d(t,"v",function(){return C}),n.d(t,"t",function(){return y}),n.d(t,"u",function(){return b}),n.d(t,"g",function(){return v}),n.d(t,"h",function(){return I}),n.d(t,"k",function(){return S}),n.d(t,"f",function(){return w}),n.d(t,"m",function(){return A}),n.d(t,"A",function(){return M}),n.d(t,"w",function(){return k}),n.d(t,"e",function(){return T}),n.d(t,"d",function(){return x}),n.d(t,"a",function(){return D}),n.d(t,"c",function(){return r});var r,o={SelectChart:"SELECT_CHART",SelectTable:"SELECT_TABLE",SelectTableColumn:"SELECT_TABLE_COLUMN",SelectRow:"SELECT_ROW",SelectQuery:"SELECT_QUERY",RemapSelectedQuery:"REMAP_SELECTED_QUERY",SelectReport:"SELECT_REPORT",ClearSelected:"CLEAR_SELECTED",ShowCart:"SHOW_CHART",ShowTable:"SHOW_TABLE",ShowSQL:"SHOW_SQL",SetView:"SET_VIEW",AddToLayout:"ADD_TO_LAYOUT",RemoveFromLayout:"REMOVE_FROM_LAYOUT",ToggleSidebar:"TOGGLE_SIDEBAR",ToggleSecondarySidebar:"TOGGLE_SECONDARY_SIDEBAR",ToggleDesignerSidebar:"TOGGLE_DESIGNER_SIDEBAR",CloseDesignerSidebar:"CLOSE_DESIGNER_SIDEBAR",OpenDesignerSidebar:"OPEN_DESIGNER_SIDEBAR",ToggleVerticalMode:"TOGGLE_VERTICAL_MODE",SetVerticalMode:"SET_VERTICAL_MODE",SetQueryMode:"SET_QUERY_MODE",SetBuilderMode:"SET_BUILDER_MODE",SetNotebookShown:"SET_NOTEBOOK_SHOWN",ToggleMinimize:"EDITOR_MINIMIZE",ToggleMaximize:"EDITOR_MAXIMIZE",SelectSchemaTab:"SELECT_SCHEMA_TAB",NotebookRunning:"NOTEBOOK_RUNNING",NotebookWarning:"NOTEBOOK_WARNING",NotebookLoading:"NOTEBOOK_LOADING",NotebookStartSession:"NOTEBOOK_START_SESSION",NotebookSessionLost:"NOTEBOOK_SESSION_LOST",NotebookReady:"NOTEBOOK_READY",NotebookDataOld:"NOTEBOOK_DATA_OLD",NotebookDataLoaded:"NOTEBOOK_DATA_LOADED",NotebookTerminated:"NOTEBOOK_TERMINATED",ReportRunDataLoaded:"REPORT_RUN_DATA_LOADED",SelectText:"SELECT_TEXT",OpenFilterPanel:"OPEN_FILTER_PANEL",CloseFilterPanel:"CLOSE_FILTER_PANEL",ToggleFilterPanel:"TOGGLE_FILTER_PANEL"},i=function(e,t,n){return{type:o.SelectChart,focus:e,model:t,query:n}},a=function(e,t,n){return{type:o.SelectTable,focus:e,model:t,query:n}},l=function(e,t){return{type:o.SelectRow,index:e,size:t}},s=function(e,t,n){return{type:o.SelectQuery,token:e,query:n,focus:t}},c=function(e,t){return{type:o.RemapSelectedQuery,newToken:e,oldToken:t,focus:focus}},d=function(e,t,n){return{type:o.SelectReport,report:e,currentVisualIds:t,query:n}},u=function(e,t){return{type:o.SelectTableColumn,token:e,column:t}},p=function(){return{type:o.ToggleSidebar}},h=function(){return{type:o.ToggleSecondarySidebar}},g=function(e,t){return{type:o.ToggleMinimize,name:e,queryToken:t}},m=function(e,t){return{type:o.ToggleMaximize,name:e,queryToken:t}},f=function(e,t){return{type:o.SetView,name:e,show:t}},C=function(e){return{type:o.SetQueryMode,enabled:e}},y=function(e){return{type:o.SetBuilderMode,withoutPreview:e}},b=function(e){return{type:o.SetNotebookShown,shown:e}},v=function(){return{type:o.ClearSelected}},I=function(){return{type:o.CloseDesignerSidebar}},S=function(){return{type:o.OpenDesignerSidebar}},w=function(e){return{type:o.AddToLayout,id:e}},A=function(e){return{type:o.RemoveFromLayout,id:e}},M=function(){return{type:o.ToggleVerticalMode}},k=function(e){return{type:o.SetVerticalMode,vertical:e}},T=function(e){return{type:o.SelectSchemaTab,tab:e}},x=function(){return{type:o.OpenFilterPanel}},D=function(){return{type:o.CloseFilterPanel}};!function(e){e.SelectChart="SelectChart",e.SelectChartSuccess="SelectChartSuccess",e.SelectTable="SelectTable",e.SelectQuery="SelectQuery",e.SelectReport="SelectReport",e.HighlightQueryText="HighlightQueryText",e.ToggleNotebookSidebar="ToggleNotebookSidebar"}(r||(r={}))},Rw4e:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDx0aXRsZT4KICAgICAgICBzaXplLW1hcmsKICAgIDwvdGl0bGU+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyIDIpIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxjaXJjbGUgc3Ryb2tlPSIjNzU3NzgzIiBjeD0iMiIgY3k9IjgiIHI9IjIiLz4KICAgICAgICA8Y2lyY2xlIHN0cm9rZT0iI0Y3RjdGOSIgZmlsbD0iI0Y3RjdGOSIgY3g9IjUuNSIgY3k9IjQuNSIgcj0iNC41Ii8+CiAgICAgICAgPGNpcmNsZSBzdHJva2U9IiM3NTc3ODMiIGN4PSI2IiBjeT0iNCIgcj0iNCIvPgogICAgPC9nPgo8L3N2Zz4="},RySr:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPHBhdGggc3Ryb2tlPSIjMDBCREU5IiBkPSJNNy41IDMuNUwxMy41IDMuNSA3LjUgMy41ek03LjUgNi41TDExLjUgNi41IDcuNSA2LjV6TTcuNSA5LjVMOS41IDkuNSA3LjUgOS41eiIvPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAzKSI+CiAgICAgIDxwYXRoIHN0cm9rZT0iIzAwQkRFOSIgZD0iTTIuNSwyLjUgTDIuNSw3LjUgTDIuNSwyLjUgWiIvPgogICAgICA8cGF0aCBmaWxsPSIjMDBCREU5IiBkPSJNMi42ODcwMDE4OSwwLjA4MjYzMjUzNzMgTDQuOTM0ODgyMjYsMi41ODI4NTQxMSBDNS4wMjcxOTQzOSwyLjY4NTUyODk1IDUuMDE4NzkzNzUsMi44NDM1OTcxMyA0LjkxNjExODksMi45MzU5MDkyNSBDNC44NzAyMjQ0MSwyLjk3NzE3MTczIDQuODEwNjg5MjcsMyA0Ljc0ODk3MzAxLDMgTDAuMjUzMjEyMjU0LDMgQzAuMTE1MTQxMDY3LDMgMC4wMDMyMTIyNTQyOCwyLjg4ODA3MTE5IDAuMDAzMjEyMjU0MjgsMi43NSBDMC4wMDMyMTIyNTQyOCwyLjY4ODI4Mzc1IDAuMDI2MDQwNTI2MiwyLjYyODc0ODYgMC4wNjczMDMwMDAxLDIuNTgyODU0MTEgTDIuMzE1MTgzMzgsMC4wODI2MzI1MzczIEMyLjQwNzQ5NTUxLC0wLjAyMDA0MjMwODcgMi41NjU1NjM2OCwtMC4wMjg0NDI5NTIxIDIuNjY4MjM4NTIsMC4wNjM4NjkxNzUxIEMyLjY3NDgyMDczLDAuMDY5Nzg3MDU2IDIuNjgxMDg0MDEsMC4wNzYwNTAzMzA0IDIuNjg3MDAxODksMC4wODI2MzI1MzczIFoiLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="},S9wS:function(e,t){e.exports='<h3>Supported Libraries</h3>\n<ul class="notebook-sidebar-collapsible-list">\n  <li ng-class="{open: ctrl.isOpen(\'frequent\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'frequent\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Frequently Used\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="http://matplotlib.org/">matplotlib</a>: 2D plotting library</li>\n      <li><a target="_blank" href="http://www.numpy.org/">numpy</a>: scientific computing library</li>\n      <li><a target="_blank" href="http://pandas.pydata.org/">pandas</a>: data structures &amp; data analysis tools</li>\n      <li><a target="_blank" href="https://facebook.github.io/prophet/">prophet</a>: procedure for forecasting time series data</li>\n      <li><a target="_blank" href="https://plot.ly/python/getting-started/">plotly</a>: create interactive graphics</li>\n      <li><a target="_blank" href="https://stanford.edu/~mwaskom/software/seaborn/">seaborn</a>: viz library to draw statistical graphics</li>\n      <li><a target="_blank" href="https://www.scipy.org/">scipy</a>: mathematics, science &amp; engineering</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'wrangling\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'wrangling\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Data Manipulation &amp; Wrangling\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="https://agate.readthedocs.io/en/1.4.0/">agate</a>: data analysis library with human-readable code</li>\n      <li><a target="_blank" href="https://www.crummy.com/software/BeautifulSoup/">bs4</a>: Beautiful Soup, for parsing HTML, JSON &amp; XML data</li>\n      <li><a target="_blank" href="http://engarde.readthedocs.io/en/latest/index.html">engarde</a>: defensive data analysis</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/jsonify/0.5">jsonify</a>: converts .csv files to .json</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/numexpr">numexpr</a>: fast numerical array expression evaluator</li>\n      <li><a target="_blank" href="http://www.numpy.org/">numpy</a>: scientific computing library</li>\n      <li><a target="_blank" href="http://pandas.pydata.org/">pandas</a>: data structures &amp; data analysis tools</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/pandasql">pandasql</a>: queries pandas dataframes using SQL syntax</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/PrettyTable">prettytable</a>: easily display tabular data as ASCII table</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/tabulate">tabulate</a>: pretty-print tabular data</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'stats\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'stats\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Machine Learning &amp; Statistics\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="http://dan.iel.fm/emcee/current/">emcee</a>: an MIT <a href="http://msp.org/camcos/2010/5-1/index.xhtml">MCMC</a> library</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/hdbscan/">hdbscan</a>: Hierarchical Density-Based Spatial Clustering of Applications with Noise</li>\n      <li><a target="_blank" href="https://keras.io/">keras</a>: high-level neural networks API</li>\n      <li><a target="_blank" href="http://lifelines.readthedocs.io/en/latest/">lifelines</a>: survival analysis in Python</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/Lifetimes">lifetimes</a>: package for analyzing user behavior</li>\n      <li><a target="_blank" href="https://facebook.github.io/prophet/">prophet</a>: procedure for forecasting time series data</li>\n      <li><a target="_blank" href="https://radimrehurek.com/gensim/">gensim</a>: unsupervised semantic modeling from plain text</li>\n      <li><a target="_blank" href="http://scikit-image.org/">scikit-image</a>: image processing library</li>\n      <li><a target="_blank" href="http://scikit-learn.org/stable/">scikit-learn</a>: tools for data mining &amp; analysis</li>\n      <li><a target="_blank" href="https://www.scipy.org/">scipy</a>: for mathematics, science &amp; engineering</li>\n      <li><a target="_blank" href="http://statsmodels.sourceforge.net/">statsmodels</a>: estimate statistical models &amp; perform statistical tests</li>\n      <li><a target="_blank" href="http://www.sympy.org/en/index.html">sympy</a>: symbolic mathematics</li>\n      <li><a target="_blank" href="https://www.tensorflow.org/">tensorflow</a>: numerical computation using data flow graphs</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'viz\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'viz\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Visualization\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="https://pypi.python.org/pypi/basemap/1.0.7/">basemap</a>: matplotlib toolkit to plot data on maps</li>\n      <li><a target="_blank" href="https://folium.readthedocs.io/en/latest/">folium</a>: build Leaflet.js maps in Python</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/geomap/0.2.1">geomap</a>: generate maps of geolocations</li>\n      <li><a target="_blank" href="http://matplotlib.org/">matplotlib</a>: 2D plotting library</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/patsy">patsy</a>: describe statistical models &amp; build design matrices</li>\n      <li><a target="_blank" href="https://plot.ly/python/getting-started/">plotly</a>: create interactive graphics</li>\n      <li><a target="_blank" href="https://stanford.edu/~mwaskom/software/seaborn/">seaborn</a>: viz library to draw statistical graphics</li>\n      <li><a target="_blank" href="https://github.com/amueller/word_cloud">wordcloud</a>: wordcloud generator in Python</li>\n    </ul>\n  </li>\n  <li ng-class="{open: ctrl.isOpen(\'other\')}">\n    <span class="notebook-sidebar-title" ng-click="ctrl.toggle(\'other\')">\n      <i class="icon-tree-caret-default align-md-icon"></i> Everything Else\n    </span>\n    <ul class="notebook-sidebar-sub-list">\n      <li><a target="_blank" href="https://pypi.python.org/pypi/cufflinks">cufflinks</a>: bind Plotly directly to pandas dataframes</li>\n      <li><a target="_blank" href="https://networkx.github.io/">networkx</a>: create, manipulate &amp; study networks</li>\n      <li><a target="_blank" href="http://www.nltk.org/">nltk</a>: natural language toolkit</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/pyzipcode">pyzipcode</a>: query zip codes &amp; location data</li>\n      <li><a target="_blank" href="http://docs.python-requests.org/en/master/">requests</a>: allows HTTP requests</li>\n      <li><a target="_blank" href="http://textblob.readthedocs.io/en/dev/">textblob</a>: simple API for common NLP tasks</li>\n      <li><a target="_blank" href="https://pypi.python.org/pypi/ua-parser">ua_parser</a>: fast &amp; reliable user agent parser</li>\n    </ul>\n  </li>\n</ul>\n<h3>Gallery</h3>\n<p class="notebook-sidebar-text"><a target="_blank" href="https://community.modeanalytics.com/gallery/">Mode Gallery</a>: Browse templates for common analytical tasks using Python, R, and HTML\n'},TGbp:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPHBhdGggc3Ryb2tlPSIjQjFCMkJBIiBkPSJNNy41IDMuNUwxMy41IDMuNSA3LjUgMy41ek03LjUgNi41TDExLjUgNi41IDcuNSA2LjV6TTcuNSA5LjVMOS41IDkuNSA3LjUgOS41eiIvPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCAxMSkiPgogICAgICA8cGF0aCBzdHJva2U9IiNCMUIyQkEiIGQ9Ik0yLjUsMi41IEwyLjUsNy41IEwyLjUsMi41IFoiLz4KICAgICAgPHBhdGggZmlsbD0iI0IxQjJCQSIgZD0iTTIuNjg3MDAxODksMC4wODI2MzI1MzczIEw0LjkzNDg4MjI2LDIuNTgyODU0MTEgQzUuMDI3MTk0MzksMi42ODU1Mjg5NSA1LjAxODc5Mzc1LDIuODQzNTk3MTMgNC45MTYxMTg5LDIuOTM1OTA5MjUgQzQuODcwMjI0NDEsMi45NzcxNzE3MyA0LjgxMDY4OTI3LDMgNC43NDg5NzMwMSwzIEwwLjI1MzIxMjI1NCwzIEMwLjExNTE0MTA2NywzIDAuMDAzMjEyMjU0MjgsMi44ODgwNzExOSAwLjAwMzIxMjI1NDI4LDIuNzUgQzAuMDAzMjEyMjU0MjgsMi42ODgyODM3NSAwLjAyNjA0MDUyNjIsMi42Mjg3NDg2IDAuMDY3MzAzMDAwMSwyLjU4Mjg1NDExIEwyLjMxNTE4MzM4LDAuMDgyNjMyNTM3MyBDMi40MDc0OTU1MSwtMC4wMjAwNDIzMDg3IDIuNTY1NTYzNjgsLTAuMDI4NDQyOTUyMSAyLjY2ODIzODUyLDAuMDYzODY5MTc1MSBDMi42NzQ4MjA3MywwLjA2OTc4NzA1NiAyLjY4MTA4NDAxLDAuMDc2MDUwMzMwNCAyLjY4NzAwMTg5LDAuMDgyNjMyNTM3MyBaIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},Uvoo:function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">\n    Push Changes\n    <a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a>\n  </h3>\n\n  <form name="syncToGithub" ng-submit="ctrl.submit()">\n    <div class="modal-container">\n      <div class="form-element">\n        <label for="commitMessage">Commit Message</label>\n        <textarea id="commitMessage" ng-model="ctrl.commitMessage" required class="form-control no-resize" rows="5"></textarea>\n      </div>\n      <p>This message will appear with your changes in GitHub.</p>\n    </div>\n    <div class="modal-action-bar">\n      <button type="submit" class="btn btn-lg btn-filled-primary" ng-disabled="syncToGithub.$invalid">\n        Push\n      </button>\n    </div>\n  </form>\n</div>\n'},VAhw:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),t.b=function(e){return{keys:e.map(function(e){return e.id}),byKey:e.reduce(function(e,t){return e[t.id]=t,e},{})}};var r=n("vqB5"),o=function(){function ImmutableRecordSet(e,t){void 0===e&&(e="id"),void 0===t&&(t=[]),this._keyName=e,this._byKey=Object(r.b)(t.map(function(t){return[t[e],t]})),this._keys=Object(r.d)(t.map(function(t){return t[e]}))}return Object.defineProperty(ImmutableRecordSet.prototype,"keyName",{get:function(){return this._keyName},enumerable:!0,configurable:!0}),Object.defineProperty(ImmutableRecordSet.prototype,"keys",{get:function(){return this._keys},enumerable:!0,configurable:!0}),Object.defineProperty(ImmutableRecordSet.prototype,"byKey",{get:function(){return this._byKey},enumerable:!0,configurable:!0}),Object.defineProperty(ImmutableRecordSet.prototype,"size",{get:function(){return this.keys.size},enumerable:!0,configurable:!0}),ImmutableRecordSet.prototype.clear=function(){return new ImmutableRecordSet(this.keyName,[])},ImmutableRecordSet.prototype.hasRecord=function(e){return this.byKey.has(e)},ImmutableRecordSet.prototype.getRecord=function(e){return this.byKey.get(e)},ImmutableRecordSet.prototype.getRecords=function(e){var t=this;return(e||this.keys.toArray()).map(function(e){return t.byKey.get(e)}).filter(function(e){return null!=e})},ImmutableRecordSet.prototype.mergeRecord=function(e){return this.mergeRecords([e])},ImmutableRecordSet.prototype.mergeRecords=function(e){var t=this,n=this.keys.withMutations(function(n){e.forEach(function(e){return n.add(e[t.keyName])})}),r=this.byKey.withMutations(function(n){e.forEach(function(e){return n.set(e[t.keyName],e)})});return new ImmutableRecordSet(this.keyName,n.map(function(e){return r.get(e)}).toArray())},ImmutableRecordSet.prototype.replaceRecords=function(e){var t=this,n=this.keys.withMutations(function(n){n.clear(),e.forEach(function(e){return n.add(e[t.keyName])})}),r=this.byKey.withMutations(function(n){n.clear(),e.forEach(function(e){return n.set(e[t.keyName],e)})});return new ImmutableRecordSet(this.keyName,n.map(function(e){return r.get(e)}).toArray())},ImmutableRecordSet.prototype.removeRecords=function(e){var t=this,n=this.keys.withMutations(function(n){for(var r=0,o=e;r<o.length;r++){var i=o[r];n.remove(i[t.keyName])}}),r=this.byKey.withMutations(function(n){for(var r=0,o=e;r<o.length;r++){var i=o[r];n.remove(i[t.keyName])}});return new ImmutableRecordSet(this.keyName,n.map(function(e){return r.get(e)}).toArray())},ImmutableRecordSet.prototype.removeRecordByKey=function(e){var t=this.keys.remove(e),n=this.byKey.remove(e);return new ImmutableRecordSet(this.keyName,t.map(function(e){return n.get(e)}).toArray())},ImmutableRecordSet.prototype.removeRecordsByKey=function(e){var t=this;if(!e)return this;var n=this.keys.filterNot(function(t){return e.indexOf(t)>=0}),r=this.byKey.filterNot(function(n){return e.indexOf(n[t.keyName])>=0});return new ImmutableRecordSet(this.keyName,n.map(function(e){return r.get(e)}).toArray())},ImmutableRecordSet}()},Vfoa:function(e,t,n){"use strict";var r=n("0YuG"),o=(n.n(r),n("m9my")),i=(n.n(o),n("PiCI"),n("zdl5")),a=n("KXXZ"),l=n("yqn6"),s=n("P6nd"),c=n("RRsi"),d=n("nxEI"),u=n("7n0L"),p={bindings:{chartId:"@id",view:"<",state:"<",dataset:"<",filters:"<",viewer:"<",status:"<",drilldownEnabled:"<",exploreEnabled:"<",isDesignerMode:"<",onTitleChanged:"&",onRenderStart:"&",onRenderEnd:"&",onAction:"&"},controllerAs:"ctrl",controller:function(){function VegasChartController(e,t,n,r,o){this.$scope=e,this.$window=t,this.$state=n,this.reportApiService=r,this.rls=o,this.drilldownEnabled=!1,this.exploreEnabled=!1,this.encodingErrors=[],this.errorImg=ASSET_PATHS.ERROR_GIF_PATH}return VegasChartController.prototype.$onInit=function(){var e=this;this.contextMenuSubscription=this.reportApiService.subscribe(this.chartId,function(t){if(t.type===i.a.Type.ContextClick)switch(t.item.type){case i.a.ContextItemType.ViewData:e.onAction({$action:{type:s.a.ViewData,target:t.item.target,queryToken:e.dataset.query_token,chartToken:e.chartId.replace("chart_","")}})}})},VegasChartController.prototype.$onChanges=function(e){e.dataset&&(this.chartModel=o.Model.build(this.dataset.columns,this.dataset.content)),(e.dataset||e.view)&&(this.canChangeHierarchy=Object(l.h)(this.view.encoding,this.chartModel)),(e.view||e.dataset)&&(this.encodingErrors=Object(a.p)(this.view.encoding,this.chartModel))},VegasChartController.prototype.$onDestroy=function(){this.contextMenuSubscription&&this.contextMenuSubscription.unsubscribe()},VegasChartController.prototype.linkToData=function(e){this.rls.isLinkable()&&(e.preventDefault(),e.stopPropagation(),mode&&mode.linkToPage&&mode.linkToPage(this.dataset.query_token,"data")),this.onAction({$action:{type:s.a.ToggleExpandedView,expandedViewOpen:!0}})},VegasChartController.prototype.linkToQuery=function(e){this.rls.isLinkable()&&(e.preventDefault(),e.stopPropagation(),mode&&mode.linkToPage&&mode.linkToPage(this.dataset.query_token,"query"))},VegasChartController.prototype.linkToLightbox=function(e){if(this.rls.isLinkable()){var t=this.getAnalyticsProps();e.preventDefault(),e.stopPropagation(),this.onAction({$action:{type:s.a.ExploreChart,chartToken:u.a.tokenFromVizID(this.chartId),props:t}})}},VegasChartController.prototype.captureKebabClick=function(){var e=this.getAnalyticsProps();this.onAction({$action:{type:s.a.ExpandKebab,chartToken:u.a.tokenFromVizID(this.chartId),props:e}})},VegasChartController.prototype.copySuccess=function(){this.onAction({$action:{type:s.a.ShowAlert,success:!0,message:"Link to chart copied successfully"}})},VegasChartController.prototype.updateTitle=function(e){this.view.title=e,this.onTitleChanged({$vizID:this.chartId,$title:e})},VegasChartController.prototype.isReportMode=function(){return!this.$state.includes("application.reports.edit")},VegasChartController.prototype.isPreviewMode=function(){return/embed-preview/.test(this.$window.document.body.className)},VegasChartController.prototype.titleEditDisabled=function(){return this.isReportMode()&&!this.isPreviewMode()},VegasChartController.prototype.updateEncoding=function(e){this.onAction({$action:{type:s.a.UpdateEncoding,chartToken:this.chartId.replace("chart_",""),encResult:e}})},VegasChartController.prototype.dispatchEmbedAction=function(e){this.onAction({$action:e})},VegasChartController.prototype.changeHierarchy=function(e){var t=this.getAnalyticsProps();this.onAction({$action:{type:s.a.ChangeHierarchy,chartToken:this.chartId.replace("chart_",""),forward:e,props:t}})},VegasChartController.prototype.getAnalyticsProps=function(){return{event_id:d.a.generateUUID(),product_context:c.a.Context.Report,sub_context:c.a.SubContext.Chart,chart_id:this.chartId,chart_type:this.view.chartType}},VegasChartController.prototype.undo=function(){this.onAction({$action:{type:s.a.Back,chartToken:this.chartId.replace("chart_","")}})},VegasChartController.prototype.redo=function(){this.onAction({$action:{type:s.a.Forward,chartToken:this.chartId.replace("chart_","")}})},Object.defineProperty(VegasChartController.prototype,"isValid",{get:function(){return!this.encodingErrors.length},enumerable:!0,configurable:!0}),VegasChartController.$inject=["$scope","$window","$state","ReportApiService","ReportLinkService"],VegasChartController}(),template:'\n    <div class="editor-module editor-chart mode-object editor-multi">\n      <div ng-if="ctrl.dataset && ctrl.dataset.state != \'failed\' && ctrl.dataset.state != \'cancelled\' && ctrl.dataset.content" class="chart-content">\n        <div class="chart-header" ng-if="!showSettings">\n          <in-place-edit text="ctrl.view.title" alt-text="Click to add title" ng-if="!showSettings" on-change="ctrl.updateTitle($text)" no-edit="ctrl.titleEditDisabled()" ng-dblclick="$event.stopPropagation()"></in-place-edit>\n\n          \x3c!-- New report actions start --\x3e\n\n          <div class="new-viz-actions">\n\n            <button class="new-viz-action action-left hide-2 plus-plan-only"\n               ng-click="ctrl.undo()"\n               ng-class="{ disabled: !ctrl.state.canUndo}">\n              <svg-icon type="\'back\'" uib-tooltip="Back"></svg-icon>\n            </button>\n\n            <button class="new-viz-action action-right hide-2 plus-plan-only"\n               ng-click="ctrl.redo()"\n               ng-class="{ disabled: !ctrl.state.canRedo}">\n              <svg-icon type="\'forward\'" uib-tooltip="Forward" ng-if="ctrl.viewer !== \'whiteLabel\'"></svg-icon>\n              \x3c!--\n                HACK, place tooltip on the left on WLE so it doesn\'t conflict with scrollbar when it\'s the last element in a row.\n                Ideally, this would be better handled with a WLE CSS class that would only turn this on when it\'s the last\n                item in a row.\n              --\x3e\n              <svg-icon type="\'forward\'" uib-tooltip="Forward" ng-if="ctrl.viewer === \'whiteLabel\'" tooltip-placement="left"></svg-icon>\n            </button>\n\n            <button\n              class="new-viz-action hide-3"\n              ng-if="ctrl.viewer !== \'whiteLabel\'"\n              ng-show="isClipboardEnabled"\n              uib-tooltip="Copy Link to Chart"\n              copy-to-clipboard\n              clipboard-text="ctrl.view._vizReportRunLink"\n              clipboard-success="ctrl.copySuccess()"\n              clipboard-enabled="isClipboardEnabled">\n              <svg-icon type="\'copy-link\'"></svg-icon>\n            </button>\n\n            <a class="new-viz-action kebab-action" href="javascript:void(0)"\n              ng-if="ctrl.dataset && ctrl.viewer !== \'whiteLabel\'"\n              ng-click="ctrl.captureKebabClick($event)">\n              <kebab-menu targetable="true">\n                <li menu-item="exp" class="show-2" ng-click="ctrl.undo()" disabled="!ctrl.state.canUndo">Back</li>\n                <li menu-item="exp" class="show-2" ng-click="ctrl.redo()" disabled="!ctrl.state.canRedo">Forward</li>\n                <li menu-item="exp" class="show-2 divider"></li>\n                <li menu-clipboard-link class="show-3 show-2" link="ctrl.view._vizReportRunLink" clipboard-enabled="isClipboardEnabled" clipboard-success="ctrl.copySuccess()" ng-show="isClipboardEnabled">Copy Link to Chart</li>\n                <li class="show-3 show-2 divider"></li>\n                <li menu-item="exp" ng-click="ctrl.linkToQuery($event)" ng-href="{{ ctrl.dataset.reportQueryUrl }}" ng-if="!ctrl.viewer">View Query <span class="mode-show-embed-inline">in Mode</span></li>\n                <li menu-item="exp" ng-click="ctrl.linkToData($event)" ng-href="{{ ctrl.dataset.reportDataUrl }}">View Query Results <span class="mode-show-embed-inline">in Mode</span></li>\n              </kebab-menu>\n            </a>\n\n            <span class="divider" ng-if="!ctrl.viewer"></span>\n\n            <a class="new-viz-action" ng-href="{{ ctrl.view._vizReportRunLink }}"\n              ng-if="!ctrl.viewer && ctrl.exploreEnabled"\n              ng-click="ctrl.linkToLightbox($event)" class="new-viz-action">\n              <svg-icon class="mode-hide-embed" type="\'toggle-explorer\'" uib-tooltip="Explore"></svg-icon>\n              <svg-icon class="mode-show-embed-flex-inline" type="\'toggle-explorer\'" uib-tooltip="Explore in Mode" tooltip-placement="left"></svg-icon>\n            </a>\n\n            <a class="new-viz-action" ng-href="{{ ctrl.view._vizReportRunLink }}"\n              ng-if="!ctrl.viewer && !ctrl.exploreEnabled"\n              ng-click="ctrl.linkToLightbox($event)" class="new-viz-action">\n              <svg-icon class="mode-hide-embed" type="\'toggle-expanded-view\'" uib-tooltip="Expand"></svg-icon>\n              <svg-icon class="mode-show-embed-flex-inline" type="\'toggle-expanded-view\'" uib-tooltip="Expand in Mode" tooltip-placement="left"></svg-icon>\n            </a>\n\n          </div>\n\n          \x3c!-- New report actions end --\x3e\n\n        </div>\n\n        <div class="chart" ng-show="!ctrl.status.unavailable && ctrl.isValid">\n          <chart-renderer\n            render-context="report"\n            chart-id="ctrl.chartId"\n            chart-type="ctrl.view.chartType"\n            encoding="ctrl.view.encoding"\n            model="ctrl.model"\n            rel-name="ctrl.relName"\n            chart-model="ctrl.chartModel"\n            format="ctrl.view.format"\n            prevent-expanding-interaction="!ctrl.rls.isLinkable()"\n            on-embed-action="ctrl.dispatchEmbedAction($action)"\n            render-start="ctrl.onRenderStart({ $vizID: ctrl.chartId })"\n            drilldown-enabled="ctrl.drilldownEnabled"\n            is-designer-mode="ctrl.isDesignerMode"\n            is-white-label="ctrl.viewer && ctrl.viewer === \'whiteLabel\'"\n            render-end="ctrl.onRenderEnd({ $vizID: ctrl.chartId })">\n          </chart-renderer>\n          <div class="ylabel" ng-show="ctrl.view.labels.yAxis"><h4>{{ ctrl.view.labels.yAxis }}</h4></div>\n          <div class="xlabel" ng-show="ctrl.view.labels.xAxis"><h4>{{ ctrl.view.labels.xAxis }}</h4></div>\n          <div class="drill-actions plus-plan-only" ng-if="ctrl.drilldownEnabled && (ctrl.canChangeHierarchy.back || ctrl.canChangeHierarchy.forward)">\n            <button class="drill-action-btn"\n               ng-class="{ disabled: !ctrl.canChangeHierarchy.back }"\n               ng-click="ctrl.changeHierarchy(false)"\n               ng-dblclick="$event.stopPropagation()">\n              <svg-icon\n                class="icon-hierarchy-up"\n                type="\'hierarchy-up\'"\n                uib-tooltip="Decrease Granularity"\n                tooltip-append-to-body="true"\n                tooltip-placement="top"\n                tooltip-class="hierarchy-tooltip">\n              </svg-icon>\n            </button>\n            <button class="drill-action-btn"\n               ng-class="{ disabled: !ctrl.canChangeHierarchy.forward}"\n               ng-click="ctrl.changeHierarchy(true)"\n               ng-dblclick="$event.stopPropagation()">\n              <svg-icon\n                class="icon-hierarchy-down"\n                type="\'hierarchy-down\'"\n                uib-tooltip="Increase Granularity"\n                tooltip-append-to-body="true"\n                tooltip-placement="top"\n                tooltip-class="hierarchy-tooltip">\n              </svg-icon>\n            </button>\n          </div>\n        </div>\n        <div class="chart-warning" ng-show="ctrl.chartMessage">{{ chartMessage }}</div>\n        <div class="chart-error" ng-show="ctrl.status.unavailable || !ctrl.isValid"><h3>Sorry, unable to render a chart with the given data</h3><p ng-if="ctrl.status.message">{{ status.message }}</p></div>\n      </div>\n      <div class="error-message" ng-show="ctrl.dataset && ctrl.dataset.state == \'failed\'"><img ng-src="{{ ctrl.errorImg }}" class="error-icon"><div class="message">Looks like something went wrong with your query</div><a ng-click="linkToData($event)" ng-href="{{ ctrl.dataset.reportDataUrl }}" rel="noopener" class="sub-message">Take a look at the issue</a></div>\n      <div class="error-message" ng-show="ctrl.dataset && ctrl.dataset.state == \'cancelled\'"><i class="icon-warning-small error-icon"></i><div class="message">This query was canceled</div><div class="sub-message"></div></div>\n      <div class="error-message" ng-show="ctrl.dataset && ctrl.dataset.state == \'running\'"><i class="icon-warning-small error-icon"></i><div class="message">This query is still running. Refresh the page to see the results.</div><div class="sub-message"></div></div>\n      <div class="error-message" ng-show="ctrl.dataset && ctrl.dataset.state != \'cancelled\' && ctrl.dataset.state != \'failed\' && ctrl.dataset.state != \'running\' && !ctrl.dataset.content"><i class="icon-warning-small error-icon"></i><div class="message">This query is too large to show in browser</div><a ng-click="ctrl.linkToData($event)" ng-href="{{ ctrl.dataset.reportDataUrl }}" target="_blank" rel="noopener" class="sub-message">Access the data</a></div>\n    </div>'};r.module("mode.components").component("vegasMultiChart",p)},"Vi/P":function(e,t){e.exports='<div class="confirm-modal">\n  <h3 class="modal-header">Delete Report</h3>\n  <div class="confirm-modal-container">\n    <p>Are you sure you want to delete this report?</p>\n  </div>\n  <div class="modal-action-bar">\n    <div class="modal-action-bar-links">\n      <a href="javascript://" ng-click="ctrl.$dismiss()">Cancel</a>\n    </div>\n    <button type="submit" class="btn btn-lg btn-filled-primary" ng-click="ctrl.$close(true)">OK</button>\n  </div>\n</div>\n'},VrsO:function(e,t,n){"use strict";var r=n("Zz1P"),o=n.n(r),i=n("0YuG"),a=(n.n(i),n("0iPh")),l=n.n(a);i.module("mode.components").directive("modeDatePicker",["Utils","$timeout",function(e,t){return{restrict:"A",replace:!0,scope:{modeDatePicker:"@",class:"@",id:"@",name:"@",placeholder:"@",showIcon:"<?",onChange:"&?",onKeyup:"&?",disabled:"@?"},template:'\n      <div><input type="text"\n             class="{{ class }}"\n             id="{{ id }}"\n             name="{{ name }}"\n             placeholder="{{ placeholder }}"\n             ng-class="{\'datepicker-open\': datepicker.open, \'mode-datepicker\': showIcon}"\n             ng-model="date"\n             ng-focus="open()"\n             ng-click="open()"\n             ng-change="handleChange(date)"\n             ng-keyup="handleKeyup(date)"\n             is-open="datepicker.open"\n             uib-datepicker-popup="yyyy-MM-dd"\n             datepicker-options="datepicker.options"\n             datepicker-append-to-body="true"\n             popup-placement="auto bottom-right"\n             show-button-bar="false"\n             on-open-focus="false"\n             autocomplete="off"></div>',link:{pre:function(e,t,n,r){e.datepicker={open:!1,options:{showWeeks:!1}};var i=o()(e.placeholder);i&&i.isValid()&&(e.datepicker.options.initDate=i.toDate())},post:function(n,r,i,a){function handleDocumentOpenEvent(e,r){r!==n.id&&n.datepicker.open&&t(function(){n.datepicker.open=!1})}r[0].className="",r[0].removeAttribute("name"),r[0].removeAttribute("id"),r[0].removeAttribute("type"),r[0].removeAttribute("placeholder"),n.disabled&&r.find("input").attr("disabled","true"),n.$watch("modeDatePicker",function(t){if(""!==t){var r=o()(t);r&&r.isValid()?e.isUTC(t)?r.utc():r._tzm&&(r=o.a.parseZone(t)):r=o()(),n.date=r.toDate()}else n.date=null}),n.open=function(){l()(window).trigger("mode.datepicker.datepickerOpen",[n.id]),n.datepicker.open=!0},l()(window).on("mode.datepicker.datepickerOpen",handleDocumentOpenEvent),n.$on("$destroy",function(){l()(window).off("mode.datepicker.datepickerOpen",handleDocumentOpenEvent)}),n.handleChange=function(e){n.onChange&&n.onChange({$value:e})},n.handleKeyup=function(e){n.onKeyup&&n.onKeyup({$value:e})}}}}}])},WRVt:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("m9my"),i=(n.n(o),n("kZ7C"));!function(e){function getNextDatePart(t,n,r){var o=n?e.DateTruncHierarchy:e.DatePartHierarchy,i=o.indexOf(t),a=r?i+1:i-1;return a<0&&(a=0),a>=o.length&&(a=o.length-1),o[a]}function makeNextDatePart(e,t,n){var r=e.buildViewCalcField(n.formula,n.variable.type,n.id);if(r.formula.form===o.FormType.DATEFUNC){r.formula.funcName;return getNextDatePart(r.formula.datePart,"DATETRUNC"===r.formula.funcName,!0)}}e.DatePartHierarchy=[o.DatePart.YEAR,o.DatePart.QUARTER,o.DatePart.MONTH,o.DatePart.WEEKDAY,o.DatePart.DAY,o.DatePart.HOUR,o.DatePart.MINUTE,o.DatePart.SECOND],e.DateTruncHierarchy=[o.DatePart.YEAR,o.DatePart.QUARTER,o.DatePart.MONTH,o.DatePart.WEEK,o.DatePart.DAY,o.DatePart.HOUR,o.DatePart.MINUTE,o.DatePart.SECOND],e.checkLowestDatePart=function(e,t){var n,r=!1,i=t.x[0];return i||(t.marks.series.length?i=t.marks.series[0].properties.color.values[0]:t.column.length&&(i=t.column[0])),i&&(n=e.buildViewCalcField(i.formula,i.variable.type,i.id)),n&&n.formula.form===o.FormType.DATEFUNC&&n.formula.datePart===makeNextDatePart(e,t,i)&&(r=!0),r},e.nextDatePart=function(e,t){switch(i.a.shape(t)){case i.a.Shape.Grouped:return function(e,t){return makeNextDatePart(e,t,t.column[0])}(e,t);case i.a.Shape.Combo:case i.a.Shape.Stacked:return function(e,t){return makeNextDatePart(e,t,t.x[0])}(e,t);case i.a.Shape.Radial:return function(e,t){var n=t.marks,r=n.series,o=n.properties,i=r.length?r[0].properties:o;return makeNextDatePart(e,t,i.color.values[0])}(e,t)}},e.nextDateFormula=function(e,t,n){var r=e.buildViewCalcField(n.formula,n.variable.type,n.id);if(r.formula.form===o.FormType.DATEFUNC){var i=r.formula.funcName,a=r.formula.fieldName;return i+"('"+getNextDatePart(r.formula.datePart,"DATETRUNC"===r.formula.funcName,!0)+"', ["+a+"])"}},e.getNextDatePart=getNextDatePart}(r||(r={}))},X11V:function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">Unsaved Changes</h3>\n  <div class="modal-container-sm">\n    <p>You have unsaved changes that will not be seen in the report.\n    Continue anyway?\n    </p>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-secondary pull-left" ng-click="$dismiss()">Cancel</button>\n    <a ng-href="{{ ctrl.url }}" target="_blank" rel="noopener" class="btn btn-lg btn-filled-secondary" ng-click="$dismiss()">Continue</a>\n    <a ng-href="{{ ctrl.url }}" target="_blank" rel="noopener" focus-me class="btn btn-lg btn-filled-primary" ng-click="ctrl.saveAndClose($event)">Save & Continue</a>\n  </div>\n</div>'},"Y+t6":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("+OPr"),o=n("u5jn"),i=n("ouuP"),a="text-margins",l=function(){function TextBlockController(e,t,n,l){var s=this;this.$scope=e,this.$element=t,this.$attrs=n,this.wms=l,this.getRowIndex=function(){return $("div.mode-grid .row").index(s.$element.parents("div[class=row]"))},this.getRowHeight=function(){var e=s.$element.parents(".row").attr(o.y);return e||(s.$element.parents("[class^=col-md]").hasClass("col-md-12")?r.a.Full:r.a.Default)},this.setRowHeight=function(e){e!==r.a.Full&&s.hasMargins()&&s.toggleMargins(),s.wms.postMessage({type:"setRowSize",data:{index:s.getRowIndex(),size:e}})},this.resizeElement=function(){s.$element.find(".resize.resize-hover").css("height",s.$element.find(".text-block-container").css("height"))},this.onTextChange=function(e){s.$element.find(".text-block-container").hasClass("selected")&&s.resizeElement(),s.saveTextBlock(e)},this.saveTextBlock=function(e){s.wms.postMessage({type:i.b.MSG_TYPES.SaveText,id:s.$attrs.id,contents:e},"*")},this.removeTextBlock=function(){s.wms.postMessage({type:i.b.MSG_TYPES.RemoveText,id:s.$attrs.id},"*")},this.toggleMargins=function(){s.wms.postMessage({type:i.b.MSG_TYPES.ToggleTextMargins,id:s.$attrs.id},"*"),s.$element.toggleClass(a)},this.hasMargins=function(){return s.$element.hasClass(a)},this.$onDestroy=function(){s.$element.off("click"),s.$element.off("dblclick"),$(document).off(".text-block")};$("div.mode-grid .row");var c=this.getRowIndex(),d=this.getRowHeight();this.rowData={index:c,rowSize:d}}return TextBlockController.prototype.toggleSizePicker=function(){this.$element.find(".text-block-size-dropdown").toggleClass("active")},TextBlockController.$inject=["$scope","$element","$attrs","WindowMessageService"],TextBlockController}();t.b=l},YzgE:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("Zz1P"),i=(n.n(o),n("m9my")),a=(n.n(i),n("yqn6")),l=n("kZ7C"),s=n("WRVt"),c=n("iJVT");!function(e){function formatValue(e,t,n,r){t=Object(a.m)(t);var l=e.buildViewCalcField(n.formula,n.variable.type,n.id);if(l.formula.form!==i.FormType.DATEFUNC)return r;var s=l.formula.datePart.toUpperCase();switch(l.formula.funcName){case"DATEPART":switch(s){case"DAY":return"Day "+r.toString();case"HOUR":return"Hour "+r.toString();case"MINUTE":return"Minute "+r.toString();case"SECOND":return"Second "+r.toString();default:return r.toString()}case"DATETRUNC":var c=o.utc(r);if(!c.isValid())return null;switch(s){case"YEAR":return c.format("YYYY");case"QUARTER":case"MONTH":return c.format("YYYY-MM");case"WEEK":return"week of "+c.format("YYYY-MM-DD");case"WEEKDAY":case"DAY":return c.format("YYYY-MM-DD");case"HOUR":case"MINUTE":case"SECOND":return c.format("YYYY-MM-DD HH:mm:ss")}break;default:return r}}e.encode=function(e,t,n){var r=Object(a.m)(t),o=r!==t,i=t;switch(l.a.shape(r)){case l.a.Shape.Grouped:i=function(e,t,n){var r=t.column[0];if(t=c.a.makeGrouped(e,t,n).encoding,r){var o=s.a.nextDateFormula(e,t,r);t=Object(a.E)(t,{id:r.id,formula:o}).encoding,t=Object(a.y)(t,"stackedBar",t.x[0].id).encoding}return Object(a.s)(t)}(e,r,n).encoding;break;case l.a.Shape.Combo:i=function(e,t,n){var r=t.x[0];if(n.y2?(t=Object(a.y)(t,"line",t.y[0].id).encoding,t=Object(a.l)("linePlusBar","line",t).encoding):(t=Object(a.y)(t,"stackedBar",t.y2[0].id).encoding,t=Object(a.l)("linePlusBar","stackedBar",t).encoding),r){var o=n.x,i=o.name,l=o.value,d=s.a.nextDateFormula(e,t,r);t=c.a.addNamesOrFilter(e,t,r,i,l).encoding,t=Object(a.E)(t,{id:r.id,formula:d}).encoding}return Object(a.s)(t)}(e,r,n).encoding;break;case l.a.Shape.Stacked:i=function(e,t,n){var r=t.marks,o=r.series,i=r.properties,l=o.length?o[0].properties:i,d=t.x[0],u=l.color.values[0];if(d){var p=n.x,h=p.name,g=p.value,m=s.a.nextDateFormula(e,t,d);t=c.a.addNamesOrFilter(e,t,d,h,g).encoding,t=Object(a.E)(t,{id:d.id,formula:m}).encoding}if(u){var f=n.series.color,C=f.name,g=f.value;t=c.a.addNamesOrFilter(e,t,u,C,g).encoding}return Object(a.s)(t)}(e,r,n).encoding;break;case l.a.Shape.Radial:i=function(e,t,n){var r=(t=c.a.makeRadial(e,t,n).encoding).marks,o=r.series,i=r.properties,l=(o.length?o[0].properties:i).color.values[0];if(l){var d=s.a.nextDateFormula(e,t,l);t=Object(a.E)(t,{id:l.id,formula:d}).encoding}return Object(a.s)(t)}(e,r,n).encoding;break;default:return Object(a.s)(t)}return Object(a.s)(o?Object(a.B)(i):i)},e.newChartType=function(e,t){switch(e){case"bar":return"stackedBar";case"hBar":return"hStackedBar";case"linePlusBar":return t.y2?"line":"stackedBar";default:return e}},e.formatTargetValue=function(e,t,n){switch(t=Object(a.m)(t),l.a.shape(t)){case l.a.Shape.Grouped:return function(e,t,n){return formatValue(e,t,t.column[0],n.columns[0].value)}(e,t,n);case l.a.Shape.Combo:case l.a.Shape.Stacked:return function(e,t,n){return formatValue(e,t,t.x[0],n.x.value)}(e,t,n);case l.a.Shape.Radial:return function(e,t,n){var r=t.marks,o=r.series,i=r.properties,a=o.length?o[0].properties:i;return formatValue(e,t,a.color.values[0],n.series.color.value)}(e,t,n)}},e.formatValue=formatValue}(r||(r={}))},Z2ya:function(e,t){e.exports=window.Highcharts},ZC2I:function(e,t){e.exports='<div class="default-modal scroll-modal">\n  <h3 class="modal-header">Create Shortcut in&hellip;<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <div class="modal-input">\n    <input\n        type="text"\n        class="form-control next-form-control"\n        placeholder="Find Space..."\n        autocomplete="off"\n        focus-me\n        ng-model="ctrl.query.name" />\n    <i class="icon-search input-icon"></i>\n  </div>\n  <div class="modal-container">\n    <ul class="spaces-select-list">\n      <li class="spaces-select-list-item" ng-if="ctrl.canCreateSpace()">\n        <a href="#" create-space name="{{ ctrl.query.name }}" owner="ctrl.owner" account="ctrl.account" class="spaces-select-list-link new-space-link" state="ctrl.state" on-create="ctrl.moveReport($space)"><i class="icon-modal-add spaces-select-icon"></i>Create New Space</a>\n      </li>\n      <li ng-repeat="space in ctrl.spaces | filter:ctrl.query" class="spaces-select-list-item" ng-class="{selected: ctrl.selectedSpace === space}">\n        <a href="#" class="spaces-select-list-link" ng-click="ctrl.selectedSpace = space"><i class="{{ space.iconClassName }} spaces-select-icon"></i>{{ space.name }}</a>\n      </li>\n    </ul>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-primary" ng-disabled="!ctrl.selectedSpace" ng-click="ctrl.$close({ $space: ctrl.selectedSpace })">Create</button>\n  </div>\n</div>\n'},ZLRu:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("8SPo"),i=n("yqn6"),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};!function(e){e.makeComboTitles=function(e,t){t=Object(i.m)(t);var n=o.a.makeViewField(e,t.x[0]),r={};return t.marks.series.forEach(function(n,i){var a=o.a.lookupYField(t,n.field),l=o.a.makeViewField(e,a);0===i?r.yAxis=o.a.makeDefaultFieldName(e,l):r.y2Axis=o.a.makeDefaultFieldName(e,l)}),a({},r,{xAxis:n&&o.a.makeDefaultFieldName(e,n)||null,legend:null})},e.makeGroupedTitles=function(e,t){t=Object(i.m)(t);var n,r=o.a.makeViewField(e,t.x[0]),a=o.a.makeViewField(e,t.column[0]);t.marks.series[0].properties.color.values.length&&(n=o.a.makeViewField(e,t.marks.series[0].properties.color.values[0]));var l=t.value.map(function(t){return o.a.makeViewField(e,t)});return{yAxis:1==t.value.length?o.a.makeDefaultFieldName(e,l[0]):"Values",xAxis:r.isNames?o.a.makeDefaultFieldName(e,a):r&&o.a.makeDefaultFieldName(e,r)||null,legend:null==n?null:n.isNames?null:o.a.makeDefaultFieldName(e,n)}},e.makeStackedTitles=function(e,t){t=Object(i.m)(t);var n,r=o.a.makeViewField(e,t.x[0]);t.marks.series[0].properties.color.values.length&&(n=o.a.makeViewField(e,t.marks.series[0].properties.color.values[0]));var a=t.value.map(function(t){return o.a.makeViewField(e,t)});return{yAxis:1==t.value.length?o.a.makeDefaultFieldName(e,a[0]):"Values",xAxis:r.isNames?null:r&&o.a.makeDefaultFieldName(e,r)||null,legend:null==n?null:n.isNames?null:o.a.makeDefaultFieldName(e,n)}},e.makeScatterTitles=function(e,t){t=Object(i.m)(t);var n,r=o.a.makeViewField(e,t.x[0]);t.marks.series[0].properties.color.values.length&&(n=o.a.makeViewField(e,t.marks.series[0].properties.color.values[0]));var a=t.value.map(function(t){return o.a.makeViewField(e,t)});return{yAxis:1==t.value.length?o.a.makeDefaultFieldName(e,a[0]):"Values",xAxis:r.isNames?null:r&&o.a.makeDefaultFieldName(e,r)||null,legend:null==n?null:n.isNames?null:o.a.makeDefaultFieldName(e,n)}},e.makePieTitles=function(e,t){var n=(t=Object(i.m)(t)).marks.properties.color.values[0],r=t.marks.properties.angle.values[0],a=e.buildViewCalcField(n.formula,n.variable.type,n.id);return e.buildViewCalcField(r.formula,r.variable.type,r.id),{legend:a&&o.a.makeDefaultFieldName(e,a)||null}}}(r||(r={}))},Zz1P:function(e,t){e.exports=window.moment},b4e0:function(e,t,n){"use strict";var r=n("p37E"),o=n("0YuG"),i=n("Vz5A"),a=(n("k3BA"),n("RpJj")),l=n("PbPb"),s=n("JW7B"),c=n("3nxw"),d=n("EABs"),u=Object(i.combineReducers)({editor:function(e,t){return l.extend({account:!1,browser:!1,chart:!1,chartSidebar:!1,currentReport:null,currentVisuals:[],designer:!0,designerSidebar:!1,filterPanel:!1,hasSelectedText:!1,history:!1,html:!1,lists:!1,notebookDataLoading:!1,notebookDataNeedsLoading:!1,notebookState:"session",notebookStatusBarState:"loading",notebookStatusMessage:"",notebookShown:!1,queryMode:!0,report:!1,results:!0,row:-1,rowSidebar:!1,rowSize:-1,schema:!0,schemaSidebar:!0,schemaTab:"tables",secondarySidebar:!0,sql:!0,sqlEditor:!0,table:!1,tableSidebar:!1,vertical:!0,noPreviewRefresh:!1,viz:{}},e,function(e,t){switch(t.type){case a.b.SetView:return{browser:"browser"===t.name?t.show:e.browser}}}(e,t),function(e,t){switch(t.type){case a.b.SelectChart:return{chart:!0,chartSidebar:!0};case a.b.SelectQuery:case a.b.SelectTable:case a.b.SelectRow:case a.b.ClearSelected:return{chart:!1,chartSidebar:!1}}}(0,t),function(e,t){switch(t.type){case a.b.SelectReport:return{currentVisuals:t.currentVisualIds.slice()};case a.b.RemoveFromLayout:return{currentVisuals:l.without(e.currentVisuals,t.id)};case a.b.AddToLayout:if(e.currentVisuals.indexOf(t.id)<0)return{currentVisuals:e.currentVisuals.concat(t.id)}}}(e,t),function(e,t){switch(t.type){case a.b.ToggleDesignerSidebar:return{designerSidebar:!e.designerSidebar};case a.b.SelectRow:return{designerSidebar:!t.focus};case a.b.CloseDesignerSidebar:case a.b.SelectQuery:case a.b.ClearSelected:case a.b.RemoveFromLayout:return{designerSidebar:!1};case a.b.OpenDesignerSidebar:return{designerSidebar:!0};case a.b.SelectChart:return{designerSidebar:!!e.designerSidebar&&e.currentVisuals.indexOf("chart_"+t.model.token)>=0};case a.b.SelectTable:return{designerSidebar:!!e.designerSidebar&&e.currentVisuals.indexOf("table_"+t.model.token)>=0}}}(e,t),function(e,t){switch(t.type){case a.b.ToggleMaximize:return{designer:"designer"===t.name||!e.designer};case a.b.ToggleMinimize:return{designer:"designer"!==t.name||!e.designer}}}(e,t),function(e,t){switch(t.type){case a.b.OpenFilterPanel:return{filterPanel:!0};case a.b.CloseFilterPanel:return{filterPanel:!1};case a.b.ToggleFilterPanel:return{filterPanel:!e.filterPanel}}}(e,t),function(e,t){switch(t.type){case a.b.ToggleMaximize:return{html:"html"===t.name||!e.html};case a.b.ToggleMinimize:return{html:"html"!==t.name||!e.html}}}(e,t),function(e,t){switch(t.type){case a.b.NotebookDataLoaded:case a.b.NotebookSessionLost:return{notebookDataLoading:!1};case a.b.NotebookLoading:return{notebookDataLoading:!0}}}(0,t),function(e,t){switch(t.type){case a.b.NotebookDataLoaded:return{notebookDataNeedsLoading:!1};case a.b.ReportRunDataLoaded:return{notebookDataNeedsLoading:!0}}}(0,t),function(e,t){switch(t.type){case a.b.NotebookRunning:return{notebookState:"running",notebookStatusBarState:"running"};case a.b.NotebookLoading:return{notebookState:"loading",notebookStatusBarState:"loading"};case a.b.NotebookWarning:return{notebookState:"warning",notebookStatusBarState:"warning"};case a.b.NotebookStartSession:return{notebookState:"session",notebookStatusBarState:"loading"};case a.b.NotebookSessionLost:return{notebookState:"error",notebookStatusBarState:"error"};case a.b.NotebookReady:return{notebookState:"ready",notebookStatusBarState:"ready"};case a.b.NotebookDataOld:return{notebookState:"alert",notebookStatusBarState:"alert"};case a.b.NotebookTerminated:return{notebookState:"error",notebookStatusBarState:"error"}}}(0,t),function(e,t){switch(t.type){case a.b.NotebookSessionLost:return{notebookStatusMessage:"There was a problem with your session"};case a.b.NotebookTerminated:var n=void 0;switch(t.reason){case"CRASHED":n="Notebook has encounted an unexpected error";break;case"EXPIRED":n="Notebook session ended due to inactivity";break;case"OOM":n="Notebook ran out of memory";break;default:n="Notebook session ended"}return{notebookStatusMessage:n}}}(0,t),function(e,t){switch(t.type){case a.b.SetNotebookShown:return{notebookShown:t.shown};case a.b.SelectQuery:case a.b.SelectChart:case a.b.SelectTable:case a.b.SetQueryMode:case a.b.SetBuilderMode:return{notebookShown:!1};case a.b.SetView:if("browser"!==t.name)return{notebookShown:!1}}}(0,t),function(e,t){switch(t.type){case a.b.SetQueryMode:return{queryMode:t.enabled};case a.b.SetBuilderMode:case a.b.SetNotebookShown:return{queryMode:!1};case a.b.SelectQuery:case a.b.SelectChart:case a.b.SelectTable:return{queryMode:!!t.focus||e.queryMode};case a.b.SetView:if(t.show)switch(t.name){case"sql":case"results":return{queryMode:!0}}}}(e,t),function(e,t){switch(t.type){case a.b.ToggleMaximize:return{results:"results"===t.name||!e.results};case a.b.ToggleMinimize:return{results:"results"!==t.name||!e.results};case a.b.SetView:return{results:"results"===t.name?t.show:e.results};case a.b.SelectQuery:return{results:!t.query._new_query&&e.results}}}(e,t),function(e,t){switch(t.type){case a.b.SelectRow:return{row:t.index,rowSidebar:!0,rowSize:t.size};case a.b.SelectQuery:case a.b.SelectTable:case a.b.SelectChart:case a.b.ClearSelected:return{row:-1,rowSidebar:!1,rowSize:void 0}}}(0,t),function(e,t){switch(t.type){case a.b.ToggleSecondarySidebar:return{schemaSidebar:e.queryMode&&e.sql&&!e.chart&&!e.table?!e.secondarySidebar:e.schemaSidebar}}}(e,t),function(e,t){switch(t.type){case a.b.SelectSchemaTab:return{schemaTab:t.tab}}}(0,t),function(e,t){switch(t.type){case a.b.SetView:return{schema:"schema"===t.name?t.show:e.schema}}}(e,t),function(e,t){switch(t.type){case a.b.SelectQuery:return{secondarySidebar:e.schemaSidebar};case a.b.SelectTable:case a.b.SelectChart:return{secondarySidebar:!0};case a.b.ToggleSecondarySidebar:return{secondarySidebar:!e.secondarySidebar}}}(e,t),function(e,t){switch(t.type){case a.b.RemapSelectedQuery:return e.selectedQuery&&e.selectedQuery.token===t.oldToken?{selectedQuery:{token:t.newToken,last_run_id:e.selectedQuery.last_run_id}}:e.selectedQuery;case a.b.SelectQuery:return{selectedQuery:{token:t.token,last_run_id:t.query?t.query.last_run_id:null}};case a.b.SelectChart:case a.b.SelectTable:return{selectedQuery:{token:t.model.parent,last_run_id:t.query.last_run_id}};case a.b.SelectReport:return{selectedQuery:{token:t.query.token,last_run_id:t.query.last_run_id}}}}(e,t),function(e,t){switch(t.type){case a.b.SelectTableColumn:return{subViz:{type:"table-column",selectedTableColumn:t.column}};case a.b.SelectTable:case a.b.SelectChart:return{subViz:null}}}(0,t),function(e,t){switch(t.type){case a.b.SelectText:return{hasSelectedText:!!t.text};case a.b.SelectQuery:return{hasSelectedText:!1}}}(0,t),function(e,t){switch(t.type){case a.b.SelectTable:return{viz:{type:"table",tableView:l.cloneDeep(t.model.view),queryToken:t.model.parent,viewVersion:1,token:t.model.token}};case a.b.SelectChart:return{viz:{type:"chart",chartView:l.cloneDeep(t.model.view),viewVersion:t.model.view_version,queryToken:t.model.parent,token:t.model.token,color_palette_token:t.model.color_palette_token}}}}(0,t),function(e,t){switch(t.type){case a.b.SelectChart:case a.b.SelectTable:return{sqlEditor:!1};case a.b.SelectQuery:return{sqlEditor:!!t.query};case a.b.SetView:return{sqlEditor:"sql"===t.name?t.show:e.sqlEditor}}}(e,t),function(e,t){switch(t.type){case a.b.SelectChart:case a.b.SelectTable:case a.b.SelectQuery:return{sql:!!t.query};case a.b.SetView:return{sql:"sql"===t.name?t.show:e.sql};case a.b.ToggleMaximize:return{sql:"sql"===t.name||!e.sql};case a.b.ToggleMinimize:return{sql:"sql"!==t.name||!e.sql}}}(e,t),function(e,t){switch(t.type){case a.b.SelectTable:return{table:!0,tableSidebar:!0};case a.b.SelectQuery:case a.b.SelectChart:case a.b.SelectRow:case a.b.ClearSelected:return{table:!1,tableSidebar:!1}}}(0,t),function(e,t){switch(t.type){case a.b.ToggleVerticalMode:return{vertical:!e.vertical};case a.b.SetVerticalMode:return{vertical:t.vertical}}}(e,t),function(e,t){switch(t.type){case a.b.SetBuilderMode:return{noPreviewRefresh:t.withoutPreview};case a.b.SetQueryMode:return{noPreviewRefresh:!1}}}(0,t))},home:s.a,navSidebar:function(e,t){return l.extend({searchEnabled:!1,sidebarOpen:!1},e,function(e,t){switch(t.type){case c.a.EnableSearch:return{searchEnabled:!0};case c.a.DisableSearch:return{searchEnabled:!1}}}(0,t),function(e,t){switch(t.type){case c.a.OpenSidebar:return{sidebarOpen:!0};case c.a.CloseSidebar:return{sidebarOpen:!1}}}(0,t))},definitionEditor:function(e,t){return Object(l.extend)({selectedDefinition:null,token:null,secondarySidebar:!0,secondaryTab:"tables",vertical:!0,sqlEditor:!0,results:!0,notify:!1,windowFocus:!0,top:!0,bottom:!1,selectedDataSource:null},e,function(e,t){switch(t.type){case d.a.SelectDefinition:return{selectedDefinition:t.definition,token:t.definition.token}}}(0,t),function(e,t){switch(t.type){case d.a.SelectDataSource:return{selectedDataSource:t.source.id}}}(0,t),function(e,t){switch(t.type){case d.a.MinimizeTop:return{bottom:!0};case d.a.MaximizeTop:case d.a.MinimizeBottom:return{bottom:!e.bottom};case d.a.MaximizeBottom:return{bottom:!0};case d.a.SelectDefinition:return{bottom:t.definition&&t.definition._resource.hasLink("last_run")};case d.a.RunDefinition:return{bottom:!0}}}(e,t),function(e,t){switch(t.type){case d.a.MinimizeTop:return{top:!e.top};case d.a.MaximizeTop:case d.a.MinimizeBottom:return{top:!0};case d.a.MaximizeBottom:return{top:!e.top}}}(e,t),function(e,t){switch(t.type){case d.a.SelectSecondaryTab:return{secondaryTab:t.tab}}}(0,t),function(e,t){switch(t.type){case d.a.ToggleVerticalMode:return{vertical:!e.vertical};case d.a.SetVerticalMode:return{vertical:t.vertical}}}(e,t),function(e,t){switch(t.type){case d.a.RunDefinitionFulfilled:return{notify:!e.windowFocus};case d.a.RunDefinition:case"WINDOW_FOCUS":return{notify:!1}}}(e,t),function(e,t){switch(t.type){case"WINDOW_FOCUS":return{windowFocus:!0};case"WINDOW_BLUR":return{windowFocus:!1}}}(0,t))}}),p=n("0ivk"),h=n("nxEI"),g=function(){function StoreConnector(e){this.store=e}return StoreConnector.prototype.connect=function(e,t){var n=this,r=this.store.subscribe(function(){e.$evalAsync(function(){return t(n.store.getState())})});e.$on("$destroy",r),t(this.store.getState())},StoreConnector.prototype.connectPath=function(e,t,n){var r=this,o=this.store.subscribe(function(){e.$evalAsync(function(){return n(l.get(r.store.getState(),t))})});e.$on("$destroy",o),n(l.get(this.store.getState(),t))},StoreConnector.prototype.subscribe=function(e){return this.store.subscribe(e)},StoreConnector.prototype.getState=function(){return this.store.getState()},StoreConnector.prototype.dispatch=function(e){return e&&e.type&&h.a.attemptOrLog(p.a.leaveBreadcrumbSafely,"DISPATCH:REDUX",{type:e.type}),this.store.dispatch(e)},StoreConnector}();n.d(t,"a",function(){return f});var m=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.compose,f=Object(i.createStore)(u,m(Object(i.applyMiddleware)(r()))),C=new g(f);o.module("mode.shared.services").service("StoreService",function(){return C}),"undefined"!=typeof window&&(window.onfocus=function(){f.dispatch({type:"WINDOW_FOCUS"})},window.onblur=function(){f.dispatch({type:"WINDOW_BLUR"})})},bAVf:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("PbPb"),o=(n.n(r),function(){function ViewOptionModel(e){this.resource=e,this.stateStore={selectedColumn:"",sortedColumn:{index:null,order:null}}}return ViewOptionModel.prototype.id=function(){return this.resource.token||null},ViewOptionModel.prototype.queryToken=function(){return this.resource.parent||null},ViewOptionModel.prototype.state=function(e,t){return arguments.length>1?this.stateStore[e]=t:this.stateStore[e]},ViewOptionModel.prototype.excludedColumns=function(){var e=this.resource.view;return e&&e.excludeColumns||[]},ViewOptionModel.prototype.columnFormatSettings=function(){var e=this.resource.view;return e&&e.columns||{}},ViewOptionModel.prototype.chartType=function(){var e=this.resource.view;return e&&(e.selectedChart||e.chartType||"")},ViewOptionModel.prototype.view=function(){return this.resource.view},ViewOptionModel.isViewOption=function(e){return e.hasOwnProperty("parent")&&e.hasOwnProperty("token")},ViewOptionModel.prototype.assign=function(e){if("object"==typeof e)return Object(r.assign)(this.resource,e)},ViewOptionModel.SORT_ORDER_ASC="asc",ViewOptionModel.SORT_ORDER_DESC="desc",ViewOptionModel}())},beEA:function(e,t,n){"use strict";function stringSort(e,t){var n=String(e).toLowerCase(),r=String(t).toLowerCase();return n<r?-1:n>r?1:0}function numericalSort(e,t){return e-t}function naturalSort(e,t){var n,r,o,i,a=/(\d+)|(\D+)/g,l=/\d/,s=/^0/;if("number"==typeof e||"number"==typeof t)return isNaN(e)?1:isNaN(t)?-1:e-t;if((n=String(e).toLowerCase())===(r=String(t).toLowerCase()))return 0;if(!l.test(n)||!l.test(r))return n>r?1:-1;for(n=n.match(a),r=r.match(a);n.length&&r.length;)if((o=n.shift())!==(i=r.shift()))return l.test(o)&&l.test(i)?o.replace(s,".0")-i.replace(s,".0"):o>i?1:-1;return n.length-r.length}function nullToBottomSort(e,t){return(null===e)-(null===t)}n.d(t,"d",function(){return stringSort}),n.d(t,"c",function(){return numericalSort}),n.d(t,"a",function(){return naturalSort}),n.d(t,"b",function(){return nullToBottomSort})},buBu:function(e,t){e.exports='<div ng-if="!ctrl.runStatus.completed">\n  <p class="full-message">This report is currently being refreshed. You\'ll be able to share it once it completes.</p>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-link btn-success-hover btn-strong" ng-click="dismiss()">Close</button>\n  </div>\n</div>\n<form ng-if="ctrl.runStatus.completed" name="reportSlackMessageForm" ng-submit="ctrl.sendSlackMessage()">\n  <div class="modal-container clearfix">\n    <div class="channel" ng-mouseleave="ctrl.hideSlackTooltip()">\n      <label class="form-label first-form">Channel</label>\n      <i class="icon-info slack-info-tooltip-icon"\n                ng-mouseover="ctrl.showSlackTooltip()"\n                uib-tooltip-html="ctrl.slackShareHelpText"\n                tooltip-placement="bottom-left"\n                tooltip-trigger="none"\n                tooltip-is-open="ctrl.slackShareTooltipOpened"\n                tooltip-class="wrapping-tooltip slack-share-tooltip"></i>\n      <ui-select theme="bootstrap" ng-model="ctrl.selectedChannel" remove-selected="false">\n        <ui-select-match ng-click="ctrl.focusSlackChannelsInput()" placeholder="Select a channel">{{$select.selected.channelName}}</ui-select-match>\n        <ui-select-choices\n          repeat="item in (ctrl.slackChannels | filter: $select.search) track by $index"\n          refresh="ctrl.buildChannelsList($select)" refresh-delay="0">\n          <div ng-bind-html="item.channelName | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n    <div class="email-form-element">\n      <textarea class="form-control next-form-control" placeholder="Add a message" ng-model="ctrl.slackObject.message"></textarea>\n    </div>\n  </div>\n  <div class="modal-action-bar">\n    <div class="modal-action-bar-links"\n         ng-if="!ctrl.report.public && ctrl.schedulingEnabled">\n      <a href="#"\n        ng-click="ctrl.dismiss()"\n        schedules-modal\n        report="ctrl.report"\n        report-run="ctrl.reportRun"\n        owner="ctrl.owner"\n        account="ctrl.account">Create a schedule</a> to share this regularly.\n    </div>\n    <button type="submit" class="btn btn-lg btn-filled-primary">Send</button>\n  </div>\n</form>\n'},"c+0m":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZGlzY3JldGUtbnVtYmVyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Im1vY2t1cHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgICAgICAgPGcgaWQ9Im51bWJlci1kaXNjcmV0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS4wMDAwMDAsIDAuMDAwMDAwKSIgc3Ryb2tlPSIjMjdCOEQ5Ij4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuNTU1NTU1NTU2LDMuNSBMOS40NDQ0NDQ0NCwzLjUiIGlkPSJMaW5lIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC41NTU1NTU1NTYsNy41IEw5LjQ0NDQ0NDQ0LDcuNSIgaWQ9IkxpbmUtQ29weS0yNSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTQuMTQ5NjI2OTksMC4yNjY5OTE5OTggTDIuMzM2NzA2MzUsMTAuMjE5ODA4IiBpZD0iTGluZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDgyOTYwMzIsMC4yNjY5OTE5OTggTDUuNjcwMDM5NjgsMTAuMjE5ODA4IiBpZD0iTGluZS1Db3B5LTIyIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},"cM/6":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("lzv4");!function(e){var t=o.ModeResourceHelper.isResource;e.displayName=function(e){return e||"Untitled Report"},e.hasBeenRun=function(e){return t(e)&&!!e.last_run_at},e.isCommunity=function(e){return t(e)&&e.public},e.canEditReport=function(e){return t(e)&&e.hasForm("edit")},e.canCreateReportSchedule=function(e){return t(e)&&e.hasEmbedded("new_report_subscription")},e.canExportCsv=function(e){return t(e)&&e.hasLink("csv_export")},e.canSyncToGithub=function(e){return t(e)&&e.hasForm("sync_to_github")},e.canCreateSpaceLink=function(e){return t(e)&&e.hasEmbedded("new_space_link")},e.hasFilters=function(e){return t(e)&&e.hasLink("report_filters")},e.canDrilldown=function(e){return t(e)&&e.drilldowns_enabled},e.getGithubLink=function(e){return t(e)&&e.github_link}}(r||(r={}))},cRYW:function(e,t,n){"use strict";var r=n("PbPb");var o=n("om5q"),i=n("N0am"),a=n.n(i),l=n("beEA"),s=function(e,t,n){var o=n.value,i=void 0===o?null:o,a=n.formatter,l=void 0===a?null:a,s=n.rowLimit,c=void 0===s?e.length:s,d=n.memoize,u=void 0!==d&&d;return i="function"==typeof i?i:defaultValue,l="function"==typeof l?l:defaultFormatter,e.slice(0,c).reduce(function(e){var t=e.value,n=e.formatter,o=e.cols,i=e.memoize;return function(e,a,l){return e[String(l)]=o.reduce(function(e){var t=e.value,n=e.formatter,o=e.record,i=e.memoize;return function(e,a){var l=o[a],s=t(l,a),c=n(s(),a);return e[a]=function(e,t,n,o){var i=function(){return"number"==typeof t().valueOf()?"number":"string"};return o?{data:e,value:Object(r.memoize)(t),format:Object(r.memoize)(n),type:Object(r.memoize)(i)}:{data:e,value:t,format:n,type:i}}(l,s,c,i),e}}({value:t,formatter:n,record:a,memoize:i}),{}),e}}({value:i,formatter:l,cols:t,memoize:u}),{})};function defaultValue(e,t){return function(){return e}}function defaultFormatter(e,t){return function(){return e.valueOf()}}var c=function(){function StraightModel(e,t){void 0===t&&(t={});var n={columns:o.b(e),filter:function(){return!0},filterColumns:null,rowLimit:e.length,sorter:l.d,value:null,formatter:null,memoize:!1};this.__sortState={colIndex:null,order:null},this._settings=Object(r.assign)({},n,t),this._records=e,this.init()}return StraightModel.prototype.init=function(){var e=this.settings,t=e.value,n=e.formatter,r=e.rowLimit,o=e.memoize;this.initCols(),this._tree=s(this.records,this.cols(),{value:t,formatter:n,rowLimit:r,memoize:o}),this._rows=this.buildRows()},Object.defineProperty(StraightModel.prototype,"settings",{get:function(){return this._settings},enumerable:!0,configurable:!0}),StraightModel.prototype.initCols=function(){var e=this.settings,t=e.filterColumns,n=e.columns;this._cols=t?t.call(null,n):n},StraightModel.prototype.buildRows=function(e){void 0===e&&(e=null);var t=this.settings.rowLimit,n=this._tree;return Object.keys(n).slice(0,e||t)},Object.defineProperty(StraightModel.prototype,"records",{get:function(){return this._records},enumerable:!0,configurable:!0}),Object.defineProperty(StraightModel.prototype,"tree",{get:function(){return this._tree},enumerable:!0,configurable:!0}),StraightModel.prototype.cols=function(){return this._cols},StraightModel.prototype.rows=function(){return this._rows},StraightModel.prototype.selectColumn=function(e){var t=this;return Object(r.fromPairs)(e.map(function(e){return[e,Object(r.map)(t.records.slice(0,t.rowLimit()),e)]}))},StraightModel.prototype.sorter=function(){return this._settings.sorter},StraightModel.prototype.sorted=function(e,t){var n=this._sortState();return e===n.colIndex&&t===n.order},StraightModel.prototype._sortState=function(){return this.__sortState},StraightModel.prototype.filter=function(){return this._settings.filter()},StraightModel.prototype.rowLimit=function(){return this._settings.rowLimit},StraightModel.prototype.filterRows=function(e,t){void 0===t&&(t=!1);var n=this.tree,r=this.cols(),o=t?"":"i",i=new RegExp(a()(e.toString()),o);this._rows=this._rows.filter(function(e){return function(e,t){var o=n[e];return t.test(r.reduce(function(e,t){return e+":|:"+o[t].format()},""))}(e,i)})},StraightModel.prototype.sort=function(e,t){var n=this.tree,o=this.cols(),i=this.settings.sorter,a=o[e],l=i.bind(null,a,t);return a&&t&&(this.sorted(e,t)||(this._rows=this._rows.map(function(e){return{data:n[e][a].value(),rowKey:e}}).map(function(e,t){return[e,t]}).sort(function(e,n){if(/asc/i.test(t))var r=l(e[0],n[0]);else r=l(n[0],e[0]);return r||e[1]-n[1]}).map(function(e){var t=e[0];e[1];return t}).map(function(e){return e.rowKey}),Object(r.assign)(this.__sortState,{colIndex:e,order:t}))),this},StraightModel.prototype.toCollection=function(){var e=this.records;return this.rows().reduce(function(t,n){return t.push(e[n])&&t},[])},StraightModel}();var d=n("AEC+"),u=function(){function DatasetService(e){this.$q=e,this.dataset=null,this.datasets={},this.models={},this.datasets_raw=null,this.dismissed={}}return DatasetService.prototype.loadDataset=function(e){this.dataset=e},DatasetService.prototype.loadKeyedDatasets=function(e){this.datasets=e},DatasetService.prototype.loadRawDatasets=function(e){this.datasets_raw=e},DatasetService.prototype.addRawDataset=function(e){this.datasets_raw.indexOf(e)<0&&this.datasets_raw.push(e)},DatasetService.prototype.getDataset=function(){return this.dataset},DatasetService.prototype.getKeyedDatasets=function(){return this.datasets||{}},DatasetService.prototype.getRawDatasets=function(){return this.datasets_raw},DatasetService.prototype.getDatasetByKey=function(e){return this.getKeyedDatasets()[e]},DatasetService.prototype.getDatasetModel=function(e,t,n){var o=this;if(void 0===t&&(t={}),void 0===n&&(n=null),!e&&!n)throw new Error("No token or dataset provided");n=n||this.getDatasetByKey(e);var i=this.resolveColumnDataType.bind(this,e);return function(e,t){return void 0===t&&(t={}),new c(e,t)}(this.getStaticDatasetContent(n),Object(r.assign)({},{value:function(t,n){return function(){return o.getValue.call(o,t,o.resolveColumnDataType(e,n))}},columns:this.getStaticDatasetColumnMetaData(n).map(function(e){return e.name}),sorter:this.sortTable.bind(this,i)},t))},DatasetService.prototype.resolveColumnDataType=function(e,t){var n=this,r={number:"number",integer:"number",float:"number",real:"number",date:"date",datetime:"date"};return function(t){var o=n.columnDataType(e,t);return r[o]||"plain-text"}(t)},DatasetService.prototype.getStaticDatasetContent=function(e){return e.content},DatasetService.prototype.getStaticDatasetColumnMetaData=function(e){return e.columns},DatasetService.prototype.getDatasetContent=function(e){if(!this.hasContentFor(e))throw new Error("Dataset not available for given token");return this.getDatasetByKey(e).content},DatasetService.prototype.hasContentFor=function(e){var t=this.getKeyedDatasets()[e];return!(!t||!t.content||"succeeded"!==t.state)},DatasetService.prototype.hasFailed=function(e){var t=this.getDatasetByKey(e),n=this.getDatasetResource(e);return!!(n&&"failed"===n.state||t&&"failed"===t.state)},DatasetService.prototype.getValue=function(e,t){return{"plain-text":function(e){return new d.c(e)},date:function(e){return new d.a(e)},financial:function(e){return new d.b(e)},currency:function(e){return new d.b(e)},number:function(e){return new d.b(e)},percentage:function(e){return new d.b(e)}}[t](e)},DatasetService.prototype.sortTable=function(e,t,n,r,i){var a=r.data,s=i.data,c=function(e){return e.getTime?e.getTime():null},d=e(t),u=function(e){return Object(o.g)(l.b,e,n)},p={"plain-text":function(){return u(l.a)(a.toStringOrNull(),s.toStringOrNull())},date:function(){return u(l.c)(c(a.valueOf()),c(s.valueOf()))},number:function(){return u(l.c)(a.valueOrNull(),s.valueOrNull())},percentage:function(){return p.number()},financial:function(){return p.number()},currency:function(){return p.number()}};return(p[d]||p["plain-text"])()},DatasetService.prototype.getDatasetResource=function(e){return this.getDatasetByKey(e)&&this.getDatasetByKey(e)._resource},DatasetService.prototype.getDatasetState=function(e){var t=this.getDatasetByKey(e);return t?t.state?this.getDatasetByKey(e).state:this.getDatasetResource(e).state:""},DatasetService.prototype.get=function(){return console.warn("Deprecated method: please use DatasetService.getDataset() instead"),this.$q.when(this.dataset)},DatasetService.prototype.columnDataType=function(e,t){if(!this.hasContentFor(e))return null;var n=this.getDatasetByKey(e),o=Object(r.find)(n.columns,{name:t});return o?o.type:null},DatasetService.prototype.datasetIsTooLarge=function(e){return!this.hasContentFor(e)},DatasetService.prototype.datasetsAreExportable=function(e,t){return void 0===e&&(e=this.datasets),void 0===t&&(t=this.queryRuns),Object(r.some)(e,function(e){var n=t&&t[e.query_token]&&"succeeded"==t[e.query_token].state,r=e.count>0||e.oversized;return n&&r})},DatasetService.$inject=["$q"],DatasetService}();t.a=u},cvWV:function(e,t){e.exports='<div class="default-modal context-modal">\n  <h3 class="modal-header"><i class="icon-switch-gray-16 context-hd-icon"></i>Switch To&hellip;<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <ul class="context-list">\n    <li ng-if="ctrl.context === ctrl.account.token && ctrl.account[homeName] !== \'#\'">\n      <span class="context-avatar community-avatar"><i class="icon-community-blue-24"></i></span>\n      <h4>Mode Community</h4>\n      <p>Create and explore reports or learn SQL or Python in Mode\'s public analysis community.</p>\n      <div><a href="#" class="btn btn-secondary disabled btn-strong" disabled>Current</a>\n    </li>\n    <li ng-repeat="org in ctrl.organizations">\n      <mode-avatar options="org.avatar" size="25" class="context-avatar"></mode-avatar><h4>{{ org.name }}</h4>\n      <p>Create and edit reports from the <strong>{{ org.name }}</strong> organization.</p>\n      <div><a href="{{ org[homeName] }}" target="{{ ctrl.homeName !== \'newReportLink\' ? \'_self\' : \'_blank\' }}" rel="noopener" class="btn btn-secondary btn-strong" ng-disabled="ctrl.context === org.token">{{ ctrl.context === org.token ? \'Current\' : \'Switch\' }}</a></div>\n    </li>\n    <li ng-if="ctrl.context !== ctrl.account.token && ctrl.account[homeName] !== \'#\'">\n      <span class="context-avatar community-avatar"><i class="icon-community-blue-24"></i></span>\n      <h4>Mode Community</h4>\n      <p>Create and explore reports or learn SQL or Python in Mode\'s public analysis community.</p>\n      <div><a href="{{ ctrl.account[homeName] }}" target="{{ ctrl.homeName !== \'newReportLink\' ? \'_self\' : \'_blank\' }}" rel="noopener" class="btn btn-secondary btn-strong">Switch</a>\n    </li>\n    <li ng-if="ctrl.organizations.length === 0" class="context-message">\n      Switch to\n        <a\n          href="#"\n          confirm-modal="{{ ctrl.studioText }}"\n          confirm-modal-title="Switch to Mode Studio"\n          confirm-modal-button-confirm="Create Mode Studio workspace"\n          confirm-modal-button-cancel="Back"\n          confirm-modal-on-confirm="ctrl.gotoNewOrganization()"\n        >Mode Studio?\n        </a>\n    </li>\n    <li ng-if="ctrl.organizations.length > 0" class="context-message">\n       Need another\n      <a\n        href="#"\n        confirm-modal="{{ ctrl.orgText }}"\n        confirm-modal-title="Creating an Organization"\n        confirm-modal-button-confirm="Create New Organization"\n        confirm-modal-button-cancel="Back"\n        confirm-modal-on-confirm="ctrl.gotoNewOrganization()"\n      >Organization?</a>\n    </li>\n  </ul>\n</div>\n'},d6uO:function(e,t){e.exports='<div class="chart-accordion">\n  <div class="chart-nav">\n    <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n    <li ng-class="{active:accordion.chart}"><a ng-click="switchAccordion(\'chart\')">Data</a></li>\x3c!--\n    --\x3e<li ng-class="{active:accordion.format}"><a ng-click="switchAccordion(\'format\')">Format</a></li>\n    </ul>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.chart">\n    <div class="form-field">\n      <label class="axis-label">X-Axis</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.x" ng-options="column.name as column.name for column in columns.all" ng-change="updateXColumns()"></select>\n    </div>\n    <div class="form-field" ng-if="series.number.length">\n      <label class="axis-label">Y-Axis</label>\n      <select\n        multiselect-dropdown="bar-y"\n        class="multiselect"\n        classes="form-control form-control-sm"\n        block="true"\n        ng-multiple="true"\n        multiple="multiple"\n        ng-model="view.y"\n        ng-options="series.name as series.name for series in series.number"\n        ng-change="updateYColumns()">\n      </select>\n    </div>\n    <div class="form-field" ng-if="(view.y.length && (view.y.length < 2 || !view.g)) || !series.number.length">\n      <label class="axis-label">Aggregate</label>\n      <select ng-if="!view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" ng-model="view.aggregate" ng-change="aggregateChanged(view.aggregate)" ng-options="fn.value as fn.name for fn in ::aggregates" ng-change="updateSettings()"><option value="">None</option></select>\n      <select ng-if="view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" block="true" ng-model="view.gValueFn" ng-options="fn.value as fn.name for fn in ::aggregates" ng-change="updateSettings()"></select>\n    </div>\n    <div class="form-field" ng-if="(view.y.length && view.y.length < 2) || !series.number.length">\n      <label class="axis-label">Group By</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.g" ng-options="column.name as column.name for column in columns.grouped" ng-change="updateGroupBy()"><option value="">None</option></select>\n    </div>\n    <div class="form-field" ng-if="view.g && ((view.y.length && view.y.length < 2) || !series.number.length)">\n      <label class="axis-label">Selected</label>\n      <select\n        multiselect-dropdown="bar-f"\n        class="multiselect"\n        classes="form-control form-control-sm"\n        select-all="true"\n        select-all-text="All Series"\n        select-all-value="string:$mode-select-all$"\n        select-all-button-text="All Series"\n        block="true"\n        ng-multiple="true"\n        multiple="multiple"\n        ng-model="view.f"\n        ng-options="series.name as series.displayName for series in series.grouped"\n        ng-change="updateSettings()">\n      </select>\n    </div>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.format">\n    <h3 class="setting-title">X-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.xlabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field check-field" ng-if="view.y.length <= 1">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="xhideval" value="angle" ng-model="view.xhideval" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="xhideval">\n        Hide Bar Values\n        </label>\n      </span>\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Rotate Label</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xangle" ng-options="item.value as item.name for item in ::rotations" ng-change="updateSettings()">\n        <option value="">none</option>\n      </select>\n    </div>\n    <div class="clearfix">\n      <div class="half-width" ng-show="isNumType();">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width" ng-show="isNumType();">\n        <div class="form-field half-width-right">\n          <label class="axis-label">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="form-field" ng-show="isDateType();">\n      <label class="axis-label">Format</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::dateFormats" ng-change="updateSettings()">\n        <option value="">auto</option>\n      </select>\n    </div>\n    <h3 class="setting-title">Y-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.ylabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Range</label>\n      <input class="range-input form-control form-control-sm" placeholder="min" type="text" ng-model-options="{ updateOn: \'blur\' }" ng-model="tempYmin" ng-change="setYMin(true);" mode-enter /> to\n      <input class="form-control form-control-sm range-input pull-right" placeholder="max" type="text" ng-model="tempYmax" ng-model-options="{ updateOn: \'blur\' }" ng-change="setYMax(true)" mode-enter />\n    </div>\n    <div class="clearfix">\n      <div class="half-width">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width">\n        <div class="form-field half-width-right">\n          <label class="axis-label">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <h3 class="setting-title">Legend</h3>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="barhidelegend" value="hideLegend" ng-model="view.hideLegend" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="barhidelegend">\n        Hide Legend\n        </label>\n      </span>\n    </div>\n    <h3 class="setting-title">Color Palette</h3>\n    <div uib-dropdown class="advanced-theme dropdown dropup clearfix">\n      <a href="#" class="chart-toggle-container clearfix dropdown-toggle" uib-dropdown-toggle>\n        <div href="#" class="chart-toggle-theme">\n          <div class="angle" style="{{currentTheme}}"></div>\n          <i class="icon-double-carets pull-right"></i>\n        </div>\n      </a>\n      <ul uib-dropdown-menu class="dropdown-menu">\n        <li ng-repeat="color in ::themes">\n          <a href="javascript:void(0);" ng-click="setTheme(color.value);" class="checkbox-icon"><div class="swatches"><span class="swatch" style="background:{{color.color_0}}"></span><span class="swatch" style="background:{{color.color_1}}"></span><span class="swatch" style="background:{{color.color_2}}"></span><span class="swatch" style="background:{{color.color_3}}"></span><span class="swatch" style="background:{{color.color_4}}"></span></div>{{ color.name }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>'},d9Sl:function(e,t){e.exports='<div class="status-msg" ng-class="{\'status-warning\': ctrl.state === \'warning\', \'status-error\': ctrl.state === \'error\', \'status-success\': ctrl.state === \'success\', \'status-ready\': ctrl.state === \'ready\', \'status-running\': ctrl.state === \'running\', \'status-cancelled\': ctrl.state === \'cancelled\', \'status-loading\': ctrl.state === \'loading\', \'status-alert\': ctrl.state === \'alert\'}">\n  <div ng-if="ctrl.state === \'warning\'">\n    <i class="status-icon icon-warning-small"></i>\n    <span class="message" ng-transclude="warning"></span>\n  </div>\n  <div ng-if="ctrl.state === \'error\'">\n    <i class="status-icon icon-warning-small-inverted"></i>\n    <span class="message" ng-transclude="error"></span>\n  </div>\n  <div ng-if="ctrl.state === \'success\'">\n    <i class="status-icon success-success-check-color"></i>\n    <span class="message" ng-transclude="success"></span>\n  </div>\n  <div ng-if="ctrl.state === \'ready\'">\n    <i class="status-icon"><span class="ready-icon"></span></i>\n    <span class="message" ng-transclude="ready"></span>\n  </div>\n  <div ng-if="ctrl.state === \'cancelled\'">\n    <i class="status-icon icon-warning-small-inverted"></i>\n    <span class="message" ng-transclude="cancelled"></span>\n  </div>\n  <div ng-if="ctrl.state === \'alert\'">\n    <i class="status-icon"><span class="alert-status-icon"></span></i>\n    <span class="message" ng-transclude="alert"></span>\n  </div>\n  <div ng-if="ctrl.state === \'loading\'">\n    <span class="message" ng-transclude="loading"></span>\n  </div>\n  <div ng-if="ctrl.state === \'running\'">\n    <span class="message" ng-transclude="running"></span>\n  </div>\n  <status-loader\n    ng-if="ctrl.state === \'running\' || ctrl.state === \'loading\'"\n    created-at=""\n    pulse-only="true"\n    class="status-loader"\n    ng-class="{\'status-loading\': ctrl.state === \'loading\'}">\n  </status-loader>\n</div>'},dOaS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("0YuG"),o=(n.n(r),n("J631")),i=n.n(o);n("IU2V");r.module("mode.api").factory("ModeEntryPoint",["$q","$http","ModeAPI","ModeResource","$cacheFactory","$log",function(e,t,n,o,a,l){var s=a("mode.entry");return function(){function ModeEntryPoint(e,t){this.$initialize.apply(this,arguments)}return ModeEntryPoint.prototype.$initialize=function(e,t){this.path=t||$("meta[name="+e+"-entry-path]").attr("content")},ModeEntryPoint.prototype.$enter=function(a){var c=r.copy(a),d=n.stripIncludes(c),u=JSON.stringify(c)+JSON.stringify(d);if(r.isDefined(s.get(u)))return s.get(u);if(!r.isDefined(this.path))return e.reject(new Error("Not found"));var p=e.defer(),h=n.$expand(this.path),g=i()(h);l.debug("Entering API at",h,c);var m={method:"GET",url:g.fill(c)};return d&&(m.params=d),t(m).then(function(e){p.resolve(new o(e.data))},p.reject),s.put(u,p.promise)},ModeEntryPoint}()}])},"dsf/":function(e,t,n){"use strict";var r=n("+kJd"),o=n("AEC+"),i=n("om5q"),a=0;function number(e,t){var n,l,s;void 0===e&&(e=null);var c={precision:a,thousands:",",type:"number"==typeof t.precision?"f":"",symbol:!1},d=Object(i.a)({},c,t);return e&&(n=r.b(e)),d&&(l=Object(i.f)(d)),s=n?n.format(l):r.a(l),function(e){return o.d.isDirty(e)?null!==e.original()?e.original():"":s(e.valueOf())}}var l=2;function currency(e,t){void 0===e&&(e=null),void 0===t&&(t={});var n={precision:l,type:"f",symbol:!0};return number.call(null,e,Object(i.a)({},n,t))}var s=2;function financial(e,t){void 0===e&&(e=null),void 0===t&&(t={});var n={precision:s,sign:"(",type:"f",symbol:!0};return number.call(null,e,Object(i.a)({},n,t))}var c=0;function percentage(e,t){void 0===e&&(e=null),void 0===t&&(t={});var n={precision:c,type:"%",symbol:!1};return number.call(null,e,Object(i.a)({},n,t))}function string(){return function(e){return o.d.isDirty(e)?e&&null!==e.original()?String(e.original()):"":String(e.valueOf())}}var d=n("PbPb"),u=n("Zz1P"),p=n.n(u);function date_format_date(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=Object(d.assign)({},{ignoreTimezone:!1},t);return function(t){var r,i=function(e){return isAxelDate(e)?e.valueOf():e}(t),a=function(e){return isAxelDate(e)?e.original():isDate(e)?e.valueOf():null}(t);return function(e){return isAxelDate(e)?!o.d.isDirty(e):isDate(e)}(t)?n.ignoreTimezone?p()(i).format(e):"string"==typeof(r=a)&&-1===r.search(/[+-][0-9]{4}/)&&-1===r.search(/[+-][0-9]{2}:[0-9]{2}/)&&-1===r.search(/Z/)||"number"==typeof a?u.utc(i).format(e):u.utc(i).utcOffset(String(a)).format(e):null!==a?"Invalid Date":""}}function isAxelDate(e){return e instanceof o.a||"function"==typeof e.isDirty}function isDate(e){return e instanceof Date}function numberTruncate(){return function(e){var t=Number(e),n=t>=1e12,r=t>=1e9,o=t>=1e3,i=t>=1e6,a=function(e,t){return(e-e%t)/t+e%t/t},l=function(e,n){return t%e&&t%e!==t?t/(100*e)>=1?a(t,e).toFixed(0)+n:t/(10*e)>=1?a(t,e).toFixed(1)+n:t/e>=1?a(t,e).toFixed(1)+n:void 0:t/e+n};return t>=1e15?l(1e15,"Q"):n?l(1e12,"T"):r?l(1e9,"B"):i?l(1e6,"M"):o?l(1e3,"K"):t%1?t.toFixed(1):t}}function percentageTruncate(){return function(e){return numberTruncate()(100*Number(e))+"%"}}n.d(t,"a",function(){return currency}),n.d(t,"c",function(){return financial}),n.d(t,"d",function(){return number}),n.d(t,"f",function(){return percentage}),n.d(t,"h",function(){return string}),n.d(t,"b",function(){return date_format_date}),n.d(t,"e",function(){return numberTruncate}),n.d(t,"g",function(){return percentageTruncate})},efuI:function(e,t){e.exports='<div class="preview-settings">\n  <notebook-toolbar notebook-token="ctrl.notebook._resource.token" ng-if="ctrl.notebook._resource.token" session="ctrl.session$ | async:this"></notebook-toolbar>\n  <a class="sidebar-toggle" ng-click="ctrl.toggleSidebar()">\n    <i ng-class="(ctrl.sidebarOpen$ | async:this) ? \'icon-panel-collapse-right-default\' : \'icon-panel-collapse-left-default\'"></i>\n  </a>\n</div>\n<status-bar state="ctrl.notebookState$ | async:this" ng-class="{\'sidebar-offset\': (ctrl.sidebarOpen$ | async:this)}">\n  <warning>Notebook is having trouble, try running again</warning>\n  <error>{{ ctrl.notebookStateMessage$ | async:this }}<button ng-click="ctrl.restartSession()">Restart</button></error>\n  <alert>New query data is available<button ng-click="ctrl.loadReportRun()">Refresh</button></alert>\n  <running>Running</running>\n  <loading>{{ ctrl.notebookStateMessage$ | async:this }}</loading>\n  <ready>Ready</ready>\n</status-bar>\n<div class="python-notebook" ng-class="{\'with-secondary\': (ctrl.sidebarOpen$ | async:this)}" notebook-hotkeys resize-cells ng-if="ctrl.notebook._resource.token">\n  <div class="python-wrapper clearfix" ng-class="{\'python-hide\': !ctrl.initialized}">\n    <cell-group cell-token="cellToken" notebook-token="ctrl.notebook._resource.token" session="ctrl.session$ | async:this" ng-repeat="cellToken in (ctrl.cellTokens$ | async:this)"></cell-group>\n  </div>\n</div>'},emhp:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={NAMESPACE:"MODE",init:function(e){if(void 0===e&&(e={}),!e.scope)throw new Error("Scope undefined");var t=e.scope,n=e.linkProps||[];return r._initNS(t,r.NAMESPACE),r._linkProps(t,n),t},instance:function(e){void 0===e&&(e=null);var t=r._resolveScope(e);if(!t)throw new Error("Scope could not be resolved");return r._revealer(t[r.NAMESPACE])},_initNS:function(e,t){e[t]=e[t]||{}},_linkProps:function(e,t){t.length&&t.filter(function(t){return function(e){return null!=e}(t)&&function(t){return null!=e[t]}(t)}).forEach(function(t){e[r.NAMESPACE][t]=e[t]})},_revealer:function(e){return function(e){if(!e)throw new Error("No object provided");return{set:function(t,n){return e[t]=n},get:function(t){return e[t]}}}(e)},_resolveScope:function(e){return e||r._get_unsafe_window()||null},_get_unsafe_window:function(){return"undefined"!=typeof window?window:null}}},famc:function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="846px" height="342px" viewBox="0 0 846 342" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background: #FFFFFF;">\n    \x3c!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Categorical Preview</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="path-1" x="0" y="0" width="846" height="340" rx="2"></rect>\n        <filter x="-0.3%" y="-0.4%" width="100.6%" height="101.8%" filterUnits="objectBoundingBox" id="filter-2">\n            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="0.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.04 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="Style-Guide" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="categorical-0" ng-if="ctrl.paletteLength() === 0">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-82"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-83"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-16"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-17"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-18"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-19"></path>\n                </g>\n                <rect id="0" fill="#E4E7ED" x="100" y="84" width="40" height="215"></rect>\n                <rect id="0" fill="#E4E7ED" x="302" y="67" width="40" height="232"></rect>\n                <rect id="0" fill="#E4E7ED" x="504" y="116" width="40" height="183"></rect>\n                <rect id="0" fill="#E4E7ED" x="706" y="72" width="40" height="227"></rect>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <circle id="1" fill="#E4E7ED" cx="23" cy="44" r="5"></circle>\n                <polygon id="1" fill="#191925" points="35.76 47.865 35.76 40.946 34 42.211 34 41.32 35.826 40 36.717 40 36.717 47.865"></polygon>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-1" ng-if="ctrl.paletteLength() === 1">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)" fill="{{ctrl.paletteColorAtIndex(0)}}">\n                    <rect id="1" x="0" y="0" width="40" height="215"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)" fill="{{ctrl.paletteColorAtIndex(0)}}">\n                    <rect id="1" x="0" y="0" width="40" height="232"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)" fill="{{ctrl.paletteColorAtIndex(0)}}">\n                    <rect id="1" x="0" y="0" width="40" height="183"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)" fill="{{ctrl.paletteColorAtIndex(0)}}">\n                    <rect id="1" x="0" y="0" width="40" height="227"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-2" ng-if="ctrl.paletteLength() === 2">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="2" x="0" y="66" width="40" height="149" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="65" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="2" x="0" y="59" width="40" height="173" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="58" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="2" x="0" y="68" width="40" height="115" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="67" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="2" x="0" y="36" width="40" height="191" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="35" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-3" ng-if="ctrl.paletteLength() === 3">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="3" x="0" y="153" width="40" height="62" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="60" width="40" height="92" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="3" x="0" y="92" width="40" height="140" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="60" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="3" x="0" y="132" width="40" height="51" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="69" width="40" height="62" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="68" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="3" x="0" y="126" width="40" height="101" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="37" width="40" height="88" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="36" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-4" ng-if="ctrl.paletteLength() === 4">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="4" x="0" y="197" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="151" width="40" height="45" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="60" width="40" height="90" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="4" x="0" y="192" width="40" height="40" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="92" width="40" height="99" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="60" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="4" x="0" y="150" width="40" height="33" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="132" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="69" width="40" height="62" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="68" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="4" x="0" y="189" width="40" height="38" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="126" width="40" height="62" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="37" width="40" height="88" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="36" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-5" ng-if="ctrl.paletteLength() === 5">\n            <g id="Group-57">\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="5" x="0" y="203" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="174" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="114" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="60" width="40" height="53" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="5" x="0" y="216" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="126" width="40" height="89" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="102" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="60" width="40" height="41" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="5" x="0" y="150" width="40" height="33" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="138" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="97" width="40" height="40" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="69" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="68" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="5" x="0" y="189" width="40" height="38" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="141" width="40" height="47" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="72" width="40" height="68" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="37" width="40" height="34" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="36" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-6" ng-if="ctrl.paletteLength() === 6">\n            <g id="Group-57">\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="6" x="0" y="203" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="174" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="114" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="63" width="40" height="50" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="52" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="6" x="0" y="216" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="126" width="40" height="89" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="102" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="60" width="40" height="41" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="6" x="0" y="150" width="40" height="33" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="138" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="97" width="40" height="40" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="69" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="6" x="0" y="189" width="40" height="38" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="141" width="40" height="47" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="72" width="40" height="68" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="37" width="40" height="34" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}"cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-7" ng-if="ctrl.paletteLength() === 7">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="7" x="0" y="203" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="183" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="143" width="40" height="39" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="108" width="40" height="34" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="72" width="40" height="35" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="61" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="7" x="0" y="221" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="160" width="40" height="60" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="143" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="115" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="93" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="64" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="7" x="0" y="153" width="40" height="30" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="142" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="104" width="40" height="37" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="79" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="24" width="40" height="54" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="7" x="0" y="196" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="156" width="40" height="39" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="100" width="40" height="55" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="71" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="62" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="36" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-8" ng-if="ctrl.paletteLength() === 8">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="8" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="188" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="154" width="40" height="33" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="124" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="93" width="40" height="30" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="40" width="40" height="52" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="8" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="166" width="40" height="55" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="151" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="125" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="105" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="45" width="40" height="59" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="8" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="149" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="119" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="98" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="52" width="40" height="45" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="39" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="8" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="168" width="40" height="32" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="120" width="40" height="47" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="95" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="87" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="55" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}"cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-9" ng-if="ctrl.paletteLength() === 9">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="9" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="191" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="162" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="137" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="111" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="67" width="40" height="43" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="42" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="9" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="175" width="40" height="46" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="164" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="142" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="125" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="75" width="40" height="49" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="61" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="32" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="9" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="150" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="126" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="108" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="70" width="40" height="37" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="59" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="34" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="9" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="172" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="130" width="40" height="41" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="108" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="101" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="73" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="47" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-10" ng-if="ctrl.paletteLength() === 10">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="10" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="192" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="164" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="140" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="115" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="73" width="40" height="41" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="49" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="18" width="40" height="30" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="10" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="179" width="40" height="42" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="169" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="149" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="133" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="87" width="40" height="45" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="74" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="44" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="10" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="151" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="131" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="115" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="83" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="73" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="51" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="29" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="10" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="173" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="132" width="40" height="40" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="111" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="104" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="77" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="25" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="31" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="52" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-11" ng-if="ctrl.paletteLength() === 11">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="11" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="194" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="171" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="151" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="131" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="96" width="40" height="34" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="76" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="51" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="44" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="33" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="11" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="185" width="40" height="36" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="176" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="159" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="145" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="105" width="40" height="39" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="94" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="68" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="54" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="11" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="152" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="134" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="120" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="92" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="83" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="65" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="45" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="28" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="11" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="177" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="141" width="40" height="35" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="123" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="117" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="93" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="71" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="53" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="48" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}"cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}"cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-12" ng-if="ctrl.paletteLength() === 12">\n            <g id="Group-58">\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="12" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="197" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="179" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="164" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="148" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="120" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="105" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="85" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="79" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="52" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="41" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="12" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="190" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="182" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="167" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="155" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="122" width="40" height="32" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="112" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="89" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="77" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="54" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="12" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="152" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="138" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="125" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="99" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="91" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="72" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="53" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="37" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="19" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="12" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="179" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="147" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="130" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="124" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="102" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="82" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="65" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="60" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="39" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}"cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-13" ng-if="ctrl.paletteLength() === 13">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <g id="Group-54">\n                        <rect id="13" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                        <rect id="12" x="0" y="197" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                        <rect id="11" x="0" y="180" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                        <rect id="10" x="0" y="165" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                        <rect id="9" x="0" y="150" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                        <rect id="8" x="0" y="123" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                        <rect id="7" x="0" y="108" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                        <rect id="6" x="0" y="89" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                        <rect id="5" x="0" y="83" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                        <rect id="4" x="0" y="58" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                        <rect id="3" x="0" y="17" width="40" height="40" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                        <rect id="2" x="0" y="10" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                        <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                    </g>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="13" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="192" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="184" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="170" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="159" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="128" width="40" height="30" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="119" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="97" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="86" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="64" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="40" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="13" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="152" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="139" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="127" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="102" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="94" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="76" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="58" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="43" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="26" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="17" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="13" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="183" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="156" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="142" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="138" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="119" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="102" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="88" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="84" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="66" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="54" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}"cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-14" ng-if="ctrl.paletteLength() === 14">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="14" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="199" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="184" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="171" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="158" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="135" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="122" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="106" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="101" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="80" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="45" width="40" height="34" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="39" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="14" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="197" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="190" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="178" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="170" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="144" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="136" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="118" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="109" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="90" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="70" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="60" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="14" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="152" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="140" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="129" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="106" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="100" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="83" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="66" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="52" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="36" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="26" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="28" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="14" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="185" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="161" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="148" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="144" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="127" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="112" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="100" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="96" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="80" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="69" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="43" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}"cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                    <circle id="14" fill="{{ctrl.paletteColorAtIndex(13)}}" cx="512" cy="5" r="5"></circle>\n                    <path d="M524.76,8.865 L524.76,1.946 L523,3.211 L523,2.32 L524.826,1 L525.717,1 L525.717,8.865 L524.76,8.865 Z M531.393,8.865 L531.393,7.215 L527.455,7.215 L527.455,6.907 L531.052,1 L532.328,1 L532.328,6.434 L533.417,6.434 L533.417,7.215 L532.328,7.215 L532.328,8.865 L531.393,8.865 Z M528.665,6.434 L531.393,6.434 L531.393,1.726 L528.665,6.434 Z" id="14" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-15" ng-if="ctrl.paletteLength() === 15">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="15" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="199" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="186" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="173" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="160" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="138" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="125" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="110" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="105" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="85" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="51" width="40" height="33" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="45" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="17" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="15" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="199" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="193" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="182" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="175" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="151" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="144" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="127" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="119" width="40" height="7" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="102" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="84" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="75" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="46" width="40" height="28" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="17" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="15" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="153" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="143" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="133" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="113" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="108" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="93" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="78" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="66" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="52" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="47" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="41" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="29" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="15" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="186" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="164" width="40" height="21" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="152" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="148" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="132" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="118" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="107" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="103" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="88" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="78" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="54" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="37" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                    <circle id="14" fill="{{ctrl.paletteColorAtIndex(13)}}" cx="512" cy="5" r="5"></circle>\n                    <path d="M524.76,8.865 L524.76,1.946 L523,3.211 L523,2.32 L524.826,1 L525.717,1 L525.717,8.865 L524.76,8.865 Z M531.393,8.865 L531.393,7.215 L527.455,7.215 L527.455,6.907 L531.052,1 L532.328,1 L532.328,6.434 L533.417,6.434 L533.417,7.215 L532.328,7.215 L532.328,8.865 L531.393,8.865 Z M528.665,6.434 L531.393,6.434 L531.393,1.726 L528.665,6.434 Z" id="14" fill="#191925"></path>\n                    <circle id="15" fill="{{ctrl.paletteColorAtIndex(14)}}" cx="555" cy="5" r="5"></circle>\n                    <path d="M567.76,8.865 L567.76,1.946 L566,3.211 L566,2.32 L567.826,1 L568.717,1 L568.717,8.865 L567.76,8.865 Z M573.117,8.964 C572.302996,8.964 571.677836,8.76233535 571.2415,8.359 C570.805164,7.95566465 570.557667,7.41667004 570.499,6.742 L571.412,6.742 C571.5,7.21866905 571.664999,7.5798321 571.907,7.8255 C572.149001,8.0711679 572.548664,8.194 573.106,8.194 C573.641336,8.194 574.062998,8.02533502 574.371,7.688 C574.679002,7.35066498 574.833,6.88500297 574.833,6.291 C574.833,5.73366388 574.682668,5.28816833 574.382,4.9545 C574.081332,4.62083166 573.681669,4.454 573.183,4.454 C572.390996,4.454 571.771336,4.70699747 571.324,5.213 L570.972,5.213 L570.972,1 L575.394,1 L575.394,1.825 L571.764,1.825 L571.764,4.223 C572.152669,3.86366487 572.687997,3.684 573.37,3.684 C574.08867,3.684 574.675331,3.92049764 575.13,4.3935 C575.584669,4.86650237 575.812,5.49899604 575.812,6.291 C575.812,7.0976707 575.555336,7.74483089 575.042,8.2325 C574.528664,8.7201691 573.887004,8.964 573.117,8.964 Z" id="15" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-16" ng-if="ctrl.paletteLength() === 16">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="1" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="2" x="0" y="200" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="3" x="0" y="187" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="4" x="0" y="174" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="5" x="0" y="161" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="6" x="0" y="140" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="7" x="0" y="128" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="8" x="0" y="113" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="9" x="0" y="108" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="10" x="0" y="88" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="11" x="0" y="56" width="40" height="31" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="12" x="0" y="50" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="13" x="0" y="23" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="14" x="0" y="16" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="15" x="0" y="10" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="16" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="1" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="2" x="0" y="203" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="3" x="0" y="198" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="4" x="0" y="189" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="5" x="0" y="183" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="6" x="0" y="164" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="7" x="0" y="158" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="8" x="0" y="144" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="9" x="0" y="138" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="10" x="0" y="124" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="11" x="0" y="109" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="12" x="0" y="102" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="13" x="0" y="78" width="40" height="23" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="14" x="0" y="63" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="15" x="0" y="28" width="40" height="34" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="16" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="1" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="2" x="0" y="153" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="3" x="0" y="144" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="4" x="0" y="135" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="5" x="0" y="116" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="6" x="0" y="111" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="7" x="0" y="97" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="8" x="0" y="83" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="9" x="0" y="72" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="10" x="0" y="58" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="11" x="0" y="52" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="12" x="0" y="45" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="13" x="0" y="38" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="14" x="0" y="19" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="15" x="0" y="9" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="16" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)" fill="#E4E7ED">\n                    <rect id="1" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="2" x="0" y="188" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="3" x="0" y="169" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="4" x="0" y="158" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="5" x="0" y="154" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="6" x="0" y="140" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="7" x="0" y="128" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="8" x="0" y="118" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="9" x="0" y="114" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="10" x="0" y="101" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="11" x="0" y="92" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="12" x="0" y="71" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="13" x="0" y="56" width="40" height="14" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="14" x="0" y="45" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="15" x="0" y="25" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="16" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                    <circle id="14" fill="{{ctrl.paletteColorAtIndex(13)}}" cx="512" cy="5" r="5"></circle>\n                    <path d="M524.76,8.865 L524.76,1.946 L523,3.211 L523,2.32 L524.826,1 L525.717,1 L525.717,8.865 L524.76,8.865 Z M531.393,8.865 L531.393,7.215 L527.455,7.215 L527.455,6.907 L531.052,1 L532.328,1 L532.328,6.434 L533.417,6.434 L533.417,7.215 L532.328,7.215 L532.328,8.865 L531.393,8.865 Z M528.665,6.434 L531.393,6.434 L531.393,1.726 L528.665,6.434 Z" id="14" fill="#191925"></path>\n                    <circle id="15" fill="{{ctrl.paletteColorAtIndex(14)}}" cx="555" cy="5" r="5"></circle>\n                    <path d="M567.76,8.865 L567.76,1.946 L566,3.211 L566,2.32 L567.826,1 L568.717,1 L568.717,8.865 L567.76,8.865 Z M573.117,8.964 C572.302996,8.964 571.677836,8.76233535 571.2415,8.359 C570.805164,7.95566465 570.557667,7.41667004 570.499,6.742 L571.412,6.742 C571.5,7.21866905 571.664999,7.5798321 571.907,7.8255 C572.149001,8.0711679 572.548664,8.194 573.106,8.194 C573.641336,8.194 574.062998,8.02533502 574.371,7.688 C574.679002,7.35066498 574.833,6.88500297 574.833,6.291 C574.833,5.73366388 574.682668,5.28816833 574.382,4.9545 C574.081332,4.62083166 573.681669,4.454 573.183,4.454 C572.390996,4.454 571.771336,4.70699747 571.324,5.213 L570.972,5.213 L570.972,1 L575.394,1 L575.394,1.825 L571.764,1.825 L571.764,4.223 C572.152669,3.86366487 572.687997,3.684 573.37,3.684 C574.08867,3.684 574.675331,3.92049764 575.13,4.3935 C575.584669,4.86650237 575.812,5.49899604 575.812,6.291 C575.812,7.0976707 575.555336,7.74483089 575.042,8.2325 C574.528664,8.7201691 573.887004,8.964 573.117,8.964 Z" id="15" fill="#191925"></path>\n                    <circle id="16" fill="{{ctrl.paletteColorAtIndex(15)}}" cx="597" cy="5" r="5"></circle>\n                    <path d="M609.76,8.964 L609.76,2.045 L608,3.31 L608,2.419 L609.826,1.099 L610.717,1.099 L610.717,8.964 L609.76,8.964 Z M615.513,9.063 C614.992331,9.063 614.545002,8.97133425 614.171,8.788 C613.796998,8.60466575 613.503668,8.34433502 613.291,8.007 C613.078332,7.66966498 612.924334,7.29383541 612.829,6.8795 C612.733666,6.46516459 612.686,6.0013359 612.686,5.488 L612.686,5.301 C612.686,3.92232644 612.966497,2.86083706 613.5275,2.1165 C614.088503,1.37216295 614.834662,1 615.766,1 C616.389336,1 616.902665,1.16133172 617.306,1.484 C617.709335,1.80666828 617.962333,2.27966355 618.065,2.903 L617.152,2.903 C617.064,2.52166476 616.906334,2.23933425 616.679,2.056 C616.451666,1.87266575 616.125335,1.781 615.7,1.781 C615.09133,1.781 614.600002,2.05233062 614.226,2.595 C613.851998,3.13766938 613.654,3.91499494 613.632,4.927 C613.822668,4.60433172 614.095832,4.3458343 614.4515,4.1515 C614.807168,3.9571657 615.208664,3.86 615.656,3.86 C616.426004,3.86 617.047498,4.10566421 617.5205,4.597 C617.993502,5.08833579 618.23,5.700663 618.23,6.434 C618.23,7.22600396 617.984336,7.86216426 617.493,8.3425 C617.001664,8.82283573 616.341671,9.063 615.513,9.063 Z M615.513,8.315 C616.033669,8.315 616.453498,8.14633502 616.7725,7.809 C617.091502,7.47166498 617.251,7.02800275 617.251,6.478 C617.251,5.91333051 617.093335,5.4605017 616.778,5.1195 C616.462665,4.77849829 616.037336,4.608 615.502,4.608 C614.973997,4.608 614.541335,4.76933172 614.204,5.092 C613.866665,5.41466828 613.698,5.8326641 613.698,6.346 C613.698,6.96933645 613.864832,7.45333161 614.1985,7.798 C614.532168,8.14266839 614.970331,8.315 615.513,8.315 Z" id="16" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="categorical-17" ng-if="ctrl.paletteLength() === 17">\n            <g>\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-78"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-79"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-12"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-13"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-14"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-15"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="1" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="2" x="0" y="200" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="3" x="0" y="188" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="4" x="0" y="176" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="5" x="0" y="164" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="6" x="0" y="145" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="7" x="0" y="133" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="8" x="0" y="121" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="116" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="10" x="0" y="97" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="11" x="0" y="67" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="12" x="0" y="61" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="13" x="0" y="36" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="14" x="0" y="30" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="15" x="0" y="24" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="16" x="0" y="10" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="17" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="1" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="2" x="0" y="203" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="3" x="0" y="198" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="4" x="0" y="189" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="5" x="0" y="184" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="6" x="0" y="168" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="7" x="0" y="163" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="8" x="0" y="151" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="146" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="10" x="0" y="134" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="11" x="0" y="121" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="12" x="0" y="116" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="13" x="0" y="96" width="40" height="19" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="14" x="0" y="83" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="15" x="0" y="53" width="40" height="29" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="16" x="0" y="28" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="17" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="1" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="2" x="0" y="153" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="3" x="0" y="144" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="4" x="0" y="135" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="5" x="0" y="116" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="6" x="0" y="111" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="7" x="0" y="97" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="8" x="0" y="83" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="74" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="10" x="0" y="62" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="11" x="0" y="57" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="12" x="0" y="51" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="13" x="0" y="45" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="14" x="0" y="29" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="15" x="0" y="22" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="16" x="0" y="9" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="17" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="1" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="2" x="0" y="188" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="3" x="0" y="169" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="4" x="0" y="158" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="5" x="0" y="154" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="6" x="0" y="140" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="7" x="0" y="128" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="8" x="0" y="118" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="114" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="10" x="0" y="101" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="11" x="0" y="92" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="12" x="0" y="71" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="13" x="0" y="60" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="14" x="0" y="51" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="15" x="0" y="35" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="16" x="0" y="25" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="17" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" opacity="0.699999988" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                    <circle id="14" fill="{{ctrl.paletteColorAtIndex(13)}}" cx="512" cy="5" r="5"></circle>\n                    <path d="M524.76,8.865 L524.76,1.946 L523,3.211 L523,2.32 L524.826,1 L525.717,1 L525.717,8.865 L524.76,8.865 Z M531.393,8.865 L531.393,7.215 L527.455,7.215 L527.455,6.907 L531.052,1 L532.328,1 L532.328,6.434 L533.417,6.434 L533.417,7.215 L532.328,7.215 L532.328,8.865 L531.393,8.865 Z M528.665,6.434 L531.393,6.434 L531.393,1.726 L528.665,6.434 Z" id="14" fill="#191925"></path>\n                    <circle id="15" fill="{{ctrl.paletteColorAtIndex(14)}}" cx="555" cy="5" r="5"></circle>\n                    <path d="M567.76,8.865 L567.76,1.946 L566,3.211 L566,2.32 L567.826,1 L568.717,1 L568.717,8.865 L567.76,8.865 Z M573.117,8.964 C572.302996,8.964 571.677836,8.76233535 571.2415,8.359 C570.805164,7.95566465 570.557667,7.41667004 570.499,6.742 L571.412,6.742 C571.5,7.21866905 571.664999,7.5798321 571.907,7.8255 C572.149001,8.0711679 572.548664,8.194 573.106,8.194 C573.641336,8.194 574.062998,8.02533502 574.371,7.688 C574.679002,7.35066498 574.833,6.88500297 574.833,6.291 C574.833,5.73366388 574.682668,5.28816833 574.382,4.9545 C574.081332,4.62083166 573.681669,4.454 573.183,4.454 C572.390996,4.454 571.771336,4.70699747 571.324,5.213 L570.972,5.213 L570.972,1 L575.394,1 L575.394,1.825 L571.764,1.825 L571.764,4.223 C572.152669,3.86366487 572.687997,3.684 573.37,3.684 C574.08867,3.684 574.675331,3.92049764 575.13,4.3935 C575.584669,4.86650237 575.812,5.49899604 575.812,6.291 C575.812,7.0976707 575.555336,7.74483089 575.042,8.2325 C574.528664,8.7201691 573.887004,8.964 573.117,8.964 Z" id="15" fill="#191925"></path>\n                    <circle id="16" fill="{{ctrl.paletteColorAtIndex(15)}}" cx="597" cy="5" r="5"></circle>\n                    <path d="M609.76,8.964 L609.76,2.045 L608,3.31 L608,2.419 L609.826,1.099 L610.717,1.099 L610.717,8.964 L609.76,8.964 Z M615.513,9.063 C614.992331,9.063 614.545002,8.97133425 614.171,8.788 C613.796998,8.60466575 613.503668,8.34433502 613.291,8.007 C613.078332,7.66966498 612.924334,7.29383541 612.829,6.8795 C612.733666,6.46516459 612.686,6.0013359 612.686,5.488 L612.686,5.301 C612.686,3.92232644 612.966497,2.86083706 613.5275,2.1165 C614.088503,1.37216295 614.834662,1 615.766,1 C616.389336,1 616.902665,1.16133172 617.306,1.484 C617.709335,1.80666828 617.962333,2.27966355 618.065,2.903 L617.152,2.903 C617.064,2.52166476 616.906334,2.23933425 616.679,2.056 C616.451666,1.87266575 616.125335,1.781 615.7,1.781 C615.09133,1.781 614.600002,2.05233062 614.226,2.595 C613.851998,3.13766938 613.654,3.91499494 613.632,4.927 C613.822668,4.60433172 614.095832,4.3458343 614.4515,4.1515 C614.807168,3.9571657 615.208664,3.86 615.656,3.86 C616.426004,3.86 617.047498,4.10566421 617.5205,4.597 C617.993502,5.08833579 618.23,5.700663 618.23,6.434 C618.23,7.22600396 617.984336,7.86216426 617.493,8.3425 C617.001664,8.82283573 616.341671,9.063 615.513,9.063 Z M615.513,8.315 C616.033669,8.315 616.453498,8.14633502 616.7725,7.809 C617.091502,7.47166498 617.251,7.02800275 617.251,6.478 C617.251,5.91333051 617.093335,5.4605017 616.778,5.1195 C616.462665,4.77849829 616.037336,4.608 615.502,4.608 C614.973997,4.608 614.541335,4.76933172 614.204,5.092 C613.866665,5.41466828 613.698,5.8326641 613.698,6.346 C613.698,6.96933645 613.864832,7.45333161 614.1985,7.798 C614.532168,8.14266839 614.970331,8.315 615.513,8.315 Z" id="16" fill="#191925"></path>\n                    <circle id="17" fill="{{ctrl.paletteColorAtIndex(16)}}" cx="640" cy="5" r="5"></circle>\n                    <path d="M652.76,8.865 L652.76,1.946 L651,3.211 L651,2.32 L652.826,1 L653.717,1 L653.717,8.865 L652.76,8.865 Z M656.632,8.865 L659.371,1.77 L655.378,1.77 L655.378,1 L660.559,1 L660.559,1.132 L657.611,8.865 L656.632,8.865 Z" id="17" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="Categorical-18" ng-if="ctrl.paletteLength() === 18">\n            <g id="categorical-18">\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-75"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-76"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-8"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-9"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-10"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-11"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="18" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="200" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="188" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="176" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="164" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="145" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="133" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="121" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="116" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="97" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="72" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="67" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="48" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="43" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="38" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="27" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="16" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="18" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="203" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="198" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="189" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="184" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="168" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="163" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="151" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="146" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="137" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="125" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="120" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="101" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="89" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="61" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="38" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="18" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="153" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="144" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="135" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="116" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="111" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="97" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="83" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="74" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="62" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="57" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="51" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="46" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="37" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="32" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="23" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="18" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="188" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="169" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="158" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="154" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="140" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="128" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="118" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="114" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="101" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="92" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="78" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="71" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="64" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="53" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="46" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="20" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                    <circle id="14" fill="{{ctrl.paletteColorAtIndex(13)}}" cx="512" cy="5" r="5"></circle>\n                    <path d="M524.76,8.865 L524.76,1.946 L523,3.211 L523,2.32 L524.826,1 L525.717,1 L525.717,8.865 L524.76,8.865 Z M531.393,8.865 L531.393,7.215 L527.455,7.215 L527.455,6.907 L531.052,1 L532.328,1 L532.328,6.434 L533.417,6.434 L533.417,7.215 L532.328,7.215 L532.328,8.865 L531.393,8.865 Z M528.665,6.434 L531.393,6.434 L531.393,1.726 L528.665,6.434 Z" id="14" fill="#191925"></path>\n                    <circle id="15" fill="{{ctrl.paletteColorAtIndex(14)}}" cx="555" cy="5" r="5"></circle>\n                    <path d="M567.76,8.865 L567.76,1.946 L566,3.211 L566,2.32 L567.826,1 L568.717,1 L568.717,8.865 L567.76,8.865 Z M573.117,8.964 C572.302996,8.964 571.677836,8.76233535 571.2415,8.359 C570.805164,7.95566465 570.557667,7.41667004 570.499,6.742 L571.412,6.742 C571.5,7.21866905 571.664999,7.5798321 571.907,7.8255 C572.149001,8.0711679 572.548664,8.194 573.106,8.194 C573.641336,8.194 574.062998,8.02533502 574.371,7.688 C574.679002,7.35066498 574.833,6.88500297 574.833,6.291 C574.833,5.73366388 574.682668,5.28816833 574.382,4.9545 C574.081332,4.62083166 573.681669,4.454 573.183,4.454 C572.390996,4.454 571.771336,4.70699747 571.324,5.213 L570.972,5.213 L570.972,1 L575.394,1 L575.394,1.825 L571.764,1.825 L571.764,4.223 C572.152669,3.86366487 572.687997,3.684 573.37,3.684 C574.08867,3.684 574.675331,3.92049764 575.13,4.3935 C575.584669,4.86650237 575.812,5.49899604 575.812,6.291 C575.812,7.0976707 575.555336,7.74483089 575.042,8.2325 C574.528664,8.7201691 573.887004,8.964 573.117,8.964 Z" id="15" fill="#191925"></path>\n                    <circle id="16" fill="{{ctrl.paletteColorAtIndex(15)}}" cx="597" cy="5" r="5"></circle>\n                    <path d="M609.76,8.964 L609.76,2.045 L608,3.31 L608,2.419 L609.826,1.099 L610.717,1.099 L610.717,8.964 L609.76,8.964 Z M615.513,9.063 C614.992331,9.063 614.545002,8.97133425 614.171,8.788 C613.796998,8.60466575 613.503668,8.34433502 613.291,8.007 C613.078332,7.66966498 612.924334,7.29383541 612.829,6.8795 C612.733666,6.46516459 612.686,6.0013359 612.686,5.488 L612.686,5.301 C612.686,3.92232644 612.966497,2.86083706 613.5275,2.1165 C614.088503,1.37216295 614.834662,1 615.766,1 C616.389336,1 616.902665,1.16133172 617.306,1.484 C617.709335,1.80666828 617.962333,2.27966355 618.065,2.903 L617.152,2.903 C617.064,2.52166476 616.906334,2.23933425 616.679,2.056 C616.451666,1.87266575 616.125335,1.781 615.7,1.781 C615.09133,1.781 614.600002,2.05233062 614.226,2.595 C613.851998,3.13766938 613.654,3.91499494 613.632,4.927 C613.822668,4.60433172 614.095832,4.3458343 614.4515,4.1515 C614.807168,3.9571657 615.208664,3.86 615.656,3.86 C616.426004,3.86 617.047498,4.10566421 617.5205,4.597 C617.993502,5.08833579 618.23,5.700663 618.23,6.434 C618.23,7.22600396 617.984336,7.86216426 617.493,8.3425 C617.001664,8.82283573 616.341671,9.063 615.513,9.063 Z M615.513,8.315 C616.033669,8.315 616.453498,8.14633502 616.7725,7.809 C617.091502,7.47166498 617.251,7.02800275 617.251,6.478 C617.251,5.91333051 617.093335,5.4605017 616.778,5.1195 C616.462665,4.77849829 616.037336,4.608 615.502,4.608 C614.973997,4.608 614.541335,4.76933172 614.204,5.092 C613.866665,5.41466828 613.698,5.8326641 613.698,6.346 C613.698,6.96933645 613.864832,7.45333161 614.1985,7.798 C614.532168,8.14266839 614.970331,8.315 615.513,8.315 Z" id="16" fill="#191925"></path>\n                    <circle id="17" fill="{{ctrl.paletteColorAtIndex(16)}}" cx="640" cy="5" r="5"></circle>\n                    <path d="M652.76,8.865 L652.76,1.946 L651,3.211 L651,2.32 L652.826,1 L653.717,1 L653.717,8.865 L652.76,8.865 Z M656.632,8.865 L659.371,1.77 L655.378,1.77 L655.378,1 L660.559,1 L660.559,1.132 L657.611,8.865 L656.632,8.865 Z" id="17" fill="#191925"></path>\n                    <circle id="18" fill="{{ctrl.paletteColorAtIndex(17)}}" cx="682" cy="5" r="5"></circle>\n                    <path d="M694.76,8.964 L694.76,2.045 L693,3.31 L693,2.419 L694.826,1.099 L695.717,1.099 L695.717,8.964 L694.76,8.964 Z M700.37,9.063 C699.922664,9.063 699.497335,8.98050082 699.094,8.8155 C698.690665,8.65049917 698.349668,8.3846685 698.071,8.018 C697.792332,7.6513315 697.653,7.22233579 697.653,6.731 C697.653,6.22499747 697.788665,5.79966839 698.06,5.455 C698.331335,5.11033161 698.690664,4.85733414 699.138,4.696 C698.763998,4.5493326 698.472501,4.33300143 698.2635,4.047 C698.054499,3.76099857 697.95,3.42733524 697.95,3.046 C697.95,2.43733029 698.193831,1.94416856 698.6815,1.5665 C699.169169,1.18883144 699.731997,1 700.37,1 C701.008003,1 701.568998,1.18883144 702.053,1.5665 C702.537002,1.94416856 702.779,2.42999703 702.779,3.024 C702.779,3.77933711 702.375671,4.33299824 701.569,4.685 C702.573672,5.0516685 703.076,5.72632842 703.076,6.709 C703.076,7.44967037 702.806503,8.02716459 702.2675,8.4415 C701.728497,8.85583541 701.096004,9.063 700.37,9.063 Z M700.37,8.282 C700.876003,8.282 701.290332,8.14083474 701.613,7.8585 C701.935668,7.57616525 702.097,7.18200253 702.097,6.676 C702.097,6.17733084 701.935668,5.79233469 701.613,5.521 C701.290332,5.24966531 700.883336,5.114 700.392,5.114 C699.893331,5.114 699.475335,5.25333194 699.138,5.532 C698.800665,5.81066806 698.632,6.19933084 698.632,6.698 C698.632,7.18933579 698.800665,7.57616525 699.138,7.8585 C699.475335,8.14083474 699.885998,8.282 700.37,8.282 Z M700.403,4.355 C700.828335,4.355 701.169332,4.23766784 701.426,4.003 C701.682668,3.76833216 701.811,3.44566872 701.811,3.035 C701.811,2.66099813 701.673501,2.35300121 701.3985,2.111 C701.123499,1.86899879 700.780669,1.748 700.37,1.748 C699.951998,1.748 699.605501,1.86716547 699.3305,2.1055 C699.055499,2.34383452 698.918,2.66099802 698.918,3.057 C698.918,3.45300198 699.060999,3.76833216 699.347,4.003 C699.633001,4.23766784 699.984998,4.355 700.403,4.355 Z" id="18" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="Categorical-19" ng-if="ctrl.paletteLength() === 19">\n            <g id="categorical-19">\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 132.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-72"></path>\n                    <path d="M5.68434189e-14,83 L810,83" id="Line-Copy-73"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5-Copy-4"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy-5"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-6"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-7"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="19" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="200" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="188" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="176" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="164" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="145" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="133" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="121" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="116" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="97" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="72" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="67" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="48" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="43" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="38" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="27" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="16" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="10" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="19" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="203" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="198" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="189" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="184" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="168" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="163" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="151" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="146" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="137" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="125" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="120" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="101" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="89" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="61" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="38" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="33" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="28" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="19" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="153" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="144" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="135" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="116" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="111" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="97" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="83" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="74" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="62" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="57" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="51" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="46" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="37" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="32" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="23" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="14" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="19" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="188" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="169" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="158" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="154" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="140" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="128" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="118" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="114" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="101" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="92" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="78" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="71" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="64" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="53" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="46" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="32" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="25" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                    <circle id="14" fill="{{ctrl.paletteColorAtIndex(13)}}" cx="512" cy="5" r="5"></circle>\n                    <path d="M524.76,8.865 L524.76,1.946 L523,3.211 L523,2.32 L524.826,1 L525.717,1 L525.717,8.865 L524.76,8.865 Z M531.393,8.865 L531.393,7.215 L527.455,7.215 L527.455,6.907 L531.052,1 L532.328,1 L532.328,6.434 L533.417,6.434 L533.417,7.215 L532.328,7.215 L532.328,8.865 L531.393,8.865 Z M528.665,6.434 L531.393,6.434 L531.393,1.726 L528.665,6.434 Z" id="14" fill="#191925"></path>\n                    <circle id="15" fill="{{ctrl.paletteColorAtIndex(14)}}" cx="555" cy="5" r="5"></circle>\n                    <path d="M567.76,8.865 L567.76,1.946 L566,3.211 L566,2.32 L567.826,1 L568.717,1 L568.717,8.865 L567.76,8.865 Z M573.117,8.964 C572.302996,8.964 571.677836,8.76233535 571.2415,8.359 C570.805164,7.95566465 570.557667,7.41667004 570.499,6.742 L571.412,6.742 C571.5,7.21866905 571.664999,7.5798321 571.907,7.8255 C572.149001,8.0711679 572.548664,8.194 573.106,8.194 C573.641336,8.194 574.062998,8.02533502 574.371,7.688 C574.679002,7.35066498 574.833,6.88500297 574.833,6.291 C574.833,5.73366388 574.682668,5.28816833 574.382,4.9545 C574.081332,4.62083166 573.681669,4.454 573.183,4.454 C572.390996,4.454 571.771336,4.70699747 571.324,5.213 L570.972,5.213 L570.972,1 L575.394,1 L575.394,1.825 L571.764,1.825 L571.764,4.223 C572.152669,3.86366487 572.687997,3.684 573.37,3.684 C574.08867,3.684 574.675331,3.92049764 575.13,4.3935 C575.584669,4.86650237 575.812,5.49899604 575.812,6.291 C575.812,7.0976707 575.555336,7.74483089 575.042,8.2325 C574.528664,8.7201691 573.887004,8.964 573.117,8.964 Z" id="15" fill="#191925"></path>\n                    <circle id="16" fill="{{ctrl.paletteColorAtIndex(15)}}" cx="597" cy="5" r="5"></circle>\n                    <path d="M609.76,8.964 L609.76,2.045 L608,3.31 L608,2.419 L609.826,1.099 L610.717,1.099 L610.717,8.964 L609.76,8.964 Z M615.513,9.063 C614.992331,9.063 614.545002,8.97133425 614.171,8.788 C613.796998,8.60466575 613.503668,8.34433502 613.291,8.007 C613.078332,7.66966498 612.924334,7.29383541 612.829,6.8795 C612.733666,6.46516459 612.686,6.0013359 612.686,5.488 L612.686,5.301 C612.686,3.92232644 612.966497,2.86083706 613.5275,2.1165 C614.088503,1.37216295 614.834662,1 615.766,1 C616.389336,1 616.902665,1.16133172 617.306,1.484 C617.709335,1.80666828 617.962333,2.27966355 618.065,2.903 L617.152,2.903 C617.064,2.52166476 616.906334,2.23933425 616.679,2.056 C616.451666,1.87266575 616.125335,1.781 615.7,1.781 C615.09133,1.781 614.600002,2.05233062 614.226,2.595 C613.851998,3.13766938 613.654,3.91499494 613.632,4.927 C613.822668,4.60433172 614.095832,4.3458343 614.4515,4.1515 C614.807168,3.9571657 615.208664,3.86 615.656,3.86 C616.426004,3.86 617.047498,4.10566421 617.5205,4.597 C617.993502,5.08833579 618.23,5.700663 618.23,6.434 C618.23,7.22600396 617.984336,7.86216426 617.493,8.3425 C617.001664,8.82283573 616.341671,9.063 615.513,9.063 Z M615.513,8.315 C616.033669,8.315 616.453498,8.14633502 616.7725,7.809 C617.091502,7.47166498 617.251,7.02800275 617.251,6.478 C617.251,5.91333051 617.093335,5.4605017 616.778,5.1195 C616.462665,4.77849829 616.037336,4.608 615.502,4.608 C614.973997,4.608 614.541335,4.76933172 614.204,5.092 C613.866665,5.41466828 613.698,5.8326641 613.698,6.346 C613.698,6.96933645 613.864832,7.45333161 614.1985,7.798 C614.532168,8.14266839 614.970331,8.315 615.513,8.315 Z" id="16" fill="#191925"></path>\n                    <circle id="17" fill="{{ctrl.paletteColorAtIndex(16)}}" cx="640" cy="5" r="5"></circle>\n                    <path d="M652.76,8.865 L652.76,1.946 L651,3.211 L651,2.32 L652.826,1 L653.717,1 L653.717,8.865 L652.76,8.865 Z M656.632,8.865 L659.371,1.77 L655.378,1.77 L655.378,1 L660.559,1 L660.559,1.132 L657.611,8.865 L656.632,8.865 Z" id="17" fill="#191925"></path>\n                    <circle id="18" fill="{{ctrl.paletteColorAtIndex(17)}}" cx="682" cy="5" r="5"></circle>\n                    <path d="M694.76,8.964 L694.76,2.045 L693,3.31 L693,2.419 L694.826,1.099 L695.717,1.099 L695.717,8.964 L694.76,8.964 Z M700.37,9.063 C699.922664,9.063 699.497335,8.98050082 699.094,8.8155 C698.690665,8.65049917 698.349668,8.3846685 698.071,8.018 C697.792332,7.6513315 697.653,7.22233579 697.653,6.731 C697.653,6.22499747 697.788665,5.79966839 698.06,5.455 C698.331335,5.11033161 698.690664,4.85733414 699.138,4.696 C698.763998,4.5493326 698.472501,4.33300143 698.2635,4.047 C698.054499,3.76099857 697.95,3.42733524 697.95,3.046 C697.95,2.43733029 698.193831,1.94416856 698.6815,1.5665 C699.169169,1.18883144 699.731997,1 700.37,1 C701.008003,1 701.568998,1.18883144 702.053,1.5665 C702.537002,1.94416856 702.779,2.42999703 702.779,3.024 C702.779,3.77933711 702.375671,4.33299824 701.569,4.685 C702.573672,5.0516685 703.076,5.72632842 703.076,6.709 C703.076,7.44967037 702.806503,8.02716459 702.2675,8.4415 C701.728497,8.85583541 701.096004,9.063 700.37,9.063 Z M700.37,8.282 C700.876003,8.282 701.290332,8.14083474 701.613,7.8585 C701.935668,7.57616525 702.097,7.18200253 702.097,6.676 C702.097,6.17733084 701.935668,5.79233469 701.613,5.521 C701.290332,5.24966531 700.883336,5.114 700.392,5.114 C699.893331,5.114 699.475335,5.25333194 699.138,5.532 C698.800665,5.81066806 698.632,6.19933084 698.632,6.698 C698.632,7.18933579 698.800665,7.57616525 699.138,7.8585 C699.475335,8.14083474 699.885998,8.282 700.37,8.282 Z M700.403,4.355 C700.828335,4.355 701.169332,4.23766784 701.426,4.003 C701.682668,3.76833216 701.811,3.44566872 701.811,3.035 C701.811,2.66099813 701.673501,2.35300121 701.3985,2.111 C701.123499,1.86899879 700.780669,1.748 700.37,1.748 C699.951998,1.748 699.605501,1.86716547 699.3305,2.1055 C699.055499,2.34383452 698.918,2.66099802 698.918,3.057 C698.918,3.45300198 699.060999,3.76833216 699.347,4.003 C699.633001,4.23766784 699.984998,4.355 700.403,4.355 Z" id="18" fill="#191925"></path>\n                    <circle id="19" fill="{{ctrl.paletteColorAtIndex(18)}}" cx="725" cy="5" r="5"></circle>\n                    <path d="M737.76,8.975 L737.76,2.056 L736,3.321 L736,2.43 L737.826,1.11 L738.717,1.11 L738.717,8.975 L737.76,8.975 Z M743.216,9.063 C742.49733,9.063 741.921669,8.88516845 741.489,8.5295 C741.056331,8.17383156 740.788667,7.67700319 740.686,7.039 L741.61,7.039 C741.705334,7.44966872 741.879499,7.75949896 742.1325,7.9685 C742.385501,8.17750105 742.753998,8.282 743.238,8.282 C743.876003,8.282 744.369165,8.01983596 744.7175,7.4955 C745.065835,6.97116405 745.243667,6.19200517 745.251,5.158 C745.060332,5.48066828 744.785335,5.73549907 744.426,5.9225 C744.066665,6.10950094 743.663336,6.203 743.216,6.203 C742.45333,6.203 741.831836,5.96100242 741.3515,5.477 C740.871164,4.99299758 740.631,4.37700374 740.631,3.629 C740.631,2.83699604 740.876664,2.20083574 741.368,1.7205 C741.859336,1.24016427 742.519329,1 743.348,1 C744.272005,1 744.974164,1.30249698 745.4545,1.9075 C745.934836,2.51250303 746.175,3.38332765 746.175,4.52 L746.175,5.015 C746.175,6.31300649 745.918336,7.31216317 745.405,8.0125 C744.891664,8.71283684 744.162005,9.063 743.216,9.063 Z M743.359,5.455 C743.887003,5.455 744.319665,5.29733491 744.657,4.982 C744.994335,4.66666509 745.163,4.25600253 745.163,3.75 C745.163,3.11933018 744.996168,2.62800176 744.6625,2.276 C744.328832,1.92399824 743.890669,1.748 743.348,1.748 C742.827331,1.748 742.407502,1.91666498 742.0885,2.254 C741.769498,2.59133502 741.61,3.03499725 741.61,3.585 C741.61,4.14966949 741.767665,4.6024983 742.083,4.9435 C742.398335,5.28450171 742.823664,5.455 743.359,5.455 Z" id="19" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n        <g id="Categorical-20" ng-if="ctrl.paletteLength() === 20">\n            <g id="categorical-20">\n                <g id="chart-container">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use>\n                    <rect stroke="#E4E7ED" stroke-width="1" x="0.5" y="0.5" width="845" height="339" rx="2"></rect>\n                </g>\n                <g id="axes-lines" transform="translate(18.000000, 130.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M5.68434189e-14,1 L810,1" id="Line-Copy-3"></path>\n                    <path d="M5.68434189e-14,85 L810,85" id="Line-Copy-4"></path>\n                </g>\n                <g id="label-markers" transform="translate(119.000000, 300.000000)" stroke="#F1F2F5" stroke-linecap="square">\n                    <path d="M1,0 L1,12" id="Line-5"></path>\n                    <path d="M203,0 L203,12" id="Line-5-Copy"></path>\n                    <path d="M405,0 L405,12" id="Line-5-Copy-2"></path>\n                    <path d="M607,0 L607,12" id="Line-5-Copy-3"></path>\n                </g>\n                <g id="bar-1" transform="translate(100.000000, 84.000000)">\n                    <rect id="20" x="0" y="205" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(19)}}"></rect>\n                    <rect id="19" x="0" y="200" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="188" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="176" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="164" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="145" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="133" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="121" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="116" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="97" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="72" width="40" height="24" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="67" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="48" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="43" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="38" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="27" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="16" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="10" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="5" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-2" transform="translate(302.000000, 67.000000)">\n                    <rect id="20" x="0" y="222" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(19)}}"></rect>\n                    <rect id="19" x="0" y="203" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="198" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="189" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="184" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="168" width="40" height="15" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="163" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="151" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="146" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="137" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="125" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="120" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="101" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="89" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="61" width="40" height="27" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="38" width="40" height="22" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="33" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="28" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="9" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-3" transform="translate(504.000000, 116.000000)">\n                    <rect id="20" x="0" y="158" width="40" height="25" fill="{{ctrl.paletteColorAtIndex(19)}}"></rect>\n                    <rect id="19" x="0" y="153" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="144" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="135" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="116" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="111" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="97" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="83" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="74" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="62" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="57" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="51" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="46" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="37" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="32" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="23" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="14" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="9" width="40" height="4" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="6" width="40" height="2" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="5" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <g id="bar-4" transform="translate(706.000000, 72.000000)">\n                    <rect id="20" x="0" y="201" width="40" height="26" fill="{{ctrl.paletteColorAtIndex(19)}}"></rect>\n                    <rect id="19" x="0" y="188" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(18)}}"></rect>\n                    <rect id="18" x="0" y="169" width="40" height="18" fill="{{ctrl.paletteColorAtIndex(17)}}"></rect>\n                    <rect id="17" x="0" y="158" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(16)}}"></rect>\n                    <rect id="16" x="0" y="154" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(15)}}"></rect>\n                    <rect id="15" x="0" y="140" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(14)}}"></rect>\n                    <rect id="14" x="0" y="128" width="40" height="11" fill="{{ctrl.paletteColorAtIndex(13)}}"></rect>\n                    <rect id="13" x="0" y="118" width="40" height="9" fill="{{ctrl.paletteColorAtIndex(12)}}"></rect>\n                    <rect id="12" x="0" y="114" width="40" height="3" fill="{{ctrl.paletteColorAtIndex(11)}}"></rect>\n                    <rect id="11" x="0" y="101" width="40" height="12" fill="{{ctrl.paletteColorAtIndex(10)}}"></rect>\n                    <rect id="10" x="0" y="92" width="40" height="8" fill="{{ctrl.paletteColorAtIndex(9)}}"></rect>\n                    <rect id="9" x="0" y="78" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(8)}}"></rect>\n                    <rect id="8" x="0" y="71" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(7)}}"></rect>\n                    <rect id="7" x="0" y="64" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(6)}}"></rect>\n                    <rect id="6" x="0" y="53" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(5)}}"></rect>\n                    <rect id="5" x="0" y="46" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(4)}}"></rect>\n                    <rect id="4" x="0" y="32" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(3)}}"></rect>\n                    <rect id="3" x="0" y="25" width="40" height="6" fill="{{ctrl.paletteColorAtIndex(2)}}"></rect>\n                    <rect id="2" x="0" y="11" width="40" height="13" fill="{{ctrl.paletteColorAtIndex(1)}}"></rect>\n                    <rect id="1" x="0" y="0" width="40" height="10" fill="{{ctrl.paletteColorAtIndex(0)}}"></rect>\n                </g>\n                <path d="M18,299 L828,299" id="bottom-line" stroke="#F1F2F5" stroke-linecap="square"></path>\n                <g id="legend" transform="translate(18.000000, 39.000000)">\n                    <circle id="1" fill="{{ctrl.paletteColorAtIndex(0)}}" cx="5" cy="5" r="5"></circle>\n                    <polygon id="1" fill="#191925" points="17.76 8.865 17.76 1.946 16 3.211 16 2.32 17.826 1 18.717 1 18.717 8.865"></polygon>\n                    <circle id="2" fill="{{ctrl.paletteColorAtIndex(1)}}" cx="40" cy="5" r="5"></circle>\n                    <path d="M51,8.964 L51,8.744 L54.124,5.455 C54.8793371,4.65566267 55.257,3.89667026 55.257,3.178 C55.257,2.7379978 55.1341679,2.39333458 54.8885,2.144 C54.6428321,1.89466542 54.2963356,1.77 53.849,1.77 C52.8883285,1.77 52.3346674,2.35299417 52.188,3.519 L51.297,3.519 C51.355667,2.74166278 51.6104977,2.12750225 52.0615,1.6765 C52.5125023,1.22549775 53.1083296,1 53.849,1 C54.5750036,1 55.1524979,1.19983133 55.5815,1.5995 C56.0105021,1.99916867 56.225,2.53632996 56.225,3.211 C56.225,4.08367103 55.6970053,5.03699483 54.641,6.071 L52.474,8.183 L56.269,8.183 L56.269,8.964 L51,8.964 Z" id="2" fill="#191925"></path>\n                    <circle id="3" fill="{{ctrl.paletteColorAtIndex(2)}}" cx="78" cy="5" r="5"></circle>\n                    <path d="M91.75,9.063 C90.9359959,9.063 90.2815025,8.83566894 89.7865,8.381 C89.2914975,7.92633106 89.0293335,7.34700352 89,6.643 L89.88,6.643 C89.9240002,7.14166916 90.1018318,7.54133183 90.4135,7.842 C90.7251682,8.14266817 91.177997,8.293 91.772,8.293 C92.3733363,8.293 92.8224985,8.159168 93.1195,7.8915 C93.4165015,7.62383199 93.565,7.25166905 93.565,6.775 C93.565,5.75566157 93.0113389,5.246 91.904,5.246 L91.31,5.246 L91.31,4.443 L91.86,4.443 C92.8426716,4.443 93.334,3.99567114 93.334,3.101 C93.334,2.71233139 93.2111679,2.39516789 92.9655,2.1495 C92.7198321,1.90383211 92.3660023,1.781 91.904,1.781 C91.4199976,1.781 91.0221682,1.91666531 90.7105,2.188 C90.3988318,2.45933469 90.2173336,2.81866443 90.166,3.266 L89.33,3.266 C89.3593335,2.62799681 89.6123309,2.09083551 90.089,1.6545 C90.565669,1.21816448 91.170663,1 91.904,1 C92.6226703,1 93.1964979,1.20349796 93.6255,1.6105 C94.0545021,2.01750203 94.269,2.50699714 94.269,3.079 C94.269,3.87833733 93.8546708,4.45033161 93.026,4.795 C93.502669,4.91966729 93.874832,5.14883167 94.1425,5.4825 C94.410168,5.81616833 94.544,6.24699736 94.544,6.775 C94.544,7.47900352 94.2855026,8.03633128 93.7685,8.447 C93.2514974,8.85766872 92.5786708,9.063 91.75,9.063 Z" id="3" fill="#191925"></path>\n                    <circle id="4" fill="{{ctrl.paletteColorAtIndex(3)}}" cx="116" cy="5" r="5"></circle>\n                    <path d="M130.938,8.865 L130.938,7.215 L127,7.215 L127,6.907 L130.597,1 L131.873,1 L131.873,6.434 L132.962,6.434 L132.962,7.215 L131.873,7.215 L131.873,8.865 L130.938,8.865 Z M128.21,6.434 L130.938,6.434 L130.938,1.726 L128.21,6.434 Z" id="4" fill="#191925"></path>\n                    <circle id="5" fill="{{ctrl.paletteColorAtIndex(4)}}" cx="154" cy="5" r="5"></circle>\n                    <path d="M167.618,8.964 C166.803996,8.964 166.178836,8.76233535 165.7425,8.359 C165.306164,7.95566465 165.058667,7.41667004 165,6.742 L165.913,6.742 C166.001,7.21866905 166.165999,7.5798321 166.408,7.8255 C166.650001,8.0711679 167.049664,8.194 167.607,8.194 C168.142336,8.194 168.563998,8.02533502 168.872,7.688 C169.180002,7.35066498 169.334,6.88500297 169.334,6.291 C169.334,5.73366388 169.183668,5.28816833 168.883,4.9545 C168.582332,4.62083166 168.182669,4.454 167.684,4.454 C166.891996,4.454 166.272336,4.70699747 165.825,5.213 L165.473,5.213 L165.473,1 L169.895,1 L169.895,1.825 L166.265,1.825 L166.265,4.223 C166.653669,3.86366487 167.188997,3.684 167.871,3.684 C168.58967,3.684 169.176331,3.92049764 169.631,4.3935 C170.085669,4.86650237 170.313,5.49899604 170.313,6.291 C170.313,7.0976707 170.056336,7.74483089 169.543,8.2325 C169.029664,8.7201691 168.388004,8.964 167.618,8.964 Z" id="5" fill="#191925"></path>\n                    <circle id="6" fill="{{ctrl.paletteColorAtIndex(5)}}" cx="192" cy="5" r="5"></circle>\n                    <path d="M205.827,9.063 C205.306331,9.063 204.859002,8.97133425 204.485,8.788 C204.110998,8.60466575 203.817668,8.34433502 203.605,8.007 C203.392332,7.66966498 203.238334,7.29383541 203.143,6.8795 C203.047666,6.46516459 203,6.0013359 203,5.488 L203,5.301 C203,3.92232644 203.280497,2.86083706 203.8415,2.1165 C204.402503,1.37216295 205.148662,1 206.08,1 C206.703336,1 207.216665,1.16133172 207.62,1.484 C208.023335,1.80666828 208.276333,2.27966355 208.379,2.903 L207.466,2.903 C207.378,2.52166476 207.220334,2.23933425 206.993,2.056 C206.765666,1.87266575 206.439335,1.781 206.014,1.781 C205.40533,1.781 204.914002,2.05233062 204.54,2.595 C204.165998,3.13766938 203.968,3.91499494 203.946,4.927 C204.136668,4.60433172 204.409832,4.3458343 204.7655,4.1515 C205.121168,3.9571657 205.522664,3.86 205.97,3.86 C206.740004,3.86 207.361498,4.10566421 207.8345,4.597 C208.307502,5.08833579 208.544,5.700663 208.544,6.434 C208.544,7.22600396 208.298336,7.86216426 207.807,8.3425 C207.315664,8.82283573 206.655671,9.063 205.827,9.063 Z M205.827,8.315 C206.347669,8.315 206.767498,8.14633502 207.0865,7.809 C207.405502,7.47166498 207.565,7.02800275 207.565,6.478 C207.565,5.91333051 207.407335,5.4605017 207.092,5.1195 C206.776665,4.77849829 206.351336,4.608 205.816,4.608 C205.287997,4.608 204.855335,4.76933172 204.518,5.092 C204.180665,5.41466828 204.012,5.8326641 204.012,6.346 C204.012,6.96933645 204.178832,7.45333161 204.5125,7.798 C204.846168,8.14266839 205.284331,8.315 205.827,8.315 Z" id="6" fill="#191925"></path>\n                    <circle id="7" fill="{{ctrl.paletteColorAtIndex(6)}}" cx="230" cy="5" r="5"></circle>\n                    <polygon id="7" fill="#191925" points="242.254 8.865 244.993 1.77 241 1.77 241 1 246.181 1 246.181 1.132 243.233 8.865"></polygon>\n                    <circle id="8" fill="{{ctrl.paletteColorAtIndex(7)}}" cx="268" cy="5" r="5"></circle>\n                    <path d="M281.717,9.063 C281.269664,9.063 280.844335,8.98050082 280.441,8.8155 C280.037665,8.65049917 279.696668,8.3846685 279.418,8.018 C279.139332,7.6513315 279,7.22233579 279,6.731 C279,6.22499747 279.135665,5.79966839 279.407,5.455 C279.678335,5.11033161 280.037664,4.85733414 280.485,4.696 C280.110998,4.5493326 279.819501,4.33300143 279.6105,4.047 C279.401499,3.76099857 279.297,3.42733524 279.297,3.046 C279.297,2.43733029 279.540831,1.94416856 280.0285,1.5665 C280.516169,1.18883144 281.078997,1 281.717,1 C282.355003,1 282.915998,1.18883144 283.4,1.5665 C283.884002,1.94416856 284.126,2.42999703 284.126,3.024 C284.126,3.77933711 283.722671,4.33299824 282.916,4.685 C283.920672,5.0516685 284.423,5.72632842 284.423,6.709 C284.423,7.44967037 284.153503,8.02716459 283.6145,8.4415 C283.075497,8.85583541 282.443004,9.063 281.717,9.063 Z M281.717,8.282 C282.223003,8.282 282.637332,8.14083474 282.96,7.8585 C283.282668,7.57616525 283.444,7.18200253 283.444,6.676 C283.444,6.17733084 283.282668,5.79233469 282.96,5.521 C282.637332,5.24966531 282.230336,5.114 281.739,5.114 C281.240331,5.114 280.822335,5.25333194 280.485,5.532 C280.147665,5.81066806 279.979,6.19933084 279.979,6.698 C279.979,7.18933579 280.147665,7.57616525 280.485,7.8585 C280.822335,8.14083474 281.232998,8.282 281.717,8.282 Z M281.75,4.355 C282.175335,4.355 282.516332,4.23766784 282.773,4.003 C283.029668,3.76833216 283.158,3.44566872 283.158,3.035 C283.158,2.66099813 283.020501,2.35300121 282.7455,2.111 C282.470499,1.86899879 282.127669,1.748 281.717,1.748 C281.298998,1.748 280.952501,1.86716547 280.6775,2.1055 C280.402499,2.34383452 280.265,2.66099802 280.265,3.057 C280.265,3.45300198 280.407999,3.76833216 280.694,4.003 C280.980001,4.23766784 281.331998,4.355 281.75,4.355 Z" id="8" fill="#191925"></path>\n                    <circle id="9" fill="{{ctrl.paletteColorAtIndex(8)}}" cx="306" cy="5" r="5"></circle>\n                    <path d="M319.585,9.063 C318.86633,9.063 318.290669,8.88516845 317.858,8.5295 C317.425331,8.17383156 317.157667,7.67700319 317.055,7.039 L317.979,7.039 C318.074334,7.44966872 318.248499,7.75949896 318.5015,7.9685 C318.754501,8.17750105 319.122998,8.282 319.607,8.282 C320.245003,8.282 320.738165,8.01983596 321.0865,7.4955 C321.434835,6.97116405 321.612667,6.19200517 321.62,5.158 C321.429332,5.48066828 321.154335,5.73549907 320.795,5.9225 C320.435665,6.10950094 320.032336,6.203 319.585,6.203 C318.82233,6.203 318.200836,5.96100242 317.7205,5.477 C317.240164,4.99299758 317,4.37700374 317,3.629 C317,2.83699604 317.245664,2.20083574 317.737,1.7205 C318.228336,1.24016427 318.888329,1 319.717,1 C320.641005,1 321.343164,1.30249698 321.8235,1.9075 C322.303836,2.51250303 322.544,3.38332765 322.544,4.52 L322.544,5.015 C322.544,6.31300649 322.287336,7.31216317 321.774,8.0125 C321.260664,8.71283684 320.531005,9.063 319.585,9.063 Z M319.728,5.455 C320.256003,5.455 320.688665,5.29733491 321.026,4.982 C321.363335,4.66666509 321.532,4.25600253 321.532,3.75 C321.532,3.11933018 321.365168,2.62800176 321.0315,2.276 C320.697832,1.92399824 320.259669,1.748 319.717,1.748 C319.196331,1.748 318.776502,1.91666498 318.4575,2.254 C318.138498,2.59133502 317.979,3.03499725 317.979,3.585 C317.979,4.14966949 318.136665,4.6024983 318.452,4.9435 C318.767335,5.28450171 319.192664,5.455 319.728,5.455 Z" id="9" fill="#191925"></path>\n                    <circle id="10" fill="{{ctrl.paletteColorAtIndex(9)}}" cx="344" cy="5" r="5"></circle>\n                    <path d="M356.76,8.964 L356.76,2.045 L355,3.31 L355,2.419 L356.826,1.099 L357.717,1.099 L357.717,8.964 L356.76,8.964 Z M362.81,8.271 C363.492003,8.271 364.008998,8.01250259 364.361,7.4955 C364.713002,6.97849741 364.889,6.22133832 364.889,5.224 L364.889,4.784 C364.889,3.85999538 364.703835,3.12666938 364.3335,2.584 C363.963165,2.04133062 363.448003,1.77 362.788,1.77 C362.120663,1.77 361.600002,2.03583068 361.226,2.5675 C360.851998,3.09916932 360.665,3.84532853 360.665,4.806 L360.665,5.246 C360.665,6.22133821 360.855665,6.96933073 361.237,7.49 C361.618335,8.01066927 362.142663,8.271 362.81,8.271 Z M362.81,9.063 C361.871329,9.063 361.116003,8.71467015 360.544,8.018 C359.971997,7.32132985 359.686,6.40100572 359.686,5.257 L359.686,4.817 C359.686,3.65099417 359.962831,2.72333678 360.5165,2.034 C361.070169,1.34466322 361.827329,1 362.788,1 C363.741338,1 364.491164,1.34832985 365.0375,2.045 C365.583836,2.74167015 365.857,3.65832765 365.857,4.795 L365.857,5.235 C365.857,6.39367246 365.587503,7.32132985 365.0485,8.018 C364.509497,8.71467015 363.763338,9.063 362.81,9.063 Z" id="10" fill="#191925"></path>\n                    <circle id="11" fill="{{ctrl.paletteColorAtIndex(10)}}" cx="387" cy="5" r="5"></circle>\n                    <path d="M399.760991,8.86942739 L399.760991,1.94653253 L398,3.21224462 L398,2.32074306 L399.827028,1 L400.718529,1 L400.718529,8.86942739 L399.760991,8.86942739 Z M404.152461,8.86942739 L404.152461,1.94653253 L402.391471,3.21224462 L402.391471,2.32074306 L404.218499,1 L405.11,1 L405.11,8.86942739 L404.152461,8.86942739 Z" id="11" fill="#191925"></path>\n                    <circle id="12" fill="{{ctrl.paletteColorAtIndex(11)}}" cx="427" cy="5" r="5"></circle>\n                    <path d="M439.76,8.964 L439.76,2.045 L438,3.31 L438,2.419 L439.826,1.099 L440.717,1.099 L440.717,8.964 L439.76,8.964 Z M442.235,8.964 L442.235,8.744 L445.359,5.455 C446.114337,4.65566267 446.492,3.89667026 446.492,3.178 C446.492,2.7379978 446.369168,2.39333458 446.1235,2.144 C445.877832,1.89466542 445.531336,1.77 445.084,1.77 C444.123329,1.77 443.569667,2.35299417 443.423,3.519 L442.532,3.519 C442.590667,2.74166278 442.845498,2.12750225 443.2965,1.6765 C443.747502,1.22549775 444.34333,1 445.084,1 C445.810004,1 446.387498,1.19983133 446.8165,1.5995 C447.245502,1.99916867 447.46,2.53632996 447.46,3.211 C447.46,4.08367103 446.932005,5.03699483 445.876,6.071 L443.709,8.183 L447.504,8.183 L447.504,8.964 L442.235,8.964 Z" id="12" fill="#191925"></path>\n                    <circle id="13" fill="{{ctrl.paletteColorAtIndex(12)}}" cx="469" cy="5" r="5"></circle>\n                    <path d="M481.76,8.964 L481.76,2.045 L480,3.31 L480,2.419 L481.826,1.099 L482.717,1.099 L482.717,8.964 L481.76,8.964 Z M487.216,9.063 C486.401996,9.063 485.747502,8.83566894 485.2525,8.381 C484.757498,7.92633106 484.495333,7.34700352 484.466,6.643 L485.346,6.643 C485.39,7.14166916 485.567832,7.54133183 485.8795,7.842 C486.191168,8.14266817 486.643997,8.293 487.238,8.293 C487.839336,8.293 488.288499,8.159168 488.5855,7.8915 C488.882501,7.62383199 489.031,7.25166905 489.031,6.775 C489.031,5.75566157 488.477339,5.246 487.37,5.246 L486.776,5.246 L486.776,4.443 L487.326,4.443 C488.308672,4.443 488.8,3.99567114 488.8,3.101 C488.8,2.71233139 488.677168,2.39516789 488.4315,2.1495 C488.185832,1.90383211 487.832002,1.781 487.37,1.781 C486.885998,1.781 486.488168,1.91666531 486.1765,2.188 C485.864832,2.45933469 485.683334,2.81866443 485.632,3.266 L484.796,3.266 C484.825333,2.62799681 485.078331,2.09083551 485.555,1.6545 C486.031669,1.21816448 486.636663,1 487.37,1 C488.08867,1 488.662498,1.20349796 489.0915,1.6105 C489.520502,2.01750203 489.735,2.50699714 489.735,3.079 C489.735,3.87833733 489.320671,4.45033161 488.492,4.795 C488.968669,4.91966729 489.340832,5.14883167 489.6085,5.4825 C489.876168,5.81616833 490.01,6.24699736 490.01,6.775 C490.01,7.47900352 489.751503,8.03633128 489.2345,8.447 C488.717497,8.85766872 488.044671,9.063 487.216,9.063 Z" id="13" fill="#191925"></path>\n                    <circle id="14" fill="{{ctrl.paletteColorAtIndex(13)}}" cx="512" cy="5" r="5"></circle>\n                    <path d="M524.76,8.865 L524.76,1.946 L523,3.211 L523,2.32 L524.826,1 L525.717,1 L525.717,8.865 L524.76,8.865 Z M531.393,8.865 L531.393,7.215 L527.455,7.215 L527.455,6.907 L531.052,1 L532.328,1 L532.328,6.434 L533.417,6.434 L533.417,7.215 L532.328,7.215 L532.328,8.865 L531.393,8.865 Z M528.665,6.434 L531.393,6.434 L531.393,1.726 L528.665,6.434 Z" id="14" fill="#191925"></path>\n                    <circle id="15" fill="{{ctrl.paletteColorAtIndex(14)}}" cx="555" cy="5" r="5"></circle>\n                    <path d="M567.76,8.865 L567.76,1.946 L566,3.211 L566,2.32 L567.826,1 L568.717,1 L568.717,8.865 L567.76,8.865 Z M573.117,8.964 C572.302996,8.964 571.677836,8.76233535 571.2415,8.359 C570.805164,7.95566465 570.557667,7.41667004 570.499,6.742 L571.412,6.742 C571.5,7.21866905 571.664999,7.5798321 571.907,7.8255 C572.149001,8.0711679 572.548664,8.194 573.106,8.194 C573.641336,8.194 574.062998,8.02533502 574.371,7.688 C574.679002,7.35066498 574.833,6.88500297 574.833,6.291 C574.833,5.73366388 574.682668,5.28816833 574.382,4.9545 C574.081332,4.62083166 573.681669,4.454 573.183,4.454 C572.390996,4.454 571.771336,4.70699747 571.324,5.213 L570.972,5.213 L570.972,1 L575.394,1 L575.394,1.825 L571.764,1.825 L571.764,4.223 C572.152669,3.86366487 572.687997,3.684 573.37,3.684 C574.08867,3.684 574.675331,3.92049764 575.13,4.3935 C575.584669,4.86650237 575.812,5.49899604 575.812,6.291 C575.812,7.0976707 575.555336,7.74483089 575.042,8.2325 C574.528664,8.7201691 573.887004,8.964 573.117,8.964 Z" id="15" fill="#191925"></path>\n                    <circle id="16" fill="{{ctrl.paletteColorAtIndex(15)}}" cx="597" cy="5" r="5"></circle>\n                    <path d="M609.76,8.964 L609.76,2.045 L608,3.31 L608,2.419 L609.826,1.099 L610.717,1.099 L610.717,8.964 L609.76,8.964 Z M615.513,9.063 C614.992331,9.063 614.545002,8.97133425 614.171,8.788 C613.796998,8.60466575 613.503668,8.34433502 613.291,8.007 C613.078332,7.66966498 612.924334,7.29383541 612.829,6.8795 C612.733666,6.46516459 612.686,6.0013359 612.686,5.488 L612.686,5.301 C612.686,3.92232644 612.966497,2.86083706 613.5275,2.1165 C614.088503,1.37216295 614.834662,1 615.766,1 C616.389336,1 616.902665,1.16133172 617.306,1.484 C617.709335,1.80666828 617.962333,2.27966355 618.065,2.903 L617.152,2.903 C617.064,2.52166476 616.906334,2.23933425 616.679,2.056 C616.451666,1.87266575 616.125335,1.781 615.7,1.781 C615.09133,1.781 614.600002,2.05233062 614.226,2.595 C613.851998,3.13766938 613.654,3.91499494 613.632,4.927 C613.822668,4.60433172 614.095832,4.3458343 614.4515,4.1515 C614.807168,3.9571657 615.208664,3.86 615.656,3.86 C616.426004,3.86 617.047498,4.10566421 617.5205,4.597 C617.993502,5.08833579 618.23,5.700663 618.23,6.434 C618.23,7.22600396 617.984336,7.86216426 617.493,8.3425 C617.001664,8.82283573 616.341671,9.063 615.513,9.063 Z M615.513,8.315 C616.033669,8.315 616.453498,8.14633502 616.7725,7.809 C617.091502,7.47166498 617.251,7.02800275 617.251,6.478 C617.251,5.91333051 617.093335,5.4605017 616.778,5.1195 C616.462665,4.77849829 616.037336,4.608 615.502,4.608 C614.973997,4.608 614.541335,4.76933172 614.204,5.092 C613.866665,5.41466828 613.698,5.8326641 613.698,6.346 C613.698,6.96933645 613.864832,7.45333161 614.1985,7.798 C614.532168,8.14266839 614.970331,8.315 615.513,8.315 Z" id="16" fill="#191925"></path>\n                    <circle id="17" fill="{{ctrl.paletteColorAtIndex(16)}}" cx="640" cy="5" r="5"></circle>\n                    <path d="M652.76,8.865 L652.76,1.946 L651,3.211 L651,2.32 L652.826,1 L653.717,1 L653.717,8.865 L652.76,8.865 Z M656.632,8.865 L659.371,1.77 L655.378,1.77 L655.378,1 L660.559,1 L660.559,1.132 L657.611,8.865 L656.632,8.865 Z" id="17" fill="#191925"></path>\n                    <circle id="18" fill="{{ctrl.paletteColorAtIndex(17)}}" cx="682" cy="5" r="5"></circle>\n                    <path d="M694.76,8.964 L694.76,2.045 L693,3.31 L693,2.419 L694.826,1.099 L695.717,1.099 L695.717,8.964 L694.76,8.964 Z M700.37,9.063 C699.922664,9.063 699.497335,8.98050082 699.094,8.8155 C698.690665,8.65049917 698.349668,8.3846685 698.071,8.018 C697.792332,7.6513315 697.653,7.22233579 697.653,6.731 C697.653,6.22499747 697.788665,5.79966839 698.06,5.455 C698.331335,5.11033161 698.690664,4.85733414 699.138,4.696 C698.763998,4.5493326 698.472501,4.33300143 698.2635,4.047 C698.054499,3.76099857 697.95,3.42733524 697.95,3.046 C697.95,2.43733029 698.193831,1.94416856 698.6815,1.5665 C699.169169,1.18883144 699.731997,1 700.37,1 C701.008003,1 701.568998,1.18883144 702.053,1.5665 C702.537002,1.94416856 702.779,2.42999703 702.779,3.024 C702.779,3.77933711 702.375671,4.33299824 701.569,4.685 C702.573672,5.0516685 703.076,5.72632842 703.076,6.709 C703.076,7.44967037 702.806503,8.02716459 702.2675,8.4415 C701.728497,8.85583541 701.096004,9.063 700.37,9.063 Z M700.37,8.282 C700.876003,8.282 701.290332,8.14083474 701.613,7.8585 C701.935668,7.57616525 702.097,7.18200253 702.097,6.676 C702.097,6.17733084 701.935668,5.79233469 701.613,5.521 C701.290332,5.24966531 700.883336,5.114 700.392,5.114 C699.893331,5.114 699.475335,5.25333194 699.138,5.532 C698.800665,5.81066806 698.632,6.19933084 698.632,6.698 C698.632,7.18933579 698.800665,7.57616525 699.138,7.8585 C699.475335,8.14083474 699.885998,8.282 700.37,8.282 Z M700.403,4.355 C700.828335,4.355 701.169332,4.23766784 701.426,4.003 C701.682668,3.76833216 701.811,3.44566872 701.811,3.035 C701.811,2.66099813 701.673501,2.35300121 701.3985,2.111 C701.123499,1.86899879 700.780669,1.748 700.37,1.748 C699.951998,1.748 699.605501,1.86716547 699.3305,2.1055 C699.055499,2.34383452 698.918,2.66099802 698.918,3.057 C698.918,3.45300198 699.060999,3.76833216 699.347,4.003 C699.633001,4.23766784 699.984998,4.355 700.403,4.355 Z" id="18" fill="#191925"></path>\n                    <circle id="19" fill="{{ctrl.paletteColorAtIndex(18)}}" cx="725" cy="5" r="5"></circle>\n                    <path d="M737.76,8.975 L737.76,2.056 L736,3.321 L736,2.43 L737.826,1.11 L738.717,1.11 L738.717,8.975 L737.76,8.975 Z M743.216,9.063 C742.49733,9.063 741.921669,8.88516845 741.489,8.5295 C741.056331,8.17383156 740.788667,7.67700319 740.686,7.039 L741.61,7.039 C741.705334,7.44966872 741.879499,7.75949896 742.1325,7.9685 C742.385501,8.17750105 742.753998,8.282 743.238,8.282 C743.876003,8.282 744.369165,8.01983596 744.7175,7.4955 C745.065835,6.97116405 745.243667,6.19200517 745.251,5.158 C745.060332,5.48066828 744.785335,5.73549907 744.426,5.9225 C744.066665,6.10950094 743.663336,6.203 743.216,6.203 C742.45333,6.203 741.831836,5.96100242 741.3515,5.477 C740.871164,4.99299758 740.631,4.37700374 740.631,3.629 C740.631,2.83699604 740.876664,2.20083574 741.368,1.7205 C741.859336,1.24016427 742.519329,1 743.348,1 C744.272005,1 744.974164,1.30249698 745.4545,1.9075 C745.934836,2.51250303 746.175,3.38332765 746.175,4.52 L746.175,5.015 C746.175,6.31300649 745.918336,7.31216317 745.405,8.0125 C744.891664,8.71283684 744.162005,9.063 743.216,9.063 Z M743.359,5.455 C743.887003,5.455 744.319665,5.29733491 744.657,4.982 C744.994335,4.66666509 745.163,4.25600253 745.163,3.75 C745.163,3.11933018 744.996168,2.62800176 744.6625,2.276 C744.328832,1.92399824 743.890669,1.748 743.348,1.748 C742.827331,1.748 742.407502,1.91666498 742.0885,2.254 C741.769498,2.59133502 741.61,3.03499725 741.61,3.585 C741.61,4.14966949 741.767665,4.6024983 742.083,4.9435 C742.398335,5.28450171 742.823664,5.455 743.359,5.455 Z" id="19" fill="#191925"></path>\n                    <circle id="20" fill="{{ctrl.paletteColorAtIndex(19)}}" cx="768" cy="5" r="5"></circle>\n                    <path d="M779,8.964 L779,8.744 L782.124,5.455 C782.879337,4.65566267 783.257,3.89667026 783.257,3.178 C783.257,2.7379978 783.134168,2.39333458 782.8885,2.144 C782.642832,1.89466542 782.296336,1.77 781.849,1.77 C780.888329,1.77 780.334667,2.35299417 780.188,3.519 L779.297,3.519 C779.355667,2.74166278 779.610498,2.12750225 780.0615,1.6765 C780.512502,1.22549775 781.10833,1 781.849,1 C782.575004,1 783.152498,1.19983133 783.5815,1.5995 C784.010502,1.99916867 784.225,2.53632996 784.225,3.211 C784.225,4.08367103 783.697005,5.03699483 782.641,6.071 L780.474,8.183 L784.269,8.183 L784.269,8.964 L779,8.964 Z M788.669,8.271 C789.351003,8.271 789.867998,8.01250259 790.22,7.4955 C790.572002,6.97849741 790.748,6.22133832 790.748,5.224 L790.748,4.784 C790.748,3.85999538 790.562835,3.12666938 790.1925,2.584 C789.822165,2.04133062 789.307003,1.77 788.647,1.77 C787.979663,1.77 787.459002,2.03583068 787.085,2.5675 C786.710998,3.09916932 786.524,3.84532853 786.524,4.806 L786.524,5.246 C786.524,6.22133821 786.714665,6.96933073 787.096,7.49 C787.477335,8.01066927 788.001663,8.271 788.669,8.271 Z M788.669,9.063 C787.730329,9.063 786.975003,8.71467015 786.403,8.018 C785.830997,7.32132985 785.545,6.40100572 785.545,5.257 L785.545,4.817 C785.545,3.65099417 785.821831,2.72333678 786.3755,2.034 C786.929169,1.34466322 787.686329,1 788.647,1 C789.600338,1 790.350164,1.34832985 790.8965,2.045 C791.442836,2.74167015 791.716,3.65832765 791.716,4.795 L791.716,5.235 C791.716,6.39367246 791.446503,7.32132985 790.9075,8.018 C790.368497,8.71467015 789.622338,9.063 788.669,9.063 Z" id="20" fill="#191925"></path>\n                </g>\n                <path d="M18,28.049 L18,18 L19.092,18 L19.092,28.049 L18,28.049 Z M24.084,28.166 C23.1133285,28.166 22.3225031,27.8518365 21.7115,27.2235 C21.1004969,26.5951635 20.795,25.7610052 20.795,24.721 L20.795,24.617 C20.795,23.5943282 21.0918304,22.7580033 21.6855,22.108 C22.2791696,21.4579968 23.0439953,21.133 23.98,21.133 C24.846671,21.133 25.5724971,21.4124972 26.1575,21.9715 C26.7425029,22.5305028 27.035,23.377661 27.035,24.513 L27.035,24.864 L21.913,24.864 C21.9390001,25.6440039 22.1361648,26.2398313 22.5045,26.6515 C22.8728352,27.0631687 23.4036632,27.269 24.097,27.269 C25.1630053,27.269 25.7653326,26.8746706 25.904,26.086 L26.983,26.086 C26.8703328,26.7533367 26.5540026,27.2668315 26.034,27.6265 C25.5139974,27.9861685 24.8640039,28.166 24.084,28.166 Z M21.952,23.993 L25.93,23.993 C25.8346662,22.6843268 25.1846727,22.03 23.98,22.03 C23.4339973,22.03 22.9833351,22.2054982 22.628,22.5565 C22.2726649,22.9075018 22.0473338,23.3863303 21.952,23.993 Z M31.403,30.532 C30.4583286,30.532 29.7325025,30.3391686 29.2255,29.9535 C28.7184975,29.5678314 28.4173338,29.0630031 28.322,28.439 L29.427,28.439 C29.5830008,29.2276706 30.2373276,29.622 31.39,29.622 C32.0833368,29.622 32.6206648,29.450835 33.002,29.1085 C33.3833352,28.766165 33.574,28.2396702 33.574,27.529 L33.574,26.541 C33.365999,26.8963351 33.0496688,27.1996654 32.625,27.451 C32.2003312,27.7023346 31.749669,27.828 31.273,27.828 C30.3803289,27.828 29.6415029,27.5246697 29.0565,26.918 C28.4714971,26.3113303 28.179,25.5400047 28.179,24.604 L28.179,24.513 C28.179,23.5683286 28.477997,22.7688366 29.076,22.1145 C29.674003,21.4601634 30.4323287,21.133 31.351,21.133 C32.3563384,21.133 33.097331,21.535996 33.574,22.342 L33.574,21.25 L34.653,21.25 L34.653,27.594 C34.6443333,28.5560048 34.3453363,29.2861642 33.756,29.7845 C33.1666637,30.2828358 32.3823382,30.532 31.403,30.532 Z M31.39,26.931 C32.0400033,26.931 32.5729979,26.7165021 32.989,26.2875 C33.4050021,25.8584979 33.613,25.2713371 33.613,24.526 L33.613,24.435 C33.613,23.6809962 33.4201686,23.0916688 33.0345,22.667 C32.6488314,22.2423312 32.1223367,22.03 31.455,22.03 C30.7876633,22.03 30.2611686,22.2531644 29.8755,22.6995 C29.4898314,23.1458356 29.297,23.7329964 29.297,24.461 L29.297,24.565 C29.297,25.2843369 29.498498,25.8584979 29.9015,26.2875 C30.304502,26.7165021 30.8006637,26.931 31.39,26.931 Z M39.619,28.166 C38.6483285,28.166 37.8575031,27.8518365 37.2465,27.2235 C36.6354969,26.5951635 36.33,25.7610052 36.33,24.721 L36.33,24.617 C36.33,23.5943282 36.6268304,22.7580033 37.2205,22.108 C37.8141696,21.4579968 38.5789953,21.133 39.515,21.133 C40.381671,21.133 41.1074971,21.4124972 41.6925,21.9715 C42.2775029,22.5305028 42.57,23.377661 42.57,24.513 L42.57,24.864 L37.448,24.864 C37.4740001,25.6440039 37.6711648,26.2398313 38.0395,26.6515 C38.4078352,27.0631687 38.9386632,27.269 39.632,27.269 C40.6980053,27.269 41.3003326,26.8746706 41.439,26.086 L42.518,26.086 C42.4053328,26.7533367 42.0890026,27.2668315 41.569,27.6265 C41.0489974,27.9861685 40.3990039,28.166 39.619,28.166 Z M37.487,23.993 L41.465,23.993 C41.3696662,22.6843268 40.7196727,22.03 39.515,22.03 C38.9689973,22.03 38.5183351,22.2054982 38.163,22.5565 C37.8076649,22.9075018 37.5823338,23.3863303 37.487,23.993 Z M44.221,28.049 L44.221,21.25 L45.3,21.25 L45.3,22.329 C45.4646675,21.9823316 45.7376648,21.6963345 46.119,21.471 C46.5003352,21.2456655 46.9553307,21.133 47.484,21.133 C48.2293371,21.133 48.8143312,21.3539978 49.239,21.796 C49.6636688,22.2380022 49.876,22.9313286 49.876,23.876 L49.876,28.049 L48.797,28.049 L48.797,23.798 C48.797,23.199997 48.6670013,22.7623347 48.407,22.485 C48.1469987,22.2076653 47.7440027,22.069 47.198,22.069 C46.6693307,22.069 46.2208352,22.233665 45.8525,22.563 C45.4841648,22.892335 45.3,23.3473304 45.3,23.928 L45.3,28.049 L44.221,28.049 Z M54.556,28.166 C53.6459954,28.166 52.9071695,27.8626697 52.3395,27.256 C51.7718305,26.6493303 51.488,25.8260052 51.488,24.786 L51.488,24.682 C51.488,23.6419948 51.7826637,22.7905033 52.372,22.1275 C52.9613363,21.4644967 53.7239953,21.133 54.66,21.133 C55.6653384,21.133 56.4063309,21.535996 56.883,22.342 L56.883,18 L57.962,18 L57.962,28.049 L56.883,28.049 L56.883,26.879 C56.674999,27.2256684 56.3543355,27.5268321 55.921,27.7825 C55.4876645,28.0381679 55.032669,28.166 54.556,28.166 Z M54.673,27.269 C55.3403367,27.269 55.8819979,27.0501689 56.298,26.6125 C56.7140021,26.1748311 56.922,25.5356709 56.922,24.695 L56.922,24.591 C56.922,23.7416624 56.7335019,23.1025021 56.3565,22.6735 C55.9794981,22.2444979 55.4486701,22.03 54.764,22.03 C54.0879966,22.03 53.5593352,22.2574977 53.178,22.7125 C52.7966648,23.1675023 52.606,23.8066625 52.606,24.63 L52.606,24.734 C52.606,25.5573374 52.7988314,26.1856645 53.1845,26.619 C53.5701686,27.0523355 54.0663303,27.269 54.673,27.269 Z" id="chart-title" fill="#191925"></path>\n            </g>\n        </g>\n    </g>\n</svg>\n'},gPPg:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+c29ydC1hc2NlbmRpbmc8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iZWRpdG9yIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iU29ydC1EZXNjZW5kaW5nIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjAwMDAwMCwgMi4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTM5Ij4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjQ5OTMxNzQwNSwxMC4wMDIzMDQgTDMuNjg5ODU3NzIsNy42NjUzMDgwMiBDNC4xMzY5MDk5Niw3LjMzNzg1Mjc0IDQuNDk5MzE3NCw3LjUxMjgzNjExIDQuNDk5MzE3NCw4LjA2NjQzNTA5IEw0LjQ5OTMxNzQsMTEuOTM4MTcyOSBDNC40OTkzMTc0LDEyLjQ4NzE2NDYgNC4xMzAxNzY3OCwxMi42NjE4MjM0IDMuNjg5ODU3NzIsMTIuMzM5MyBMMC40OTkzMTc0MDUsMTAuMDAyMzA0IFoiIGlkPSJUcmlhbmdsZS1Db3B5LTQiIGZpbGw9IiM2MzY1NkUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNDk5MzE3LCAxMC4wMDAwMDApIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTIuNDk5MzE3LCAtMTAuMDAwMDAwKSAiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yLjUsOS41IEwyLjUsMC41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjQ1LDEuNSBMMTAuNDUsMS41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjQ1LDUuNSBMMTMuNDUsNS41IiBpZD0iTGluZS1Db3B5LTEwMCIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjQ1LDkuNSBMMTUuNDUsOS41IiBpZD0iTGluZS1Db3B5LTEwMSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},glR0:function(e,t,n){"use strict";t.D=selectState,n.d(t,"p",function(){return l}),n.d(t,"l",function(){return s}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"j",function(){return u}),n.d(t,"U",function(){return p}),n.d(t,"P",function(){return h}),n.d(t,"S",function(){return g}),n.d(t,"R",function(){return m}),n.d(t,"Q",function(){return f}),n.d(t,"T",function(){return C}),n.d(t,"J",function(){return y}),n.d(t,"I",function(){return b}),n.d(t,"K",function(){return v}),n.d(t,"M",function(){return I}),n.d(t,"N",function(){return S}),n.d(t,"W",function(){return w}),n.d(t,"Y",function(){return A}),n.d(t,"Z",function(){return M}),n.d(t,"X",function(){return k}),n.d(t,"V",function(){return T}),n.d(t,"L",function(){return x}),n.d(t,"_3",function(){return D}),n.d(t,"H",function(){return L}),n.d(t,"_0",function(){return R}),n.d(t,"O",function(){return N}),n.d(t,"G",function(){return E}),n.d(t,"_2",function(){return j}),n.d(t,"_1",function(){return O}),n.d(t,"E",function(){return P}),n.d(t,"b",function(){return F}),n.d(t,"c",function(){return z}),n.d(t,"a",function(){return _}),n.d(t,"v",function(){return $}),n.d(t,"w",function(){return B}),n.d(t,"u",function(){return V}),n.d(t,"r",function(){return U}),n.d(t,"f",function(){return Z}),n.d(t,"d",function(){return G}),n.d(t,"e",function(){return Y}),n.d(t,"g",function(){return Q}),n.d(t,"t",function(){return H}),n.d(t,"k",function(){return W}),n.d(t,"m",function(){return q}),n.d(t,"n",function(){return J}),n.d(t,"C",function(){return X}),n.d(t,"A",function(){return K}),n.d(t,"_5",function(){return ee}),n.d(t,"x",function(){return te}),n.d(t,"y",function(){return ne}),n.d(t,"B",function(){return re}),n.d(t,"z",function(){return oe}),n.d(t,"s",function(){return ie}),n.d(t,"_4",function(){return ae}),n.d(t,"F",function(){return le}),n.d(t,"o",function(){return se}),n.d(t,"q",function(){return ce});var r=n("vqB5"),o=n("PbPb"),i=(n.n(o),n("SdCE")),a=(n.n(i),n("DMbl"));function selectState(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o.get(e,t)}var l=function(e){return e.client.loggedIn},s=function(e){return e.client.expandedViewOpen},c=function(e){return e.client.currentReportToken},d=function(e){return e.client.currentAccountUsername},u=function(e){return e.client.currentUserBelongsToReportContext},p=function(e){return e.client.selectedReport},h=function(e){return e.client.selectedReport.report&&e.client.selectedReport.report.hasLink("python_notebook")&&e.client.selectedReport.report.links("python_notebook").href},g=function(e){return e.client.selectedReport.report},m=function(e){return e.client.selectedReport.reportRun},f=function(e){return e.client.selectedReport.reportRunPdfExport},C=function(e){return e.client.selectedReport.reportRun&&e.client.selectedReport.reportRun.createdAt},y=function(e){return e.client.selectedReport.report&&e.client.selectedReport.report.expected_runtime},b=function(e){return e.client.selectedReport.reportDisplayName},v=function(e){return e.client.selectedReport.reportHasUnsyncedChanges},I=function(e){return e.client.selectedReport.reportLastSyncedAt},S=function(e){return e.client.selectedReport.reportLayout},w=function(e){return e.client.selectedReport.reportSpace},A=function(e){return e.client.selectedReport.reportSpace&&e.client.selectedReport.reportSpace.hasLink("web")&&e.client.selectedReport.reportSpace.links("web").href},M=function(e){return e.client.selectedReport.report&&e.client.selectedReport.report.hasForm("sync_to_github")},k=function(e){var t=w(e);return t&&!a.a.isRestrictedPersonalSpace(t)&&!a.a.isPrivateAndNotCreatedBy(t,Z(e))},T=function(e){return e.client.selectedReport.reportSpaceDisplayName},x=function(e){return e.client.selectedReport.report&&e.client.selectedReport.report.last_successful_run_token},D=function(e){return e.client.selectedReport.report&&e.client.selectedReport.report.hasLink("web_report_runs")&&e.client.selectedReport.report.links("web_report_runs").href},L=function(e){return e.client.selectedReport.creator},R=function(e){return e.client.selectedReport.userStar},N=function(e){return e.client.selectedReport.chartModels},E=function(e){return e.client.selectedReport.chartDesigner},j=function(e){return e.client.selectedReport.viewDataModal},O=function(e){return e.client.selectedReport.viewDataModal.isOpen},P=function(e){return e.client.selectedDefinition.definition&&e.client.selectedDefinition.definition.lastSyncedAt},F=function(e){return e.client.accountContext},z=function(e){return e.client.accountContextSpaces},_=function(e){return e.client.accountContextDatasources},$=function(e){return e.client.reportContext},B=function(e){return e.client.reportContext&&e.client.reportContext.hasLink("web")&&e.client.reportContext.links("web").href},V=function(e){return e.client.reportContextAvatar},U=function(e){return e.client.orgColorPalettes},Z=function(e){return e.client.account},G=function(e){return e.client.accountOrganizations},Y=function(e){return e.transient.accountPreference},Q=function(e){return e.client.apiDatasources},H=function(e){return Object(r.b)(Object(o.mapKeys)(function(e){return e.client.reportActions}(e),function(e){return e.get("id",void 0)}))},W=function(e){return Object(r.b)(Object(o.mapKeys)(function(e){return e.client.definitionActions}(e),function(e){return e.get("id",void 0)}))},q=function(e){return e.transient.explorer.chartDesigner},J=function(e){return e.transient.explorer.originalChart},X=function(e){return e.router},K=function(e){return e.client.selectedReport.chartModels},ee=function(e){return e.client.selectedReport.chartModels.getRecords().filter(function(e){return null!=e.model})},te=function(e){return e.transient.report.filterControls.keys.map(function(t){return e.transient.report.filterControls.byKey.get(t)})},ne=Object(i.createSelector)(function(e){return e.transient.report.filterFields.keys},function(e){return e.transient.report.filterFields.byKey},function(e,t){return e.map(function(e){return t[e]})}),re=function(e){return e.persistent.reports.byKey},oe=function(e){return e.persistent.reportFilters.byKey},ie=function(e){return e.client.selectedReport.queries.byKey},ae=function(e){return e.transient.editor.selectedQueryToken},le=function(e){return e.client.selectedReport.queries.getRecord(e.transient.editor.selectedQueryToken)},se=function(e){return e.transient.editor.highlightedQueryText},ce=function(e){return e.client.selectedReport.queries.getRecords().filter(function(e){return e.resource.name!==e.name||e.resource.raw_query!==e.raw_query||e.resource.data_source_id!==e.data_source_id})}},"h+bJ":function(e,t){e.exports='<div class="python-cell-run python-iframe" ng-show="ctrl.result.result_type !== \'image\' && (ctrl.result.content_type === \'text/html\' && ctrl.result.result_type !== \'error\')"></div>\n<div class="python-cell-run" ng-show="ctrl.result.result_type === \'error\'"><div class="python-error-header"><i class="icon-warning-small python-error-icon"></i>There was a problem running this cell</div><div ng-if="ctrl.result.result_type === \'error\'" class="python-error-message" ng-bind-html="trustedResult"></div></div>\n<div class="python-cell-run" ng-if="ctrl.result.result_type !== \'image\' && ctrl.result.content_type === \'text/plain\' && ctrl.result.result_type !== \'error\' && ctrl.result.result_type !== \'stderr\'" ng-bind-html="trustedResult"></div>\n<div class="python-cell-stderr" ng-if="ctrl.result.result_type === \'stderr\'" ng-bind-html="trustedResult"></div>\n<div class="python-cell-run" ng-if="ctrl.result.result_type === \'image\'"><img ng-src="{{ ctrl.result.content }}" /></div>\n<div class="python-cell-run python-cell-text" ng-if="ctrl.result.result_type === \'csv\'"><a href="{{ ctrl.result.content }}" class="btn btn-secondary" ng-click="$event.stopPropagation()" download>Export CSV</a></div>'},h3aq:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("Zz1P"),o=n.n(r),i=n("vqB5"),a=n("PbPb"),l=(n.n(a),n("m9my")),s=(n.n(l),n("xEvw")),c=n("sGhr"),d=function(){function ReportFilterOptionsFactory(){}return ReportFilterOptionsFactory.buildFilterOptions=function(e,t){switch(t.type){case l.VariableType.CONTINUOUS:switch(e.filterType){case s.b.Range:return this.buildRangeFilterOptions(e,t)}break;case l.VariableType.DISCRETE:switch(e.filterType){case s.b.Single:return this.buildSingleFilterOptions(e,t);case s.b.Multi:return this.buildMultiFilterOptions(e,t)}}},ReportFilterOptionsFactory.buildSingleFilterOptions=function(e,t){return{id:e.id,filterType:s.b.Single,values:this.buildDiscreteValueOptions(t)}},ReportFilterOptionsFactory.buildMultiFilterOptions=function(e,t,n){return{id:e.id,filterType:s.b.Multi,values:this.buildDiscreteValueOptions(t,n)}},ReportFilterOptionsFactory.buildRangeFilterOptions=function(e,t){return{id:e.id,filterType:s.b.Range,values:new c.c({min:t.min,max:t.max})}},ReportFilterOptionsFactory.buildDiscreteValueOptions=function(e,t){switch(e.dataType){case l.DataType.DATETIME:return this.buildDiscreteDatetimeOptionValues(e,t);case l.DataType.DATEQTR:return this.buildDiscreteQuarterOptionValues(e);case l.DataType.DATEMONTH:return this.buildDiscreteMonthOptionValues(e);case l.DataType.DATEWKDAY:return this.buildDiscreteWeekdayOptionValues(e);default:return Object(i.a)().withMutations(function(t){for(var n=0,r=Object(a.sortBy)(e.values);n<r.length;n++){var o=r[n];null===o?t.push(new c.a({value:o,label:"Null"})):t.push(new c.a({value:o,label:o}))}})}},ReportFilterOptionsFactory.buildDiscreteDatetimeOptionValues=function(e,t){return Object(i.a)().withMutations(function(n){for(var r=0,i=Object(a.sortBy)(e.values);r<i.length;r++){var s=i[r],d=void 0;if(null===s)d="Null";else switch(t){case l.DatePart.YEAR:d=o.a.utc(s).format("YYYY");break;case l.DatePart.QUARTER:d=o.a.utc(s).format("[Q]Q YYYY");break;case l.DatePart.MONTH:d=o.a.utc(s).format("MMM YYYY");break;case l.DatePart.WEEK:d="Week of "+o.a.utc(s).format("YYYY-MM-DD");break;case l.DatePart.DAY:d=o.a.utc(s).format("YYYY-MM-DD");break;default:d=o.a.utc(s).format("YYYY-MM-DD HH:mm:ss")}n.push(new c.a({value:s,label:d}))}})},ReportFilterOptionsFactory.buildDiscreteQuarterOptionValues=function(e){var t=this;return Object(i.a)().withMutations(function(n){for(var r=0,o=Object(a.sortBy)(e.values);r<o.length;r++){var i=o[r];null===i?n.push(new c.a({value:i,label:"Null"})):n.push(new c.a({value:i,label:t.QuarterNames[i]}))}})},ReportFilterOptionsFactory.buildDiscreteMonthOptionValues=function(e){var t=this;return Object(i.a)().withMutations(function(n){for(var r=0,o=Object(a.sortBy)(e.values);r<o.length;r++){var i=o[r];null===i?n.push(new c.a({value:i,label:"Null"})):n.push(new c.a({value:i,label:t.MonthNames[i]}))}})},ReportFilterOptionsFactory.buildDiscreteWeekdayOptionValues=function(e){var t=this;return Object(i.a)().withMutations(function(n){for(var r=0,o=Object(a.sortBy)(e.values);r<o.length;r++){var i=o[r];null===i?n.push(new c.a({value:i,label:"Null"})):n.push(new c.a({value:i,label:t.WeekdayNames[i]}))}})},ReportFilterOptionsFactory.QuarterNames={1:"Q1",2:"Q2",3:"Q3",4:"Q4"},ReportFilterOptionsFactory.MonthNames={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},ReportFilterOptionsFactory.WeekdayNames={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},ReportFilterOptionsFactory}()},h5Gf:function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">{{ title }}<a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <div class="modal-container-sm">\n    <label class="form-label">Name</label>\n    <span class="form-control-error ng-hide" ng-show="queryRenameForm.queryName.$error.required">Name cannot be empty</span>\n    <span class="form-control-error ng-hide" ng-show="queryRenameForm.queryName.$error.maxlength">Name must be under 255 characters long</span>\n    <input type="text" name="definitionName" class="form-control form-control-block next-form-control ng-pristine ng-valid ng-isolate-scope ng-not-empty ng-valid-required ng-valid-maxlength ng-touched" autocomplete="off" focus-me="" ng-maxlength="255" required="" ng-model="model.name" placeholder="Definition name">\n  </div>\n  <div class="modal-action-bar">\n    <button ng-if="!onlyConfirm" class="btn btn-lg btn-secondary" ng-click="$dismiss()">{{ cancelText || \'Cancel\' }}</button>\n    <button class="btn btn-lg" ng-class="[confirmButtonClass || \'btn-filled-primary\']" ng-click="$close()">Save</button>\n  </div>\n</div>'},hbv7:function(e,t,n){"use strict";var r,o;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),function(e){e.Python="python",e.Markdown="markdown"}(r||(r={})),function(e){e.Python="python",e.R="r"}(o||(o={}))},i7j0:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"A",function(){return l}),n.d(t,"v",function(){return s}),n.d(t,"u",function(){return c}),n.d(t,"y",function(){return d}),n.d(t,"w",function(){return u}),n.d(t,"t",function(){return p}),n.d(t,"x",function(){return h}),n.d(t,"z",function(){return g}),n.d(t,"b",function(){return m}),n.d(t,"p",function(){return f}),n.d(t,"n",function(){return C}),n.d(t,"o",function(){return y}),n.d(t,"k",function(){return b}),n.d(t,"f",function(){return v}),n.d(t,"l",function(){return I}),n.d(t,"m",function(){return S}),n.d(t,"q",function(){return w}),n.d(t,"r",function(){return A}),n.d(t,"e",function(){return M}),n.d(t,"c",function(){return k}),n.d(t,"C",function(){return T}),n.d(t,"g",function(){return x}),n.d(t,"s",function(){return D}),n.d(t,"d",function(){return L}),n.d(t,"h",function(){return R}),n.d(t,"i",function(){return N}),n.d(t,"j",function(){return E}),n.d(t,"B",function(){return j});var r=n("BP8X"),o=this,i={SelectStarred:"SELECT_STARRED",SelectMyWork:"SELECT_MY_WORK",SelectDiscover:"SELECT_DISCOVER",SelectSpacesIndex:"SELECT_SPACES_INDEX",SelectSpacesIndexPending:"SELECT_SPACES_INDEX_PENDING",SelectSpacesIndexFulfilled:"SELECT_SPACES_INDEX_FULFILLED",SelectSpacesIndexRejected:"SELECT_SPACES_INDEX_REJECTED",SelectSpace:"SELECT_SPACE",SelectSpacePending:"SELECT_SPACE_PENDING",SelectSpaceFulfilled:"SELECT_SPACE_FULFILLED",SelectSpaceRejected:"SELECT_SPACE_REJECTED",SelectOrganizationSpace:"SELECT_ORGANIZATION_SPACE",SelectOrganizationSpacePending:"SELECT_ORGANIZATION_SPACE_PENDING",SelectOrganizationSpaceFulfilled:"SELECT_ORGANIZATION_SPACE_FULFILLED",SelectOrganizationSpaceRejected:"SELECT_ORGANIZATION_SPACE_REJECTED",SelectDefinitions:"SELECT_DEFINITIONS",SelectRecent:"SELECT_RECENT",RemoveSpaceReportPin:"REMOVE_SPACE_REPORT_PIN",RemoveSpaceReportPinPending:"REMOVE_SPACE_REPORT_PIN_PENDING",RemoveSpaceReportPinFulfilled:"REMOVE_SPACE_REPORT_PIN_FULFILLED",CreateSpaceReportPin:"CREATE_SPACE_REPORT_PIN",CreateSpaceReportPinPending:"CREATE_SPACE_REPORT_PIN_PENDING",CreateSpaceReportPinFulfilled:"CREATE_SPACE_REPORT_PIN_FULFILLED",SetReportListToggleList:"SET_REPORT_LIST_TOGGLE_LIST",SetReportListToggleTile:"SET_REPORT_LIST_TOGGLE_TILE",GetReportList:"GET_REPORT_LIST",GetReportListPending:"GET_REPORT_LIST_PENDING",GetReportListFulfilled:"GET_REPORT_LIST_FULFILLED",FilterReportList:"FILTER_REPORT_LIST",FilterReportListPending:"FILTER_REPORT_LIST_PENDING",FilterReportListFulfilled:"FILTER_REPORT_LIST_FULFILLED",MoreReportList:"MORE_REPORT_LIST",MoreReportListPending:"MORE_REPORT_LIST_PENDING",MoreReportListFulfilled:"MORE_REPORT_LIST_FULFILLED",GetDefinitionList:"GET_DEFINITION_LIST",GetDefinitionListPending:"GET_DEFINITION_LIST_PENDING",GetDefinitionListFulfilled:"GET_DEFINITION_LIST_FULFILLED",MoreDefinitionList:"MORE_DEFINITION_LIST",MoreDefinitionListPending:"MORE_DEFINITION_LIST_PENDING",MoreDefinitionListFulfilled:"MORE_DEFINITION_LIST_FULFILLED",CreateSpaceMembership:"CREATE_SPACE_MEMBERSHIP",CreateSpaceMembershipFulfilled:"CREATE_SPACE_MEMBERSHIP_FULFILLED",SetSpaces:"SET_SPACES",GetSpaces:"GET_SPACES",GetSpacesPending:"GET_SPACES_PENDING",GetSpacesFulfilled:"GET_SPACES_FULFILLED",InsertSpace:"INSERT_SPACE",RemoveSpace:"REMOVE_SPACE",DeleteSpace:"DELETE_SPACE",CreateSpace:"CREATE_SPACE",RenameSpace:"RENAME_SPACE",SetSpaceCount:"SET_SPACE_COUNT",GetDataSources:"GET_DATA_SOURCES",GetDataSourcesFulfilled:"GET_DATA_SOURCES_FULFILLED"},a={reports:["creator","star","new_star","new_space_link",{space:"creator"}]},l=function(){return{type:i.SelectStarred}},s=function(){return{type:i.SelectMyWork}},c=function(){return{type:i.SelectDiscover}},d=function(e,t,n){return{type:i.SelectSpace,payload:n.find({account:t,token:e,includes:["user_space_membership","new_space_membership","new_space_report_pin"]}).catch(function(e){return null})}},u=function(e,t,n){return{type:i.SelectOrganizationSpace,payload:t.find({username:e,useEntryPath:!0,includes:["organization_space"]}).then(function(e){return r.b.getOrgSpace(e._resource)}).then(function(e){if(e)return new n.model(e);throw new Error("Failed to load organization_space")})}},p=function(e){return{type:i.SelectDefinitions,dataSourceToken:e}},h=function(){return{type:i.SelectRecent}},g=function(e,t,n,r){return{type:i.SelectSpacesIndex,payload:t.find({username:e,useEntryPath:!0}).then(function(e){if(e.user)throw new Error("user account spaces do not exist");return e.allSpaces({refresh:!0,includes:{spaces:["creator","detail"]}}).then(n.elements).then(r.buildSpacesWithCreatorAndDetail)})}},m=function(e,t,n,r,o,a){return{type:i.CreateSpaceMembership,payload:n.create({space:e.token,params:{"membership.member_token":t,includes:["member"]}}).then(function(t){return r.refresh(e,{includes:"user_space_membership"}),o.success("Added to space"),a(e),t}).catch(function(e){return o.error("Error adding user")})}},f=function(e,t,n){var r=t.user?"user_"+t.token:"organization_"+t.token,a={query:"",clearCache:!0,indexes:["reportLastEdited"],filters:"space_"+n.token+","+r,perPage:24,rawResults:!0,facets:{reportLastEdited:"archived:false"}},l={query:"",clearCache:!0,indexes:["reportLastEdited"],filters:"space_"+n.token+","+r,perPage:1,facets:{reportLastEdited:"archived:true"}};return{type:i.GetReportList,meta:{options:a},payload:e.querySpaceAndPinnedReports(a,n,!0).then(e.handleSearchResponse).then(e.handleArchivedResponse.bind(o,l))}};function includeReportsCollection(e){return e.elements().then(function(t){return{reports:t,reportsCollection:e}})}var C=function(e){return{type:i.GetReportList,payload:e.starredReports({includes:a,refresh:!0}).then(includeReportsCollection.bind(o))}},y=function(e){return{type:i.GetReportList,payload:e.viewedReports({includes:a,refresh:!0}).then(includeReportsCollection.bind(o))}},b=function(e){return{type:i.MoreReportList,payload:e.next({includes:a,refresh:!0}).then(includeReportsCollection.bind(o))}},v=function(e,t,n,r){var o=!n.query;return{type:i.FilterReportList,meta:{options:n},payload:e.querySpaceAndPinnedReports(n,t,o).then(r)}},I=function(e,t,n,r){return{type:i.MoreReportList,meta:{options:n},payload:e.querySpaceAndPinnedReports(n,t).then(r)}},S=function(e,t){return{type:i.GetSpaces,payload:e.spaces().then(t.elements)}},w=function(e){return{type:i.InsertSpace,space:e}},A=function(e){return{type:i.RemoveSpace,space:e}},M=function(e){return{type:i.DeleteSpace,space:e}},k=function(e){return{type:i.CreateSpace,space:e}},T=function(e){return{type:i.SetSpaceCount,count:e}},x=function(e,t){return{type:i.GetDataSources,payload:e.dataSources().then(t.elements)}},D=function(e,t,n,r){return{type:i.RemoveSpaceReportPin,payload:e.destroy().then(function(){return n(),t}).catch(r)}},L=function(e,t,n,r,o){return{type:i.CreateSpaceReportPin,payload:e.create({space:t.token,params:{"space_report_pin.report_token":n.token}}).then(function(e){return r(),{report:n,spaceReportPin:e}}).catch(o)}},R=function(e,t,n){var r=n.user?"user_"+n.token:"organization_"+n.token,o={query:"",clearCache:!0,indexes:["reportLastEdited"],filters:"editor_"+t.token+","+r,perPage:24,rawResults:!0,facets:{reportLastEdited:"archived:false"}};return{type:i.GetReportList,meta:{options:o},payload:e.querySpace(o).then(e.handleSearchResponseWithSpaces)}},N=function(e,t,n){return{type:i.GetDefinitionList,payload:e.query(t).then(n)}},E=function(e,t,n){return{type:i.MoreDefinitionList,payload:e.query(t).then(n)}},j=function(e){return{type:"list"===e?i.SetReportListToggleList:i.SetReportListToggleTile}}},iJVT:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("m9my"),i=(n.n(o),n("yqn6")),a=n("AKo7");!function(e){var t=a.a.QuarterNamesByNumber,n=a.a.WeekdayNamesByNumber,r=a.a.MonthNamesByNumber;function makeStacked(e,t,n){var r=t.marks,o=r.series,a=r.properties,l=o.length?o[0].properties:a,s=t.x[0],c=l.color.values[0];if(s){var d=n.x;t=addNamesOrFilter(e,t,s,d.name,d.value).encoding}if(c)if(1===t.value.length)t=Object(i.v)(t).encoding;else{var u=n.series.color;t=addNamesOrFilter(e,t,c,u.name,u.value).encoding}return Object(i.s)(t)}function makeCombo(e,t,n){var r=t.x[0],o=t.y[0],a=t.y2[0],l=e.buildViewCalcField(o.formula,o.variable.type,o.id),s=e.buildViewCalcField(a.formula,a.variable.type,a.id);if(r){var c=n.x,d=c.name,u=c.value;t=addNamesOrFilter(e,t,r,d,u).encoding}return t.marks.series.forEach(function(r){t=function(t,r){var o=n.y||n.y2;if(r.field===l.id){var a=e.getDefaultMeasureName(l);o.name!==a&&(t=Object(i.D)(t,s.id).encoding,t=Object(i.y)(t,"linePlusBar",l.id).encoding)}else r.field===s.id&&(a=e.getDefaultMeasureName(s),o.name!==a&&(t=Object(i.y)(t,"linePlusBar",s.id).encoding));return Object(i.s)(t)}(t,r).encoding}),Object(i.s)(t)}function makeGrouped(e,t,n){var r=t.marks,o=r.series,a=r.properties,l=o.length?o[0].properties:a,s=t.column[0],c=l.color.values[0];if(s){var d=n.columns[0];t=addNamesOrFilter(e,t,s,d.name,d.value).encoding}if(c){var u=n.series.color;t=addNamesOrFilter(e,t,c,u.name,u.value).encoding}return Object(i.s)(t)}function makeRadial(e,t,n){var r=t.marks,o=r.series,a=r.properties,l=(o.length?o[0].properties:a).color.values[0];if(l){var s=n.series.color;t=addNamesOrFilter(e,t,l,s.name,s.value).encoding}return Object(i.s)(t)}function addNamesOrFilter(e,a,l,s,c){if(l.formula!==o.SystemFieldName.NAMES){var d=function(e,i,a,l){var s=e.buildViewCalcField(a.formula,a.variable.type,a.id),c=function(){return l.map(function(e){return parseFloat(e)})},d=function(e){return{selected:e,mode:o.SelectionMode.INCLUDE}};switch(s.formula.form){case o.FormType.DATEFUNC:var u=[];if("DATETRUNC"===s.formula.funcName)u=c();else switch(s.formula.datePart.toUpperCase()){case"WEEKDAY":u=l.map(function(e){return n[e]});break;case"MONTH":u=l.map(function(e){return r[e]});break;case"QUARTER":u=l.map(function(e){return t[e]});break;default:u=c()}return d(u);default:switch(s.dataType){case o.DataType.BOOLEAN:return d(l.map(function(e){return!0===e||"true"===e}));case o.DataType.STRING:return d(l.map(function(e){return""+e}));case o.DataType.DATE:case o.DataType.DATETIME:return d(c());case o.DataType.INTEGER:case o.DataType.FLOAT:case o.DataType.NUMBER:return d(c())}}}(e,0,l,[c]),u={formula:l.formula,variable:{type:o.VariableType.DISCRETE},selection:d,filterType:o.FilterType.Discrete};return Object(i.d)(a,u)}return Object(i.e)(a,e,c)}e.make=function(e,t,n){var r=!1,i=!1,a=function(e){return o.MarkType.Line,e.marks.series.length>0?e.marks.series[0].properties.type.value:e.marks.properties.type.value}(t);switch(t.marks.series.length>1&&(i=!0),t.x.length>0&&t.x[0].formula===o.SystemFieldName.NAMES&&(r=!0),t.marks.series.length&&t.marks.series[0].properties.size.values.length,a){case o.MarkType.Bar:return i?makeCombo(e,t,n):r?makeGrouped(e,t,n):makeStacked(e,t,n);default:case o.MarkType.Line:case o.MarkType.Area:case o.MarkType.TotalArea:case o.MarkType.Circle:return makeStacked(e,t,n);case o.MarkType.Pie:case o.MarkType.Donut:return makeRadial(e,t,n)}},e.makeStacked=makeStacked,e.makeCombo=makeCombo,e.makeGrouped=makeGrouped,e.makeRadial=makeRadial,e.addNamesOrFilter=addNamesOrFilter}(r||(r={}))},iJaZ:function(e,t,n){"use strict";var r=n("0YuG");n.n(r),n("PiCI");r.module("mode.components").directive("inPlaceEdit",["$timeout",function(e){return{restrict:"E",template:'<div class="in-place-edit">\n        <div class="in-place-edit-text" ng-click="!noEdit && startEditText();" ng-hide="editing" ng-class="{empty: !text}">\n          <i class="icon-action-edit-default" ng-hide="noEdit"></i>{{ noEdit ? text : (text || altText || \'Click to add text\') }}\n        </div>\n        <div class="in-place-edit-form">\n          <input type="text" maxlength="250" class="in-place-edit-input" ng-model="value" ng-show="editing" ng-blur="endEditText()" />\n        </div>\n       </div>',scope:{text:"=",altText:"@",onChange:"&",onUpdate:"&",noBlank:"=",noEdit:"="},link:function(t,n){var r=$(n).find(".in-place-edit-input");function resizeInput(){r.attr("size",r.val().length+6)}r.on("keydown focus input propertychange change",resizeInput).each(resizeInput),t.startEditText=function(){t.noEdit||(t.editing=!0,t.value=t.text,e(function(){r.on("keypress.enterblur",function(e){13===(e.keyCode||e.which)&&r.blur()}),r.on("keyup",function(e){27===e.which&&t.$apply(function(){t.value=t.text,t.endEditText()})}),r.focus(),r.select()}))},t.endEditText=function(){r.off("keypress.enterblur"),r.off("keyup"),t.editing=!1,!t.noBlank||t.value?t.value!==t.text&&(t.onChange({$text:t.value}),"function"==typeof t.onUpdate()&&(t.onUpdate()(t.value),console.warn('inPlaceEditDirective::onUpdate is deprecated. Please use "onEdit" instead'))):t.value=t.text}}}}])},ieZ5:function(e,t,n){"use strict";t.a=function(e,t){switch(t.formula){case r.SystemFieldName.VALUES:return e.buildViewSystemField(r.SystemFieldName.VALUES,t.id);case r.SystemFieldName.NAMES:return e.buildViewSystemField(r.SystemFieldName.NAMES,t.id);case r.SystemFieldName.MULTIPLE:break;default:return e.buildViewCalcField(t.formula,t.variable.type,t.id)}};var r=n("m9my");n.n(r)},iei7:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+YmFja19kaXNhYmxlZDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iYmFjay1kaXNhYmxlZC1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMC4wMDAwMDAsIDguMDAwMDAwKSByb3RhdGUoLTM2MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTAuMDAwMDAwLCAtOC4wMDAwMDApIHRyYW5zbGF0ZSgyLjAwMDAwMCwgNC4wMDAwMDApIj4KICAgICAgICAgICAgPHBhdGggZD0iTTMuNSw0IEwxNS41LDQiIGlkPSJMaW5lIiBzdHJva2U9IiNCMUIyQkEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjM0MDEwOTIxNCw0LjU1ODQwNDA3IEMtMC4xMTMxODgwMzIsNC4yNDk3MzI4NCAtMC4xMTM2NjY5OTMsMy43NDk2MDQwNSAwLjM0MDEwOTIxNCwzLjQ0MDYwNjY3IEw1LjE3OTEzMzYzLDAuMTQ1NDg5MzU3IEM1LjYzMjQzMDg3LC0wLjE2MzE4MTg3MSA1Ljk5OTkwMDksMC4wMzYzOTg2Mjc4IDUuOTk5OTAwOSwwLjU4MTg2OTIzOSBMNS45OTk5MDA5LDcuNDE3MTQxNTEgQzUuOTk5OTAwOSw3Ljk2NjgxODY5IDUuNjMyOTA5ODMsOC4xNjI1MTg3NiA1LjE3OTEzMzYzLDcuODUzNTIxMzkgTDAuMzQwMTA5MjE0LDQuNTU4NDA0MDcgWiIgaWQ9IlRyaWFuZ2xlIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},j6yJ:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+YmFja19lbmFibGVkPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Im1vY2t1cHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJCYWNrLUVuYWJsZWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCA0LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNDIiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTQuNSwzLjUgTDE3LjUsMy41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjMwNDUxNjYyOSw0LjA4NzI5MzEzIEMtMC4xNDQzNTg1MDUsMy43NjM1Nzg0NCAtMC4xNDY4MzI0NDUsMy4yNDA1MTczNiAwLjMwNDUxNjYyOSwyLjkxNTAxODU0IEw0LjE4NzIzOTY3LDAuMTE0OTIwMjc2IEM0LjYzNjExNDgxLC0wLjIwODc5NDQxNCA1LC0wLjAyMTMwOTczNTggNSwwLjUzNDk5MDUxNSBMNSw2LjQ2NzMyMTE2IEM1LDcuMDIzMDM0MjQgNC42Mzg1ODg3NSw3LjIxMjg5MDIyIDQuMTg3MjM5NjcsNi44ODczOTE0IEwwLjMwNDUxNjYyOSw0LjA4NzI5MzEzIFoiIGlkPSJUcmlhbmdsZSIgZmlsbD0iIzYzNjU2RSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},jc3r:function(e,t,n){"use strict";t.a=function(e){return e}},jvTj:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDx0aXRsZT4KICAgICAgICBhbmdsZS1tYXJrCiAgICA8L3RpdGxlPgogICAgPHBhdGggZD0iTTIuNjg0IDMuNjM0Yy4zMi0uMTU1LjY3NS0uMzEgMS4wNTYtLjQ1NUM0Ljg2IDIuNzUgNS45NzUgMi41IDcgMi41czIuMTQuMjU0IDMuMjYuNjhjLjM4LjE0NC43MzYuMyAxLjA1Ni40NTRMNy4wNCAxMS40OGMtLjA3NS4xNC0uMDA1LjE0LS4wOCAwTDIuNjg0IDMuNjM1eiIgc3Ryb2tlPSIjNzU3Nzg0IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg=="},jzb9:function(e,t){e.exports='<div class="share-dialog">\n  <div ng-show="ctrl.view.embed">\n    <h3 class="modal-header">Embed<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n    <div class="modal-tabs" ng-if="ctrl.signedEmbedEnabled">\n      <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\x3c!--\n        --\x3e<li class="active"><a href="#"><i class="share-icon icon-embed-selected"></i>Embed</a></li>\x3c!--\n        --\x3e<li><a href="#" ng-click="ctrl.setView(\'whiteLabel\')"><i class="share-icon icon-embed"></i>White-Label Embed</a></li>\n      </ul>\n    </div>\n    <div class="modal-external" ng-if="ctrl.view.embed && ctrl.secretEmbedEnabled" ng-class="{shared: ctrl.embedKey}">\n      <span class="checkbox-lg" ng-if="ctrl.report.canToggleSecret">\n        <input id="toggleEmbedReport" type="checkbox" ng-model="ctrl.toggles.embedEnabled" ng-change="!ctrl.toggles.embedEnabled ? ctrl.disableSecretEmbed() : ctrl.enableSecretEmbed()" />\n        <label for="toggleEmbedReport">\n          <span class="toggle">\n            <i class="icon icon-embed-narrow-black checkmark"></i>\n            <span class="switch"></span>\n            <i class="icon icon-lock-black unchecked"></i>\n          </span>\n        </label>\n      </span>\n      <span class="checkbox-text">Secret embedding of this report is <strong>{{ ctrl.embedKey ? \'ON\' : \'OFF\' }}</strong></span>\n    </div>\n    <div class="modal-container clearfix">\n      <div class="modal-heading-2">Internal Embeds</div>\n      <div class="line-height-sm">\n        Internal embeds are visible to logged in members of {{ ctrl.owner.name }} <br />\n        <a href="https://help.modeanalytics.com/articles/embed-a-report-on-other-sites/">Learn more</a>\n      </div>\n\n      <div class="link-group">\n        <label>Embed via Javascript</label>\n        <button clippy ng-model="ctrl.reportRun.embedLink" class="btn btn-secondary">Copy</button>\n        <div select-on-click>{{ ctrl.reportRun.embedLink }}</div>\n      </div>\n\n      <div class="link-group">\n        <label>Embed via static iframe</label>\n        <button clippy ng-model="ctrl.reportRun.iframeLink" class="btn btn-secondary">Copy</button>\n        <div select-on-click>{{ ctrl.reportRun.iframeLink }}</div>\n      </div>\n\n      <div ng-if="ctrl.embedKey">\n        <hr />\n\n        <div class="modal-heading-2">Secret Embeds</div>\n        <div class="line-height-sm">\n          Secret embeds are visible to anyone and do not require log in <br />\n          <a href="https://help.modeanalytics.com/articles/embed-reports-that-dont-require-login/">Learn more</a>\n        </div>\n\n        <div class="link-group">\n          <label>Embed via Javascript</label>\n          <button clippy ng-model="ctrl.reportRun.secretEmbedLink" class="btn btn-secondary">Copy</button>\n          <div select-on-click>{{ ctrl.reportRun.secretEmbedLink }}</div>\n        </div>\n\n        <div class="link-group">\n          <label>Embed via static iframe</label>\n          <button clippy ng-model="ctrl.reportRun.secretIframeLink" class="btn btn-secondary">Copy</button>\n          <div select-on-click>{{ ctrl.reportRun.secretIframeLink }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="ctrl.view.whiteLabel">\n    <h3 class="modal-header">White-Label Embed<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n    <div class="modal-tabs">\n      <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\x3c!--\n        --\x3e<li><a href="#" ng-click="ctrl.setView(\'embed\')"><i class="share-icon icon-embed"></i>Embed</a></li>\x3c!--\n        --\x3e<li class="active"><a href="#"><i class="share-icon icon-embed-selected"></i>White-Label Embed</a></li>\n      </ul>\n    </div>\n    <div class="modal-external" ng-if="ctrl.view.whiteLabel && ctrl.signedEmbedEnabled" ng-class="{ shared: ctrl.report.is_signed }">\n      <span class="checkbox-lg">\n        <input id="toggleSignedEmbed" type="checkbox" ng-model="ctrl.report.is_signed" ng-change="ctrl.toggleSignedEmbed()" />\n        <label for="toggleSignedEmbed">\n          <span class="toggle">\n            <i class="icon icon-embed-narrow-black checkmark"></i>\n            <span class="switch"></span>\n            <i class="icon icon-lock-black unchecked"></i>\n          </span>\n        </label>\n      </span>\n      <span class="checkbox-text">White-Label embedding of this report is <strong>{{ ctrl.report.is_signed ? \'ON\' : \'OFF\' }}</strong></span>\n    </div>\n    <div class="modal-container clearfix">\n      <p class="line-height-sm">\n        White-Label Embeds allow you to programmatically embed reports with specific parameters that can\'t be changed.\n      </p>\n\n      <p class="line-height-sm">\n        Using White-Label Embeds, you can provide customers and partners access to data, specific data-and only that\n        specific data.\n      </p>\n      <div>\n        <a href="https://about.modeanalytics.com/embedded-analytics" target="_blank" rel="noopener">Learn more</a>\n        |\n        <a href="https://help.modeanalytics.com/articles/setting-up-white-label-embeds/" target="_blank" rel="noopener">Setup guide</a>\n      </div>\n\n      <div ng-class="{ disabled: !ctrl.report.is_signed }" class="public-links">\n        <hr />\n\n        <div class="link-group">\n          <label>Javascript embed template code</label>\n          <button clippy ng-model="ctrl.report.signedEmbedLink" class="btn btn-secondary">Copy</button>\n          <div select-on-click>{{ ctrl.report.signedEmbedLink }}</div>\n        </div>\n\n        <div class="link-group">\n          <label>iframe embed template code</label>\n          <button clippy ng-model="ctrl.report.signedIFrameLink" class="btn btn-secondary">Copy</button>\n          <div select-on-click>{{ ctrl.report.signedIFrameLink }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},"k+LH":function(e,t,n){"use strict";var r=n("0iPh"),o=n.n(r),i=n("0YuG"),a=(n.n(i),function(e,t){return{restrict:"A",link:function(n,r){var i=!1,a=function(t){n.onDocBlur&&i&&!o()(t.target).closest(r).length&&(o()(e.document).off("mousedown."+n.docBlur,a),n.$apply(function(){n.onDocBlur({$event:t})}))};n.$watch("docBlurHasFocus",function(r){i=r,r&&t(function(){o()(e.document).on("mousedown."+n.docBlur,a)},0,!1)}),n.$on("$destroy",function(){o()(e.document).off("mousedown."+n.docBlur,a)})},scope:{onDocBlur:"&",docBlurHasFocus:"<",docBlur:"<"}}});a.$inject=["$window","$timeout"],i.module("mode.components").directive("docBlur",a)},"k/lX":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("0YuG"),o=(n.n(r),n("J631")),i=n.n(o);n("IU2V");r.module("mode.api").factory("ModeForm",["$q","$http","ModeAPI","$log",function(e,t,n,o){return function(){function ModeForm(e,t){this.$initialize.apply(this,arguments)}return ModeForm.prototype.$initialize=function(e,t){this.resourceType=e;var n=this;r.forEach(t,function(e,t){if("input"===t){var o={};r.forEach(e,function(e,t){o[t]=e}),n._inputs=o}else n[t]=e})},ModeForm.prototype.inputs=function(e,t){for(var n=t.split("."),r=e[n[0]],o=1;o<n.length;o++){if(null==r)return null;r=r[n[o]]}return r},ModeForm.prototype.$submit=function(i,a,l){var s,c=e.defer(),d=this,u=r.copy(this._inputs),p=r.copy(i),h=n.stripIncludes(p);r.forEach(p,function(e,t){s=d.inputs(u,t),r.isDefined(s)&&null!==s?null!==e&&(s.value=e):o.debug("Could not find input: ",t)});var g="",m=null;if("get"===this.method){g=this.$expand(this.$serialize(u));var f={method:this.method,url:g};h&&(f.params=h),m=t(f)}else{var C={},y={};this.content_type&&(y["Content-Type"]=this.content_type),g=this.$expand(a),C=r.extend(C,this.$serialize(u));f={method:this.method,data:C,url:g,headers:y,timeout:l};h&&(f.params=h),m=t(f)}o.debug("Submitting",this.method,g,C);var b=this.resourceType;return m.then(function(e){c.resolve(new b(e.data))},c.reject),c.promise},ModeForm.prototype.$expand=function(e){return i()(n.$expand(this.action)).fill(e)},ModeForm.prototype.$serialize=function(e){var t={},n=e||this._inputs,o=function(e,n){r.forEach(e,function(i,a){"value"!==a||r.isObject(i)&&!r.isArray(i)?r.isObject(i)&&(n.push(a),o(i,n),n.pop()):function(e,n,o){for(var i=t,a=0;a<o.length;a++)a+1<o.length?(null==i[o[a]]&&(i[o[a]]={}),i=i[o[a]]):"boolean"==typeof n||"number"==typeof n||r.isArray(n)&&n.length||!r.isArray(n)&&n?i[o[a]]=n:"text"===e.type&&(i[o[a]]="")}(e,"boolean"==typeof i||"number"==typeof i?i:i||"",n)})};return r.forEach(n,function(e,t){var n=[];r.isDefined(e)&&(n.push(t),o(e,n),n.pop())}),t},ModeForm}()}])},k3BA:function(e,t,n){"use strict";var r=n("0YuG"),o=n("cRYW"),i=n("CwcT"),a=n("PbPb"),l=n("3Os4"),s=n("3cAX"),c=n("glR0"),d=n("8SYn"),u=n("9jGw"),p=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h=function(){function QueryDataService(e,t,n,r,o,i,a,d,u){var p=this;this.store=e,this.QueryModel=t,this.ViewService=n,this.$timeout=r,this.ReportSaveService=o,this.$rootScope=i,this.$q=a,this.AlertService=d,this.api=u,this.store.actions.filter(function(e){return e.type===l.a.LoadEmbeddedQueries}).map(function(e){return e.type===l.a.LoadEmbeddedQueries?e:null}).switchMap(function(e){return p.api.getResources(e.report,"queries").then(function(e){return p.store.dispatch({type:l.a.LoadQueriesSuccess,queries:e})}).catch(function(e){return p.store.dispatch({type:l.a.LoadQueriesFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.UpdateQueryText||e.type===l.a.UpdateQueryDatasource}).map(function(e){return e.type===l.a.UpdateQueryText||e.type===l.a.UpdateQueryDatasource?e:null}).map(function(e){return e.payload}).do(function(e){return p.store.dispatch({type:l.a.UpdateQueryState,queryToken:e.queryToken})}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.UpdateSelectedQueryText}).map(function(e){return e.type===l.a.UpdateSelectedQueryText?e:null}).withLatestFrom(this.store.select(c._4)).map(function(e){e[0];return e[1]}).do(function(e){return p.store.dispatch({type:l.a.UpdateQueryState,queryToken:e})}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.FormatQuerySuccess}).map(function(e){return e.type===l.a.FormatQuerySuccess?e:null}).map(function(e){return e.payload}).do(function(e){return p.store.dispatch({type:l.a.UpdateQueryState,queryToken:e.query.token})}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.CreateQuery}).map(function(e){return e.type===l.a.CreateQuery?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.s)).switchMap(function(e){var t=e[0],n=e[1];return t.name="Query "+(n.size+1),p.createQueryModel(t).then(function(e){p.$timeout(function(){p.ViewService.selectQuery(e,!0)}),e._resource.token=e.token,p.store.dispatch({type:l.a.CreateQuerySuccess,payload:e._resource})}).catch(function(e){return p.store.dispatch({type:l.a.CreateQueryFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.SaveQuery}).map(function(e){return e.type===l.a.SaveQuery?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.s)).switchMap(function(e){var t=e[0],n=e[1],r=t.query.token,o=n.get(t.query.token);return p.saveOrUpdateQuery(o,t.reportToken,r)}).do(function(e){return p.store.dispatch(e)}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.UpdateQuery}).map(function(e){return e.type===l.a.UpdateQuery?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.s)).switchMap(function(e){var t=e[0],n=e[1].get(t.token);return p.saveOrUpdateQuery(n)}).do(function(e){return p.store.dispatch(e)}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.FormatQuery}).map(function(e){return e.type===l.a.FormatQuery?e:null}).throttle(function(){return s.Observable.interval(1e3)}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.s)).withLatestFrom(this.store.select(c.B)).switchMap(function(e){var t=e[0],n=t[0],r=t[1],o=e[1],i=r.get(n.queryToken),a=o.get(n.reportToken);return p.handleFormatUnformatQuery(i,a)}).do(function(e){return p.store.dispatch(e)}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.BatchSaveOrUpdateQueryState}).map(function(e){return e.type===l.a.BatchSaveOrUpdateQueryState?e:null}).map(function(e){return e.reportToken}).withLatestFrom(this.store.select(c.q)).switchMap(function(e){var t=e[0],n=e[1].map(function(e){var n=e.token;return p.saveOrUpdateQuery(e,t,n,!1).then(function(e){return p.store.dispatch(e)})});return p.$q.all(n)}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.UpdateQueryName}).map(function(e){return e.type===l.a.UpdateQueryName?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.s)).switchMap(function(e){var t=e[0],n=e[1].get(t.queryToken);return n.name=t.queryName,p.saveOrUpdateQuery(n,"","",!0)}).do(function(e){return p.store.dispatch(e)}).subscribe(),this.store.actions.filter(function(e){return e.type===l.a.DestroyQuery}).map(function(e){return e.type===l.a.DestroyQuery?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.s)).switchMap(function(e){var t=e[0],n=e[1],r=n.get(t.token),o=p.ReportSaveService.queries[t.token],i=o?o.storedCharts:[],a=o?o.storedTables:[];return p.destroyQueryModel(r.resource).then(function(){p.cleanupReportSaveService(r.resource,i,a,n.map(function(e){return e.resource})),p.store.dispatch({type:l.a.DestroyQuerySuccess,payload:r.resource})}).catch(function(e){return p.store.dispatch({type:l.a.DestroyQueryFailure,error:e})})}).subscribe()}return QueryDataService.prototype.createQueryModel=function(e){return this.QueryModel.putLocal(e)},QueryDataService.prototype.saveOrUpdateQuery=function(e,t,n,r){var o=this;if(e.resource._new_query)return this.saveQueryModel(e.resource,t).then(function(e){return delete e._resource._new_query,delete o.ReportSaveService.queries[n],o.ReportSaveService.queries[e.token]=e,o.ReportSaveService.updateQuery(e),o.ViewService.selectQuery(e,!1),{type:l.a.SaveQuerySuccess,payload:{query:e._resource,oldToken:n}}}).catch(function(e){return{type:l.a.SaveQueryFailure,error:e}});var i=e.resource.generate(p({},e.resource,{raw_query:e.raw_query,data_source_id:e.data_source_id,name:e.name,limit:e.limit}));return this.updateQueryModel(i).then(function(e){return o.ReportSaveService.queries[e.token]=e,o.ReportSaveService.updateQuery(e),r&&o.$rootScope.$broadcast("preview.update",{updateQuery:{token:e.token,name:e.name}}),{type:l.a.UpdateQuerySuccess,payload:e._resource}}).catch(function(e){return{type:l.a.UpdateQueryFailure,error:e}})},QueryDataService.prototype.saveQueryModel=function(e,t){var n=this.ReportSaveService.queries[e.token],r=new this.QueryModel.model(e,{ignoreEmbedded:!0});n&&(n.extendAttributes(r),r=n);var o=r.toParams();return o.includes=["charts","query_tables"],this.QueryModel.create({report:t,params:o},r)},QueryDataService.prototype.updateQueryModel=function(e){var t=new this.QueryModel.model(e,{ignoreEmbedded:!0});return this.QueryModel.update(t)},QueryDataService.prototype.destroyQueryModel=function(e){return new this.QueryModel.model(e,{ignoreEmbedded:!0}).destroy()},QueryDataService.prototype.handleFormatUnformatQuery=function(e,t){var n=this,r=(this.$q.defer(),null);if(this.formatUndoable(e))return r={type:l.a.FormatQuerySuccess,payload:{query:e.resource,formatted:!1,raw_query:e.original_query}},this.$q.resolve(r);if(this.formatCached(e))return r={type:l.a.FormatQuerySuccess,payload:{query:e.resource,formatted:!0,raw_query:e.formatted_query}},this.$q.resolve(r);var o=e.raw_query;return t.embedded("sql_formatter").forms("format").$submit({"query.raw_query":e.raw_query,"query.token":e.token}).then(function(t){return r={type:l.a.FormatQuerySuccess,payload:{query:e.resource,formatted:!0,raw_query:t.formatted_query,original_query:o,formatted_query:t.formatted_query}}}).catch(function(e){return r={type:l.a.FormatQueryFailure,error:e},n.AlertService.error("Formatting Error: "+n.validateFormatErrorMessage(e)),r})},QueryDataService.prototype.formatCached=function(e){return e.formatted_query&&e.original_query&&e.original_query===e.raw_query},QueryDataService.prototype.formatUndoable=function(e){return(e.original_query!==e.formatted_query||!1!==e.formatted)&&(e.original_query&&e.formatted_query&&e.formatted_query===e.raw_query)},QueryDataService.prototype.validateFormatErrorMessage=function(e){return 400==e.status?"Sorry, there is a problem with your query.  Please check it and try again.":404==e.status?"Sorry, there is a problem with your query. Please check it and try again.":413==e.status?"Sorry, the query is too big.":429==e.status||503==e.status?"Sorry, the formatter is busy.  Please try again later.":"Sorry, something went wrong. Please try again."},QueryDataService.prototype.cleanupReportSaveService=function(e,t,n,r){var o=this;Object(a.each)(t,function(e){o.ReportSaveService.removeChart(e.token),o.ViewService.removeVizFromLayout("chart_"+e.token,"chart"),e.destroy({silent:!0})}),Object(a.each)(n,function(e){o.ReportSaveService.removeTable(e.token),o.ViewService.removeVizFromLayout("table_"+e.token,"table"),e.destroy({silent:!0})}),this.ReportSaveService.removeQuery(e.token),this.$timeout(function(){var t=o.ViewService.views.selectedQuery,n=r.filter(function(t){return t.token!==e.token}).valueSeq().toArray();!t||t.token!==e.token&&e.mapping_id!==t.token||(r.size&&n.length?o.ViewService.selectQuery(r.get(n[0].token),!0):o.ViewService.selectQuery(null,!1)),o.store.dispatch({type:d.a.UpdateReport,payload:{token:o.ReportSaveService.report.token,strategy:d.b.SilentAndRefreshPreview}})})},Object.defineProperty(QueryDataService.prototype,"editorSelectedQuery$",{get:function(){return this.store.select("client","selectedReport","editorSelectedQuery")},enumerable:!0,configurable:!0}),Object.defineProperty(QueryDataService.prototype,"editorQueriesAndSelected$",{get:function(){return this.store.select("client","selectedReport","queries").combineLatest(this.editorSelectedQuery$,function(e,t){var n=t.token;return{queries:e,selectedToken:n,selectedQuery:e.getRecord(n)}})},enumerable:!0,configurable:!0}),Object.defineProperty(QueryDataService.prototype,"queriesAndSelected$",{get:function(){return this.store.select("client","selectedReport","queries").combineLatest(this.store.select(c._4),function(e,t){return{queries:e,selectedToken:t,selectedQuery:e.getRecord(t)}})},enumerable:!0,configurable:!0}),Object.defineProperty(QueryDataService.prototype,"storedChartsAndTables$",{get:function(){return this.store.select(u.a.getChartsByQueries).map(function(e){var t={};return e.forEach(function(e,n){t[n]=e.map(function(e){return e.resource}).toArray()}),t}).combineLatest(this.store.select("client","selectedReport","tablesByQuery").withLatestFrom(this.store.select("client","selectedReport","tables"),function(e,t){var n={};return e.forEach(function(e,r){n[r]=t.getRecords(e.toArray())}),n}),function(e,t){return{storedTables:t,storedCharts:e}})},enumerable:!0,configurable:!0}),QueryDataService.prototype.addQuery=function(e){this.store.dispatch({type:l.a.CreateQuery,payload:e})},QueryDataService.prototype.saveQuery=function(e,t){this.store.dispatch({type:l.a.SaveQuery,payload:{query:e,reportToken:t}})},QueryDataService.prototype.updateQuery=function(e){this.store.dispatch({type:l.a.UpdateQuery,payload:e})},QueryDataService.prototype.updateQueryText=function(e,t){this.store.dispatch({type:l.a.UpdateQueryText,payload:{queryToken:e,queryText:t}})},QueryDataService.prototype.updateSelectedQueryText=function(e){this.store.dispatch({type:l.a.UpdateSelectedQueryText,payload:{queryText:e}})},QueryDataService.prototype.updateQueryName=function(e,t){this.store.dispatch({type:l.a.UpdateQueryName,payload:{queryToken:e,queryName:t}})},QueryDataService.prototype.updateQueryLimit=function(e,t){this.store.dispatch({type:l.a.UpdateQueryLimit,payload:{queryToken:e,queryLimit:t}})},QueryDataService.prototype.updateQueryDatasource=function(e,t){this.store.dispatch({type:l.a.UpdateQueryDatasource,payload:{queryToken:e,queryDatasource:t}})},QueryDataService.prototype.destroyQuery=function(e){this.store.dispatch({type:l.a.DestroyQuery,payload:{token:e.token}})},QueryDataService.prototype.batchSaveOrUpdateQueryState=function(e){this.store.dispatch({type:l.a.BatchSaveOrUpdateQueryState,reportToken:e})},QueryDataService.prototype.batchUpdateQueries=function(e){this.store.dispatch({type:l.a.BatchUpdateQueries,payload:e})},QueryDataService.prototype.loadQueries=function(e){this.store.dispatch({type:l.a.LoadQueriesSuccess,queries:e})},QueryDataService.prototype.formatQuery=function(e,t){this.store.dispatch({type:l.a.FormatQuery,payload:{queryToken:e,reportToken:t}})},QueryDataService.$inject=["RxStoreService","QueryModel","ViewService","$timeout","ReportSaveService","$rootScope","$q","AlertService","ApiService"],QueryDataService}(),g=n("7n0L"),m=function(){function ColumnOptionsService(e){this.vos=e}return ColumnOptionsService.prototype.allColumnSettings=function(e){return"string"==typeof e?this.vos.hasOptionsFor(e)?this.vos.getOptionResource(e).columnFormatSettings():{}:e},ColumnOptionsService.prototype.configuredColumns=function(e){return Object.keys(this.allColumnSettings(e))},ColumnOptionsService.prototype.columnSettings=function(e,t){var n=this.allColumnSettings(e);return n.hasOwnProperty(t)?n[t]:{}},ColumnOptionsService.prototype.columnType=function(e,t){var n=this.columnSettings(e,t);return n&&n.hasOwnProperty("type")?n.type:null},ColumnOptionsService.prototype.columnTypeVariant=function(e,t){var n=this.columnTypeSettings(e,t);return n&&n.hasOwnProperty("type")?n.type:null},ColumnOptionsService.prototype.columnTypeSettings=function(e,t){var n=this.columnType(e,t),r=this.columnSettings(e,t);return r&&r.hasOwnProperty(n)?r[n]:null},ColumnOptionsService.prototype.columnTypeSetting=function(e,t,n){var r=this.columnTypeSettings(e,t);return r&&r.hasOwnProperty(n)?r[n]:null},ColumnOptionsService.$inject=["ViewOptionsService"],ColumnOptionsService}(),f=n("0iPh"),C=n.n(f);function loadScripts(e,t){return e&&e.length?function(e,t){return t=C.a.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)}(e.shift()).then(function(){return t.removeScript(),loadScripts(e,t)}):C.a.Deferred().resolve()}var y=function(){function ScriptWatchingService(e){this.$q=e}return ScriptWatchingService.prototype.setupScope=function(e,t){var n=0;t=t||this.$q.defer(),e.ready=t.promise;var o=[];e.addScript=function(e){n+=1,o.push(e)},e.removeScript=function(){0===(n-=1)&&t.resolve(!0)},e.didInsertLayout=function(){0===n&&t.resolve(!0)},e.$watch("dataset",function(n){r.isUndefined(n)||loadScripts(o,e).then(function(){t.resolve(!0)})})},ScriptWatchingService.$inject=["$q"],ScriptWatchingService}(),b=n("dsf/"),v={jpy:"jaJP",usd:"enUS",eur:"eur",gbp:"enGB",aud:"enAU",chf:"frCH",cad:"enCA",mxn:"esMX",cny:"zhCN",nzd:"enNZ"},I=[n("u5jn").j.reduce(function(e,t){return e.subLocale.push({id:v[t.id],decimal:t.decimalStyle,thousands:t.thousandSeparator,grouping:[t.thousandGroup],currency:"after"===t.symbolPlacement?["",t.symbol]:[t.symbol,""]}),e},{id:"enUS",subLocale:[],decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})];function get(e,t){var n,r,o;if(void 0===t&&(t=null),1===e.length)o=Object(a.omit)(Object(a.find)(I,{id:e[0]}),["subLocale"]);else{if(2!==e.length)throw new Error("Invalid query parameter");n=Object(a.find)(I,{id:e[0]}),r=Object(a.find)(n.subLocale,{id:e[1]}),o=Object(a.omit)(Object(a.assign)({},n,r),["subLocale","id"])}return t&&Object(a.assign)(o,t),o}var S=n("AEC+"),w=function(){function FormatOptionsService(e){this.cos=e}return FormatOptionsService.prototype.columnLocaleSettings=function(e){var t=FormatOptionsService.columnTypeSettingsToLocaleOptions;return this.getLocalePresets(["enUS"],t(e))},FormatOptionsService.columnTypeSettingsToLocaleOptions=function(e){var t;return"{}"!==JSON.stringify(e)?(t={decimal:e.decimalStyle,thousands:e.thousandSeparator,grouping:[e.thousandGroup]},e.symbolPlacement&&(t.currency="after"===e.symbolPlacement?["",e.symbol]:[e.symbol,""])):t={thousands:""},t},FormatOptionsService.prototype.getLocalePresets=function(e,t){return t?get(e,t):get(e)},FormatOptionsService.prototype.getPresetFormatters=function(e){var t=this;return this.cos.configuredColumns(e).filter(function(e){return function(n){var r=t.cos.columnType(e,n),o=t.cos.columnTypeVariant(e,n);return"string"==typeof o&&"custom"!==o&&("financial"===r||"currency"===r)}}(e)).reduce(this.presetCurrencyReducer(e),{})},FormatOptionsService.prototype.getFormatter=function(e,t,n,r,o){var i=this,a=this.cos.columnTypeVariant(e,t),l={"plain-text":function(){return b.h()},automatic:function(){return n instanceof S.a?l.date():l["plain-text"]()},date:function(){return i.customDateFormatter(e,t)},number:function(){return i.customFormatter(e,t,r)},financial:function(){return o[t]},currency:function(){return l.financial()},percentage:function(){return l.number()},custom:{financial:function(){return l.number()},currency:function(){return l.number()}}},s=l["plain-text"];return(("custom"!==a?l[r]:l.custom[r])||s)()},FormatOptionsService.prototype.presetCurrencyReducer=function(e){var t=this;return function(n,r){return t.pushFormatter(n,r,t.getCurrencyFormatter(e,r)),n}},FormatOptionsService.prototype.pushFormatter=function(e,t,n){if(!n)throw new Error("Invalid Formatter method");if(e[t])throw new Error("Cannot override existing formatter");return e[t]=n,e},FormatOptionsService.prototype.getCurrencyFormatter=function(e,t){var n=this.cos.columnType(e,t),r=this.cos.columnTypeVariant(e,t),o=this.getCurrencyFormatterConfig(r);return"financial"===n?b.c(o):b.a(o)},FormatOptionsService.prototype.getCurrencyFormatterConfig=function(e){var t=["enUS"],n=v;if(!n.hasOwnProperty(e))throw new Error("Unknown currency type variant provided");return t.push(n[e]),get(t)},FormatOptionsService.prototype.customFormatter=function(e,t,n){var r={},o=this.cos.columnTypeSettings(e,t),i=this.columnLocaleSettings(o||{});return o&&!isNaN(parseInt(o.decimalPlaces))&&(r.precision=parseInt(o.decimalPlaces)),"financial"===n?b.c(i,r):"currency"===n?b.a(i,r):"number"===n?b.d(i,r):"percentage"===n?b.f(i,r):void 0},FormatOptionsService.prototype.customDateFormatter=function(e,t){var n,r=this.cos.columnTypeSetting(e,t,"preset"),o={"YYYY-MM-DD":"YYYY-MM-DD","YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm:ss","MMM YYYY":"MMM YYYY","D MMM YYYY":"D MMM YYYY","MMM D YYYY":"MMM D YYYY",none:""};return b.b(o[(n=r,o.hasOwnProperty(n)?n:"YYYY-MM-DD HH:mm:ss")])},FormatOptionsService.$inject=["ColumnOptionsService"],FormatOptionsService}(),A=n("emhp"),M=function(){function ReportLinkService(e){this.$window=e}return ReportLinkService.prototype.isLinkable=function(){return A.a.instance().get("linkable")},ReportLinkService.prototype.hasLinkToPageMethod=function(){return"function"==typeof this.getLinkMethod()},ReportLinkService.prototype.getLinkMethod=function(){return(this.$window.mode||{}).linkToPage},ReportLinkService.prototype.linkToPage=function(e,t){this.hasLinkToPageMethod()&&this.getLinkMethod()(e,t)},ReportLinkService.$inject=["$window"],ReportLinkService}(),k=function(){function CookieService(e){this.$cookies=e}return CookieService.prototype.getOrSetBooleanValue=function(e,t,n){if(void 0===n&&(n={}),null==t)return this.$cookies.get(e);this.$cookies.put(e,t,n)},CookieService.$inject=["$cookies"],CookieService}(),T=function(){function PermissionService(e){this.$cookies=e}return PermissionService.$inject=["$cookies"],PermissionService}(),x=n("KVaf"),D=n("wB6Z"),L=function(){function EditorService(){}return EditorService.prototype.registerEditor=function(e){this.editor=e},EditorService.prototype.editorInstance=function(){return this.editor},EditorService.$inject=[],EditorService}(),R=function(){function SlackMessageService(e){this.$sce=e,this.privateShareHelpText=e.trustAsHtml('\n      <div class="slack-share-help-text">To share to a private channel or direct message, type the channel or @username. {{slackAppInstaller}} must be a member of the private channel. <a target="_blank" href="https://help.modeanalytics.com/articles/share-via-slack/">Learn more</a></div>\n    ')}return SlackMessageService.prototype.formatSlackMentions=function(e){return e.replace(/(@\w+)/gi,"<$1>")},SlackMessageService.$inject=["$sce"],SlackMessageService}(),N=n("GtTN"),E=n("zzE+"),j=n("yOFN"),O=n("nz4i"),P=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},F=function(){function ReportDataService(e,t,n,r,o,i,a,s,u,p,h,g,m,f){var C=this;this.$rootScope=e,this.$q=t,this.store=n,this.realtime=r,this.ReportSaveService=o,this.QueryDataService=i,this.ViewService=a,this.AlertService=s,this.ReportModel=u,this.QueryModel=p,this.ModeResourceClass=h,this.QueryTableModel=g,this.ChartModel=m,this.api=f,this.store.select(c.i).subscribe(function(e){C._currentReportToken=e}),this.store.actions.filter(function(e){return e.type===d.a.LoadEmbeddedReport}).map(function(e){return e.type===d.a.LoadEmbeddedReport?e:null}).switchMap(function(e){return C.api.getResource(e.resource,"report").then(function(e){return C.store.dispatch({type:j.a.LoadReportSuccess,reportResource:e,isNew:!1,isEmbedded:!0})}).catch(function(e){return C.store.dispatch({type:j.a.LoadReportFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.UpdateEmbeddedReport}).map(function(e){return e.type===d.a.UpdateEmbeddedReport?e:null}).switchMap(function(e){var t=d.b.Silent;return C.api.getResource(e.resource,"report").then(function(e){return C.store.dispatch({type:d.a.UpdateReportSuccess,payload:{report:e,strategy:t}})}).catch(function(e){return C.store.dispatch({type:d.a.UpdateReportFailure,payload:{error:e,strategy:t}})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportRunEmbeddedPdfExport}).map(function(e){return e.type===j.a.LoadReportRunEmbeddedPdfExport?e:null}).switchMap(function(e){return C.api.getResource(e.reportRunResource,"pdf_export").then(function(e){return C.store.dispatch({type:j.a.LoadReportRunEmbeddedPdfExportSuccess,pdfExportResource:e})}).catch(function(e){return C.store.dispatch({type:j.a.LoadReportRunEmbeddedPdfExportFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportSuccess}).map(function(e){return e.type===j.a.LoadReportSuccess?e:null}).subscribe(function(e){if(e.isNew){var t=new p.model(new h({name:"Query 1",limit:!0,raw_query:"",_new_query:!0}));t._new_query=!0,t.name="Query 1",t.updateInitials(),t.limit=!0,t._resource.token=t.token,p.putLocal(t),C.store.dispatch({type:l.a.LoadQueriesSuccess,queries:[t._resource]})}else e.reportResource.hasEmbedded("queries")&&C.store.dispatch({type:l.a.LoadEmbeddedQueries,report:e.reportResource}),e.reportResource.hasEmbedded("space")&&C.store.dispatch({type:j.a.LoadReportEmbeddedSpace,reportResource:e.reportResource}),e.reportResource.hasLink("creator")&&C.store.dispatch({type:j.a.LoadReportCreator,reportResource:e.reportResource}),e.reportResource.hasLink("star")&&C.store.dispatch({type:j.a.LoadReportUserStar,reportResource:e.reportResource})}),this.store.actions.filter(function(e){return e.type===E.a.ExecuteReportRunSuccess}).map(function(e){return e.type===E.a.ExecuteReportRunSuccess?e:null}).subscribe(function(e){e.reportRunResource.hasEmbedded("report")&&C.store.dispatch({type:d.a.UpdateEmbeddedReport,resource:e.reportRunResource})}),this.store.actions.filter(function(e){return e.type===d.a.SaveReportCharts}).map(function(e){return e.type===d.a.SaveReportCharts?e:null}).map(function(e){return e.payload}).switchMap(function(e){return C.updateReportCharts(e.needsUpdate,e.newChart).then(function(e){return C.store.dispatch({type:d.a.SaveReportChartsSuccess,payload:e})}).catch(function(e){return C.store.dispatch({type:d.a.SaveReportChartsFailure,payload:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.SaveReportTables}).map(function(e){return e.type===d.a.SaveReportTables?e:null}).map(function(e){return e.payload}).switchMap(function(e){return C.updateReportTables(e.needsUpdate).then(function(e){return C.store.dispatch({type:d.a.SaveReportTablesSuccess,payload:e})}).catch(function(e){return C.store.dispatch({type:d.a.SaveReportTablesFailure,payload:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.SyncReport}).map(function(e){return e.type===d.a.SyncReport?e:null}).switchMap(function(e){return C.syncToGithub(e.reportResource,e.commitMessage)}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.SyncReportSuccess}).map(function(e){return e.type===d.a.SyncReportSuccess?e:null}).subscribe(function(e){C.AlertService.success("Push started")}),this.store.actions.filter(function(e){return e.type===d.a.SyncReportFailure}).map(function(e){return e.type===d.a.SyncReportFailure?e:null}).subscribe(function(e){C.AlertService.error(e.error.message)}),this.store.actions.filter(function(e){return e.type===d.a.UpdateSelectedReportSpace}).map(function(e){return e.type===d.a.UpdateSelectedReportSpace?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.S)).switchMap(function(e){var t=e[0],n=e[1],r=P({},C.resolveReportModel(n).toParams(),{"report.space_token":t.space.token});return n.forms("edit").$submit(r).then(function(e){return C.store.dispatch({type:d.a.UpdateSelectedReportSpaceSuccess,payload:{space:t.space,report:e}})}).catch(function(e){return C.store.dispatch({type:d.a.UpdateSelectedReportSpaceFailure,payload:{error:{name:"Error",message:e.message}}})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.UpdateSelectedReportSpaceSuccess}).map(function(e){return e.type===d.a.UpdateSelectedReportSpaceSuccess?e:null}).subscribe(function(e){C.AlertService.success("Report moved")}),this.store.actions.filter(function(e){return e.type===d.a.UpdateSelectedReportSpaceFailure}).map(function(e){return e.type===d.a.UpdateSelectedReportSpaceFailure?e:null}).subscribe(function(e){C.AlertService.error("Could not move report"),console.error(e.payload.error.message)}),this.store.actions.filter(function(e){return e.type===d.a.RenameReport}).map(function(e){return e.type===d.a.RenameReport?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.B),this.store.select(c.N)).map(function(e){var t=e[0],n=e[1],r=e[2];return[t,C.resolveReportModelFromResourceMap(n,t.token),r]}).switchMap(function(e){var t=e[0],n=e[1],r=e[2],o={strategy:d.b.AlertAndRefreshPreview,newChart:!1};return C.ReportSaveService.name=t.name,C.ReportSaveService.description=t.description,n.name=t.name,n.description=t.description,C.updateReport(n,o,r).then(function(e){return C.store.dispatch({type:d.a.UpdateReportSuccess,payload:e})}).catch(function(e){return C.store.dispatch({type:d.a.UpdateReportFailure,payload:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.SetSelectedReportShared}).map(function(e){return e.type===d.a.SetSelectedReportShared?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.S)).switchMap(function(e){var t=e[0],n=e[1];return C.updateReportSharedState(n,t.value).then(function(e){return C.store.dispatch({type:d.a.SetSelectedReportSharedSuccess,payload:{reportResource:e}})}).catch(function(e){return C.store.dispatch({type:d.a.SetSelectedReportSharedFailure,payload:{error:e}})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.UpdateReportLayout}).map(function(e){return e.type===d.a.UpdateReportLayout?e:null}).do(function(e){return C.store.dispatch({type:d.a.UpdateReportState})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.UpdateReport}).map(function(e){return e.type===d.a.UpdateReport?e:null}).map(function(e){return e.payload}).withLatestFrom(this.store.select(c.B),this.store.select(c.N)).map(function(e){var t=e[0],n=e[1],r=e[2];return[t,C.resolveReportModelFromResourceMap(n,t.token),r]}).switchMap(function(e){var t=e[0],n=e[1],r=e[2],o={strategy:t.strategy,newChart:t.strategy===d.b.SilentAndSelectNewV2Chart};return C.updateReport(n,o,r).then(function(e){C.store.dispatch({type:d.a.UpdateReportSuccess,payload:P({},e,{commitMessage:t.commitMessage})})}).catch(function(e){return C.store.dispatch({type:d.a.UpdateReportFailure,payload:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.UpdateReportSuccess}).map(function(e){return e.type===d.a.UpdateReportSuccess?e:null}).withLatestFrom(this.store.select(c.W)).subscribe(function(e){var t=e[0],n=e[1];switch(t.payload.strategy){case d.b.Silent:case d.b.SilentAndSelectNewV2Chart:C.updateReportSaveService(t.payload.report),C.notifyNueSaveReport();break;case d.b.SilentAndRefreshPreview:C.updateReportSaveService(t.payload.report),C.notifyNueSaveReport(),C.attemptPreviewUpdate();break;case d.b.AlertAndRefreshPreview:C.updateReportSaveService(t.payload.report),C.notifyNueSaveReport(),C.attemptPreviewUpdate(),C.alertSaveSuccess();break;case d.b.SilentAndSync:C.store.dispatch({type:d.a.SyncReport,reportResource:t.payload.report,commitMessage:t.payload.commitMessage})}n&&n.token===t.payload.report.space_token||C.store.dispatch({type:j.a.LoadReportEmbeddedSpace,reportResource:t.payload.report})}),this.store.actions.filter(function(e){return e.type===d.a.UpdateReportFailure}).map(function(e){return e.type===d.a.UpdateReportFailure?e:null}).map(function(e){return e.payload}).subscribe(function(e){e.error;switch(e.strategy){case d.b.Silent:case d.b.SilentAndSelectNewV2Chart:case d.b.SilentAndRefreshPreview:break;case d.b.AlertAndRefreshPreview:C.alertSaveError();break;case d.b.SilentAndSync:C.alertSaveError()}}),this.store.actions.filter(function(e){return e.type===d.a.ToggleReportUserStar}).map(function(e){return e.type===d.a.ToggleReportUserStar?e:null}).withLatestFrom(this.store.select(c._0),this.store.select(c.S)).switchMap(function(e){e[0];var t=e[1],n=e[2];return t&&t.hasForm("destroy")?C.destroyUserStar(t):n.hasEmbedded("new_star")&&n.embedded("new_star").hasForm("create")?C.createUserStar(n):C.$q.reject("No star action available").catch(function(e){return C.store.dispatch({type:d.a.ToggleReportUserStarFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===d.a.SaveSingleReportChartSuccess}).map(function(e){return e.type===d.a.SaveSingleReportChartSuccess?e:null}).map(function(e){return e.payload}).subscribe(function(e){var t=e.chart,n=e.needsUpdate,r=e.newChart;C.afterSavedChart(n,r,t)}),this.store.actions.filter(function(e){return e.type===d.a.SaveSingleReportTableSuccess}).map(function(e){return e.type===d.a.SaveSingleReportTableSuccess?e:null}).map(function(e){return e.payload}).subscribe(function(e){var t=e.table,n=e.needsUpdate;C.afterSavedTable(n,t)}),this.store.actions.filter(function(e){return e.type===d.a.SaveSingleReportChartFailure}).map(function(e){return e.type===d.a.SaveSingleReportChartFailure?e:null}).map(function(e){return e.payload}).subscribe(function(e){var t=e.error;console.error(t)}),this.store.actions.filter(function(e){return e.type===d.a.SaveSingleReportTableFailure}).map(function(e){return e.type===d.a.SaveSingleReportTableFailure?e:null}).map(function(e){return e.payload}).subscribe(function(e){var t=e.error;console.error(t)}),this.store.actions.filter(function(e){return e.type===d.a.UpdateIfReportNeedsUpdate}).map(function(e){return e.type===d.a.UpdateIfReportNeedsUpdate?e:null}).withLatestFrom(this.store.select(c.S),this.store.select(c.N)).subscribe(function(e){e[0];var t=e[1],n=e[2];t.layout!==n&&C.updateReportSilentlyAndRefreshPreview()}),this.store.actions.filter(function(e){return e.type===j.a.LoadReportSuccess||e.type===d.a.UpdateSelectedReportSpaceSuccess}).map(function(e){return e.type===j.a.LoadReportSuccess||e.type===d.a.UpdateSelectedReportSpaceSuccess?e:null}).withLatestFrom(this.store.select(c.C),this.store.select(c.Z),this.store.select(c.i)).filter(function(e){e[0];var t=e[1];e[2],e[3];return O.a.isEditor(t)}).subscribe(function(e){e[0],e[1];var t=e[2],n="private-report-"+e[3];t?C.realtime.connect(n):C.realtime.disconnectFromChannel(n)}),this.realtime.events$.withLatestFrom(this.store.select(c.i)).filter(function(e){var t=e[0],n=e[1];return t.channel==="private-report-"+n}).subscribe(function(e){var t=e[0];e[1];switch(t.name){case N.b.ReportSaved:C.store.dispatch({type:d.a.UpdateSelectedReportLastSavedAt})}})}return ReportDataService.prototype.resolveReportModelFromResourceMap=function(e,t){var n=e.get(t);return this.resolveReportModel(n)},ReportDataService.prototype.resolveReportModel=function(e){return new this.ReportModel.model(e,{ignoreEmbedded:!0})},ReportDataService.prototype.updateReport=function(e,t,n){var r=Object(a.defaults)(t,{newChart:!1,strategy:d.b.Default}),o=r.strategy,i=r.newChart,l=this.$q.defer(),s=e.layout!==n,c=this.syncWithReportSaveService(e);return c.layout=n,this.saveRelatedState(s,{newChart:i}),c.space_token="",this.ReportModel.update(c).then(function(e){return l.resolve({report:e._resource,strategy:o})}).catch(function(e){return l.reject({error:e,strategy:o})}),l.promise},ReportDataService.prototype.syncWithReportSaveService=function(e){return Object(a.assign)(e,this.ReportSaveService.report),e.name=this.ReportSaveService.name,e.description=this.ReportSaveService.description,e},ReportDataService.prototype.saveRelatedState=function(e,t){this.saveQueries(),this.saveCharts(e,t.newChart),this.saveTables(e)},ReportDataService.prototype.saveQueries=function(){this.QueryDataService.batchSaveOrUpdateQueryState(this.getCurrentReportToken())},ReportDataService.prototype.syncToGithub=function(e,t){var n=this;return e.forms("sync_to_github")?e.forms("sync_to_github").$submit({commit_message:t}).then(function(e){return n.store.dispatch({type:d.a.SyncReportSuccess})}).catch(function(e){var t=e&&e.data&&e.data.id||"Unknown error",r=e&&e.data&&e.data.message||"Push failed";n.store.dispatch({type:d.a.SyncReportFailure,error:{name:t,message:r}})}):this.$q.reject("Push failed").catch(function(e){n.store.dispatch({type:d.a.SyncReportFailure,error:{name:"Unknown",message:"Push failed"}})})},ReportDataService.prototype.getCurrentReportToken=function(){return this._currentReportToken},ReportDataService.prototype.updateReportCharts=function(e,t){var n=this,r=this.ReportSaveService.charts.filter(function(e){return n.ReportSaveService.chartHasChanged(e)}).map(function(r){return n.ChartModel.update(r).then(function(r){return n.store.dispatch({type:d.a.SaveSingleReportChartSuccess,payload:{chart:r,needsUpdate:e,newChart:t}})}).catch(function(e){return n.store.dispatch({type:d.a.SaveSingleReportChartFailure,payload:{error:e}})})});return this.$q.all(r)},ReportDataService.prototype.updateReportTables=function(e){var t=this,n=this.ReportSaveService.tables.filter(function(e){return t.ReportSaveService.tableHasChanged(e)}).map(function(n){return t.QueryTableModel.update(n).then(function(r){return t.store.dispatch({type:d.a.SaveSingleReportTableSuccess,payload:{table:n,needsUpdate:e}})}).catch(function(e){return t.store.dispatch({type:d.a.SaveSingleReportTableFailure,payload:{error:e}})})});return this.$q.all(n)},ReportDataService.prototype.destroyUserStar=function(e){var t=this;return e.forms("destroy").$submit().then(function(){t.AlertService.success("Unstarred report"),t.store.dispatch({type:d.a.ToggleReportUserStarSuccess,starResource:null})}).catch(function(e){t.AlertService.error("There was an error unstarring report"),t.store.dispatch({type:d.a.ToggleReportUserStarFailure,error:e})})},ReportDataService.prototype.createUserStar=function(e){var t=this;return e.embedded("new_star").forms("create").$submit().then(function(e){t.AlertService.success("Starred report"),t.store.dispatch({type:d.a.ToggleReportUserStarSuccess,starResource:e})}).catch(function(e){t.AlertService.error("There was an error starring report"),t.store.dispatch({type:d.a.ToggleReportUserStarFailure,error:e})})},ReportDataService.prototype.updateReportSharedState=function(e,t){return e.forms(t?"enable_external_sharing":"disable_external_sharing").$submit()},ReportDataService.prototype.updateReportSaveService=function(e){this.ReportSaveService.setNewReport(!1),this.ReportSaveService.updateReport(e)},ReportDataService.prototype.notifyNueSaveReport=function(){this.$rootScope.$broadcast("nue.save_report")},ReportDataService.prototype.attemptPreviewUpdate=function(){this.$rootScope.$broadcast("preview.update")},ReportDataService.prototype.alertSaveSuccess=function(){this.AlertService.success("Report saved")},ReportDataService.prototype.alertSaveError=function(){this.AlertService.error("There was a problem saving")},ReportDataService.prototype.afterSavedChart=function(e,t,n){this.ReportSaveService.updateChart(n),this.$rootScope.$broadcast("designer.updateChartOnSave",{token:n.token}),e||this.ViewService.emitPreviewUpdate("Chart",n.token,n.parent,n.view),t&&this.ViewService.selectV2Chart(n)},ReportDataService.prototype.afterSavedTable=function(e,t){this.ReportSaveService.updateTable(t),this.$rootScope.$broadcast("designer.updateTableOnSave",{token:t.token}),e||this.ViewService.emitPreviewUpdate("Table",t.token,t.parent,t.view)},Object.defineProperty(ReportDataService.prototype,"selectedReportResourceState$",{get:function(){return this.store.select(c.S)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataService.prototype,"selectedReport$",{get:function(){return this.store.select(c.U)},enumerable:!0,configurable:!0}),Object.defineProperty(ReportDataService.prototype,"selectedReportLayout$",{get:function(){return this.store.select(c.N)},enumerable:!0,configurable:!0}),ReportDataService.prototype.saveCharts=function(e,t){this.store.dispatch({type:d.a.SaveReportCharts,payload:{token:this.getCurrentReportToken(),needsUpdate:e,newChart:t}})},ReportDataService.prototype.saveTables=function(e){this.store.dispatch({type:d.a.SaveReportTables,payload:{token:this.getCurrentReportToken(),needsUpdate:e}})},ReportDataService.prototype.toggleReportUserStar=function(){this.store.dispatch({type:d.a.ToggleReportUserStar})},ReportDataService.prototype.loadReportResources=function(e){this.store.dispatch({type:d.a.LoadReportResources,payload:e})},ReportDataService.prototype.loadEmbeddedReport=function(e){this.store.dispatch({type:d.a.LoadEmbeddedReport,resource:e})},ReportDataService.prototype.renameReport=function(e,t,n){this.store.dispatch({type:d.a.RenameReport,payload:{token:e,name:t,description:n}})},ReportDataService.prototype.updateIfReportNeedsUpdate=function(){this.store.dispatch({type:d.a.UpdateIfReportNeedsUpdate})},ReportDataService.prototype.updateSelectedReportLayout=function(e){this.store.dispatch({type:d.a.UpdateReportLayout,layout:e})},ReportDataService.prototype.updateReportSettingsSilently=function(e){this.store.dispatch({type:d.a.UpdateReportSuccess,payload:{report:e,strategy:d.b.Silent}})},ReportDataService.prototype.updateReportSilently=function(e){this.store.dispatch({type:d.a.UpdateReport,payload:{token:e||this.getCurrentReportToken(),strategy:d.b.Silent}})},ReportDataService.prototype.updateReportSilentlyAndSelectNewV2Chart=function(e){this.store.dispatch({type:d.a.UpdateReport,payload:{token:e||this.getCurrentReportToken(),strategy:d.b.SilentAndSelectNewV2Chart}})},ReportDataService.prototype.updateReportSilentlyAndRefreshPreview=function(e){this.store.dispatch({type:d.a.UpdateReport,payload:{token:e||this.getCurrentReportToken(),strategy:d.b.SilentAndRefreshPreview}})},ReportDataService.prototype.updateReportWithAlertAndRefreshPreview=function(e){this.store.dispatch({type:d.a.UpdateReport,payload:{token:e||this.getCurrentReportToken(),strategy:d.b.AlertAndRefreshPreview}})},ReportDataService.prototype.saveAndSync=function(e){this.store.dispatch({type:d.a.UpdateReport,payload:{token:this.getCurrentReportToken(),strategy:d.b.SilentAndSync,commitMessage:e}})},ReportDataService.prototype.updateSelectedReportSpace=function(e){this.store.dispatch({type:d.a.UpdateSelectedReportSpace,payload:{space:e}})},ReportDataService.prototype.updateSelectedReportSharedState=function(e){this.store.dispatch({type:d.a.SetSelectedReportShared,payload:{value:e}})},ReportDataService.prototype.updateSelectedReportEmbeddedState=function(e){this.store.dispatch({type:d.a.SetSelectedReportEmbedded,payload:{value:e}})},ReportDataService.$inject=["$rootScope","$q","RxStoreService","RealtimeService","ReportSaveService","QueryDataService","ViewService","AlertService","ReportModel","QueryModel","ModeResource","QueryTableModel","ChartModel","ApiService","NotebookDataService"],ReportDataService}(),z=function(){function ModalService(e,t,n){this.$uibModal=e,this.$rootScope=t,this.flipper=n;$("meta[name=report-owner-username]").attr("content"),$("meta[name=owner-username]").attr("content")}return ModalService.prototype.open=function(e,t){var n=this.$rootScope.$new();r.extend(n,e);var o=r.extend(t||{},{animation:!0,backdropClass:"angular-animate",windowClass:"mode-modal angular-animate",scope:n}),i=this.$uibModal.open(o);return i.result.catch(function(){}),i},ModalService.prototype.openFullModal=function(e,t){var n=this.$rootScope.$new();r.extend(n,e);var o=r.extend(t||{},{animation:!1,backdropClass:"mode-full-backdrop",keyboard:!1,windowClass:"mode-full-modal mode-modal",scope:n}),i=this.$uibModal.open(o);return i.result.catch(function(){}),i},ModalService.prototype.openCustom=function(e,t){var n=this.$rootScope.$new();r.extend(n,e);var o=r.extend(t||{},{windowClass:"mode-custom-modal angular-animate",backdrop:!1,scope:n}),i=this.$uibModal.open(o);return i.result.catch(function(){}),i},ModalService.prototype.openLegacy=function(e,t){var n=this.$rootScope.$new();r.extend(n,e);var o=r.extend(t||{},{animation:!0,backdropClass:"angular-animate",windowClass:"mode-modal-window splash-open angular-animate",scope:n}),i=this.$uibModal.open(o);return i.result.catch(function(){}),i},ModalService.prototype.openDraggable=function(e,t){var n=this.$rootScope.$new();r.extend(n,e);var o=r.extend(t||{},{scope:n,animation:!0,backdrop:!1,windowClass:"mode-modal angular-animate draggable-modal"}),i=this.$uibModal.open(o);return i.result.catch(function(){}),i},ModalService.$inject=["$uibModal","$rootScope","DataLayerFlipperService"],ModalService}();var _=n("ouuP");function iframeSetupHandler(e){var t=e.source;e.data.type&&"status"===e.data.type&&"initialized"===e.data.name&&(null!=t&&t.postMessage({type:"cmd",name:"setup",payload:{dataLayer:this.dataLayer}},"*"),this.removeEventListener("message",iframeSetupHandler))}var B,V,U=function(){function IFrameSetupService(){}return IFrameSetupService.prototype.attach=function(e){e.addEventListener("message",iframeSetupHandler)},IFrameSetupService}(),Z=n("Zz1P"),G=n("m9my"),Y=n("xEvw"),Q=n("+G1s"),H=function(){function ReportDatasetService(e,t){this.$q=e,this.DatasetService=t}return ReportDatasetService.prototype.loadFilteredDatasets=function(e,t){var n=this,r=new Array;try{0===t.length?r.push.apply(r,e.map(function(e){if("succeeded"!==e.state)return new Q.a({id:e.token,isLoaded:!0,state:e.state,query_token:e.token,queryName:e.queryName,reportDataUrl:e.reportDataUrl,reportQueryUrl:e.reportQueryUrl,oversized:e.oversized,content_length:e.content_length,csv:e.csv});var t=e.model.engine.dataset;return new Q.a({id:e.token,isLoaded:!0,state:e.state,query_token:e.token,queryName:e.queryName,reportDataUrl:e.reportDataUrl,reportQueryUrl:e.reportQueryUrl,oversized:e.oversized,csv:e.csv,content_length:e.content_length,count:e.model.engine.dataset.data.length,columns:n.buildDatasetColumns(t),content:n.buildDatasetContent(t.data,t.schema)})})):r.push.apply(r,e.map(function(e){if("succeeded"!==e.state)return new Q.a({id:e.token,isLoaded:!0,state:e.state,query_token:e.token,queryName:e.queryName,reportDataUrl:e.reportDataUrl,reportQueryUrl:e.reportQueryUrl,oversized:e.oversized,csv:e.csv,content_length:e.content_length});var r=e.model,o=r.onFilter(function(e){for(var n=0,o=t;n<o.length;n++){var i=o[n],a=r.buildViewCalcField(i.formula,i.varType,i.id);if(a.formula.isValid)switch(a.varType){case G.VariableType.DISCRETE:switch(i.filterType){case Y.b.Single:!0!==i.selected.all&&e.where(r.buildDiscreteFilter(a,{selected:new Set([i.selected.value])}));break;case Y.b.Multi:!0!==i.selected.all&&e.where(r.buildDiscreteFilter(a,{selected:new Set(i.selected.values)}))}break;case G.VariableType.CONTINUOUS:switch(i.filterType){case Y.b.Range:var l=i.includeNulls;switch(i.dataType){case G.DataType.DATE:case G.DataType.DATETIME:var s=i.selectedAsDates;e.where(r.buildContinuousFilter(a,{min:s.min,max:s.max,includeNulls:l,includeMin:!0,includeMax:!1}));break;default:var c=i.selected,d=c.min,u=c.max;e.where(r.buildContinuousFilter(a,{min:d,max:u,includeNulls:l,includeMin:!0,includeMax:!0}))}}}}}).execute(),i=e.model.engine.dataset;return new Q.a({id:e.token,isLoaded:!0,state:e.state,query_token:e.token,queryName:e.queryName,reportDataUrl:e.reportDataUrl,reportQueryUrl:e.reportQueryUrl,oversized:e.oversized,csv:e.csv,content_length:e.content_length,count:o.result.size,columns:n.buildDatasetColumns(e.model.engine.dataset),content:n.buildDatasetContent(o.result.data,i.schema)})}))}catch(e){return this.$q.reject(e)}return this.DatasetService.datasets&&r.forEach(function(e){n.DatasetService.datasets[e.query_token]=e}),this.$q.resolve(r)},ReportDatasetService.prototype.buildDatasetColumns=function(e){for(var t=new Array,n=0,r=e.schema.columns;n<r.length;n++){var o=r[n];switch(o.type){case G.ColumnType.FLOAT:t.push({type:"float",name:o.name});break;case G.ColumnType.INTEGER:t.push({type:"integer",name:o.name});break;case G.ColumnType.DATE:case G.ColumnType.DATETIME:t.push({type:"datetime",name:o.name});break;case G.ColumnType.STRING:t.push({type:"string",name:o.name});break;case G.ColumnType.BOOLEAN:t.push({type:"boolean",name:o.name})}}return t},ReportDatasetService.prototype.buildDatasetContent=function(e,t){for(var n=new Array,r=0,o=t.columns;r<o.length;r++){var i=o[r];switch(i.type){case"DATE":case"DATETIME":n.push(i.name)}}if(0===n.length)return e;for(var a=new Array(e.length),l=0,s=0,c=e;s<c.length;s++){var d=c[s],u={};Object.assign(u,d);for(var p=void 0,h=0,g=n;h<g.length;h++){var m=g[h];p=u[m],void 0===u[m]?u[m]=null:(p=Z.utc(u[m]),u[m]=p.isValid()?p.toISOString():null)}a[l++]=u}return a},ReportDatasetService.$inject=["$q","DatasetService"],ReportDatasetService}(),W=n("cM/6"),q=n("BP8X"),J=n("RpJj"),X=n("nxEI"),K=n("0ivk"),ee=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},te=function(){function ClientDataService(e,t,n,r,o){var i=this;this.store=e,this.ReportDataService=t,this.PreferenceModel=n,this.api=r,this.ModeResource=o;var a=!0,l=setInterval(function(){C.a.get({url:ASSET_PATHS.BASE+"assets/webpack-assets.json",ifModified:!0,dataType:"text"}).then(function(e,t,n){"notmodified"!==t&&(a?a=!1:(X.a.attemptOrLog(K.a.notifySafely,new Error("Assets outdated, needs refresh.")),clearInterval(l)))},function(e){})},3e4);this.store.actions.filter(function(e){return e.type===j.a.LoadAccount}).map(function(e){return e.type===j.a.LoadAccount?e:null}).map(function(e){return e.payload.account}).do(function(e){return i.store.dispatch({type:j.a.LoadAccountSuccess,payload:{account:e}})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountContext}).map(function(e){return e.type===j.a.LoadAccountContext?e:null}).map(function(e){return e.organization}).do(function(e){return i.store.dispatch({type:j.a.LoadAccountContextSuccess,organization:e})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountSuccess}).map(function(e){return e.type===j.a.LoadAccountSuccess?e:null}).subscribe(function(e){e.payload.account.hasEmbedded("organizations")&&i.store.dispatch({type:j.a.LoadAccountOrganizations,accountResource:e.payload.account}),e.payload.account.hasEmbedded("preference")&&i.store.dispatch({type:j.a.LoadAccountPreference,accountResource:e.payload.account})}),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountContextSuccess}).map(function(e){return e.type===j.a.LoadAccountContextSuccess?e:null}).map(function(e){return e.organization}).subscribe(function(e){e.hasEmbedded("organization_features")&&i.store.dispatch({type:j.a.LoadAccountContextFeatures,organization:e}),e.hasLink("spaces")&&i.store.dispatch({type:j.a.LoadAccountContextSpaces,organization:e}),e.hasEmbedded("data_sources")&&i.store.dispatch({type:j.a.LoadAccountContextDatasources,organization:e})}),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountOrganizations}).map(function(e){return e.type===j.a.LoadAccountOrganizations?e:null}).switchMap(function(e){return i.api.getResources(e.accountResource,"organizations").then(function(e){return i.store.dispatch({type:j.a.LoadAccountOrganizationsSuccess,organizations:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadAccountOrganizationsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountPreference}).map(function(e){return e.type===j.a.LoadAccountPreference?e:null}).switchMap(function(e){return i.api.getResource(e.accountResource,"preference").then(function(e){return i.store.dispatch({type:j.a.LoadAccountPreferenceSuccess,preferenceResource:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadAccountPreferenceFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadApi}).map(function(e){return e.type===j.a.LoadApi?e:null}).map(function(e){return e.payload.api}).do(function(e){return i.store.dispatch({type:j.a.LoadApiSuccess,payload:{api:e}})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadApiSuccess}).map(function(e){return e.type===j.a.LoadApiSuccess?e:null}).subscribe(function(e){e.payload.api.hasEmbedded("data_sources")&&i.store.dispatch({type:j.a.LoadApiDatasources,apiResource:e.payload.api})}),this.store.actions.filter(function(e){return e.type===j.a.LoadApiDatasources}).map(function(e){return e.type===j.a.LoadApiDatasources?e:null}).switchMap(function(e){return i.api.getResources(e.apiResource,"data_sources").then(function(e){return i.store.dispatch({type:j.a.LoadApiDatasourcesSuccess,datasources:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadApiDatasourcesFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportContext}).map(function(e){return e.type===j.a.LoadReportContext?e:null}).map(function(e){return e.organization}).do(function(e){return i.store.dispatch({type:j.a.LoadReportContextSuccess,organization:e})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportContextSuccess}).map(function(e){return e.type===j.a.LoadReportContextSuccess?e:null}).map(function(e){return e.organization}).subscribe(function(e){e.hasEmbedded("organization_features")&&i.store.dispatch({type:j.a.LoadReportContextFeatures,organization:e}),e.hasLink("data_sources")&&i.store.dispatch({type:j.a.LoadReportContextDatasources,organization:e}),e.hasLink("spaces")&&i.store.dispatch({type:j.a.LoadReportContextSpaces,organization:e})}),this.store.actions.filter(function(e){return e.type===j.a.LoadReportContextDatasources}).map(function(e){return e.type===j.a.LoadReportContextDatasources?e:null}).switchMap(function(e){return i.api.getResources(e.organization,"data_sources").then(function(e){return i.store.dispatch({type:j.a.LoadReportContextDatasourcesSuccess,datasources:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadReportContextDatasourcesFailure,error:e})})}).subscribe(),this.store.actions.ofType(j.a.LoadReportContextFeatures).switchMap(function(e){return i.api.getResource(e.organization,"organization_features").then(function(e){return i.store.dispatch({type:j.a.LoadReportContextFeaturesSuccess,features:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadReportContextFeaturesFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountContextDatasources}).map(function(e){return e.type===j.a.LoadAccountContextDatasources?e:null}).switchMap(function(e){return i.api.getResources(e.organization,"data_sources").then(function(e){return i.store.dispatch({type:j.a.LoadAccountContextDatasourcesSuccess,datasources:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadAccountContextDatasourcesFailure,error:e})})}).subscribe(),this.store.actions.ofType(j.a.LoadAccountContextFeatures).switchMap(function(e){return i.api.getResource(e.organization,"organization_features").then(function(e){return i.store.dispatch({type:j.a.LoadAccountContextFeaturesSuccess,features:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadAccountContextFeaturesFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportContextSpaces}).map(function(e){return e.type===j.a.LoadReportContextSpaces?e:null}).switchMap(function(e){return i.api.getResources(e.organization,"spaces").then(function(e){return i.store.dispatch({type:j.a.LoadReportContextSpacesSuccess,spaces:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadReportContextSpacesFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountContextSpaces}).map(function(e){return e.type===j.a.LoadAccountContextSpaces?e:null}).switchMap(function(e){return i.api.getResources(e.organization,"spaces").then(function(e){return i.store.dispatch({type:j.a.LoadAccountContextSpacesSuccess,spaces:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadAccountContextSpacesFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportRunSuccess}).map(function(e){return e.type===j.a.LoadReportRunSuccess?e:null}).subscribe(function(e){e.reportRunResource.hasEmbedded("report")&&e.reportRunResource.embedded("report").hasEmbedded("queries")&&i.ReportDataService.loadEmbeddedReport(e.reportRunResource),e.reportRunResource.hasEmbedded("pdf_export")&&i.loadReportRunEmbeddedPdfExport(e.reportRunResource)}),this.store.actions.filter(function(e){return e.type===j.a.LoadReportContext}).map(function(e){return e.type===j.a.LoadReportContext?e:null}).subscribe(function(e){e.organization.hasEmbedded("all_color_palettes")&&i.store.dispatch({type:j.a.LoadAccountEmbeddedColorPalettes,orgContext:e.organization})}),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountEmbeddedColorPalettes}).map(function(e){return e.type===j.a.LoadAccountEmbeddedColorPalettes?e:null}).switchMap(function(e){return i.api.getResources(e.orgContext,"all_color_palettes",{relationAs:"color_palettes"}).then(function(e){return i.store.dispatch({type:j.a.LoadAccountEmbeddedColorPalettesSuccess,colorPalettes:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadAccountEmbeddedColorPalettesFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportEmbeddedSpace}).map(function(e){return e.type===j.a.LoadReportEmbeddedSpace?e:null}).switchMap(function(e){return i.api.getResource(e.reportResource,"space").then(function(e){return i.store.dispatch({type:j.a.LoadReportEmbeddedSpaceSuccess,spaceResource:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadReportEmbeddedSpaceFailure,error:e})})}).subscribe(),s.Observable.merge(this.store.actions.ofType(j.a.UpdatePreference),this.store.actions.ofType(J.c.ToggleNotebookSidebar)).withLatestFrom(this.store.select(c.e)).switchMap(function(e){e[0];var t=e[1];return i.updatePreference(t).then(function(e){return i.store.dispatch({type:j.a.UpdatePreferenceSuccess,preferenceResource:e._resource})}).catch(function(e){return i.store.dispatch({type:j.a.UpdatePreferenceFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportCreator}).map(function(e){return e.type===j.a.LoadReportCreator?e:null}).switchMap(function(e){return i.api.getResource(e.reportResource,"creator").then(function(e){return i.store.dispatch({type:j.a.LoadReportCreatorSuccess,creatorResource:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadReportCreatorFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportUserStar}).map(function(e){return e.type===j.a.LoadReportUserStar?e:null}).switchMap(function(e){return i.api.getResource(e.reportResource,"star").then(function(e){return i.store.dispatch({type:j.a.LoadReportUserStarSuccess,starResource:e})}).catch(function(e){return i.store.dispatch({type:j.a.LoadReportUserStarFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===j.a.LoadReportContextSuccess}).map(function(e){return e.type===j.a.LoadReportContextSuccess?e:null}).combineLatest(this.store.actions.filter(function(e){return e.type===j.a.LoadAccountOrganizationsSuccess}).map(function(e){return e.type===j.a.LoadAccountOrganizationsSuccess?e:null}),this.store.actions.filter(function(e){return e.type===j.a.LoadAccountSuccess}).map(function(e){return e.type===j.a.LoadAccountSuccess?e:null})).subscribe(function(e){var t=e[0],n=e[1],r=e[2],o=t.organization,a=n.organizations,l=r.payload.account;i.store.dispatch({type:j.a.ComputeIfUserBelongsToReportContext,result:[l].concat(a).some(function(e){return e.username===o.username})})})}return ClientDataService.prototype.updatePreference=function(e){var t=Object(a.merge)(new this.PreferenceModel.model(new this.ModeResource(e)),{notebook_sidebar:{items:{intro:!1,shortcuts:!0}}});return this.PreferenceModel.update(t)},Object.defineProperty(ClientDataService.prototype,"accountPreference$",{get:function(){return this.store.select(c.e)},enumerable:!0,configurable:!0}),Object.defineProperty(ClientDataService.prototype,"datasourcesEnabled$",{get:function(){return this.store.select(c.v).map(q.b.canCreateDatasources)},enumerable:!0,configurable:!0}),Object.defineProperty(ClientDataService.prototype,"filtersEnabled$",{get:function(){return this.store.select(c.S).map(W.a.hasFilters)},enumerable:!0,configurable:!0}),ClientDataService.prototype.setLoggedInState=function(e){this.store.dispatch({type:j.a.LoadLoggedInState,loggedIn:e})},ClientDataService.prototype.loadAccount=function(e){this.store.dispatch({type:j.a.LoadAccount,payload:{account:e}})},ClientDataService.prototype.loadAccountContext=function(e){this.store.dispatch({type:j.a.LoadAccountContext,organization:e})},ClientDataService.prototype.loadApi=function(e){this.store.dispatch({type:j.a.LoadApi,payload:{api:e}})},ClientDataService.prototype.loadReportOwner=function(e){this.store.dispatch({type:j.a.LoadReportContext,organization:e})},ClientDataService.prototype.loadReportRunSuccess=function(e){this.store.dispatch({type:j.a.LoadReportRunSuccess,reportRunResource:e})},ClientDataService.prototype.loadReportSuccess=function(e,t){this.store.dispatch({type:j.a.LoadReportSuccess,reportResource:e,isNew:t,isEmbedded:!1})},ClientDataService.prototype.loadDefinitionSuccess=function(e){this.store.dispatch({type:j.a.LoadDefinitionSuccess,definitionResource:e})},ClientDataService.prototype.loadReportRunEmbeddedPdfExport=function(e){this.store.dispatch({type:j.a.LoadReportRunEmbeddedPdfExport,reportRunResource:e})},ClientDataService.prototype.updateAccountPreference=function(e){this.store.dispatch({type:j.a.UpdatePreference,params:e})},ClientDataService.prototype.loadFlippers=function(e){this.store.dispatch(ee({type:j.a.LoadFlippers},e))},ClientDataService.$inject=["RxStoreService","ReportDataService","PreferenceModel","ApiService","ModeResource"],ClientDataService}(),ne=function(){function ReportApiService(){this.actions=new s.Subject}return ReportApiService.prototype.dispatch=function(e,t){this.actions.next({componentId:e,action:t})},ReportApiService.prototype.subscribe=function(e,t){return this.actions.subscribe(function(n){var r=n.componentId,o=n.action;try{r===e&&t(o)}catch(e){console.error(e)}})},ReportApiService}(),re=n("8YRt"),oe=n("ELUg"),ie=n("SdCE"),ae=n("l0Qb");(V=B||(B={})).getFeatureFlippers=function(e){return e.client.featureFlippers},V.getReportContextFeatures=function(e){return e.client.reportContextFeatures},V.getAccountContextFeatures=function(e){return e.client.accountContextFeatures},V.getReportContext=function(e){return e.client.reportContext},V.getAccountContext=function(e){return e.client.accountContext},V.getSelectedReportResource=function(e){return e.client.selectedReport.report},V.getFeatureFlipperFlags=Object(ie.createSelector)(V.getFeatureFlippers,function(e){return re.a.flippersToFeatureFlags(e)}),V.getOrgFeatureFlags=Object(ie.createSelector)(V.getReportContextFeatures,V.getAccountContextFeatures,function(e,t){return re.a.orgFeaturesToFeatureFlags(e,ae.a.Context.Report).concat(re.a.orgFeaturesToFeatureFlags(t,ae.a.Context.User))}),V.getOrgPlanFeatureFlag=Object(ie.createSelector)(V.getReportContext,V.getAccountContext,function(e,t){return Object(a.compact)([re.a.orgPlanCodeToFeatureFlag(e,q.c.Context.Report),re.a.orgPlanCodeToFeatureFlag(t,q.c.Context.User)])}),V.getAppStateFeatureFlag=Object(ie.createSelector)(V.getSelectedReportResource,function(e){var t;return re.a.appStatesToFeatureFlags(((t={})[oe.a.Type.SelectedReport.DrillDownsEnabled]=W.a.canDrilldown(e),t))}),V.getEnabledFeatures=Object(ie.createSelector)(V.getFeatureFlipperFlags,V.getOrgFeatureFlags,V.getOrgPlanFeatureFlag,V.getAppStateFeatureFlag,function(e,t,n,r){return e.concat(t,n,r)});var le=re.a.featureIsEnabled,se=B.getEnabledFeatures,ce=function(){function FeatureToggleService(e,t,n,r){this.$injector=e,this.$window=t,this.$state=n,this.wms=r,this.enabledFlagsSource=new s.BehaviorSubject(null),e.has("RxStoreService")&&this.appIsEligible()&&(this.store=e.get("RxStoreService")),this.initFeatureStateObservable(),this.initFeatureObservables(),this.whenIframeIsReady(this.initParentToFrameLink.bind(this)),this.whenParentFrameIsReady(this.initFrameToParentLink.bind(this))}return FeatureToggleService.prototype.appIsEligible=function(){var e=this.$window.document.body.getAttribute("mode-app");return["mode.report","mode.editor"].includes(e)},FeatureToggleService.prototype.initFeatureStateObservable=function(){var e=this;this.store?this.enabledFlags$=this.enabledFlagsSource.mergeMap(function(){return e.store.select(se)}):this.enabledFlags$=this.enabledFlagsSource.asObservable()},FeatureToggleService.prototype.initFeatureObservables=function(){this.featureDrilldownEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Report.DrillDown)}),this.featureExploreEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Report.Explore)}),this.featureVizToolbarEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Report.VizToolbar)}),this.featureChartDataExportEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Report.ChartDataExport)}),this.featureBusinessUpsellEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Common.ModeBusinessUpsell)}),this.featureModeStudioEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Common.ModeStudio)}),this.featureIntercomChatEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Common.IntercomChat)}),this.featureParameterRunButtonEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Report.ParameterRunButton)}),this.featureParametersEnabled$=this.enabledFlags$.map(function(e){return le(e,oe.c.Report.Parameters)})},FeatureToggleService.prototype.whenIframeIsReady=function(e){var t=this;this.$window.addEventListener("message",function(n){var r=n.data,o=r.name&&"ready"===r.name;t.isTopFrame()&&o&&e()})},FeatureToggleService.prototype.whenParentFrameIsReady=function(e){this.isTopFrame()||e()},FeatureToggleService.prototype.isTopFrame=function(){return!!this.$window.frames["mode-embed-frame"]&&!!this.store},FeatureToggleService.prototype.initParentToFrameLink=function(){var e=this;this.isTopFrame()&&this.store.select(se).subscribe(function(t){return e.wms.updateFeatureState(t)})},FeatureToggleService.prototype.initFrameToParentLink=function(){var e=this;this.wms.subscribe(this,function(t){return e.updateLocalState(t.state)},_.a.UpdateFeatureState)},FeatureToggleService.prototype.updateLocalState=function(e){this.isTopFrame()||this.enabledFlagsSource.next(e)},FeatureToggleService.$inject=["$injector","$window","$state","WindowMessageService"],FeatureToggleService}();r.module("mode.shared.services",["ngCookies","ui.bootstrap.modal","mode.editor.designerService"]).service("DatasetService",o.a).service("TableDataService",i.a).service("ReportDatasetService",H).service("QueryDataService",h).service("ViewOptionsService",g.a).service("ColumnOptionsService",m).service("ScriptWatchingService",y).service("FormatOptionsService",w).service("ReportLinkService",M).service("CookieService",k).service("ModalService",z).directive("uibModalWindow",function(){return{restrict:"A",link:function(e,t){/\bdraggable-modal\b/.test(t.attr("window-class"))&&(t.on("mousedown.draggableModal",".modal-header",function(e){e.preventDefault(),t.find(".modal-header").addClass("dragging");var n=t.find(".modal-dialog"),r=n.offset();$(document).on("mousemove.draggableModal",function(t){n.offset({top:r.top+(t.pageY-e.pageY),left:r.left+(t.pageX-e.pageX)})}).one("mouseup",function(){$(document).off("mousemove.draggableModal"),t.find(".modal-header").removeClass("dragging")})}),e.$on("destroy",function(){$(document).off("mousedown.draggableModal")}))}}}).service("PermissionService",T).service("ClientDataService",te).service("TimingService",x.a).service("EditorService",L).service("FeatureToggleService",ce).service("DataLayerFlipperService",D.b).service("SlackMessageService",R).service("IFrameSetupService",U).service("WindowMessageService",_.b).service("ReportDataService",F).service("ReportApiService",ne)},kOF2:function(e,t){e.exports='<div class="space-membership-component">\n  <div class="membership-input">\n    <input type="text"\n           class="form-control form-control-sm form-control-block next-form-control"\n           ng-model="ctrl.query"\n           ng-change="ctrl.queryUsers()"\n           placeholder="Find members..."\n           autocomplete="off">\n    <i class="icon-search membership-search-icon"></i>\n  </div>\n  <div class="membership-list-container">\n    <ul class="membership-list">\n      <li class="membership-list-item" ng-repeat="membership in ctrl.memberships | filter:{inSearch:false} | filter:{\'accountMember.name\':ctrl.query}">\n        <mode-avatar ng-if="membership.member_type === \'account\'" options="membership.accountMember.avatar" size="44" class="user-avatar"></mode-avatar>\n        <group-facepile ng-if="membership.member_type === \'group\'" group="membership.accountMember" size="44" class="user-avatar"></group-facepile>\n        <div class="user-details">\n          <div class="user-content">\n            <div class="primary-content">{{ membership.accountMember.name }}</div>\n            <div ng-if="membership.member_type !== \'group\'" class="secondary-content">{{ membership.email }}</div>\n            <div ng-if="membership.member_type === \'group\'"\n                 class="secondary-content"\n                 ng-pluralize\n                 count="membership.accountMember.member_count"\n                 when="{\'0\': \'{} Members\',\'one\': \'{} Member\',\'other\': \'{} Members\'}">\n            </div>\n          </div>\n        </div>\n        <div class="membership-actions">\n          <a ng-if="!ctrl.isCurrentUser(ctrl.account)(membership)" href="#" class="btn btn-lg btn-secondary membership-action-negative" ng-click="ctrl.toggleMembership(membership)"><span class="hide-hover">Added</span><span class="show-hover">Remove</span></a>\n          <div ng-if="ctrl.isCurrentUser(ctrl.account)(membership)" class="empty-button">You</div>\n        </div>\n      </li>\n      <li class="membership-list-item" ng-repeat="user in ctrl.users | orderBy:[\'membership\', ctrl.orderByGroup(), ctrl.orderByCurrentUser(ctrl.account)]">\n        <mode-avatar ng-if="user.avatar" options="user.avatar" size="44" class="user-avatar"></mode-avatar>\n        <group-facepile ng-if="user.objectType === \'user_group\'" group="user" size="44" class="user-avatar"></group-facepile>\n        <div class="user-details">\n          <div class="user-content">\n            <div class="primary-content">{{ user.name }}</div>\n            <div ng-if="user.objectType !== \'user_group\'" class="secondary-content">{{ user.email }}</div>\n            <div ng-if="user.objectType === \'user_group\'"\n                 class="secondary-content"\n                 ng-pluralize\n                 count="user.memberCount"\n                 when="{\'0\': \'{} Members\',\'one\': \'{} Member\',\'other\': \'{} Members\'}">\n            </div>\n          </div>\n        </div>\n        <div class="membership-actions">\n          <a ng-if="!ctrl.isCurrentUser(ctrl.account)(user)" href="#" class="btn btn-lg btn-secondary" ng-class="{\'membership-action-negative\' : user.membership, \'membership-action-positive\' : !user.membership }" ng-click="ctrl.toggleMembership(user.membership, user)"><span class="hide-hover">{{ user.membership ? \'Added\' : \'Add\' }}</span><span class="show-hover">{{ user.membership ? \'Remove\' : \'Add\' }}</span></a>\n          <div ng-if="ctrl.isCurrentUser(ctrl.account)(user)" class="empty-button">You</div>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>'},kZ7C:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("m9my");n.n(o);!function(e){var t;function getMarkType(e){o.MarkType.Line;return e.marks.series.length>0?e.marks.series[0].properties.type.value:e.marks.properties.type.value}function isMultiSeries(e){return e.marks.series.length>1}function hasNamesOnX(e){return e.x.length>0&&e.x[0].formula===o.SystemFieldName.NAMES}function hasFieldOnSize(e){return e.marks.series.length&&e.marks.series[0].properties.size.values.length>0}!function(e){e.Combo="COMBO",e.Grouped="GROUPED",e.Stacked="STACKED",e.Radial="RADIAL"}(t=e.Shape||(e.Shape={})),e.shape=function(e){var n=getMarkType(e),r=hasNamesOnX(e);if(hasFieldOnSize(e),isMultiSeries(e))return t.Combo;if(r)return t.Grouped;switch(n){case o.MarkType.Pie:case o.MarkType.Donut:return t.Radial;default:return t.Stacked}},e.getMarkType=getMarkType,e.isMultiSeries=isMultiSeries,e.hasNamesOnX=hasNamesOnX,e.hasFieldOnSize=hasFieldOnSize}(r||(r={}))},ktMo:function(e,t,n){"use strict";t.a=function(){!function(e){if("performance"in e==0&&(e.performance={}),"now"in e.performance==0){var t=e.performance.timing&&e.performance.timing.navigationStart||Date.now();e.performance.now=function(){return Date.now()-t}}}(window)}},l0Qb:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){!function(e){e.LimitedMemberships="limited_memberships",e.DirectoryIntegration="directory_integration",e.SecretEmbeds="secret_embeds",e.SignedEmbeds="signed_embeds",e.ExternalSharing="external_sharing",e.PrependScript="prepend_script",e.OrgStats="org_stats",e.DataSourceRestricted="data_source_restricted",e.SpaceRestricted="space_restricted",e.IdentityControl="identity_control",e.CustomReportThemes="custom_report_themes",e.ReportExploration="report_exploration"}(e.Type||(e.Type={})),function(e){e.User="[OrganizationFeatures] User",e.Report="[OrganizationFeatures] Report"}(e.Context||(e.Context={}))}(r||(r={}))},l1Lc:function(e,t){e.exports='<div class="format-settings">\n  <div class="form-field">\n    <label class="axis-label">Formatting</label>\n    <div class="chart-selector" ng-class="{open: ctrl.columnTypeMenuOpen}"\n         doc-blur="column-type"\n         doc-blur-has-focus="ctrl.columnTypeMenuOpen"\n         on-doc-blur="ctrl.closeColumnTypeMenu()">\n      <button class="btn btn-sm btn-select btn-block" ng-click="ctrl.toggleColumnTypeMenu()">\n          <span class="chart-selector-text">\n              <a href="#"><i class="icon-{{ctrl.formatOptions.type}}-type"></i> {{ ctrl.getName(ctrl.formatOptions.type, ctrl.formatTypes) }}</a>\n          </span>\n        <i class="icon-dropdown-arrow"></i>\n      </button>\n      <ul class="chart-selector-menu dropdown-menu full-width" style="top: inherit">\n        <li ng-repeat="type in ctrl.enabledFormatTypes()" ng-class="{\'active\': ctrl.formatOptions.type === type.id}">\n          <a href ng-click="ctrl.selectType(type)">\n            <i class="icon-{{type.id}}-type"></i> {{type.name}}\n            <span class="pull-right font-light">{{type.sample}}</span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div ng-if="ctrl.hasOptions()">\n\n    <div ng-if="ctrl.isDateType()">\n      <div class="form-field">\n        <label class="axis-label">Presets</label>\n        <div class="chart-selector" ng-class="{open: ctrl.datePresetMenuOpen}"\n             doc-blur="column-type"\n             doc-blur-has-focus="ctrl.datePresetMenuOpen"\n             on-doc-blur="ctrl.closeDatePresetMenu()">\n          <button class="btn btn-sm btn-select btn-block" ng-click="ctrl.toggleDatePresetMenu()">\n            <span class="chart-selecto-text"><a href="#">{{ ctrl.getName(ctrl.formatOptions[ctrl.formatOptions.type].preset, ctrl.datePresets) || ctrl.datePresets[0].name }}</a></span>\n            <i class="icon-dropdown-arrow"></i>\n          </button>\n          <ul class="chart-selector-menu dropdown-menu full-width" style="top: inherit">\n            <li ng-repeat="preset in ctrl.datePresets"\n                ng-class="{\'active\': ctrl.formatOptions[ctrl.formatOptions.type].preset === preset.id}">\n              <a href ng-click="ctrl.selectDatePreset(preset)"><span class="pull-left">{{preset.name}}</span></a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="ctrl.isCurrencyType()">\n      <div class="form-field">\n        <label class="axis-label">Presets</label>\n        <div class="chart-selector" ng-class="{open: ctrl.currencyTypeMenuOpen}"\n             doc-blur="column-type"\n             doc-blur-has-focus="ctrl.currencyTypeMenuOpen"\n             on-doc-blur="ctrl.closeCurrencyTypeMenu()">\n          <button class="btn btn-sm btn-select btn-block" ng-click="ctrl.toggleCurrencyTypeMenu()">\n            <span class="chart-selecto-text"><a href="#">{{ ctrl.getName(ctrl.formatOptions[ctrl.formatOptions.type].type, ctrl.currencyTypes) || \'US Dollar\' }}</a></span>\n            <i class="icon-dropdown-arrow"></i>\n          </button>\n          <ul class="chart-selector-menu dropdown-menu full-width" style="top: inherit">\n            <li ng-repeat="type in ctrl.currencyTypes"\n                ng-class="{\'active\': ctrl.formatOptions[ctrl.formatOptions.type].type === type.id}">\n              <a href ng-click="ctrl.selectCurrencyType(type)"><span class="pull-left">{{type.name}}</span><span\n                  class="pull-right font-light">{{ctrl.getSampleCurrencyFormat(type)}}</span></a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="ctrl.isCustomCurrencyType()">\n      <div class="clearfix">\n        <div class="half-width">\n          <div class="form-field half-width-left">\n            <label class="axis-label">Symbol</label>\n            <input type="text" class="form-control form-control-sm axis-title-input"\n                   ng-model-options="{ updateOn: \'blur\' }" ng-model="ctrl.formatOptions[ctrl.formatOptions.type].symbol"\n                   ng-change="ctrl.pushChange()" mode-enter/>\n          </div>\n        </div>\n        <div class="half-width">\n          <div class="form-field half-width-right">\n            <label class="axis-label">Placement</label>\n            <select class="form-control form-control-sm form-control-block"\n                    ng-model="ctrl.formatOptions[ctrl.formatOptions.type].symbolPlacement"\n                    ng-change="ctrl.pushChange()">\n              <option value="before">before</option>\n              <option value="after">after</option>\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="ctrl.hasThousandsOptions()">\n      <h3 class="setting-title">Thousands Format</h3>\n      <div class="clearfix">\n        <div class="half-width">\n          <div class="form-field half-width-left">\n            <label class="axis-label">Separator</label>\n            <select class="form-control form-control-sm form-control-block"\n                    ng-model="ctrl.formatOptions[ctrl.formatOptions.type].thousandSeparator"\n                    ng-options="item.id as item.name for item in ctrl.decimalStyles" ng-change="ctrl.pushChange()">\n            </select>\n          </div>\n        </div>\n        <div class="half-width">\n          <div class="form-field half-width-right">\n            <label class="axis-label">Grouping</label>\n            <select class="form-control form-control-sm form-control-block"\n                    ng-model="ctrl.formatOptions[ctrl.formatOptions.type].thousandGroup"\n                    ng-options="item.id as item.name for item in ctrl.thousandDigits" ng-change="ctrl.pushChange()">\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div ng-if="ctrl.hasDecimalOptions()">\n      <h3 class="setting-title">Decimal Format</h3>\n      <div class="clearfix">\n        <div class="half-width">\n          <div class="form-field half-width-left">\n            <label class="axis-label">Style</label>\n            <select class="form-control form-control-sm form-control-block"\n                    ng-model="ctrl.formatOptions[ctrl.formatOptions.type].decimalStyle"\n                    ng-options="item.id as item.name for item in ctrl.decimalStyles" ng-change="ctrl.pushChange()">\n            </select>\n          </div>\n        </div>\n        <div class="half-width">\n          <div class="form-field half-width-left">\n            <label class="axis-label">Places</label>\n            <input type="text" class="form-control form-control-sm axis-title-input"\n                   ng-model-options="{ updateOn: \'blur\', getterSetter: true }" ng-model="ctrl.decimalPlaces"\n                   placeholder="0..{{ctrl.MAX_DECIMAL_PLACES}}" ng-change="ctrl.pushChange()" mode-enter/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},lWnr:function(e,t,n){"use strict";var r=n("PbPb"),o=(n.n(r),n("0YuG"));n.n(o);o.module("mode.table",["mode.utils","ngSanitize","mode.components","mode.shared.services"]).constant("lodash",r)},lzv4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenFromModeLink=function(e){if(e){var t=e.href.split("/");if(t.length>1)return t[t.length-1]}return},t.getTypeFromModeLink=function(e){if(e){var t=e.href.split("/");if(t.length>1)return t[t.length-2]}return},n.d(t,"ModeResourceHelper",function(){return i});var r=n("0YuG"),o=(n.n(r),n("PbPb"));n.n(o),n("IU2V");var i,a=function(){function Resource(e,t){void 0===t&&(t=null),this.$initialize.apply(this,arguments)}return Resource.prototype.$initialize=function(e){var t=this;if(e&&r.forEach(e,function(e,n){"_links"!==n&&"_forms"!==n&&"_embedded"!==n&&(t[n]=e)}),e._links){var n={};r.forEach(e._links,function(e,r){n[r]=t.createLink(e)}),this._links=n}else this._links={};if(e._forms){var o={};r.forEach(e._forms,function(e,n){o[n]=t.createForm(e)}),this._forms=o}else this._forms={};if(e._embedded){var i={};r.forEach(e._embedded,function(e,t){if(r.isArray(e)){i[t]=[];for(var n=0;n<e.length;n++)i[t].push(new Resource(e[n]))}else i[t]=new Resource(e)}),this._embedded=i}else this._embedded={}},Resource.prototype.setLink=function(e,t){this._links[e]=this.createLink({href:t})},Resource.prototype.createLink=function(e){return e},Resource.prototype.links=function(e){return this._links[e]},Resource.prototype.hasLink=function(e){return r.isDefined(this.links(e))&&null!==this.links(e)},Resource.prototype.createForm=function(e){return e},Resource.prototype.forms=function(e){return this._forms[e]},Resource.prototype.hasForm=function(e){return r.isDefined(this.forms(e))&&null!==this.forms(e)},Resource.prototype.embedded=function(e){return this._embedded[e]},Resource.prototype.hasEmbedded=function(e){return r.isDefined(this.embedded(e))&&null!==this.embedded(e)},Resource.prototype.generate=function(e){return new Resource(e)},Resource}();r.module("mode.api").factory("ModeResource",["$q","ModeLink","ModeForm",function(e,t,n){return Object.assign(a.prototype,{createLink:function(e){return new t(a,e)},createForm:function(e){return new n(a,e)}}),a}]),function(e){function isResource(e){return!Object(o.isEmpty)(e)&&e instanceof a}function resourceToModel(e,t){return isResource(e)&&new t(e,{ignoreEmbedded:!0})}e.isResource=isResource,e.resourceToModel=resourceToModel,e.resourcesToModels=function(e,t){return e&&e.map(function(e){return resourceToModel(e,t)})}}(i||(i={}))},mAOC:function(e,t){e.exports='<div class="default-modal context-modal insert-filter-modal">\n  <div class="modal-header">\n    <h3 class="modal-title has-subtitle">What would you like to filter?</h3>\n    <a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a>\n  </div>\n  <div class="modal-container">\n    <h4 class="modal-heading-2">Available Fields</h4>\n    <field-tree-view\n        on-select="ctrl.handleSelection($id)"\n        fields="ctrl.fields" />\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-primary" ng-click="ctrl.insertFilter()">Add</button>\n  </div>\n</div>\n'},mEar:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSI5cHgiIHZpZXdCb3g9IjAgMCAxMCA5IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MiAoMzY3ODEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPnJvd3M8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0ibW9ja3VwcyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IjIyLWNvcHktMTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05MTIuMDAwMDAwLCAtNTg2LjAwMDAwMCkiIGZpbGw9IiM5Mzk0QTAiPgogICAgICAgICAgICA8ZyBpZD0icm93cyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTEyLjAwMDAwMCwgNTg2LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00MSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEiIHJ4PSIwLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtNDEtQ29weSIgeD0iMCIgeT0iNCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEiIHJ4PSIwLjUiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtNDEtQ29weS0yIiB4PSIwIiB5PSI4IiB3aWR0aD0iMTAiIGhlaWdodD0iMSIgcng9IjAuNSI+PC9yZWN0PgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},mSuT:function(e,t){e.exports='<div class="default-modal viz-lightbox-modal-content">\n  <chart-lightbox-container\n    owner="ctrl.owner"\n    on-dismiss="onLightboxClose()">\n  </chart-lightbox-container>\n</div>'},mTaN:function(e,t){e.exports='<div class="schema-results" ng-class="{ full: !ctrl.isTableSelectedAndViewable() }">\n  <schema-pin-list tables="ctrl.pins" search-query="ctrl.searchQuery" select-table="ctrl.selectTable(table)" selected-table="ctrl.selectedTable" pin-table="ctrl.pin(table)"></schema-pin-list>\n  <h3 ng-show="ctrl.report && (ctrl.tables.length || (ctrl.schemas.length && !ctrl.searchQuery))">Tables</h3>\n  <schema-table-list ng-if="ctrl.searchQuery"\n                     tables="ctrl.tables"\n                     select-table="ctrl.selectTable(table)"\n                     selected-table="ctrl.selectedTable"\n                     pin-table="ctrl.pin(table)"\n                     hide-pin="ctrl.hidePin">\n  </schema-table-list>\n  <schema-table-list ng-if="ctrl.mode === \'definitions\'"\n                     tables="ctrl.definitions"\n                     select-table="ctrl.selectTable(table)"\n                     selected-table="ctrl.selectedTable"\n                     pin-table="ctrl.pin(table)"\n                     hide-pin="ctrl.hidePin">\n  </schema-table-list>\n  <div class="schema-empty" ng-show="ctrl.noSearchResults && ctrl.searchQuery">No tables found.</div>\n  <schema-tree ng-if="ctrl.mode === \'schemas\' && !ctrl.searchQuery"\n               schemas="ctrl.schemas"\n               selected-table="ctrl.selectedTable"\n               select-schema="ctrl.querySchemaTables(schema)"\n               select-table="ctrl.selectTable(table)"\n               paginate-table="ctrl.paginateSchemaTables(page, schema)"\n               pin-table="ctrl.pin(table)"\n               hide-pin="ctrl.hidePin">\n  </schema-tree>\n  <div class="schema-empty" ng-show="!ctrl.schemaSearch.query && !ctrl.schemas.length && !ctrl.schemasLoading">Hang tight! If you just connected your database and you have a lot of tables it may take several minutes for us to get everything together.<div><a href="#" ng-click="ctrl.refresh();">click here to refresh</a></div></div>\n</div>\n<div class="schema-browser" ng-show="ctrl.isTableSelectedAndViewable()">\n  <div class="browser-title" ng-show="ctrl.isTableSelectedAndViewable()">\n    <button ng-if="!ctrl.hidePin" class="btn btn-sm btn-primary-link title-pin" ng-click="ctrl.pin(ctrl.selectedTable);">{{ ctrl.selectedTable.pinned ? \'Unpin\' : \'Pin\'}}</button>\n    <h3 title="{{ ctrl.selectedTable.name }}">{{ ctrl.selectedTable.name }}</h3>\n  </div>\n  <table-browser ng-if="ctrl.selectedTableSchema" schema="ctrl.selectedTableSchema"></table-browser>\n  <p class="schema-error-msg" ng-show="references.error">{{ references.error }}</p>\n  <div class="schema-loading icon-logo-animated" ng-show="references.schemaLoading"></div>\n</div>'},mWHA:function(e,t){e.exports='<div class="default-modal">\n  <share-component\n    report-run="ctrl.reportRun"\n    report="ctrl.report"\n    dismiss="ctrl.$dismiss()"\n    owner="ctrl.owner"\n    account="ctrl.account"\n    details-link="ctrl.detailsLink()"\n    in-editor="ctrl.inEditor"\n    social="ctrl.social">\n  </share-component>\n</div>'},"mz/H":function(e,t){e.exports='<iframe name="mode-embed-frame"\n        style="width: 100%; height: 100%"\n        frameborder="0"\n        sandbox="allow-scripts allow-popups allow-top-navigation allow-same-origin"\n        ng-class="{ invisible: ctrl.isViewQueryMode }">\n</iframe>\n<div class="iframe-loading icon-logo-animated" ng-hide="ctrl.error.show || ctrl.csvDownload || ctrl.promptRefresh"></div>\n<div class="error alert alert-error alert-nomargin" ng-show="ctrl.error.show">\n  <h3>Oops!  There was a problem with your query</h3>\n  <pre ng-if="ctrl.error.message">{{ ctrl.error.message }}</pre>\n</div>\n<div class="mode-download" ng-show="ctrl.csvDownload">\n  <h3>The dataset is too large to view in browser</h3>\n  <a href="{{ ctrl.csvDownload }}" class="btn btn-filled-primary">Export</a>\n</div>\n<div class="preview-message" ng-show="ctrl.promptRefresh">\n  <div class="empty-report-msg">\n    <div class="icon-new-report-emptystate"></div>\n    <h1>Report is ready to preview</h1>\n    <p><a href="#" ng-click="ctrl.refresh()" class="btn btn-filled-primary">Show Preview</a></p>\n  </div>\n</div>\n'},nWvs:function(e,t){e.exports='<div class="default-modal context-modal">\n  <h3 class="modal-header">{{ title || \'New Definition\' }}<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <form name="createDefinitionForm" ng-submit="ctrl.createDefinition()" novalidate>\n    <div class="modal-container">\n      <div class="form-element">\n        <label>Data Source</label>\n        <div class="chart-selector" ng-class="{open: ctrl.datasourcePickerOpen}"\n             doc-blur="datasource-picker"\n             doc-blur-has-focus="ctrl.datasourcePickerOpen"\n             on-doc-blur="ctrl.closeDatasourcePicker()">\n          <button type="button" class="btn btn-sm btn-select btn-block next-form-control" ng-click="ctrl.toggleDatasourcePicker($event)">\n            <span class="chart-selector-text">\n                <a href="#"><i class="icon-db-mini-gray"></i> {{ datasource.fullname }}</a>\n            </span>\n            <i class="icon-dropdown-arrow"></i>\n          </button>\n          <ul class="chart-selector-menu dropdown-menu full-width" style="top: inherit">\n            <li ng-repeat="source in datasources" ng-class="{\'active\': datasource.id === source.id}">\n              <a href ng-click="ctrl.selectDatasource(source)">\n                <i class="icon-db-mini-gray"></i> {{source.fullname}}\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="form-element form-group" ng-class="{\'has-error\': createDefinitionForm.definitionName.$invalid}">\n        <label for="definitionName">Definition Name</label>\n        <input ng-if="!ctrl.rename" name="definitionName" id="definitionName" type="text" placeholder="e.g. active_users" class="form-control next-form-control" ng-model-options="{ updateOn: \'default blur\' }" hal-validation="ctrl.account" hal-property-path="definition.name" hal-current="{{::ctrl.current.name}}" ng-model="ctrl.current.name" ng-trim="false" required autofocus ng-pattern="/^[a-zA-Z0-9_]+$/" />\n        <input ng-if="ctrl.rename" readonly name="definitionName" id="definitionName" type="text" placeholder="e.g. active_users" class="form-control next-form-control" ng-model="ctrl.current.name" required />\n        <span ng-show="createDefinitionForm.definitionName.$error.required && createDefinitionForm.definitionName.$touched" class="help-block">Name is required</span>\n        <span ng-show="createDefinitionForm.definitionName.$error.pattern" class="help-block">Only alphanumeric characters and underscores are allowed</span>\n        <span ng-show="createDefinitionForm.definitionName.$error.halFailed" class="help-block">Name must be unique across the organization</span>\n        <span ng-show="createDefinitionForm.definitionName.$error.networkError" class="help-block">Error validating definition name</span>\n      </div>\n\n      <div class="form-element">\n        <label for="description">Description</label>\n        <textarea name="description" id="description" class="form-control next-form-control form-control-sm no-resize" ng-model="ctrl.current.description" placeholder="Help someone understand what this Definition is"></textarea>\n      </div>\n    </div>\n    <div class="modal-action-bar">\n      <button class="btn btn-lg btn-filled-primary" ng-disabled="createDefinitionForm.$invalid == null || createDefinitionForm.$invalid || createDefinitionForm.$pending" type="submit">{{ ctrl.rename ? \'Save\' : \'Create\' }}</button>\n    </div>\n  </form>\n</div>\n'},nxEI:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("0YuG"),o=(n.n(r),n("5TEl")),i=(n.n(o),n("0iPh")),a=(n.n(i),n("PbPb")),l=(n.n(a),{extend:function(e,t){var n,o=this;n=e&&"function"==typeof e.$constructor?e.$constructor:function(){return o.apply(this,arguments)},r.extend(n,o,t);var i=function(){this.$constructor=n};return i.prototype=o.prototype,n.prototype=new i,e&&r.extend(n.prototype,e),n.__super__=o.prototype,n},generateUUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})},pluralize:function(e){return r.isString(e)?e.replace(/([^aeiou])y$/,"$1ie")+"s":e},singularize:function(e){return r.isString(e)?e.replace(/ies$/,"y").replace(/s$/,""):e},camalize:function(e){return r.isString(e)?e.replace(/(?:^|[-_])(\w)/g,function(e,t){return t?t.toUpperCase():""}).replace(/^([A-Z])/,function(e){return e.toLowerCase()}):e},initialize:function(e){if(e&&r.isString(e)){var t=e.split(" ");return t.length>1?t[0].substring(0,1).toUpperCase()+t[t.length-1].substring(0,1).toUpperCase():e.substring(0,2).toUpperCase()}return""},underscore:function(e){return r.isString(e)?e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()}):e},dash:function(e){return r.isString(e)?e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}):e},classify:function(e){if(!r.isString(e))return e;var t=this.camalize(e);return t.charAt(0).toUpperCase()+t.substr(1)},commaFormat:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},escapeHTML:function(e){return(e=""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},hashCode:function(e){var t,n,r=""+e,o=0;if(0===r.length)return r;for(t=0,n=r.length;t<n;t++)o=(o<<5)-o+r.charCodeAt(t),o|=0;return""+o},truncate:function(e,t){return!r.isString(e)||!r.isNumber(t)||e.length<t?e:e.substr(0,t)},ellipsize:function(e,t){return!r.isString(e)||!r.isNumber(t)||e.length<t?e:this.truncate(e,t)+"..."},escapeRegExp:function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},val:function(e,t){for(var n=t.split("."),r=e,o=0;o<n.length;o++){if(!r[n[o]])return;r=r[n[o]]}return r},ordinal:function(e){if(parseFloat(e)===parseInt(e)&&!isNaN(e)){var t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}return e},naturalSort:function(e,t){var n,r,o,i,a=/(\d+)|(\D+)/g,l=/\d/,s=/^0/;if("number"==typeof e||"number"==typeof t)return isNaN(e)?1:isNaN(t)?-1:e-t;if((n=String(e).toLowerCase())===(r=String(t).toLowerCase()))return 0;if(!l.test(n)||!l.test(r))return n>r?1:-1;for(n=n.match(a),r=r.match(a);n.length&&r.length;)if((o=n.shift())!==(i=r.shift()))return l.test(o)&&l.test(i)?o.replace(s,".0")-i.replace(s,".0"):o>i?1:-1;return n.length-r.length},colorLuminance:function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,r,o="#";for(r=0;r<3;r++)n=parseInt(e.substr(2*r,2),16),o+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16))).substr(n.length);return o},isUTC:function(e){return"function"==typeof e.lastIndexOf&&(e.lastIndexOf("Z")>0&&e.lastIndexOf("Z")+1===e.length||e.lastIndexOf("+0000")>0&&e.lastIndexOf("+0000")+5===e.length)},defaults:Object(a.partialRight)(a.assignWith,function(e,t){return e||t}),telemetryNow:function(){return window.performance.now()},getHrefFromResource:function(e,t){return e&&r.isFunction(e.hasLink)&&e.hasLink(t)?e.links(t).href:null},getAppInjector:function(e){return void 0===e&&(e="*[mode-app]"),r.element(e).injector()},numberDeviationClamp:function(e){var t=[],n={upper:a.max,lower:a.min},r=e.depth,i=e.threshold,l=n[e.boundary];return function(e){var n=function(e){return function(e,t){return e.slice(-1*t)}(t,r).concat([e])}(e);return o.deviation(n)<i?l(n):(function(e){t=e}(n),n.slice(-1)[0])}},locationSearchLookup:function(e,t){return Object(a.chain)(e.slice(1).split("&")).map(function(e){if(e)return e.split("=")}).compact().fromPairs().value()[t]},serializeObjToURI:function(e,t){var n,r=[];for(n in e)if(e.hasOwnProperty(n)){var o=void 0,i=void 0,a=e[n];o=Array.isArray(e)?t?t+"[]":n:t?t+"["+n+"]":n,i=null!==a&&"object"==typeof a?this.serializeObjToURI(a,o):encodeURIComponent(o)+"="+encodeURIComponent(a),r.push(i)}return r.join("&")},getNestedURLParam:function(e){for(var t={},n=e.split("&"),r=function foldValue(e,t,n){if(t.length>1){var r=t.shift();void 0===e[r]&&(e[r]=""==t[0]?[]:{}),foldValue(e[r],t,n)}else e instanceof Array?e.push(n):e[t]=n},o=0;o<n.length;o++){var i=n[o].split("=");if(!(i.length<2)){var a=decodeURIComponent(i[0]),l=decodeURIComponent(i[1]),s=a.match(/(^[^\[]+)(\[.*\]$)?/),c=s[1];(s=s[2]?s[2].match(/(?=\[(.*)\]$)/)[1].split("]["):[]).unshift(c),r(t,s,l)}}return t},clampElementWidthToAppleMobileBreakpoint:function(e){if(l.iOS()){var t=90===window.orientation||-90===window.orientation,n=window.screen,r=n.width,o=n.height;e.width(t?o:r)}},iOS:function(){return!!window.navigator.platform&&["iPhone Simulator","iPod Simulator","iPhone","iPod"].indexOf(window.navigator.platform)>=0},formSubmit:function(e,t){void 0===t&&(t={});var n=Object(a.defaultsDeep)(t,{method:"post",target:"_self",fields:{utf8:"\u2713"}}),r=i("<form />",{"accept-charset":"UTF-8",role:"form",id:l.generateUUID(),action:e,method:n.method,target:n.target});for(var o in n.fields)i("<input>").attr({type:"hidden",name:o,value:n.fields[o],autocomplete:"off"}).appendTo(r);r.appendTo("body").submit()},attemptOrLog:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=a.attempt.apply(void 0,[e].concat(t));Object(a.isError)(r)&&console.error(r)}});r.module("mode.utils",[]).service("Utils",function(){return l})},nz4i:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("PbPb");n.n(o);!function(e){e.isEditor=function(e){return!!e&&Object(o.startsWith)(e.name,"application")},e.isReport=function(e){return!!e&&Object(o.startsWith)(e.name,"reportShow")},e.isReportDetails=function(e){return!!e&&/^reportShow\.reports(\.runs)?\.(details|presentation|python|queries|queries\.data)/.test(e.name)},e.isVizLightbox=function(e){return!!e&&Object(o.includes)(e.url,"/viz/")},e.isPythonLightbox=function(e){return!!e&&Object(o.includes)(e.url,"/pythonviz/")}}(r||(r={}))},oGeD:function(e,t){e.exports='<home-header\n  class="mode-header-component home-header dark-sidebar"\n  ng-class="{\'sidebar-open\': ctrl.sidebarOpen }"\n  organizations="ctrl.organizations"\n  account="ctrl.account"\n  owner="ctrl.owner"\n  spaces="ctrl.spaces"\n  space="ctrl.selectedSpace"\n  state="ctrl.state"\n  view="ctrl.homeState"\n  datasources="ctrl.datasources"\n  datasource="ctrl.selectedDatasource">\n</home-header>\n<nav-sidebar ng-class="{ \'sidebar-open\': ctrl.sidebarOpen }"\n  class="nav-sidebar-component home-nav-sidebar dark-sidebar"\n  organizations="ctrl.organizations"\n  account="ctrl.account"\n  owner="ctrl.owner"\n  state="ctrl.homeState"\n  view="ctrl.view"\n  spaces="ctrl.spaces"\n  datasources="ctrl.datasources">\n</nav-sidebar>\n<div class="navbar-mask" ng-class="{\'sidebar-open\': ctrl.sidebarOpen}"></div>\n<main-content class="dark-sidebar" ng-class="{ \'sidebar-open\': ctrl.sidebarOpen }">\n  <home-view\n    ng-if="ctrl.view === \'home\'"\n    owner="ctrl.owner"\n    organizations="ctrl.organizations"\n    account="ctrl.account"\n    spaces="ctrl.spaces"\n    state="ctrl.state"\n    view="ctrl.homeState"\n    space="ctrl.selectedSpace">\n  </home-view>\n  <report-view\n    ng-if="ctrl.view === \'reportList\'"\n    class="space-report-view"\n    space="ctrl.selectedSpace"\n    spaces="ctrl.spaces"\n    state="ctrl.state"\n    organizations="ctrl.organizations"\n    owner="ctrl.owner"\n    view="ctrl.homeState"\n    account="ctrl.account">\n  </report-view>\n  <spaces-index-view\n    ng-if="ctrl.view === \'spacesIndex\'"\n    class="spaces-index-view-component"\n    state="ctrl.state"\n    spaces="ctrl.homeState.allSpaces"\n    organizations="ctrl.organizations"\n    owner="ctrl.owner"\n    account="ctrl.account">\n  </spaces-index-view>\n  <definitions-view\n    ng-if="ctrl.view === \'datasource\'"\n    account="ctrl.account"\n    owner="ctrl.owner"\n    state="ctrl.state"\n    datasource="ctrl.selectedDatasource"\n    datasources="ctrl.datasources"\n    preference="ctrl.preference">\n  </definitions-view>\n</main-content>'},om5q:function(e,t,n){"use strict";n.d(t,"e",function(){return median}),n.d(t,"a",function(){return assignWithDefined}),n.d(t,"b",function(){return collectionKeys}),n.d(t,"c",function(){return elementData}),n.d(t,"f",function(){return numbersFormatTemplate}),n.d(t,"g",function(){return orderedComparatorMixin}),n.d(t,"d",function(){return getTextWidth});var r=n("PbPb");n.n(r);function assignWithDefined(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.assignWith.apply(null,e.concat([function(e,t){return Object(r.isUndefined)(t)||Object(r.isNull)(t)?e:t}]))}function collectionKeys(e){return(e||[]).reduce(function(e,t){return e.concat(Object.keys(t).filter(function(t){return e.indexOf(t)<0}))},[])}function elementData(e,t,n){void 0===n&&(n=null);var r,o,i="axel",a=function(e){return[i,e].join("-").toLowerCase()},l=function(e){return a(e).replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},s=!!e.jquery;return n?(r=t,o=n,s?e.data(l(r),o):e.setAttribute("data-"+a(r),o)):function(t){return s?e.data(l(t)):e.getAttribute("data-"+a(t))}(t)}function numbersFormatTemplate(e){void 0===e&&(e={});var t=Object(r.assign)({},{fillValue:"",fillAlignment:"",sign:"",symbol:!1,zeroPad:!1,width:"",precision:0,thousands:"",type:""},e);return[t.fillValue>=0&&t.fillAlignment&&t.width?t.fillValue+t.fillAlignment:"",t.sign,t.symbol?"$":"",t.zeroPad?0:"",t.width,t.thousands,t.type?"."+t.precision:"",t.type].join("")}function orderedComparatorMixin(e,t,n){return void 0===n&&(n="asc"),function(r,o){return e.apply(null,/asc/.test(n)?[r,o]:[o,r])||t(r,o)}}function median(e){if(!e.length)return 0;var t=e.slice(0).sort(function(e,t){return e-t}),n=Math.floor(t.length/2);return t.length%2==0?(t[n]+t[n-1])/2:t[n]}function getTextWidth(e,t,n,r){void 0===r&&(r=window.document.createElement("canvas"));var o=r.getContext("2d");return o.font=n+"px "+t,o.measureText(e).width}},ouuP:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r,o=n("PbPb");n.n(o);!function(e){e.ReportVizUpdate="reportVizUpdate",e.ReportRenderAsyncInit="reportRenderAsyncInit",e.ReportRenderAsyncUpdate="reportRenderAsyncUpdate",e.ReportStateUpdate="reportStateUpdate",e.ReportRenderFull="reportRenderFull",e.ReportFilterPanelDisplay="reportFilterPanelDisplay",e.EmbedLayoutEnd="embedLayoutEnd",e.EmbedRenderEnd="embedRenderEnd",e.UpdateReportFilterControls="updateReportFilterControls",e.UpdateReportDatasets="updateReportDatasets",e.UpdateReportModel="updateReportModel",e.ApplyReportFilters="applyReportFilters",e.SetDefaultReportFilters="setDefaultReportFilters",e.ResetReportFilter="resetReportFilter",e.ResetReportFilters="resetReportFilters",e.DestroyReportFilter="destroyReportFilter",e.MoveReportFilterToBottom="moveReportFilterToBottom",e.MoveReportFilterToPosition="moveReportFilterToPosition",e.SetReportFilterType="setReportFilterType",e.SetReportFilterSelectControlType="setReportFilterSelectControlType",e.SetReportFilterRangeIncludeNulls="setReportFilterRangeIncludeNulls",e.GetNewSize="getNewSize",e.SelectViz="selectViz",e.SelectTableColumn="selectTableColumn",e.SelectRow="selectReportRow",e.SetRowSize="setRowSize",e.SetFullTable="setFullTable",e.ClearSelected="clearSelected",e.OpenSidebar="openSidebar",e.CloseSidebar="closeSidebar",e.EditChart="editChart",e.EditTable="editTable",e.PreviewUpdate="previewUpdate",e.Drill="drill",e.ViewData="viewData",e.UpdateChart="updateChart",e.UpdateChartTitle="updateChartTitle",e.UpdateNotebookVizTitle="updateNotebookVizTitle",e.UpdateTable="updateTable",e.UpdateViz="updateViz",e.AddChart="addChart",e.CreateChart="createChart",e.CreateText="createText",e.AddTable="addTable",e.SaveText="saveText",e.RemoveText="removeText",e.ToggleTextMargins="toggleTextMargins",e.EnterFullScreen="enterFullScreen",e.ExitFullScreen="exitFullScreen",e.ChartExplore="chartExplore",e.UpdateFeatureState="updateFeatureState"}(r||(r={}));var i=function(){function WindowMessageService(e){var t=this;this.$window=e,this.subscriptions={},this.handleMessage=function(e){e.data.type&&(t.subscriptions[e.data.type]&&t.subscriptions[e.data.type].forEach(function(t){t.handler.call(t.context,e.data)}),t.subscriptions["*"]&&t.subscriptions["*"].forEach(function(t){t.handler.call(t.context,e.data)}))},e.addEventListener("message",this.handleMessage)}return WindowMessageService.prototype.postMessageToParent=function(e,t,n){void 0===t&&(t="*"),this.$window.parent.postMessage(e,t)},WindowMessageService.prototype.postMessageToFrame=function(e,t,n){void 0===t&&(t="*");var r=this.$window.frames["mode-embed-frame"];r&&r.postMessage(e,t)},WindowMessageService.prototype.postMessage=function(e,t,n){void 0===t&&(t="*"),this.$window.frames["mode-embed-frame"]?this.postMessageToFrame(e,t,n):this.postMessageToParent(e,t,n)},WindowMessageService.prototype.subscribe=function(e,t,n){return void 0===n&&(n="*"),void 0===this.subscriptions[n]&&(this.subscriptions[n]=[]),!o.find(this.subscriptions[n],{handler:t,context:e})&&(this.subscriptions[n].push({handler:t,context:e}),!0)},WindowMessageService.prototype.unsubscribe=function(e,t,n){var r=this,i=[n];n||(i=o.keys(this.subscriptions));var a=!1;return i.forEach(function(n){if(r.subscriptions[n]){var i=o.find(r.subscriptions[n],t?{handler:t,context:e}:{context:e});i&&(r.subscriptions[n].splice(r.subscriptions[n].indexOf(i),1),a=!0)}}),a},WindowMessageService.prototype.selectReportRow=function(e,t){this.postMessage({type:r.SelectRow,data:{index:e,cssClasses:t}})},WindowMessageService.prototype.selectViz=function(e,t){this.postMessage({type:r.SelectViz,data:{id:e,type:t}})},WindowMessageService.prototype.selectTableColumn=function(e,t){this.postMessage({type:r.SelectTableColumn,data:{id:e,column:t}})},WindowMessageService.prototype.updateChartSettings=function(e,t){this.postMessage({type:r.UpdateChart,data:{id:e,view:t}})},WindowMessageService.prototype.updateChartTitle=function(e,t){this.postMessage({type:r.UpdateChartTitle,data:{id:e,title:t}})},WindowMessageService.prototype.updateNotebookVizTitle=function(e,t){this.postMessage({type:r.UpdateNotebookVizTitle,data:{id:e,title:t}})},WindowMessageService.prototype.updateVizSettings=function(e,t){this.postMessage({type:r.UpdateViz,data:{id:e,view:t}})},WindowMessageService.prototype.setRowSize=function(e,t){this.postMessage({type:r.SetRowSize,data:{index:e,size:t}})},WindowMessageService.prototype.setFullTable=function(e){this.postMessage({type:r.SetFullTable,data:{id:e}})},WindowMessageService.prototype.clearSelected=function(){this.postMessage({type:r.ClearSelected})},WindowMessageService.prototype.openSidebar=function(){this.postMessage({type:r.OpenSidebar})},WindowMessageService.prototype.editChart=function(e){this.postMessage({type:r.EditChart,data:{id:e}})},WindowMessageService.prototype.editTable=function(e){this.postMessage({type:r.EditTable,data:{id:e}})},WindowMessageService.prototype.closeSidebar=function(){this.postMessage({type:r.CloseSidebar})},WindowMessageService.prototype.AddChartToLayout=function(e,t,n){this.postMessage({type:r.AddChart,token:e,position:t,placement:n})},WindowMessageService.prototype.CreateChartInLayout=function(e,t,n){this.postMessage({type:r.CreateChart,queryToken:e,position:t,placement:n})},WindowMessageService.prototype.CreateTextInLayout=function(e,t){this.postMessage({type:r.CreateText,position:e,placement:t})},WindowMessageService.prototype.AddTableToLayout=function(e,t,n){this.postMessage({type:r.AddTable,token:e,position:t,placement:n})},WindowMessageService.prototype.EnterFullScreen=function(){this.postMessage({type:r.EnterFullScreen})},WindowMessageService.prototype.ExitFullScreen=function(){this.postMessage({type:r.ExitFullScreen})},WindowMessageService.prototype.SendAction=function(e){this.postMessage(e)},WindowMessageService.prototype.CaptureSegmentEvent=function(e,t){this.postMessage({data:{id:e,props:t}})},WindowMessageService.prototype.updateFeatureState=function(e){this.postMessageToFrame({type:r.UpdateFeatureState,state:e})},WindowMessageService.MSG_TYPES=r,WindowMessageService.$inject=["$window"],WindowMessageService}()},pJkt:function(e,t,n){"use strict";var r,o;n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),function(e){e.Running="running",e.Loading="loading",e.Warning="warning",e.Session="session",e.Busy="busy",e.Error="error",e.Ready="ready",e.Alert="alert"}(r||(r={})),function(e){e.Uninitialized="uninitialized",e.Loading="loading",e.Succeeded="succeeded",e.Empty="empty",e.Failed="failed"}(o||(o={}))},"pV/n":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("0YuG"),i=n("J631"),a=n.n(i);n("IU2V");!function(e){e.textHasLargeNumber=function(e){return/([^\\]"[^"]*":\s*)([\-])?(\d{15,}\.?[0-9]*)/g.test(e)},e.stringifyLargeNumbers=function(e,t){return void 0===t&&(t='$1"$2$3"'),e.replace(/([^\\]"[^"]*":\s*)([\-])?(\d{15,}\.?[0-9]*)/g,t)}}(r||(r={})),o.module("mode.api").factory("ModeLink",["$q","$http","ModeAPI","$log",function(e,t,n,i){var l=function(e,t){this.$initialize.apply(this,arguments)};return l.prototype={templated:!1,$initialize:function(e,t){if(this.resourceType=e,t){var n=this;o.forEach(t,function(e,t){n[t]=e})}},$follow:function(r,a,l){var s=e.defer(),c=o.copy(r),d=n.stripIncludes(c);i.debug("Following",this.$expand(c));var u={method:"GET",url:this.$expand(c),timeout:a};d&&(u.params=d);var p=t(o.extend(u,l)),h=this.resourceType;return p.then(function(e){s.resolve(new h(e.data))},s.reject),s.promise},$get:function(n,a,l){i.debug("Getting",this.href);var s,c,d={method:"GET",url:this.href,timeout:a},u=!1;n&&n.transformLongInt&&(d.transformResponse=(s=t.defaults.transformResponse,c=function(e){return r.textHasLargeNumber(e)&&(u=!0,i.debug("Get converted long int to string")),r.stringifyLargeNumbers(e)},s=o.isArray(s)?s:[s],[c].concat(s)));var p=e.defer();return t(o.extend(d,l)).then(function(e){u&&(e.config.longInt=!0),p.resolve(e)}).catch(p.reject),p.promise},$expand:function(e,t){if(this.templated){var r={};if(this.parameters){o.forEach(this.parameters,function(e,t){o.isDefined(e.default)&&(r[t]=e.default)})}var i=o.extend(r,e);return a()(n.$expand(this.href,t)).fill(i)}return n.$expand(this.href)}},l}])},qLI4:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzcycHgiIGhlaWdodD0iMTA2cHgiIHZpZXdCb3g9IjAgMCAzNzIgMTA2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZW1wdHktZ3JhcGhpYy1iYXIrbGluZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAiIHk9IjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMDIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHBhdGggZD0iTTAsMS45OTQwNjAyOCBDMCwwLjg5Mjc3MTE5NiAwLjkwNDcyNDEyMSwwIDIuMDAzMjk4NjMsMCBMNjEuOTk2NzAxNCwwIEM2My4xMDMwOTI3LDAgNjQsMC44OTQ1MTM3NTYgNjQsMS45OTQwNjAyOCBMNjQsMTYgTDAsMTYgTDAsMS45OTQwNjAyOCBaIiBpZD0icGF0aC0yIj48L3BhdGg+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMyIgeD0iMCIgeT0iMzYiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxNiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTQiIHg9IjAiIHk9IjcyIiB3aWR0aD0iNjQiIGhlaWdodD0iMTIiPjwvcmVjdD4KICAgICAgICA8cmVjdCBpZD0icGF0aC01IiB4PSI2IiB5PSIyMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTYiIHg9IjAiIHk9IjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMDIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHBhdGggZD0iTTAsMS45OTQwNjAyOCBDMCwwLjg5Mjc3MTE5NiAwLjkwNDcyNDEyMSwwIDIuMDAzMjk4NjMsMCBMNjEuOTk2NzAxNCwwIEM2My4xMDMwOTI3LDAgNjQsMC44OTQ1MTM3NTYgNjQsMS45OTQwNjAyOCBMNjQsMTYgTDAsMTYgTDAsMS45OTQwNjAyOCBaIiBpZD0icGF0aC03Ij48L3BhdGg+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtOCIgeD0iMCIgeT0iMzYiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxNiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTkiIHg9IjAiIHk9Ijg3IiB3aWR0aD0iNjQiIGhlaWdodD0iMTIiPjwvcmVjdD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xMCIgeD0iNiIgeT0iMjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xMSIgeD0iMTYwIiB5PSI1NiIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEyIiB4PSIxNjAiIHk9IjcxIiB3aWR0aD0iNTIiIGhlaWdodD0iMTIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMTMiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xNCIgeD0iMCIgeT0iMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgICAgIDxwYXRoIGQ9Ik0yMTAsODggTDIxMCw5MS45OTA3NDU1IEMyMTAsOTMuNjUyNzEwOSAyMTEuMDcxOTI3LDk0LjE5NjA1NTEgMjEyLjM5NjA5NSw5My4yMDI5Mjg5IEwyMTQsOTIgTDIxNiw5NiBMMjE4LDk1IEwyMTYsOTEgTDIxOC4wNjI1NTksOTAuNTg3NDg4MyBDMjE5LjY4NDg2Myw5MC4yNjMwMjc1IDIxOS45NTE4MzYsODkuMTYxNDY4OSAyMTguNjYxMDM0LDg4LjEyODgyNjkgTDIxNiw4NiBMMjEyLjMwMjU5Nyw4Mi45MTg4MzA5IEMyMTEuMDMwOTA4LDgxLjg1OTA4OTggMjEwLDgyLjM0OTY3MDQgMjEwLDg0LjAwOTI1NDUgTDIxMCw4OCBaIiBpZD0icGF0aC0xNSI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgaWQ9ImNoYXJ0LWVkaXRvciIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImVtcHR5LWxpbmUrYmFyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzM5LjAwMDAwMCwgLTEzOC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9ImVtcHR5LWdyYXBoaWMtYmFyK2xpbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzOS4wMDAwMDAsIDEzOC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0xNyI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCA0MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHkiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5LTMiIGZpbGw9IiNGRkZGRkYiIHg9IjAiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS00IiBmaWxsPSIjRkZGRkZGIiB4PSIyMjgiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS0yIiBmaWxsPSIjRjdGN0Y5IiB4PSIxMzEiIHk9IjI0IiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMCIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJwZXJmb3JtYW5jZS10YWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iNSIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwMCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGMUYyRjUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMiI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNjMsMTUgTDEsMTUgTDEsMS45OTQwNjAyOCBDMSwxLjQ0OTM3OTgyIDEuNDUyNjc4NTcsMSAyLjAwMzI5ODYzLDEgTDYxLjk5NjcwMTQsMSBDNjIuNTUxMTAxMywxIDYzLDEuNDQ3MDk4MzEgNjMsMS45OTQwNjAyOCBMNjMsMTUgWiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTctQ29weS0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTMiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iMzciIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTctQ29weS01Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTQiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iNzMiIHdpZHRoPSI2MiIgaGVpZ2h0PSIxMCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS03Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNDQUYwRjkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtNSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3Qgc3Ryb2tlPSIjODlEQUVEIiBzdHJva2Utd2lkdGg9IjIiIHg9IjciIHk9IjIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPHRleHQgaWQ9IngtYXhpcyIgZm9udC1mYW1pbHk9IkdyYXBoaWstQm9sZCwgR3JhcGhpayIgZm9udC1zaXplPSI4IiBmb250LXdlaWdodD0iYm9sZCIgbGV0dGVyLXNwYWNpbmc9IjAuNTMzMzMzMzYxIiBmaWxsPSIjQjFCMkJBIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIxNjEuNjgiIHk9IjExIj54LWF4aXM8L3RzcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0IGlkPSJ5LWF4aXMiIGZvbnQtZmFtaWx5PSJHcmFwaGlrLUJvbGQsIEdyYXBoaWsiIGZvbnQtc2l6ZT0iOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxldHRlci1zcGFjaW5nPSIwLjUzMzMzMzM2MSIgZmlsbD0iI0IxQjJCQSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iMTYxLjE2NCIgeT0iNDciPnktYXhpczwvdHNwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGV4dD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCA0MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHkiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOC1Db3B5LTMiIGZpbGw9IiNGRkZGRkYiIHg9IjAiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS00IiBmaWxsPSIjRkZGRkZGIiB4PSIyMjgiIHk9IjEyIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS0yIiBmaWxsPSIjRjdGN0Y5IiB4PSIxMzEiIHk9IjI0IiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMCIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJwZXJmb3JtYW5jZS10YWJsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTYiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iNSIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwMCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGMUYyRjUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtNyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNjMsMTUgTDEsMTUgTDEsMS45OTQwNjAyOCBDMSwxLjQ0OTM3OTgyIDEuNDUyNjc4NTcsMSAyLjAwMzI5ODYzLDEgTDYxLjk5NjcwMTQsMSBDNjIuNTUxMTAxMywxIDYzLDEuNDQ3MDk4MzEgNjMsMS45OTQwNjAyOCBMNjMsMTUgWiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTctQ29weS0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTgiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iMzciIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTctQ29weS01Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTkiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iODgiIHdpZHRoPSI2MiIgaGVpZ2h0PSIxMCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS03Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNDQUYwRjkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMTAiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzg5REFFRCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSI3IiB5PSIyMSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTkuNDEyLDExIEwxNjEuMTgsOC4wNTYgTDE1OS41NDgsNS4yOCBMMTYxLjQxMiw1LjI4IEwxNjIuMzA4LDYuOTg0IEwxNjMuMTg4LDUuMjggTDE2NC44NjgsNS4yOCBMMTYzLjMzMiw4IEwxNjUuMSwxMSBMMTYzLjIyOCwxMSBMMTYyLjE2NCw5LjAzMiBMMTYxLjEsMTEgTDE1OS40MTIsMTEgWiBNMTY1LjYxNzMzMyw4Ljk2IEwxNjUuNjE3MzMzLDcuODI0IEwxNjguMDQxMzMzLDcuODI0IEwxNjguMDQxMzMzLDguOTYgTDE2NS42MTczMzMsOC45NiBaIE0xNjguNzY2NjY3LDExIEwxNzAuNTk4NjY3LDUuMjggTDE3Mi43MTg2NjcsNS4yOCBMMTc0LjUzNDY2NywxMSBMMTcyLjc5ODY2NywxMSBMMTcyLjQ5NDY2Nyw5LjkzNiBMMTcwLjU5ODY2Nyw5LjkzNiBMMTcwLjI5NDY2NywxMSBMMTY4Ljc2NjY2NywxMSBaIE0xNzEuNTUwNjY3LDYuNjA4IEwxNzAuOTE4NjY3LDguODA4IEwxNzIuMTc0NjY3LDguODA4IEwxNzEuNTUwNjY3LDYuNjA4IFogTTE3NS4zMDgsMTEgTDE3Ny4wNzYsOC4wNTYgTDE3NS40NDQsNS4yOCBMMTc3LjMwOCw1LjI4IEwxNzguMjA0LDYuOTg0IEwxNzkuMDg0LDUuMjggTDE4MC43NjQsNS4yOCBMMTc5LjIyOCw4IEwxODAuOTk2LDExIEwxNzkuMTI0LDExIEwxNzguMDYsOS4wMzIgTDE3Ni45OTYsMTEgTDE3NS4zMDgsMTEgWiBNMTgyLjI4OTMzMywxMSBMMTgyLjI4OTMzMyw1LjI4IEwxODMuOTQ1MzMzLDUuMjggTDE4My45NDUzMzMsMTEgTDE4Mi4yODkzMzMsMTEgWiBNMTg3LjcwMjY2NywxMS4wOTYgQzE4Ni45MDc5OTYsMTEuMDk2IDE4Ni4zMDUzMzUsMTAuOTMzMzM1IDE4NS44OTQ2NjcsMTAuNjA4IEMxODUuNDgzOTk4LDEwLjI4MjY2NSAxODUuMjY1MzM0LDkuODA4MDAzMTIgMTg1LjIzODY2Nyw5LjE4NCBMMTg2Ljc5ODY2Nyw5LjE4NCBDMTg2LjgyLDkuNDE4NjY3ODQgMTg2Ljg5NzMzMyw5LjYwMTMzMjY4IDE4Ny4wMzA2NjcsOS43MzIgQzE4Ny4xNjQwMDEsOS44NjI2NjczMiAxODcuMzg3OTk4LDkuOTI4IDE4Ny43MDI2NjcsOS45MjggQzE4Ny45MzIwMDEsOS45MjggMTg4LjExMTk5OSw5Ljg3NjAwMDUyIDE4OC4yNDI2NjcsOS43NzIgQzE4OC4zNzMzMzQsOS42Njc5OTk0OCAxODguNDM4NjY3LDkuNTMwNjY3NTIgMTg4LjQzODY2Nyw5LjM2IEMxODguNDM4NjY3LDkuMTg5MzMyNDggMTg4LjM3NzMzNCw5LjA2ODAwMDM2IDE4OC4yNTQ2NjcsOC45OTYgQzE4OC4xMzE5OTksOC45MjM5OTk2NCAxODcuODkyMDAyLDguODYxMzMzNiAxODcuNTM0NjY3LDguODA4IEMxODYuNzI5MzI5LDguNzExOTk5NTIgMTg2LjE2ODAwMiw4LjUyOTMzNDY4IDE4NS44NTA2NjcsOC4yNiBDMTg1LjUzMzMzMiw3Ljk5MDY2NTMyIDE4NS4zNzQ2NjcsNy41NjUzMzYyNCAxODUuMzc0NjY3LDYuOTg0IEMxODUuMzc0NjY3LDYuNDYxMzMwNzIgMTg1LjU3NTk5OCw2LjAzMzMzNSAxODUuOTc4NjY3LDUuNyBDMTg2LjM4MTMzNSw1LjM2NjY2NSAxODYuOTE4NjYzLDUuMiAxODcuNTkwNjY3LDUuMiBDMTg4Ljk5MzM0LDUuMiAxODkuNzQ1MzMzLDUuNzk0NjYwNzIgMTg5Ljg0NjY2Nyw2Ljk4NCBMMTg4LjMyNjY2Nyw2Ljk4NCBDMTg4LjI2OCw2LjU3MzMzMTI4IDE4OC4wMjI2NjksNi4zNjggMTg3LjU5MDY2Nyw2LjM2OCBDMTg3LjM3NzMzMiw2LjM2OCAxODcuMjEzMzM0LDYuNDExOTk5NTYgMTg3LjA5ODY2Nyw2LjUgQzE4Ni45ODM5OTksNi41ODgwMDA0NCAxODYuOTI2NjY3LDYuNzA2NjY1OTIgMTg2LjkyNjY2Nyw2Ljg1NiBDMTg2LjkyNjY2Nyw3LjAyMTMzNDE2IDE4Ni45ODc5OTksNy4xNDM5OTk2IDE4Ny4xMTA2NjcsNy4yMjQgQzE4Ny4yMzMzMzQsNy4zMDQwMDA0IDE4Ny40Njc5OTgsNy4zNjc5OTk3NiAxODcuODE0NjY3LDcuNDE2IEMxODguNTgyNjcxLDcuNTAxMzMzNzYgMTg5LjEzOTk5OCw3LjY3MDY2NTQgMTg5LjQ4NjY2Nyw3LjkyNCBDMTg5LjgzMzMzNSw4LjE3NzMzNDYgMTkwLjAwNjY2Nyw4LjU5OTk5NzA0IDE5MC4wMDY2NjcsOS4xOTIgQzE5MC4wMDY2NjcsOS43MzYwMDI3MiAxODkuODAxMzM1LDEwLjE4OTMzMTUgMTg5LjM5MDY2NywxMC41NTIgQzE4OC45Nzk5OTgsMTAuOTE0NjY4NSAxODguNDE3MzM3LDExLjA5NiAxODcuNzAyNjY3LDExLjA5NiBaIiBpZD0ieC1heGlzIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjAuOTk2LDQ3IEwxNjAuOTk2LDQ0LjU1MiBMMTU5LjEzMiw0MS4yOCBMMTYwLjkxNiw0MS4yOCBMMTYxLjg4NCw0My4yMDggTDE2Mi44NTIsNDEuMjggTDE2NC40Miw0MS4yOCBMMTYyLjY0NCw0NC41NTIgTDE2Mi42NDQsNDcgTDE2MC45OTYsNDcgWiBNMTY0Ljc4NTMzMyw0NC45NiBMMTY0Ljc4NTMzMyw0My44MjQgTDE2Ny4yMDkzMzMsNDMuODI0IEwxNjcuMjA5MzMzLDQ0Ljk2IEwxNjQuNzg1MzMzLDQ0Ljk2IFogTTE2Ny45MzQ2NjcsNDcgTDE2OS43NjY2NjcsNDEuMjggTDE3MS44ODY2NjcsNDEuMjggTDE3My43MDI2NjcsNDcgTDE3MS45NjY2NjcsNDcgTDE3MS42NjI2NjcsNDUuOTM2IEwxNjkuNzY2NjY3LDQ1LjkzNiBMMTY5LjQ2MjY2Nyw0NyBMMTY3LjkzNDY2Nyw0NyBaIE0xNzAuNzE4NjY3LDQyLjYwOCBMMTcwLjA4NjY2Nyw0NC44MDggTDE3MS4zNDI2NjcsNDQuODA4IEwxNzAuNzE4NjY3LDQyLjYwOCBaIE0xNzQuNDc2LDQ3IEwxNzYuMjQ0LDQ0LjA1NiBMMTc0LjYxMiw0MS4yOCBMMTc2LjQ3Niw0MS4yOCBMMTc3LjM3Miw0Mi45ODQgTDE3OC4yNTIsNDEuMjggTDE3OS45MzIsNDEuMjggTDE3OC4zOTYsNDQgTDE4MC4xNjQsNDcgTDE3OC4yOTIsNDcgTDE3Ny4yMjgsNDUuMDMyIEwxNzYuMTY0LDQ3IEwxNzQuNDc2LDQ3IFogTTE4MS40NTczMzMsNDcgTDE4MS40NTczMzMsNDEuMjggTDE4My4xMTMzMzMsNDEuMjggTDE4My4xMTMzMzMsNDcgTDE4MS40NTczMzMsNDcgWiBNMTg2Ljg3MDY2Nyw0Ny4wOTYgQzE4Ni4wNzU5OTYsNDcuMDk2IDE4NS40NzMzMzUsNDYuOTMzMzM1IDE4NS4wNjI2NjcsNDYuNjA4IEMxODQuNjUxOTk4LDQ2LjI4MjY2NSAxODQuNDMzMzM0LDQ1LjgwODAwMzEgMTg0LjQwNjY2Nyw0NS4xODQgTDE4NS45NjY2NjcsNDUuMTg0IEMxODUuOTg4LDQ1LjQxODY2NzggMTg2LjA2NTMzMyw0NS42MDEzMzI3IDE4Ni4xOTg2NjcsNDUuNzMyIEMxODYuMzMyMDAxLDQ1Ljg2MjY2NzMgMTg2LjU1NTk5OCw0NS45MjggMTg2Ljg3MDY2Nyw0NS45MjggQzE4Ny4xMDAwMDEsNDUuOTI4IDE4Ny4yNzk5OTksNDUuODc2MDAwNSAxODcuNDEwNjY3LDQ1Ljc3MiBDMTg3LjU0MTMzNCw0NS42Njc5OTk1IDE4Ny42MDY2NjcsNDUuNTMwNjY3NSAxODcuNjA2NjY3LDQ1LjM2IEMxODcuNjA2NjY3LDQ1LjE4OTMzMjUgMTg3LjU0NTMzNCw0NS4wNjgwMDA0IDE4Ny40MjI2NjcsNDQuOTk2IEMxODcuMjk5OTk5LDQ0LjkyMzk5OTYgMTg3LjA2MDAwMiw0NC44NjEzMzM2IDE4Ni43MDI2NjcsNDQuODA4IEMxODUuODk3MzI5LDQ0LjcxMTk5OTUgMTg1LjMzNjAwMiw0NC41MjkzMzQ3IDE4NS4wMTg2NjcsNDQuMjYgQzE4NC43MDEzMzIsNDMuOTkwNjY1MyAxODQuNTQyNjY3LDQzLjU2NTMzNjIgMTg0LjU0MjY2Nyw0Mi45ODQgQzE4NC41NDI2NjcsNDIuNDYxMzMwNyAxODQuNzQzOTk4LDQyLjAzMzMzNSAxODUuMTQ2NjY3LDQxLjcgQzE4NS41NDkzMzUsNDEuMzY2NjY1IDE4Ni4wODY2NjMsNDEuMiAxODYuNzU4NjY3LDQxLjIgQzE4OC4xNjEzNCw0MS4yIDE4OC45MTMzMzMsNDEuNzk0NjYwNyAxODkuMDE0NjY3LDQyLjk4NCBMMTg3LjQ5NDY2Nyw0Mi45ODQgQzE4Ny40MzYsNDIuNTczMzMxMyAxODcuMTkwNjY5LDQyLjM2OCAxODYuNzU4NjY3LDQyLjM2OCBDMTg2LjU0NTMzMiw0Mi4zNjggMTg2LjM4MTMzNCw0Mi40MTE5OTk2IDE4Ni4yNjY2NjcsNDIuNSBDMTg2LjE1MTk5OSw0Mi41ODgwMDA0IDE4Ni4wOTQ2NjcsNDIuNzA2NjY1OSAxODYuMDk0NjY3LDQyLjg1NiBDMTg2LjA5NDY2Nyw0My4wMjEzMzQyIDE4Ni4xNTU5OTksNDMuMTQzOTk5NiAxODYuMjc4NjY3LDQzLjIyNCBDMTg2LjQwMTMzNCw0My4zMDQwMDA0IDE4Ni42MzU5OTgsNDMuMzY3OTk5OCAxODYuOTgyNjY3LDQzLjQxNiBDMTg3Ljc1MDY3MSw0My41MDEzMzM4IDE4OC4zMDc5OTgsNDMuNjcwNjY1NCAxODguNjU0NjY3LDQzLjkyNCBDMTg5LjAwMTMzNSw0NC4xNzczMzQ2IDE4OS4xNzQ2NjcsNDQuNTk5OTk3IDE4OS4xNzQ2NjcsNDUuMTkyIEMxODkuMTc0NjY3LDQ1LjczNjAwMjcgMTg4Ljk2OTMzNSw0Ni4xODkzMzE1IDE4OC41NTg2NjcsNDYuNTUyIEMxODguMTQ3OTk4LDQ2LjkxNDY2ODUgMTg3LjU4NTMzNyw0Ny4wOTYgMTg2Ljg3MDY2Nyw0Ny4wOTYgWiIgaWQ9InktYXhpcyIgZmlsbD0iI0IxQjJCQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTE0LUNvcHktOCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbC1vcGFjaXR5PSIwLjQiIGZpbGw9IiM5OEQ1QjAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiM5OEQ1QjAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMTYxIiB5PSI1NyIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTE0LUNvcHktMTEiPgogICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGwtb3BhY2l0eT0iMC40IiBmaWxsPSIjOThENUIwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEyIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3Qgc3Ryb2tlPSIjOThENUIwIiBzdHJva2Utd2lkdGg9IjIiIHg9IjE2MSIgeT0iNzIiIHdpZHRoPSI1MCIgaGVpZ2h0PSIxMCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NC4wMDAwMDAsIDkwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS0xMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS05Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsLW9wYWNpdHk9IjAuNCIgZmlsbD0iIzk4RDVCMCIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xNCI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkZpbGwtMS1Db3B5LTYiPgogICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iIzYzNjU2RSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xNSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMTMuNjQxNDMsOTMuNTE4OTI3NiBMMjE1LjEwNTU3Myw5Ni40NDcyMTM2IEwyMTUuNTUyNzg2LDk3LjM0MTY0MDggTDIxNi40NDcyMTQsOTYuODk0NDI3MiBMMjE4LjQ0NzIxNCw5NS44OTQ0MjcyIEwyMTkuMzQxNjQxLDk1LjQ0NzIxMzYgTDIxOC44OTQ0MjcsOTQuNTUyNzg2NCBMMjE3LjQ3OTk0Miw5MS43MjM4MTU1IEwyMTguMjU4Njc1LDkxLjU2ODA2OSBDMjIwLjcxMzg1NSw5MS4wNzcwMzI4IDIyMS4yNDAyNTMsODguOTExNTc3NCAyMTkuMjg1NzI5LDg3LjM0Nzk1ODEgTDIxNi42MjQ2OTUsODUuMjE5MTMxMiBMMjEyLjk0Mjc4MSw4Mi4xNTA2MDk2IEMyMTEuMDE4MTQ5LDgwLjU0Njc0OTYgMjA5LDgxLjUwMzkxMTIgMjA5LDg0LjAwOTI1NDUgTDIwOSw4OCBMMjA5LDkxLjk5MDc0NTUgQzIwOSw5NC40NzQyMjEyIDIxMS4wMTA2NDMsOTUuNDkyMDE3NiAyMTIuOTk2MDk1LDk0LjAwMjkyODkgTDIxMy42NDE0Myw5My41MTg5Mjc2IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},qhYP:function(e,t){e.exports='<div class="default-modal context-modal create-definition-paywall-modal">\n  <h3 class="modal-header">Upgrade to Plus <a href="#" class="modal-close icon-x-large-white" ng-click="$dismiss();"></a></h3>\n  <div class="modal-container">\n    <p>\n      We provide your organization with 10 Definitions so you can experience how reusable business logic can streamline\n      your team\'s workflow. Contact us to upgrade and get unlimited Definitions.\n    </p>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-primary" ng-click="$dismiss()"\n            intercom-show="I\'m interested in the Plus Plan to get unlimited Definitions" intercom-email="sales@modeanalytics.com">Contact Us</button>\n  </div>\n</div>\n'},r02N:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("0YuG"),o=(n.n(r),n("IU2V"),n("J631")),i=n.n(o),a=443,l=function(){function ModeAPIProvider(){}return ModeAPIProvider.prototype.$get=function(){var e=this.host,t=this.port,n=this.ssl,o=this.prefix;return{$expand:function(i,l){var s=(n?"https://":"http://")+e;return r.isDefined(t)&&!function(e){return e&&e.excludeSSLPort&&t===a}(l)&&(s+=":"+t),s+(r.isDefined(o)?o:"")+i},stripIncludes:function(e){if(e&&r.isDefined(e.includes)){var t={};return function parseAtLevel(e,t,n){r.isString(n)?t[e+"["+n+"]"]=1:r.isArray(n)?r.forEach(n,function(n){parseAtLevel(e,t,n)}):r.isObject(n)&&r.forEach(n,function(n,r){parseAtLevel(e+"["+r+"]",t,n)})}("embed",t,e.includes),delete e.includes,t}},templatize:function(e,t){return i()(this.$expand(e)).fill(t)}}},ModeAPIProvider.prototype.configure=function(e,t,n){var o=r.extend({ssl:!1},n||{});this.host=e,this.port=t||(o.ssl?a:80),this.ssl=o.ssl,this.prefix=o.prefix},ModeAPIProvider}();r.module("mode.api").provider("ModeAPI",l)},rIhp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("MUJ/"),n("RTaK"),n("LF2W");var r=n("0YuG"),o=n.n(r),i=function(e,t){return{restrict:"A",require:"?^uibDropdown",link:function(n,o,i,a){var l=parseInt(i.selectHeight,10),s=function(t){if(o.hasClass("dropdown-open")){var n=t?20+t:20;if(o.offset().top+o.height()+n>e.innerHeight||o.hasClass("auto-height-resize")){o.addClass("auto-height-resize");var r=e.innerHeight-o.offset().top-n;l&&(r=Math.min(r,l)),r>=o.height()?(o.height("auto"),o.removeClass("auto-height-resize"),o.offset().top+o.height()+n>e.innerHeight&&(o.height(r),o.addClass("auto-height-resize"))):o.height(r)}}};n.$watch(a.isOpen,function(e){e&&t(function(){return s(10)})});var c=function(){return s()};r.element(e).on("resize",c),o.on("multiselect-resize",c),n.$on("$destroy",function(){r.element(e).off("resize",c),o.off("multiselect-resize",c)})}}};i.$inject=["$window","$timeout"],r.module("mode.components").directive("selectHeight",i);n("4bls");var a=n("Zz1P"),l=n.n(a),s=n("7PCL"),c=n.n(s),d=n("JUru"),u=n.n(d),p=c.a.editors.TextEditor.prototype.extend();p.prototype.open=function(){c.a.editors.TextEditor.prototype.open.apply(this,arguments);var e=this.refreshDimensions.bind(this);this.instance._registerTimeout(setTimeout(e,0))},p.prototype.createElements=function(){c.a.editors.TextEditor.prototype.createElements.apply(this,arguments),this.TEXTAREA.readOnly=!0},r.module("mode.grid",["mode.utils","ngSanitize"]),r.module("mode.grid").controller("GridController",["$scope","$state","$timeout",function(e,t,n){}]),r.module("mode.grid").directive("modeGrid",["$rootScope","$timeout","lodash","$compile","Utils","$window",function(e,t,n,o,i,a){return{scope:{dataset:"=",offset:"@",resizeElement:"@"},restrict:"AE",controller:"GridController",template:u.a,link:function(o,s){var d,u=parseInt(o.offset),h=s.find(".grid-element")[0],g=!1,m="resize.grid"+(o.resizeElement?o.resizeElement:".result");function datetimeRenderer(e,t,n,a,s,d,u){if(o.dataset&&o.dataset.columns&&o.dataset.columns[a]){var p=o.dataset.columns[a],h=function(e,t,n){if(null!==e||r.isDefined(e))switch(n){case"datetime":return function(e){var t=l()(e);return t&&t.isValid()?(i.isUTC(e)?t.utc():t._tzm&&(t=l.a.parseZone(e)),t.format("YYYY-MM-DD HH:mm:ss")):e}(e);case"date":return function(e){var t=l()(e);return t&&t.isValid()?(i.isUTC(e)?t.utc():t._tzm&&(t=l.a.parseZone(e)),t.format("YYYY-MM-DD")):e}(e);default:return i.escapeHTML("")}return""}(d,p.name,p.type);c.a.dom.fastInnerText(t,h)}}function textRenderer(e,t,n,r,o,a,l){switch(typeof a){case"object":a=null===a?"":i.escapeHTML(a.toString());break;case"string":case"number":case"undefined":break;default:a=a.toString()}c.a.renderers.TextRenderer(e,t,n,r,o,a,l)}e.$on("results.focus",function(){o.setFocus()}),o.setFocus=function(){d&&t(function(){d.selectCell(0,0)})},o.$watch("dataset",function(e){if(!(r.isUndefined(e)||null===e||!e.content||e.state&&"failed"===e.state)){if(d)try{d.destroy()}catch(e){}var l,f=n.map(e.columns,function(e){return i.escapeHTML(e.name)});if(n.some(f,function(e){return e.indexOf(".")>=0})){var C=n.map(e.content,function(e){var t={};return n.forOwn(e,function(e,n){t[n.replace(/[.]/g,"_")]=e}),t});l=n.map(e.columns,function(e){var t="text";switch(e.type){case"datetime":case"date":t=datetimeRenderer;break;default:t=textRenderer}return{data:e.name.replace(/[.]/g,"_"),renderer:t,editor:!1}})}else l=n.map(e.columns,function(e){var t="text";switch(e.type){case"datetime":case"date":t=datetimeRenderer;break;default:t=textRenderer}return{data:e.name,renderer:t,editor:!1}});h.style.height=s.height()-u+"px",h.style.width=s.width()+"px";var y={data:C||e.content,colHeaders:f,columns:l.map(function(e){return n.assign(e,{editor:p})}),height:s.height()-o.offset,rowHeaders:!0,manualColumnResize:!0,renderAllRows:!1,autoRowSize:!0,stretchH:"all",fragmentSelection:!0,fillHandle:!1,columnSorting:!1,sortIndicator:!1,rowHeight:function(e){return 27},defaultRowHeight:27,beforeKeyDown:function(e){var t,n,r,o,i=(t=function(e,t){return"function"==typeof t?t(e):e===t},n=e.keyCode,t.bind(null,n)),a=e.metaKey||e.ctrlKey,l=i((r=37,o=40,function(e){return e>=r&&e<=o}));(i(46)||i(8)||a&&i(86)||!a)&&!l&&(e.isImmediatePropagationEnabled=!1,e.isImmediatePropagationStopped=function(){return!0},e.preventDefault())}};t(function(){d=new c.a(h,y)});var b=function(){g=!0,t(function(){h.style.height=s.height()-u+"px",h.style.width=s.width()+"px";try{d&&d.render()}catch(e){}},50)};t(function(){g||b()},50),r.element(a).off(m),r.element(a).on(m,b)}}),o.$on("$destroy",function(){try{d&&d.destroy()}catch(e){}r.element(a).off(m)})}}}]);var h=n("tf9N"),g=n.n(h),m=function(e,t,n,r,o,i,a){return{restrict:"A",scope:{report:"<",reportRun:"<",owner:"<",schedulesCollection:"=",account:"="},template:g.a,link:function(e,a,l){e.loading=!0,e.isSlackSchedule=function(e){return e.savedSubscriptions&&e.savedSubscriptions.length&&e.savedSubscriptions[0]&&e.savedSubscriptions[0].savedSlackMemberships&&e.savedSubscriptions[0].savedSlackMemberships.length},e.$watch("schedulesCollection",function(r){r&&r.watch(e,function(r){(function(e){return t.all(e.map(function(e){return e.savedSubscriptions?e:e.reportSubscriptions({useEntryPath:!0}).then(n.elements).then(function(t){return i.buildSubscriptionWithSlackMembership(t).then(function(t){return e.savedSubscriptions=t,e})})}))})(r).then(function(t){e.schedules=t,e.loading=!1})})}),e.deleteSchedule=function(e){this.schedule.destroy().then(function(){r.success("Deleted schedule")}).catch(function(e){r.error("Could not delete schedule")})},e.more=function(){e.schedulesCollection&&(e.loading=!0,e.schedulesCollection.next().then(function(t){e.schedulesCollection=t}))},e.testEmail=function(t){var n={"report_run_email.recipient_address":e.account.email,"report_run_email.message":""},i=t._new_reportSubscription?t._formElements:t._resource._forms.edit._inputs.report_subscription;i.csv_attachments_enabled&&(n["report_run_email.csv_attachments_enabled"]=t.csv_attachments_enabled),i.pdf_attachments_enabled&&(n["report_run_email.pdf_attachments_enabled"]=t.pdf_attachments_enabled),i.data_previews_enabled&&(n["report_run_email.data_previews_enabled"]=t.data_previews_enabled),i.data_tables_enabled&&(n["report_run_email.data_tables_enabled"]=t.data_tables_enabled),o.create({reportRun:e.reportRun.token,report:e.report.token,params:n}).then(function(){r.success("Email sent")}).catch(function(e){r.error("Email failed to send")})}}}};m.$inject=["$log","$q","ModeCollection","AlertService","ReportRunEmailModel","ReportSubscriptionModel","Utils"],r.module("mode.components").directive("modeSchedulesList",m);var f=n("zotg"),C=n.n(f),y=n("PbPb"),b=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,v={bindings:{report:"<",run:"<",dismiss:"&",startSchedule:"<",owner:"<",account:"<",view:"@"},controller:function(){function NewSchedulesController(e,t,n,o,i,a,l,s,c,d,u,p,h,g,m,f,C,y){var b=this;this.$scope=e,this.$sce=t,this.$interpolate=n,this.$element=o,this.ReportSubscriptionModel=i,this.ReportScheduleModel=a,this.EmailSubscriptionMembershipModel=l,this.SlackSubscriptionMembershipModel=s,this.$q=c,this.AlertService=d,this.Search=u,this.$log=p,this.ModeCollection=h,this.DataLayerFlipperService=g,this.SlackMessageService=m,this.$timeout=f,this.Utils=C,this.ReportRunEmailModel=y,this.hasExternalEmails=!1,this.initializingSchedules=!0,this.slackScheduleTooltipOpened=!1,this.schedules=[],this.slackChannels=[],this.slackAppInstaller="",this.scheduleName="report",this.scheduleTitle="Report",this.views={index:!0,show:!1,edit:!1,users:!1,scheduleTime:"hour",loading:!1},this.userSearch={query:"",searching:!1,users:[],focus:!1},this.notify={type:"email",options:[["Email","email"],["Don\u2019t notify me, just refresh the report","none"]]},e.$watch("ctrl.userSearch.query",function(e){e||"string"!=typeof e?r.isDefined(e)&&b.executeSearch(e):b.clearSearch()})}return NewSchedulesController.prototype.$onInit=function(){var e=this;if(this.$q.all([this.report.reportSchedules({includes:{report_schedules:{report_subscriptions:{report_subscriptions:["new_email_subscription_membership","slack_subscription_memberships","new_slack_subscription_membership"]}}},refresh:!0}),this.report.perspectiveEmailSubscriptionMemberships({refresh:!0})]).then(this.$q.spread(function(t,n){e.userMembershipsCollection=n;var r=e;n.watch(e.$scope,function(e){r.userMemberships=e,r.initializingSchedules||r.includeUserMemberships.call(r,r.schedules)}),e.reportSchedulesCollection=t,t.watch(e.$scope,function(e){r.includeSubscriptions.call(r,e).then(r.includeUserMemberships.bind(r)).then(function(e){r.initializingSchedules=!1,r.schedules=e})})})),this.startSchedule){var t=this;this.startSchedule.reportSubscriptions().then(this.ModeCollection.elements).then(function(e){e.length?(t.editSchedule(t.startSchedule,e[0]),t.view&&"users"===t.view&&t.account.email_verified&&(t.setView("loading"),t.initUsers.call(t))):t.editSchedule(t.startSchedule,void 0)})}else this.view&&"new"===this.view&&this.newSchedule();var n=this.$q.defer();this.slackPromise=n.promise,this.owner.slackApp().then(function(t){e.slackAppInstaller=t.installer_name,e.slackShareHelpText=e.$interpolate(e.$sce.getTrustedHtml(e.SlackMessageService.privateShareHelpText))({slackAppInstaller:e.Utils.escapeHTML(e.slackAppInstaller)||"The person who installed the Mode + Slack app"}),t.channels().then(e.ModeCollection.elements).then(function(t){e.slackChannels=t,e.selectedChannel=y.find(e.slackChannels,function(e){return"general"===e.name})||e.slackChannels[0],e.notify.options.splice(e.notify.options.length-1,0,["Slack","slack"]),n.resolve()}).catch(function(){})}).catch(function(){})},NewSchedulesController.prototype.buildChannelsList=function(e){var t=e.search,n=r.copy(e.items);if(n=n.filter(function(e){return-1!==e.idx}),t){var o={idx:-1,name:t,channelName:"#"+t};"@"!==t[0]&&"#"!==t[0]||(o.channelName=t),e.items=[o].concat(n),e.selected=o}else e.items=n},NewSchedulesController.prototype.getSlackPlaceholder=function(e){return e||!this.schedule.created_at?"Select a channel...":y.propertyOf(this.schedule)("savedSubscriptions[0].savedSlackMemberships[0]")?this.schedule.savedSubscriptions[0].savedSlackMemberships[0].getDisplayName():void 0},NewSchedulesController.prototype.isSlackSchedule=function(e){return!!e&&!!(e&&e.savedSlackMemberships&&e.savedSlackMemberships.length)},NewSchedulesController.prototype.focusSlackChannelsInput=function(){$(this.$element[0]).find("input.ui-select-search")[0].focus()},NewSchedulesController.prototype.includeSubscriptions=function(e){var t=this;return this.$q.all(e.map(function(e){return e.savedSubscriptions?e:e.reportSubscriptions({useEntryPath:!0}).then(t.ModeCollection.elements).then(function(n){return t.ReportSubscriptionModel.buildSubscriptionWithSlackMembership(n).then(function(t){return e.savedSubscriptions=t,e})})}))},NewSchedulesController.prototype.isMembershipEqual=function(e,t){return t.id===e._resource.links("report_subscription").href},NewSchedulesController.prototype.includeUserMemberships=function(e){var t=this;return e.map(function(e){if(e.savedSubscriptions&&e.savedSubscriptions.length&&t.userMemberships){var n=y.find(t.userMemberships,function(n){return t.isMembershipEqual(n,e.savedSubscriptions[0])});e.userMembership=n||null}else e.userMembership=null;return e})},NewSchedulesController.prototype.setView=function(e){this.views.index=!1,this.views.show=!1,this.views.edit=!1,this.views.users=!1,this.views.loading=!1,this.userSearch.focus="users"===e,this.views[e]=!0},NewSchedulesController.prototype.canCreateSchedule=function(){return this.report.canCreateFromForm_reportSchedules()},NewSchedulesController.prototype.newSchedule=function(){if(this.account.email_verified){this.schedule=this.report.modelFromForm_reportSchedules(),this.editForm=this.schedule._formElements,this.mergeFormFieldParams();var e=Math.floor(23*Math.random());this.schedule.cron.hour=e,this.schedule.slackChannel=this.selectedChannel,this.subscription=this.report.modelFromForm_reportSubscriptions(),this.subscriptionEditForm=this.subscription._formElements,this.notify.type="email",this.setView("edit")}},NewSchedulesController.prototype.focusSelect=function(e){this.$timeout(function(){$(e.target).children("select:first").focus()})},NewSchedulesController.prototype.hourlySettings=function(){return this.schedule&&this.schedule.cron&&"hourly"!==this.schedule.cron.freq&&"every_15_minutes"!==this.schedule.cron.freq&&"every_30_minutes"!==this.schedule.cron.freq},NewSchedulesController.prototype.minuteOptions=function(){return this.editForm&&this.editForm.cron&&this.editForm.cron.minute&&this.schedule&&this.schedule.cron?this.editForm.cron.minute.options.slice(0,this.schedule.getMinuteRange()):[]},NewSchedulesController.prototype.resetMinutes=function(){this.schedule&&this.schedule.cron&&this.schedule.resetMinuteRange()},NewSchedulesController.prototype.infoText=function(){if(!this.schedule||!this.schedule.cron)return"";var e="";switch(this.notify.type){case"email":e="be emailed";break;case"slack":e="be shared in Slack";break;default:e="run"}this.schedule.updateFromCron();var t=this.schedule.getFrequencyText();return"This report will "+e+" "+(t=t.charAt(0).toLowerCase()+t.slice(1))},NewSchedulesController.prototype.editSchedule=function(e,t){var n=this;this.account.email_verified&&(this.schedule=e,this.schedule.slackChannel=this.selectedChannel,this.editForm=this.schedule._resource._forms.edit._inputs.report_schedule,this.mergeFormFieldParams(!0),this.notify.type=t?t.savedSlackMemberships&&t.savedSlackMemberships.length?"slack":"email":"none",this.subscription=t||this.report.modelFromForm_reportSubscriptions(),this.subscriptionEditForm=this.subscription._new_reportSubscription?this.subscription._formElements:this.subscription._resource._forms.edit._inputs.report_subscription,this.isSlackSchedule(this.subscription)?(this.setView("loading"),this.slackPromise.then(function(){n.schedule.slackChannel=y.find(n.slackChannels,function(e){return e.name===n.subscription.savedSlackMemberships[0].channel}),n.setView("edit")}).catch(function(){return n.setView("edit")})):this.setView("edit"))},NewSchedulesController.prototype.mergeFormFieldParams=function(e){var t=this;if(void 0===e&&(e=!1),this.run){var n=y.keyBy(this.run.form_fields,"name");y.merge(this.editForm.params,n),y.keys(this.editForm.params).forEach(function(e){"multiselect"===t.editForm.params[e].type&&t.editForm.params[e].options.unshift(["(Select All)","all"])}),e||y.keys(n).forEach(function(e){t.schedule.params[e]=n[e].value})}},NewSchedulesController.prototype.editOrNew=function(e){this.setView("edit")},NewSchedulesController.prototype.paramsEmpty=function(){return!this.schedule||!this.schedule._formElements||r.equals({},this.schedule._formElements.params)},NewSchedulesController.prototype.scheduleParamsEmpty=function(){return!this.schedule||!this.editForm||r.equals({},this.editForm.params)},NewSchedulesController.prototype.viewScheduleParamsEmpty=function(){return!this.schedule||r.equals({},this.schedule.parameters)},NewSchedulesController.prototype.clearSearch=function(){this.userSearch.searching=!1,this.userSearch.users=[],this.executeSearch("")},NewSchedulesController.prototype.insertCurrentUser=function(e){return e.userEmail,y.some(e.userEmail,{email:this.account.email})?e:(e.userEmail.unshift(this.account),e)},NewSchedulesController.prototype.executeSearch=function(e){var t={query:e,indexes:["userEmail"],perPage:20,filters:"(organization_"+this.owner.token+")"},n=this;this.Search.query(t).then(function(t){return e?t:n.insertCurrentUser(t)}).then(this.handleSuccess.bind(this)).catch(this.handleError.bind(this))},NewSchedulesController.prototype.handleSuccess=function(e){this.userSearch.searching=!1,this.resetMembershipsInSearch(),this.userSearch.users=this.subscriptionMemberships?e.userEmail.map(this.includeMemberships.bind(this)):e.userEmail,this.includeValidEmails()},NewSchedulesController.prototype.includeValidEmails=function(){var e=this;this.validEmails=[],this.userSearch.query&&this.owner.authorized_domains&&this.owner.authorized_domains.length&&this.owner.authorized_domains.forEach(function(t){var n=e.userSearch.query.split("@")[0]+"@"+t;!b.test(n)||y.some(e.userSearch.users,{email:n})||e.hasEmailInMemberships(n)||e.validEmails.push(n)}),this.report.shared&&b.test(this.userSearch.query)&&this.validEmails.indexOf(this.userSearch.query)<0&&!this.hasEmailInMemberships(this.userSearch.query)&&this.validEmails.push(this.userSearch.query)},NewSchedulesController.prototype.isCurrentUser=function(e){return function(t){return t.email===e.email?-1:0}},NewSchedulesController.prototype.resetMembershipsInSearch=function(){var e=this;this.hasExternalEmails=!1,this.subscriptionMemberships&&this.subscriptionMemberships.length&&this.subscriptionMemberships.forEach(function(t){t.inSearch=!1,e.report.shared&&!e.hasExternalEmails&&e.isOutsideDomain(t.email)&&(e.hasExternalEmails=!0)})},NewSchedulesController.prototype.hasEmailInMemberships=function(e){return y.some(this.subscriptionMemberships,function(t){return 0===t.email.indexOf(e)})},NewSchedulesController.prototype.isOutsideDomain=function(e,t){return!(!e||e.indexOf("@")<0)&&(void 0!==(t=t||{}).outside?t.outside:t.outside=!y.includes(this.owner.authorized_domains,e.split("@")[1].toLowerCase()))},NewSchedulesController.prototype.includeMemberships=function(e){return e.membership=null,this.subscriptionMemberships.forEach(function(t){t.email===e.email&&(e.membership=t,t.inSearch=!0)}),e},NewSchedulesController.prototype.handleError=function(e){this.userSearch.searching=!1,this.userSearch.users=[]},NewSchedulesController.prototype.deleteSchedule=function(e){var t=this;e.destroy().then(function(){t.views.index||t.dismiss(),t.AlertService.success("Deleted schedule")}).catch(function(e){t.AlertService.error("Could not delete schedule")})},NewSchedulesController.prototype.saveOrNext=function(){var e=this;this.saveSchedule().then(function(){"none"===e.notify.type||"slack"===e.notify.type?e.setView("index"):e.initUsers.call(e)})},NewSchedulesController.prototype.initUsers=function(){var e=this;this.subscription.emailSubscriptionMemberships({refresh:!0}).then(function(t){e.subscriptionMembershipsCollection=t,t.watch(e.$scope,function(t){e.subscriptionMemberships=t,e.resetMembershipsInSearch.call(e),e.userSearch.users=e.userSearch.users.map(e.includeMemberships.bind(e)),e.includeValidEmails()}),t.elements().then(function(t){e.subscriptionMemberships=t,e.clearSearch(),e.setView("users")})})},NewSchedulesController.prototype.toggleSubscription=function(e,t,n){var r=this;e.preventDefault(),e.stopPropagation(),n?n.destroy().then(function(){r.AlertService.success("Unsubscribed"),t.email_subscriber_count--}).catch(function(e){r.AlertService.error("Could not remove email")}):this.EmailSubscriptionMembershipModel.create({reportSubscription:t.id,params:{"membership.subscriber_email":this.account.email}}).then(function(e){r.AlertService.success("Subscribed"),t.email_subscriber_count++,r.userMembershipsCollection.insert(e)}).catch(function(e){r.$log.log("error subscribing",e),r.AlertService.error("Error subscribing")})},NewSchedulesController.prototype.toggleMembership=function(e,t){var n=this;t?t.destroy().then(function(){n.AlertService.success("Removed email"),n.subscription.email_subscriber_count--}).catch(function(e){n.AlertService.error("Could not remove email")}):this.EmailSubscriptionMembershipModel.create({reportSubscription:this.subscription.id,params:{"membership.subscriber_email":e}}).then(function(e){n.AlertService.success("Added email"),n.subscription.email_subscriber_count++,n.subscriptionMembershipsCollection.insert(e)}).catch(function(e){n.$log.log("error adding email",e),n.AlertService.error("Error adding email")})},NewSchedulesController.prototype.saveSchedule=function(){var e=this;if(this.schedule._new_reportSchedule)switch(this.notify.type){case"none":return this.createSchedule.call(this);case"email":return this.createScheduleAndSubscription.call(this);case"slack":return this.createScheduleAndSubscription.call(this).then(function(t){return e.SlackSubscriptionMembershipModel.create({reportSubscription:t.id,params:{"membership.subscriber_channel":e.schedule.slackChannel.name,"membership.subscriber_channel_id":e.schedule.slackChannel.id}})})}else switch(this.notify.type){case"none":return this.updateSchedule.call(this);case"email":return this.updateScheduleAndSubscription.call(this);case"slack":return this.updateScheduleAndSubscription.call(this).then(function(){return e.SlackSubscriptionMembershipModel.create({reportSubscription:e.subscription.id,params:{"membership.subscriber_channel":e.schedule.slackChannel.name,"membership.subscriber_channel_id":e.schedule.slackChannel.id}}).then(function(t){return e.subscription.insertSlackMembership(t)})})}},NewSchedulesController.prototype.updateSchedule=function(){var e=this,t=this.$q.defer();return this.subscription._new_reportSubscription||this.subscription.destroy().then(function(){e.schedule.savedSubscriptions=null}),this.scheduleEditForm.$dirty?this.ReportScheduleModel.update(this.schedule).then(function(){e.AlertService.success("Updated schedule"),t.resolve()}).catch(function(n){e.AlertService.error("Schedule did not update properly"),t.reject(n)}):(t.resolve(),t.promise)},NewSchedulesController.prototype.updateScheduleAndSubscription=function(){var e=this,t=this.$q.defer();if(this.subscription._new_reportSubscription){var n=this;this.ReportScheduleModel.update(this.schedule).then(function(e){var r=n.subscription.toParams();r["report_subscription.schedule_token"]=n.schedule.token,r.includes=["report_schedule","new_email_subscription_membership"],n.ReportSubscriptionModel.create({report:n.report.token,params:r}).then(function(e){n.subscription=e,n.schedule.savedSubscriptions=[e],n.AlertService.success("Updated schedule"),t.resolve()}).catch(function(e){n.$log.log("error creating subscription on existing schedule",e),n.AlertService.error("Schedule did not update properly"),t.reject(e)})}).catch(function(e){n.$log.log("error updating schedule while creating subscription on existing schedule",e),n.AlertService.error("Schedule did not update properly"),t.reject(e)})}else this.scheduleEditForm.$dirty?this.$q.all([this.ReportSubscriptionModel.update(this.subscription),this.ReportScheduleModel.update(this.schedule)]).then((function(){var e=this;this.subscription.destroySavedSlackMemberships().then(function(){"slack"===e.notify.type?e.subscription.emailSubscriptionMemberships({refresh:!0}).then(e.ModeCollection.elements).then(function(t){return e.$q.all(t.map(function(e){return e.destroy()}))}).then(function(){t.resolve(),e.AlertService.success("Updated schedule")}):(t.resolve(),e.AlertService.success("Updated schedule"))})}).bind(this)).catch(function(n){e.AlertService.error("Schedule did not update properly"),t.reject(n)}):t.resolve();return t.promise},NewSchedulesController.prototype.createSchedule=function(){var e=this,t=this.$q.defer();return this.ReportScheduleModel.create({report:this.report.token,params:this.schedule.toParams()}).then(function(n){e.schedule=n,e.AlertService.success("Created schedule"),e.reportSchedulesCollection.insert(n),t.resolve()}).catch(function(n){e.AlertService.error("Could not create schedule"),t.reject(n)}),t.promise},NewSchedulesController.prototype.createScheduleAndSubscription=function(){var e=this.$q.defer(),t=this.subscription.toParams();t.includes=["report_schedule","new_email_subscription_membership","new_slack_subscription_membership"];var n=this.schedule.toParams(),r=this;return Object.keys(n).forEach(function(e){t["report_subscription."+e]=n[e]}),this.ReportSubscriptionModel.create({report:this.report.token,params:t}).then(function(t){r.subscription=t,r.AlertService.success("Created schedule"),t.reportSchedule().then(function(e){r.reportSchedulesCollection.insert(e)}),e.resolve(t)}).catch(function(t){r.AlertService.error("Could not create schedule"),e.reject(t)}),e.promise},NewSchedulesController.prototype.testEmail=function(e){var t=this,n={"report_run_email.recipient_address":this.account.email,"report_run_email.message":""},r=e._new_reportSubscription?e._formElements:e._resource._forms.edit._inputs.report_subscription;r.csv_attachments_enabled&&(n["report_run_email.csv_attachments_enabled"]=e.csv_attachments_enabled),r.pdf_attachments_enabled&&(n["report_run_email.pdf_attachments_enabled"]=e.pdf_attachments_enabled),r.data_previews_enabled&&(n["report_run_email.data_previews_enabled"]=e.data_previews_enabled),r.data_tables_enabled&&(n["report_run_email.data_tables_enabled"]=e.data_tables_enabled),this.ReportRunEmailModel.create({reportRun:this.run.token,report:this.report.token,params:n}).then(function(){t.AlertService.success("Email sent")}).catch(function(e){t.AlertService.error("Email failed to send")})},NewSchedulesController.$inject=["$scope","$sce","$interpolate","$element","ReportSubscriptionModel","ReportScheduleModel","EmailSubscriptionMembershipModel","SlackSubscriptionMembershipModel","$q","AlertService","Search","$log","ModeCollection","DataLayerFlipperService","SlackMessageService","$timeout","Utils","ReportRunEmailModel"],NewSchedulesController}(),controllerAs:"ctrl",template:C.a};r.module("mode.components").component("modeNewSchedules",v);var I=function(){function RowSettingsController(e,t,n,r){var o=this;this.$scope=e,this.wms=t,this.vs=n,this.store=r;var i=r.getState().editor;e.data={rowSize:i.rowSize,index:i.row};var a=r.subscribe(function(){return o.updateState(r.getState().editor)});e.$on("$destroy",function(){return a()})}return RowSettingsController.prototype.updateState=function(e){this.$scope.data.rowSize=e.rowSize,this.$scope.data.index=e.row},RowSettingsController.prototype.setRowSize=function(e){this.vs.selectRow(this.$scope.data.index,this.$scope.data.rowSize),this.wms.setRowSize(this.$scope.data.index,this.$scope.data.rowSize)},RowSettingsController.$inject=["$scope","WindowMessageService","ViewService","StoreService"],RowSettingsController}();function RowSettingsSidebar(e,t,n,r){return{scope:{},bindToController:!0,controller:I,controllerAs:"ctrl",restrict:"E",template:'\n    <div class="sidebar-content chart-sidebar">\n      <h3 class="setting-label">Row Index: {{ data.index }}</h3>\n      <h3 class="setting-label">Row Size</h3>\n      <div class="form-field">\n        <select class="form-control form-control-sm form-control-block" ng-model="data.rowSize" ng-change="ctrl.setRowSize($event)">\n          <option value="1">Small</option>\n          <option value="2">Medium</option>\n          <option value="4">Large</option>\n        </select>\n      </div>\n    </div>',link:function(e,t,n,r){}}}RowSettingsSidebar.$inject=["$compile","$timeout","WindowMessageService","ViewService"],r.module("mode.editor").directive("rowSettingsSidebar",RowSettingsSidebar);n("iJaZ");var S=n("0iPh"),w=n.n(S);n("PiCI");r.module("mode.components").directive("tokenfield",[function(){return{scope:{onTokenCreated:"&",onTokenCreating:"&",onTokenRemoved:"&"},link:function(e,t,n){t.on("tokenfield:initialize",function(){w()(this).data("bs.tokenfield").$input.prop("autofocus",!0)}).tokenfield({createTokensOnBlur:!0}),t.on("tokenfield:createdtoken",function(n){e.onTokenCreated({$event:n,$tokens:t.tokenfield("getTokens")})}),t.on("tokenfield:createtoken",function(n){return e.onTokenCreating({$event:n,$tokens:t.tokenfield("getTokens")})}),t.on("tokenfield:removedtoken",function(n){e.onTokenRemoved({$event:n,$tokens:t.tokenfield("getTokens")})})}}}]);n("wcGD");var A=n("1azF");r.module("mode.python").directive("modePythonAce",["ace","$timeout",function(e,t){return{require:"?ngModel",restrict:"AE",scope:{ngModel:"=",lang:"<",session:"<",readOnly:"<",controlEvents:"=",onBlur:"&",onFocus:"&",onTextChanged:"&"},template:'<div class="python-ace-editor" ng-class="{\'no-selection\': readOnly}"></div>',link:function(n,o,i,a){var l=o.find(".python-ace-editor"),s=e.edit(l[0]);s.getSession().setUseWorker(!1),s.$blockScrolling=1/0,s.renderer.$fontMetrics.setPolling(!1),s.renderer.setScrollMargin(10,10);var c=e.require("ace/ext/language_tools"),d=new(0,e.require("ace/mode/python").Mode),u=e.require("ace/mode/behaviour/cstyle").CstyleBehaviour;d.$behaviour=new u,s.setAutoScrollEditorIntoView(!0),s.setHighlightActiveLine(!1),s.setShowPrintMargin(!1),s.container.style.lineHeight="18px",s.setOptions({fontFamily:"AtlasTypewriter",fontSize:12,maxLines:100,showGutter:!0,enableBasicAutocompletion:!0,behavioursEnabled:!0}),s.getSession().setTabSize(2);var p={getCompletions:function(e,t,r,o,i){n.session&&n.session.hasForm("complete")?n.session.forms("complete").$submit({code:o,cursor_position:o.length}).then(function(e){i(null,e.matches.map(function(e){return{name:e,value:e}}))}):i(null,[])}};c.setCompleters([p]),s.completers=[p],s.commands.bindKey("tab",function(e){var t=e.getSession(),n=e.getCursorPosition(),r=t.getLine(n.row);0===n.column||/^\s+$/.test(r.substring(0,n.column))||""===r.charAt(n.column-1).trim()&&""===r.charAt(n.column+1).trim()?e.indent():e.execCommand("startAutocomplete")}),s.commands.removeCommand("find"),s.commands.bindKey("ctrl-space",null),s.commands.bindKey("ctrl-shift-space",null),s.commands.bindKey("alt-space",null),s.commands.bindKey("cmd-]","indent"),s.commands.bindKey("cmd-[","outdent");s.on("blur",function(){var t=s.getSession().getUndoManager().isClean();n.$evalAsync(n.onBlur({changed:!t})),s.getSession().setUndoManager(new e.UndoManager)}),s.on("focus",function(e,t){t.getReadOnly()||(n.$evalAsync(n.onFocus),s.renderer.$fontMetrics.checkForSizeChanges())}),s.on("change",Object(y.debounce)(function(){s.renderer.$fontMetrics.checkForSizeChanges()},200)),s.commands.addCommands([{name:"nouppercase",bindKey:{win:"Ctrl-U",mac:"Ctrl-U"},exec:function(){return!1}},{name:"nofindnext",bindKey:{win:"Ctrl-K",mac:"Ctrl-K"},exec:function(){return!1}},{name:"bluronescape",bindKey:{win:"esc",mac:"esc"},passEvent:!0,exec:function(e){e.blur(),n.$apply(function(){return n.onBlur()})}},{name:"bluronrunandselect",bindKey:"shift-enter",passEvent:!0,exec:function(){return s.blur()}}]),r.isDefined(a)&&(a.$formatters.push(function(e){if(r.isUndefined(e)||null===e)return"";if(r.isObject(e)||r.isArray(e))throw new Error("ui-ace cannot use an object or an array as a model");return e}),a.$render=function(){s.getSession().setValue(a.$viewValue)}),s.commands.removeCommand("gotoline"),n.controlEvents&&(n.controlEvents.focus=function(){t(function(){var e=s.isFocused();e||s.focus();var t=s.getSession(),n=t.getLength();e||""!==s.getCopyText()||s.gotoLine(n,t.getLine(n-1).length)})},n.controlEvents.blur=function(){s.isFocused()&&t(function(){return s.blur()})}),n.$watch("lang",function(e){if(r.isDefined(e))switch(s.setOptions({enableBasicAutocompletion:e!==A.a.Markdown,showGutter:e!==A.a.Markdown}),e){case A.a.Python:s.getSession().setMode(d);break;case A.a.Markdown:default:s.getSession().setMode("ace/mode/"+e)}}),n.$watch("readOnly",function(e){e?s.setReadOnly(!0):s.setReadOnly(!1)}),s.getSession().on("change",function(e){var t=s.session.getValue();!r.isDefined(a)||t===a.$viewValue||n.$$phase||n.$root.$$phase||n.$evalAsync(function(){a.$setViewValue(t)}),n.onTextChanged({$text:t})}),n.$on("$destroy",function(){w()(s.textInput.getElement()).off("keypress"),s.destroy()})}}}]);var M=n("3F7m"),k=n.n(M);r.module("mode.python").directive("modeMarkdown",["$sce",function(e){return{require:"?ngModel",restrict:"AE",scope:{ngModel:"="},template:'<div class="python-markdown" ng-bind-html="content"></div>',link:function(t,n,o,i){t.content=e.trustAsHtml(""),k.a.setOptions({renderer:new k.a.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1}),r.isDefined(i)&&(i.$formatters.push(function(e){if(r.isUndefined(e)||null===e)return"";if(r.isObject(e)||r.isArray(e))throw new Error("markdown cannot use an object or an array as a model");return e}),i.$render=function(){t.content=e.trustAsHtml(k()(i.$viewValue))})}}}]);var T=n("h+bJ"),x=n.n(T),D=n("qG+g"),L=n.n(D),R=this;r.module("mode.python").directive("modePythonResult",["AssetService","$window","$sce",function(e,t,n){return{scope:{result:"<",onClick:"&"},restrict:"AE",controllerAs:"ctrl",bindToController:!0,template:x.a,controller:function(){},link:function(r,o,i){var a=r.$watch("ctrl.result",function(i){if(i){if(r.trustedResult="image"!==(d=i).result_type&&"text/html"!==d.result_type&&d.content?n.trustAsHtml(L.a.ansi_to_html(L.a.escape_for_html(d.content),{use_classes:!0})):"","text/html"===i.content_type&&"image"!==i.result_type){var l=o.find(".python-iframe")[0],s=document.createElement("iframe");s.id="python-result-"+i.token;var c=(function(e,t,n,o){if(o&&o.data&&o.data.id===n)switch(o.data.type){case"pythonReady":e.contentWindow.postMessage({type:"render",html:t,id:n},"*");break;case"pythonClick":r.$apply(function(){return r.ctrl.onClick({$resultToken:n})})}}).bind(R,s,i.content,i.token);t.removeEventListener("message",c),t.addEventListener("message",c),r.$on("$destroy",function(){t.removeEventListener("message",c)}),s.src=e.pythonIframe+"?id="+i.token,l.appendChild(s)}a()}var d})}}}]);var N={bindings:{results:"<"},template:'\n    <div class="python-stderr-header" ng-if="ctrl.filteredResults.length" ng-click="ctrl.showWarnings = !ctrl.showWarnings">\n      <i class="python-warning-icon icon-header-menu-caret-down" ng-class="{\'closed\':!ctrl.showWarnings}"></i>\n      <ng-pluralize count="ctrl.filteredResults.length" when="{\'0\': \'Warnings\',\'one\': \'1 Warning\',\'other\': \'{} Warnings\'}"></ng-pluralize>\n    </div>\n    <mode-python-result ng-show="ctrl.showWarnings" ng-repeat="result in ctrl.filteredResults" result="result"></mode-python-result>\n  ',controller:function(){function PythonWarningController(e){var t=this;this.showWarnings=!1,e.$watchCollection("ctrl.results",function(e){e&&(t.filteredResults=y.filter(e,{result_type:"stderr"}))})}return PythonWarningController.$inject=["$scope"],PythonWarningController}(),controllerAs:"ctrl"};function resizeCellDirective(e){return{restrict:"A",link:function(t,n,r){var o=w()(n),i=function(e){if(e&&e.data&&"pythonResize"===e.data.type){var t=o.find("#python-result-"+e.data.id);t.length&&(t.height(e.data.height),t.width(e.data.width))}else e&&e.data&&"pythonClick"===e.data.type&&o.find("#python-result-"+e.data.id).trigger("mousedown")};e.addEventListener("message",i),t.$on("$destroy",function(){e.removeEventListener("message",i)})}}}r.module("mode.python").component("modePythonWarning",N),resizeCellDirective.$inject=["$window"],r.module("mode.python").directive("resizeCells",resizeCellDirective);var E=n("d9Sl"),j=n.n(E),O=function(){function StatusBarController(e,t){this.$scope=e,this.$log=t}return StatusBarController.$inject=["$scope","$log"],StatusBarController}(),P={bindings:{state:"<"},template:j.a,transclude:{warning:"?warning",error:"?error",running:"?running",ready:"?ready",alert:"?alert",loading:"?loading",success:"?success",cancelled:"?cancelled"},controller:O,controllerAs:"ctrl"};r.module("mode.components").component("statusBar",P);var F=n("M/Ot"),z=n.n(F),_=function(){function StatusLoaderController(e,t){this.$timeout=e,this.$element=t,this.progress=this.$element.find(".progress-bar")}return StatusLoaderController.prototype.$onChanges=function(e){e.created_at&&this.updateCreatedAt()},StatusLoaderController.prototype.$onDestroy=function(){this.cancelTimer()},StatusLoaderController.prototype.updateCreatedAt=function(){if(void 0===this.createdAt||null===this.createdAt||""===this.createdAt)return this.cancelTimer(),void(this.currentValue&&(this.currentValue=null));this.currentValue=this.createdAt,this.updateMoment()},StatusLoaderController.prototype.updateTime=function(e){var t=this,n=l()().diff(e)/1e3;n<0&&(n=0);var r=this.targetPercent?this.targetPercent/100:.75,o=this.targetSeconds||30;this.percent=Math.min(96,Math.log10(n)*r/Math.log10(o)*100),this.progress.css("width",this.percent+"%"),this.activeTimeout=this.$timeout(function(){t.updateTime(e)},1e3)},StatusLoaderController.prototype.cancelTimer=function(){this.activeTimeout&&this.$timeout.cancel(this.activeTimeout)},StatusLoaderController.prototype.updateMoment=function(){if(this.cancelTimer(),this.currentValue){var e=l()(this.currentValue);this.updateTime(e)}},StatusLoaderController.$inject=["$timeout","$element"],StatusLoaderController}(),B={bindings:{createdAt:"<",simple:"@?",pulseOnly:"@?",targetPercent:"@?",targetSeconds:"@?"},template:z.a,controller:_,controllerAs:"ctrl"};r.module("mode.components").component("statusLoader",B);r.module("mode.components").component("plusClick",{bindings:{onClick:"&"},controllerAs:"ctrl",template:'<div class="plus-expander" uib-tooltip="Add cell" tooltip-placement="left">\n      <svg class="addButton" width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ng-click="ctrl.onClick()">\n        <g>\n          <circle class="addButton" cx="16" cy="16" r="11" stroke="#000000" fill="#ffffff"  stroke-width="1.2"></circle>\n        </g>\n        <g class="plus" transform="translate(-1038, -70)" fill="#3EAF6A">\n          <path d="M1055,80 L1053,80 L1053,85 L1048,85 L1048,87 L1053,87 L1053,92 L1055,92 L1055,87 L1060,87 L1060,85 L1055,85 L1055,80 Z" id="plus"></path>\n        </g>\n      </svg>\n    </div>'});var V=n("3cAX");r.module("mode.notebook",["mode.shared.services","mode.assets","mode.components","mode.python"]).constant("ace",window.ace);var U,Z,G=n("efuI"),Y=n.n(G),Q=n("RpJj");!function(e){!function(e){e.Add="[Notebook] Add",e.AddSuccess="[Notebook] AddSuccess",e.AddFailure="[Notebook] AddFailure",e.Destroy="[Notebook] Destroy",e.DestroyFailure="[Notebook] DestroyFailure",e.DestroySuccess="[Notebook] DestroySuccess",e.Init="[Notebook] Init",e.InitComplete="[Notebook] InitComplete",e.LoadWithInit="[Notebook] LoadWithInit",e.LoadWithInitSuccess="[Notebook] LoadWithInitSuccess",e.LoadFromSelectedReport="[Notebook] LoadFromSelectedReport",e.LoadFailure="[Notebook] LoadFailure",e.LoadSuccess="[Notebook] LoadSuccess",e.UpdateType="[Notebook] Patch",e.UpdateTypeFailure="[Notebook] PatchFailure",e.UpdateSuccess="[Notebook] PatchSuccess",e.Run="[Notebook] Run",e.RunFailed="[Notebook] RunFailed",e.CreateRunSuccess="[Notebook] CreateRunSuccess",e.InitialRunSuccess="[Notebook] InitialRunSuccess",e.Idle="[Notebook] Idle",e.DataLoaded="[Notebook] DataLoaded",e.Terminated="[Notebook] Terminated",e.Disconnected="[Notebook] Disconnected",e.NoSession="[Notebook] NoSession",e.InitSession="[Notebook] InitSession",e.InitSessionFailure="[Notebook] InitSessionFailure",e.LoadSessionSuccess="[Notebook] LoadSessionSuccess",e.RefreshSessionReportRun="[Notebook] RefreshSessionReportRun",e.PollSession="[Notebook] PollSession"}(e.Type||(e.Type={}))}(U||(U={})),function(e){!function(e){e.RunFailed="[Cell] RunFailed",e.Idle="[Cell] Idle",e.Select="[Cell] Select",e.BeginEdit="[Cell] BeginEdit",e.EndEdit="[Cell] EndEdit",e.AddCell="[Cell] Add",e.AddCellAndRun="[Cell] AddCellAndRun",e.AddCellFailure="[Cell] AddFailure",e.AddCellSuccess="[Cell] AddSuccess",e.FoldCell="[Cell] Fold",e.AddToLayout="[Cell] AddToLayout",e.AddToLayoutSuccess="[Cell] AddToLayoutSuccess",e.AddToLayoutFailure="[Cell] AddToLayoutFailure",e.RemoveFromLayout="[Cell] RemoveFromLayout",e.RemoveFromLayoutViaBuilder="[Cell] RemoveFromLayoutViaBuilder",e.RemoveFromLayoutFailure="[Cell] RemoveFromLayoutFailure",e.RemoveFromLayoutSuccess="[Cell] RemoveFromLayoutSuccess",e.UpdateVizTitle="[Cell] UpdateVizTitle",e.UpdateVizTitleFailure="[Cell] UpdateVizTitleFailure",e.UpdateVizSuccess="[Cell] UpdateVizSuccess",e.EditCellContent="[Cell] EditCellContent",e.MoveCell="[Cell] MoveCell",e.MoveCellFailure="[Cell] MoveCellFailure",e.UpdateCell="[Cell] Update",e.UpdateCellFailure="[Cell] UpdateFailure",e.UpdateCellSuccess="[Cell] UpdateSuccess",e.ToggleFreezeCell="[Cell] ToggleFreezeCell",e.ToggleFreezeCellFailure="[Cell] ToggleFreezeCellFailure",e.UpdateContentType="[Cell] UpdateContentType",e.UpdateContentTypeFailure="[Cell] UpdateContentTypeFailure",e.DestroyCell="[Cell] Destroy",e.DestroyCellFailure="[Cell] DestroyFailure",e.DestroyCellSuccess="[Cell] DestroySuccess",e.LoadNotebookCellsSuccess="[Cell] LoadNotebookCellsSuccess",e.LoadNotebookCellsFailure="[Cell] LoadNotebookCellsFailure",e.LoadVizCellSuccess="[Cell] LoadVizCellSuccess",e.LoadVizCellFailure="[Cell] LoadVizCellFailure",e.LoadLayoutVisuals="[Cell] LoadLayoutVisuals",e.StubLayoutVisuals="[Cell] StubLayoutVisuals",e.PolledLayoutVisuals="[Cell] PolledLayoutVisuals",e.LoadLayoutVisualsReady="[Cell] LoadLayoutVisualsReady",e.LoadLayoutVisualsSuccess="[Cell] LoadLayoutVisualsSuccess",e.LoadLayoutVisualsFailure="[Cell] LoadLayoutVisualsFailure",e.LoadEmbeddedLayoutVisualsSuccess="[Cell] LoadEmbeddedLayoutVisualsSuccess",e.AddLayoutVisual="[Cell] AddLayoutVisual",e.AddLayoutVisualFailure="[Cell] AddLayoutCellFailure",e.AddLayoutVisualSuccess="[Cell] AddLayoutCellSuccess",e.DestroyLayoutVisual="[Cell] DestroyLayoutCell",e.DestroyLayoutVisualFailure="[Cell] DestroyLayoutCellFailure",e.DestroyLayoutVisualSuccess="[Cell] DestroyLayoutCellSuccess"}(e.Type||(e.Type={}))}(Z||(Z={}));var H,W=n("pJkt"),q=(function(){}(),function(){function MixableBaseController(){var e=this,t=(this.$onDestroy||function(){}).bind(this),n=(this.$onInit||function(){}).bind(this);this.$onInit=function(){e.__init(),n()},this.$onDestroy=function(){e.__destroy(),t()}}return MixableBaseController.prototype.__init=function(){this.isAlive=!0},MixableBaseController.prototype.__destroy=function(){this.isAlive=!1},MixableBaseController}()),J=this&&this.__extends||(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),X=function(e){function NotebookController(t,n,r,o,i,a){var l=e.call(this)||this;l.$scope=t,l.rxStore=n,l.$q=r,l.notebookDataService=o,l.Modal=i,l.flipperService=a,l.initNotebook=function(e){e&&!l.initialized&&l.notebook&&l.notebook._new_notebook?(l.newNotebookDataDeferred=l.$q.defer(),l.rxStore.dispatch({type:U.Type.Add,reportToken:l.report.token}),l.initialized=!0):e&&!l.initialized&&(l.notebookDataService.initNotebook(),l.notebookDataService.initSession(l.notebook._resource.token,!0),l.initialized=!0)},l.unfoldCell=function(e){"python-input"!==e?l.rxStore.dispatch({type:Z.Type.FoldCell,cellToken:e}):l.dummyCell.folded=!1},l.dummyCell={content:"",content_type:"python",folded:!1},l.initialized=!1,t.$watch("ctrl.visible",l.initNotebook.bind(l));$("meta[name=owner-username]").attr("content");return l.sidebarOpen$=n.select(function(e){return e.transient.accountPreference.notebook_sidebar.open}),l}return J(NotebookController,e),NotebookController.prototype.$onInit=function(){var e=this;this.selectedNotebookToken$=this.rxStore.select(A.b.selectedNotebookToken),this.notebook$=this.rxStore.selectWithParam(A.b.normalizedNotebookByToken,this.selectedNotebookToken$),this.cellTokens$=this.rxStore.selectWithParam(A.b.cellTokensByNotebook,this.selectedNotebookToken$).map(function(e){return e.toArray()}),this.notebookState$=this.rxStore.selectWithParam(A.b.statusBarStateByNotebook,this.selectedNotebookToken$),this.notebookStateMessage$=this.rxStore.selectWithParam(A.b.stateMessageByNotebook,this.selectedNotebookToken$),this.notebook$.takeWhile(function(){return e.isAlive}).subscribe(function(t){return e.notebook._resource=t.resource}),this.rxStore.select(A.b.editingCellToken).takeWhile(function(){return e.isAlive}).subscribe(function(t){return e.editingCellToken=t}),this.rxStore.select(A.b.selectedCellToken).takeWhile(function(){return e.isAlive}).subscribe(function(t){return e.selectedCellToken=t}),this.canRun$=this.rxStore.selectWithParam(A.b.canRunByNotebook,this.selectedNotebookToken$),this.canRestart$=this.notebookState$.map(function(e){return e!==W.a.Session}),this.session$=this.rxStore.select(A.b.selectedNotebookSession)},NotebookController.prototype.toggleSidebar=function(){this.rxStore.dispatch({type:Q.c.ToggleNotebookSidebar})},NotebookController.prototype.loadReportRun=function(){this.notebookDataService.refreshSessionReportRun(this.notebook._resource.token)},NotebookController.prototype.selectCellAction=function(e,t){this.selectedCellToken!==e&&this.notebookDataService.selectCell(e,t)},NotebookController.prototype.startEditCell=function(e){this.notebookDataService.beginEditCell(e)},NotebookController.prototype.endEditCell=function(e){this.notebookDataService.endEditCell(e),this.notebookDataService.saveCell(e)},NotebookController.prototype.toggleCellInLayout=function(e){e.isInLayout?this.notebookDataService.removeCellFromLayout(e.token):this.notebookDataService.addCellToLayout(e.token)},NotebookController.prototype.restartSession=function(){this.notebookDataService.initSession(this.notebook._resource.token,!0)},NotebookController.$inject=["$scope","RxStoreService","$q","NotebookDataService","ModalService","DataLayerFlipperService"],NotebookController}(q),K=n("glR0");r.module("mode.notebook").directive("modeNotebook",["RxStoreService",function(e){return{scope:{notebook:"<",report:"<",visible:"<"},restrict:"AE",controllerAs:"ctrl",controller:X,template:Y.a,link:function(t,n,r){w()(n);var o=V.Observable.fromEvent(document.body,"mousedown").merge(V.Observable.fromEvent(document.body,"dblclick")).filter(function(e){return 0===e.button}).withLatestFrom(e.select(K.C)).filter(function(e){return e[0],"application.reports.edit.notebook"===e[1].name}).map(function(e){var t=e[0];return e[1],t}).withLatestFrom(e.select(A.b.selectedCellToken),e.select(A.b.selectedCellFolded),e.select(A.b.isEditing)).subscribe(function(e){var n=e[0],r=e[1],o=e[2],i=e[3],a=w()(n.target),l=a.closest(".python-cell:not(.cell-result)"),s=a.closest(".python-ace-editor"),c=a.closest(".python-cell-group").attr("id");"dblclick"!==n.type&&i&&(s.length<1||c!==r)&&t.$apply(function(){return t.ctrl.endEditCell(r)}),l.length?"dblclick"===n.type||(c!==r?s.length?t.$apply(function(){return t.ctrl.startEditCell(c)}):t.$apply(function(){return t.ctrl.selectCellAction(c,!l.hasClass("python-cell"))}):s.length>0&&!i&&t.$apply(function(){return t.ctrl.startEditCell(r,!l.hasClass("python-cell"))}),o&&c===r&&t.$apply(function(){return t.ctrl.unfoldCell(c)})):a.closest(".python-cell-group").length&&r!==c&&t.$apply(function(){return t.ctrl.selectCellAction(c,!1)})},function(e){return console.error(e)});t.$on("$destroy",function(){o&&o.unsubscribe()})},bindToController:!0}}]);var ee=n("RRsi"),te=n("yOFN"),ne=n("hbv7"),re=n("S9wS"),oe=n.n(re),ie=n("9VQI"),ae=n.n(ie),le=n("AGf9"),se=n.n(le),ce=n("F5TX"),de=n.n(ce),ue=n("Ddw+"),pe=n.n(ue),he=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),ge=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},me={controller:function(e){function NotebookSidebarController(t,n,r,o){var i=e.call(this)||this;return i.$element=t,i.store=n,i.notebookDataService=r,i.analytics=o,i.LANGUAGES=[{type:ne.b.Python,name:"Python"},{type:ne.b.R,name:"R"}],i}return he(NotebookSidebarController,e),NotebookSidebarController.prototype.$onInit=function(){var e=this;this.store.select(A.b.selectedNotebookType).takeWhile(function(){return e.isAlive}).subscribe(function(t){return e.notebookType=t}),this.store.select(A.b.selectedNotebookToken).takeWhile(function(){return e.isAlive}).subscribe(function(t){return e.notebookToken=t}),this.store.select(K.e).takeWhile(function(){return e.isAlive}).subscribe(function(t){var n=t.notebook_sidebar,r=n.tab,o=n.items;e.activeTab=r,e.itemExpandedOrCollapsed=o}),this.store.select(K.e).first(Boolean).subscribe(function(t){var n=t.notebook_sidebar.tab;e.track(ee.a.Name.NotebookSidebarContentImpression,"impression",{tab:n})}),this.store.select(K.e).takeWhile(function(){return e.isAlive}).filter(Boolean).map(function(e){return e.notebook_sidebar.tab}).skip(1).distinctUntilChanged().subscribe(function(t){e.track(ee.a.Name.NotebookSidebarTabChange,"click",{tab:t})})},NotebookSidebarController.prototype.track=function(e,t,n){void 0===n&&(n={}),this.analytics.run(ee.c.Track,e,ge({product_context:ee.a.Context.Notebook,product_subcontext:ee.a.SubContext.Sidebar,interaction_type:t,notebook_token:this.notebookToken,notebook_kernel:this.notebookType},n))},NotebookSidebarController.prototype.changeNotebookType=function(){this.notebookType&&this.notebookToken&&this.notebookDataService.updateNotebookType(this.notebookToken,this.notebookType)},NotebookSidebarController.prototype.goToTab=function(e){this.update({tab:e})},NotebookSidebarController.prototype.toggle=function(e){var t,n=this.isOpen(e);this.update({items:(t={},t[e]=!n,t)}),this.track(ee.a.Name.NotebookSidebarExpandableTextToggled,"click",{item:e,was:n?"open":"closed"})},NotebookSidebarController.prototype.isOpen=function(e){return this.itemExpandedOrCollapsed[e]},NotebookSidebarController.prototype.goToSupportedLibraries=function(){this.update({tab:"resources"}),this.track(ee.a.Name.NotebookSidebarResourcesLinkClicked,"click")},NotebookSidebarController.prototype.goToKeyboardShortcuts=function(){this.update({tab:"help",items:{intro:!1,shortcuts:!0}}),this.$element.find(".notebook-sidebar-sub-container.help").scrollTop(0)},NotebookSidebarController.prototype.update=function(e){this.store.dispatch({type:te.a.UpdatePreference,params:{notebook_sidebar:e}})},NotebookSidebarController.$inject=["$element","RxStoreService","NotebookDataService","AnalyticsService"],NotebookSidebarController}(q),controllerAs:"ctrl",template:'\n    <div class="notebook-sidebar">\n      <div class="notebook-type-select">\n        <select\n          radio-dropdown="notebook-type"\n          id="notebook-type-select"\n          block="true"\n          append-to-body="true"\n          button-classes="notebook-type-dropdown"\n          ng-options="lang.type as lang.name for lang in ctrl.LANGUAGES"\n          ng-model="ctrl.notebookType"\n          ng-change="ctrl.changeNotebookType()">\n        </select>\n      </div>\n\n      <div class="notebook-sidebar-container">\n        <div class="nav-tabs-table">\n          <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-row">\n            <li ng-class="{active: ctrl.activeTab === \'resources\'}">\n              <a href ng-click="ctrl.goToTab(\'resources\')">Resources</a>\n            <li ng-class="{active: ctrl.activeTab === \'help\'}">\n              <a href ng-click="ctrl.goToTab(\'help\')">Help</a>\n          </ul>\n        </div>\n\n        <div ng-if="ctrl.notebookType === \'python\'">\n          <div ng-show="ctrl.activeTab === \'resources\'" class="notebook-sidebar-sub-container">\n            '+oe.a+'\n          </div>\n          <div ng-show="ctrl.activeTab === \'help\'" class="notebook-sidebar-sub-container help">\n            <ul class="notebook-sidebar-collapsible-list">\n              '+ae.a+"\n              "+pe.a+'\n            </ul>\n          </div>\n        </div>\n\n        <div ng-if="ctrl.notebookType === \'r\'">\n          <div ng-show="ctrl.activeTab === \'resources\'" class="notebook-sidebar-sub-container">\n            '+se.a+'\n          </div>\n          <div ng-show="ctrl.activeTab === \'help\'" class="notebook-sidebar-sub-container help">\n            <ul class="notebook-sidebar-collapsible-list">\n              '+de.a+"\n              "+pe.a+"\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  "};r.module("mode.editor").component("notebookSidebar",me);var fe={bindings:{cellToken:"<",notebookToken:"<",session:"<?",readOnly:"@"},controller:function(){function CellGroupController(e,t,n,r,o,i){this.$scope=e,this.$rootScope=t,this.$log=n,this.$q=r,this.rxStore=o,this.notebookDataService=i}return CellGroupController.prototype.$onInit=function(){var e=this;this.cell$=this.rxStore.select(A.b.createNormalizedCellExResSelector(this.cellToken)).filter(function(e){return null!=e}),this.executionCount$=this.rxStore.select(A.b.createCellExecutionCountSelector(this.cellToken)),this.results$=this.rxStore.select(A.b.createLastResultsByCellSelector(this.cellToken)).filter(function(e){return null!=e}),this.isInLayout$=this.rxStore.select(A.b.createIsCellInLayoutSelector(this.cellToken)),this.isEditing$=this.rxStore.select(A.b.createIsCellEditingSelector(this.cellToken)),this.isSelected$=this.rxStore.select(A.b.selectedCellToken).combineLatest(this.cell$).map(function(t){var n=t[0],r=t[1];return!e.readOnly&&r.token===n}),this.showResult$=this.cell$.combineLatest(this.results$).map(function(e){var t=e[0],n=e[1];return t.content_type===ne.a.Python&&n.length>0&&!t.folded})},CellGroupController.prototype.selectCell=function(){this.notebookDataService.selectCell(this.cellToken,!0)},CellGroupController.$inject=["$scope","$rootScope","$log","$q","RxStoreService","NotebookDataService"],CellGroupController}(),controllerAs:"ctrl",template:'\n    <div id="{{ ::ctrl.cellToken }}" class="python-cell-group clearfix" ng-class="{editing:(ctrl.isEditing$ | async:this), \'cell-selected\': (ctrl.isSelected$ | async:this)}">\n      <div class="cell-indicator"></div>\n      <cell-editor read-only="ctrl.readOnly" cell="ctrl.cell$ | async:this" ng-if="ctrl.cell$ | async:this" notebook-token="ctrl.notebookToken" session="ctrl.session"></cell-editor>\n      <div ng-if="ctrl.showResult$ | async:this" class="python-cell cell-result">\n        <div class="python-icon-state icon-cell-added-to-builder" ng-show="ctrl.isInLayout$ | async:this" uib-tooltip="This cell is included in the report" tooltip-class="wrapping-tooltip" tooltip-placement="left"></div>\n        <div class="python-cell-header">OUT [{{ (ctrl.executionCount$ | async:this) || \'_\' }}]</div>\n        <mode-python-warning results="ctrl.results$ | async:this"></mode-python-warning>\n        <mode-python-result ng-repeat="result in (ctrl.results$ | async:this) | filter:{result_type:\'!stderr\'}" result="result" on-click="!(ctrl.isSelected$ | async:this) && ctrl.selectCell()"></mode-python-result>\n        <div class="hoverbox"></div>\n      </div>\n    </div>\n  '};r.module("mode.notebook").component("cellGroup",fe);var Ce=n("JFI/"),ye=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),be={bindings:{cell:"<",notebookToken:"<",session:"<?",readOnly:"<"},controller:function(e){function CellEditorController(t,n,r,o,i,a,l,s){var c=e.call(this)||this;return c.$scope=t,c.$rootScope=n,c.$log=r,c.$q=o,c.$timeout=i,c.$window=a,c.rxStore=l,c.notebookDataService=s,c.editMarkdown=function(){c.cell.frozen||c.readOnly||c.notebookDataService.beginEditCell(c.cell.token)},c.handleEditorClick=function(e){$(e.target).closest("mode-python-ace").length||"python"!==c.cell.content_type||c.editMarkdown()},c.aceControls={},c}return ye(CellEditorController,e),CellEditorController.prototype.$onInit=function(){var e=this;this.isEditing$=this.rxStore.select(A.b.createIsCellEditingSelector(this.cell.token)),this.executionCount$=(this.cell?this.rxStore.select(A.b.createCellExecutionCountSelector(this.cell.token)):V.Observable.from([0])).map(function(e){return"["+(e||"_")+"]"}),this.isMarkdownViewMode$=this.rxStore.select(A.b.createMarkdownViewModeSelector(this.cell.token)),this.cell&&(this.notebookDataService.setupVizChangeNotifier(this.cell.token,function(){return e.isAlive}),this.cellContent=this.cell.content,this.lang$=this.rxStore.select(A.b.createCellAceLangSelector(this.cell.token)),this.typeAbbr$=this.lang$.map(function(e){switch(e){case A.a.Markdown:return"Md";case A.a.Python:return"Py";case A.a.R:return"R"}})),this.isEditing$.takeWhile(function(){return e.isAlive}).subscribe(function(t){t&&e.$timeout(function(){e.aceControls.focus&&e.aceControls.focus(),Object(Ce.a)(e.$window,"resize")})})},CellEditorController.prototype.$onChanges=function(e){e.cell&&(this.cellContent=this.cell.content,this.markdownText=this.cellContent&&this.cellContent.trim()||"Markdown text here...")},CellEditorController.prototype.handleTextChanged=function(e){this.notebookDataService.editCellContent(this.cell.token,e)},CellEditorController.prototype.toggleContentType=function(){this.notebookDataService.updateContentType(this.cell.token,this.cell.content_type===ne.a.Python?ne.a.Markdown:ne.a.Python)},CellEditorController.prototype.isCellMessageWithToken=function(e){return e&&this.cell&&this.cell.token===e.token},CellEditorController.prototype.toggleFreeze=function(){this.rxStore.dispatch({type:Z.Type.ToggleFreezeCell,cellToken:this.cell.token})},CellEditorController.prototype.toggleFold=function(e){this.rxStore.dispatch({type:Z.Type.FoldCell,cellToken:this.cell.token})},CellEditorController.$inject=["$scope","$rootScope","$log","$q","$timeout","$window","RxStoreService","NotebookDataService"],CellEditorController}(q),controllerAs:"ctrl",template:'\n    <div class="python-cell" ng-class="{ \'with-markdown\': (ctrl.isMarkdownViewMode$ | async:this), \'editing\': (ctrl.isEditing$ | async:this), \'python-folded\': ctrl.cell.folded }">\n      <div class="python-cell-header" ng-if="ctrl.cell.content_type === \'python\'">\n        <div ng-if="ctrl.cell.executing" class="python-icon-status align-md-icon icon-running-gray"></div>\n        <div ng-if="!ctrl.cell.executing && ctrl.cell.frozen" class="python-icon-status align-md-icon icon-freeze-gray" uib-tooltip="This cell is frozen and will not run unless it is unfrozen" tooltip-class="wrapping-tooltip" tooltip-placement="bottom" tooltip-enable="ctrl.cell.frozen" tooltip-append-to-body="true"></div>\n        IN {{ ctrl.executionCount$ | async:this }}\n      </div>\n      <div class="python-cell-label">{{ ctrl.typeAbbr$ | async:this }}</div>\n      <div class="python-editor-cell" ng-class="{\'python-frozen\':ctrl.cell.frozen}">\n        <mode-live-code ng-if="ctrl.readOnly && ctrl.cell.content_type === \'python\'" lang="{{ ctrl.lang$ | async:this }}" line-numbers="true" code="ctrl.cell.content"></mode-live-code>\n        <mode-python-ace ng-if="!ctrl.readOnly" ng-show="!(ctrl.isMarkdownViewMode$ | async:this)" lang="ctrl.lang$ | async:this" ng-model="ctrl.cellContent" session="ctrl.session" control-events="ctrl.aceControls" read-only="ctrl.cell.frozen" on-text-changed="ctrl.handleTextChanged($text)"></mode-python-ace>\n        <mode-markdown ng-dblclick="!ctrl.readOnly && ctrl.editMarkdown()" ng-show="ctrl.isMarkdownViewMode$ | async:this" ng-model="ctrl.markdownText"></mode-markdown>\n      </div>\n    </div>\n  '};r.module("mode.notebook").component("cellEditor",be);var ve=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Ie={bindings:{notebookToken:"<",session:"<"},controller:function(e){function CellGroupController(t,n,r,o,i){var a=e.call(this)||this;return a.$scope=t,a.$log=n,a.$q=r,a.rxStore=o,a.notebookDataService=i,a}return ve(CellGroupController,e),CellGroupController.prototype.$onInit=function(){var e=this;this.notebookState$=this.rxStore.select(A.b.createNotebookStateSelector(this.notebookToken)),this.cellExecuting$=this.rxStore.select(A.b.selectedCellExecuting),this.contentType$=this.rxStore.select(A.b.selectedCellContentType),this.isInLayout$=this.rxStore.select(A.b.selectedCellIsInLayout),this.isDirty$=this.rxStore.select(A.b.selectedCellDirty),this.cellToken$=this.rxStore.select(A.b.selectedCellToken),this.nextCellToken$=this.rxStore.select(A.b.selectedNextCellToken),this.prevCellToken$=this.rxStore.select(A.b.selectedPrevCellToken),this.isEditing$=this.rxStore.select(A.b.isEditing),this.isFrozen$=this.rxStore.select(A.b.selectedCellFrozen),this.isFolded$=this.rxStore.select(A.b.selectedCellFolded),this.canFreeze$=this.rxStore.selectWithParam(A.b.canFreezeByCell,this.cellToken$),this.canDelete$=this.cellToken$.combineLatest(this.cellExecuting$).map(function(e){var t=e[0],n=e[1];return null!=t&&!n}),this.canRun$=this.notebookState$.map(function(e){return e===W.a.Ready}),this.canRunCell$=this.rxStore.select(A.b.createCanCellRunSelector(this.notebookToken)),this.canRestartSession$=this.notebookState$.map(function(e){return e!==W.a.Session}),this.hasResult$=this.rxStore.select(A.b.selectedCellHasResult),this.isMarkdown$=this.contentType$.map(function(e){return e===ne.a.Markdown}),this.isPython$=this.contentType$.map(function(e){return e===ne.a.Python}),this.contentType$.takeWhile(function(){return e.isAlive}).map(function(e){return e===ne.a.Markdown?"markdown":"code"}).subscribe(function(t){return e.cellType=t});var t=this.rxStore.select(A.b.selectedNotebookResource).filter(function(e){return null!=e});this.hasNotebookContentLink$=t.map(function(e){return e.hasLink("export")}),this.notebookContentLink$=t.map(function(e){return e.links("export").$expand({markdown_comments:!1,cell_headers:!1})})},CellGroupController.prototype.delete=function(e){e&&this.rxStore.dispatch({type:Z.Type.DestroyCell,cellToken:e,notebookToken:this.notebookToken})},CellGroupController.prototype.runCell=function(e,t,n){t!==ne.a.Markdown&&(this.rxStore.dispatch({type:U.Type.Run,notebookToken:this.notebookToken,cellTokensToRun:[e]}),n?this.notebookDataService.selectCell(n,!1):this.notebookDataService.addCell(this.notebookToken))},CellGroupController.prototype.runNotebook=function(){this.rxStore.dispatch({type:U.Type.Run,notebookToken:this.notebookToken})},CellGroupController.prototype.restartSession=function(){this.notebookDataService.initSession(this.notebookToken,!1)},CellGroupController.prototype.toggleFreezeCell=function(e){this.rxStore.dispatch({type:Z.Type.ToggleFreezeCell,cellToken:e})},CellGroupController.prototype.toggleFoldCell=function(e){this.rxStore.dispatch({type:Z.Type.FoldCell,cellToken:e})},CellGroupController.prototype.addToLayout=function(e){this.notebookDataService.addCellToLayout(e)},CellGroupController.prototype.removeFromLayout=function(e){this.notebookDataService.removeCellFromLayout(e)},CellGroupController.prototype.insertCellAbove=function(e){this.notebookDataService.addCell(this.notebookToken,e)},CellGroupController.prototype.insertCellBelow=function(e){this.notebookDataService.addCell(this.notebookToken,e)},CellGroupController.prototype.moveCellUp=function(e){this.notebookDataService.moveCell(e,!1)},CellGroupController.prototype.moveCellDown=function(e){this.notebookDataService.moveCell(e,!0)},CellGroupController.prototype.updateContentType=function(e){this.notebookDataService.updateContentType(e,"code"===this.cellType?ne.a.Python:ne.a.Markdown)},CellGroupController.$inject=["$scope","$log","$q","RxStoreService","NotebookDataService"],CellGroupController}(q),controllerAs:"ctrl",template:'\n   <div class="viz-toolbar">\n     <div class="button-group">\n       <span uib-tooltip="Restart Session"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.canRestartSession$ | async:this) && ctrl.restartSession()"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.canRestartSession$ | async:this) }">\n         <i class="icon-restart-session-gray"></i>\n       </span>\n       <span uib-tooltip="Run Notebook"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.canRun$ | async:this) && ctrl.runNotebook()"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.canRun$ | async:this) }">\n         <i class="icon-run-notebook-gray"></i>\n       </span>\n     </div>\n   \n     <div class="button-group">\n       <span uib-tooltip="Run Cell (Shift + Enter)"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.canRunCell$ | async:this) && ctrl.runCell(ctrl.cellToken$ | async:this, ctrl.contentType$ | async:this, ctrl.nextCellToken$ | async:this)"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.canRunCell$ | async:this) }">\n         <i class="icon-run-cell-gray"></i>\n       </span>\n       <span uib-dropdown class="viz-toolbar-button split-button">\n         <span uib-tooltip="Add New Cell Below (B)"\n               tooltip-append-to-body="true"\n               tooltip-placement="bottom"\n               tooltip-class="viz-toolbar-tooltip"\n               ng-click="ctrl.insertCellBelow(ctrl.nextCellToken$ | async:this)"\n               class="split-left">\n           <i class="icon-new-cell-gray"></i>\n         </span>\n         <span uib-dropdown-toggle class="split-right"><i class="split-button-caret icon-split-caret-gray"></i></span>\n         <ul uib-dropdown-menu>\n           <li><a href="#" ng-click="ctrl.insertCellBelow(ctrl.nextCellToken$ | async:this)">New Cell Below (B)</a></li>\n           <li><a href="#" ng-click="ctrl.insertCellAbove(ctrl.cellToken$ | async:this)">New Cell Above (A)</a></li>\n         </ul>\n       </span>\n       <span uib-tooltip="Move Cell Up"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.prevCellToken$ | async:this) && ctrl.moveCellUp((ctrl.cellToken$ | async:this))"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.prevCellToken$ | async:this) }">\n         <i class="icon-move-up-gray"></i>\n       </span>\n       <span uib-tooltip="Move Cell Down"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.nextCellToken$ | async:this) && ctrl.moveCellDown((ctrl.cellToken$ | async:this))"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.nextCellToken$ | async:this) }">\n         <i class="icon-move-down-gray"></i>\n       </span>\n       <span uib-tooltip="Delete Cell"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.canDelete$ | async:this) && ctrl.delete(ctrl.cellToken$ | async:this)"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.canDelete$ | async:this) }">\n         <i class="icon-delete-cell-gray"></i>\n       </span>\n     </div>\n\n     <div class="button-group">\n       \x3c!-- Freeze/Unfreeze cell --\x3e\n       <span uib-tooltip="Freeze Cell"\n             ng-if="!(ctrl.isFrozen$ | async:this)"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.canFreeze$ | async:this) && ctrl.toggleFreezeCell(ctrl.cellToken$ | async:this)"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.canFreeze$ | async:this) }">\n         <i class="icon-freeze-gray"></i>\n       </span>\n       <span uib-tooltip="Unfreeze Cell"\n             ng-if="ctrl.isFrozen$ | async:this"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.cellToken$ | async:this) && ctrl.toggleFreezeCell(ctrl.cellToken$ | async:this)"\n             class="viz-toolbar-button active"\n             ng-class="{ disabled: !(ctrl.cellToken$ | async:this) }">\n         <i class="icon-freeze-black"></i>\n       </span>\n       \x3c!-- end --\x3e\n       \x3c!-- Fold/Unfold cell --\x3e\n       <span uib-tooltip="Fold Cell"\n             ng-if="!(ctrl.isFolded$ | async:this)"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.cellToken$ | async:this) && ctrl.toggleFoldCell(ctrl.cellToken$ | async:this)"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.cellToken$ | async:this) }">\n         <i class="icon-fold-gray"></i>\n       </span>\n       <span uib-tooltip="Unfold Cell"\n             ng-if="ctrl.isFolded$ | async:this"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.cellToken$ | async:this) && ctrl.toggleFoldCell(ctrl.cellToken$ | async:this)"\n             class="viz-toolbar-button active"\n             ng-class="{ disabled: !(ctrl.cellToken$ | async:this) }">\n         <i class="icon-fold-black"></i>\n       </span>\n       \x3c!-- End --\x3e\n       <span class="viz-toolbar-select">\n         <select ng-change="(ctrl.cellToken$ | async:this) && ctrl.updateContentType(ctrl.cellToken$ | async:this)"\n                 ng-model="ctrl.cellType"\n                 ng-class="{ disabled: !(ctrl.cellToken$ | async:this) }"\n                 ng-disabled="!(ctrl.cellToken$ | async:this)">\n           <option value="code">Code</option>\n           <option value="markdown">Markdown</option>\n         </select>\n         <i class="icon-split-caret-gray"></i>\n       </span>\n       \n     </div>\n\n     <div class="button-group">\n       \x3c!-- Add/Remove from layout --\x3e\n       <span uib-tooltip="Add to Report Builder"\n             ng-if="!(ctrl.isInLayout$ | async:this)"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.hasResult$ | async:this) && ctrl.addToLayout(ctrl.cellToken$ | async:this)"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.hasResult$ | async:this) }">\n         <i class="icon-add-to-builder-gray"></i>\n       </span>\n       <span uib-tooltip="Remove from Report Builder"\n             ng-if="ctrl.isInLayout$ | async:this"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             ng-click="(ctrl.cellToken$ | async:this) && ctrl.removeFromLayout(ctrl.cellToken$ | async:this)"\n             class="viz-toolbar-button active"\n             ng-class="{ disabled: !(ctrl.cellToken$ | async:this) }">\n         <i class="icon-add-to-builder-black"></i>\n       </span>\n       \x3c!-- end --\x3e\n       <span uib-tooltip="Export Notebook"\n             tooltip-append-to-body="true"\n             tooltip-placement="bottom"\n             tooltip-class="viz-toolbar-tooltip"\n             class="viz-toolbar-button"\n             ng-class="{ disabled: !(ctrl.hasNotebookContentLink$ | async:this)}">\n         <a download ng-disabled="!(ctrl.hasNotebookContentLink$ | async:this)" ng-href="{{ ctrl.notebookContentLink$ | async:this }}" target="_self"><i class="icon-export-gray"></i></a>\n       </span>\n     </div>\n   </div>\n  '};r.module("mode.notebook").component("notebookToolbar",Ie);var Se=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},we=50;function hasModifier(e){return e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}r.module("mode.notebook").directive("notebookHotkeys",["$window","RxStoreService","NotebookDataService",function(e,t,n){return{restrict:"A",link:function(r,o,i){var a=S(o),l=!0,s=r.ctrl.notebook._resource.token,c=V.Observable.fromEvent(document.body,"keydown").takeWhile(function(){return l}).withLatestFrom(t.select(K.C)).filter(function(t){return t[0],"application.reports.edit.notebook"===t[1].name&&!e.document.body.classList.contains("modal-open")}).map(function(e){var t=e[0];return e[1],t});c.timeInterval().scan(function(e,t){return t.interval<250?e.concat(t):[t]},[]).filter(function(e){return 2===e.length}).map(function(e){return e.map(function(e){return e.value})}).withLatestFrom(t.select(A.b.selectedCellToken),t.select(A.b.isEditing),function(e,t,n){return{keyEvents:e,cellToken:t,editing:n}}).filter(function(e){var t=e.cellToken,n=e.editing;return null!=t&&!n}).subscribe(function(e){var t=e.keyEvents,r=e.cellToken;if(e.editing,t.every(function(e){return!hasModifier(e)}))switch(t.map(function(e){return e.key}).join("")){case"dd":n.removeCell(s,r)}},function(e){return console.error(e)}),c.withLatestFrom(t.select(A.b.selectedCellToken),t.select(A.b.selectedCellFolded),t.select(A.b.isEditing),t.select(A.b.selectedCellFrozen),t.select(A.b.selectedNextCellToken),t.select(A.b.createCellTokensInNotebookSelector(s)),t.select(A.b.createCanCellRunSelector(s)),function(e,t,n,r,o,i,a,l){return{event:e,notebookCellTokens:a&&a.toArray(),token:t,isFolded:n,isFrozen:o,isEditing:r,canRun:l,nextCellToken:i}}).filter(function(e){e.event;var t=e.notebookCellTokens;return Se(e,["event","notebookCellTokens"]),null!=t}).subscribe(function(e){var t=e.event,o=e.notebookCellTokens,i=Se(e,["event","notebookCellTokens"]),l=o.indexOf(i.token);if(!(l<0)){var c=a.offset().top;switch(t.key){case"Escape":!hasModifier(t)&&i.isEditing&&r.$apply(function(){return r.ctrl.endEditCell(i.token)});break;case"k":case"ArrowUp":if(0===l||i.isEditing)break;if(!t.altKey&&!t.shiftKey&&hasModifier(t))break;t.preventDefault(),t.stopPropagation();var d=S("#"+o[l-1]);t.altKey&&t.shiftKey?(r.$apply(function(){return n.moveCell(i.token,!1)}),d=S("#"+i.token)):r.$apply(function(){return n.selectCell(o[l-1],!1)});var u=d.offset().top-c;(u<we||u-a.height()>we)&&a.scrollTo(d,{duration:250,offset:-we});break;case"j":case"ArrowDown":if(o.length<=l+1||i.isEditing)break;if(!t.altKey&&!t.shiftKey&&hasModifier(t))break;t.preventDefault(),t.stopPropagation(),d=S("#"+o[l+1]),t.altKey&&t.shiftKey?(r.$apply(function(){return n.moveCell(i.token,!0)}),d=S("#"+i.token)):r.$apply(function(){return n.selectCell(o[l+1],!1)});var p=d.offset().top-c+d.height();(p<we||p+we>a.height())&&a.scrollTo(d,{duration:250,offset:-we});break;case"Enter":i.canRun&&hasModifier(t)?!t.ctrlKey&&!t.metaKey||t.altKey||t.shiftKey?!t.altKey||t.ctrlKey||t.metaKey||t.shiftKey?!t.shiftKey||t.ctrlKey||t.metaKey||t.altKey||(t.preventDefault(),t.stopPropagation(),r.$apply(function(){n.runCell(s,i.token),i.nextCellToken?n.selectCell(i.nextCellToken,!1):n.addCell(s)})):(t.preventDefault(),t.stopPropagation(),r.$apply(function(){n.runCell(s,i.token),n.addCell(s,i.nextCellToken)})):(t.preventDefault(),t.stopPropagation(),r.$apply(function(){return n.runCell(s,i.token)})):hasModifier(t)||i.isEditing||i.isFrozen||r.$apply(function(){return n.beginEditCell(i.token)});break;case"a":if(i.isEditing||t.metaKey||t.ctrlKey||t.shiftKey||S(document.activeElement).hasClass("ace_text-input"))break;r.$apply(function(){return n.addCell(s,i.token)});break;case"b":if(i.isEditing||t.metaKey||t.ctrlKey||t.shiftKey||S(document.activeElement).hasClass("ace_text-input"))break;r.$apply(function(){return n.addCell(s,i.nextCellToken)});break;case"s":t.metaKey&&(t.preventDefault(),t.stopPropagation(),r.$apply(function(){return n.saveCell(i.token)}))}}},function(e){return console.error(e)}),r.$on("$destroy",function(){l=!1})}}}]);var Ae=n("9jGw"),Me=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),ke={controller:function(e){function NotebookViewController(t,n){var r=e.call(this)||this;return r.rxStore=t,r.notebookDataService=n,r}return Me(NotebookViewController,e),NotebookViewController.prototype.$onInit=function(){this.rxStore.select(A.b.notebookResourcesArray).map(function(e){return e.first()});this.notebookToken$=this.rxStore.select(A.b.selectedNotebookToken),this.hasError$=this.rxStore.select(A.b.vizRunState).map(function(e){return e===W.b.Failed}),this.loading$=this.rxStore.select(Ae.a.getNotebookLoading),this.noNotebook$=this.rxStore.select(Ae.a.getHasNotebook).combineLatest(this.loading$,function(e,t){return!e&&!t}),this.cellTokens$=this.rxStore.select(A.b.selectedNotebookCellTokens).filter(function(e){return null!=e}).map(function(e){return e.toArray()}),this.notebookDataService.loadNotebookInSelectedReport()},NotebookViewController.$inject=["RxStoreService","NotebookDataService"],NotebookViewController}(q),controllerAs:"ctrl",template:'\n  <div class="python-notebook-loading" ng-show="ctrl.loading$ | async:this"><i class="icon-logo-animated python-notebook-status"></i>Loading notebook</div>\n  <div class="python-notebook-error" ng-show="ctrl.hasError$ | async:this"><i class="icon-logo-animated python-notebook-status"></i>There was a problem loading the notebook</div>\n  <div class="python-notebook-none" ng-show="ctrl.noNotebook$ | async:this">There is no notebook for this report</div>\n  <div class="python-wrapper" resize-cells>\n    <cell-group cell-token="cellToken" read-only="true" notebook-token="ctrl.notebookToken$ | async:this" ng-repeat="cellToken in (ctrl.cellTokens$ | async:this)"></cell-group>\n  </div>\n  '};r.module("mode.notebook").component("notebookView",ke);var Te="#card_exp",xe={"invalid-parameter":{cvv:function(e){switch(e.cardType){case"amex":return"CVV must be 4 digits";default:return"CVV must be 3 digits"}},number:"Card number is invalid",year:"Year must be less than 2050",month:"Month must be between 1 and 12"},validation:{first_name:"First name is required",last_name:"Last name is required",cvv:"CVV is invalid",year:"Expiration is invalid",month:"Expiration is invalid",number:"Card number is invalid"}};function displayError(e,t){e.parents(".form-group").addClass("has-error").find(".help-block").html(t||e.data("error"))}r.module("mode.components").directive("paymentInfoValidator",function(){return{restrict:"A",link:function(e,t,n){recurly.configured||recurly.configure(window.MODE_CONFIG.RECURLY_PUBLIC_KEY);var r=t.find(".error-message, #generic-error");t.find("[data-recurly=number]").payment("formatCardNumber"),t.find("[data-recurly=cvv]").payment("formatCardCVC"),t.find(Te).payment("formatCardExpiry"),t.on("submit",function(e){e.preventDefault();var n=this,o=t.find("[data-recurly=number]"),i=t.find(Te),a=t.find("[data-recurly=cvv]"),l=t.find("#first_name"),s=t.find("#last_name"),c=t.find(Te).payment("cardExpiryVal"),d=!0;if(r.addClass("hide"),t.find(".form-group.has-error .help-block").html(""),t.find(".form-group.has-error").removeClass("has-error"),l.val().trim().length||(d=!1,displayError(l)),s.val().trim().length||(d=!1,displayError(s)),t.find("#agree-tos").is(":checked")||(d=!1,displayError(t.find("#agree-tos"))),w.a.payment.validateCardNumber(o.val())||(d=!1,displayError(o)),w.a.payment.validateCardCVC(a.val())||(d=!1,displayError(a)),w.a.payment.validateCardExpiry(c.month,c.year)||(d=!1,displayError(i)),d){var u=!1,p=t.find("[type=submit]");p.addClass("disabled"),t.find("[data-recurly=month]").val(c.month),t.find("[data-recurly=year]").val(c.year),recurly.token(n,function(e,i){e?(e.fields.length&&xe[e.code]?e.fields.forEach(function(n){var r=t.find("[data-recurly="+n+"]");r.length&&xe[e.code][n]?displayError(r,"function"==typeof xe[e.code][n]?xe[e.code][n]({cardType:w.a.payment.cardType(o.val())}):xe[e.code][n]):u=!0}):u=!0,u&&r.removeClass("hide"),p.removeClass("disabled")):n.submit()})}})}}});var De=n("PvkM"),Le=n.n(De),Re=function(e,t){return{restrict:"A",link:function(n,o){o.on("click.confirm",function(i){if(i.preventDefault(),null==o.attr("disabled")){var a=n.confirmModal;n.confirmModal.startsWith("#")&&(a=t.trustAsHtml(r.element(n.confirmModal).html())),e.open({title:n.confirmModalTitle,text:a,confirmText:n.confirmModalButtonConfirm,cancelText:n.confirmModalButtonCancel,confirmButtonClass:n.confirmModalButtonClass,onlyConfirm:!!n.confirmOnly},{template:Le.a}).result.then(function(){return n.confirmModalOnConfirm()}).catch(function(){})}else i.stopPropagation()}),n.$on("$destroy",function(){return o.off("click.confirm")})},scope:{confirmModal:"@",confirmModalTitle:"@",confirmModalOnConfirm:"&",confirmModalButtonConfirm:"@?",confirmModalButtonCancel:"@?",confirmModalButtonClass:"@?",confirmOnly:"@?"}}};function isMailToLink(e){return!(!e||"string"!=typeof e)&&0===e.indexOf("mailto:")}function IntercomShow(e,t){return{restrict:"A",link:function(n,r,o){n.intercomEmail||o.href||e.warn("Intercom fallback not provided"),r.on("click",function(r){if("undefined"!=typeof Intercom&&Intercom.booted)r.preventDefault(),Intercom("showNewMessage",n.intercomShow);else{if(function(t){var n=window.bugsnagClient,r=new Error("Intercom widget failed on "+t);e.log(r.message),n&&n.notify(r)}("undefined"==typeof Intercom?"undefined":"uninitialized"),!n.intercomEmail&&o.href&&!isMailToLink(o.href))return t.open(o.href,"_blank"),void r.preventDefault();isMailToLink(o.href)||(r.preventDefault(),t.location.assign("mailto:"+(n.intercomEmail||"help@modeanalytics.com")+"?subject="+n.intercomShow))}}),n.$on("$destroy",function(){r.off("click")})},scope:{intercomShow:"@",intercomEmail:"@?"}}}Re.$inject=["ModalService","$sce"],r.module("mode.components").directive("confirmModal",Re),IntercomShow.$inject=["$log","$window"],r.module("mode.components").directive("intercomShow",IntercomShow);var Ne=n("mTaN"),Ee=n.n(Ne),je=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Oe=function(){function SchemaBrowserController(e,t,n,r,o,i,a,l,s,c){var d=this;this.$log=e,this.$scope=t,this.$rootScope=n,this.Search=r,this.TablePreviewModel=i,this.ReportPinModel=a,this.Utils=l,this.$q=s,this.$sce=c,this.startSchemasLoading(),t.$watch(function(){return o.selectedDataSource},this.updateDataSource.bind(this)),t.$watch(function(){return d.searchQuery},function(e){"definitions"===d.mode?d.queryDefinitions(e):d.queryDataSource(e)})}return SchemaBrowserController.prototype.$onInit=function(){this.setupReportPinsCollection()},SchemaBrowserController.prototype.updateDataSource=function(e){var t=this;e&&(this.dataSource=e,this.clearResults(),"schemas"===this.mode?e.public?this.Search.showcaseTables({user:this.account.username}).then(function(e){return t.buildShowcaseSchemas(e)}):(this.startSchemasLoading(),this.dataSource._resource.hasLink("schemas")&&this.dataSource._resource.links("schemas").$follow().then(this.getDataSourceSchemas.bind(this)).then(this.buildSchemas.bind(this)).catch(this.handleSchemaFailure.bind(this))):this.queryDefinitions(""))},SchemaBrowserController.prototype.refresh=function(){this.updateDataSource(this.dataSource)},SchemaBrowserController.prototype.handleSchemaFailure=function(){this.stopSchemasLoading()},SchemaBrowserController.prototype.startSchemasLoading=function(){this.schemasLoading=!0},SchemaBrowserController.prototype.stopSchemasLoading=function(){this.schemasLoading=!1},SchemaBrowserController.prototype.resetSearchResultsFlag=function(){this.noSearchResults=!1},SchemaBrowserController.prototype.setNoSearchResultsFlag=function(){this.noSearchResults=!0},SchemaBrowserController.prototype.queryDataSource=function(e){var t=this;e&&this.dataSource&&(this.resetSearchResultsFlag(),this.Search.query({query:e,indexes:[this.dataSource.public?"table":"dataSourceTable"],perPage:20,filters:this.dataSource.public?"public":"dataSource_"+this.dataSource.token}).then(function(e){return t.buildTables(e)}).catch(this.handleSearchFailure.bind(this)))},SchemaBrowserController.prototype.queryDefinitions=function(e){var t=this;this.dataSource&&this.Search.query({query:e,indexes:["definitionAlphabetical"],perPage:20,filters:"dataSource_"+this.dataSource.token+","+(this.account.user?"user_":"organization_")+this.account.token}).then(function(e){return t.buildDefinitions(e)}).catch(this.handleSearchFailure.bind(this))},SchemaBrowserController.prototype.handleSearchFailure=function(){this.setNoSearchResultsFlag()},SchemaBrowserController.prototype.querySchemaTables=function(e){var t=this;this.Search.query({query:"",indexes:["dataSourceTableAlphabetical"],perPage:20,filters:"dataSource_"+this.dataSource.token+",schema_"+e,rawResults:!0}).then(function(n){return t.buildTablesForSchema(e,n)})},SchemaBrowserController.prototype.clearResults=function(){var e=this;this.schemas=[],this.tables=[],this.pins=y.filter(this.rawPins,function(t){return e.pinsFromSource(t)})},SchemaBrowserController.prototype.getDataSourceSchemas=function(e){return e&&e._embedded&&e._embedded.schemas?e._embedded.schemas.map(function(e){return e.name}):[]},SchemaBrowserController.prototype.buildSchemas=function(e){this.schemas=e.map(function(e){return{open:!1,name:e,tables:[]}}),this.stopSchemasLoading()},SchemaBrowserController.prototype.buildShowcaseSchemas=function(e){var t=this,n=y.groupBy(e,"schema");this.schemas=Object.keys(n).map(function(e){var r=n[e].map(function(e){return je({},e,{id:parseInt(e.objectID,10)})});return t.setPinsForTables(r),{open:!1,name:e,tables:r}})},SchemaBrowserController.prototype.buildDefinitions=function(e){var t=this,n=e.definitionAlphabetical||[];this.definitions=n.map(function(e){var n=e._highlightResult.name,r=n&&n.value||e.name;return je({},e,{id:parseInt(e.objectID,10),htmlName:t.$sce.trustAsHtml(r)})}),this.definitions&&this.definitions.length||this.setNoSearchResultsFlag()},SchemaBrowserController.prototype.buildTables=function(e){var t=this,n=e.table||e.dataSourceTable||[];this.tables=n.map(function(e){var n=e._highlightResult.fullName,r=n&&n.value||e.fullName;return je({},e,{id:parseInt(e.objectID,10),htmlName:t.$sce.trustAsHtml(r)})}),this.setPinsForTables(this.tables),this.tables&&this.tables.length||this.setNoSearchResultsFlag()},SchemaBrowserController.prototype.buildTablesForSchema=function(e,t){var n=t.results[0]||{},r=n.hits||[],o={page:n.page,total:n.nbPages},i=r.map(function(e){return je({},e,{id:parseInt(e.objectID,10),htmlName:e.htmlName||e.name})});this.report&&this.setPinsForTables(i);var a=y.find(this.schemas,function(t){return t.name===e});a&&(a.tables&&a.tables.length||(a.tables=[]),a.tablesPagination||(a.tablesPagination={page:0,total:0}),a.tables=y.unionBy(a.tables,i||[],"id"),a.tablesPagination.page=o.page,a.tablesPagination.total=o.total)},SchemaBrowserController.prototype.selectTable=function(e){var t=this;this.selectedTable=e,"definitions"!==this.mode&&this.getTablePreview(e).then(function(e){t.selectedTableSchema=e})},SchemaBrowserController.prototype.isTableSelectedAndViewable=function(){return"definitions"!==this.mode&&!!this.selectedTable},SchemaBrowserController.prototype.getTablePreview=function(e){if(e.preview)return e.preview();var t={columns:e.columns.map(this.TablePreviewModel.addAlgoliaColumnType)};return this.$q.resolve(t)},SchemaBrowserController.prototype.paginateSchemaTables=function(e,t){var n=this;this.Search.query({query:"",indexes:["dataSourceTableAlphabetical"],perPage:20,page:{dataSourceTableAlphabetical:e+1},filters:"dataSource_"+this.dataSource.token+",schema_"+t.name,rawResults:!0}).then(function(e){return n.buildTablesForSchema(t.name,e)})},SchemaBrowserController.prototype.setupReportPinsCollection=function(){var e=this;this.pins=[],this.rawPins=[],this.report&&this.report.reportPins().then(function(t){e.reportPinsCollection=t,t.watch(e.$scope,function(t){return e.updateReportPins(t)})})},SchemaBrowserController.prototype.updateReportPins=function(e){var t=this;this.getCurrentReportPins(e).then(function(e){t.rawPins=e.map(function(e){return Object.assign(e,{pinned:!0})}),t.rawPins=y.uniqBy(t.rawPins,"id"),t.pins=y.filter(t.rawPins,function(e){return t.pinsFromSource(e)})}).catch(function(e){t.$log.warn("error getting pins",e)})},SchemaBrowserController.prototype.pinsFromSource=function(e){return!!this.dataSource&&("table"===e._name?this.dataSource.public:this.dataSource.id===e.dataSourceId)},SchemaBrowserController.prototype.getCurrentReportPins=function(e){return this.$q.all(y.chain(e).filter(function(e){return"Report"!==e.pinned_type}).sortBy(this.ReportPinModel.pinnedTypeRank.bind(this)).map(function(e){return e.pinned()}).value())},SchemaBrowserController.prototype.updateReportPinsCollection=function(e){return this.reportPinsCollection=e,e.elements()},SchemaBrowserController.prototype.getReportPinByIdAndType=function(e,t,n){return y.find(n,function(n){return n.pinned_type===t&&n.pinned_id===e})},SchemaBrowserController.prototype.pin=function(e){var t=this,n=e.id||parseInt(e.objectID,10),r=this.Utils.classify(e._name||e.objectType),o=e._resource&&e._resource.links("self").href||e.showPath;this.report.reportPins().then(function(e){return t.updateReportPinsCollection(e)}).then(function(e){return t.getReportPinByIdAndType(n,r,e)}).then(function(e){return t.toggleReportPin(n,r,o,e)}).catch(function(e){})},SchemaBrowserController.prototype.removeTablePinById=function(e){this.applyToTablesWithId(e,function(e){e.pinned=!1})},SchemaBrowserController.prototype.addTablePinById=function(e){this.applyToTablesWithId(e,function(e){e.pinned=!0})},SchemaBrowserController.prototype.applyToTablesWithId=function(e,t){this.pins.concat(this.rawPins,this.tables).filter(function(t){return t.id===e}).forEach(t),this.schemas.forEach(function(n){n.tables.filter(function(t){return t.id===e}).forEach(t)})},SchemaBrowserController.prototype.setPinsForTables=function(e){var t=this.rawPins.map(function(e){return e.id});e.filter(function(e){return t.indexOf(e.id)>=0}).forEach(function(e){e.pinned=!0})},SchemaBrowserController.prototype.toggleReportPin=function(e,t,n,r){var o=this;r?r.destroy().then(function(){o.removeTablePinById(e)}):this.report._new_report?(this.ReportPinModel.newModel({report:this.report.token}).then(function(r){r.pinned_id=e,r.pinned_type=t,r._resource.setLink("pinned",n),o.reportPinsCollection.insert(r),o.addTablePinById(e)}),this.$rootScope.$broadcast("nue.pinned")):this.ReportPinModel.create({report:this.report.token,params:{"report_pin.pinned_type":t,"report_pin.pinned_id":e},useEntryPath:!0}).then(function(t){o.$rootScope.$broadcast("nue.pinned"),o.addTablePinById(e)}).catch(function(e){})},SchemaBrowserController.$inject=["$log","$scope","$rootScope","Search","DataSourceService","TablePreviewModel","ReportPinModel","Utils","$q","$sce"],SchemaBrowserController}(),Pe={bindings:{account:"<",searchQuery:"<",report:"<",hidePin:"<",mode:"@"},template:Ee.a,controller:Oe,controllerAs:"ctrl"};r.module("mode.components").component("schemaBrowser",Pe);var Fe={bindings:{schema:"<"},template:'\n    <ul class="schema-list">\n      <li ng-repeat="column in ctrl.schema.columns" ng-dblclick="ctrl.insertColumn(column.name)">\n        <span uib-tooltip="{{ column.type }}" tooltip-placement="left" tooltip-append-to-body="true">\n        <span class="schema-type {{ column.typeClass }}">{{ column.typeLetter }}</span>\n        <span class="schema-name">{{ column.name }}</span>\n        </span>\n      </li>\n    </ul>\n  ',controller:function(){function TableBrowserController(e){this.$rootScope=e}return TableBrowserController.prototype.insertColumn=function(e){this.$rootScope.$broadcast("sql.insert",{text:e}),this.$rootScope.$broadcast("sql.focus")},TableBrowserController.$inject=["$rootScope"],TableBrowserController}(),controllerAs:"ctrl"};r.module("mode.components").component("tableBrowser",Fe);var ze={bindings:{schemas:"=",selectedTable:"<",selectSchema:"&",selectTable:"&",paginateTable:"&",pinTable:"&",hidePin:"<"},template:'\n    <ul class="schema-table-tree" ng-show="ctrl.schemas.length">\n      <li ng-repeat="schema in ctrl.schemas | orderBy:name" ng-click="ctrl.toggleSchema(schema.name)" ng-class="{open:schema.open}">\n        <span class="schema-title">\n          <i class="icon-tree-caret-default align-md-icon"></i> {{ schema.name }}\n        </span>\n        <schema-sub-list tables="schema.tables"\n                         schema="schema"\n                         pagination="schema.tablesPagination"\n                         paginate="ctrl.actionPaginate(page, schema)"\n                         select-table="ctrl.actionTable(table)"\n                         selected-table="ctrl.selectedTable"\n                         pin-table="ctrl.actionPin(table)"\n                         hide-pin="ctrl.hidePin">\n        </schema-sub-list>\n      </li>\n    </ul>\n  ',controller:function(){function SchemaTreeController(){}return SchemaTreeController.prototype.toggleSchema=function(e){var t=this.schemas.reduce(function(t,n,r){return n.name===e?r:t},-1);t>=0&&(this.schemas[t].open||this.schemas[t].tables.length||this.selectSchema({schema:e}),this.schemas[t].open=!this.schemas[t].open)},SchemaTreeController.prototype.actionTable=function(e,t){t&&t.preventDefault(),t&&t.stopPropagation(),this.selectTable({table:e})},SchemaTreeController.prototype.actionPaginate=function(e,t){this.paginateTable({page:e,schema:t})},SchemaTreeController.prototype.actionPin=function(e){this.pinTable({table:e})},SchemaTreeController.prototype.more=function(){},SchemaTreeController}(),controllerAs:"ctrl"};r.module("mode.components").component("schemaTree",ze);var _e=function(){function TableListController(e){this.$rootScope=e}return TableListController.prototype.actionTable=function(e,t){t.preventDefault(),t.stopPropagation(),this.selectTable({table:e})},TableListController.prototype.insertTable=function(e){var t=e.fullName||e.schema+"."+e.name;"definition"===e.objectType&&(t="{{ @"+e.name+" }}"),this.$rootScope.$broadcast("sql.insert",{text:t}),this.$rootScope.$broadcast("sql.focus")},TableListController.prototype.more=function(e){e.preventDefault(),e.stopPropagation(),this.pagination&&this.pagination.page<this.pagination.total&&this.paginate({page:this.pagination.page,schema:this.schema})},TableListController.prototype.pin=function(e,t){t.preventDefault(),t.stopPropagation(),this.pinTable({table:e})},TableListController.$inject=["$rootScope"],TableListController}(),$e=_e,Be={bindings:{tables:"<",selectTable:"&",selectedTable:"<",pagination:"<",paginate:"&",pinTable:"&",hidePin:"<"},template:'\n    <ul class="schema-table-list schema-search-list" ng-show="ctrl.tables.length">\n\n      <li ng-repeat="table in ctrl.tables track by table.objectID"\n          ng-class="{ selected: table === ctrl.selectedTable }"\n          ng-click="ctrl.actionTable(table, $event);"\n          ng-dblclick="ctrl.insertTable(table)"\n          uib-tooltip="{{ table.name }}"\n          tooltip-placement="left"\n          tooltip-append-to-body="true">\n\n        <span ng-bind-html="table.htmlName"></span>\n\n        <i class="schema-pin" ng-if="!ctrl.hidePin"\n           ng-class="table.pinned ? \'icon-x-large-white\' : \'icon-pin-mini-white\'"\n           ng-click="ctrl.pin(table, $event);">\n        </i>\n      </li>\n    </ul>\n  ',controller:_e,controllerAs:"ctrl"};r.module("mode.components").component("schemaTableList",Be);var Ve={bindings:{tables:"<",selectTable:"&",selectedTable:"<",pagination:"<",schema:"<",paginate:"&",pinTable:"&",hidePin:"<"},template:'\n    <ul class="schema-sub-list" ng-show="ctrl.tables.length">\n\n      <li ng-repeat="table in ctrl.tables track by table.objectID"\n          ng-class="{ selected: table === ctrl.selectedTable }"\n          ng-click="ctrl.actionTable(table, $event);"\n          ng-dblclick="ctrl.insertTable(table)"\n          uib-tooltip="{{ table.name }}"\n          tooltip-placement="left"\n          tooltip-append-to-body="true">\n\n        <span>{{ table.name }}</span>\n\n        <i class="schema-pin" ng-if="!ctrl.hidePin"\n           ng-class="table.pinned ? \'icon-x-large-white\' : \'icon-pin-mini-white\'"\n           ng-click="ctrl.pin(table, $event);">\n        </i>\n      </li>\n    </ul>\n    <a href="#" ng-click="ctrl.more($event)" ng-if="ctrl.pagination.page + 1 < ctrl.pagination.total" class="btn btn-sm btn-block btn-primary-link schema-more">More Tables</a>\n  ',controller:$e,controllerAs:"ctrl"};r.module("mode.components").component("schemaSubList",Ve);var Ue=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Ze={bindings:{tables:"<",selectTable:"&",selectedTable:"<",searchQuery:"<",pinTable:"&"},template:'\n    <h3 ng-show="ctrl.pins && ctrl.pins.length">Pinned</h3>\n    <ul class="schema-table-list schema-pin-list" ng-show="ctrl.tables.length">\n\n      <li ng-repeat="table in ctrl.pins track by table.id"\n          ng-class="{ selected: table === ctrl.selectedTable }"\n          ng-click="ctrl.actionTable(table, $event);"\n          ng-dblclick="ctrl.insertTable(table)"\n          uib-tooltip="{{ table.name }}"\n          tooltip-placement="left"\n          tooltip-append-to-body="true">\n\n        <span ng-class="{\'schema-public\': table._name === \'table\'}">{{table.schema}}</span>.{{table.name}}\n\n        <i class="schema-pin icon-x-large-white" ng-click="ctrl.pin(table, $event);"></i>\n      </li>\n    </ul>\n  ',controller:function(e){function PinListController(t,n){var r=e.call(this,n)||this;return t.$watchGroup(["ctrl.searchQuery","ctrl.tables"],r.filterTablesByQuery.bind(r)),r}return Ue(PinListController,e),PinListController.prototype.filterTablesByQuery=function(){var e=this;this.tables&&(this.pins=this.tables.filter(function(t){return(t.schema+"."+t.name).indexOf(e.searchQuery)>=0}))},PinListController.$inject=["$scope","$rootScope"],PinListController}($e),controllerAs:"ctrl"};r.module("mode.components").component("schemaPinList",Ze);n("lWnr");var Ge={controller:function(){function TableSettingsController(e,t){var n=this;this.$scope=e,this.vs=t,this.checkCol=function(e,t){var o=r.copy(n.view);o.excludeColumns=o.excludeColumns||[];var i=o.excludeColumns.indexOf(e);i>=0?o.excludeColumns.splice(i,1):o.excludeColumns.push(e),n.vs.updateTableSettings(n.token,o)}}return TableSettingsController.prototype.$onChanges=function(e){(e.view||e.dataset)&&this.setSelectedColumns()},TableSettingsController.prototype.setSelectedColumns=function(){var e=this;this.selectedColumns=Object(y.map)(this.dataset.columns,function(t){return{name:t.name,selected:!e.view.excludeColumns||e.view.excludeColumns.indexOf(t.name)<0}})},TableSettingsController.$inject=["$scope","ViewService"],TableSettingsController}(),controllerAs:"ctrl",template:'<h3 class="setting-title no-border-top">Columns</h3>\n    <div ng-repeat="column in ctrl.selectedColumns" class="form-field check-field" style="margin:10px;">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="{{column.name}}visible" value="{{column.name}}" ng-model="column.selected" ng-change="ctrl.checkCol(column.name,$event)" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="{{column.name}}visible">\n        {{column.name}}\n        </label>\n      </span>\n    </div>',bindings:{view:"<",dataset:"<",token:"<"}};r.module("mode.table").component("tableSettings",Ge);var Ye={controller:function(){function TableColumnSettingsController(e,t){var n=this;this.$scope=e,this.vs=t,this.$onInit=function(){n.onSelectedColumnChanged()},this.$onChanges=function(e){(e.view||e.selectedColumn)&&n.onSelectedColumnChanged()}}return TableColumnSettingsController.prototype.updateSettings=function(e){this.columnView=e,this.view.columns[this.selectedColumn]=this.columnView,this.vs.updateTableColumnSettings(this.token,this.selectedColumn,this.columnView)},TableColumnSettingsController.prototype.onSelectedColumnChanged=function(){this.view.columns=this.view.columns||{},this.columnView=this.view.columns[this.selectedColumn]||{}},TableColumnSettingsController.$inject=["$scope","ViewService"],TableColumnSettingsController}(),controllerAs:"ctrl",template:'\n    <h3 class="setting-title no-border-top">{{ctrl.selectedColumn}}</h3>\n    <format-settings format-options="ctrl.columnView" on-change="ctrl.updateSettings($formatOptions)"></format-settings>\n  ',bindings:{view:"<",token:"<",selectedColumn:"<"}};r.module("mode.table").component("tableColumnSettings",Ye);n("LHp7"),n("k+LH"),n("VrsO"),n("t1Yu");var Qe=n("oGeD"),He=n.n(Qe),We=n("OZ53"),qe=r.module("mode.spaces",["mode.shared.services","mode.app.services","mode.assets","mode.components","mode.common","mode.searchbar","mode.directives","ui.bootstrap.dropdown","ui.bootstrap.tooltip","ui.bootstrap.pagination","ui.bootstrap.tpls","angularMoment","mode.utils","templates"]);qe.config(["moment",function(e){e.locale("en",{relativeTime:Object(y.assign)({},e.localeData()._relativeTime,{past:function(e){return"a few seconds"===e?"just now":"%s ago".replace(/%s/i,e)}})})}]),We.a(qe);var Je=n("i7j0"),Xe={bindings:{account:"<",owner:"<",state:"<",datasource:"<",datasources:"<",preference:"<"},template:'\n  <div class="definitions-view-header clearfix">\n    <div class="content-wrapper">\n\n      \x3c!-- Definition Pay Wall Begins --\x3e\n      <definition-paywall\n        ng-if="ctrl.showDefinitionPaywall()"\n        dismiss="ctrl.dismissDefinitionPlus()"\n        can-dismiss="ctrl.owner.canDismissPaywallBanner()"></definition-paywall>\n      \x3c!-- @Definition Pay Wall Ends --\x3e\n\n      <div class="space-banner space-banner-horiz" ng-if="!ctrl.preference.hidden_banners.definition_help && ctrl.definitionList.length">\n        <i class="icon-no-definitions space-banner-icon empty-definitions-banner-icon"></i>\n        <h2 class="banner-heading banner-heading-medium no-bottom-margin definitions-banner">Write SQL once, use it everywhere</h2>\n        <a href="https://help.modeanalytics.com/articles/definitions-best-practices" target="_blank" rel="noopener">Definitions best practices</a> |\n        <a href="https://help.modeanalytics.com/definitions/" target="_blank" rel="noopener">Definitions FAQs</a>\n\n        <div><a class="dismiss-link" href="#" ng-click="ctrl.dismissDefinitionHelp()">Got it</a></div>\n      </div>\n\n      <div ng-if="ctrl.definitionList.length" class="clearfix">\n        <h3 class="pull-left">Definitions <span ng-if="ctrl.owner.planCode !== \'plus\' && !ctrl.datasource.public">({{ctrl.owner.privateDefinitionCount + \'/\' + ctrl.owner.privateDefinitionLimit}})</span> <i class="icon icon-info tooltip-html" tooltip-placement="bottom" uib-tooltip-html="\'<div><p>Definitions are saved <code>SELECT</code> statements that can be referenced in other SQL queries.</p><p>If you\\\'re looking for reports, try Spaces.</p></div>\'"></i></h3>\n        <h3 class="pull-right">\n          <a create-definition datasource="ctrl.datasource" datasources="ctrl.datasources" modal-confirm="ctrl.definitionCreated($definition)" owner="ctrl.owner" account="ctrl.account" href="#" class="btn btn-primary">New Definition</a>\n        </h3>\n      </div>\n\n      <div class="space-banner medium-text" ng-if="!ctrl.definitionList.length && !ctrl.loading">\n        <i class="icon-no-definitions space-banner-icon empty-definitions-banner-icon"></i>\n        <div class="text-center">\n          <h1 class="banner-heading banner-heading-large definitions-banner">Write SQL once, use it everywhere</h1>\n          <div>Definitions are saved <code>SELECT</code> statements that can be referenced in other SQL queries.</div>\n          <div>Define business logic in a central place to ensure teams are pulling the right data, throughout the platform.</div>\n          <a href="https://help.modeanalytics.com/articles/definitions-best-practices" target="_blank" rel="noopener">Definitions best practices</a> |\n          <a href="https://help.modeanalytics.com/definitions/" target="_blank" rel="noopener">Definitions FAQs</a>\n\n          <div>\n            <a href="#" create-definition datasource="ctrl.datasource" datasources="ctrl.datasources" modal-confirm="ctrl.definitionCreated($definition)" owner="ctrl.owner" account="ctrl.account" class="spaced btn btn-primary btn-lg">Create Definition</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <definition-list datasource="ctrl.datasource" owner="ctrl.owner" ng-if="ctrl.definitionList.length"></definition-list>\n  <a href="#" ng-click="ctrl.more()" ng-if="ctrl.nextPage && !ctrl.loading" class="btn btn-secondary more-report-list ng-animate-disabled">See more</a>\n  <div class="spaces-loader" ng-show="ctrl.loading || ctrl.loading"><i class="icon-logo-animated"></i></div>\n  ',controller:function(){function DefinitionsViewController(e,t,n,r,o,i,a,l,s,c){this.$scope=e,this.$q=t,this.$window=n,this.store=r,this.alertService=o,this.Search=i,this.PreferenceModel=a,this.LibraryDefinitionModel=l,this.CookieService=s,this.PermissionService=c,this.loading=!1}return DefinitionsViewController.prototype.$onInit=function(){this.store.connectPath(this.$scope,"home.definitionState",this.definitionStateUpdated.bind(this))},DefinitionsViewController.prototype.$onChanges=function(e){e.datasource&&this.getDefinitions()},DefinitionsViewController.prototype.definitionStateUpdated=function(e){this.definitionList=e.definitionList,this.nextPage=e.nextPage},DefinitionsViewController.prototype.getDefinitions=function(){this.searchOpts={query:"",indexes:["definitionAlphabetical"],perPage:20,filters:"dataSource_"+this.datasource.token+","+(this.owner.user?"user_":"organization_")+this.owner.token,rawResults:!0},this.loading=!0,this.store.dispatch(Je.i(this.Search,this.searchOpts,this.handleSearchResponse.bind(this)))},DefinitionsViewController.prototype.more=function(){this.loading=!0,this.searchOpts.page=this.nextPage,this.store.dispatch(Je.j(this.Search,this.searchOpts,this.handleSearchResponse.bind(this)))},DefinitionsViewController.prototype.getTokensFromSearch=function(e){var t={tokens:[]};return e&&(t.tokens=e.map(function(e){return e.token})),t},DefinitionsViewController.prototype.handleSearchResponse=function(e){var t=this,n=this.getTokensFromSearch(e.results[0].hits);return this.buildDefinitionListFromTokens(n).then(function(n){var r=null;return t.loading=!1,e.results[0].page<e.results[0].nbPages-1&&(r=e.results[0].page+1),{nextPage:r,definitions:n}})},DefinitionsViewController.prototype.buildDefinitionsFromResponse=function(e){var t=this;if(e)return this.$q.all(e._embedded.definitions.map(function(e){var n=new t.LibraryDefinitionModel.model(e);return t.LibraryDefinitionModel.putLocal(n)}))},DefinitionsViewController.prototype.buildDefinitionListFromTokens=function(e){return e.tokens&&e.tokens.length?this.owner._resource.links("by_tokens_definitions").$follow({tokens:e.tokens,includes:{definitions:["creator"]}}).then(this.buildDefinitionsFromResponse.bind(this)):this.$q.resolve([])},DefinitionsViewController.prototype.definitionCreated=function(e){e&&(this.$window.location=e.editLink)},DefinitionsViewController.prototype.dismissDefinitionHelp=function(){this.preference.hidden_banners.definition_help=!0,this.PreferenceModel.update(this.preference)},DefinitionsViewController.prototype.dismissDefinitionPlus=function(){this.preference.hidden_banners.definition_plus=!0,this.PreferenceModel.update(this.preference)},DefinitionsViewController.prototype.showDefinitionPaywall=function(){return!this.datasource.public&&(!this.owner.paymentMethodConfirmed||!this.preference.hidden_banners.definition_plus&&"plus"!==this.owner.planCode&&this.owner.isAdmin())},DefinitionsViewController.$inject=["$scope","$q","$window","StoreService","AlertService","Search","PreferenceModel","LibraryDefinitionModel","CookieService","PermissionService"],DefinitionsViewController}(),controllerAs:"ctrl"};r.module("mode.spaces").component("definitionsView",Xe);var Ke=function(){function SpacesController(e,t,n,r,o,i,a,l,s,c,d,u,p){this.$scope=e,this.$log=t,this.$state=n,this.store=r,this.PreferenceModel=o,this.$q=i,this.ReportModel=a,this.SpaceModel=l,this.Search=s,this.SpaceSearchService=c,this.$window=d,this.ModeCollection=u,this.view="home"}return SpacesController.prototype.$onInit=function(){this.store.dispatch(Je.B(this.preference.home_list_type||"tile")),this.store.dispatch(Je.m(this.owner,this.ModeCollection)),this.store.dispatch(Je.C(this.owner.space_count)),this.store.dispatch(Je.g(this.owner,this.ModeCollection)),this.store.connectPath(this.$scope,"home.selectedSpace",this.updateHomeState.bind(this)),this.store.connectPath(this.$scope,"home.reportListToggle",this.updateReportListToggle.bind(this)),this.store.connectPath(this.$scope,"home.mySpaces",this.updateSpaces.bind(this)),this.store.connectPath(this.$scope,"navSidebar.sidebarOpen",this.updateNavState.bind(this)),this.SpaceSearchService.setOwner(this.owner)},SpacesController.prototype.resetHomeState=function(){this.selectedSpace=null},SpacesController.prototype.updateNavState=function(e){this.sidebarOpen=e},SpacesController.prototype.updateReportListToggle=function(e){e&&e!==this.preference.home_list_type&&(this.preference.home_list_type=e,this.PreferenceModel.update(this.preference))},SpacesController.prototype.updateHomeState=function(e){if(e!==this.homeState){switch(this.resetHomeState(),this.homeState=e,this.selectedSpace=e.space,this.reportListType=this.homeState.token?"space":this.homeState.name,this.reportListType){case"mywork":case"starred":case"recent":this.$window.document.title=this.homeState.subTitle+" | Mode",this.view="home",this.getReportList();break;case"discover":this.$window.document.title=this.homeState.subTitle+" | Mode",this.view="home";break;case"datasource":this.view="datasource";var t=Object(y.find)(this.datasources,{token:e.datasourceToken});t?(this.$window.document.title=t.fullname+" | Mode",this.selectedDatasource=t):this.state.go("root.home");break;case"spacesIndex":this.$window.document.title=this.homeState.subTitle+" | Mode",this.view="spacesIndex";break;default:this.view="reportList",this.getReportList()}e.preferenceView&&this.preference.home_view!==e.preferenceView&&(w()("meta[name=home-view]").attr("content",e.preferenceView),this.preference.home_view=e.preferenceView,this.PreferenceModel.update(this.preference))}},SpacesController.prototype.updateSpaces=function(e){e&&(this.spaces=e.sort(this.SpaceModel.navbarSort))},SpacesController.prototype.getReportList=function(){switch(this.reportListType){case"space":this.selectedSpace?(this.$window.document.title=this.selectedSpace.name+" | Mode",this.homeState.title=this.selectedSpace.name,this.updateSpaceRouteSilently(this.owner.username,this.selectedSpace.token),this.store.dispatch(Je.p(this.SpaceSearchService,this.owner,this.selectedSpace))):this.state.go("root.home");break;case"spaceLoading":break;case"starred":this.store.dispatch(Je.n(this.owner));break;case"recent":this.store.dispatch(Je.o(this.owner));break;case"mywork":default:this.store.dispatch(Je.h(this.SpaceSearchService,this.account,this.owner))}},SpacesController.prototype.updateSpaceRouteSilently=function(e,t){var n="root.spaces.space",r={ownerId:e,spaceId:t};this.$state.includes(n,r)||this.$state.go(n,r,{notify:!1})},SpacesController.$inject=["$scope","$log","$state","StoreService","PreferenceModel","$q","ReportModel","SpaceModel","Search","SpaceSearchService","$window","ModeCollection","DataLayerFlipperService"],SpacesController}(),et={bindings:{account:"<",organizations:"<",owner:"<",api:"<",preference:"=",datasources:"<",state:"<"},template:He.a,controller:Ke,controllerAs:"ctrl"};r.module("mode.spaces").component("spaces",et);var tt=n("JW7B"),nt=$("meta[name=trial-banner]").attr("content"),rt=function(){function ReportViewController(e,t,n,r,o,i,a,l,s,c,d){this.$q=r,this.SpaceMembershipModel=o,this.Search=i,this.SpaceSearchService=a,this.AlertService=l,this.SpaceModel=s,this.ReportModel=c,this.DataLayerFlipperService=d,this.store=n,this.$scope=e,this.$log=t}return ReportViewController.prototype.$onInit=function(){var e=this;this.$scope.$watch("ctrl.space",this.setupSpaceMembershipWatcher.bind(this)),this.store.connectPath(this.$scope,"home.reportState",this.updateReportState.bind(this)),this.store.connectPath(this.$scope,"home.reportListToggle",this.updateReportListToggle.bind(this)),this.store.connectPath(this.$scope,"home.mySpaces",this.updateSpaceKeys.bind(this)),this.store.connectPath(this.$scope,"home.totalDataSourceCount",function(t){e.dataSourceCount=t}),this.emptyReportList=!1},ReportViewController.prototype.setupSpaceMembershipWatcher=function(e){var t=this;this.limitedSpaceMembershipsWatcher&&(this.limitedSpaceMembershipsWatcher(),this.limitedSpaceMembershipsWatcher=null),e&&(e.restricted||e.openSpace)?e.previewSpaceMemberships({includes:{space_memberships:"member"}}).then(function(e){t.limitedSpaceMembershipsWatcher=e.watch(t.$scope,t.buildSpaceMemberships.bind(t))}):this.selectedSpaceMemberships=[]},ReportViewController.prototype.buildSpaceMemberships=function(e){var t=this;this.SpaceMembershipModel.buildMembershipsWithAccount(e).then(function(e){t.selectedSpaceMemberships=e})},ReportViewController.prototype.updateReportState=function(e){this.currentReportState!==e&&(this.currentReportState=e,this.reportListLoading=e.reportListLoading,this.nextPage=e.nextPage,this.reportsCollection=e.reportsCollection,this.searchOptions=e.searchOptions,this.emptyReportList=!1,this.hasArchived=e.hasArchived,this.noReports=e.noReports,this.buildCreators(e.reportList).then(this.ReportModel.buildSpacesAsyncInSpace.bind(this,this.space)).then(this.buildStars.bind(this)).then(this.buildReports.bind(this)))},ReportViewController.prototype.updateReportListToggle=function(e){this.reportListToggle=e},ReportViewController.prototype.updateSpaceKeys=function(e){this.spaceKeys=Object(tt.b)(e)},ReportViewController.prototype.buildCreators=function(e){var t=this;return this.$q.all(e.map(function(e){return!e.creatorAccount&&e._resource.hasLink("creator")?e.creator().then(function(t){return e.creatorAccount=t,e}):e.creatorAccount?e:(t.$log.warn("report has no creator",e.token),e.creatorAccount=t.account,e)}))},ReportViewController.prototype.buildStars=function(e){return this.$q.all(e.map(function(e){return!e.userStar&&e._resource.hasLink("star")?e.star().then(function(t){return e.userStar=t,e}):e}))},ReportViewController.prototype.buildReports=function(e){this.reports=e||[],e&&e.length||this.handleEmptyReportList()},ReportViewController.prototype.joinSpace=function(){this.space&&this.store.dispatch(Je.b(this.space,this.account.token,this.SpaceMembershipModel,this.SpaceModel,this.AlertService,this.insertToSpaces.bind(this)))},ReportViewController.prototype.insertToSpaces=function(e){this.store.dispatch(Je.q(e))},ReportViewController.prototype.handleEmptyReportList=function(){this.emptyReportList=!0},ReportViewController.prototype.showReportList=function(){return!this.space&&"starred"!==this.view.name||"list"===this.reportListToggle},ReportViewController.prototype.showReportTile=function(){return"tile"===this.reportListToggle&&(this.space||"starred"===this.view.name)},ReportViewController.prototype.trialStatePending=function(){return"trial_pending"===nt},ReportViewController.prototype.more=function(){this.reportsCollection&&this.reportsCollection.hasNext()?this.store.dispatch(Je.k(this.reportsCollection)):this.reportsCollection||(this.searchOptions.page=this.nextPage,this.store.dispatch(Je.l(this.SpaceSearchService,this.space,this.searchOptions,this.SpaceSearchService.handleSearchResponse)))},ReportViewController.$inject=["$scope","$log","StoreService","$q","SpaceMembershipModel","Search","SpaceSearchService","AlertService","SpaceModel","ReportModel","DataLayerFlipperService"],ReportViewController}(),ot=rt,it={bindings:{account:"<",owner:"<",state:"<",space:"<",spaces:"<",view:"<"},template:'\n<div class="content-header">\n  <div class="content-wrapper clearfix">\n    <connect-db-banner\n      ng-if="ctrl.trialStatePending() || ctrl.dataSourceCount === 0"\n      owner="ctrl.owner"\n      cta-link="ctrl.owner.datasourceLink">\n    </connect-db-banner>\n    <full-trial-banner\n      owner="ctrl.owner">\n    </full-trial-banner>\n    <simple-banner\n      text="See reports here you like? Join this Space to add it to your list of Spaces."\n      action-text="Join Space"\n      on-action="ctrl.joinSpace()"\n      ng-if="ctrl.space.openSpace && ctrl.spaceKeys && !ctrl.spaceKeys[ctrl.space.token]">\n    </simple-banner>\n    <my-app></my-app>\n  </div>\n  <div class="content-wrapper with-flex" ng-if="!ctrl.space.private && !ctrl.space.community">\n    <div class="space-header-details">\n      <div class="space-header-description" ng-if="ctrl.space.description">{{ ctrl.space.description }}</div>\n    </div>\n    <div class="space-member-facepile">\n      <ul class="space-member-facepile-list">\n        <li class="space-member-facepile-list-item" ng-repeat="membership in ctrl.selectedSpaceMemberships | limitTo:5">\n          <mode-avatar\n            uib-tooltip="{{ membership.accountMember.name | truncateEnd:20 }}"\n            ng-if="membership.member_type === \'account\'" options="membership.accountMember.avatar"\n            size="20"\n            class="user-avatar">\n          </mode-avatar>\n          <group-facepile\n            uib-tooltip="{{ membership.accountMember.name | truncateEnd:20 }}"\n            ng-if="membership.member_type === \'group\'"\n            group="membership.accountMember"\n            size="20"\n            class="user-avatar">\n          </group-facepile>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="content-wrapper content-wrapper-sm" ng-if="!ctrl.noReports || ctrl.hasArchived">\n    <report-filter class="report-filter-component" account="ctrl.account" owner="ctrl.owner" view="ctrl.view" space="ctrl.space"></report-filter>\n  </div>\n</div>\n<div class="content-wrapper">\n  <report-list-tile\n    ng-if="ctrl.showReportTile()"\n    reports="ctrl.reports"\n    space="ctrl.space"\n    space-view="true"\n    spaces="ctrl.spaces"\n    owner="ctrl.owner"\n    account="ctrl.account">\n  </report-list-tile>\n  <report-list\n    ng-if="ctrl.showReportList()"\n    reports="ctrl.reports"\n    space="ctrl.space"\n    space-view="true"\n    spaces="ctrl.spaces"\n    owner="ctrl.owner"\n    account="ctrl.account">\n  </report-list>\n  <report-empty-state\n    no-reports="ctrl.noReports && !ctrl.reportListLoading"\n    empty-reports="ctrl.emptyReportList && !ctrl.reportListLoading"\n    has-archived="ctrl.hasArchived"\n    view="ctrl.view"\n    owner="ctrl.owner">\n  </report-empty-state>\n  <div class="spaces-loader" ng-show="ctrl.reportListLoading"><i class="icon-logo-animated"></i></div>\n  <a href="#" ng-click="ctrl.more()" ng-if="ctrl.nextPage && !ctrl.reportListLoading" class="btn btn-secondary more-report-list ng-animate-disabled">See more</a>\n</div>\n  ',controller:rt,controllerAs:"ctrl"};r.module("mode.spaces").component("reportView",it);var at=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),lt=$("meta[name=trial-banner]").attr("content"),st={bindings:{account:"<",owner:"<",organizations:"<",state:"<",spaces:"<",view:"<"},template:'\n<div class="content-header">\n  <div class="content-wrapper clearfix">\n    <slack-banner owner="ctrl.owner"></slack-banner>\n    <connect-db-banner\n      ng-if="ctrl.trialStatePending()"\n      owner="ctrl.owner"\n      cta-link="ctrl.owner.datasourceLink" />\n    <full-trial-banner owner="ctrl.owner"></full-trial-banner>\n    <datasource-banner owner="ctrl.owner" organizations="ctrl.organizations"></datasource-banner>\n  </div>\n  <div class="content-wrapper content-wrapper-sm">\n    <report-filter\n      class="report-filter-component"\n      ng-if="ctrl.view.name === \'mywork\'"\n      account="ctrl.account"\n      owner="ctrl.owner"\n      view="ctrl.view">\n    </report-filter>\n    <div class="report-filter-component" ng-if="ctrl.showReportListToggle()">\n      <div class="filter-input-container"></div>\n      <report-list-toggle class="report-filter-toggle"></report-list-toggle>\n    </div>\n  </div>\n</div>\n<div class="content-wrapper">\n  <report-list-tile\n    ng-if="ctrl.showReportTile()"\n    reports="ctrl.reports"\n    is-empty="ctrl.emptyReportList && !ctrl.reportListLoading"\n    spaces="ctrl.spaces"\n    owner="ctrl.owner"\n    account="ctrl.account"\n    show-spaces>\n  </report-list-tile>\n  <report-list\n    ng-if="ctrl.showReportList()"\n    reports="ctrl.reports"\n    spaces="ctrl.spaces"\n    owner="ctrl.owner"\n    account="ctrl.account"\n    show-spaces>\n  </report-list>\n  <report-list-table\n    ng-if="ctrl.showReportTable()"\n    reports="ctrl.reports"\n    spaces="ctrl.spaces"\n    owner="ctrl.owner"\n    account="ctrl.account"\n    filter="ctrl.searchOptions.indexes[0]"\n    show-spaces>\n  </report-list-table>\n  <discover-view\n    spaces="ctrl.spaces"\n    ng-if="ctrl.showDiscoverTab()"\n    owner="ctrl.owner"\n    account="ctrl.account"\n    view="ctrl.view"\n    organizations="ctrl.organizations">\n  </discover-view>\n  <report-empty-state\n    ng-if="ctrl.showEmptyState()"\n    no-reports="ctrl.noReports && !ctrl.reportListLoading"\n    empty-reports="ctrl.emptyReportList && !ctrl.reportListLoading"\n    view="ctrl.view"\n    owner="ctrl.owner">\n  </report-empty-state>\n  <div class="spaces-loader" ng-show="ctrl.reportListLoading"><i class="icon-logo-animated"></i></div>\n  <a href="#" ng-click="ctrl.more()" ng-if="ctrl.showMoreReportsButton()" class="btn btn-secondary more-report-list ng-animate-disabled">See more</a>\n</div>\n  ',controller:function(e){function HomeViewController(t,n,r,o,i,a,l,s,c,d,u){return e.call(this,t,n,r,o,i,a,l,s,c,d,u)||this}return at(HomeViewController,e),HomeViewController.prototype.$onInit=function(){this.store.connectPath(this.$scope,"home.reportState",this.updateReportState.bind(this)),this.store.connectPath(this.$scope,"home.reportListToggle",this.updateReportListToggle.bind(this)),this.emptyReportList=!1},HomeViewController.prototype.showReportList=function(){return"mywork"!==this.view.name&&"list"===this.reportListToggle&&"discover"!==this.view.name},HomeViewController.prototype.showReportTile=function(){return"tile"===this.reportListToggle&&"mywork"!==this.view.name&&"discover"!==this.view.name},HomeViewController.prototype.showReportTable=function(){return"mywork"===this.view.name},HomeViewController.prototype.showDiscoverTab=function(){return"discover"===this.view.name},HomeViewController.prototype.showReportListToggle=function(){return"mywork"!==this.view.name&&"discover"!==this.view.name},HomeViewController.prototype.showEmptyState=function(){return"discover"!==this.view.name},HomeViewController.prototype.showMoreReportsButton=function(){return!this.showDiscoverTab()&&(this.nextPage||this.reportsCollection&&this.reportsCollection.hasNext())&&!this.reportListLoading},HomeViewController.prototype.trialStatePending=function(){return"trial_pending"===lt},HomeViewController.$inject=["$scope","$log","StoreService","$q","SpaceMembershipModel","Search","SpaceSearchService","AlertService","SpaceModel","ReportModel","DataLayerFlipperService"],HomeViewController}(ot),controllerAs:"ctrl"};r.module("mode.spaces").component("homeView",st);var ct={bindings:{account:"<",owner:"<",organizations:"<",state:"<",spaces:"<"},controller:function(){function SpacesIndexViewController(e,t,n,r){this.store=e,this.SpaceModel=t,this.AssetService=n,this.$state=r}return SpacesIndexViewController.prototype.handleCreateSpace=function(e){this.store.dispatch(Je.c(e)),this.$state.go("root.spaces.space",{spaceId:e.token,ownerId:this.owner.username})},SpacesIndexViewController.$inject=["StoreService","SpaceModel","AssetService","$state"],SpacesIndexViewController}(),controllerAs:"ctrl",template:'\n  <div class="content-header">\n    <div class="content-wrapper with-flex">\n      <div class="space-header-details">\n        <div class="space-header-description">Spaces allow you to curate reports for teams and projects. You can join or leave Spaces to prioritize access to the reports you use most often. For sensitive analyses, be sure to set up a <a href="https://help.modeanalytics.com/articles/private-spaces/" target="_blank" rel="noopener">Private Space</a>.</div>\n      </div>\n    </div>\n    <div class="content-wrapper content-wrapper-sm report-filter-component">\n      <div class="filter-input-container">\n        <input\n          type="text"\n          size="40"\n          class="form-control form-control-sm icon-filter-icon"\n          autocomplete="off"\n          placeholder="Search all Spaces"\n          ng-model="ctrl.spacesQuery" />\n      </div>\n      <div class="filter-menu-container">\n        <a href="#" class="space-list-add-button" create-space account="ctrl.account" owner="ctrl.owner" on-create="ctrl.handleCreateSpace($space);"><i class="icon-modal-add add-space-icon"></i>Create Space</a>\n      </div>\n    </div>\n  </div>\n  <div class="content-wrapper">\n    <div class="space-list-header">\n      <div class="space-list-name-header">Space</div>\n      <div class="space-list-reports-header">Reports</div>\n      <div class="space-list-members-header">Members</div>\n    </div>\n    <ul class="spaces-list-view">\n      <li class="spaces-list-item" ng-repeat="space in ctrl.spaces | filter:ctrl.spacesQuery | orderBy:[\'membershipLink\',\'name\'] as filteredSpace">\n        <a ng-href="{{ space.webLink }}" class="spaces-list-link">\n          <div class="space-list-details">\n            <div class="space-list-name">\n              <i class="{{ space.iconClassName }} space-list-icon"></i>\n              <span class="space-list-display-name">{{ space.name }}</span>\n              <span ng-if="space.membershipLink" class="space-list-member">&check; Member</span>\n            </div>\n            <div class="space-list-description">{{ space.description }}</div>\n            <div class="space-list-creator">Created by {{ space.savedCreator.displayName() }}</div>\n          </div>\n          <div class="space-list-reports">\n            <i class="icon-report-outline-mini-gray space-list-icon"></i>{{ space.savedDetail.report_count }}\n          </div>\n          <div class="space-list-members">\n            <i class="icon-nav-personal-space space-list-icon"></i>{{ space.savedDetail.member_count }}\n          </div>\n        </a>\n      </li>\n    </ul>\n    <div class="spaces-loader" ng-show="ctrl.spaces === null"><i class="icon-logo-animated"></i></div>\n    <div class="report-empty-state-component" ng-if="ctrl.spaces.length == 0 || filteredSpace.length == 0" ng-class="{ \'no-reports\': ctrl.noSpaces }">\n      <img class="report-empty-image" ng-src="{{ ctrl.spaces.length == 0 ? ctrl.AssetService.emptySpaces : ctrl.AssetService.noFilterSpaces }}" />\n      <h3 class="report-empty-header">{{ ctrl.spaces.length == 0 ? \'Looks like there aren&#8217;t any custom Spaces here yet.\' : \'That Space isn&#8217;t here it seems.\' }}</h3>\n      <p class="report-empty-message">{{ ctrl.spaces.length == 0 ? \'You can create Spaces for your teammates to join you!\' : \'if you can&#8217;t find what you&#8217;re looking for, you can create a new Space.\' }}</p>\n      <a href="#" class="btn btn-primary btn-lg" create-space account="ctrl.account" owner="ctrl.owner" on-create="ctrl.handleCreateSpace($space);">Create Space</a>\n    </div>\n  </div>\n  '};r.module("mode.spaces").component("spacesIndexView",ct);var dt=n("Kb94"),ut=n.n(dt),pt=function(){function DiscoverViewController(e,t,n,r,o,i){this.AssetService=o,this.DataLayerFlipperService=i}return DiscoverViewController.prototype.firstName=function(){return y.first(this.account.name.split(" "))},DiscoverViewController.$inject=["$scope","$log","StoreService","$q","AssetService","DataLayerFlipperService"],DiscoverViewController}(),ht={bindings:{account:"<",owner:"<",organizations:"<",spaces:"<",view:"<"},template:ut.a,controller:pt,controllerAs:"ctrl"};r.module("mode.spaces").component("discoverView",ht);var gt={bindings:{groups:"<",groupAccount:"@?"},template:'\n<div ng-if="!ctrl.groups && !ctrl.groupsError" class="iframe-loading"></div>\n<group-list groups="ctrl.groups" ng-if="ctrl.groups"></group-list>\n<div ng-if="ctrl.groupsCollection.hasNext()"><a href="#" ng-click="ctrl.moreGroups()">More</a></div>\n',controller:function(){function GroupIndexController(e,t,n,r){this.$scope=e,this.$log=t,this.AccountModel=n,this.GroupModel=r}return GroupIndexController.prototype.$onInit=function(){var e=this;this.owner=this.groupAccount?this.groupAccount:$("meta[name=owner-username]").attr("content"),this.getOwner().then(this.getGroups.bind(this)).catch(function(t){e.groupsError=t,e.$log.warn("Error getting groups",t)})},GroupIndexController.prototype.getOwner=function(){return this.AccountModel.find({username:this.owner,useEntryPath:!0,includes:["groups"],refresh:!0})},GroupIndexController.prototype.getGroups=function(e){return e.groups({includes:{groups:{memberships_preview:{group_memberships:"member"}}}}).then(this.watchGroups.bind(this)).then(this.buildGroups.bind(this))},GroupIndexController.prototype.watchGroups=function(e){return this.groupsCollection=e,e.watch(this.$scope,this.buildGroups.bind(this)),e.elements()},GroupIndexController.prototype.buildGroups=function(e){var t=this;this.GroupModel.buildGroupsWithFacepiles(e).then(function(e){t.groups=e.sort(t.GroupModel.groupSort)})},GroupIndexController.prototype.moreGroups=function(){this.groupsCollection.next()},GroupIndexController.$inject=["$scope","$log","AccountModel","GroupModel"],GroupIndexController}(),controllerAs:"ctrl"};r.module("mode.components").component("groupIndex",gt);var mt={bindings:{group:"<?",groupToken:"@?",groupAccount:"@?",owner:"<?",account:"<?"},template:'\n<div class="settings-action-hd clearfix">\n  <h2 class="main-hd pull-left">\n    <span class="settings-breadcrumb-parent"><a ng-href="{{ ctrl.owner.groupsIndexLink }}" target="_self">Groups</a> > </span>\n    <span class="main-hd-truncate">{{ ctrl.group.name }}</span>\n    <span uib-dropdown class="dropdown settings-header-dropdown" ng-if="ctrl.group._resource.hasForm(\'edit\')">\n      <span uib-dropdown-toggle class="dropdown-toggle">\n        <i class="align-md-icon icon-settings-mini sm-icon"></i>\n      </span>\n      <ul uib-dropdown-menu class="dropdown-menu">\n        <li><a href="#" rename-group group="ctrl.group" owner="ctrl.owner">Rename</a></li>\n        <li>\n          <a href="#"\n             confirm-modal="Are you sure you want to delete this group?"\n             confirm-modal-title="Delete Group?"\n             confirm-modal-button-confirm="Delete"\n             confirm-modal-button-class="btn-danger"\n             confirm-modal-on-confirm="ctrl.destroyGroup()">\n            Delete\n          </a>\n        </li>\n      </ul>\n    </span>\n  </h2>\n  <a href="#"\n    ng-if="ctrl.group._resource.hasEmbedded(\'new_group_membership\')"\n    class="btn btn-lg btn-filled-primary pull-right"\n    edit-group-membership\n    group="ctrl.group"\n    owner="ctrl.owner"\n    account="ctrl.account">Add Members</a>\n</div>\n<div class="well">\n  <div class="group-member-filter">\n    <input\n      type="text"\n      ng-if="ctrl.memberships.length !== 0 && ctrl.membershipsLoaded"\n      class="form-control form-control-block next-form-control icon-filter-icon form-control-filter"\n      autocomplete="off"\n      placeholder="Find members..."\n      ng-change="ctrl.handleQueryChanged()"\n      ng-model-options="{ debounce: 100 }"\n      ng-model="ctrl.query" />\n  </div>\n  <div class="settings-loading icon-logo-animated" ng-if="!ctrl.membershipsLoaded"></div>\n  <div class="empty-msg" ng-if="!ctrl.memberships.length && ctrl.membershipsLoaded">\n    <img class="group-member-empty-image" ng-src="{{ ctrl.emptyImageSrc() }}" />\n    <h3 class="group-member-empty-header">This group is about ready to roll</h3>\n    <p class="group-member-empty-message">Add members to organize people into familiar teams or workgroups.</p>\n  </div>\n  <div class="empty-msg" ng-if="!ctrl.searchMemberships.length && ctrl.searchMembershipsLoaded && ctrl.query">\n    <img class="group-member-empty-image" ng-src="{{ ctrl.notFoundImageSrc() }}" />\n    <h3 class="group-member-empty-header">Hmmm...looks like there are no matching members</h3>\n    <p class="group-member-empty-message">Try using a different filter.</p>\n  </div>\n  <ul class="group-member-list">\n    <li ng-repeat="membership in ctrl.memberships" class="group-member-list-item" ng-if="!ctrl.query">\n      <mode-avatar options="membership.accountMember.avatar" size="35" class="member-avatar"></mode-avatar>\n      <div class="member-details">\n        <div class="primary-content">{{ membership.accountMember.displayName() }}</div>\n      </div>\n      <div class="member-action" ng-if="membership._resource.hasForm(\'destroy\')">\n        <a href="#" class="btn btn-lg btn-danger" ng-click="ctrl.removeMembership(membership)">Remove</a>\n      </div>\n    </li>\n    <li ng-repeat="membership in ctrl.searchMemberships" class="group-member-list-item" ng-if="ctrl.query">\n      <mode-avatar options="membership.avatar" size="35" class="member-avatar"></mode-avatar>\n      <div class="member-details">\n        <div class="primary-content">{{ membership.name }}</div>\n      </div>\n      <div class="member-action" ng-if="ctrl.group._resource.hasEmbedded(\'new_group_membership\')">\n        <a href="#" class="btn btn-lg btn-danger" ng-click="ctrl.removeSearchMembership(membership)">Remove</a>\n      </div>\n    </li>\n  </ul>\n</div>\n',controller:function(){function GroupShowController(e,t,n,r,o,i,a,l,s,c){this.$scope=e,this.AccountModel=t,this.$log=n,this.GroupModel=r,this.GroupMembershipModel=o,this.$q=i,this.ModeCollection=a,this.AlertService=l,this.Search=s,this.AssetService=c}return GroupShowController.prototype.$onInit=function(){var e=this;this.initEmptyMemberships(),this.membershipsLoaded=!1,this.getOwnerAndAccount().then(this.getGroup.bind(this)).then(this.getGroupMemberships.bind(this)).then(this.watchMemberships.bind(this)).then(this.buildMemberships.bind(this)).catch(function(t){e.groupError=t,e.$log.warn("Error getting groups",t),e.finishMemberships()})},GroupShowController.prototype.initEmptyMemberships=function(){this.memberships=[],this.clearSearchMemberships()},GroupShowController.prototype.finishMemberships=function(){this.membershipsLoaded=!0},GroupShowController.prototype.getOwnerAndAccount=function(){var e=this.groupAccount?this.groupAccount:$("meta[name=owner-username]").attr("content"),t=$("meta[name=current-username]").attr("content");return this.$q.all([this.AccountModel.find({username:e,useEntryPath:!0,refresh:!0,includes:["new_group"]}),this.AccountModel.find({username:t,useEntryPath:!0})]).then(this.$q.spread(this.saveOwnerAndAccount.bind(this)))},GroupShowController.prototype.saveOwnerAndAccount=function(e,t){return this.owner=e,this.account=t,e},GroupShowController.prototype.getGroup=function(e){return!this.group&&this.groupToken?this.GroupModel.find({account:this.owner.username,token:this.groupToken,includes:"new_group_membership"}):this.group},GroupShowController.prototype.getGroupMemberships=function(e){return this.group=e,e.groupMemberships({includes:{group_memberships:"member"}})},GroupShowController.prototype.watchMemberships=function(e){return this.membershipsCollection=e,e.watch(this.$scope,this.buildMemberships.bind(this)),e.elements()},GroupShowController.prototype.buildMemberships=function(e){var t=this;return this.GroupMembershipModel.buildMembershipsWithAccount(e).then(function(e){t.memberships=e,t.finishMemberships()})},GroupShowController.prototype.removeMembership=function(e){var t=this;e.destroy().then(function(){t.memberships=t.memberships.filter(function(t){return t.member_token!==e.member_token}),t.searchMemberships=t.searchMemberships.filter(function(t){return t.token!==e.member_token}),t.AlertService.success("Removed user")}).catch(function(){t.AlertService.error("Could not remove user")})},GroupShowController.prototype.removeSearchMembership=function(e){var t=this;this.group.findMembership(e.objectID).then(function(n){n?t.removeMembership(n):(t.searchMemberships=t.searchMemberships.filter(function(t){return t.token!==e.token}),t.AlertService.success("Removed user"))})},GroupShowController.prototype.destroyGroup=function(){var e=this;this.group.destroy().then(function(){return window.location.href=e.owner.groupsIndexLink}).catch(function(){return e.AlertService.error("Could not delete group")})},GroupShowController.prototype.handleQueryChanged=function(){if(this.query){this.searchMembershipsLoaded=!1;var e={query:this.query,indexes:["user"],perPage:20,clearCache:!0,filters:"organization_"+this.owner.token+",group_"+this.group.token};this.Search.query(e).then(this.handleSearchSuccess.bind(this)).catch(this.handleSearchError.bind(this))}else this.clearSearchMemberships()},GroupShowController.prototype.handleSearchSuccess=function(e){this.searchMemberships=e.user||[],this.searchMembershipsLoaded=!0},GroupShowController.prototype.handleSearchError=function(){this.clearSearchMemberships(),this.finishSearchMemberships()},GroupShowController.prototype.clearSearchMemberships=function(){this.searchMemberships=[]},GroupShowController.prototype.finishSearchMemberships=function(){this.searchMembershipsLoaded=!0},GroupShowController.prototype.emptyImageSrc=function(){return this.AssetService.emptyGroups},GroupShowController.prototype.notFoundImageSrc=function(){return this.AssetService.noFilterGroups},GroupShowController.$inject=["$scope","AccountModel","$log","GroupModel","GroupMembershipModel","$q","ModeCollection","AlertService","Search","AssetService"],GroupShowController}(),controllerAs:"ctrl"};r.module("mode.components").component("groupShow",mt);var ft={bindings:{groups:"<"},template:'\n<ul class="group-list">\n  <li ng-repeat="group in ctrl.groups track by group.token" class="group-list-item">\n    <a ng-href="{{ group.webLink }}" class="group-list-link" target="_self">\n      <div class="group-list-header">\n        <div class="group-list-content">\n          <div class="group-list-title">{{ group.name }}</div>\n          <div class="group-list-details"\n               ng-pluralize\n               count="group.member_count"\n               when="{\'0\': \'{} Members\',\'one\': \'{} Member\',\'other\': \'{} Members\'}">\n          </div>\n        </div>\n        <div class="group-list-action">\n          <span class="btn btn-secondary btn-lg">Manage</span>\n        </div>\n      </div>\n      <div class="group-list-body">\n        <ul class="group-facepile-list">\n          <li class="group-facepile-list-item" ng-repeat="membership in group.facepileMembers">\n            <mode-avatar class="member-avatar" options="membership.accountMember.avatar" size="22"></mode-avatar>\n            <div class="member-name">{{ membership.accountMember.name }}</div>\n          </li>\n          <li class="group-facepile-list-item" ng-if="group.member_count > 5">+ {{ group.member_count - 5 }} more</li>\n        </ul>\n      </div>\n    </a>\n  </li>\n  <li ng-repeat="i in [1,2,3,4,5,6]" class="group-list-item after-empty"></li>\n</ul>\n',controller:function(){return function(){}}(),controllerAs:"ctrl"};r.module("mode.components").component("groupList",ft);var Ct={bindings:{group:"<",size:"@"},template:'\n<div class="group-facepile-component" style="width:{{ ctrl.size }}px;height:{{ ctrl.size }}px;">\n  <div class="mode-avatar mode-avatar-initials mode-icon-{{ ctrl.size }} facepile-initials">{{ ctrl.initial }}</div>\n  <div class="mode-avatar mode-avatar-initials mode-icon-{{ ctrl.faceSize }} facepile-1"></div>\n  <div class="mode-avatar mode-avatar-initials mode-icon-{{ ctrl.faceSize }} facepile-2"></div>\n  <div class="mode-avatar mode-avatar-initials mode-icon-{{ ctrl.faceSize }} facepile-3"></div>\n  <div class="mode-avatar mode-avatar-initials mode-icon-{{ ctrl.faceSize }} facepile-4"></div>\n</div>\n',controller:function(){function GroupFacepileController(){}return GroupFacepileController.prototype.$onInit=function(){this.group.name.split(" ");this.initial=this.group.name?this.group.name.charAt(0).toUpperCase():"?",this.faceSize=2*Math.ceil(.3*parseInt(this.size,10))},GroupFacepileController.$inject=[],GroupFacepileController}(),controllerAs:"ctrl"};r.module("mode.components").component("groupFacepile",Ct);var yt=n("DPDX"),bt=n.n(yt),vt=function(){function GroupMembershipModalController(){}return GroupMembershipModalController.$inject=[],GroupMembershipModalController}(),It=function(e){return{restrict:"A",scope:{group:"<",owner:"<",account:"<"},link:function(t,n,r){n.on("click.groupMembership",function(n){e.open({group:t.group,owner:t.owner,account:t.account},{controller:vt,controllerAs:"ctrl",bindToController:!0,template:bt.a})}),t.$on("$destroy",function(){return n.off("click.groupMembership")})}}};It.$inject=["ModalService"],r.module("mode.components").directive("editGroupMembership",It);var St=n("kOF2"),wt=n.n(St),At=function(){function SpaceMembershipController(e,t,n,r,o,i){this.$scope=e,this.$q=t,this.$log=n,this.Search=r,this.SpaceMembershipModel=o,this.AlertService=i}return SpaceMembershipController.prototype.$onInit=function(){this.getMemberships().then(this.watchMemberships.bind(this)).then(this.buildMemberships.bind(this)).then(this.clearSearch.bind(this)).catch(function(e){})},SpaceMembershipController.prototype.getMemberships=function(){return this.space.spaceMemberships({includes:{space_memberships:"member"}})},SpaceMembershipController.prototype.getMembershipModel=function(){return this.SpaceMembershipModel},SpaceMembershipController.prototype.watchMemberships=function(e){return this.membershipsCollection=e,e.watch(this.$scope,this.buildMemberships.bind(this)),e.elements()},SpaceMembershipController.prototype.buildMemberships=function(e){var t=this;return this.getMembershipModel().buildMembershipsWithAccount(e).then(this.resetMembershipsInSearch.bind(this)).then(function(e){t.memberships=e})},SpaceMembershipController.prototype.includeMemberships=function(e){return e.membership=null,this.memberships.forEach(function(t){t.email!==e.email&&t.member_token!==e.token||(e.membership=t,t.inSearch=!0)}),e},SpaceMembershipController.prototype.resetMembershipsInSearch=function(e){var t=this;return e&&e.length&&e.forEach(function(e){t.users&&y.find(t.users,function(t){return t.email===e.email||t.token===e.member_token})?e.inSearch=!0:e.inSearch=!1}),e},SpaceMembershipController.prototype.isCurrentUser=function(e){return function(t){return t.email===e.email||t.token===e.token?-1:0}},SpaceMembershipController.prototype.orderByCurrentUser=function(e){return function(t){return t.email===e.email||t.token===e.token?-1:0}},SpaceMembershipController.prototype.orderByGroup=function(){return function(e){return"user_group"===e.objectType?-1:0}},SpaceMembershipController.prototype.queryUsers=function(){this.query?this.executeSearch(this.query):this.clearSearch()},SpaceMembershipController.prototype.clearSearch=function(){this.users=[],this.executeSearch("")},SpaceMembershipController.prototype.getSearchOptions=function(){return{indexes:["userEmail","group"],perPage:20,filters:"(organization_"+this.owner.token+")"}},SpaceMembershipController.prototype.executeSearch=function(e){var t=y.assign({query:e},this.getSearchOptions());this.Search.query(t).then(this.handleSearchSuccess.bind(this)).catch(this.handleSearchError.bind(this))},SpaceMembershipController.prototype.getMembersFromResponse=function(e){if(this.space.openSpace)return e.userEmail.concat(e.group);var t=e.group.filter(function(e){return"custom"===e.groupType});return e.userEmail.concat(t)},SpaceMembershipController.prototype.handleSearchSuccess=function(e){var t=this.getMembersFromResponse(e);this.resetMembershipsInSearch(this.memberships),this.users=this.memberships?t.map(this.includeMemberships.bind(this)):t},SpaceMembershipController.prototype.handleSearchError=function(){},SpaceMembershipController.prototype.createMembership=function(e){return this.SpaceMembershipModel.create({space:this.space.token,params:{"membership.member_token":e.token,"membership.member_type":"user_group"===e.objectType?"UserGroup":"User",includes:["member"]}})},SpaceMembershipController.prototype.insertMembershipModel=function(e){this.SpaceMembershipModel.putLocal(e)},SpaceMembershipController.prototype.toggleMembership=function(e,t){var n=this;if(e){var r="account"===e.member_type?"user":"group";e.destroy().then(function(){n.AlertService.success("Removed "+r),t&&(t.membership=null)}).catch(function(e){n.AlertService.error("Could not remove "+r)})}else{var o="user_group"===t.objectType?"group":"user";this.createMembership(t).then(function(e){n.AlertService.success("Added "+o),t&&(t.membership=e),n.membershipsCollection.insert(e).then(n.insertMembershipModel.bind(n))}).catch(function(e){n.$log.log("error adding user/group",e),n.AlertService.error("Error adding "+o)})}},SpaceMembershipController.$inject=["$scope","$q","$log","Search","SpaceMembershipModel","AlertService"],SpaceMembershipController}(),Mt=At,kt={bindings:{space:"<",owner:"<",account:"<"},template:wt.a,controller:At,controllerAs:"ctrl"};r.module("mode.components").component("spaceMembership",kt);var Tt=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),xt=function(e){function GroupMembershipController(t,n,r,o,i,a,l){var s=e.call(this,t,n,r,o,i,a)||this;return s.$scope=t,s.$q=n,s.$log=r,s.Search=o,s.SpaceMembershipModel=i,s.AlertService=a,s.GroupMembershipModel=l,s}return Tt(GroupMembershipController,e),GroupMembershipController.prototype.getMemberships=function(){return this.group.groupMemberships({includes:{group_memberships:"member"}})},GroupMembershipController.prototype.getMembershipModel=function(){return this.GroupMembershipModel},GroupMembershipController.prototype.isCurrentUser=function(e){return function(e){return 0}},GroupMembershipController.prototype.createMembership=function(e){return this.GroupMembershipModel.create({group:this.group.token,params:{"membership.member_token":e.token,includes:["member"]}})},GroupMembershipController.prototype.getSearchOptions=function(){return{indexes:["userEmail"],perPage:20,filters:"(organization_"+this.owner.token+")"}},GroupMembershipController.prototype.getMembersFromResponse=function(e){return e.userEmail.filter(function(e){return e.username})},GroupMembershipController.prototype.insertMembershipModel=function(e){this.GroupMembershipModel.putLocal(e)},GroupMembershipController.$inject=["$scope","$q","$log","Search","SpaceMembershipModel","AlertService","GroupMembershipModel"],GroupMembershipController}(Mt),Dt={bindings:{group:"<",owner:"<",account:"<"},template:wt.a,controller:xt,controllerAs:"ctrl"};r.module("mode.components").component("groupMembership",Dt);var Lt,Rt=n("lzv4");!function(e){var t=Rt.ModeResourceHelper.isResource;e.isEmailVerified=function(e){return t(e)&&e.email_verified},e.hasRecentlyViewedReports=function(e){return t(e)&&e.hasLink("home_reports_web")},e.hasDefinitions=function(e){return t(e)&&e.hasLink("definitions")},e.hasDiscoverLink=function(e){return t(e)&&e.hasLink("home_discover_web")}}(Lt||(Lt={}));var Nt=n("BP8X"),Et={bindings:{account:"<",organizations:"<",owner:"<",state:"<",view:"<",spaces:"<",datasources:"<",withPlatformHeader:"<"},template:'\n<div class="nav-sidebar dark-sidebar" ng-class="{\'with-platform-header\': ctrl.withPlatformHeader}">\n  <a href="javascript:void(0);" class="mode-header-logo mode-header-no-link navbar-action"><i class="icon-logo"></i></a>\n  <a href="javascript:void(0);" class="mode-header-logo header-sm-logo navbar-action nav-open">\n    <div class="burger-wrapper dark"><div class="burger"></div></div>\n    <i class="icon-logo"></i>\n  </a>\n  <nav-account-menu\n    class="account-menu-dark"\n    account="ctrl.account"\n    organizations="ctrl.organizations"\n    owner="ctrl.owner">\n  </nav-account-menu>\n  <sidebar-top-nav\n    class="sidebar-top-nav-component"\n    selected="ctrl.view"\n    state="ctrl.state"\n    target="ctrl.target"\n    owner="ctrl.owner"\n    account="ctrl.account">\n  </sidebar-top-nav>\n  <div class="sidebar-scroll" ng-class="{\'high-density\': ctrl.owner.user}">\n    <h5 ng-if="!ctrl.owner.user" class="spaces-header">\n      <div class="spaces-header-content">\n        Spaces\n        <a href="{{ ctrl.owner.spacesIndexLink }}"\n          uib-tooltip="Browse all Spaces"\n          tooltip-placement="left"\n          target="{{ ctrl.target }}"\n          class="spaces-action-btn"\n          ng-if="!ctrl.owner.user && ctrl.spaceDirectoryEnabled()">\n          <i class="icon-nav-space-directory"></i>\n        </a>\n      </div>\n    </h5>\n    <sidebar-list list="ctrl.spaces"></sidebar-list>\n    <ul class="report-filter-list">\n      <li ng-repeat="space in ctrl.spaces | limitTo:(ctrl.showAllSpaces ? ctrl.spaces.length : ctrl.spaceLimit)" ng-class="{selected: ctrl.state.token === space.token}">\n        <a href="{{ space.webLink }}" target="{{ ctrl.target }}" class="navbar-action">\n          <div class="report-filter-media"><i class="sidebar-icon {{ space.iconClassName }}"></i></div>\n          <div class="report-filter-content">{{ space.name }}</div>\n          <div class="report-filter-action"></div>\n        </a>\n      </li>\n    </ul>\n    <a href="#" class="filter-show-link" ng-click="ctrl.showAllSpaces = !ctrl.showAllSpaces" ng-if="ctrl.spaceLimit < ctrl.spaces.length">\n      {{ ctrl.spacesMoreText() }}\n    </a>\n\n    <div ng-if="ctrl.definitionsEnabled()">\n      <hr ng-if="ctrl.owner.user" class="community-divider" />\n      <h5 ng-if="!ctrl.owner.user" class="spaces-header">\n        <div class="spaces-header-content">\n          Definitions\n          <a href="{{ ctrl.owner.datasourceIndexLink }}"\n            ng-if="!ctrl.owner.user && ctrl.owner.datasourceIndexLink"\n            uib-tooltip="Manage Connections"\n            tooltip-placement="left"\n            target="_self"\n            class="spaces-action-btn">\n            <i class="icon-nav-data-settings"></i>\n          </a>\n        </div>\n      </h5>\n      <ul class="report-filter-list">\n        <li ng-repeat="source in ctrl.datasources | limitTo:(ctrl.showAllDatasources ? ctrl.datasources.length : ctrl.datasourceLimit)" ng-class="{selected: ctrl.state.datasourceToken === source.token}">\n          <a href="{{ctrl.getDatasourceLink(source)}}" target="{{ ctrl.target }}" class="navbar-action">\n            <div class="report-filter-media"><i class="sm-icon icon-db-mini-gray"></i></div>\n            <div class="report-filter-content">{{ source.fullname }}</div>\n            <div class="report-filter-action dropdown navbar-dropdown" uib-dropdown ng-show="source.settingsLink">\n                <span class="dropdown-toggle report-filter-action-icon" uib-dropdown-toggle>\n                   <i class="icon-menu-dots-gray align-md-icon"></i>\n                </span>\n                <ul uib-dropdown-menu class="dropdown-menu pull-right">\n                  <li>\n                    <button class="button-link" ng-click="ctrl.gotoDatasourceSettings(source, $event);">Settings&hellip;</button>\n                  </li>\n                </ul>\n            </div>\n          </a>\n        </li>\n      </ul>\n      <a href="#" class="filter-show-link" ng-click="ctrl.showAllDatasources = !ctrl.showAllDatasources" ng-if="ctrl.datasourceLimit < ctrl.datasources.length">\n        {{ ctrl.datasourceMoreText() }}\n      </a>\n    </div>\n  </div>\n</div>\n',controller:function(){function NavSidebarController(e,t,n,r,o,i){this.$scope=e,this.$log=t,this.$state=n,this.store=r,this.SpaceModel=o,this.DataLayerFlipperService=i}return NavSidebarController.prototype.$onInit=function(){this.spaceLimit=8,this.datasourceLimit=4,this.target=this.state?"":"_self",this.store.connectPath(this.$scope,"home.totalSpaceCount",this.updateSpaceCount.bind(this))},NavSidebarController.prototype.getDatasourceLink=function(e){return e.homeLink?e.homeLink:this.owner.publicDSLink},NavSidebarController.prototype.spacesMoreText=function(){return this.showAllSpaces?"Hide":"Show "+(this.spaces.length-this.spaceLimit)+" more"},NavSidebarController.prototype.datasourceMoreText=function(){return this.showAllDatasources?"Hide":"Show "+(this.datasources.length-this.datasourceLimit)+" more"},NavSidebarController.prototype.updateSpaceCount=function(e){this.spaceCount=e},NavSidebarController.prototype.gotoDatasourceSettings=function(e,t){t.stopPropagation(),t.preventDefault(),window.location.href=e.settingsLink},NavSidebarController.prototype.handleCreatedSpace=function(e){this.store.dispatch(Je.c(e)),this.$state.go("root.spaces.space",{spaceId:e.token,ownerId:this.owner.username})},NavSidebarController.prototype.definitionsEnabled=function(){return Lt.hasDefinitions(this.owner._resource)},NavSidebarController.prototype.spaceDirectoryEnabled=function(){return Nt.b.hasSpaceDirectory(this.owner&&this.owner._resource)},NavSidebarController.$inject=["$scope","$log","$state","StoreService","SpaceModel","DataLayerFlipperService"],NavSidebarController}(),controllerAs:"ctrl"};r.module("mode.components").component("navSidebar",Et);var jt={bindings:{selected:"<",state:"<",account:"<",owner:"<",target:"<"},template:'\n<ul class="report-filter-list">\n  <li ng-if="ctrl.discoverEnabled()"\n      ng-class="{selected: ctrl.state.name === \'discover\'}">\n    <a ng-href="{{ ctrl.owner.discoverLink }}" target="{{ ctrl.target }}" class="navbar-action">\n      <div class="report-filter-media"><i class="icon-nav-bar-discover-gray sm-icon"></i></div>\n      <div class="report-filter-content">Discover</div>\n      <div class="report-filter-action"></div>\n    </a>\n  </li>\n  <li ng-class="{selected: ctrl.state.name === \'starred\'}">\n    <a ng-href="{{ ctrl.owner.starredLink }}" target="{{ ctrl.target }}" class="navbar-action">\n      <div class="report-filter-media"><i class="icon-inline-star-default sm-icon"></i></div>\n      <div class="report-filter-content">Starred</div>\n      <div class="report-filter-action"></div>\n    </a>\n  </li>\n  <li ng-if="ctrl.recentlyViewedIsEnabled()"\n      ng-class="{selected: ctrl.state.name === \'recent\'}">\n    <a ng-href="{{ ctrl.owner.reportsLink }}" target="{{ ctrl.target }}" class="navbar-action">\n      <div class="report-filter-media"><i class="icon-nav-bar-recent-gray sm-icon"></i></div>\n      <div class="report-filter-content">Recently Viewed</div>\n      <div class="report-filter-action"></div>\n    </a>\n  </li>\n  <li ng-class="{selected: ctrl.state.name === \'mywork\'}">\n    <a ng-href="{{ ctrl.owner.searchLink }}" target="{{ ctrl.target }}" class="navbar-action">\n      <div class="report-filter-media"><i class="icon-nav-my-work sm-icon"></i></div>\n      <div class="report-filter-content">My Work</div>\n      <div class="report-filter-action"></div>\n    </a>\n  </li>\n</ul>\n',controller:function(){function SidebarTopNavController(){}return SidebarTopNavController.prototype.recentlyViewedIsEnabled=function(){return Lt.hasRecentlyViewedReports(this.owner&&this.owner._resource)},SidebarTopNavController.prototype.discoverEnabled=function(){return Lt.hasDiscoverLink(this.owner&&this.owner._resource)},SidebarTopNavController}(),controllerAs:"ctrl"};r.module("mode.components").component("sidebarTopNav",jt);var Ot=n("cvWV"),Pt=n.n(Ot);function orgSortWithCurrent(e){return function(t,n){return t.token===e?-1:n.token===e?1:t.name>n.name?1:t.name<n.name?-1:0}}var Ft=function(){function ContextModalController(e){this.$window=e,this.studioText="Before you connect a database, you'll need to create a free Mode Studio workspace. This will let you query and share data privately with others. You can return to the Mode Community at any point.",this.orgText="Organizations allow companies and other groups to share data and analysis privately.\n\nDatabases connected to organizations can be queried by everyone in the organization. For more information on connecting databases to your organization, see Connecting to Databases.\n\nReports, Definitions, and Spaces created using organization databases can be shared and run by everyone in the organization, depending on how permissions are set by the organization's admin."}return ContextModalController.prototype.gotoNewOrganization=function(){this.$window.location.href=this.account.newOrganizationLink,this.$close()},ContextModalController.$inject=["$window"],ContextModalController}(),zt=function(e,t,n){return{restrict:"A",scope:{orgs:"<",account:"<",homeName:"@",currentContext:"@"},link:function(r,o,i){if(i.noApp){var a=$("meta[name=current-username]").attr("content");t.find({username:a,useEntryPath:!0,includes:["organizations"]}).then(function(e){return r.account=e,e.organizations()}).then(n.elements).then(function(e){r.orgs=e})}o.on("click.context",function(t){i.evented||(t.preventDefault(),t.stopPropagation()),r.orgs.sort(orgSortWithCurrent(i.currentContext));e.open({homeName:r.homeName+"Link",account:r.account,organizations:r.orgs,context:i.currentContext},{template:Pt.a,controller:Ft,controllerAs:"ctrl",bindToController:!0})}),r.$on("$destroy",function(){return o.off("click.context")})}}};zt.$inject=["ModalService","AccountModel","ModeCollection"],r.module("mode.components").directive("contextModal",zt);var _t,$t=n("6NYQ"),Bt=n.n($t),Vt=n("DMbl");!function(e){var t=Rt.ModeResourceHelper.isResource;function hasCsvLink(e){return t(e)&&e.hasLink("content")}function hasCloneLink(e){return t(e)&&e.hasLink("clone")}e.hasCsvLink=hasCsvLink,e.getCsvLink=function(e){return hasCsvLink(e)&&e.links("content").href||""},e.canEmbed=function(e){return t(e)&&e.hasLink("embed")},e.hasCloneLink=hasCloneLink,e.cloneLink=function(e){return hasCloneLink(e)&&e.links("clone").href||""}}(_t||(_t={}));var Ut,Zt=_t.cloneLink,Gt=_t.hasCloneLink;!function(e){e.Direct="Direct",e.DirectNoContext="DirectNoContext",e.Interactive="Interactive"}(Ut||(Ut={}));var Yt=function(e,t,n,r,o){return{restrict:"A",scope:{orgs:"<",account:"<",currentContext:"@",clonePath:"@",reportRun:"<",reportSpace:"<",loggedOut:"<",owner:"<"},link:function(i,a,l){if(l.noApp){var s=$("meta[name=current-username]").attr("content");t.find({username:s,useEntryPath:!0,includes:["organizations"]}).then(function(e){return i.account=e,e.organizations()}).then(n.elements).then(function(e){i.orgs=e})}var c=$("meta[name=csrf-param]").attr("content"),d=$("meta[name=csrf-token]").attr("content");a.on("click.context",function(t){function getClonePath(){var e=i.reportRun&&i.reportRun._resource;return Gt(e)?Zt(e):i.clonePath}l.evented||(t.preventDefault(),t.stopPropagation()),function(t){switch(t){case Ut.Direct:r.formSubmit(getClonePath(),{target:"_blank",fields:{owner_id:i.owner.id,authenticity_token:d}});break;case Ut.DirectNoContext:r.formSubmit(getClonePath(),{target:"_blank",fields:{authenticity_token:d}});break;case Ut.Interactive:n=i.orgs.filter(function(e){return!e.user}).sort(orgSortWithCurrent(l.currentContext)),e.open({csrfParam:c,csrfToken:d,account:i.account,organizations:n,context:l.currentContext,clonePath:getClonePath()},{template:Bt.a});break;default:o.error("Clone Error: No method selected")}var n}(function(){var e=null,t=i.reportSpace&&i.reportSpace._resource,n=i.orgs&&i.owner&&i.orgs.some(function(e){return e.username===i.owner.username});t||o.error("Clone Error: report space resource not available");n&&!Vt.a.isCommunitySpace(t)?e=Ut.Direct:i.loggedOut?e=Ut.DirectNoContext:i.orgs&&i.account?e=Ut.Interactive:o.error("Clone Error: account or account orgs not provided");return e}())}),i.$on("$destroy",function(){return a.off("click.context")})}}};Yt.$inject=["ModalService","AccountModel","ModeCollection","Utils","$log"],r.module("mode.components").directive("cloneModal",Yt);var Qt=n("2lJM"),Ht=n.n(Qt),Wt=n("smPo"),qt=n.n(Wt),Jt=function(){function CreateSpaceModalController(e,t){this.SpaceModel=t,this.space=e.owner.modelFromForm_spaces(),e.name&&(this.space.name=e.name),e.existingSpace&&(this.space.name=e.existingSpace.name,this.space.description=e.existingSpace.description)}return CreateSpaceModalController.prototype.createSpace=function(){this.$close(this.space)},CreateSpaceModalController.$inject=["$scope","SpaceModel"],CreateSpaceModalController}(),Xt=function(){function SpaceMembershipModalController(){}return SpaceMembershipModalController.$inject=[],SpaceMembershipModalController}(),Kt=function(e,t){return{restrict:"A",scope:{owner:"<",account:"<",name:"@?",onCreate:"&"},link:function(n,r,o){function handleRestrictedSpace(t){return e.open({space:t,owner:n.owner,account:n.account},{controller:Xt,controllerAs:"ctrl",bindToController:!0,template:qt.a}).closed.then(function(){return t}).catch(function(){})}function selectSpace(e){n.onCreate&&n.onCreate({$space:e})}function saveSpace(e){var r=e.toParams();return r.includes=["new_space_membership"],t.create({account:n.owner.username,params:r})}r.on("click.context",function(t){t.preventDefault(),t.stopPropagation(),e.open({owner:n.owner,name:n.name},{controller:Jt,controllerAs:"ctrl",bindToController:!0,template:Ht.a}).result.then(saveSpace).then(handleRestrictedSpace).then(selectSpace)}),n.$on("$destroy",function(){return r.off("click.context")})}}};Kt.$inject=["ModalService","SpaceModel"],r.module("mode.components").directive("createSpace",Kt);var en=function(e,t,n,r){return{restrict:"A",scope:{space:"<",owner:"<"},link:function(o,i,a){i.on("click.context",function(i){e.open({existingSpace:o.space,owner:o.owner},{controller:Jt,controllerAs:"ctrl",bindToController:!0,template:Ht.a}).result.then(function(e){o.space.name=e.name,o.space.description=e.description,t.update(o.space).then(function(){r.dispatch({type:Je.a.RenameSpace,space:e}),n.success("Renamed Space")}).catch(function(){return n.error("Failed to rename Space")})}).catch(function(){})}),o.$on("$destroy",function(){return i.off("click.context")})}}};en.$inject=["ModalService","SpaceModel","AlertService","StoreService"],r.module("mode.components").directive("renameSpace",en);var tn=function(e){return{require:"ngModel",link:function(t,n,r,o){o.$asyncValidators.spaceName=(function(t,n,r,i){o.$setValidity("networkError",!0);var a=e.defer();return o.$isEmpty(r)||n&&r===n.name?a.resolve():t._resource.hasLink("validate_space_name")?t._resource.links("validate_space_name").$follow({"space[name]":r}).then(function(e){e.valid?a.resolve():a.reject(new Error("space "+r+" is invalid"))}).catch(function(e){o.$setValidity("networkError",!1),a.reject(new Error("Error validating space name"))}):a.resolve(),a.promise}).bind(null,t.ctrl.owner,t.ctrl.existingSpace)}}};tn.$inject=["$q"],r.module("mode.components").directive("spaceNameValidation",tn);var nn=n("8U7d"),rn=n.n(nn),on=function(){function MoveSpaceModalController(e,t,n,r){var o=this;this.FeatureToggleService=e,this.$scope=t,this.$state=n,this.AnalyticsService=r,this.spaces$=new V.BehaviorSubject(void 0),this.$scope.$watch("ctrl.spaces",function(e){return o.spaces$.next(e)})}return MoveSpaceModalController.prototype.$onInit=function(){var e=this,t="";this.$state.includes("root.spaces.space")?t="space":this.$state.includes("root")?t="home":this.$state.includes("application.reports.edit")&&(t="report_editor"),this.upsellEnabled$=this.FeatureToggleService.featureBusinessUpsellEnabled$,this.spaceUpsellEnabled$=this.upsellEnabled$.combineLatest(this.spaces$).map(function(e){var t=e[0],n=e[1];return t&&n&&n.length>0}),this.emptyStateUpsellEnabled$=this.upsellEnabled$.combineLatest(this.spaces$).map(function(e){var t=e[0],n=e[1];return t&&n&&0===n.length}),this.spaceUpsellEnabled$.filter(function(e){return void 0!==e}).first().subscribe(function(n){n&&e.AnalyticsService.run(ee.c.Track,ee.d,{product_context:t,product_subcontext:"report_move_modal",interaction_type:"view",upsell_element_id:3,organization_id:e.owner.id})}),this.emptyStateUpsellEnabled$.filter(function(e){return void 0!==e}).first().subscribe(function(n){n&&e.AnalyticsService.run(ee.c.Track,ee.d,{product_context:t,product_subcontext:"report_move_modal",interaction_type:"view",upsell_element_id:4,organization_id:e.owner.id})})},MoveSpaceModalController.prototype.trialLink=function(){var e=Nt.b.getTrialLink(this.owner&&this.owner._resource);return e?e+"?trk_element_id=3":e},MoveSpaceModalController.prototype.spacesAreSearchable=function(){return this.spaces&&this.spaces.length>4},MoveSpaceModalController.prototype.canCreateSpace=function(){return Vt.a.canCreate(this.currSpace&&this.currSpace._resource)},MoveSpaceModalController.prototype.moveReport=function(e){this.$close({$space:e,$noMove:!0})},MoveSpaceModalController.$inject=["FeatureToggleService","$scope","$state","AnalyticsService"],MoveSpaceModalController}(),an=function(e,t,n,r,o){return{restrict:"A",scope:{report:"<",owner:"<",account:"<",onMove:"&",onMoveToSpace:"&",onReportSpaceUpdate:"&?"},link:function(i,a,l){var s=this;function nonPrivateCommunityIfPublic(e){return"private"!==e.space_type&&("community"!==e.space_type||!i.report.run_privately)&&e.token!==i.report.space_token}a.on("click.moveSpace",function(a){i.owner.allSpaces({refresh:!0}).then(o.elements).then((function(o){var a=o.filter(nonPrivateCommunityIfPublic),l=y.find(o,function(e){return e.token===i.report.space_token});e.open({spaces:a,owner:i.owner,account:i.account,currSpace:l,report:i.report},{controller:on,controllerAs:"ctrl",bindToController:!0,template:rn.a}).result.then(function(e){var o=e.$space,a=!e.$noMove;i.onReportSpaceUpdate?i.onReportSpaceUpdate({$space:o}):(i.report.space_token=o.token,t.update(i.report).then(function(e){n.success("Report moved"),l&&l.reports().then(function(t){t.remove(i.report),i.onMove({$space:o,$report:e._resource}),!a&&i.onMoveToSpace({$space:o})})}).catch(function(e){n.error("Could not move report"),r.log("error saving report",e)}))}).catch(function(){})}).bind(s))}),i.$on("$destroy",function(){return a.off("click.moveSpace")})}}};an.$inject=["ModalService","ReportModel","AlertService","$log","ModeCollection"],r.module("mode.components").directive("moveSpace",an);var ln=n("ZC2I"),sn=n.n(ln);var cn=function(e,t,n,r,o){return{restrict:"A",scope:{report:"<",space:"<",owner:"<",account:"<",onMoveToSpace:"&"},link:function(i,a,l){var s=this;a.on("click.shortcutSpace",function(a){o.all([i.report.spaceLinks({refresh:!0}),i.owner.allSpaces({refresh:!0})]).then(o.spread((function(a,l){o.all([a.elements(),l.elements()]).then(o.spread((function(o,a){var l=i.space?i.space.token:"",s=a.filter((function(e,t){return t.openSpace&&t.token!==e}).bind(this,l));e.open({spaces:s,owner:i.owner,account:i.account,currSpace:i.space},{controller:on,controllerAs:"ctrl",bindToController:!0,template:sn.a}).result.then((function(e,o){var a=o.$space,l=o.$noMove;i.report.space_token=a.token,y.find(e,function(e){return e.space_token===a.token})?(n.success("Shortcut created"),l&&i.onMoveToSpace({$space:a})):t.create({report:i.report.token,params:{"space_link.space_token":a.token,includes:["space"]}}).then(function(e){n.success("Shortcut created"),l&&i.onMoveToSpace({$space:a})}).catch(function(e){r.log("error adding space",e),n.error("Failed to create shortcut")})}).bind(this,o)).catch(function(){})}).bind(this)))}).bind(s)))}),i.$on("$destroy",function(){return a.off("click.shortcutSpace")})}}};cn.$inject=["ModalService","SpaceLinkModel","AlertService","$log","$q"],r.module("mode.components").directive("shortcutSpace",cn);var dn=function(e,t,n,r){return{restrict:"A",scope:{report:"<",space:"<",onRemove:"&"},link:function(e,r,o){r.on("click.removeShortcut",function(r){e.report.spaceLinks({refresh:!0}).then(t.elements).then(function(t){var r=y.find(t,function(t){return t.space_token===e.space.token});r?r.destroy().then(function(){n.success("Removed shortcut"),e.onRemove()}):n.error("Could not remove shortcut")})}),e.$on("$destroy",function(){return r.off("click.removeShortcut")})}}};dn.$inject=["ModalService","ModeCollection","AlertService","$log"],r.module("mode.components").directive("removeShortcutSpace",dn);var un=n("h5Gf"),pn=n.n(un),hn=function(e,t){return{restrict:"A",link:function(t,n){n.on("click.rename",function(n){n.preventDefault();var r={name:t.renameModal};e.open({model:r,title:t.renameModalTitle,confirmText:t.confirmModalButtonConfirm,cancelText:t.confirmModalButtonCancel,confirmButtonClass:t.confirmModalButtonClass},{template:pn.a}).result.then(function(){return t.renameModalOnConfirm({$value:r.name})}).catch(function(){})}),t.$on("$destroy",function(){return n.off("click.rename")})},scope:{renameModal:"<",renameModalTitle:"@",renameModalOnConfirm:"&",confirmModalButtonConfirm:"@?",confirmModalButtonCancel:"@?",confirmModalButtonClass:"@?"}}};hn.$inject=["ModalService","$sce"],r.module("mode.components").directive("renameModal",hn);var gn=function(e){return{scope:{focusObserver:"=?"},link:function(t,n,r){r.focusObserver?t.$watch("focusObserver",function(t){"boolean"==typeof t&&t&&e(function(){n.focus().select()},0,!1)}):e(function(){n.focus().select()},0,!1)}}};gn.$inject=["$timeout"],r.module("mode.components").directive("focusMe",gn);var mn=n("KVso"),fn=n.n(mn),Cn=function(){function CreateGroupModalController(e){this.group=e.owner.modelFromForm_groups(),e.name&&(this.group.name=e.name),e.existingGroup&&(this.group.name=e.existingGroup.name)}return CreateGroupModalController.prototype.createGroup=function(){this.$close(this.group)},CreateGroupModalController.$inject=["$scope"],CreateGroupModalController}(),yn=function(e,t,n,r,o){return{restrict:"A",scope:{owner:"<?",account:"<?",name:"@?",onCreate:"&",redirectOnCreate:"@",groupAccount:"@?"},link:function(i,a,l){var s=this;function handleGroupMemberships(t){return e.open({group:t,owner:i.owner,account:i.account},{controller:vt,controllerAs:"ctrl",bindToController:!0,template:bt.a}).result.then(function(){return t}).catch(function(){})}function selectGroup(e){i.redirectOnCreate||(t.refresh(e),r.success("Group created"))}function saveGroup(e){var n={"user_group.name":e.name,includes:["new_group_membership"]};return t.create({account:i.owner.username,params:n})}function handleModal(){e.open({owner:i.owner,name:i.name},{controller:Cn,controllerAs:"ctrl",bindToController:!0,template:fn.a}).result.then(saveGroup).then(handleGroupMemberships).then(selectGroup).catch(function(){})}function getOwnerAndAccount(){var e=i.groupAccount?i.groupAccount:$("meta[name=owner-username]").attr("content"),t=$("meta[name=current-username]").attr("content");return o.all([n.find({username:e,useEntryPath:!0,includes:["new_group"],refresh:!0,cacheBust:"createGroup"}),n.find({username:t,useEntryPath:!0})]).then(o.spread((function(e,t){return i.owner=e,i.account=t,e}).bind(this)))}a.on("click.context",function(e){e.preventDefault(),e.stopPropagation(),i.owner?handleModal():getOwnerAndAccount().then(handleModal.bind(s))}),i.$on("$destroy",function(){return a.off("click.createGroup")})}}};yn.$inject=["ModalService","GroupModel","AccountModel","AlertService","$q"],r.module("mode.components").directive("createGroup",yn);var bn=function(e,t,n){return{restrict:"A",scope:{group:"<",owner:"<"},link:function(r,o,i){o.on("click.context",function(o){e.open({existingGroup:r.group,owner:r.owner},{controller:Cn,controllerAs:"ctrl",bindToController:!0,template:fn.a}).result.then(function(e){t.update(r.group,{"user_group.name":e.name}).then(function(){r.group.name=e.name,n.success("Renamed Group")}).catch(function(){return n.error("Failed to rename Group")})}).catch(function(){})}),r.$on("$destroy",function(){return o.off("click.renameGroup")})}}};bn.$inject=["ModalService","GroupModel","AlertService"],r.module("mode.components").directive("renameGroup",bn);var vn=function(e){return{scope:{halValidation:"<",halPropertyPath:"@",halCurrent:"@"},require:"ngModel",link:function(t,n,r,o){var i=Object(y.debounce)(function(e,n){var r,i=t.halPropertyPath.lastIndexOf("."),a=t.halPropertyPath.replace(".","_"),l=t.halPropertyPath.substring(0,i)+"["+t.halPropertyPath.substring(i+1)+"]";t.halValidation._resource.links("validate_"+a).$follow((r={},r[l]=n,r)).then(function(t){o.$setValidity("networkError",!0),o.$setValidity("halFailed",t.valid),t.valid?e.resolve():e.reject(t.errors.name[0])}).catch(function(t){o.$setValidity("networkError",!1),e.reject(new Error("Error validating definition name"))})},350);o.$asyncValidators.halFailed=function(n,r){var a=e.defer();return o.$isEmpty(n)||n===t.halCurrent?(o.$setValidity("networkError",!0),a.resolve()):i(a,n),a.promise}}}};vn.$inject=["$q"],r.module("mode.components").directive("halValidation",vn);var In=n("nWvs"),Sn=n.n(In),wn=n("qhYP"),An=n.n(wn),Mn=function(){function CreateDefinitionModalController(e,t){this.$scope=e,this.LibraryDefinitionModel=t,this.datasourcePickerOpen=!1,this.definition=new t.model,this.definition.dataSourceId=e.datasource.id,e.name&&(this.definition.name=e.name),e.existingDefinition&&(this.definition.name=e.existingDefinition.name,this.definition.description=e.existingSpace.description)}return CreateDefinitionModalController.prototype.createDefinition=function(){this.$close(this.definition)},CreateDefinitionModalController.prototype.toggleDatasourcePicker=function(e){e.stopPropagation(),e.preventDefault(),this.datasourcePickerOpen=!this.datasourcePickerOpen},CreateDefinitionModalController.prototype.closeDatasourcePicker=function(){this.datasourcePickerOpen=!1},CreateDefinitionModalController.prototype.selectDatasource=function(e){this.$scope.datasource=e,this.$scope.current.dataSourceId=this.$scope.datasource.id,this.definition.dataSourceId=this.$scope.datasource.id,this.closeDatasourcePicker()},CreateDefinitionModalController.$inject=["$scope","LibraryDefinitionModel"],CreateDefinitionModalController}(),kn=function(e,t,n,r,o){return{restrict:"A",scope:{owner:"<",account:"<",name:"@?",datasource:"<",datasources:"<",modalConfirm:"&"},link:function(n,r,i){function saveDefinition(e){return e.source="SELECT 1",e.name=n.current.name,e.description=n.current.description,t.create({params:e.toParams(),account:n.owner.username}).catch(function(e){o.error("Error creating definition"),console.error(e)})}n.paywall=!n.datasource.public&&n.owner.isAtDefinitionLimit(),n.datasource=n.datasource||n.datasources[0],n.availableDatasources=Object(y.filter)(n.datasources,{public:n.datasource.public}),r.on("click.context",function(t){(n.current={},n.paywall)?e.open({},{template:An.a}).result.then(function(e){return n.modalConfirm({showContact:e})}):e.open({account:n.owner,current:n.current,datasources:n.availableDatasources,datasource:n.datasource},{controller:Mn,controllerAs:"ctrl",bindToController:!0,template:Sn.a}).result.then(saveDefinition).then(function(e){return n.modalConfirm({$definition:e})})}),n.$on("$destroy",function(){return r.off("click.context")})}}};kn.$inject=["ModalService","LibraryDefinitionModel","StoreService","PermissionService","AlertService"],r.module("mode.components").directive("createDefinition",kn);var Tn=function(e,t,n,r){return{restrict:"A",scope:{definition:"<?renameDefinition",modalTitle:"@",modalConfirm:"&",datasource:"<",datasources:"<",account:"<"},link:function(t,n,o){t.datasource=t.datasource||t.datasources[0],t.availableDatasources=Object(y.filter)(t.datasources,{public:t.datasource.public}),n.on("click.context",function(n){t.current={name:t.definition.name,description:t.definition.description,dataSourceId:t.datasource.id},e.open({current:t.current,rename:!0,title:t.modalTitle,datasources:t.availableDatasources,datasource:t.datasource,account:t.account},{controller:Mn,controllerAs:"ctrl",bindToController:!0,template:Sn.a}).result.then(function(){r.manageDefinition(t.definition.token,t.current.name,t.current.description,t.current.dataSourceId,t.definition.source,t.modalConfirm)}).catch(function(){})}),t.$on("$destroy",function(){return n.off("click.context")})}}};Tn.$inject=["ModalService","LibraryDefinitionModel","AlertService","DefinitionRunDataService"],r.module("mode.components").directive("renameDefinition",Tn);var xn=n("F4Ad"),Dn=n.n(xn),Ln=function(){return function(){}}(),Rn=function(e,t,n){return{restrict:"A",scope:{orgs:"<",account:"<",homeName:"@",currentContext:"="},link:function(t,n,r){n.on("click.switchToOrg",function(n){e.open({organizations:t.orgs,home:t.homeName,contextId:t.currentContext,account:t.account},{controller:Ln,controllerAs:"ctrl",bindToController:!0,template:Dn.a})}),t.$on("$destroy",function(){return n.off("click.switchToOrg")})}}};Rn.$inject=["ModalService"],r.module("mode.components").directive("switchToOrgModal",Rn);var Nn=n("Uvoo"),En=n.n(Nn),jn=function(){function SyncToGithubModalController(){}return SyncToGithubModalController.prototype.submit=function(){this.$close({$commitMessage:this.commitMessage})},SyncToGithubModalController}(),On=function(e){return{restrict:"A",scope:{commitMessage:"<",onSync:"&"},link:function(t,n,r){n.on("click",function(n){e.open({commitMessage:t.commitMessage},{controller:jn,controllerAs:"ctrl",bindToController:!0,template:En.a}).result.then(function(e){t.onSync({$commitMessage:e.$commitMessage})}).catch(function(){})}),t.$on("$destroy",function(){return n.off("click")})}}};On.$inject=["ModalService"],r.module("mode.components").directive("syncToGithubModal",On);var Pn=n("0Luh"),Fn=n.n(Pn),zn=function(e){return{restrict:"A",link:function(t,n,r){n.on("click.createOrg",function(t){e.open({},{template:Fn.a})}),t.$on("$destroy",function(){return n.off("click.createOrg")})}}};zn.$inject=["ModalService"],r.module("mode.components").directive("createOrgModal",zn);var _n=n("tGHj"),$n=n.n(_n),Bn=function(e){return{restrict:"A",scope:{report:"<",reportRun:"<",owner:"<",account:"<",view:"@?",schedule:"<?"},link:function(t,n,r){n.on("click.schedulesModal",function(n){e.open({report:t.report,run:t.reportRun,reportOwner:t.owner,account:t.account,view:t.view,schedule:t.schedule},{controller:function(){},controllerAs:"ctrl",bindToController:!0,template:$n.a})}),t.$on("$destroy",function(){return n.off("click.schedulesModal")})}}};Bn.$inject=["ModalService"],r.module("mode.components").directive("schedulesModal",Bn);var Vn=n("Pprw"),Un=n.n(Vn),Zn=n("WiZw"),Gn=n.n(Zn),Yn=function(e,t,n,r){return{restrict:"A",scope:{report:"<",reportRun:"<"},link:function(o,i,a){var l,s=new Gn.a({min:50,max:5e3,factor:1.2});function pollReportRunPdfExport(e){o.pollingPdfExport=!0,o.pdfExport=e,l&&r.cancel(l),"completed"===e.state?(o.pdfExportAvailable=!0,o.pollingPdfExport=!1):n.refresh(e).then(function(e){"completed"===e.state?(o.pdfExportAvailable=!0,o.pollingPdfExport=!1):l=r(function(){return pollReportRunPdfExport(e)},s.duration())})}o.pdfExportAvailable=!1,o.reportRun.pdfExport().then(function(e){o.pdfExport=e,"completed"===e.state&&(o.pdfExportAvailable=!0)}).catch(function(e){t.log("error getting pdf export",e)}),i.on("click.pdfExport",function(r){function openPdfExportModal(t){o.pdfExport=t;e.open({pdfExport:t,title:o.report.name},{template:Un.a});return t}o.pdfExportAvailable?$(r.target).attr("href",o.pdfExport._resource.links("download").href).attr("download","true").attr("target","_self"):(r.preventDefault(),r.stopPropagation(),o.pdfExport&&"new"!==o.pdfExport.state?("completed"!==o.pdfExport.state&&pollReportRunPdfExport(o.pdfExport),openPdfExportModal(o.pdfExport)):n.create({reportRun:o.reportRun.token,useEntryPath:!0}).then(openPdfExportModal).then(pollReportRunPdfExport).catch(function(e){t.log("failed to create report run pdf export")}))}),o.$on("$destroy",function(){return i.off("click.pdfExport")})}}};Yn.$inject=["ModalService","$log","PdfExportModel","$timeout"],r.module("mode.components").directive("pdfExport",Yn);var Qn=n("1XgQ"),Hn=n.n(Qn),Wn=function(){function RenameQueryModalController(e){this.$uibModalInstance=e}return RenameQueryModalController.prototype.saveAndClose=function(){this.$uibModalInstance.close({name:this.queryName})},RenameQueryModalController.$inject=["$uibModalInstance"],RenameQueryModalController}(),qn=function(e,t){return{restrict:"A",scope:{query:"<"},link:function(n,r,o){r.on("click.renameQueryModal",function(r){e.open({queryName:n.query.name},{template:Hn.a,controller:Wn,controllerAs:"ctrl",bindToController:!0}).result.then(function(e){t.updateQueryName(n.query.token,e.name)}).catch(function(){})}),n.$on("$destroy",function(){return r.off("click.renameQueryModal")})}}};qn.$inject=["ModalService","QueryDataService"],r.module("mode.components").directive("renameQuery",qn);var Jn=n("Vi/P"),Xn=n.n(Jn),Kn=function(e,t,n){return{restrict:"A",scope:{report:"=",space:"="},link:function(o,i,a){i.on("click.deleteReportModal",function(i){if(!o.report||!o.report.last_run_at)return i.preventDefault(),void i.stopPropagation();e.open({headerText:"Delete Report",confirmText:"Are you sure you want to delete this report?"},{controller:function(){},controllerAs:"ctrl",bindToController:!0,template:Xn.a}).result.then(function(e){e&&o.report.destroy().then(function(){n.success("Removed report"),r.element(t).unbind("beforeunload.report"),t.location.href=o.space.webLink})})}),o.$on("$destroy",function(){return i.off("click.deleteReportModal")})}}};Kn.$inject=["ModalService","$window","AlertService"],r.module("mode.components").directive("deleteReport",Kn);var er=n("zD7f"),tr=n.n(er),nr=function(){function RenameReportModalController(e){this.$uibModalInstance=e}return RenameReportModalController.prototype.saveAndClose=function(){this.$uibModalInstance.close({name:this.name,description:this.description})},RenameReportModalController.$inject=["$uibModalInstance"],RenameReportModalController}(),rr=function(e,t){return{restrict:"A",scope:{report:"<"},link:function(n,r,o){r.on("click.renameReportModal",function(r){e.open({name:n.report.name,description:n.report.description},{template:tr.a,controller:nr,controllerAs:"ctrl",bindToController:!0}).result.then(function(e){t.renameReport(n.report.token,e.name,e.description)})}),n.$on("$destroy",function(){return r.off("click.renameReportModal")})}}};rr.$inject=["ModalService","ReportDataService"],r.module("mode.components").directive("renameReport",rr);var or=n("X11V"),ir=n.n(or),ar=function(){function SaveAlertModalController(e){this.$uibModalInstance=e}return SaveAlertModalController.prototype.saveAndClose=function(e){this.$uibModalInstance.close({event:e})},SaveAlertModalController.$inject=["$uibModalInstance"],SaveAlertModalController}(),lr=function(e,t,n){return{restrict:"A",scope:{report:"<"},link:function(r,o,i){o.on("click.saveReportAlertModal",function(o){n.reportHasChanged()&&(o.preventDefault(),o.stopPropagation(),e.open({url:r.report.share},{template:ir.a,controller:ar,controllerAs:"ctrl",bindToController:!0}).result.then(function(e){t.updateReportWithAlertAndRefreshPreview()}))}),r.$on("$destroy",function(){return o.off("click.saveReportAlertModal")})}}};lr.$inject=["ModalService","ReportDataService","ReportSaveService"],r.module("mode.components").directive("saveReportAlert",lr);var sr={controller:function(){function RestrictedModalController(e,t,n,r,o,i){this.$scope=e,this.Modal=t,this.$window=n,this.$timeout=r,this.$sce=o,this.AssetService=i}return RestrictedModalController.prototype.$onInit=function(){var e=this;this.Modal.openLegacy({message:this.$sce.trustAsHtml(this.message),billingPath:this.billingPath,errorImg:this.AssetService.errorGif},{keyboard:!1,template:'\n<div class="center-modal restricted-center"><div class="restricted-modal">\n  <h1>Let\'s make this a perfect UNION</h1>\n  <img ng-src="{{ errorImg }}" class="restricted-img" />\n  <p ng-bind-html="message"></p>\n  <div class="action-container">\n    <a id="restricted_link" tabindex="-1" ng-href="{{ billingPath }}" target="_blank" rel="noopener" class="btn btn-primary">\n      Continue\n    </a>\n  </div>\n</div></div>',controller:["$scope",function(e){e.$on("modal.closing",function(e){e.preventDefault()})}]}).opened.then(function(){$(document).on("focusin.restrictedModal",function(t){$(t.target).closest(".mode-modal-window").length||e.$timeout(function(){$(".mode-modal-window a").focus()})})})},RestrictedModalController.prototype.$onDestroy=function(){$(document).off("focusin.restrictedModal")},RestrictedModalController.$inject=["$scope","ModalService","$window","$timeout","$sce","AssetService"],RestrictedModalController}(),controllerAs:"ctrl",bindings:{message:"@",billingPath:"@"}};r.module("mode.components").component("restrictedModal",sr);var cr={bindings:{account:"<",organizations:"<",owner:"<",smallMenu:"@?"},template:'\n<div uib-dropdown class="dropdown">\n  <a href="#" uib-dropdown-toggle class="account-menu-component dropdown-toggle">\n    <div class="account-media" ng-class="{ \'with-details\': ctrl.showDetails }">\n      <mode-avatar options="ctrl.owner.avatar" size="25" community="{{ ctrl.owner.user }}"></mode-avatar>\n    </div>\n    <div class="account-body" ng-if="ctrl.showDetails">\n      <div class="main-title">{{ ctrl.owner.accountName() }}</div>\n      <div class="secondary-title">{{ ctrl.account.name }}</div>\n    </div>\n    <div class="account-dropdown">\n      <i class="icon-org-menu-caret"></i>\n    </div>\n  </a>\n  <ul uib-dropdown-menu class="dropdown-menu account-menu-dropdown">\n    <li class="account-dropdown-media-container">\n      <div class="account-dropdown-media">\n        <mode-avatar options="ctrl.account.avatar" size="30"></mode-avatar>\n      </div>\n      <div class="account-dropdown-body">{{ ctrl.account.name }}</div>\n    </li>\n    <li>\n      <a ng-href="{{ ctrl.account.settingsLink }}" target="_self">\n        <i class="item-icon icon-nav-personal-space"></i> Account\n      </a>\n    </li>\n    <li>\n      <a href="/help" target="_self">\n        <i class="item-icon icon-help-gray"></i> Help\n      </a>\n    </li>\n    <li class="account-menu-item-last">\n      <a href="/signout" rel="nofollow" data-method="post" target="_self">\n        <i class="item-icon icon-signout"></i> Sign out\n      </a>\n    </li>\n    <li class="divider"></li>\n    <li>\n      <a href="#" class="account-dropdown-media-container" context-modal orgs="ctrl.organizations" current-context="{{ ctrl.owner.token }}" account="ctrl.account" home-name="home">\n        <div class="account-dropdown-media">\n          <mode-avatar options="ctrl.owner.avatar" size="30" community="{{ ctrl.owner.user }}"></mode-avatar>\n        </div>\n        <div class="account-dropdown-body">{{ ctrl.owner.accountName() }}</div>\n        <div class="account-dropdown-action"><span class="action-label">Switch</span><i class="icon-switch-gray-16"></i></div>\n      </a>\n    </li>\n    <li>\n      <a ng-href="{{ ctrl.owner.settingsLink }}" target="_self">\n        <i class="item-icon icon-space-settings"></i> Settings\n      </a>\n    </li>\n    \x3c!-- user is in an org context, we can send to db connect page --\x3e\n    <li ng-if="!ctrl.owner.user">\n      <a href="/data_sources/select" target="_self">\n        <i class="item-icon icon-db-mini-gray"></i> Connect a Database\n      </a>\n    </li>\n    \x3c!-- user is NOT in an org context, needs to create or switch to an org --\x3e\n    <li ng-if="ctrl.owner.user">\n      <a href="#" target="_self" switch-to-org-modal ng-if="ctrl.organizations.length" orgs="ctrl.organizations" current-context="ctrl.owner.token" account="ctrl.account" home-name="datasource">\n        <i class="item-icon icon-db-mini-gray"></i> Connect a Database\n      </a>\n      <a href="#" target="_self" create-org-modal ng-if="!ctrl.organizations.length">\n        <i class="item-icon icon-db-mini-gray"></i> Connect a Database\n      </a>\n    </li>\n    <li ng-if="ctrl.owner.user">\n      <a href="/uploads/select" target="_self">\n        <i class="item-icon icon-upload-flatfile"></i> Contribute Public Data\n      </a>\n    </li>\n    <li>\n      <a ng-href="{{ ctrl.owner.inviteLink }}" target="_self">\n         <i class="item-icon icon-invite-green-16"></i> Invite to Mode\n      </a>\n    </li>\n  </ul>\n</div>\n',controller:function(){function AccountMenuController(e){this.$log=e}return AccountMenuController.prototype.$onInit=function(){this.showDetails=void 0===this.smallMenu},AccountMenuController.$inject=["$log"],AccountMenuController}(),controllerAs:"ctrl"};r.module("mode.components").component("accountMenu",cr);var dr={controller:function(){function NavAccountMenuController(e){this.$window=e}return NavAccountMenuController.prototype.goToNewOrganization=function(){this.$window.location.href=this.account.newOrganizationLink},NavAccountMenuController.$inject=["$window"],NavAccountMenuController}(),controllerAs:"ctrl",bindings:{account:"<",organizations:"<",owner:"<"},template:'\n<div uib-dropdown class="dropdown">\n  <a href="#" uib-dropdown-toggle class="account-menu-component dropdown-toggle">\n    <div class="account-media with-details">\n      <mode-avatar options="ctrl.owner.avatar" size="25" community="{{ ctrl.owner.user }}"></mode-avatar>\n    </div>\n    <div class="account-body">\n      <div class="main-title">{{ ctrl.owner.accountName() }}</div>\n      <div class="secondary-title">{{ ctrl.account.name }}</div>\n    </div>\n    <div class="account-dropdown">\n      <i class="icon-org-menu-caret"></i>\n    </div>\n  </a>\n  <ul uib-dropdown-menu class="dropdown-menu account-menu-dropdown navbar-action">\n    <li class="account-menu-switcher">\n      <div class="account-dropdown-media-container">\n        <div class="account-dropdown-media">\n          <mode-avatar options="ctrl.owner.avatar" size="25" community="{{ ctrl.owner.user }}"></mode-avatar>\n        </div>\n        <div class="account-dropdown-body">\n          <div class="main-title">{{ ctrl.owner.accountName() }}</div>\n          <div class="secondary-title">{{ ctrl.account.name }}</div>\n        </div>\n        <div class="account-dropdown-action">\n          <a href="#" class="action-label" context-modal orgs="ctrl.organizations" evented="true" current-context="{{ ctrl.owner.token }}" account="ctrl.account" home-name="home">Switch</a>\n          <i class="icon-org-menu-caret account-dropdown-caret"></i>\n        </div>\n      </div>\n    </li>\n    <li ng-if="!ctrl.owner.user">\n      <a ng-href="{{ ctrl.owner.settingsLink }}" target="_self">Organization Settings</a>\n    </li>\n    \x3c!-- user is in an org context, we can send to db connect page --\x3e\n    <li ng-if="!ctrl.owner.user">\n      <a\n        href="/data_sources/select"\n        connect-db-instrumentation\n        connect-db-instrumentation-element-id="5"\n        connect-db-instrumentation-org-id="{{ ctrl.owner.id }}"\n        target="_self"\n      >\n        Connect a Database\n      </a>\n    </li>\n    \x3c!-- user is NOT in an org context, needs to create or switch to an org --\x3e\n    <li ng-if="ctrl.owner.user">\n      <a\n        href="#"\n        target="_self"\n        switch-to-org-modal\n        connect-db-instrumentation\n        ng-if="ctrl.organizations.length"\n        connect-db-instrumentation-element-id="5"\n        connect-db-instrumentation-org-id="{{ ctrl.owner.id }}"\n        orgs="ctrl.organizations"\n        current-context="ctrl.owner.token"\n        account="ctrl.account"\n        home-name="datasource"\n      >\n        Connect a Database\n      </a>\n      <a\n        href="#"\n        target="_self"\n        connect-db-instrumentation\n        connect-db-instrumentation-element-id="5"\n        connect-db-instrumentation-org-id="{{ ctrl.owner.id }}"\n        ng-if="!ctrl.organizations.length"\n        confirm-modal="Before you connect a database, you\'ll need to create a free Mode Studio workspace. This will let you query and share data privately with others. You can return to the Mode Community at any point."\n        confirm-modal-title="Switch to Mode Studio"\n        confirm-modal-button-confirm="Create Mode Studio workspace"\n        confirm-modal-button-cancel="Back"\n        confirm-modal-on-confirm="ctrl.goToNewOrganization()"\n      >\n        Connect a Database\n      </a>\n    </li>\n    <li ng-if="ctrl.owner.user">\n      <a href="/uploads/select" target="_self">Contribute Public Data</a>\n    </li>\n    <li>\n      <a ng-href="{{ ctrl.owner.inviteLink }}" target="_self">\n         Invite to Mode\n      </a>\n    </li>\n    <li>\n      <a ng-href="{{ ctrl.account.settingsLink }}" target="_self">My Account</a>\n    </li>\n    <li class="account-menu-item-last">\n      <a href="/signout" rel="nofollow" data-method="post" target="_self">Sign out</a>\n    </li>\n  </ul>\n</div>\n'};r.module("mode.components").component("navAccountMenu",dr);var ur=n("3nxw"),pr={bindings:{owner:"<"},template:'\n<div class="search-sidebar-component" ng-class="{\'search-open\': ctrl.navState.searchEnabled}">\n  <form name="sidebar_search_form" class="search-sidebar-form" action="/search">\n    <input\n      type="text"\n      id="nav_sidebar_search"\n      autocomplete="off"\n      name="q"\n      class="form-control form-control-block next-form-control search-sidebar-input"\n      placeholder="Search..."\n      ng-model="ctrl.query"\n      ng-focus="ctrl.openSearch()">\n    </input>\n    <i class="icon-search search-icon" ng-click="ctrl.focusOrSearch($event)"></i>\n  </form>\n  <ul class="search-results search-report-list">\n    <li ng-show="!ctrl.query && ctrl.viewedReports.length" class="search-report-header">Recently viewed reports</li>\n    <li ng-repeat="result in ctrl.viewedReports" class="search-report-list-item" ng-if="!ctrl.query">\n      <a ng-href="{{ result.webPath }}" target="_self" class="search-report-list-link">\n        <div class="search-list-name">{{ result.name || \'Untitled Report\' }}</div>\n        <div class="search-list-details">{{ result.description || result.rawQuery }}</div>\n      </a>\n    </li>\n    <li ng-repeat="result in ctrl.results" class="search-report-list-item">\n      <a ng-href="{{ result.webPath }}" target="_self" class="search-report-list-link">\n        <div class="search-list-name">{{ result.name || \'Untitled Report\' }}</div>\n        <div class="search-list-details">{{ result.description || result.rawQuery }}</div>\n      </a>\n    </li>\n    <li ng-show="ctrl.query"><a href="/search?q={{ ctrl.query }}" class="search-report-more" target="_self">Show all results for {{ ctrl.query }}</a></li>\n  </ul>\n</div>\n',controller:function(){function SidebarSearchController(e,t,n,r,o,i){this.$scope=e,this.$log=t,this.store=n,this.Search=r,this.$window=o,this.$timeout=i}return SidebarSearchController.prototype.$onInit=function(){this.clearResults(),this.$scope.$watch("ctrl.query",this.handleSearch.bind(this)),this.store.connectPath(this.$scope,"navSidebar",this.updateNavState.bind(this)),this.owner._resource.hasLink("report_views")&&this.owner._resource.links("report_views").$follow().then(this.handleLastViewed.bind(this))},SidebarSearchController.prototype.updateNavState=function(e){this.navState=e},SidebarSearchController.prototype.handleSearch=function(e){if(e){var t={query:e,indexes:["report"],filters:this.owner.user?"":"(organization_"+this.owner.token+")",perPage:6};this.owner.user&&(t.facets={report:"(public:true)"}),this.Search.query(t).then(this.handleSearchSuccess.bind(this)).catch(function(e){})}else this.clearResults()},SidebarSearchController.prototype.handleLastViewed=function(e){if(e.ids&&e.ids.length){this.owner.user;var t={query:"",indexes:["report"],perPage:200,range:"(id="+e.ids.join(",id=")+")",filters:this.owner.user?"":"(organization_"+this.owner.token+")"};this.owner.user&&(t.facets={report:"(public:true)"}),this.Search.query(t).then(this.buildViewedReports.bind(this,e.ids)).catch(function(e){})}},SidebarSearchController.prototype.buildViewedReports=function(e,t){var n=t.report||[];n.sort(function(t,n){return e.indexOf(t.id)-e.indexOf(n.id)}),this.viewedReports=n.slice(0,6)},SidebarSearchController.prototype.clearResults=function(){this.results=[]},SidebarSearchController.prototype.handleSearchSuccess=function(e){this.results=e.report||[]},SidebarSearchController.prototype.openSearch=function(){this.store.dispatch(ur.d()),$(this.$window).on("mousedown.searchSidebar",this.closeSearch.bind(this))},SidebarSearchController.prototype.closeSearch=function(e){var t=this;$(e.target).closest(".search-sidebar-component").length||this.$scope.$apply(function(){t.store.dispatch(ur.c()),$(t.$window).off("mousedown.searchSidebar")})},SidebarSearchController.prototype.focusOrSearch=function(e){this.$timeout(function(){$(e.target).siblings("#nav_sidebar_search").focus()})},SidebarSearchController.$inject=["$scope","$log","StoreService","Search","$window","$timeout"],SidebarSearchController}(),controllerAs:"ctrl"};r.module("mode.components").component("sidebarSearch",pr);var hr=n("0UVZ"),gr=n.n(hr),mr={bindings:{isOpen:"=",visualization:"<",owner:"<",sidebarOpen:"<",onLightboxClose:"&"},controller:function(){function VizLightboxModalController(e,t,n){this.$scope=e,this.Modal=t,this.chartViewService=n}return VizLightboxModalController.prototype.$onInit=function(){this.$scope.$watch("ctrl.isOpen",this.handleOpen.bind(this))},VizLightboxModalController.prototype.handleOpen=function(e,t){e&&!t?this.openLightbox():!e&&t&&(this.onLightboxClose(),this.modal&&this.modal.close())},VizLightboxModalController.prototype.handleClose=function(){this.isOpen=!1},VizLightboxModalController.prototype.openLightbox=function(){var e=this;this.modal=this.Modal.openFullModal({visualization:this.visualization,sidebarOpen:this.sidebarOpen,owner:this.owner},{template:gr.a,appendTo:$(".report-view")}),this.chartViewService.toggleExpandedView(!0),this.modal.result.then(this.handleClose.bind(this)).catch(function(){return e.handleClose()})},VizLightboxModalController.$inject=["$scope","ModalService","ChartViewService"],VizLightboxModalController}(),controllerAs:"ctrl"};r.module("mode.components").component("vizLightboxModal",mr);var fr=n("m9my"),Cr=n("7n0L"),yr=n("u5jn"),br=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vr={bindings:{visualization:"<",owner:"<",sidebarOpen:"<",onDismiss:"&"},controller:function(){function VizContainerController(e,t,n,r,o,i,a,l,s,c,d){this.$scope=e,this.$q=t,this.$timeout=n,this.ReportStateService=r,this.vos=o,this.$window=i,this.DatasetService=a,this.ChartViewService=l,this.DataLayerFlipperService=s,this.store=c,this.FeatureToggleService=d,this.vegasState={viz:{type:"chart",viewVersion:2}}}return VizContainerController.prototype.$onInit=function(){var e=this;this.setupVizOptions(),this.$scope.$watch("ctrl.sidebarOpen",function(t){Object(Ce.a)(e.$window,"resize")}),this.account$=this.store.select(K.f),this.accountSubscription=this.account$.subscribe(function(t){e.accountDisplayName=t.name||t.username}),this.exploreEnabled$=this.FeatureToggleService.featureExploreEnabled$,this.chartDataExportEnabled$=this.FeatureToggleService.featureChartDataExportEnabled$},VizContainerController.prototype.setupVizOptions=function(){var e=this;V.Observable.combineLatest(V.Observable.fromPromise(this.ReportStateService.getQueryVisualizations()),this.store.select(A.b.createVizRenderSelector(this.visualization.id))).map(function(t){var n=t[0],r=t[1];return[e.getVizModelById(e.visualization.id,r,n),n]}).first(function(e){var t=e[0];e[1];return t}).subscribe(function(t){var n=t[0],r=t[1];n?e.getVizModelDataset(n,r):e.handleError()},function(e){return console.error(e)})},VizContainerController.prototype.getVizModelDataset=function(e,t){var n=this;e.view_vegas&&2===e.view_version?this.vizTitle=e.view_vegas.title:e.view&&1===e.view_version?this.vizTitle=e.view.chartTitle||yr.b[e.view.selectedChart].name:this.vizTitle="",this.ReportStateService.getDatasets().then(function(r){if("queryTable"===e._name&&e.parent&&r[e.parent])n.setVizType("table"),n.vizTitle=Object(y.find)(t,{token:e.parent}).name,n.vos.setOption(e,e.token,Cr.a.OPTION_TYPE_TABLE),n.compileViz.call(n,e.view,r[e.parent]);else if("pythonVisualization"===e._name)n.setVizType("python"),n.vizTitle=e.title,"loading"===e.state?n.store.select(A.b.createVizRenderSelector(n.visualization.id)).filter(function(e){return"loading"!==e.state}).takeWhile(function(e){return"loading"===e.state}).subscribe(function(e){n.view=e.results}):n.view=e.results;else if("chart"===e._name&&2===e.view_version){n.ChartViewService.openChart(e),n.setVizType("vegas"),n.vos.setOption(e,e.token,Cr.a.OPTION_TYPE_CHART),n.compileViz.call(n,e.view_vegas,r[e.parent]),n.queryRun=n.DatasetService.queryRuns[e.parent];var o=r[e.parent],i=n.DatasetService.models[e.parent];n.modelResult=br({},i,{content:o.content,model:fr.Model.build(fr.Model.convertModeSchema(o.columns),o.content)})}else"chart"===e._name&&e.parent&&r[e.parent]?(n.setVizType("pivotTable"===e.view.selectedChart?"pivot":"chart"),n.vos.setOption(e,e.token,Cr.a.OPTION_TYPE_CHART),n.compileViz.call(n,e.view,r[e.parent])):n.handleError();"pivot"===n.vizType||"vegas"===n.vizType?n.vizTitleDisplay=n.vizTitle&&n.vizTitle.length?"Exploring "+n.vizTitle:"Exploring":n.vizTitleDisplay=n.vizTitle&&n.vizTitle.length?"Viewing "+n.vizTitle:"Viewing"})},VizContainerController.prototype.getVizModelById=function(e,t,n){return t||this.getVizModelFromQueries(e,n)},VizContainerController.prototype.getVizModelFromQueries=function(e,t){var n=t.reduce(function(e,t){return e.concat(t.storedCharts,t.storedTables)},[]);return Object(y.find)(n,{token:e})},VizContainerController.prototype.setVizType=function(e){this.vizType=e},VizContainerController.prototype.compileViz=function(e,t){this.dataset=t,this.view=e},VizContainerController.prototype.handleError=function(){this.errorMessage="Could not find visualization"},VizContainerController.prototype.updatePivotTableView=function(e){var t=this;this.$timeout(function(){t.view=Object(y.assign)({},t.view,{pivotTable:e})})},VizContainerController.prototype.openSidebar=function(){this.sidebarOpen=!0},VizContainerController.prototype.onToggleExplore=function(){this.sidebarOpen=!this.sidebarOpen},VizContainerController.prototype.onDismissLightbox=function(){this.onDismiss(),this.ChartViewService.toggleExpandedView(!1)},VizContainerController.prototype.$onDestroy=function(){this.accountSubscription.unsubscribe()},VizContainerController.$inject=["$scope","$q","$timeout","ReportStateService","ViewOptionsService","$window","DatasetService","ChartViewService","DataLayerFlipperService","RxStoreService","FeatureToggleService"],VizContainerController}(),controllerAs:"ctrl",template:'\n<lightbox-header\n  on-dismiss="ctrl.onDismissLightbox();"\n  explore-enabled="ctrl.exploreEnabled$ | async:this"\n  sidebar-open="ctrl.sidebarOpen"\n  viz-title="ctrl.vizTitleDisplay"\n  viz-type="ctrl.vizType"\n  read-only="true"\n  on-toggle-explore="ctrl.onToggleExplore();"\n></lightbox-header>\n\n<div class="viz-loading" ng-show="!ctrl.view && !ctrl.errorMessage">\n  <i class="icon-logo-animated lg-icon"></i>\n</div>\n\x3c!-- Pivot Table Sidebar --\x3e\n<div\n  class="modal-sidebar chart-sidebar"\n  ng-if="ctrl.vizType === \'pivot\'"\n  ng-show="ctrl.sidebarOpen && (ctrl.exploreEnabled$ | async:this)">\n  <pivot-table-settings\n    token="ctrl.visualization.id"\n    data="ctrl.dataset"\n    view="ctrl.view.pivotTable"\n    container-height=""\n    on-settings-update="ctrl.updatePivotTableView($view)">\n  </pivot-table-settings>\n</div>\n<div class="modal-container" ng-class="{\'chart-content\': ctrl.vizType === \'chart\' || ctrl.vizType === \'pivot\', \'sidebar-enabled\': ctrl.sidebarOpen && (ctrl.exploreEnabled$ | async:this)}" pivot-resize>\n  \x3c!-- Vegas expore Chart --\x3e\n  <chart-designer\n    ng-if="ctrl.vizType === \'vegas\' && ctrl.queryRun && ctrl.modelResult"\n    state="ctrl.vegasState"\n    dataset="ctrl.dataset"\n    token="ctrl.visualization.id"\n    model-result="ctrl.modelResult"\n    query-run="ctrl.queryRun"\n    vegas-enabled="ctrl.vizType === \'vegas\'"\n    chart-data-export-enabled="(ctrl.chartDataExportEnabled$ | async:this)"\n    read-only="true"\n    community-context="ctrl.owner.user"\n    with-sidebar="ctrl.sidebarOpen && (ctrl.exploreEnabled$ | async:this)"\n    on-open-sidebar="ctrl.openSidebar()">\n  </chart-designer>\n  \x3c!-- Chart and Pivot Table Component --\x3e\n  <mode-chart\n    ng-if="ctrl.vizType === \'chart\' || ctrl.vizType === \'pivot\'"\n    id="{{ ctrl.visualization.id }}"\n    dataset="ctrl.dataset"\n    set-view="ctrl.view"\n    chart-exists=""\n    viewer="">\n  </mode-chart>\n  \x3c!-- Table Component --\x3e\n  <mode-table\n    ng-if="ctrl.vizType === \'table\'"\n    id="table_{{ ctrl.visualization.id }}"\n    dataset="ctrl.dataset"\n    set-view="ctrl.view">\n  </mode-table>\n  \x3c!-- Python Component --\x3e\n  <div class="viz-python-container" ng-if="ctrl.vizType === \'python\'" resize-cells>\n    <mode-python-result\n      ng-repeat="result in ctrl.view"\n      id="python_{{ ctrl.visualization.id }}"\n      result="result">\n    </mode-python-result>\n  </div>\n  <div ng-if="ctrl.errorMessage"><h3>{{ ctrl.errorMessage }}</h3></div>\n</div>\n'};function pivotResizeDirective(e,t){return{restrict:"A",link:function(t,n,r){var o=w()(n);w()(e).on("resize.pivot",Object(y.debounce)(function(e){o.find(".mode-table-grid").css("max-height",o.height()-10)},100)),t.$on("$destroy",function(){w()(e).off("resize.pivot")})}}}r.module("mode.components").component("visualizationContainer",vr),pivotResizeDirective.$inject=["$window","$timeout"],r.module("mode.components").directive("pivotResize",pivotResizeDirective);var Ir=function(){function ReportListController(e,t,n,r,o,i){this.$log=e,this.AlertService=t,this.$state=n,this.ReportModel=r,this.ModeCollection=o,this.$timeout=i}return ReportListController.prototype.$onInit=function(){this.csrfParam=$("meta[name=csrf-param]").attr("content"),this.csrfToken=$("meta[name=csrf-token]").attr("content"),void 0!==this.showSpaces&&(this.includeSpace=!0)},ReportListController.prototype.isUnknownPersonalSpace=function(e){return e.localSpace&&e.localSpace.private&&e.localSpaceCreator&&e.localSpaceCreator.username!==this.account.username},ReportListController.prototype.moveReport=function(e,t){t||this.spaceView?this.removeReportFromList(e.token):this.ReportModel.refresh(e,{includes:["space","new_space_link"]}).then(this.updateReport.bind(this))},ReportListController.prototype.handleAddedLinks=function(e){var t=this;this.includeSpace||e.isFromSpace(this.space.token)||e.spaceLinks({refresh:!0}).then(this.ModeCollection.elements).then(function(n){y.find(n,{space_token:t.space.token})||t.removeReportFromList(e.token)})},ReportListController.prototype.moveToSpace=function(e){var t=this;this.includeSpace||this.$timeout(function(){t.$state.go("root.space",{ownerId:t.owner.username,spaceId:e.token})},500)},ReportListController.prototype.isReportShortcut=function(e){return!this.includeSpace&&!e.isFromSpace(this.space)},ReportListController.prototype.updateReport=function(e){var t=this;e.isFromSpace(this.space)||e.space().then(function(n){e.localSpace=n,n.openSpace||t.includeSpace||t.removeReportFromList(e.token)})},ReportListController.prototype.removeReportFromList=function(e){this.reports=this.reports.filter(function(t){return t.token!==e})},ReportListController.prototype.toggleArchiveReport=function(e){var t=this;e.toggleArchived().then(function(){var n=e.archived?"Archived report":"Unarchived report";t.AlertService.success(n)}).catch(function(){var n=e.archived?"unarchive":"archive";t.AlertService.error("Could not "+n+" report")})},ReportListController.prototype.deleteReport=function(e){var t=this;e.destroy().then(function(){return t.AlertService.success("Removed report")}).then(this.moveReport.bind(this,e,!0))},ReportListController.prototype.hasSpaceReportPin=function(e){return function(t){return e.space&&e.space.pinnable&&!!t.savedSpaceReportPin}},ReportListController.prototype.noSpaceReportPin=function(e){return function(t){return!e.space||!e.space.pinnable||!t.savedSpaceReportPin}},ReportListController.$inject=["$log","AlertService","$state","ReportModel","ModeCollection","$timeout"],ReportListController}(),Sr=Ir,wr={bindings:{reports:"<",spaces:"<",space:"<",spaceView:"<",owner:"<",account:"<",showSpaces:"@?"},template:'\n<ul class="report-list pinned-report-list" ng-show="pinnedReports.length">\n  <li class="report-list-header">Pinned Reports</li>\n  <li class="report-list-item"\n      ng-class="{open:dropOpen}"\n      ng-repeat="report in ctrl.reports | filter: ctrl.hasSpaceReportPin(ctrl) as pinnedReports track by report.token">\n    <report-list-item\n      is-shortcut="ctrl.isReportShortcut(report)"\n      is-unknown-personal-space="ctrl.isUnknownPersonalSpace(report)"\n      include-space="ctrl.includeSpace"\n      space="ctrl.space"\n      drop-open="dropOpen"\n      owner="ctrl.owner"\n      account="ctrl.account"\n      report="report"\n      on-remove="ctrl.handleAddedLinks(report)"\n      on-delete-report="ctrl.deleteReport(report)"\n      on-move-report="ctrl.moveReport(report)"\n      on-move-to-space="ctrl.moveToSpace($space)"\n      on-toggle-archive-report="ctrl.toggleArchiveReport(report)"\n      csrf-param="{{ ctrl.csrfParam }}"\n      csrf-token="{{ ctrl.csrfToken }}">\n    </report-list-item>\n  </li>\n</ul>\n<ul class="report-list">\n  <li class="report-list-item"\n      ng-class="{open:dropOpen}"\n      ng-repeat="report in ctrl.reports | filter: ctrl.noSpaceReportPin(ctrl) track by report.token">\n    <report-list-item\n      is-shortcut="ctrl.isReportShortcut(report)"\n      is-unknown-personal-space="ctrl.isUnknownPersonalSpace(report)"\n      include-space="ctrl.includeSpace"\n      space="ctrl.space"\n      drop-open="dropOpen"\n      owner="ctrl.owner"\n      account="ctrl.account"\n      report="report"\n      on-remove="ctrl.handleAddedLinks(report)"\n      on-delete-report="ctrl.deleteReport(report)"\n      on-move-report="ctrl.moveReport(report)"\n      on-move-to-space="ctrl.moveToSpace($space)"\n      on-toggle-archive-report="ctrl.toggleArchiveReport(report)"\n      csrf-param="{{ ctrl.csrfParam }}"\n      csrf-token="{{ ctrl.csrfToken }}">\n    </report-list-item>\n  </li>\n</ul>\n',controller:Ir,controllerAs:"ctrl"};r.module("mode.components").component("reportList",wr);var Ar=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Mr={bindings:{reports:"<",spaces:"<",space:"<",spaceView:"<",owner:"<",account:"<",showSpaces:"@?"},template:'\n<div class="pinned-report-list-tile-wrapper" ng-show="pinnedReports.length">\n  <div class="report-list-tile-header">Pinned Reports</div>\n  <ul class="report-list-tile pinned-report-list-tile">\n    <li class="report-list-tile-item"\n        ng-class="{open:dropOpen}"\n        ng-repeat="report in ctrl.reports | filter: ctrl.hasSpaceReportPin(ctrl) as pinnedReports track by report.token">\n      <report-list-tile-item\n        is-shortcut="ctrl.isReportShortcut(report)"\n        is-unknown-personal-space="ctrl.isUnknownPersonalSpace(report)"\n        include-space="ctrl.includeSpace"\n        space="ctrl.space"\n        drop-open="dropOpen"\n        owner="ctrl.owner"\n        account="ctrl.account"\n        report="report"\n        on-remove="ctrl.handleAddedLinks(report)"\n        on-delete-report="ctrl.deleteReport(report)"\n        on-move-report="ctrl.moveReport(report)"\n        on-move-to-space="ctrl.moveToSpace($space)"\n        on-toggle-archive-report="ctrl.toggleArchiveReport(report)"\n        csrf-param="{{ ctrl.csrfParam }}"\n        csrf-token="{{ ctrl.csrfToken }}">\n      </report-list-tile-item>\n    </li>\n    <li class="report-list-tile-item after-empty"></li>\n    <li class="report-list-tile-item after-empty"></li>\n    <li class="report-list-tile-item after-empty"></li>\n    <li class="report-list-tile-item after-empty"></li>\n    <li class="report-list-tile-item after-empty"></li>\n    <li class="report-list-tile-item after-empty"></li>\n  </ul>\n</div>\n<ul class="report-list-tile">\n  <li class="report-list-tile-item"\n      ng-class="{open:dropOpen}"\n      ng-repeat="report in ctrl.reports | filter: ctrl.noSpaceReportPin(ctrl) track by report.token">\n    <report-list-tile-item\n      is-shortcut="ctrl.isReportShortcut(report)"\n      is-unknown-personal-space="ctrl.isUnknownPersonalSpace(report)"\n      include-space="ctrl.includeSpace"\n      space="ctrl.space"\n      drop-open="dropOpen"\n      owner="ctrl.owner"\n      account="ctrl.account"\n      report="report"\n      on-remove="ctrl.handleAddedLinks(report)"\n      on-delete-report="ctrl.deleteReport(report)"\n      on-move-report="ctrl.moveReport(report)"\n      on-move-to-space="ctrl.moveToSpace($space)"\n      on-toggle-archive-report="ctrl.toggleArchiveReport(report)"\n      csrf-param="{{ ctrl.csrfParam }}"\n      csrf-token="{{ ctrl.csrfToken }}">\n    </report-list-tile-item>\n  </li>\n  <li class="report-list-tile-item after-empty"></li>\n  <li class="report-list-tile-item after-empty"></li>\n  <li class="report-list-tile-item after-empty"></li>\n  <li class="report-list-tile-item after-empty"></li>\n  <li class="report-list-tile-item after-empty"></li>\n  <li class="report-list-tile-item after-empty"></li>\n</ul>\n',controller:function(e){function ReportListTileController(t,n,r,o,i,a){return e.call(this,t,n,r,o,i,a)||this}return Ar(ReportListTileController,e),ReportListTileController.$inject=["$log","AlertService","$state","ReportModel","ModeCollection","$timeout"],ReportListTileController}(Sr),controllerAs:"ctrl"};r.module("mode.components").component("reportListTile",Mr);var kr=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Tr={bindings:{reports:"<",isEmpty:"<",spaces:"<",space:"<",spaceView:"<",owner:"<",account:"<",filter:"<",showSpaces:"@?"},template:'\n<ul class="report-list-table">\n  <li class="report-table-header" ng-if="ctrl.reports.length">\n    <div class="report-header-time">{{ ctrl.currentReportFilterName() }}</div>\n    <div class="report-header-title">Title</div>\n    <div class="report-header-space">Space</div>\n    <div class="report-header-creator">Created By</div>\n  </li>\n  <li ng-repeat="report in ctrl.reports | orderBy:\'savedSpaceReportPin\' track by report.token" class="report-table-item" ng-class="{open:dropOpen}">\n    <a ng-href="{{ report.editLink || report.link }}" class="report-table-link" target="_self">\n      <div class="report-time">\n        <span am-time-ago="ctrl.currentReportFilter(report)" am-time-string></span>\n      </div>\n      <div class="report-body">\n        <div class="report-title">{{ report.name || \'Untitled Report\' }}</div>\n        <report-star\n          class="report-table-star"\n          ng-class="{\'selected\': report.userStar}"\n          report="report"\n          user-star="report.userStar"\n          account="ctrl.owner"></report-star>\n      </div>\n      <div class="report-space" ng-if="report.localSpace && !report.isFromSpace(ctrl.space)">\n        <span class="report-overflow">{{ ctrl.isUnknownPersonalSpace(report) ? report.localSpaceCreator.displayName() : report.localSpace.name }}</span>\n      </div>\n      <div class="report-details">\n        <div class="report-creator report-overflow">{{ report.creatorAccount.name || report.creatorAccount.username }}</div>\n      </div>\n    </a>\n    <ul class="report-table-actions">\n      <li class="report-table-action-item">\n        <a ng-href="{{ report.editLink }}" class="report-table-action-link action-button" target="_self">Edit</a>\n      <li>\n      <li uib-dropdown dropdown-append-to-body class="dropdown report-table-action-item" is-open="dropOpen">\n        <a href="#" uib-dropdown-toggle class="dropdown-toggle report-table-action-link">\n          <i class="icon-list-overflow-default"></i>\n        </a>\n        <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right">\n          <li><a ng-href="{{ report.link }}" target="_self">View Report</a></li>\n          <li ng-if="report.clonable" class="report-actions-table-item">\n            <form action="{{ report._resource.forms(\'clone\').action }}" method="post">\n              <button class="button-link" type="submit">Clone</button>\n              <input type="hidden" name="{{ ctrl.csrfParam }}" value="{{ ctrl.csrfToken }}">\n              <input type="hidden" name="owner_id" value="{{ ctrl.owner.id }}">\n            </form>\n          </li>\n          <li ng-if="report.editLink && !ctrl.isReportShortcut(report)"><a href="#" move-space report="report" owner="ctrl.owner" account="ctrl.account" on-move="ctrl.moveReport(report)" on-move-to-space="ctrl.moveToSpace($space)">Move to&hellip;</a></li>\n          <li ng-if="report.spaceLinkable && !ctrl.isReportShortcut(report)"><a href="#" shortcut-space report="report" space="ctrl.space" owner="ctrl.owner" account="ctrl.account" on-move-to-space="ctrl.moveToSpace($space)">Create shortcut&hellip;</a></li>\n          <li ng-if="report.spaceLinkable && ctrl.isReportShortcut(report)"><a href="#" remove-shortcut-space report="report" space="ctrl.space" on-remove="ctrl.handleAddedLinks(report)">Remove shortcut&hellip;</a></li>\n          <li ng-if="ctrl.space.pinnable"><a href="#" space-report-pin-link report="report" space-report-pin="report.savedSpaceReportPin" space="ctrl.space">{{ report.savedSpaceReportPin ? \'Unpin from space\' : \'Pin to space\' }}</a>\n          <li ng-if="report.editLink && !ctrl.isReportShortcut(report)"><a href="#" ng-click="ctrl.toggleArchiveReport(report)">{{ report.archived ? \'Unarchive\' : \'Archive\' }}</a></li>\n          <li ng-if="report._resource.hasForm(\'destroy\') && !ctrl.isReportShortcut(report)">\n            <a href="#"\n              confirm-modal="Are you sure you want to delete this report?"\n              confirm-modal-title="Delete Report"\n              confirm-modal-on-confirm="ctrl.deleteReport(report)">\n              Delete\n            </a>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n</ul>\n<div class="empty-report-list" ng-show="ctrl.isEmpty">No Reports Found</div>\n',controller:function(e){function ReportListTableController(t,n,r,o,i,a){return e.call(this,t,n,r,o,i,a)||this}return kr(ReportListTableController,e),ReportListTableController.prototype.currentReportFilter=function(e){switch(this.filter){case"reportLastRun":return e.last_successfully_run_at;case"reportCreated":return e.created_at;case"reportLastEdited":default:return e.edited_at}},ReportListTableController.prototype.currentReportFilterName=function(){switch(this.filter){case"reportLastRun":return"Last Run";case"reportCreated":return"Created At";case"reportLastEdited":default:return"Last Edited"}},ReportListTableController.$inject=["$log","AlertService","$state","ReportModel","ModeCollection","$timeout"],ReportListTableController}(Sr),controllerAs:"ctrl"};r.module("mode.components").component("reportListTable",Tr);var xr={bindings:{report:"<",isShortcut:"<",isUnknownPersonalSpace:"<",includeSpace:"<",space:"<",owner:"<",account:"<",csrfParam:"@",csrfToken:"@",dropOpen:"=",onDeleteReport:"&",onMoveReport:"&",onMoveToSpace:"&",onToggleArchiveReport:"&",onRemove:"&"},template:'\n<a ng-href="{{ ctrl.report.link }}" class="report-list-link" target="_self">\n  <i ng-if="ctrl.isShortcut" class="icon-list-shortcut report-list-shortcut"></i>\n  <div class="report-media">\n    <div class="report-list-preview" ng-class="{ \'no-image\': !ctrl.report.previewLoaded || !ctrl.report.web_preview_image }">\n      <i class="icon-list-no-preview no-image-placeholder" ng-show="!ctrl.report.previewLoaded || !ctrl.report.web_preview_image"></i>\n      <img ng-src="{{ ctrl.report.web_preview_image }}" ng-if="ctrl.report.web_preview_image" class="report-list-image" image-load="ctrl.report.previewLoaded" />\n    </div>\n  </div>\n  <div class="report-body">\n    <div class="report-name">\n      <div class="report-title">{{ ctrl.report.name || \'Untitled Report\' }}</div>\n      <report-star\n        class="report-list-star"\n        ng-class="{\'selected\': ctrl.report.userStar}"\n        report="ctrl.report"\n        user-star="ctrl.report.userStar"\n        account="ctrl.owner"></report-star>\n    </div>\n    <div class="report-space" ng-if="ctrl.report.localSpace && (ctrl.includeSpace || !ctrl.report.isFromSpace(ctrl.space))">\n      <i class="space-icon {{ ctrl.report.localSpace.iconClassName }}"></i>\n      <div class="space-name">{{ ctrl.isUnknownPersonalSpace ? ctrl.report.localSpaceCreator.displayName() : ctrl.report.localSpace.name }}</div>\n    </div>\n  </div>\n  <div class="report-details" ng-class="{ \'report-action-hide\': !ctrl.includeSpace }">\n    <div class="report-creator">Created by {{ ctrl.report.creatorAccount.name || ctrl.report.creatorAccount.username }}</div>\n  </div>\n</a>\n<ul class="report-list-actions">\n  <li class="report-list-action-item">\n    <a ng-href="{{ ctrl.report.link }}" class="report-list-action-link action-button" target="_self">View</a>\n  <li>\n  <li class="report-list-action-item">\n    <a ng-if="ctrl.report.editLink" ng-href="{{ ctrl.report.editLink }}" class="report-list-action-link" target="_self">\n      <i class="icon-list-edit-default"></i>\n    </a>\n  <li>\n  <li\n    ng-show="ctrl.report.editLink || ctrl.report.clonable || (ctrl.report.spaceLinkable && ctrl.space.openSpace)"\n    class="dropdown report-list-action-item"\n    uib-dropdown\n    dropdown-append-to-body\n    is-open="ctrl.dropOpen"\n  >\n    <a href="#" uib-dropdown-toggle class="dropdown-toggle report-list-action-link">\n      <i class="icon-list-overflow-default"></i>\n    </a>\n    <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right">\n      <li ng-if="ctrl.report.clonable" class="report-actions-list-item">\n        <form action="{{ ctrl.report._resource.forms(\'clone\').action }}" method="post">\n          <button class="button-link" type="submit">Clone</button>\n          <input type="hidden" name="{{ ctrl.csrfParam }}" value="{{ ctrl.csrfToken }}">\n          <input type="hidden" name="owner_id" value="{{ ctrl.owner.id }}">\n        </form>\n      </li>\n      <li ng-if="ctrl.space.pinnable">\n        <a href="#"\n          space-report-pin-link\n          report="ctrl.report"\n          space-report-pin="ctrl.report.savedSpaceReportPin"\n          space="ctrl.space">\n          {{ ctrl.report.savedSpaceReportPin ? \'Unpin from this space\' : \'Pin in this space\' }}\n        </a>\n        </li>\n      <li ng-if="ctrl.report.editLink && !ctrl.isShortcut">\n        <a href="#"\n          move-space\n          report="ctrl.report"\n          owner="ctrl.owner"\n          account="ctrl.account"\n          on-move="ctrl.onMoveReport()"\n          on-move-to-space="ctrl.onMoveToSpace({$space: $space})">\n          Move to&hellip;\n        </a>\n      </li>\n      <li ng-if="ctrl.report.spaceLinkable && !ctrl.isShortcut">\n        <a href="#"\n          shortcut-space\n          report="ctrl.report"\n          space="ctrl.space"\n          owner="ctrl.owner"\n          account="ctrl.account"\n          on-move-to-space="ctrl.onMoveToSpace({$space: $space})">\n          Create shortcut&hellip;\n        </a>\n      </li>\n      <li ng-if="ctrl.report.spaceLinkable && ctrl.isShortcut">\n        <a href="#"\n          remove-shortcut-space\n          report="ctrl.report"\n          space="ctrl.space"\n          on-remove="ctrl.onRemove()">\n          Remove shortcut&hellip;\n        </a>\n      </li>\n      <li ng-if="ctrl.report.editLink && !ctrl.isShortcut">\n        <a href="#"\n          ng-click="ctrl.onToggleArchiveReport()">\n          {{ ctrl.report.archived ? \'Unarchive\' : \'Archive\' }}\n        </a>\n      </li>\n      <li ng-if="ctrl.report._resource.hasForm(\'destroy\') && !ctrl.isShortcut">\n        <a href="#"\n          confirm-modal="Are you sure you want to delete this report?"\n          confirm-modal-title="Delete Report"\n          confirm-modal-on-confirm="ctrl.onDeleteReport()">\n          Delete\n        </a>\n      </li>\n    </ul>\n  </li>\n</ul>',controller:function(){return function(){}}(),controllerAs:"ctrl"};r.module("mode.components").component("reportListItem",xr);var Dr={bindings:{report:"<",isShortcut:"<",isUnknownPersonalSpace:"<",includeSpace:"<",space:"<",owner:"<",account:"<",csrfParam:"@",csrfToken:"@",dropOpen:"=",onDeleteReport:"&",onMoveReport:"&",onMoveToSpace:"&",onToggleArchiveReport:"&",onRemove:"&"},template:'\n<a ng-href="{{ ctrl.report.link }}" class="report-link-tile" target="_self">\n  <div class="report-tile-media">\n    <div class="report-tile-preview" ng-class="{ \'no-image\': !ctrl.report.previewLoaded || !ctrl.report.web_preview_image }">\n      <i class="icon-tile-no-preview no-image-placeholder" ng-show="!ctrl.report.previewLoaded || !ctrl.report.web_preview_image"></i>\n      <img ng-src="{{ ctrl.report.web_preview_image }}" ng-if="ctrl.report.web_preview_image" class="report-tile-image" image-load="ctrl.report.previewLoaded" />\n    </div>\n    <i ng-if="ctrl.isShortcut" class="icon-tile-shortcut report-tile-shortcut"></i>\n    <div class="report-tile-hover-content">\n      <div class="report-tile-callout">View Report</div>\n    </div>\n  </div>\n  <div class="report-tile-body">\n    <div class="report-tile-main">\n      <div class="report-title">{{ ctrl.report.name || \'Untitled Report\' }}</div>\n      <report-star\n        class="report-tile-star"\n        ng-class="{\'selected\': ctrl.report.userStar}"\n        report="ctrl.report"\n        user-star="ctrl.report.userStar"\n        account="ctrl.owner"></report-star>\n    </div>\n    <div class="report-creator">Created by {{ ctrl.report.creatorAccount.name || ctrl.report.creatorAccount.username }}</div>\n    <div class="report-space" ng-if="ctrl.report.localSpace && (ctrl.includeSpace || !ctrl.report.isFromSpace(ctrl.space))">\n      <i class="sm-icon space-icon {{ ctrl.report.localSpace.iconClassName }}"></i>\n      {{ ctrl.isUnknownPersonalSpace ? ctrl.report.localSpaceCreator.displayName() : ctrl.report.localSpace.name }}\n    </div>\n  </div>\n</a>\n<ul class="report-tile-actions">\n  <li ng-if="ctrl.report.editLink" class="report-tile-action-item">\n    <a ng-href="{{ ctrl.report.editLink }}" class="report-tile-action-button" target="_self"><i class="icon-tile-edit-default"></i></a>\n  </li>\n  <li\n    ng-show="ctrl.report.editLink || ctrl.report.clonable || (ctrl.report.spaceLinkable && ctrl.space.openSpace)"\n    class="report-tile-action-item dropdown"\n    uib-dropdown\n    dropdown-append-to-body\n    is-open="ctrl.dropOpen"\n  >\n    <a uib-dropdown-toggle class="dropdown-toggle report-tile-action-button"><i class="icon-tile-overflow-default"></i></a>\n    <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right">\n      <li ng-if="ctrl.report.clonable">\n        <form action="{{ ctrl.report._resource.forms(\'clone\').action }}" method="post">\n          <button class="button-link" type="submit">Clone</button>\n          <input type="hidden" name="{{ ctrl.csrfParam }}" value="{{ ctrl.csrfToken }}">\n          <input type="hidden" name="owner_id" value="{{ ctrl.owner.id }}">\n        </form>\n      </li>\n      <li ng-if="ctrl.space.pinnable"><a href="#" space-report-pin-link report="ctrl.report" space-report-pin="ctrl.report.savedSpaceReportPin" space="ctrl.space">{{ ctrl.report.savedSpaceReportPin ? \'Unpin from this Space\' : \'Pin in this Space\' }}</a>\n      <li ng-if="ctrl.report.editLink && !ctrl.isShortcut"><a href="#" move-space report="ctrl.report" owner="ctrl.owner" account="ctrl.account" on-move="ctrl.onMoveReport()" on-move-to-space="ctrl.onMoveToSpace($space)">Move to&hellip;</a></li>\n      <li ng-if="ctrl.report.spaceLinkable && !ctrl.isShortcut"><a href="#" shortcut-space report="ctrl.report" space="ctrl.space" owner="ctrl.owner" account="ctrl.account" on-move-to-space="ctrl.onMoveToSpace($space)">Create shortcut&hellip;</a></li>\n      <li ng-if="ctrl.report.spaceLinkable && ctrl.isShortcut"><a href="#" remove-shortcut-space report="ctrl.report" space="ctrl.space" on-remove="ctrl.onRemove()">Remove shortcut&hellip;</a></li>\n      <li ng-if="ctrl.report.editLink && !ctrl.isShortcut"><a href="#" ng-click="ctrl.onToggleArchiveReport()">{{ ctrl.report.archived ? \'Unarchive\' : \'Archive\' }}</a></li>\n      <li ng-if="ctrl.report._resource.hasForm(\'destroy\') && !ctrl.isShortcut">\n        <a href="#"\n          confirm-modal="Are you sure you want to delete this report?"\n          confirm-modal-title="Delete Report"\n          confirm-modal-on-confirm="ctrl.onDeleteReport()">\n          Delete\n        </a>\n      </li>\n    </ul>\n  </li>\n</ul>',controller:function(){return function(){}}(),controllerAs:"ctrl"};r.module("mode.components").component("reportListTileItem",Dr);var Lr=n("FC4A"),Rr=n.n(Lr),Nr=function(){function TextEditorController(e,t,n,r,o,i,a,l,s,c){this.$element=e,this.EditorService=t,this.$window=n,this.Search=r,this.$rootScope=o,this.$scope=i,this.$timeout=a,this.ace=l,this.QueryDataService=s,this.rxStore=c}return TextEditorController.prototype.$onInit=function(){this.opts={theme:this.theme||"chrome",mode:this.mode||"sql",showGutter:"true"}},TextEditorController.prototype.$postLink=function(){var e,t,n,o,i,a,l,s,c,d,u=this,p=this.$element.find(".text-editor"),h=this.ace.require("ace/ext/language_tools"),g=this.ace.require("ace/autocomplete"),m=this.ace.require("ace/range").Range;if(this.editor=this.ace.edit(p[0]),this.editor.renderer.$fontMetrics.setPolling(!1),this.editor.getSession().setUseWorker(!1),this.editor.$blockScrolling=1/0,this.editor.setShowPrintMargin(!1),this.editor.getSession().setTabSize(2),this.editor.container.style.lineHeight="18px",this.editor.setOptions({fontFamily:"AtlasTypewriter",fontSize:12}),"sql"===this.mode&&this.EditorService.registerEditor(this.editor),r.isDefined(this.opts.showGutter)&&this.editor.renderer.setShowGutter(this.opts.showGutter),r.isString(this.opts.theme)&&this.editor.setTheme("ace/theme/"+getThemeFromEditor(this.opts.theme)),"sql"===this.opts.mode&&this.auto){this.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!1}),e={getCompletions:this.tableCompletions.bind(this),identifierRegexps:[/[a-zA-Z_0-9.\$\-\u00A2-\uFFFF]/]};var f=g.FilteredList.prototype.filterCompletions;g.FilteredList.prototype.filterCompletions=function(e,t){return Object(y.some)(e,"highlighted")?function(e,t){return Object(y.map)(e,function(t,n){if(t.highlighted&&t.highlighted.length){for(var r=t.highlighted,o=0,i=0,a=0;r.indexOf("<em>")>=0;){i=r.indexOf("<em>"),r=r.slice(0,i)+r.slice(i+4),a=r.indexOf("</em>"),r=r.slice(0,a)+r.slice(a+5);for(var l=i;l<a;l++)o|=1<<l}t.matchMask=o}return t.score=e.length-n,t})}(e):f.bind(this)(e,t)};var C=this.ace.require("mode/tooltip").TokenTooltip;this.editor.tokenTooltip=new C(this.editor,this.datasource,this.owner,this.Search),this.editor.getSession().setMode("ace/mode/modesql"),h.setCompleters([e]),this.editor.completers=[e],this.ace.require("ace/config").set("workerPath","/"),this.editor.commands.on("afterExec",function(e){"insertstring"!=e.command.name&&"Space"!=e.command.name&&"backspace"!=e.command.name||u.editor.execCommand("startAutocomplete")})}else r.isString(this.opts.mode)&&this.editor.getSession().setMode("ace/mode/"+this.opts.mode);this.editor.commands.removeCommand("gotoline"),this.editor.commands.addCommands([{name:"nouppercase",bindKey:{win:"Ctrl-U",mac:"Ctrl-U"},exec:function(e){return!1}},{name:"nofindnext",bindKey:{win:"Ctrl-K",mac:"Ctrl-K"},exec:function(e){return!1}}]),this.controlEvents&&(this.controlEvents.focus=function(){u.editor.focus()},this.controlEvents.resize=function(){u.editor.renderer.updateFull(),u.resize()}),"sql"===this.opts.mode&&(this.$rootScope.$on("sql.insert",function(e,t){u.editor.insert(t.text)}),this.$rootScope.$on("sql.replace",function(e,t){u.editor.session.replace(new m(0,0,Number.MAX_VALUE,Number.MAX_VALUE),""),u.editor.insert(t.text)})),this.editor.on("focus",function(){u.$rootScope.focused||u.$scope.$evalAsync(function(){u.$rootScope.focused=!0})}),$(this.editor.textInput.getElement()).on("keypress",function(){u.$rootScope.focused||u.$scope.$evalAsync(function(){u.$rootScope.focused=!0})}),this.editor.on("focus",(n=this.editor,o=this.$window.document.body,i=["mousedown","keydown"],a=$(o),l=i.join(String.fromCharCode(32)),s=function(e){e.target!==n.textInput.getElement()&&c()},c=function(){try{n.blur()}catch(e){}a.off(l,s)},d=function(){a.on(l,s)},function(){n.renderer.$fontMetrics.checkForSizeChanges(),setTimeout(d,500)})),this.editor.on("change",Object(y.debounce)(function(){u.editor.renderer.$fontMetrics.checkForSizeChanges()},200)),this.onTextSelected&&this.editor.selection.on("changeSelection",Object(y.debounce)(function(){t!==u.editor.getSelectedText()&&(t=u.editor.getSelectedText(),u.$scope.$apply(function(){return u.onTextSelected({$text:t})}))},150)),this.editor.focus(),this.$timeout(function(){r.element(u.$window).trigger("resize")}),this.parent.on("custom_resize",this.resize.bind(this)),this.editor.getSession().on("change",this.onEditorChange()),this.handleQueryChange(),this.onAfterRender&&this.editor.renderer.on("afterRender",this.onAfterRender())},TextEditorController.prototype.$onChanges=function(e){null!=this.editor&&(e.theme&&this.editor.setTheme("ace/theme/"+getThemeFromEditor(this.theme)),e.datasource&&this.editor&&this.editor.tokenTooltip&&this.editor.tokenTooltip.setDatasource(this.datasource),e.text&&this.handleQueryChange())},TextEditorController.prototype.handleQueryChange=function(){void 0!==this.text&&this.editor&&this.editor.getValue()!==this.text&&(this.silent=!0,this.editor.getSession().setValue(this.text),this.silent=!1)},TextEditorController.prototype.$onDestroy=function(){$(this.editor.textInput.getElement()).off("keypress"),this.editor.destroy()},TextEditorController.prototype.resize=function(){this.editor.resize()},TextEditorController.prototype.onEditorChange=function(){var e=this;return function(t){e.silent||e.onTextEdited({$text:e.editor.getSession().getValue()})}},TextEditorController.prototype.tableCompletions=function(e,t,n,r,o){var i=this,a=t.getTextRange({start:{row:0,column:0},end:n});a=a.substring(0,a.length-r.length);var l=/\s+(from|join)\s+$/i.test(a),s=/\s+(from|join)\s+(\{\{ ?@)$/i.test(a);if(0!==r.length&&(l||s)){if(this.lastMatch&&this.lastMatch===r)return this.lastMatch=null,void o(null,[]);if(this.lastMatch=null,this.datasource){var c=this.datasource.public?void 0:"dataSource_"+this.datasource.token,d={query:r,indexes:this.datasource.public?["table","definition"]:["dataSourceTable","definition"],restrictAttributes:{table:["name","schema","fullName"],dataSourceTable:["name","schema","fullName"],definition:["name"]},perPage:20,filters:{table:c,dataSourceTable:c,definition:"dataSource_"+this.datasource.token+","+(this.owner.user?"user_":"organization_")+this.owner.token}};this.Search.query(d).then(function(e){var t=function(e,t,n){var r=e.public?t.table:t.dataSourceTable;r=n?t.definition:t.definition.concat(r);return r}(i.datasource,e,s);o(null,Object(y.map)(t,function(e){return{name:e.fullName||e.name,value:(e.fullName||e.name)+" ",replacement:function(e,t){if(t)return e.name+" }}";return"definition"===e.objectType?"{{ @"+e.name+" }} ":e.fullName+" "}(e,s),meta:"definition"===e.objectType?"definition":"table",highlighted:(e._highlightResult.fullName||e._highlightResult.name).value,completer:{insertMatch:function(e,t){if(i.lastMatch=t.replacement,e.completer.completions.filterText)for(var n,r=e.selection.getAllRanges(),o=0;n=r[o];o++)n.start.column-=e.completer.completions.filterText.length,e.session.remove(n);e.execCommand("insertstring",t.replacement||t)}}}}))}).catch(function(e){console.log("search error",e)})}}else o(null,[])},TextEditorController.$inject=["$element","EditorService","$window","Search","$rootScope","$scope","$timeout","ace","QueryDataService","RxStoreService"],TextEditorController}();function getThemeFromEditor(e){return"dark"===e?"monokai":"chrome"}var Er={bindings:{theme:"<",mode:"@",auto:"@",controlEvents:"=",text:"<",datasource:"<?",parent:"=",owner:"<?",onAfterRender:"&?",onTextSelected:"&?",onTextEdited:"&"},template:Rr.a,controller:Nr,controllerAs:"ctrl"};r.module("mode.components").component("textEditor",Er);var jr=function(e){return{link:function(t,n){var o=n.children().first(),i=function(){if(n.offset().top+n.height()+20>e.innerHeight||n.hasClass("auto-height-resize")){n.addClass("auto-height-resize");var t=e.innerHeight-n.offset().top-20;t>o.height()?(n.height("auto"),n.removeClass("auto-height-resize")):n.height(t)}};r.element(e).on("resize",i),t.$on("$destroy",function(){r.element(e).off("resize",i)})}}};jr.$inject=["$window"],r.module("mode.components").directive("autoHeight",jr);var Or=function(e){return{transclude:!0,scope:{lang:"@?",lineNumbers:"@?",start:"@?"},template:'<pre><code class="mode-prism" ng-show="prismLoaded" ng-transclude></code></pre>',link:function(t,n,r){var o=n.find(".mode-prism");n.addClass("mode-code"),r.lang&&o.addClass("language-"+r.lang),r.lineNumbers&&n.find("pre").addClass("line-numbers"),r.start&&n.find("pre").attr("data-start",""+r.start),e(function(){o[0].innerHTML.length<yr.q&&Prism.highlightElement(o[0],!1),t.prismLoaded=!0})}}};Or.$inject=["$timeout"],r.module("mode.components").directive("modeCode",Or);var Pr=n("nxEI"),Fr=function(e){return{scope:{lang:"@?",lineNumbers:"@?",start:"@?",code:"<"},template:'<pre><code class="mode-prism"></code></pre>',link:function(t,n,r){var o=n.find(".mode-prism");n.addClass("mode-code"),t.lang&&o.addClass("language-"+t.lang),t.lineNumbers&&n.find("pre").addClass("line-numbers"),t.start&&n.find("pre").attr("data-start",""+t.start),t.$watch("code",function(){e(function(){o[0].innerHTML=Pr.a.escapeHTML(t.code),o[0].innerHTML.length<yr.q&&Prism.highlightElement(o[0],!1)},0,!1)})}}};Fr.$inject=["$timeout"],r.module("mode.components").directive("modeLiveCode",Fr);var zr={bindings:{options:"<",size:"@",classes:"@",community:"@"},template:'\n<div\n  ng-if="ctrl.initials"\n  class="mode-avatar mode-avatar-initials mode-icon-{{ ctrl.size }} {{ ctrl.options.color_class }} {{ ctrl.classes }}">\n  {{ ctrl.options.initials }}\n</div>\n<img\n  ng-if="!ctrl.initials && !ctrl.isCommunity"\n  class="mode-avatar mode-icon-{{ ctrl.size }} {{ ctrl.classes }}"\n  ng-src="{{ ctrl.options.href }}" />\n<div ng-if="ctrl.isCommunity" class="mode-avatar mode-avatar-initials mode-icon-{{ ctrl.size }} {{ ctrl.classes }}">\n  <i class="icon-community-blue-24"></i>\n</div>\n',controller:function(){function AvatarController(){}return AvatarController.prototype.$onInit=function(){"true"===this.community?this.isCommunity="true"===this.community:this.initials=this.options&&"initials"===this.options.type},AvatarController}(),controllerAs:"ctrl"};r.module("mode.components").component("modeAvatar",zr);var _r={bindings:{report:"=",userStar:"<",account:"<"},template:'\n<span class="report-star-link" ng-click="ctrl.toggleStar($event)">\n  <i class="sm-icon" ng-class="{ \'icon-inline-star-default\': !ctrl.userStar, \'icon-inline-star-hover-selected\': ctrl.userStar }"></i>\n</span>\n',controller:function(){function StarController(e,t,n){this.$log=e,this.StarModel=t,this.AlertService=n}return StarController.prototype.toggleStar=function(e){var t=this;e&&(e.stopPropagation(),e.preventDefault()),this.userStar?this.userStar.destroy().then(function(){t.report.removeStarredUser(t.account._resource.links("starred_reports").href),t.AlertService.success("Unstarred report")}).catch(function(){t.AlertService.error("There was an error unstarring report")}):this.StarModel.create({report:this.report.token,params:{}}).then(function(e){t.report.userStar=e,t.AlertService.success("Starred report")}).catch(function(e){t.AlertService.error("There was an error starring report")})},StarController.$inject=["$log","StarModel","AlertService"],StarController}(),controllerAs:"ctrl"};r.module("mode.components").component("reportStar",_r);var $r={bindings:{userStar:"<",onStarClicked:"&"},template:'\n<span class="report-star-link" ng-click="ctrl.toggleStar($event)">\n  <i class="sm-icon" ng-class="{ \'icon-inline-star-default\': !ctrl.userStar, \'icon-inline-star-hover-selected\': ctrl.userStar }"></i>\n</span>\n',controller:function(){function ReportUserStarController(){}return ReportUserStarController.prototype.toggleStar=function(e){this.onStarClicked&&this.onStarClicked({$event:e})},ReportUserStarController}(),controllerAs:"ctrl"};r.module("mode.components").component("reportUserStar",$r);var Br=function(e,t){return{restrict:"A",scope:{report:"=",userStar:"<",account:"<"},link:function(n,r,o){r.on("click.starLink",function(r){n.userStar?n.userStar.destroy().then(function(){n.report.removeStarredUser(n.account._resource.links("starred_reports").href),t.success("Unstarred report")}).catch(function(){t.error("There was an error unstarring report")}):e.create({report:n.report.token,params:{}}).then(function(e){n.report.userStar=e,t.success("Starred report")}).catch(function(e){t.error("There was an error starring report")})}),n.$on("$destroy",function(){return r.off("click.starLink")})}}};Br.$inject=["StarModel","AlertService"],r.module("mode.components").directive("starLink",Br);var Vr={bindings:{report:"<",spaceReportPin:"<",space:"<"},template:'\n<span class="report-star-link" ng-click="ctrl.togglePin($event)">\n  <i class="sm-icon" ng-class="{ \'icon-checkbox-unchecked\': !ctrl.spaceReportPin, \'icon-pin\': ctrl.spaceReportPin }"></i>\n</span>\n',controller:function(){function SpaceReportPinController(e,t,n,r){this.$log=e,this.SpaceReportPinModel=t,this.AlertService=n,this.store=r}return SpaceReportPinController.prototype.togglePin=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.spaceReportPin?this.store.dispatch(Je.s(this.spaceReportPin,this.report,this.handleRemoveSuccess.bind(this),this.handleRemoveFailure.bind(this))):this.store.dispatch(Je.d(this.SpaceReportPinModel,this.space,this.report,this.handleCreateSuccess.bind(this),this.handleCreateFailure.bind(this)))},SpaceReportPinController.prototype.handleRemoveSuccess=function(){this.AlertService.success("Report unpinned from Space")},SpaceReportPinController.prototype.handleRemoveFailure=function(){this.AlertService.error("Unable to unpin report")},SpaceReportPinController.prototype.handleCreateSuccess=function(){this.AlertService.success("Report pinned to Space")},SpaceReportPinController.prototype.handleCreateFailure=function(){this.AlertService.error("Unable to pin report")},SpaceReportPinController.$inject=["$log","SpaceReportPinModel","AlertService","StoreService"],SpaceReportPinController}(),controllerAs:"ctrl"};r.module("mode.components").component("spaceReportPin",Vr);var Ur=function(e,t,n){return{restrict:"A",scope:{report:"<",spaceReportPin:"<",space:"<"},link:function(r,o,i){var a=this;o.on("click.spaceReportPinLink",function(o){r.spaceReportPin?n.dispatch(Je.s(r.spaceReportPin,r.report,(function(){t.success("Report unpinned from Space")}).bind(a),(function(){t.success("Unable to unpin report")}).bind(a))):n.dispatch(Je.d(e,r.space,r.report,(function(){t.success("Report pinned to Space")}).bind(a),(function(){t.error("Unable to pin report")}).bind(a)))}),r.$on("$destroy",function(){return o.off("click.spaceReportPinLink")})}}};Ur.$inject=["SpaceReportPinModel","AlertService","StoreService"],r.module("mode.components").directive("spaceReportPinLink",Ur);var Zr=n("Xl0y"),Gr=n.n(Zr);r.module("mode.components").directive("stickyHeader",function(){return{scope:{tolerance:"=",offset:"=",classes:"=",scroller:"@"},link:function(e,t){var n={},r=Gr.a.options;for(var o in r)n[o]=e[o]||r[o];e.scroller&&(n.scroller=document.querySelector(e.scroller));var i=new Gr.a(t[0],n).init();e.$on("$destroy",function(){i.destroy()})}}});var Yr=[{name:"All Reports",facet:"archived:false"},{name:"Archived",facet:"archived:true"}],Qr=[{name:"Recently Edited",index:"reportLastEdited"},{name:"Recently Run",index:"reportLastRun"},{name:"Date Created",index:"reportCreated"},{name:"A to Z",index:"reportAlphabetical"},{name:"Z to A",index:"reportAlphabeticalDesc"}],Hr={bindings:{account:"<",owner:"<",view:"<",space:"<"},template:'\n<div class="filter-input-container">\n  <input\n    type="text"\n    class="form-control form-control-sm icon-filter-icon"\n    autocomplete="off"\n    placeholder="Filter..."\n    ng-change="ctrl.handleQueryChanged()"\n    ng-model-options="{ debounce: 200 }"\n    ng-model="ctrl.query" />\n</div>\n<div class="filter-menu-container">\n  <div uib-dropdown class="dropdown filter-option">\n    <a href="#" uib-dropdown-toggle class="dropdown-toggle filter-dropdown">\n      <span class="filter-type">View</span> {{ ctrl.reportFilter.name }} <i class="icon-caret-down sm-icon align-md-icon"></i>\n    </a>\n    <ul uib-dropdown-menu class="dropdown-menu profile-filter-list">\n      <li ng-repeat="filter in ctrl.filters">\n        <a href="#" ng-class="{ active: ctrl.isFilterActive(filter) }" ng-click="ctrl.setFilter(filter)">\n          <i class="icon-checkbox-checked icon-inline"></i>{{ filter.name }}\n        </a>\n      </li>\n    </ul>\n  </div>\n  <div uib-dropdown class="dropdown filter-option">\n    <a href="#" uib-dropdown-toggle class="dropdown-toggle filter-dropdown">\n      <span class="filter-type">Sort By</span> {{ ctrl.reportSort.name }} <i class="icon-caret-down sm-icon align-md-icon"></i>\n    </a>\n    <ul uib-dropdown-menu class="dropdown-menu profile-filter-list">\n      <li ng-repeat="sort in ctrl.sorts">\n        <a href="#" ng-class="{ active: ctrl.isSortActive(sort) }" ng-click="ctrl.setSort(sort)">\n          <i class="icon-checkbox-checked icon-inline"></i>{{ sort.name }}\n        </a>\n      </li>\n    </ul>\n  </div>\n</div>\n<report-list-toggle class="report-filter-toggle" ng-if="ctrl.view.name !== \'mywork\'"></report-list-toggle>\n',controller:function(){function ReportFilterController(e,t,n,r,o,i,a){this.$scope=e,this.$log=t,this.store=n,this.Search=r,this.ReportModel=o,this.$q=i,this.SpaceSearchService=a}return ReportFilterController.prototype.$onInit=function(){this.filters=Yr,this.sorts=Qr,this.resetFilters(),this.store.connectPath(this.$scope,"home.selectedSpace",this.resetFilters.bind(this)),this.store.connectPath(this.$scope,"home.reportState",this.updateSearchOptions.bind(this))},ReportFilterController.prototype.resetFilters=function(e){this.homeView!==e&&(this.homeView=e,this.reportFilter=Yr[0],this.reportSort=Qr[0],this.query="")},ReportFilterController.prototype.updateSearchOptions=function(e){this.searchOptions=e.searchOptions},ReportFilterController.prototype.handleQueryChanged=function(){this.query?this.search(this.query):this.view.token?this.store.dispatch(Je.p(this.SpaceSearchService,this.owner,this.space)):"mywork"===this.view.name&&this.store.dispatch(Je.h(this.SpaceSearchService,this.account,this.owner))},ReportFilterController.prototype.search=function(e){var t,n=this.owner.user?"user_"+this.owner.token:"organization_"+this.owner.token,r=this.view.token?",space_"+this.view.token:"",o={query:e,indexes:[this.reportSort.index],filters:this.searchOptions.filters||""+n+r,perPage:20,clearCache:!0,rawResults:!0,facets:(t={},t[this.reportSort.index]=this.reportFilter.facet,t)};this.searchOptions.range&&(o.range=this.searchOptions.range);var i="mywork"===this.view.name?this.SpaceSearchService.handleSearchResponseWithSpaces:this.SpaceSearchService.handleSearchResponse;this.store.dispatch(Je.f(this.SpaceSearchService,this.space,o,i))},ReportFilterController.prototype.isFilterActive=function(e){return e===this.reportFilter},ReportFilterController.prototype.isSortActive=function(e){return e===this.reportSort},ReportFilterController.prototype.setFilter=function(e){this.reportFilter=e,this.search(this.query||"")},ReportFilterController.prototype.setSort=function(e){this.reportSort=e,this.search(this.query||"")},ReportFilterController.$inject=["$scope","$log","StoreService","Search","ReportModel","$q","SpaceSearchService"],ReportFilterController}(),controllerAs:"ctrl"};r.module("mode.components").component("reportFilter",Hr);var Wr={bindings:{},template:'\n<div class="report-list-toggle btn-group">\n  <a href="#" class="btn btn-grouped" ng-click="ctrl.toggleReportList(\'tile\')" ng-class="{active:ctrl.reportListToggle === \'tile\'}"><i class="icon-space-display-toggle-tile-default align-md-icon"></i></a>\n  <a href="#" class="btn btn-grouped" ng-click="ctrl.toggleReportList(\'list\')" ng-class="{active:ctrl.reportListToggle === \'list\'}"><i class="icon-space-display-toggle-list-default align-md-icon"></i></a>\n</div>\n',controller:function(){function ReportListToggleController(e,t){this.$scope=e,this.store=t}return ReportListToggleController.prototype.$onInit=function(){this.store.connectPath(this.$scope,"home.reportListToggle",this.updateToggle.bind(this))},ReportListToggleController.prototype.updateToggle=function(e){this.reportListToggle=e},ReportListToggleController.prototype.toggleReportList=function(e){this.reportListToggle!==e&&this.store.dispatch(Je.B(e))},ReportListToggleController.$inject=["$scope","StoreService"],ReportListToggleController}(),controllerAs:"ctrl"};r.module("mode.components").component("reportListToggle",Wr),r.module("mode.components").directive("reportDrag",function(){return{restrict:"A",link:function(e,t,n){var r=t[0];r.draggable=!0,r.addEventListener("dragstart",function(e){var t=w()('<div class="report-drag-element">'),r=document.createTextNode(n.reportName);return t[0].appendChild(r),w()("body").append(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id),e.dataTransfer.setDragImage(t[0],0,0),this.classList.add("drag"),!1},!1),r.addEventListener("dragend",function(e){return w()("body").find(".report-drag-element").remove(),this.classList.remove("drag"),!1},!1)}}}),r.module("mode.components").directive("reportDrop",function(){return{restrict:"A",link:function(e,t,n){var r=t[0];r.draggable=!0,r.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),this.classList.add("report-drag-over"),!1},!1),r.addEventListener("dragenter",function(e){return this.classList.add("report-drag-over"),!1},!1),r.addEventListener("dragleave",function(e){return this.classList.remove("report-drag-over"),!1},!1),r.addEventListener("drop",function(e){return e.stopPropagation&&e.stopPropagation(),this.classList.remove("report-drag-over"),!1},!1)}}}),r.module("mode.components").directive("imageLoad",function(){return{restrict:"A",scope:{imageLoad:"="},link:function(e,t,n){t.load(function(){e.$apply(function(){return e.imageLoad=!0})})}}});var qr={bindings:{noReports:"<",emptyReports:"<",hasArchived:"<",view:"<",owner:"<"},template:'\n<div class="report-empty-state-component"\n     ng-if="ctrl.noReports || ctrl.emptyReports"\n     ng-class="{ \'no-reports\': ctrl.noReports && !ctrl.hasArchived }">\n  <img ng-class="{\'report-empty-svg\': ctrl.imageIsSvg(), \'report-empty-image\': ctrl.imageIsPng()}" ng-src="{{ ctrl.imageSrc() }}" />\n  <h3 class="report-empty-header">{{ ctrl.headerText() }}</h3>\n  <p class="report-empty-message">{{ ctrl.messageText() }}</p>\n  <a ng-if="ctrl.shouldShowCreateReportButton()"\n     ng-href="{{ ctrl.owner.newReportLink }}"\n     class="btn btn-primary btn-lg-wide"\n     target="_self">\n     Write a Query\n  </a>\n</div>\n',controller:function(){function ReportEmptyStateController(e){this.AssetService=e}return ReportEmptyStateController.prototype.imageSrc=function(){var e={emptyArchived:this.AssetService.emptyArchived,noFilterResults:this.AssetService.noFilterResults,emptyPersonal:this.AssetService.emptyPersonal2018,emptyStarred:this.AssetService.emptyStarred2018,emptyCommunity:this.AssetService.emptyCommunity2018,emptySpace:this.AssetService.emptySpace2018,emptyMywork:this.AssetService.emptyMywork2018,emptyRecent:this.AssetService.emptyRecent};if(this.emptyReports&&!this.noReports)return e.noFilterResults;if(this.noReports&&this.hasArchived)return e.emptyArchived;switch(this.view.name){case"space":return"Personal"===this.view.title?e.emptyPersonal:"Community"===this.view.title?e.emptyCommunity:e.emptySpace;case"mywork":return e.emptyMywork;case"recent":return e.emptyRecent;case"starred":return e.emptyStarred;default:return e.emptyMywork}},ReportEmptyStateController.prototype.headerText=function(){if(this.emptyReports&&!this.noReports)return"Hmm...looks like there are no matching reports";if(this.noReports&&this.hasArchived)return"To the archives!";switch(this.view.name){case"space":return"Personal"===this.view.title?"Your reports start here":"Community"===this.view.title?"Share with the community":"Homebase for your team";case"mywork":return"We'll let you get back to work";case"recent":return"Pick up where you left off";case"starred":return"It's ok, go ahead and pick favorites";case"mywork":default:return"We'll let you get back to work"}},ReportEmptyStateController.prototype.messageText=function(){if(this.emptyReports&&!this.noReports)return"Try using a different filter.";if(this.noReports&&this.hasArchived)return"This Space is empty, but there are some archived reports that used to live here. Access them using the View By dropdown.";switch(this.view.name){case"space":return"Personal"===this.view.title?"Your scratch work and in-progress analysis live here. That is, until you're ready to share your fabulous insights with the team.":"Community"===this.view.title?"Build a report with public data, then move it here to share your analysis with the world.":"This is where your team's reports will live. When you're ready to share a report, move it here from your personal Space!";case"recent":return"After you've had some time to explore, reports you've seen will show up here.";case"starred":return"Star your favorite reports to find them at a moment's notice.";case"mywork":default:return"Use the My Work tab to find your recent projects and jump back in."}},ReportEmptyStateController.prototype.shouldShowCreateReportButton=function(){var e="mywork"==this.view.name,t="space"===this.view.name&&!["Personal","Community"].includes(this.view.title);return(e||t)&&this.owner._resource.hasLink("new_report_web")},ReportEmptyStateController.prototype.imageIsPng=function(){return!!this.imageSrc().match(/\.png$/)},ReportEmptyStateController.prototype.imageIsSvg=function(){return!!this.imageSrc().match(/\.svg$/)},ReportEmptyStateController.$inject=["AssetService"],ReportEmptyStateController}(),controllerAs:"ctrl"};r.module("mode.components").component("reportEmptyState",qr);var Jr=function(e){return{restrict:"A",scope:{space:"<",owner:"<",account:"<"},link:function(t,n,r){n.on("click.spaceMembership",function(n){e.open({space:t.space,owner:t.owner,account:t.account},{controller:Xt,controllerAs:"ctrl",bindToController:!0,template:qt.a})}),t.$on("$destroy",function(){return n.off("click.spaceMembership")})}}};Jr.$inject=["ModalService"],r.module("mode.components").directive("editSpaceMembership",Jr);var Xr={bindings:{textareaModel:"=",mode:"@?",maxLines:"@?"},template:'\n<div class="ace-textarea-editor" style="height:300px; width:100%;"></div>\n',controller:function(){function AceTextareaController(e,t,n,r){this.ace=e,this.$timeout=t,this.$element=n,this.$scope=r}return AceTextareaController.prototype.$onInit=function(){var e=this,t=this.$element.find(".ace-textarea-editor");this.editor=this.ace.edit(t[0]),this.editor.getSession().setUseWorker(!1),this.editor.$blockScrolling=1/0,this.editor.renderer.$fontMetrics.setPolling(!1),this.editor.getSession().setMode("ace/mode/"+(this.mode||"javascript")),this.editor.setAutoScrollEditorIntoView(!0),this.editor.setHighlightActiveLine(!0),this.editor.setShowPrintMargin(!1),this.editor.container.style.lineHeight="18px",this.editor.setOptions({fontFamily:"AtlasTypewriter",fontSize:12,maxLines:this.maxLines||25,showGutter:!0,enableBasicAutocompletion:!1,behavioursEnabled:!0}),this.editor.getSession().setTabSize(2),this.editor.commands.removeCommand("find"),this.editor.commands.removeCommand("gotoline"),this.editor.commands.bindKey("ctrl-space",null),this.editor.commands.bindKey("ctrl-shift-space",null),this.editor.commands.bindKey("alt-space",null),this.editor.commands.addCommands([{name:"nouppercase",bindKey:{win:"Ctrl-U",mac:"Ctrl-U"},exec:function(){return!1}},{name:"nofindnext",bindKey:{win:"Ctrl-K",mac:"Ctrl-K"},exec:function(){return!1}},{name:"bluronescape",bindKey:{win:"esc",mac:"esc"},exec:function(e){e.blur()}}]);this.editor.on("change",Object(y.debounce)(function(){e.editor.renderer.$fontMetrics.checkForSizeChanges()},200)),this.$scope.$watch("ctrl.textareaModel",function(t,n){e.editor.session.getValue()!==t&&e.editor.getSession().setValue(t)}),this.editor.getSession().on("change",function(t){var n=e.editor.session.getValue();e.$scope.$$phase||e.$scope.$root.$$phase||e.$scope.$evalAsync(function(){e.textareaModel=n})})},AceTextareaController.prototype.$onDestroy=function(){w()(this.editor.textInput.getElement()).off("keypress"),this.editor.destroy()},AceTextareaController.$inject=["ace","$timeout","$element","$scope"],AceTextareaController}(),controllerAs:"ctrl"};r.module("mode.components").component("aceTextarea",Xr);var Kr=function(){function RunHistoryController(e,t){this.$scope=e,this.ReportRunModel=t,this.loading=!0}return RunHistoryController.prototype.$onChanges=function(e){e.runsCollection&&this.watchRunsCollection()},RunHistoryController.prototype.watchRunsCollection=function(){var e=this;this.runsCollection.watch(this.$scope,function(t){e.ReportRunModel.buildRunsWithCreator(t).then(function(t){e.runs=t,e.loading=!1}).catch(function(e){this.loading=!1})})},RunHistoryController.prototype.generateTooltip=function(e){if(e.parameters){var t="";return Object(y.each)(e.parameters,function(e,n){var r=n.toString().replace(/\'/g,"\\'"),o=e.toString().replace(/\'/g,"\\'");t+="<div>"+r+"<br>"+o+"</div>"}),t}return""},RunHistoryController.prototype.more=function(){var e=this;this.runsCollection&&(this.loading=!0,this.runsCollection.next().then(function(t){e.runsCollection=t}))},RunHistoryController.$inject=["$scope","ReportRunModel"],RunHistoryController}();Kr.$inject=["$scope","ReportRunModel"];var eo,to={bindings:{runsCollection:"<",currentRunToken:"@"},template:'\n<div class="well next-well">\n  <ul class="dynamic-rows">\n    <li class="dynamic-row" ng-repeat="run in ctrl.runs | orderBy: \'-createdAt\'">\n      <span class="html-tooltip">\n        <a class="dynamic-row-link row" ng-class="{active: ctrl.currentRunToken === run.token}" ng-href="{{ run._resource.links(\'share\').href }}" target="_self" uib-tooltip-html="\'{{ ::ctrl.generateTooltip(run) }}\'">\n          <span class="open-link">Open Run</span>\n          <span class="success-icon col-xs-2">\n            <i class="icon-success-check-color" ng-show="run.state === \'succeeded\'"></i>\n            <i class="icon-warning-small" ng-show="run.state === \'cancelled\'"></i>\n            <i class="icon-fail-color" ng-show="run.state === \'failed\'"></i>\n            <i class="icon-running-gray" ng-show="run.state === \'running\' || run.state === \'enqueued\'"></i>\n          </span>\n\n          <span class="col-xs-3">\n            <span ng-if="run.completedAt" title="{{ run.completedAt }}">{{ run.completedAt | date : "MMM d \'at\' h:mma" }}</span>\n            <span ng-if="!run.completedAt && (run.state === \'running\' || run.state === \'enqueued\')">Running</span>\n          </span>\n\n          <span class="col-xs-7">\n            <mode-avatar options="run.account.avatar" size="20"></mode-avatar>\n\n            <span class="run-creator">\n              {{ run._resource.hasLink(\'report_schedule\') ? \'Scheduled run\' : \'Run\' }} by <span class="name">{{ run.account.name }}</span>\n            </span>\n          </span>\n        </a>\n      </span>\n    </li>\n  </ul>\n  <span class="runs-loader icon-logo-animated" ng-show="ctrl.loading"></span>\n  <p class="empty-msg" ng-show="!ctrl.loading && (!ctrl.runs || !ctrl.runs.length)">This {{ type }} has not been run yet.</p>\n  <a href="#" ng-click="ctrl.more()" ng-show="!ctrl.loading" class="runs-more" ng-if="ctrl.runsCollection && ctrl.runsCollection.hasNext()">Show More Runs</a>\n</div>\n\n',controller:Kr,controllerAs:"ctrl"};r.module("mode.components").component("runHistory",to),function(e){e.Light="Light",e.Dark="Dark"}(eo||(eo={}));var no=eo.Light,ro=function(){function ModeStudioBadgeController(e,t){this.$window=e,this.FeatureToggleService=t,this.theme=no,this.isEnabled$=t.featureModeStudioEnabled$}return ModeStudioBadgeController.prototype.getClasses=function(){return{"theme-dark":this.theme===eo.Dark,"theme-light":this.theme===eo.Light}},ModeStudioBadgeController.$inject=["$window","FeatureToggleService"],ModeStudioBadgeController}(),oo=n("8YRt"),io={bindings:{title:"@?"},controller:function(){function SimpleHeaderController(e,t,n,r,o,i,a,l,s,c){this.$scope=e,this.$window=t,this.$timeout=n,this.AccountModel=r,this.SpaceModel=o,this.ModeCollection=i,this.ApiModel=a,this.$q=l,this.FeatureToggleService=s,this.DataLayerFlipperService=c}return SimpleHeaderController.prototype.$onInit=function(){this.$q.all([this.getAccount(),this.getOwner()]).then(this.$q.spread(this.getAccountAndOwnerResources.bind(this)))},SimpleHeaderController.prototype.getAccount=function(){var e=w()("meta[name=current-username]").attr("content");return this.AccountModel.find({username:e,useEntryPath:!0,refresh:!0,includes:["organizations","organization_features"]})},SimpleHeaderController.prototype.getOwner=function(){var e=w()("meta[name=owner-username]").attr("content");return this.AccountModel.find({username:e,useEntryPath:!0,includes:["spaces","data_sources","organization_features"]})},SimpleHeaderController.prototype.getAccountAndOwnerResources=function(e,t){var n=this;this.account=e,e.organizations().then(this.ModeCollection.elements).then(function(e){n.organizations=e}),this.owner=t,t.spaces().then(this.ModeCollection.elements).then(function(e){n.spaces=e.sort(n.SpaceModel.navbarSort)}),this.isCommunityContext=this.owner.user,this.FeatureToggleService.updateLocalState(oo.a.orgToFeatureFlags(e._resource,t._resource)),this.getApi().then(this.getDataSources.bind(this))},SimpleHeaderController.prototype.getApi=function(){return this.ApiModel.find({id:"root",useEntryPath:!0,includes:"data_sources"})},SimpleHeaderController.prototype.getDataSources=function(e){this.$q.all([e.dataSources(),this.owner.dataSources()]).then(this.$q.spread(this.getAndCombineDataSourceElements.bind(this)))},SimpleHeaderController.prototype.getAndCombineDataSourceElements=function(e,t){this.$q.all([e.elements(),t.elements()]).then(this.$q.spread(this.combineDataSources.bind(this)))},SimpleHeaderController.prototype.combineDataSources=function(e,t){this.datasources=t.concat(e)},SimpleHeaderController.$inject=["$scope","$window","$timeout","AccountModel","SpaceModel","ModeCollection","ApiModel","$q","FeatureToggleService","DataLayerFlipperService"],SimpleHeaderController}(),controllerAs:"ctrl",template:'\n<div class="top-level-header dark-sidebar">\n  <nav-flyout\n    account="ctrl.account"\n    owner="ctrl.owner"\n    organizations="ctrl.organizations"\n    datasources="ctrl.datasources"\n    spaces="ctrl.spaces">\n  </nav-flyout>\n  <a ng-href="{{ ctrl.owner.homeLink }}" class="mode-header-avatar" ng-if="ctrl.owner">\n    <mode-avatar\n      options="ctrl.owner.avatar"\n      size="25"\n      community="{{ ctrl.owner.user }}">\n    </mode-avatar>\n  </a>\n</div>\n<div class="header-title">{{ ctrl.title }}</div>\n<help-menu is-community="ctrl.isCommunityContext" class="help-menu-component"></help-menu>\n<trial-banner owner="ctrl.owner"></trial-banner>\n<mode-studio-badge\n  org-username="ctrl.owner.username"\n  theme="'+eo.Light+'">\n</mode-studio-badge>\n  '};r.module("mode.components").component("simpleHeader",io);var ao={bindings:{account:"<",organizations:"<",datasources:"<",owner:"<",spaces:"<",withPlatformHeader:"<"},controller:function(){function NavFlyoutController(e,t,n,r,o,i,a,l,s){this.$scope=e,this.$window=t,this.$timeout=n,this.AccountModel=r,this.SpaceModel=o,this.ModeCollection=i,this.DataLayerFlipperService=l,this.$compile=s,a.connectPath(e,"navSidebar",this.updateNavState.bind(this))}return NavFlyoutController.prototype.$onInit=function(){this.navVisible=!1,w()(".mode-nav-flyout").length||(this.navbar=this.$compile('\n<div class="mode-nav-flyout dark-sidebar" ng-class="{show: ctrl.navVisible, \'sidebar-open\': ctrl.navVisible}">\n  <nav-sidebar\n    ng-if="ctrl.account && ctrl.owner && ctrl.organizations"\n    organizations="ctrl.organizations"\n    account="ctrl.account"\n    datasources="ctrl.datasources"\n    owner="ctrl.owner"\n    spaces="ctrl.spaces"\n    with-platform-header="ctrl.withPlatformHeader">\n  </nav-sidebar>\n</div>\n<div class="navbar-mask navbar-mask-flyout" ng-class="{\'sidebar-open\': ctrl.navVisible}"></div>\n')(this.$scope),w()("body").append(this.navbar))},NavFlyoutController.prototype.$onDestroy=function(){this.navbar&&this.navbar.remove()},NavFlyoutController.prototype.updateNavState=function(e){this.view=e},NavFlyoutController.prototype.toggleNav=function(){var e=this;this.navVisible||(this.navVisible=!0,w()("body").addClass("sidebar-open with-sidebar"),this.$timeout(function(){w()(e.$window).on("click.modeNav",e.handleNavDismiss.bind(e))}))},NavFlyoutController.prototype.isActionInNavbarNotDropdown=function(e){return!!e.closest(".navbar-action").length&&!e.closest(".navbar-dropdown").length},NavFlyoutController.prototype.isOutsideNavbar=function(e){return!e.closest("nav-sidebar").length&&!e.closest(".mode-nav-actions").length},NavFlyoutController.prototype.isOldNavbarCheck=function(e){return!e.closest(".mode-nav-flyout").length||e.closest(".mode-header-logo").length},NavFlyoutController.prototype.handleNavDismiss=function(e){var t=this,n=w()(e.target);(this.isOldNavbarCheck(n)||this.isActionInNavbarNotDropdown(n)||this.isOutsideNavbar(n))&&(w()(this.$window).off("click.modeNav"),this.$scope.$apply(function(){t.navVisible=!1,w()("body").removeClass("sidebar-open")}))},NavFlyoutController.$inject=["$scope","$window","$timeout","AccountModel","SpaceModel","ModeCollection","StoreService","DataLayerFlipperService","$compile"],NavFlyoutController}(),controllerAs:"ctrl",template:'\n<div class="mode-nav-actions">\n  <a href="#" class="mode-header-logo dark-sidebar" ng-click="ctrl.toggleNav()" ng-class="{\'nav-open\': ctrl.navVisible}">\n    <div class="burger-wrapper dark"><div class="burger"></div></div>\n    <i class="icon-logo"></i>\n  </a>\n</div>\n  '};r.module("mode.components").component("navFlyout",ao);var lo={bindings:{account:"<",organizations:"<",owner:"<",spaces:"<",space:"<",view:"<",state:"<",datasources:"<",datasource:"<"},controller:function(){function HomeHeaderController(e,t,n,r,o){this.$scope=e,this.$window=t,this.$timeout=n,this.store=r,this.DataLayerFlipperService=o}return HomeHeaderController.prototype.$onInit=function(){this.navVisible=!1,this.store.connectPath(this.$scope,"navSidebar.sidebarOpen",this.updateNavState.bind(this)),this.isCommunityContext=this.owner.user},HomeHeaderController.prototype.updateNavState=function(e){this.sidebarOpen=e},HomeHeaderController.prototype.toggleNav=function(){var e=this;this.sidebarOpen||(this.store.dispatch(ur.e()),$("body").addClass("sidebar-scroll"),this.$timeout(function(){$(e.$window).on("click.modeNav",e.handleNavDismiss.bind(e))}))},HomeHeaderController.prototype.isActionInNavbarNotDropdown=function(e){return!!e.closest(".navbar-action").length&&!e.closest(".navbar-dropdown").length},HomeHeaderController.prototype.isOutsideNavbar=function(e){return!e.closest("nav-sidebar").length&&!e.closest(".mode-nav-actions").length},HomeHeaderController.prototype.handleNavDismiss=function(e){var t=this,n=$(e.target);(this.isActionInNavbarNotDropdown(n)||this.isOutsideNavbar(n))&&($(this.$window).off("click.modeNav"),this.$scope.$apply(function(){t.store.dispatch(ur.b()),$("body").removeClass("sidebar-scroll")}))},HomeHeaderController.$inject=["$scope","$window","$timeout","StoreService","DataLayerFlipperService"],HomeHeaderController}(),controllerAs:"ctrl",template:'\n<div class="top-level-header">\n  <a href="#" class="mode-header-logo header-sm-logo" ng-click="ctrl.toggleNav()" ng-hide="ctrl.sidebarOpen" ng-class="{\'nav-open\':ctrl.sidebarOpen}">\n    <div class="burger-wrapper dark"><div class="burger"></div></div>\n    <i class="icon-logo"></i>\n  </a>\n</div>\n<space-title\n  ng-if="ctrl.view.name !== \'datasource\'"\n  class="header-title"\n  owner="ctrl.owner"\n  account="ctrl.account"\n  view="ctrl.view"\n  state="ctrl.state"\n  space="ctrl.space"\n  spaces="ctrl.spaces">\n</space-title>\n<datasource-title\n  ng-if="ctrl.view.name === \'datasource\'"\n  class="header-title"\n  datasource="ctrl.datasource">\n</datasource-title>\n<sidebar-search owner="ctrl.owner"></sidebar-search>\n<a uib-tooltip="New Report" ng-if="ctrl.owner.newReportLink !== \'#\'" tooltip-placement="bottom" ng-href="{{ ctrl.owner.newReportLink }}" target="_self" class="header-new-report-link"><i class="icon-plus-large-white header-new-report-icon"></i></a>\n<help-menu is-community="ctrl.isCommunityContext" class="help-menu-component"></help-menu>\n<mode-studio-badge\n  org-username="ctrl.owner.username"\n  theme="'+eo.Light+'">\n</mode-studio-badge>\n  '};r.module("mode.components").component("homeHeader",lo);var so={bindings:{owner:"<",account:"<",view:"<",space:"<",spaces:"<",state:"<"},controller:function(){function SpaceTitleController(e,t,n,r,o,i,a,l){this.$scope=e,this.AlertService=t,this.ModeCollection=n,this.SpaceMembershipModel=r,this.SpaceModel=o,this.$log=i,this.store=a,this.$timeout=l}return SpaceTitleController.prototype.deleteSpace=function(e){var t=this;e.destroy().then(this.deleteSpaceLocally.bind(this,e)).then(this.alertSuccessAndRedirect.bind(this,"Deleted space")).catch(function(e){e&&400===e.status&&e.data&&e.data.message?t.AlertService.error(e.data.message):t.AlertService.error("Could not delete space")})},SpaceTitleController.prototype.removeFromSpace=function(){var e=this;this.space.spaceMemberships().then(this.ModeCollection.elements).then(this.removeAccountFromSpaceMembership.bind(this,this.space)).catch(function(t){e.$log.warn("error with space membership",t)})},SpaceTitleController.prototype.removeAccountFromSpaceMembership=function(e,t){var n=this,r=y.find(t,function(e){return n.account.email===e.email});r&&r.destroy().then(this.removeMembershipFromSpace.bind(this,e)).then(this.removeSpaceLocally.bind(this,e)).then(this.alertSuccessAndRedirect.bind(this,"Removed from space")).catch(function(){n.AlertService.error("Error leaving space")})},SpaceTitleController.prototype.removeMembershipFromSpace=function(e){e.removeSpaceMembershipLink()},SpaceTitleController.prototype.deleteSpaceLocally=function(e){this.store.dispatch(Je.e(e))},SpaceTitleController.prototype.removeSpaceLocally=function(e){this.store.dispatch(Je.r(e))},SpaceTitleController.prototype.insertToSpaces=function(e){this.store.dispatch(Je.q(e))},SpaceTitleController.prototype.addToSpace=function(){this.store.dispatch(Je.b(this.space,this.account.token,this.SpaceMembershipModel,this.SpaceModel,this.AlertService,this.insertToSpaces.bind(this)))},SpaceTitleController.prototype.alertSuccessAndRedirect=function(e){this.AlertService.success(e),this.state.go("root.homeMyWork",{ownerId:this.owner.username})},SpaceTitleController.prototype.setUserMembership=function(e){var t=this;this.userMembership=y.find(e,function(e){return t.account.email===e.email})},SpaceTitleController.prototype.canLeaveSpace=function(){return this.space&&this.space._resource&&Vt.a.canLeave(this.space._resource)},SpaceTitleController.prototype.canJoinSpace=function(){return this.space&&this.space._resource&&Vt.a.canJoin(this.space._resource)},SpaceTitleController.prototype.canDeleteSpace=function(){return this.space&&this.space._resource&&Vt.a.canDestroy(this.space._resource)},SpaceTitleController.prototype.canEditSpaceMemberships=function(){return this.space&&this.space._resource&&Vt.a.canEditMemberships(this.space._resource)},SpaceTitleController.$inject=["$scope","AlertService","ModeCollection","SpaceMembershipModel","SpaceModel","$log","StoreService","$timeout"],SpaceTitleController}(),controllerAs:"ctrl",template:'\n<div\n  uib-dropdown\n  dropdown-append-to-body\n  class="dropdown header-title-dropdown"\n  ng-if="ctrl.space && !ctrl.space.private && !ctrl.space.community">\n  <i class="icon-private-report-lock header-title-restricted" ng-if="ctrl.space.restricted"></i>\n  <a href="#" uib-dropdown-toggle class="dropdown-toggle">\n    {{ ctrl.space.name || ctrl.view.title }}\n    <i class="icon-space-settings header-title-options"></i>\n  </a>\n  <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right">\n    <li ng-if="ctrl.canEditSpaceMemberships()"><a href="#" edit-space-membership space="ctrl.space" owner="ctrl.owner" account="ctrl.account">Add Members</a></li>\n    <li ng-if="!ctrl.space.community && !ctrl.space.private"><a href="#" rename-space space="ctrl.space" owner="ctrl.owner">Rename Space</a></li>\n    <li ng-if="ctrl.canLeaveSpace()"><a href="#" ng-click="ctrl.removeFromSpace()">Leave Space</a></li>\n    <li ng-if="ctrl.canJoinSpace()"><a href="#" ng-click="ctrl.addToSpace()">Join Space</a></li>\n    <li ng-if="ctrl.canDeleteSpace()">\n      <a href="#"\n        confirm-modal="Are you sure you want to delete this space?"\n        confirm-modal-title="Delete Space"\n        confirm-modal-on-confirm="ctrl.deleteSpace(ctrl.space)">Delete Space\n      </a>\n    </li>\n  </ul>\n</div>\n<div ng-if="!ctrl.space || ctrl.space.private || ctrl.space.community">{{ ctrl.view.title }}</div>\n  '};r.module("mode.components").component("spaceTitle",so);var co={bindings:{owner:"<",account:"<",datasource:"<"},controller:function(){function DatasourceTitleController(e,t,n){this.$scope=e,this.AlertService=t,this.ModeCollection=n}return DatasourceTitleController.$inject=["$scope","AlertService","ModeCollection"],DatasourceTitleController}(),controllerAs:"ctrl",template:'\n<div\n  uib-dropdown\n  dropdown-append-to-body\n  class="dropdown header-title-dropdown"\n  ng-if="ctrl.datasource && !ctrl.datasource.public">\n  <i class="icon-private-report-lock header-title-restricted" ng-if="ctrl.space.restricted"></i>\n  <a href="#" uib-dropdown-toggle class="dropdown-toggle">\n    {{ ctrl.datasource.fullname || \'Datasource\' }}\n    <i class="icon-space-settings header-title-options"></i>\n  </a>\n  <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right">\n    <li><a href="{{ ctrl.datasource._resource.links(\'web\').href }}" target="_self">Settings</a></li>\n  </ul>\n</div>\n<div ng-if="ctrl.datasource.public">{{ ctrl.datasource.fullname }}</div>\n  '};r.module("mode.components").component("datasourceTitle",co);var uo,po,ho=n("vqB5");!function(e){e.Dropdown="Dropdown",e.Menu="Menu"}(uo||(uo={})),function(e){e.Report="Report",e.Editor="Editor",e.DefinitionEditor="DefinitionEditor"}(po||(po={}));var go,mo=function(){function PlatformHeaderNavController(e,t,n){this.$element=e,this.$window=t,this.$timeout=n,this.popOverEnabled=!1,this.staleRunAtEnabled=!1}return PlatformHeaderNavController.prototype.$onInit=function(){this.navType=this.navType||po.Report},PlatformHeaderNavController.prototype.$onChanges=function(e){var t=this;if(e.options){var n=this.navMenuVisibleLimit(),r=function(e){var n=e[0],r=e[1],o=void 0===r?{}:r;return o.name?t.options.get(n).set("name",o.name):t.options.get(n)},o=function(e){var t=e[0],n=e[1],o=void 0===n?{}:n,i=o.children;o.name;return i&&Array.isArray(i)&&i.length?[t,Object(ho.a)([[t,o]].concat(i).map(r))]:[t,r([t,o])]},i=function(e,n){return t.options.get(n).isGranted()};this.$timeout(function(){t.orderedDropdownOptions=t.navSchema(uo.Dropdown).mapEntries(o),t.orderedVisibleOptions=t.navSchema(uo.Menu).take(n).filter(i).mapEntries(o),t.orderedOverflowOptions=t.navSchema(uo.Menu).skip(n).filter(i).mapEntries(o),t.orderedDropdownOptionsArray=t.orderedDropdownOptions.valueSeq().toArray(),t.orderedOverflowOptionsArray=t.orderedOverflowOptions.valueSeq().toArray(),t.orderedVisibleOptionsArray=t.orderedVisibleOptions.valueSeq().toArray()})}},PlatformHeaderNavController.prototype.navMenuVisibleLimit=function(){var e,t=this,n={Report:5,Editor:5,DefinitionEditor:2},r=n[this.navType]||n.Report,o=[];return this.navSchema(uo.Menu).keySeq().toArray().some(function(e,n){return t.options.get(e).isGranted()&&o.push(n),o.length===r}),e=(o.pop()||0)+1,Math.max(e,r)},PlatformHeaderNavController.prototype.handleDefinitionCreated=function(e){var t=null;e&&(t=e.editLink),this.onDefinitionCreated({$redirectLink:t})},PlatformHeaderNavController.prototype.handleDefinitionUpdate=function(e){e&&this.onDefinitionUpdate({$definitionModel:e})},PlatformHeaderNavController.prototype.handleDefinitionDelete=function(e){this.onDefinitionDelete()},PlatformHeaderNavController.prototype.handleSimpleShareClick=function(e){this.onSimpleShare()},PlatformHeaderNavController.prototype.handleViewDetailsClick=function(e){this.onViewDetails()},PlatformHeaderNavController.prototype.handleViewReportClick=function(e){this.onViewReport()},PlatformHeaderNavController.prototype.handleRunReportClick=function(e){var t=this.options.get("[Report] Run",void 0);t&&t.isEnabled()&&t.isGranted()&&this.onRunReport()},PlatformHeaderNavController.prototype.handleOpenViewDetails=function(){this.onViewDetails()},PlatformHeaderNavController.prototype.handleReportSpaceTransfer=function(e){this.onReportSpaceTransfer({$space:e})},PlatformHeaderNavController.prototype.handleSave=function(){this.onSaveClick()},PlatformHeaderNavController.prototype.handleSync=function(e){this.onSyncClick({$commitMessage:e})},PlatformHeaderNavController.prototype.handleNavDropdownItemClick=function(e,t){var n=this.$element.find('[data-app-action-id="'+t+'"] a'),o=this.$window.document.querySelector('.dropdown-menu [data-app-action-id="'+t+'"] a');this.$timeout(function(){r.element(n.length?n:o).trigger("click")})},PlatformHeaderNavController.prototype.handleMobileMenuToggle=function(e){this.onMobileMenuToggle({$isOpen:e})},PlatformHeaderNavController.prototype.reportRunIsStale=function(){return this.reportRunAt&&this.reportRunAt.valueOf()<Date.now()-864e5},PlatformHeaderNavController.prototype.navSchema=function(e){var t,n,r,o;return void 0===e&&(e=uo.Menu),((t={})[po.Report]=((n={})[uo.Menu]=Object(ho.c)([["[Report] ViewDetails"],["[Report] ViewReport"],["[Report] Edit"],["[Report] Share"],["[Report] SimpleShare"],["[Report] ExportAll"],["[Report] Export",{children:[["[Report] ExportCsv"],["[Report] ExportPdf"],["[Report] ExportPdfDownload"],["[Report] ExportPython"]]}],["[Report] Subscribe"],["[Report] Clone"],["[Report] CloneLoggedOut"],["[Report] Embed"],["[Report] Fullscreen"]]),n[uo.Dropdown]=Object(ho.c)([["[Report] Run"],["[Report] ViewDetails"],["[Report] ViewReport"],["[Report] Edit"],["[Report] Share"],["[Report] SimpleShare"],["[Report] ExportAll"],["[Report] ExportCsv",{name:"Export CSV"}],["[Report] ExportPdf",{name:"Export PDF"}],["[Report] ExportPdfDownload",{name:"Export PDF"}],["[Report] ExportPython",{name:"Export Python"}],["[Report] Subscribe"],["[Report] Clone"],["[Report] CloneLoggedOut"],["[Report] Embed"],["[Report] Fullscreen"]]),n),t[po.Editor]=((r={})[uo.Menu]=Object(ho.c)([["[Report] ManageReport",{children:[["[Report] Save"],["[Report] Sync"],["[Report] ViewGithub"],["[Report] Move"],["[Report] CreateShortcut"],["[Report] Rename"],["[Report] Clone"],["[Report] Settings"],["[Report] Delete"]]}],["[Report] Embed"],["[Report] Share"],["[Report] Schedule"],["[Report] ViewReport",{name:"View"}]]),r[uo.Dropdown]=Object(ho.c)([["[Report] Save"],["[Report] Sync"],["[Report] ViewGithub"],["[Report] Move"],["[Report] CreateShortcut"],["[Report] Rename"],["[Report] Clone"],["[Report] Settings"],["[Report] Delete"],["[Report] Embed"],["[Report] Share"],["[Report] Schedule"],["[Report] ViewReport",{name:"View"}]]),r),t[po.DefinitionEditor]=((o={})[uo.Menu]=Object(ho.c)([["[Definition] Create"],["[Definition] Settings"],["[Definition] Sync"],["[Definition] ViewGithub"],["[Definition] Delete"]]),o[uo.Dropdown]=Object(ho.c)([["[Definition] Create"],["[Definition] Settings"],["[Definition] Sync"],["[Definition] ViewGithub"],["[Definition] Delete"]]),o),t)[this.navType][e]||Object(ho.c)([])},PlatformHeaderNavController.prototype.optionIs=function(e,t){return e&&e.get("id",void 0)===t},PlatformHeaderNavController.prototype.resolveOption=function(e){return this.optionHasChildren(e)?this.getIndexOption(e):e},PlatformHeaderNavController.prototype.optionHasChildren=function(e){return ho.a.isList(e)},PlatformHeaderNavController.prototype.getIndexOption=function(e){return e.get(0)},PlatformHeaderNavController.prototype.getChildrenOptionsAsArray=function(e){return e.slice(1).toArray()},PlatformHeaderNavController.prototype.getClonePath=function(){return this.reportRun&&this.reportRun._resource&&this.reportRun._resource.hasLink("web_clone")&&this.reportRun._resource.links("web_clone").href},PlatformHeaderNavController.prototype.isInlineMobileOption=function(e){var t=this;return["[Report] Embed","[Report] Fullscreen","[Report] Clone","[Report] CloneLoggedOut","[Report] Delete","[Report] Settings","[Report] Rename","[Report] Move","[Report] Save","[Report] CreateShortcut","[Report] ViewReport","[Report] Edit","[Report] ExportCsv","[Report] ExportPdf","[Report] ExportPdfDownload","[Report] ExportPython","[Report] ViewGithub","[Definition] ViewGithub"].some(function(n){return t.optionIs(e,n)})},PlatformHeaderNavController.prototype.runButtonTooltipText=function(e){return e?"Usually finishes in "+l.a.duration(1e3*this.expectedRuntime).humanize():"Running this report has been disabled. It will \n continue to run on a schedule."},PlatformHeaderNavController.$inject=["$element","$window","$timeout"],PlatformHeaderNavController}(),fo=n("0ivk"),Co=n("SdCE"),yo=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();!function(e){!function(e){e.Clone="[Report] Clone",e.CloneLoggedOut="[Report] CloneLoggedOut",e.CreateShortcut="[Report] CreateShortcut",e.Delete="[Report] Delete",e.Edit="[Report] Edit",e.Embed="[Report] Embed",e.Export="[Report] Export",e.ExportAll="[Report] ExportAll",e.ExportCsv="[Report] ExportCsv",e.ExportPdf="[Report] ExportPdf",e.ExportPdfDownload="[Report] ExportPdfDownload",e.ExportPython="[Report] ExportPython",e.Fullscreen="[Report] Fullscreen",e.Save="[Report] Save",e.Share="[Report] Share",e.SimpleShare="[Report] SimpleShare",e.ManageReport="[Report] ManageReport",e.Move="[Report] Move",e.Rename="[Report] Rename",e.Run="[Report] Run",e.Schedule="[Report] Schedule",e.Settings="[Report] Settings",e.Subscribe="[Report] Subscribe",e.Sync="[Report] Sync",e.ViewDetails="[Report] ViewDetails",e.ViewGithub="[Report] ViewGithub",e.ViewReport="[Report] ViewReport",e.StarReport="[Report] StarReport"}(e.Report||(e.Report={})),function(e){e.Create="[Definition] Create",e.Settings="[Definition] Settings",e.Delete="[Definition] Delete",e.Sync="[Definition] Sync",e.ViewGithub="[Definition] ViewGithub"}(e.Definition||(e.Definition={}))}(go||(go={}));var bo,vo,Io=function(e){function MenuOptionRecord(t){return t?e.call(this,t)||this:e.call(this)||this}return yo(MenuOptionRecord,e),MenuOptionRecord.prototype.isEnabled=function(){return this.get("enabled",void 0)},MenuOptionRecord.prototype.isGranted=function(){return this.get("granted",void 0)},Object.defineProperty(MenuOptionRecord.prototype,"href",{get:function(){return this.get("href",void 0)},enumerable:!0,configurable:!0}),MenuOptionRecord}(Object(ho.e)({id:null,enabled:!1,granted:!1,name:"",href:""})),So=n("cM/6");(vo=bo||(bo={})).getCanEditSelectedReport=Object(Co.createSelector)(K.S,function(e){return So.a.canEditReport(e)}),vo.getCanCreateSelectedReportSubscription=Object(Co.createSelector)(K.S,function(e){return So.a.canCreateReportSchedule(e)});var wo,Ao,Mo,ko,To,xo,Do,Lo,Ro,No,Eo,jo,Oo,Po,Fo,zo,_o,$o=n("nz4i");To=wo||(wo={}),Do=_t.getCsvLink,Lo=_t.hasCsvLink,Ro=_t.canEmbed,No=So.a.hasBeenRun,Eo=So.a.isCommunity,jo=So.a.canSyncToGithub,Oo=So.a.canCreateSpaceLink,Po=So.a.getGithubLink,Fo=Lt.isEmailVerified,zo=$o.a.isEditor,_o=Vt.a.isOpen,To.getOptionEdit=Object(Co.createSelector)(K.S,bo.getCanEditSelectedReport,function(e,t){var n=t,r=e&&e.hasLink("web_edit")&&e.links("web_edit").href||"";return new Io({id:"[Report] Edit",name:"Edit",enabled:!0,granted:n,href:r})}),To.getOptionSchedule=Object(Co.createSelector)(K.S,K.f,bo.getCanCreateSelectedReportSubscription,function(e,t,n){var r=n&&Fo(t)&&!Eo(e),o=No(e);return new Io({id:"[Report] Schedule",name:"Schedule",enabled:o,granted:r})}),To.getOptionSubscribe=Object(Co.createSelector)(K.S,K.j,bo.getCanCreateSelectedReportSubscription,function(e,t,n){var r=t&&n&&!Eo(e),o=No(e);return new Io({id:"[Report] Subscribe",name:"Subscribe",enabled:o,granted:r})}),To.getOptionExportCsv=Object(Co.createSelector)(K.R,function(e){var t=e&&e.resource,n=Do(t),r=Lo(t);return new Io({id:"[Report] ExportCsv",name:"CSV",enabled:!!n,granted:r,href:n})}),To.getOptionSync=Object(Co.createSelector)(K.S,function(e){var t=jo(e),n=No(e);return new Io({id:"[Report] Sync",name:"Push to GitHub",enabled:n,granted:t})}),To.getOptionViewGithub=Object(Co.createSelector)(K.S,function(e){var t=Po(e);return new Io({id:"[Report] ViewGithub",name:"View in GitHub",granted:!!t,enabled:!0,href:t})}),To.getOptionEmbed=Object(Co.createSelector)(K.S,K.R,K.j,K.C,function(e,t,n,r){var o=t&&t.resource,i=n&&Ro(o)&&(!Eo(e)||zo(r)),a=No(e);return new Io({id:"[Report] Embed",name:"Embed",enabled:a,granted:i})}),To.getOptionCreateShortcut=Object(Co.createSelector)(K.S,K.W,function(e,t){var n=Oo(e)&&_o(t),r=No(e);return new Io({id:"[Report] CreateShortcut",name:"Create shortcut\u2026",enabled:r,granted:n})}),To.getOptionsById=Object(Co.createStructuredSelector)(((xo={})["[Report] Edit"]=To.getOptionEdit,xo["[Report] Schedule"]=To.getOptionSchedule,xo["[Report] Subscribe"]=To.getOptionSubscribe,xo["[Report] ExportCsv"]=To.getOptionExportCsv,xo["[Report] Sync"]=To.getOptionSync,xo["[Report] ViewGithub"]=To.getOptionViewGithub,xo["[Report] Embed"]=To.getOptionEmbed,xo["[Report] CreateShortcut"]=To.getOptionCreateShortcut,xo)),Ao=To.SelectorFactories||(To.SelectorFactories={}),Mo=Rt.ModeResourceHelper.resourcesToModels,ko=Rt.ModeResourceHelper.resourceToModel,Ao.orgSpaces=function(e){return Object(Co.createSelector)(K.c,function(t){return Mo(t,e.model)})},Ao.orgContext=function(e){return Object(Co.createSelector)(K.v,function(t){return ko(t,e.model)})},Ao.accountContext=function(e){return Object(Co.createSelector)(K.b,function(t){return ko(t,e.model)})},Ao.orgs=function(e){return Object(Co.createSelector)(K.d,function(t){return Mo(t,e.model)})},Ao.account=function(e){return Object(Co.createSelector)(K.f,function(t){return ko(t,e.model)})};var Bo,Vo,Uo,Zo=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},Go=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};!function(e){e.Dark="Dark",e.Light="Light"}(Bo||(Bo={})),function(e){e.Small="Small",e.Large="Large"}(Vo||(Vo={})),function(e){e.Relative="Relative",e.Full="Full"}(Uo||(Uo={}));var Yo=function(){function PlatformHeaderController(e,t,n,r,o,i,a,l,s,c,d,u){var p=this;this.$injector=e,this.$q=t,this.$window=n,this.$attrs=r,this.$timeout=o,this.store=i,this.ModeCollection=a,this.AccountModel=l,this.ApiModel=s,this.OrgModel=c,this.DataSourceModel=d,this.SpaceModel=u,this.navPanelEnabled=!0,this.standaloneEnabled=!1,this._sources={account:new V.BehaviorSubject(null),accountContext:new V.BehaviorSubject(null),expandedViewOpen:new V.BehaviorSubject(null),isLoggedIn:new V.BehaviorSubject(null),orgs:new V.BehaviorSubject(null),orgContext:new V.BehaviorSubject(null),orgDatasources:new V.BehaviorSubject(null),orgSpaces:new V.BehaviorSubject(null)},"true"===this.$attrs.standaloneEnabled?(this.account$=this._sources.account.asObservable(),this.accountContext$=this._sources.accountContext.asObservable(),this.expandedViewOpen$=this._sources.expandedViewOpen.asObservable(),this.isLoggedIn$=this._sources.isLoggedIn.asObservable(),this.orgs$=this._sources.orgs.asObservable(),this.orgContext$=this._sources.orgContext.asObservable(),this.orgSpaces$=this._sources.orgSpaces.asObservable(),this.orgDatasources$=this._sources.orgDatasources.asObservable(),this.updateLocalState()):(this.account$=this.store.select(wo.SelectorFactories.account(this.AccountModel)),this.accountContext$=this.store.select(wo.SelectorFactories.accountContext(this.AccountModel)),this.expandedViewOpen$=this.store.select(K.l),this.isLoggedIn$=this.store.select(K.p),this.orgs$=this.store.select(wo.SelectorFactories.orgs(this.OrgModel)),this.orgContext$=this.store.select(wo.SelectorFactories.orgContext(this.AccountModel)),this.orgSpaces$=this.store.select(wo.SelectorFactories.orgSpaces(this.SpaceModel)).map(function(e){return e&&e.sort(p.SpaceModel.navbarSort)}),this.navPanelEnabled&&this.$injector.has("DataSourceService")&&(this.DataSourceService=this.$injector.get("DataSourceService"),this.orgDatasources$=this.DataSourceService.orgDataSources$.map(function(e){return Rt.ModeResourceHelper.resourcesToModels(e,p.DataSourceModel.model)})))}return PlatformHeaderController.prototype.$onInit=function(){var e=this;this._breakpoint=this.getCurrentBreakpoint(),this.orgContextSubscription$=this.orgContext$.filter(function(e){return!!e}).subscribe(function(t){e._orgContextNewReportLink=t.newReportLink,e._orgContextNewReportLinkAvailable=t._resource.hasLink("new_report_web")}),this.panelDisplayMode$=this.expandedViewOpen$.map(function(e){return e?Uo.Relative:Uo.Full}),this.subscribeToMediaQueryBreakpoints(function(t){e._breakpoint=t})},PlatformHeaderController.prototype.$onDestroy=function(){this.orgContextSubscription$&&this.orgContextSubscription$.unsubscribe()},PlatformHeaderController.prototype.updateLocalState=function(){return Zo(this,void 0,void 0,function(){var e,t,n;return Go(this,function(r){switch(r.label){case 0:e=$("meta[name=current-username]").attr("content"),t=$("meta[name=owner-username]").attr("content"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.loadResourcesToLocalState(e,t)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),fo.a.notifySafely(n),[3,4];case 4:return[2]}})})},PlatformHeaderController.prototype.loadResourcesToLocalState=function(e,t){return Zo(this,void 0,void 0,function(){var n,r,o,i,a,l,s,c,d,u,p,h,g,m,f,C,y,b,v,I,S=this;return Go(this,function(w){switch(w.label){case 0:return[4,this.$q.all([this.AccountModel.find({username:e,useEntryPath:!0,refresh:!0,includes:["organizations","organization_features"]}),this.AccountModel.find({username:t,useEntryPath:!0,includes:["data_sources","organization_features"]}),this.ApiModel.find({id:"root",useEntryPath:!0,includes:"data_sources"})])];case 1:return n=w.sent(),r=n[0],o=n[1],i=n[2],p=(u=this.$q).all,g=(h=this.ModeCollection).elements,[4,i.dataSources()];case 2:return m=[g.apply(h,[w.sent()])],C=(f=this.ModeCollection).elements,[4,o.dataSources()];case 3:return m=m.concat([C.apply(f,[w.sent()])]),b=(y=this.ModeCollection).elements,[4,r.organizations()];case 4:return m=m.concat([b.apply(y,[w.sent()])]),I=(v=this.ModeCollection).elements,[4,o.spaces()];case 5:return[4,p.apply(u,[m.concat([I.apply(v,[w.sent()])])])];case 6:return a=w.sent(),l=a[0],s=a[1],c=a[2],d=a[3],this.$timeout(function(){S._sources.account.next(r),S._sources.accountContext.next(o),S._sources.expandedViewOpen.next(!1),S._sources.isLoggedIn.next(!!r),S._sources.orgs.next(c),S._sources.orgContext.next(o),S._sources.orgDatasources.next(l.concat(s)),S._sources.orgSpaces.next(d.sort(S.SpaceModel.navbarSort))}),[2]}})})},Object.defineProperty(PlatformHeaderController.prototype,"orgContextNewReportLink",{get:function(){return this._orgContextNewReportLink},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformHeaderController.prototype,"orgContextNewReportLinkIsAvailable",{get:function(){return this._orgContextNewReportLinkAvailable},enumerable:!0,configurable:!0}),Object.defineProperty(PlatformHeaderController.prototype,"navDisplayMode",{get:function(){return this._breakpoint===Vo.Large?uo.Menu:uo.Dropdown},enumerable:!0,configurable:!0}),PlatformHeaderController.prototype.getHeaderClasses=function(){return{"editor-top-nav":this.headerStyle===Bo.Dark,"header-style-type-dark":this.headerStyle===Bo.Dark,"header-nav-mode-dropdown":this.navDisplayMode===uo.Dropdown,"header-nav-mode-menu":this.navDisplayMode===uo.Menu}},PlatformHeaderController.prototype.handleSimpleShare=function(){this.onSimpleShare&&this.onSimpleShare()},PlatformHeaderController.prototype.subscribeToMediaQueryBreakpoints=function(e){var t=this;this.$window.matchMedia("(max-width: 768px)").addListener(function(n){t.$timeout(function(){e(n.matches?Vo.Small:Vo.Large)})})},PlatformHeaderController.prototype.getCurrentBreakpoint=function(){return this.$window.document.body.clientWidth<=768?Vo.Small:Vo.Large},PlatformHeaderController.prototype.getStudioBadgeTheme=function(){switch(this.headerStyle){case Bo.Dark:return eo.Dark;case Bo.Light:return eo.Light;default:return null}},PlatformHeaderController.$inject=["$injector","$q","$window","$attrs","$timeout","RxStoreService","ModeCollection","AccountModel","ApiModel","OrgModel","DataSourceModel","SpaceModel"],PlatformHeaderController}(),Qo={bindings:{guest:"<",isCommunity:"<",theme:"<"},controller:function(){function HelpMenuController(e){this.FeatureToggleService=e,this.studioChatEnabled$=e.featureModeStudioEnabled$,this.intercomChatEnabled$=e.featureIntercomChatEnabled$}return HelpMenuController.$inject=["FeatureToggleService"],HelpMenuController}(),controllerAs:"ctrl",template:'\n<div uib-dropdown dropdown-append-to-body class="dropdown clearfix">\n  <a href="#" uib-dropdown-toggle class="header-help-link dropdown-toggle">\n    <i class="{{ ctrl.theme === \''+Bo.Dark+'\' ? \'icon-help-blue-300\' : \'icon-help-blue-500\' }} header-help-icon"></i>\n  </a>\n  <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right help-menu-dropdown">\n    <li class="header help-header no-background">Help & Support</li>\n    <li class="link chat" ng-if="(ctrl.intercomChatEnabled$ | async) && !ctrl.isCommunity"><a href="https://help.modeanalytics.com/articles/contact-us/" target="_blank" rel="noopener" intercom-show><i class="icon-chat-default chat-icon"></i>Chat with us</a>\n    <li class="link chat" ng-if="(ctrl.studioChatEnabled$ | async) || ctrl.isCommunity"><a href="https://help.modeanalytics.com/articles/contact-us/" target="_blank" rel="noopener">Get in touch</a>\n    <li class="link"><a href="https://help.modeanalytics.com" target="_blank" rel="noopener">Documentation</a></li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://forum.modeanalytics.com" target="_blank" rel="noopener">Ask a question in the Forum</a></li>\n    <li class="link" ng-if="ctrl.guest"><a href="https://blog.modeanalytics.com/" target="_blank" rel="noopener">Mode Blog</a></li>\n\n    <li class="divider"></li>\n    <li class="header help-header no-background">Get Started</li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://help.modeanalytics.com/articles/getting-started/" target="_blank" rel="noopener">Learn the basics</a></li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://help.modeanalytics.com/articles/using-mode-throughout-your-business/" target="_blank" rel="noopener">Getting your team onboard</a></li>\n    <li class="link" ng-if="ctrl.guest"><a href="https://help.modeanalytics.com/articles/sharing-reports-outside-your-organization/" target="_blank" rel="noopener">What\'s this report?</a></li>\n    <li class="link" ng-if="ctrl.guest"><a href="https://about.modeanalytics.com/" target="_blank" rel="noopener">About Mode</a></li>\n    <li class="link" ng-if="ctrl.guest"><a href="https://help.modeanalytics.com/articles/getting-started/" target="_blank" rel="noopener">Mode Basics</a></li>\n\n    <li ng-if="!ctrl.guest" class="divider"></li>\n    <li ng-if="!ctrl.guest" class="header help-header no-background">Resources</li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://community.modeanalytics.com" target="_blank" rel="noopener">SQL & Python Tutorials</a></li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://community.modeanalytics.com/gallery/" target="_blank" rel="noopener">Custom Data Viz</a></li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://help.modeanalytics.com/articles/keyboard-shortcuts-for-modes-query-editor/" target="_blank" rel="noopener">Keyboard Shortcuts</a></li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://blog.modeanalytics.com/" target="_blank" rel="noopener">Mode Blog</a></li>\n    <li class="link" ng-if="!ctrl.guest"><a href="https://help.modeanalytics.com/articles/release-notes/" target="_blank" rel="noopener">Release Notes</a></li>\n  </ul>\n</div>\n  '};r.module("mode.components").component("helpMenu",Qo);var Ho={bindings:{onDismiss:"&",report:"<",reportIsEmbedded:"<",reportIsShared:"<"},controller:function(){function SharingBannerController(){}return SharingBannerController.prototype.$onChanges=function(e){this.report&&(this.reportIsShared=this.report.shared,this.reportIsEmbedded=this.report.is_embedded)},SharingBannerController.prototype.dismiss=function(e){this.onDismiss({$event:e})},SharingBannerController.prototype.currentSharing=function(){return this.reportIsShared?"ON":"OFF"},SharingBannerController.prototype.currentEmbed=function(){return this.reportIsEmbedded?"ON":"OFF"},SharingBannerController}(),controllerAs:"ctrl",template:'\n<div class="header-banner">\n  <div class="content">\n    <span ng-if="ctrl.reportIsShared"><i class="icon icon-external-sharing"></i> External sharing {{ ctrl.currentSharing() }}</span>\n    <span ng-if="ctrl.reportIsEmbedded"><i class="icon icon-embed-narrow-black"></i> Secret embedding {{ ctrl.currentEmbed() }}</span>\n    <button class="btn btn-dismiss" ng-click="ctrl.dismiss($event)"><i class="icon icon-fail-inverted"></i></button>\n  </div>\n</div>'};r.module("mode.components").component("sharingBanner",Ho);var Wo=function(){function SlackBannerController(e,t,n){this.CookieService=e,this.AssetService=t,this.ModeCollection=n,this.minimize=!0}return SlackBannerController.prototype.$onInit=function(){var e=this;this.trial=$("meta[name=trial-banner]").attr("content"),this.state=this.getTrialState(this.trial),this.CookieService.getOrSetBooleanValue(yr.h)||this.owner._resource.hasLink("slack_app")||this.owner.dataSources().then(this.ModeCollection.elements).then(function(t){if(t.length)switch(e.state){case"off":case"active":e.minimize=!1;break;default:return}})},SlackBannerController.prototype.getTrialState=function(e){return e?"trial_pending"===e?"pending":"trial_expired"===e?"expired":"active":"off"},SlackBannerController.prototype.hide=function(){this.minimize=!0,this.CookieService.getOrSetBooleanValue(yr.h,!0)},SlackBannerController.$inject=["CookieService","AssetService","ModeCollection"],SlackBannerController}(),qo={bindings:{owner:"<"},template:'\n<div class="slack-banner-component">\n  <div class="slack-banner" ng-if="!ctrl.minimize">\n    <div class="banner-content">\n      <h3 class="slack-banner-header">Add Mode to Slack</h3>\n      <p>Share reports with your team: it takes just a few seconds to set up the integration!</p>\n      <div>\n        <a ng-href="{{ ctrl.owner.slackSettingsLink}}" class="btn btn-lg slack-banner-btn" target="_self">Integrate</a>\n        <a href="#" ng-click="ctrl.hide()" class="btn btn-lg btn-link slack-banner-link">Not now</a>\n      </div>\n    </div>\n    <div class="banner-media">\n      <img class="slack-banner-image" ng-src="{{ ctrl.AssetService.slackBanner }}" />\n    </div>\n  </div>\n</div>\n',controller:Wo,controllerAs:"ctrl"};r.module("mode.components").component("slackBanner",qo);var Jo=function(){function TrialBannerController(){}return TrialBannerController.prototype.$onInit=function(){this.trial=w()("meta[name=trial-banner]").attr("content"),this.state=this.getTrialState(this.trial),"active"===this.state&&(this.days=parseInt(this.trial,10))},TrialBannerController.prototype.getTrialState=function(e){return e?"trial_pending"===e?"pending":"trial_expired"===e?"expired":"active":"off"},TrialBannerController}(),Xo=Jo,Ko={bindings:{owner:"<"},template:'\n<div class="trial-banner-component" ng-if="ctrl.state !== \'off\'">\n  \x3c!-- @active --\x3e\n  <a ng-href="{{ ctrl.owner.billingLink }}" class="trial-banner-link trial-banner-link-{{ ctrl.days }}" ng-if="ctrl.state === \'active\'" target="_self">\n    <span class="trial-number">{{ ctrl.days }}</span>\n    <span class="trial-text">\n      <ng-pluralize\n        count="ctrl.days"\n        when="{\'0\': \'days remain\', \'one\': \'day remains\',\'other\': \'days remain\'}">\n      </ng-pluralize>\n      <br />\n      in your trial\n    </span>\n  </a>\n  \x3c!-- @expired --\x3e\n  <a ng-href="{{ ctrl.owner.billingLink }}" class="trial-banner-link trial-banner-link-default" ng-if="ctrl.state === \'expired\'" target="_self">\n    <span class="trial-number trial-number-mobile-only">\n      0<span class="trial-dot">&dot;</span>\n    </span>\n    <span class="trial-text trial-banner-message-wrap">\n      <span class="trial-banner-message">\n        Your trial has ended.\n      </span>\n      <br />\n      Keep using Mode\n    </span>\n  </a>\n</div>\n',controller:Jo,controllerAs:"ctrl"};r.module("mode.components").component("trialBanner",Ko);var ei=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),ti={bindings:{owner:"<"},template:'\n<div class="full-trial-banner-component" ng-if="ctrl.state !== \'off\'">\n  \x3c!-- @active --\x3e\n  <div class="full-trial-banner trial-banner-{{ ctrl.days }} trial-banner-sm" ng-if="ctrl.state === \'active\'">\n    <div class="trial-content">\n      <p class="trial-text-sm text-strong">Your trial expires in <span class="trial-days">{{ ctrl.days }}</span><span><ng-pluralize count="ctrl.days" when="{\'0\': \'days\', \'one\': \'day\',\'other\': \'days\'}"></ng-pluralize></span></p>\n      <a ng-href="{{ ctrl.owner.billingLink }}" class="btn btn-lg btn-primary trial-btn default-trial-btn" target="_self">See more features</a>\n    </div>\n  </div>\n  \x3c!-- @expired --\x3e\n  <div class="full-trial-banner trial-banner-sm" ng-if="ctrl.state === \'expired\'">\n    <div class="trial-content">\n      <p class="trial-text-sm text-strong">Your trial has ended</p>\n      <a ng-href="{{ ctrl.owner.billingLink }}" class="btn btn-lg btn-primary trial-btn default-trial-btn" target="_self">See more features</a>\n    </div>\n  </div>\n</div>\n',controller:function(e){function FullTrialBannerController(t,n){var r=e.call(this)||this;return r.CookieService=t,r.AssetService=n,r.minimize=!1,r.CookieService.getOrSetBooleanValue(yr.i)&&(r.minimize=!0),r}return ei(FullTrialBannerController,e),FullTrialBannerController.prototype.hide=function(){this.minimize=!0,this.CookieService.getOrSetBooleanValue(yr.i,!0)},FullTrialBannerController.$inject=["CookieService","AssetService"],FullTrialBannerController}(Xo),controllerAs:"ctrl"};r.module("mode.components").component("fullTrialBanner",ti);r.module("mode.components").component("simpleBanner",{bindings:{text:"@",actionText:"@",onAction:"&"},controllerAs:"ctrl",template:'\n<div class="simple-banner-component">\n  <div class="simple-banner simple-banner-sm">\n    <div class="banner-content">\n      <p class="banner-text-sm">{{ ctrl.text }}</p>\n      <a href="#" ng-click="ctrl.onAction()" class="btn btn-lg btn-primary banner-btn default-banner-btn">{{ ctrl.actionText }}</a>\n    </div>\n  </div>\n</div>\n'});var ni=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),ri={bindings:{bannerTitle:"@",bannerText:"@",actionText:"@",actionLinkHref:"@?",onAction:"&",bannerImageName:"@?",secondaryLinkHref:"@?",secondaryLinkText:"@?",cookieValue:"@?"},controller:function(e){function LargeBannerController(t,n){var r=e.call(this)||this;return r.CookieService=t,r.AssetService=n,r.minimize=!1,r}return ni(LargeBannerController,e),LargeBannerController.prototype.$onInit=function(){this.CookieService.getOrSetBooleanValue(this.cookieValue)&&(this.minimize=!0)},LargeBannerController.prototype.hide=function(){this.minimize=!0,this.CookieService.getOrSetBooleanValue(this.cookieValue,!0)},LargeBannerController.prototype.handleAction=function(e){this.onAction&&this.onAction({$event:e})},LargeBannerController.$inject=["CookieService","AssetService"],LargeBannerController}(Xo),controllerAs:"ctrl",template:'\n<div class="large-banner-component">\n  <div class="large-banner">\n    <div class="banner-content">\n      <h3 class="large-banner-header">{{ ctrl.bannerTitle }}</h3>\n      <p>{{ ctrl.bannerText }}</p>\n      <div>\n        <a ng-href="{{ ctrl.actionLinkHref || \'#\' }}" ng-click="ctrl.handleAction($event)" class="btn btn-lg btn-blue banner-btn default-banner-btn">{{ ctrl.actionText }}</a>\n        <a ng-if="ctrl.secondaryLinkHref" ng-href="{{ ctrl.secondaryLinkHref }}" class="btn btn-lg btn-blue-link" target="_blank">{{ ctrl.secondaryLinkText }}</a>\n      </div>\n    </div>\n    <div class="banner-media" ng-if="ctrl.bannerImageName && ctrl.AssetService[ctrl.bannerImageName]">\n      <img class="trial-database-image" ng-src="{{ ctrl.AssetService[ctrl.bannerImageName] }}" />\n    </div>\n  </div>\n</div>\n'};r.module("mode.components").component("largeBanner",ri);var oi={bindings:{views:"<",reportRun:"<",preference:"=",onCreateQuery:"&"},template:'\n<ul class="report-browser-mini">\n  <li class="toggle">\n    <a href="#"\n      ng-click="ctrl.showBrowserSidebar()"\n      uib-tooltip="Show Sidebar"\n      tooltip-placement="right">\n      <i class="icon-panel-collapse-right-default"></i>\n    </a>\n  </li>\n  <li>\n    <a href="#"\n      ng-click="ctrl.toggleQueryMode(false, $event);"\n      ng-class="{selected: !ctrl.views.queryMode && !ctrl.views.notebookShown}"\n      uib-tooltip="Report Builder"\n      tooltip-placement="right"\n      tooltip-append-to-body="true">\n      <i class="icon-report-outline-mini-gray editor-nav-icon align-md-icon browser-mini-icon"></i>\n    </a>\n  </li>\n  <li>\n    <a href="#"\n      ng-click="ctrl.toggleNotebookShown(true);"\n      ng-class="{selected: !ctrl.views.queryMode && ctrl.views.notebookShown}"\n      uib-tooltip="{{ ctrl.notebookLabel$ | async:this }}"\n      tooltip-placement="right"\n      tooltip-append-to-body="true">\n      <i class="editor-nav-icon align-md-icon browser-mini-icon" ng-class="ctrl.notebookIcon$ | async:this"></i>\n    </a>\n  </li>\n  <li class="border"></li>\n  <li class="add-new-query">\n    <a href="#"\n      ng-click="ctrl.createQuery();"\n      uib-tooltip="New Query"\n      tooltip-placement="right"\n      tooltip-append-to-body="true">\n      <i class="icon-modal-add align-md-icon"></i>\n    </a>\n  </li>\n  <li ng-repeat="query in ctrl.queries$ | async:this | orderByNatural: \'name\'">\n    <a href="#"\n      ng-click="ctrl.selectQuery(query);"\n      ng-class="{selected: ctrl.views.queryMode && ctrl.queryInfo.token === query.token}"\n      uib-tooltip="{{ query.name || \'Query\' }}"\n      tooltip-placement="right"\n      tooltip-append-to-body="true"\n      tooltip-class="tooltip-query-name">\n      <span ng-show="ctrl.showQueryInitials(query)">\n        {{ ctrl.queryInitials(query) }}\n      </span>\n      <i ng-show="ctrl.showQueryAction(query)"\n        ng-class="{\'running-icon icon-running-gray\': ctrl.isQueryRunning(query), \'warning-icon icon-warning-small\': ctrl.isQueryErrored(query)}"\n        class="align-md-icon">\n      </i>\n    </a>\n  </li>\n</ul>\n',controller:function(){function EditorBrowserMiniController(e,t,n,r,o,i,a,l,s){var c=this;this.rxStore=e,this.ViewService=t,this.DatasetService=n,this.DataLayerFlipperService=r,this.ClientDataService=o,this.Utils=i,this.store=a,this.notebookDataService=l,this.$scope=s,a.connectPath(s,"editor",function(e){c.queryInfo=e.selectedQuery},"editor")}return EditorBrowserMiniController.prototype.$onInit=function(){this.queries$=this.rxStore.select("client","selectedReport","queries").map(function(e){return e.getRecords()}),this.notebookLabel$=this.rxStore.select(A.b.selectedNotebookLabel),this.notebookIcon$=this.rxStore.select(A.b.selectedNotebookIcon)},EditorBrowserMiniController.prototype.toggleQueryMode=function(e,t){this.ViewService.toggleQueryMode(e,t)},EditorBrowserMiniController.prototype.toggleNotebookShown=function(e){e&&this.notebookDataService.initNotebook(),this.ViewService.toggleNotebookShown(e)},EditorBrowserMiniController.prototype.showBrowserSidebar=function(){this.ClientDataService.updateAccountPreference({editor_browser_enabled:!0}),this.ViewService.setView("browser",!0)},EditorBrowserMiniController.prototype.selectQuery=function(e){this.isQueryIconDismissable(e)&&(this.DatasetService.dismissed[e.token]=!0),this.ViewService.selectQuery(e,!0)},EditorBrowserMiniController.prototype.createQuery=function(){this.onCreateQuery()},EditorBrowserMiniController.prototype.showQueryInitials=function(e){return this.DatasetService.dismissed[e.token]||!this.DatasetService.queryRuns||!this.DatasetService.queryRuns[e.token]||!this.DatasetService.queryRuns[e.token].running&&"failed"!==this.DatasetService.queryRuns[e.token].state},EditorBrowserMiniController.prototype.showQueryAction=function(e){return this.DatasetService.queryRuns&&this.DatasetService.queryRuns[e.token]&&(this.DatasetService.queryRuns[e.token].running||"failed"===this.DatasetService.queryRuns[e.token].state)},EditorBrowserMiniController.prototype.isQueryRunning=function(e){return this.DatasetService.queryRuns&&this.DatasetService.queryRuns[e.token]&&this.reportRun&&this.DatasetService.queryRuns[e.token].running&&"disconnected"!==this.reportRun.state},EditorBrowserMiniController.prototype.isQueryErrored=function(e){return this.DatasetService.queryRuns&&this.DatasetService.queryRuns[e.token]&&this.reportRun&&(this.DatasetService.queryRuns[e.token].warning||"disconnected"===this.reportRun.state&&this.DatasetService.queryRuns[e.token].running)&&!this.DatasetService.dismissed[e.token]},EditorBrowserMiniController.prototype.queryInitials=function(e){return this.Utils.initialize(e.name||"Query")},EditorBrowserMiniController.prototype.isQueryIconDismissable=function(e){return this.DatasetService.datasets&&this.DatasetService.queryRuns&&this.DatasetService.queryRuns[e.token]&&(this.DatasetService.queryRuns[e.token].warning||"succeeded"===this.DatasetService.queryRuns[e.token].state)&&this.DatasetService.dismissed&&!this.DatasetService.dismissed[e.token]},EditorBrowserMiniController.$inject=["RxStoreService","ViewService","DatasetService","DataLayerFlipperService","ClientDataService","Utils","StoreService","NotebookDataService","$scope"],EditorBrowserMiniController}(),controllerAs:"ctrl"};r.module("mode.components").component("editorBrowserMini",oi);var ii={bindings:{owner:"<",organizations:"<"},template:'\n<div class="datasource-banner-component" ng-if="!ctrl.minimize && ctrl.owner.user && !ctrl.organizations.length">\n  <i class="icon-add-db-green banner-image"></i>\n  <div>\n    <p class="banner-text">Connect a database to start querying against your own data.</p>\n  </div>\n  <div class="banner-button">\n    <a href="#" ng-click="ctrl.hide()" class="btn btn-lg btn-link banner-link">Not now</a>\n    <a\n      ng-if="ctrl.organizations.length === 0"\n      connect-db-instrumentation\n      href="#"\n      target="_self"\n      connect-db-instrumentation-element-id="6"\n      connect-db-instrumentation-org-id="{{ ctrl.owner.id }}"\n      class="btn btn-lg btn-primary"\n      confirm-modal="{{ ctrl.studioText }}"\n      confirm-modal-title="Switch to Mode Studio"\n      confirm-modal-button-confirm="Create Mode Studio workspace"\n      confirm-modal-button-cancel="Back"\n      confirm-modal-on-confirm="ctrl.goToNewOrganization()"\n    >Connect Database</a>\n    <a\n      ng-if="ctrl.organizations.length > 0"\n      create-org-modal\n      href="#"\n      target="_self"\n      class="btn btn-lg btn-primary"\n    >Connect Database</a>\n  </div>\n</div>\n',controller:function(){function DataSourceBannerController(e,t,n){this.$window=e,this.CookieService=t,this.AssetService=n,this.minimize=!1,this.studioText="Before you connect a database, you'll need to create a free Mode Studio workspace. This will let you query and share data privately with others. You can return to the Mode Community at any point.",this.CookieService.getOrSetBooleanValue(yr.g)&&(this.minimize=!0)}return DataSourceBannerController.prototype.hide=function(){this.minimize=!0,this.CookieService.getOrSetBooleanValue(yr.g,!0,{path:"/"})},DataSourceBannerController.prototype.goToNewOrganization=function(){this.$window.location.href=this.owner.newOrganizationLink},DataSourceBannerController.$inject=["$window","CookieService","AssetService"],DataSourceBannerController}(),controllerAs:"ctrl"};r.module("mode.components").component("datasourceBanner",ii);var ai=n("EABs"),li=function(){function DefinitionsController(e,t,n,o,i,a,l,s,c,d,u,p,h,g,m,f,C,y,b,v,I,S,A,M){var k=this;this.$scope=e,this.$rootScope=t,this.$window=n,this.store=o,this.datasourceService=i,this.alertService=a,this.datasources=l,this.$timeout=s,this.model=c,this.ReportRunModel=d,this.PreferenceModel=u,this.account=h,this.owner=g,this.spaces=m,this.organizations=f,this.api=C,this.ModeCollection=y,this.openDefinition=b,this.clientDataService=I,this.definitionRunService=S,this.$log=A,this.$state=M,this.queryControlEvents={},this.canceling=!1,this.polling=!0,this.limit=!0,this.limitLoaded=!1,I.setLoggedInState(!0),I.loadFlippers({userFlippers:v.flipper.features,orgFlippers:v.flipper.orgFeatures}),I.loadAccount(h._resource),I.loadAccountContext(g._resource),I.loadApi(C._resource),e.topWindow=r.element("#sql-window"),e.preference=p,this.clientDataService.loadDefinitionSuccess(this.openDefinition._resource),this.store.dispatch(Object(ai.h)(b)),this.definitionRunService.pollDefinitionRun(b),o.connectPath(e,"definitionEditor",this.stateUpdated.bind(this)),w()(".mode-editor").addClass("show-editor"),this.initHotkeys(),this.definitionRunService.definitionPolling$.subscribe(function(e){k.polling=e}),this.definitionRunService.definitionRunState$.subscribe(function(e){k.selectedDefinition=e.definition,k.reportRun=e.reportRun,k.queryRun=e.queryRun,k.dataset=e.modelState,k.queryRun&&!k.limitLoaded&&(k.limitLoaded=!0,k.limit=k.queryRun.limit),k.canceling=k.queryRun&&k.queryRun.cancelQueued,k.setWindowTitle(k.selectedDefinition),k.setDatasource(k.selectedDefinition.dataSourceId)})}return DefinitionsController.prototype.initHotkeys=function(){var e=this;r.element(this.$window).bind("keydown.definition",function(t){switch(t.keyCode){case 13:(t.metaKey||t.ctrlKey)&&(t.preventDefault(),t.stopPropagation(),e.runClicked(!e.queryRun||e.limit))}}),this.$scope.$on("$destroy",function(){r.element(e.$window).unbind("keydown.definition")})},DefinitionsController.prototype.setDatasource=function(e){this.datasourceService.selectedDataSource=Object(y.find)(this.datasources,{id:e})},DefinitionsController.prototype.stateUpdated=function(e){var t=this;this.views=e,this.$scope.preference.editor_layout=e.vertical?"vertical":"horizontal",this.secondaryTab=e.secondaryTab,this.queryControlEvents.resize&&this.$timeout(function(){return t.queryControlEvents.resize()})},DefinitionsController.prototype.setWindowTitle=function(e){this.$window.document.title=e?e.name+" - Editing":"Editor | Mode"},DefinitionsController.prototype.toggleSidebar=function(){this.store.dispatch(Object(ai.j)())},DefinitionsController.prototype.minimizeTop=function(){this.store.dispatch(Object(ai.e)())},DefinitionsController.prototype.toggleTheme=function(){this.$scope.preference.editor_theme="dark"===this.$scope.preference.editor_theme?"light":"dark",this.PreferenceModel.update(this.$scope.preference)},DefinitionsController.prototype.toggleVerticalMode=function(){this.store.dispatch(Object(ai.k)())},DefinitionsController.prototype.maximizeTop=function(){this.store.dispatch(Object(ai.c)())},DefinitionsController.prototype.minimizeBottom=function(){this.store.dispatch(Object(ai.d)())},DefinitionsController.prototype.maximizeBottom=function(){this.store.dispatch(Object(ai.b)())},DefinitionsController.prototype.selectTab=function(e){this.store.dispatch(Object(ai.i)(e))},DefinitionsController.prototype.textEdited=function(e){this.definitionRunService.updateDefinitionSource(e)},DefinitionsController.prototype.formatClicked=function(){this.selectedDefinition&&(this.formatUndoable()?(this.$rootScope.$broadcast("sql.replace",{text:this.originalQuery}),this.formatUndo()):this.format())},DefinitionsController.prototype.format=function(){var e=this;this.formatCached()?(this.$rootScope.$broadcast("sql.replace",{text:this.formattedQuery}),this.formatRestoreCache()):(this.formatCacheQuery(),this.selectedDefinition.resource._embedded.sql_formatter.forms("format").$submit({"query.raw_query":this.selectedDefinition.source,"query.token":this.selectedDefinition.token}).then(function(t){e.formatUpdate(t.formatted_query),e.$rootScope.$broadcast("sql.replace",{text:t.formatted_query}),e.formatSetDelay(),e.$timeout(e.formatClearDelay.bind(e),1e3)}).catch(function(t){e.alertService.error("Formatting Error: "+e.validateFormatErrorMessage(t))}))},DefinitionsController.prototype.runClicked=function(e){this.selectedDefinition&&(this.isQueryRunning()?(this.definitionRunService.cancelDefinitionRun(),this.$rootScope.focused=!1):this.definitionRunService.executeDefinitionRun(this.selectedDefinition.source,e))},DefinitionsController.prototype.warningState=function(){return this.datasourceService.selectedDataSource&&this.datasourceService.selectedDataSource.asleep&&(!this.isQueryRunning()||!this.queryRun)},DefinitionsController.prototype.errorState=function(){return!this.isQueryRunning()&&this.isQueryWarning()&&!this.successState()&&!this.$rootScope.focused},DefinitionsController.prototype.successState=function(){return!this.isQueryRunning()&&this.isQuerySucceeded()&&!this.$rootScope.focused},DefinitionsController.prototype.readyState=function(){return this.datasourceService.selectedDataSource&&!this.datasourceService.selectedDataSource.asleep&&(!this.isQueryRunning()&&this.$rootScope.focused||!this.queryRun)},DefinitionsController.prototype.cancelledState=function(){return this.queryRun&&this.queryRun.warning&&"cancelled"===this.queryRun.state&&!this.$rootScope.focused},DefinitionsController.prototype.isQuerySucceeded=function(){return this.queryRun&&"succeeded"===this.queryRun.state},DefinitionsController.prototype.isQueryWarning=function(){return this.queryRun&&this.queryRun.warning},DefinitionsController.prototype.isQueryRunning=function(){return this.queryRun&&this.queryRun.running},DefinitionsController.prototype.formatUpdate=function(e){this.formattedQuery=e,this.formatted=!0},DefinitionsController.prototype.formatUndo=function(){this.formatted=!1},DefinitionsController.prototype.formatUndoable=function(){return(this.originalQuery!==this.formattedQuery||!1!==this.formatted)&&(this.originalQuery&&this.formattedQuery&&this.formattedQuery===this.selectedDefinition.source)},DefinitionsController.prototype.formatCacheQuery=function(){this.originalQuery=this.selectedDefinition.source},DefinitionsController.prototype.formatCached=function(){return this.formattedQuery&&this.originalQuery&&this.originalQuery===this.selectedDefinition.source},DefinitionsController.prototype.formatRestoreCache=function(){this.formatted=!0},DefinitionsController.prototype.formatDisabled=function(){return!this.selectedDefinition.source.trim()||this.formatDelayOn&&!this.formatUndoable()},DefinitionsController.prototype.formatSetDelay=function(){this.formatDelayOn=!0},DefinitionsController.prototype.formatClearDelay=function(){this.formatDelayOn=!1},DefinitionsController.prototype.validateFormatErrorMessage=function(e){return 429===e.status||"JiffyPop Query Formatter busy"===e.data.message?"Sorry, the formatter busy.  Please try again later.":"query is empty"===e.data.message||"query is too big"===e.data.message?e.data.message:404===e.status?"Sorry, there is a problem with your query. Please check it and try again.":"Sorry, something went wrong. Please try again."},DefinitionsController.prototype.clearTableFilter=function(){this.tableFilter=""},DefinitionsController.prototype.clearDefinitionFilter=function(){this.definitionFilter=""},DefinitionsController.$inject=["$scope","$rootScope","$window","StoreService","DataSourceService","AlertService","dataSources","$timeout","LibraryDefinitionModel","ReportRunModel","PreferenceModel","preference","account","owner","spaces","organizations","api","ModeCollection","definition","DataLayerFlipperService","ClientDataService","DefinitionRunDataService","$log","$state"],DefinitionsController}();r.module("mode.editor").controller("DefinitionsController",li);var si={bindings:{dismiss:"&",canDismiss:"<"},controller:function(){function DefinitionPaywallController(e,t){this.AssetService=e,this.CookieService=t}return DefinitionPaywallController.prototype.tryDefImageSrc=function(){return this.AssetService.tryDefinitions},DefinitionPaywallController.$inject=["AssetService","CookieService"],DefinitionPaywallController}(),controllerAs:"ctrl",template:'<div class="space-banner space-banner-horiz space-banner-blue">\n    <img class="space-banner-icon try-definitions-banner-icon" ng-src="{{ ctrl.tryDefImageSrc() }}" />\n    <h2 class="banner-heading banner-heading-medium">Try Definitions!</h2>\n    <p class="banner-summary">\n      Your organization has 10 Definitions so you can experience how reusable\n      business logic can streamline your team\'s workflow. Need more?\n    </p>\n    <a href intercom-show="I\'m interested in unlimited Definitions" intercom-email="sales@modeanalytics.com" class="btn btn-blue btn-lg">Contact Us</a>\n    <a ng-if="ctrl.canDismiss" href ng-click="ctrl.dismiss()" class="btn btn-blue-link">Got it</a>\n  </div>'};r.module("mode.components").component("definitionPaywall",si);var ci={bindings:{datasource:"<",owner:"<"},template:'\n  <div class="content-wrapper definition-list-component">\n    <div ng-if="ctrl.definitions.length" class="definition-list-table">\n      <div class="definition-list-header">\n        <div class="definition-list-cell">Name</div>\n        <div class="definition-list-cell">Created By</div>\n        <div class="definition-list-cell">Last Edited</div>\n        <div class="definition-list-cell">Description</div>\n      </div>\n\n      <a ng-repeat="definition in ctrl.definitions track by definition.token" class="definition-list-row" href="{{definition.editLink}}" target="_self">\n        <div class="definition-list-cell name-column"><div href="{{ ctrl.definition.editLink }}" target="_self" class="clipped-text">{{ definition.name }}</div></div>\n        <div class="definition-list-cell">{{ definition.creatorAccount.name }}</div>\n        <div class="definition-list-cell"><span am-time-ago="definition.updated_at" am-time-string></span></div>\n        <div class="definition-list-cell desc-column">\n          <div class="clipped-text" ng-class="{\'source-code\': !definition.description}">\n            {{ definition.description || definition.source }}\n          </div>\n          <div class="result-menu">\n            <button class="menu-command"\n                    confirm-modal="Are you sure you want to delete definition {{ definition.name }}?"\n                    confirm-modal-on-confirm="ctrl.deleteDefinition(definition)"\n                    confirm-modal-button-class="btn-error"\n                    confirm-modal-button-confirm="Delete Definition"\n                    confirm-modal-button-cancel="Close"\n                    confirm-modal-title="Delete Definition"><i class="icon icon-trash"></i></button>\n\n            \x3c!-- For later when we convert to a dropdown --\x3e\n            \x3c!--<div uib-dropdown class="dropdown report-actions-list-item">--\x3e\n              \x3c!--<a href="#" uib-dropdown-toggle class="dropdown-toggle report-actions-link" aria-haspopup="true" aria-expanded="true">--\x3e\n                \x3c!--<i class="icon-menu-dots-gray"></i>--\x3e\n              \x3c!--</a>--\x3e\n              \x3c!--<ul uib-dropdown-menu class="dropdown-menu">--\x3e\n                \x3c!--<li><a href="#" confirm-modal="Are you sure you want to delete definition {{ definition.name }}?"--\x3e\n                     \x3c!--confirm-modal-on-confirm="ctrl.deleteDefinition(definition)"--\x3e\n                     \x3c!--confirm-modal-button-class="btn-error"--\x3e\n                     \x3c!--confirm-modal-button-confirm="Delete Definition"--\x3e\n                     \x3c!--confirm-modal-button-cancel="Close"--\x3e\n                     \x3c!--confirm-modal-title="Delete Definition">Delete</a></li>--\x3e\n              \x3c!--</ul>--\x3e\n            \x3c!--</div>--\x3e\n          </div>\n        </div>\n      </a>\n    </div>\n  </div>\n',controller:function(){function DefinitionListController(e,t,n,r,o,i,a){this.$scope=e,this.$log=t,this.$window=n,this.$q=r,this.store=o,this.AlertService=i,this.LibraryDefinitionModel=a}return DefinitionListController.prototype.$onInit=function(){this.store.connectPath(this.$scope,"home.definitionState",this.updateDefinitionsState.bind(this))},DefinitionListController.prototype.updateDefinitionsState=function(e){this.buildCreators(e.definitionList).then(this.buildDefinitions.bind(this))},DefinitionListController.prototype.buildCreators=function(e){var t=this;return this.$q.all(e.map(function(e){return!e.creatorAccount&&e._resource.hasLink("creator")?e.creator().then(function(t){return e.creatorAccount=t,e}):e.creatorAccount?e:(t.$log.warn("definition has no creator",e.token),e.creatorAccount=t.owner,e)}))},DefinitionListController.prototype.buildDefinitions=function(e){this.definitions=e},DefinitionListController.prototype.deleteDefinition=function(e){var t=this;e.destroy().then(function(){t.definitions.splice(t.definitions.indexOf(e),1),t.AlertService.success(e.name+" deleted successfully")}).catch(function(e){t.AlertService.error("Error deleting definition"),t.$log.warn(e)})},DefinitionListController.$inject=["$scope","$log","$window","$q","StoreService","AlertService","LibraryDefinitionModel"],DefinitionListController}(),controllerAs:"ctrl"};r.module("mode.components").component("definitionList",ci);var di=n("wB6Z"),ui={bindings:{canceling:"<",executing:"<",limit:"=",runClick:"&",preference:"<",formatClick:"&",formatDisabled:"<",formatUndoable:"<"},controller:function(){function DefinitionRunnerController(e,t){this.$scope=e,this.runText="Run",this.sqlFormatEnabled=t.enabled(di.a.Type.SqlDefinitions)}return DefinitionRunnerController.prototype.run=function(){this.runClick({$limit:this.limit})},DefinitionRunnerController.prototype.$onInit=function(){null==this.limit&&(this.limit=!0)},DefinitionRunnerController.prototype.$onChanges=function(e){this.setRunText()},DefinitionRunnerController.prototype.setRunText=function(){this.runText=this.executing?"Cancel":"Run"},DefinitionRunnerController.prototype.formatText=function(){return this.formatUndoable?"Undo Format":"Format SQL"},DefinitionRunnerController.prototype.format=function(){this.formatClick({})},DefinitionRunnerController.$inject=["$scope","DataLayerFlipperService"],DefinitionRunnerController}(),controllerAs:"ctrl",template:'<div id="run_button">\n    <button ng-click="ctrl.run()" class="btn btn-filled-primary" ng-disabled="ctrl.canceling">{{ ctrl.runText }}</button>\n    <div class="limit-addon" ng-class="{unchecked:ctrl.limit, running: ctrl.executing}">\n      <span class="checkbox-limit checkbox-icon">\n      <input id="limit" type="checkbox" ng-model="ctrl.limit">\n        <label for="limit" class="inline-icon icon-editor-checkbox-{{ ctrl.preference.editor_theme }}-unchecked">Limit 100</label>\n      </span>\n    </div>\n    <a href="#" ng-if="ctrl.sqlFormatEnabled" ng-click="ctrl.format()" ng-disabled="ctrl.formatDisabled" class="btn btn-strong btn-filled-primary btn-link bordered-left">{{ ctrl.formatText() }}</a>\n  </div>'};r.module("mode.editor").component("definitionRunner",ui);var pi={bindings:{datasource:"<",datasourceToken:"@?",datasourceAccount:"@?",owner:"<",account:"<"},template:'\n<div class="grant-membership-component">\n  <div class="membership-input">\n    <input type="text"\n           class="form-control form-control-block next-form-control"\n           ng-model="ctrl.query"\n           ng-model-options="{debounce: 200}"\n           ng-change="ctrl.queryUsers()"\n           placeholder="Find members..."\n           autocomplete="off">\n    <i class="icon-search membership-search-icon"></i>\n  </div>\n  <div class="membership-list-container" ng-hide="ctrl.querySearching">\n    <ul class="membership-list">\n      <li class="membership-list-item" ng-repeat="grant in ctrl.filtered (ctrl.grants | filter:{inSearch:false} | filter:ctrl.query)">\n        <mode-avatar ng-if="grant.grantee_type === \'account\'" options="grant.avatar" size="44" class="user-avatar"></mode-avatar>\n        <group-facepile ng-if="grant.grantee_type === \'group\'" group="grant" size="44" class="user-avatar"></group-facepile>\n        <div class="user-details">\n          <div class="user-content">\n            <div class="primary-content">{{ grant.name || grant.username }}</div>\n            <div ng-if="grant.grantee_type !== \'group\'" class="secondary-content">{{ grant.email }}</div>\n            <div ng-if="grant.grantee_type === \'group\'"\n                 class="secondary-content"\n                 ng-pluralize\n                 count="grant.member_count"\n                 when="{\'0\': \'{} Members\',\'one\': \'{} Member\',\'other\': \'{} Members\'}">\n            </div>\n          </div>\n        </div>\n        <div class="membership-actions">\n          <a href="#"\n            ng-if="!grant.isOwnerAdmin && !grant.isCurrentUser"\n            class="btn btn-lg btn-secondary membership-action-negative"\n            ng-click="ctrl.toggleGrant(grant)">\n            <span class="hide-hover">Added</span>\n            <span class="show-hover">Remove</span>\n          </a>\n          <div ng-if="grant.isCurrentUser" class="empty-button">You</div>\n          <div ng-if="grant.isOwnerAdmin && !grant.isCurrentUser" class="empty-button">Admin</div>\n        </div>\n      </li>\n      <li class="membership-list-item" ng-repeat="user in ctrl.users | orderBy:[\'isCurrentUser\', \'isOwnerAdmin\', \'grant\', ctrl.orderByGroup()]">\n        <mode-avatar ng-if="user.objectType !== \'user_group\'" options="user.avatar" size="44" class="user-avatar"></mode-avatar>\n        <group-facepile ng-if="user.objectType === \'user_group\'" group="user" size="44" class="user-avatar"></group-facepile>\n        <div class="user-details">\n          <div class="user-content">\n            <div class="primary-content">{{ user.name }}</div>\n            <div ng-if="user.objectType !== \'user_group\'" class="secondary-content">{{ user.email }}</div>\n            <div ng-if="user.objectType === \'user_group\'"\n                 class="secondary-content"\n                 ng-pluralize\n                 count="user.memberCount"\n                 when="{\'0\': \'{} Members\',\'one\': \'{} Member\',\'other\': \'{} Members\'}">\n            </div>\n          </div>\n        </div>\n        <div class="membership-actions">\n          <a href="#"\n            ng-if="!user.isOwnerAdmin && !user.isCurrentUser"\n            class="btn btn-lg btn-secondary"\n            ng-class="{\'membership-action-negative\' : user.grant, \'membership-action-positive\' : !user.grant }"\n            ng-click="ctrl.toggleGrant(user.grant, user)">\n            <span class="hide-hover">{{ user.grant ? \'Added\' : \'Add\' }}</span>\n            <span class="show-hover">{{ user.grant ? \'Remove\' : \'Add\' }}</span>\n          </a>\n          <div ng-if="user.isCurrentUser" class="empty-button">You</div>\n          <div ng-if="user.isOwnerAdmin && !user.isCurrentUser" class="empty-button">Admin</div>\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div class="membership-no-results" ng-show="ctrl.query && !ctrl.querySearching && !ctrl.filtered.length && !ctrl.users.length">No users found</div>\n  <div class="membership-loading" ng-show="ctrl.querySearching"><i class="icon-logo-animated loading-icon"></i></div>\n</div>\n',controller:function(){function PermissionSelectController(e,t,n,r,o,i,a,l,s){this.$scope=e,this.$q=t,this.$log=n,this.Search=r,this.DataSourceGrantModel=o,this.DataSourceModel=i,this.AccountModel=a,this.AlertService=l,this.ModeCollection=s}return PermissionSelectController.prototype.$onInit=function(){var e=this;!this.datasource&&this.datasourceToken&&this.datasourceAccount?(this.currentUsername=$("meta[name=current-username]").attr("content"),this.getOwner().then(this.getDatasource.bind(this)).then(this.initDatasource.bind(this)).catch(function(t){e.$log.warn("Error getting datasource",t)})):this.datasource?this.initDatasource(this.datasource):this.$log.warn("No data source for permission select component")},PermissionSelectController.prototype.getOwner=function(){return this.AccountModel.find({username:this.datasourceAccount,useEntryPath:!0,includes:["admins"],refresh:!0}).then(this.getAdmins.bind(this))},PermissionSelectController.prototype.getAdmins=function(e){var t=this;return e.admins().then(this.ModeCollection.elements).then(function(n){return t.admins=n.map(function(e){return e.isOwnerAdmin=!0,e.isCurrentUser=t.isCurrentUser(e),e}),e})},PermissionSelectController.prototype.getDatasource=function(e){return this.owner=e,this.DataSourceModel.find({token:this.datasourceToken,account:e.username,includes:["data_source_grants","new_data_source_grant"]})},PermissionSelectController.prototype.initDatasource=function(e){var t=this;this.datasource||(this.datasource=e),e.dataSourceGrants({includes:{data_source_grants:"grantee"}}).then(this.watchGrants.bind(this)).then(this.buildGrants.bind(this)).then(this.clearSearch.bind(this)).catch(function(e){t.$log.warn("Error getting grants",e)})},PermissionSelectController.prototype.watchGrants=function(e){return this.grantsCollection=e,e.watch(this.$scope,this.buildGrants.bind(this)),e.elements()},PermissionSelectController.prototype.buildGrants=function(e){var t=this;return this.DataSourceGrantModel.buildGrantsWithAccount(e).then(this.refreshGrantsInSearch.bind(this)).then(function(e){var n=y.filter(e,function(e){return!t.isAdmin(e)});n=n.map(function(e){return e.isCurrentUser=t.isCurrentUser(e),e}),t.grants=t.admins.concat(n)})},PermissionSelectController.prototype.includeGrantsAndAdmins=function(e){return e.grant=null,this.grants.forEach(function(t){t.grantee_token===e.token&&(t.isOwnerAdmin||(e.grant=t),e.isOwnerAdmin=t.isOwnerAdmin,e.isCurrentUser=t.isCurrentUser,t.inSearch=!0)}),e},PermissionSelectController.prototype.refreshGrantsInSearch=function(e){var t=this;return e&&e.length&&e.forEach(function(e){t.users&&y.find(t.users,function(t){return t.token===e.grantee_token})?e.inSearch=!0:e.inSearch=!1}),e},PermissionSelectController.prototype.resetGrantsInSearch=function(e){return e&&e.length&&e.forEach(function(e){return e.inSearch=!1}),e},PermissionSelectController.prototype.isCurrentUser=function(e){return e.username===this.currentUsername},PermissionSelectController.prototype.orderByGroup=function(){return function(e){return"user_group"===e.objectType?-1:0}},PermissionSelectController.prototype.queryUsers=function(){this.query?this.executeSearch(this.query):this.clearSearch()},PermissionSelectController.prototype.clearSearch=function(){this.users=[],this.executeSearch("")},PermissionSelectController.prototype.startSearch=function(){this.querySearching=!0},PermissionSelectController.prototype.endSearch=function(){this.querySearching=!1},PermissionSelectController.prototype.executeSearch=function(e){var t={query:e,indexes:["userEmail","group"],perPage:30,filters:"(organization_"+this.owner.token+")"};this.startSearch(),this.Search.query(t).then(this.handleSearchSuccess.bind(this)).catch(this.handleSearchError.bind(this))},PermissionSelectController.prototype.getUsersFromSearch=function(e){var t=y.filter(e.userEmail,function(e){return e.username}),n=e.group.filter(function(e){return"custom"===e.groupType});return t.concat(n)},PermissionSelectController.prototype.handleSearchSuccess=function(e){var t=this;this.resetGrantsInSearch(this.grants);var n=this.getUsersFromSearch(e);n=n.map(function(e){return e.isOwnerAdmin=t.isAdmin(e),e.isCurrentUser=e.username===t.currentUsername,e}),this.users=this.grants?n.map(this.includeGrantsAndAdmins.bind(this)):n,this.endSearch()},PermissionSelectController.prototype.isAdmin=function(e){return y.find(this.admins,{username:e.username})},PermissionSelectController.prototype.handleSearchError=function(){this.endSearch()},PermissionSelectController.prototype.toggleGrant=function(e,t){var n=this;if(e){var r="account"===e.grantee_type?"user":"group";e.destroy().then(function(){n.AlertService.success("Removed "+r),t&&(t.grant=null)}).catch(function(e){n.AlertService.error("Could not remove "+r)})}else{var o="user_group"===t.objectType?"group":"user";this.DataSourceGrantModel.create({dataSource:this.datasource.token,params:{"grant.grantee_token":t.token,"grant.grantee_type":"user_group"===t.objectType?"UserGroup":"User",includes:["grantee"]}}).then(function(e){n.AlertService.success("Added "+o),t&&(t.grant=e),n.grantsCollection.insert(e).then(function(e){return n.DataSourceGrantModel.putLocal(e)})}).catch(function(e){n.$log.log("error adding user/group",e),n.AlertService.error("Error adding "+o)})}},PermissionSelectController.$inject=["$scope","$q","$log","Search","DataSourceGrantModel","DataSourceModel","AccountModel","AlertService","ModeCollection"],PermissionSelectController}(),controllerAs:"ctrl"};r.module("mode.components").component("permissionSelect",pi);var hi=function(e){var t=(void 0===e?{}:e).enableEdit;return'<div class="sql-tooltip">\n  <div class="tooltip-header">\n    <div class="tooltip-title"></div>\n    <div class="actions">\n      '+(void 0!==t&&t?'<a class="action-link edit-definition-link" href="#" target="_blank" rel="noopener">Edit <i class="icon icon-popout-green" /></a>':"")+'\n      <a class="close-icon" href="#"><i class="icon icon-hamburger-x"></i></a>\n    </div>\n  </div>\n  <div class="scroller-wrapper">\n    <div class="tooltip-scroller">\n      <pre class="tooltip-content"><code class="language-sql"></code></pre>\n    </div>\n  </div>\n</div>'};ace.define("mode/tooltip",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/range","ace/tooltip"],function(e,t,n){e("ace/lib/dom");var r=e("ace/lib/oop"),o=e("ace/lib/event"),i=e("ace/range").Range,a=e("ace/tooltip").Tooltip,l=28;function TokenTooltip(e,t,n,r){if(!e.tokenTooltip){a.call(this,e.container),e.tokenTooltip=this,this.editor=e,this.datasource=t,this.owner=n,this.search=r,this.update=this.update.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseClick=this.onMouseClick.bind(this),this.onChange=this.onChange.bind(this),this.onThemeChange=this.onThemeChange.bind(this),this.onWindowResize=Object(y.debounce)(this.onWindowResize.bind(this),500),o.addListener(e.renderer.scroller,"mousemove",this.onMouseMove),o.addListener(e.renderer.content,"mouseout",this.onMouseOut),o.addListener(e.renderer.scroller,"click",this.onMouseClick),o.addListener(e.renderer,"themeChange",this.onThemeChange),o.addListener(e.renderer,"themeChange",this.onThemeChange),window.addEventListener("resize",this.onWindowResize),o.addListener(e,"change",this.onChange);var i=w()(hi({enableEdit:Lt.hasDefinitions(n._resource)}));this.$element=i[0],i.find(".close-icon").on("click",(function(){this.hide()}).bind(this));var s=i.find(".edit-definition-link");this.setText=function(e,t,n){var r=e.length<yr.q?Prism.highlight(e,Prism.languages.sql):e;i.find(".tooltip-content code").html(r),i.find(".tooltip-title").html("@"+t),s.attr("href",n)},this.setTheme=function(e){"ace/theme/monokai"===e?i.addClass("dark"):i.removeClass("dark")},this.show=function(e,t,n){if(!this.isOpen){w()(document.body).append(i);var r=i.find(".tooltip-scroller"),o=i.find(".tooltip-header");r.removeAttr("style"),this.width=this.getWidth(),this.height=this.getHeight(),t+this.width>window.innerWidth&&(this.width=window.innerWidth-t,r.css("width",this.width+"px")),n+this.height>window.innerHeight&&(this.height=window.innerHeight-n-l-o.height(),r.css("height",this.height+"px")),this.isOpen=!0}this.setPosition(t,n)},this.hide=function(){this.isOpen&&(i.detach(),this.isOpen=!1)},this.setDatasource=function(e){this.datasource=e},this.setTheme(e.getTheme())}}r.inherits(TokenTooltip,a),(function(){this.token={},this.range=new i,this.update=function(e){this.$timer=null;var t=this.editor.renderer,n=t.rect||(t.rect=t.scroller.getBoundingClientRect()),r=(this.x+t.scrollLeft-n.left-t.$padding)/t.characterWidth,o=Math.floor((this.y+t.scrollTop-n.top)/t.lineHeight),a=Math.round(r),l={row:o,column:a,side:r-a>0?1:-1},s=this.editor.session,c=s.screenToDocumentPosition(l.row,l.column),d=null;c.row===l.row&&c.column===l.column?((d=s.getTokenAt(c.row,c.column))&&(this.tooltipPos=this.editor.renderer.textToScreenCoordinates(c.row,d.start)),d||s.getLine(c.row)||(d={type:"",value:"",state:s.bgTokenizer.getState(0)}),"definition"===d.type?(s.removeMarker(this.marker),this.range=new i(c.row,d.start,c.row,d.start+d.value.length),this.marker=s.addMarker(this.range,"ace_definition_hover","text"),this.editor.renderer.setCursorStyle("pointer")):this.isOpen&&(s.removeMarker(this.marker),this.editor.renderer.setCursorStyle("")),this.token=d):this.token=null,d||(s.removeMarker(this.marker),this.editor.renderer.setCursorStyle(""))},this.onChange=function(e){this.isOpen&&this.hide()},this.onMouseMove=function(e){this.x=e.clientX,this.y=e.clientY,this.$timer||(this.$timer=setTimeout(this.update,100))},this.onMouseOut=function(e){e&&e.currentTarget.contains(e.relatedTarget)||(this.editor.session.removeMarker(this.marker),this.$timer=clearTimeout(this.$timer),this.editor.renderer.setCursorStyle(""))},this.onMouseClick=function(e){var t=this;this.token&&"definition"===this.token.type?this.search.query({query:'"'+this.token.value+'"',indexes:["definition"],advancedSyntax:!0,perPage:10,filters:"dataSource_"+this.datasource.token+","+(this.owner.user?"user_":"organization_")+this.owner.token}).then(function(e){if(e.definition[0].source){var n=e.definition[0].source,r=e.definition[0].name;t.tokenText===n&&t.tokenName===r||(t.setText(n,e.definition[0].name,e.definition[0].webEditPath),t.tokenText=n,t.tokenName=r),t.update(!0),t.show(null,t.tooltipPos.pageX,t.tooltipPos.pageY)}}):this.isOpen&&this.hide()},this.onThemeChange=function(e){this.setTheme(e.theme)},this.onWindowResize=function(){this.maxHeight=window.innerHeight,this.maxWidth=window.innerWidth},this.setPosition=function(e,t){e+10+this.width>this.maxWidth&&(e=window.innerWidth-this.width-10),(t>.75*window.innerHeight||t+20+this.height>this.maxHeight)&&(t=t-this.height-30),a.prototype.setPosition.call(this,e,t+20)},this.destroy=function(){this.onMouseOut(),o.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),o.removeListener(this.editor.renderer.scroller,"click",this.onMouseClick),o.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),o.removeListener(this.editor,"change",this.onChange),o.removeListener(this.editor.renderer,"themeChange",this.onThemeChange),window.removeEventListener("resize",this.onWindowResize),delete this.editor.tokenTooltip}}).call(TokenTooltip.prototype),t.TokenTooltip=TokenTooltip});var gi=n("b4e0"),mi=(w()('link[rel="shortcut icon"]').attr("href")||"/favicon.ico").slice(0,-4);function changeFavicon(e){var t=w()('<link rel="shortcut icon" type="image/x-icon">'),n=w()('link[rel="shortcut icon"]');switch(e){case"query_complete":t.attr("href",mi+"-badge.ico");break;default:t.attr("href",mi+".ico")}n.length&&n.remove(),w()("head").append(t)}gi.a.subscribe(function(){gi.a.getState().definitionEditor.notify?changeFavicon("query_complete"):changeFavicon("default")});var fi=n("buBu"),Ci=n.n(fi),yi=function(){function SlackSharingController(e,t,n,r,o,i,a,l,s){this.$sce=e,this.$interpolate=t,this.$log=n,this.$element=r,this.AlertService=o,this.ReportRunSlackMessageModel=i,this.ModeCollection=a,this.SlackMessageService=l,this.Utils=s,this.schedulingEnabled=!1,this.hideSlackTooltip()}return SlackSharingController.prototype.$onChanges=function(){this.updateSlackTooltipText()},SlackSharingController.prototype.hideSlackTooltip=function(){this.slackShareTooltipOpened=!1},SlackSharingController.prototype.showSlackTooltip=function(){this.slackShareTooltipOpened=!0},SlackSharingController.prototype.updateSlackTooltipText=function(){this.slackShareHelpText=this.$interpolate(this.$sce.getTrustedHtml(this.SlackMessageService.privateShareHelpText))({slackAppInstaller:this.Utils.escapeHTML(this.slackAppInstaller)||"The person who installed the Mode + Slack app"})},SlackSharingController.prototype.sendSlackMessage=function(){var e=this;this.slackObject.channel=this.selectedChannel.name,"string"==typeof this.selectedChannel.id&&(this.slackObject.channel_id=this.selectedChannel.id),this.slackObject.message=this.SlackMessageService.formatSlackMentions(this.slackObject.message),this.ReportRunSlackMessageModel.create({reportRun:this.reportRun.token,report:this.report.token,params:this.slackObject.toParams()}).then(function(t){e.onDismiss(),e.AlertService.success("Slack message sent")}).catch(function(t){e.AlertService.error("Slack message failed")})},SlackSharingController.prototype.buildChannelsList=function(e){var t=e.search,n=r.copy(e.items);if(n=n.filter(function(e){return-1!==e.id}),t){var o={id:-1,name:t,channelName:"#"+t};"@"!==t[0]&&"#"!==t[0]||(o.channelName=t),e.items=[o].concat(n),e.selected=o}else e.items=n},SlackSharingController.prototype.focusSlackChannelsInput=function(){$(this.$element[0]).find("input.ui-select-search")[0].focus()},SlackSharingController.$inject=["$sce","$interpolate","$log","$element","AlertService","ReportRunSlackMessageModel","ModeCollection","SlackMessageService","Utils"],SlackSharingController}(),bi={bindings:{report:"<",owner:"<",reportRun:"<",runStatus:"<",account:"<",slackObject:"<",slackForm:"<",slackChannels:"<",slackAppInstaller:"<",selectedChannel:"<",schedulingEnabled:"<",onDismiss:"&",detailsLink:"&",onOpenSchedulesModal:"&"},template:Ci.a,controller:yi,controllerAs:"ctrl"};r.module("mode.components").component("slackSharing",bi);var vi=-1,Ii=function(){function TiledPanesController(e,t,n,r,o,i){this.$window=e,this.$scope=t,this.$elem=n,this.$timeout=r,this.store=o,this.flipperService=i,this.heights={top:vi,bottom:vi,left:vi,right:vi}}return TiledPanesController.prototype.dispatchResizeEvent=function(){var e=this;this.$timeout(function(){return Object(Ce.a)(e.$window,"resize")})},TiledPanesController.prototype.updateHandle=function(){this.vertical?this.handle.css({left:"",right:"",bottom:"",top:this.heights.top!==vi?"calc("+this.heights.top+"% - 4px)":""}):this.handle.css({left:this.heights.left!==vi?"calc("+this.heights.left+"% - 4px)":"",right:"",bottom:"",top:""})},TiledPanesController.prototype.resetPanes=function(){this.primaryEl.removeAttr("style"),this.secondaryEl.removeAttr("style"),!this.vertical||this.heights.top===vi||this.isPrimaryMaximized||this.isSecondaryMaximized?this.vertical||this.heights.left===vi||this.isPrimaryMaximized||this.isSecondaryMaximized||(this.primaryEl.css({width:this.heights.left+"%"}),this.secondaryEl.css({width:this.heights.right+"%",left:this.heights.left+"%"})):(this.primaryEl.css({height:this.heights.top+"%"}),this.secondaryEl.css({height:this.heights.bottom+"%",top:this.heights.top+"%"}))},TiledPanesController.prototype.toVert=function(e,t){return(e-t)/this.containerHeight*100},TiledPanesController.prototype.toHoriz=function(e,t,n){var r=t||0,o=n||0;return(e-r)/(this.$window.innerWidth-r-o)*100},TiledPanesController.prototype.startResize=function(e){var t=w()(this.$window);this.containerHeight=this.$elem.height(),this.yTop=this.$elem.offset().top,this.overlay.show(),this.handle.addClass("adjusting"),this.$window.document.documentElement.style.cursor=this.handle.css("cursor"),t.on("mouseup.resize",this.endResize.bind(this)),t.on("mousemove.resize",this.handleResize.bind(this))},TiledPanesController.prototype.endResize=function(e){var t=w()(this.$window);t.off("mouseup.resize"),t.off("mousemove.resize"),this.handle.removeClass("adjusting"),this.$window.document.documentElement.style.cursor="",this.overlay.hide(),this.dispatchResizeEvent()},TiledPanesController.prototype.handleResize=function(e){if(this.vertical){var t=e.pageY-this.yTop,n=t/this.containerHeight*100,r=100-n,o=this.containerHeight-t;t<75?(this.showPrimary&&this.onPrimaryMinimized({$event:e}),this.heights.top=this.heights.bottom=vi):o<75?(this.showSecondary&&this.onSecondaryMinimized({$event:e}),this.heights.top=this.heights.bottom=vi):(this.showPrimary||this.onPrimaryMinimized({$event:e}),this.showSecondary||this.onSecondaryMinimized({$event:e}),this.primaryEl.css({height:n+"%"}),this.secondaryEl.css({height:r+"%",top:n+"%"}),this.handle.css("top","calc("+n+"% - 4px)"),this.heights.top=n,this.heights.bottom=r)}else{var i=this.$elem[0].getBoundingClientRect(),a=this.$window.innerWidth-i.right,l=this.toHoriz(e.pageX,i.left,a),s=e.pageX-i.left,c=this.toHoriz(this.$window.innerWidth-e.pageX-a+i.left,i.left,a),d=this.$window.innerWidth-e.pageX-a;s<75?(this.showPrimary&&this.onPrimaryMinimized({$event:e}),this.heights.left=this.heights.right=vi):d<75?(this.showSecondary&&this.onSecondaryMinimized({$event:e}),this.heights.left=this.heights.right=vi):(this.showPrimary||this.onPrimaryMinimized({$event:e}),this.showSecondary||this.onSecondaryMinimized({$event:e}),this.primaryEl.css({width:l+"%"}),this.secondaryEl.css({width:c+"%",left:l+"%"}),this.handle.css("left","calc("+l+"% - 4px)"),this.heights.left=l,this.heights.right=c)}},TiledPanesController.prototype.$postLink=function(){var e=this;this.primaryEl=this.$elem.find(".primary-pane"),this.secondaryEl=this.$elem.find(".secondary-pane"),this.handle=this.$elem.find(".resize-handle"),this.overlay=this.$elem.find(".resize-overlay"),this.$elem.css("opacity",this.hide?0:1),this.updateHandle(),this.$window.addEventListener("resize",function(){e.updateHandle()}),this.handle.on("mousedown.resize",this.startResize.bind(this)),this.dispatchResizeEvent()},TiledPanesController.prototype.$onChanges=function(e){(e.showSecondary||e.showPrimary||e.vertical)&&this.handle&&(this.updateHandle(),this.resetPanes(),this.dispatchResizeEvent()),e.hide&&this.$elem.css("opacity",this.hide?0:1)},TiledPanesController.prototype.primaryHeaderToggle=function(e){this.showPrimary,this.onPrimaryMaximized({$event:e})},TiledPanesController.prototype.secondaryHeaderToggle=function(e){this.showSecondary?this.onSecondaryMaximized({$event:e}):this.onSecondaryMinimized({$event:e})},TiledPanesController.prototype.minSecondaryMinimize=function(e){e.stopPropagation(),this.onSecondaryMinimized({$event:e})},TiledPanesController.prototype.minSecondaryMaximize=function(e){e.stopPropagation(),this.onSecondaryMaximized({$event:e})},Object.defineProperty(TiledPanesController.prototype,"handleClasses",{get:function(){var e=[this.vertical?"vert-handle":"horiz-handle"];return this.vertical?this.isPrimaryMaximized?e.push("top"):this.isSecondaryMaximized&&e.push("bottom"):this.isPrimaryMaximized?e.push("left"):this.isSecondaryMaximized&&e.push("right"),e.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(TiledPanesController.prototype,"isPrimaryMaximized",{get:function(){return this.showPrimary&&!this.showSecondary},enumerable:!0,configurable:!0}),Object.defineProperty(TiledPanesController.prototype,"isSecondaryMaximized",{get:function(){return!this.showPrimary&&this.showSecondary},enumerable:!0,configurable:!0}),TiledPanesController.$inject=["$window","$scope","$element","$timeout","StoreService","DataLayerFlipperService"],TiledPanesController}();r.module("mode.components").directive("tiledPanes",["$window",function(e){return{scope:{vertical:"<",primaryTheme:"<",showPrimary:"<",hidePrimaryHeader:"@",showSecondary:"<",adjustable:"<",secondaryCollapsedTitle:"@",hide:"<",onPrimaryMaximized:"&",onPrimaryMinimized:"&",onSecondaryMaximized:"&",onSecondaryMinimized:"&"},controller:Ii,controllerAs:"ctrl",bindToController:!0,transclude:{primary:"primaryPane",primaryHeader:"primaryHeader",secondary:"secondaryPane",secondaryHeader:"secondaryHeader",postPrimaryResizeActions:"?postPrimaryResizeActions",postSecondaryResizeActions:"?postSecondaryResizeActions"},template:'<div class="primary-pane {{ ctrl.primaryTheme }}" ng-class="{only: ctrl.isPrimaryMaximized, \'left-window\': !ctrl.vertical, \'top-window\': ctrl.vertical, min: !ctrl.showPrimary}">\n        <div class="primary-header" ng-dblclick="ctrl.primaryHeaderToggle($event)" ng-if="!ctrl.hidePrimaryHeader">\n          <ul class="editor-resize-actions">\n             <li><a href="#" ng-click="ctrl.onPrimaryMinimized({ $event: $event })" title="Minimize panel"><i class="icon-panel-minimize-default align-md-icon"></i></a></li>\n             <li><a href="#" ng-click="ctrl.onPrimaryMaximized({ $event: $event })" title="Maximize panel"><i class="icon-panel-maximize-default align-md-icon"></i></a></li>\n             <li><div class="additional-actions" ng-transclude="postPrimaryResizeActions"></div></li>\n          </ul>\n          <div ng-transclude="primaryHeader"></div>\n        </div>\n        <div ng-transclude="primary" ng-show="ctrl.showPrimary"></div>\n      </div>\n      <div class="resize-handle" ng-class="ctrl.handleClasses" ng-show="ctrl.showPrimary && ctrl.showSecondary">\n        <div class="simple-handle" ng-class="ctrl.vertical ? \'icon-resize-handle-h horiz\' : \'icon-resize-handle-v vert\'"></div>\n      </div>\n      <div class="secondary-pane" ng-class="{only: ctrl.isSecondaryMaximized, \'right-window\': !ctrl.vertical, \'bottom-window\': ctrl.vertical, min: !ctrl.showSecondary}">\n        <div class="secondary-header" ng-show="ctrl.showSecondary" ng-dblclick="ctrl.secondaryHeaderToggle($event)">\n          <ul class="editor-resize-actions">\n            <li><a href="#" ng-click="ctrl.onSecondaryMinimized({ $event: $event })" title="Minimize panel"><i class="icon-panel-minimize-default align-md-icon"></i></a></li>\n            <li><a href="#" ng-click="ctrl.onSecondaryMaximized({ $event: $event })" title="Maximize panel"><i class="icon-panel-maximize-default align-md-icon"></i></a></li>\n            <li><div class="additional-actions" ng-transclude="postSecondaryResizeActions"></div></li>\n          </ul>\n          <div ng-transclude="secondaryHeader"></div>\n        </div>\n        <div ng-transclude="secondary" ng-show="ctrl.showSecondary" class="pane-content"></div>\n        <div class="two-minimized {{ ctrl.primaryTheme }}" ng-show="!ctrl.showSecondary" ng-click="ctrl.secondaryHeaderToggle($event)">\n          <h3 class="editor-nav-title collapsed">{{ ctrl.secondaryCollapsedTitle }}</h3>\n          <ul class="editor-resize-actions">\n            <li><a href="#" ng-click="ctrl.minSecondaryMinimize($event)" title="Minimize panel"><i class="icon-panel-minimize-default align-md-icon"></i></a></li>\n            <li><a href="#" ng-click="ctrl.minSecondaryMaximize($event)" title="Maximize panel"><i class="icon-panel-maximize-default align-md-icon"></i></a></li>\n            <li><div class="additional-actions" ng-transclude="postSecondaryResizeActions"></div></li>\n          </ul>\n        </div>\n      </div>\n      <div class="resize-overlay"></div>\n      ',link:function(e,t){}}}]);var Si={bindings:{owner:"<",account:"<",schedulingEnabled:"<",onDismiss:"&"},template:'\n  <div class="slack-cta">\n    <div class="modal-container">\n      <div class="slack-cta-content" ng-if="ctrl.owner.isAdmin()">\n        <h3>Share reports with your team on Slack</h3>\n        <p>You can add Mode to your Slack team from the Slack Application page in Settings</p>\n        <a href="#" target="_self" ng-href="/organizations/{{ctrl.owner.username}}/slack_apps"><div class="btn btn-lg btn-primary">Go to Settings</div></a>\n      </div>\n      <div class="slack-cta-content" ng-if="!ctrl.owner.isAdmin()">\n        <h3>An admin can help you add Mode to your Slack team</h3>\n        <p>Send this link to an admin and ask them to add Mode to your Slack team: <span class="copy-link">https://modeanalytics.com/organizations/{{ctrl.owner.username}}/slack_apps</span></p>\n        <a href="#" clippy string-value="https://modeanalytics.com/organizations/{{ctrl.owner.username}}/slack_apps"><div class="btn btn-lg btn-primary">Copy Link</div></a>\n      </div>\n    </div>\n    <div class="modal-action-bar">\n      <div class="modal-action-bar-links"\n           ng-if="ctrl.schedulingEnabled">\n        <a class="disabled" href="javascript://">Create a schedule</a> to share this regularly.\n      </div>\n      <button type="submit" class="btn btn-lg btn-filled-primary" ng-disabled="true" disabled="true">Send</button>\n    </div>\n  </div>\n',controller:function(){function SlackCtaController(e,t){this.$log=e,this.AlertService=t,this.schedulingEnabled=!1}return SlackCtaController.$inject=["$log","AlertService"],SlackCtaController}(),controllerAs:"ctrl"};r.module("mode.components").component("slackCta",Si);var wi=n("u5Rt"),Ai=n.n(wi),Mi=function(){function InviteModalController(){}return InviteModalController.prototype.createInvite=function(){this.$close(this.email)},InviteModalController}(),ki=function(e,t,n,r){return{restrict:"A",link:function(o,i){var a=this,l=$("meta[name=owner-username]").attr("content");t.find({username:l,useEntryPath:!0,refresh:!0,includes:["new_invite"]}).then(function(e){o.account=e}),i.on("click.confirm",function(t){t.preventDefault(),t.stopPropagation(),e.open({title:o.inviteModalTitle},{template:Ai.a,controller:Mi,controllerAs:"ctrl",bindToController:!0}).result.then((function(e){var t={"invite.invitee.email":e,"invite.message":"A teammate needs your help connecting a database to Mode. Getting connected is easy, secure, and will allow your team to analyze data, build reports, and share insights instantly.\n\nLearn more about connecting a database: https://help.modeanalytics.com/articles/how-mode-connects/\n\nClick below to accept your invite and connect a database to Mode:"};n.create({account:o.account.username,params:t}).then(function(){r.success("Invite sent")}).catch(function(){r.error("Failed to send invite")})}).bind(a))}),o.$on("$destroy",function(){return i.off("click.confirm")})},scope:{inviteModalTitle:"@"}}};ki.$inject=["ModalService","AccountModel","InviteModel","AlertService"],r.module("mode.components").directive("inviteModal",ki);var Ti=function(){function FullScreenButtonsController(e,t,n){this.$scope=e,this.fullscreenService=t,this.targetElem=n}return FullScreenButtonsController.prototype.enterFullScreen=function(){this.targetElem=$(document).find(".report-view-container")[0],this.fullscreenService.enterFullscreen(this.targetElem)},FullScreenButtonsController.$inject=["$scope","FullscreenService"],FullScreenButtonsController}();r.module("mode.components").directive("fullscreenButtons",function(){return{restrict:"A",controller:Ti,controllerAs:"ctrl"}});var xi=n("yU+A"),Di=n("Q4DI"),Li=n.n(Di),Ri=n("j6yJ"),Ni=n.n(Ri),Ei=n("iei7"),ji=n.n(Ei),Oi=n("9SHd"),Pi=n.n(Oi),Fi=n("Le+v"),zi=n.n(Fi),_i=n("FX5C"),$i=n.n(_i),Bi=n("OxY+"),Vi=n.n(Bi),Ui=n("xNe+"),Zi=n.n(Ui),Gi=n("HPXR"),Yi=n.n(Gi),Qi=n("v0tr"),Hi=n.n(Qi),Wi=n("gPPg"),qi=n.n(Wi),Ji=n("C/qa"),Xi=n.n(Ji),Ki=n("PecA"),ea=n.n(Ki),ta=n("0joF"),na=n.n(ta),ra=n("jvTj"),oa=n.n(ra),ia=n("LtlW"),aa=n.n(ia),la=n("0Kl5"),sa=n.n(la),ca=n("Azxg"),da=n.n(ca),ua=n("Rw4e"),pa=n.n(ua),ha=n("uqgC"),ga=n.n(ha),ma=n("KxDM"),fa=n.n(ma),Ca=n("xGKD"),ya=n.n(Ca),ba=n("OR75"),va=n.n(ba),Ia=n("c+0m"),Sa=n.n(Ia),wa=n("4tnq"),Aa=n.n(wa),Ma=n("EpWU"),ka=n.n(Ma),Ta=n("rwX7"),xa=n.n(Ta),Da=n("RySr"),La=n.n(Da),Ra=n("7VZ8"),Na=n.n(Ra),Ea=n("s5rD"),ja=n.n(Ea),Oa=n("TGbp"),Pa=n.n(Oa),Fa=n("7hvy"),za=n.n(Fa),_a=n("mEar"),$a=n.n(_a),Ba=(Li.a,Ni.a,ji.a,Pi.a,zi.a,$i.a,Vi.a,Zi.a,Yi.a,Hi.a,qi.a,Xi.a,ea.a,na.a,aa.a,sa.a,da.a,pa.a),Va=ga.a,Ua=oa.a,Za={continuousDate:fa.a,continuousNumber:ya.a,discreteDate:va.a,discreteNumber:Sa.a,discreteText:Aa.a},Ga={sortAscContinuous:ka.a,sortDescContinuous:xa.a,sortAscDiscrete:La.a,sortDescDiscrete:Na.a,sortAscNames:ja.a,sortDescNames:Pa.a,columns:za.a,rows:$a.a},Ya=n("DR9S"),Qa={bindings:{model:"<",relName:"<",dragStart:"&"},template:'<h4 class="fixed">Dimensions</h4>\n    <ul class="list-unstyled dimension-list">\n      <li ng-repeat="attr in ctrl.dimensions | orderBy:\'name\'">\n        <div class="dimension" draggable="true" ng-dragstart="ctrl.dragstart($event, attr)"><img ng-src="{{ctrl.getFieldIcon(attr)}}" />{{ attr.name }}</div>\n      </li>\n    </ul>\n    <h4 class="fixed">Measures</h4>\n    <ul class="list-unstyled measure-list">\n      <li ng-repeat="attr in ctrl.measures | orderBy:\'name\'">\n        <div class="measure" draggable="true" ng-dragstart="ctrl.dragstart($event, attr)"><img ng-src="{{ctrl.getFieldIcon(attr)}}">{{ attr.name }}</div>\n      </li>\n    </ul>',controller:function(){function FieldListController(e,t){this.$element=e,this.$timeout=t}return FieldListController.prototype.$onChanges=function(e){this.dimensions=[],this.measures=[],this.model&&this.relName&&(this.dimensions=Array.from(Ya.a.Attrs.dimensions(this.model,this.relName)),this.measures=Array.from(Ya.a.Attrs.measures(this.model,this.relName)))},FieldListController.prototype.$postLink=function(){var e=this;this.$timeout(function(){e.$element.find(".dimension,.measure").each(function(e,t){t.addEventListener("dragstart",function(e){e.dataTransfer&&e.dataTransfer.setData("text/plain",e.target.id)})})})},FieldListController.prototype.getFieldIcon=function(e){switch(e.formula.type.name){case xi.DataType.Name.Boolean:case xi.DataType.Name.Float:case xi.DataType.Name.Integer:case xi.DataType.Name.Decimal:return e.type===xi.Attr.Type.Continuous?Za.continuousNumber:Za.discreteNumber;case xi.DataType.Name.Timestamp:return e.type===xi.Attr.Type.Continuous?Za.continuousDate:Za.discreteDate;default:return Za.discreteText}},FieldListController.prototype.dragstart=function(e,t){this.dragStart({$field:t,$source:"field-list"})},FieldListController.$inject=["$element","$timeout"],FieldListController}(),controllerAs:"ctrl"};r.module("mode.components").component("fieldList",Qa);var Ha=n("yqn6"),Wa=n("KXXZ"),qa=function(){function FieldController(){this.contextMenuOptions=[]}return FieldController.prototype.$onChanges=function(e){if(e.field){var t=this.field,n=t.formula,r=t.variable,o=t.id;if(this.isValid=!0,this.isNames=Ya.a.Formulas.isNames(n),this.isValues=Ya.a.Formulas.isValues(n),this.isNames)this.viewField=Ya.a.Fields.names(o);else if(this.isValues)this.viewField=Ya.a.Fields.values(o);else{var i=Ya.a.compile(this.model,this.relName,n);if(i.type===xi.Compiler.Result.Type.Success)switch(this.isValid=!0,this.formula=i.formula,r.type){case fr.VariableType.DISCRETE:this.viewField=Ya.a.field(this.model,this.relName,n,xi.Attr.Type.Discrete,o);break;case fr.VariableType.CONTINUOUS:this.viewField=Ya.a.field(this.model,this.relName,n,xi.Attr.Type.Continuous,o)}else switch(this.isValid=!1,this.error=i.errors[0],i.formula.state){case xi.Formula.State.Parsed:case xi.Formula.State.Compiled:this.formula=i.formula;break;default:this.formula=null}}this.contextMenuOptions=this.buildContextMenuOptions()}},FieldController.prototype.getMenuItemHtml=function(e,t,n){return void 0===n&&(n=""),'\n      <span class="context-item">\n        <a href="#"\n           tabindex="-1"\n           class="context-link '+(e?"selected":"")+'">\n          <span class="indicator" ></span>\n          <span class="context-link-name">'+t+'</span>\n          <span class="context-link-aside">'+n+"</span>\n        </a>\n      </span>\n    "},FieldController.prototype.getMenuHeadingHtml=function(e,t){return'\n      <span class="context-heading-item">\n        '+(t?'<img class="icon" src="'+t+'" />':"")+'\n        <span class="context-heading">\n          '+e+"\n        </span>\n      </span>\n    "},Object.defineProperty(FieldController.prototype,"isContinuous",{get:function(){return null!=this.viewField&&(Ya.a.Fields.isContinuous(this.viewField)&&!Ya.a.Fields.isNames(this.viewField))},enumerable:!0,configurable:!0}),Object.defineProperty(FieldController.prototype,"isDiscrete",{get:function(){return null!=this.viewField&&(Ya.a.Fields.isDiscrete(this.viewField)&&!Ya.a.Fields.isNames(this.viewField))},enumerable:!0,configurable:!0}),Object.defineProperty(FieldController.prototype,"displayName",{get:function(){return this.isNames||this.isValues?this.viewField.name:this.formula&&this.formula.name},enumerable:!0,configurable:!0}),Object.defineProperty(FieldController.prototype,"caretIcon",{get:function(){return this.isValid?this.isDiscrete?"icon-caret-blue":this.isContinuous?"icon-caret-green":void 0:"icon-caret-red"},enumerable:!0,configurable:!0}),FieldController}(),Ja={bindings:{field:"<",model:"<",relName:"<",chartModel:"<",onDragStart:"&",onDragCancel:"&"},controllerAs:"ctrl",template:'\n    <div ng-class="{discrete: ctrl.isDiscrete, continuous: ctrl.isContinuous, invalid: !ctrl.isValid}"\n         class="enc-field"\n         title="{{ !ctrl.isValid ? ctrl.error : ctrl.displayName }}"\n         context-menu="ctrl.contextMenuOptions"\n         context-menu-class="context-menu-ng"\n         ng-dblclick="ctrl.handleDoubleClick && ctrl.handleDoubleClick()"\n         draggable="{{!ctrl.isNames}}"\n         ng-dragstart="ctrl.onDragStart({ $event: $event, $field: ctrl.viewField, $valid: ctrl.isValid })"\n         ng-dragend="ctrl.onDragCancel({ $event: $event, $field: ctrl.field })">\n      <span class="text" ng-class="{\'system-value\': ctrl.isNames || ctrl.isValues}">{{ ctrl.displayName }}</span>\n      <img ng-if="ctrl.sortDirectionIcon"\n           src="{{ctrl.sortDirectionIcon}}"\n           class="icon-sort" />\n      <span class="context-menu-target"\n        context-menu="ctrl.contextMenuOptions"\n        context-menu-class="context-menu-ng"\n        context-menu-on="click">\n        <i ng-class="ctrl.caretIcon"></i>\n      </span>\n    </div>\n  '},Xa=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Ka=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},el=function(e){function ViewCalcFieldController(t,n){var r=e.call(this)||this;return r.$element=t,r.AlertService=n,r}return Xa(ViewCalcFieldController,e),ViewCalcFieldController.prototype.$onChanges=function(t){var n=this;if(e.prototype.$onChanges.call(this,t),t.field&&this.isValid){var r=this.encoding.sorts.find(function(e){return e.source===n.field.formula});if(r&&r.byField){var o=[];Object(Wa.q)(this.field.formula,r.byField.formula,this.chartModel,o),this.isValid=!o.length,this.isValid||(this.error=o[0])}}},ViewCalcFieldController.prototype.$postLink=function(){this.$element[0].addEventListener("dragstart",function(e){e.dataTransfer&&e.dataTransfer.setData("text/plain",e.target.id)})},ViewCalcFieldController.prototype.buildContextMenuOptions=function(){var e=this,t=[],n=a();return this.isNames||this.isValues?(this.sortDirectionIcon&&t.push({html:this.getMenuItemHtml(!1,"Clear Sort"),click:function(){return e.removeSort()}}),t):(this.isValid&&this.isNumberType&&"discrete"!==this.varType&&("continuous"!==this.varType&&t.push({html:this.getMenuItemHtml(!this.aggFunc,"No Aggregate"),click:function(){return e.setAggregate(null)}},null),t.push({html:this.getMenuItemHtml("SUM"===this.aggFunc,"Sum"),click:function(){return e.setAggregate("SUM")}},{html:this.getMenuItemHtml("COUNT"===this.aggFunc,"Count"),click:function(){return e.setAggregate("COUNT")}},{html:this.getMenuItemHtml("COUNTD"===this.aggFunc,"Count (Distinct)"),click:function(){return e.setAggregate("COUNTD")}},{html:this.getMenuItemHtml("AVG"===this.aggFunc,"Average"),click:function(){return e.setAggregate("AVG")}},{html:this.getMenuItemHtml("MAX"===this.aggFunc,"Maximum"),click:function(){return e.setAggregate("MAX")}},{html:this.getMenuItemHtml("MIN"===this.aggFunc,"Minimum"),click:function(){return e.setAggregate("MIN")}},null)),this.isValid&&this.isDateType&&(this.varType?"discrete"===this.varType&&this.isDateType&&t.push({html:this.getMenuHeadingHtml("Dates and Times",Za.discreteDate),click:function(){return!1},enabled:function(){return!1}}):t.push({html:this.getMenuHeadingHtml("Dates and Times",Za.continuousDate),click:function(){return!1},enabled:function(){return!1}}),(!this.varType||"discrete"===this.varType&&this.isDateType)&&t.push({html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Year,"Year",n.format("YYYY")),click:function(){return e.setDateTrunc("year")}},{html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Quarter,"Quarter",n.format("[Q]Q YYYY")),click:function(){return e.setDateTrunc("quarter")}},{html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Month,"Month",n.format("MMM YYYY")),click:function(){return e.setDateTrunc("month")}},{html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Week,"Week Of",a(n).startOf("week").format("MMM D YYYY")),click:function(){return e.setDateTrunc("week")}},{html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Day,"Day",n.format("MMM D YYYY")),click:function(){return e.setDateTrunc("day")}},{html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Hour,"Hour",n.format("ha MMM D YYYY")),click:function(){return e.setDateTrunc("hour")}},{html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Minute,"Minute",n.format("h:mma MMM D YYYY")),click:function(){return e.setDateTrunc("minute")}},{html:this.getMenuItemHtml(this.isDateTrunc&&this.datePart===xi.DateTime.Unit.Second,"Second",n.format("h:mm:ssa MMM D YYYY")),click:function(){return e.setDateTrunc("second")}},null),"continuous"!==this.varType&&t.push({html:this.getMenuHeadingHtml("Date Parts",Za.discreteDate),click:function(){return!1},enabled:function(){return!1}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Year,"Year",n.format("YYYY")),click:function(){return e.setDatePart("year")}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Quarter,"Quarter",n.format("[Q]Q")),click:function(){return e.setDatePart("quarter")}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Month,"Month",n.format("MMM")),click:function(){return e.setDatePart("month")}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Weekday,"Weekday",n.format("ddd")),click:function(){return e.setDatePart("weekday")}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Day,"Day",n.format("D")),click:function(){return e.setDatePart("day")}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Hour,"Hour",n.format("ha")),click:function(){return e.setDatePart("hour")}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Minute,"Minute",n.format("m")),click:function(){return e.setDatePart("minute")}},{html:this.getMenuItemHtml(this.isDatePart&&this.datePart===xi.DateTime.Unit.Second,"Second",n.format("s")),click:function(){return e.setDatePart("second")}},null),this.varType||t.push({html:this.getMenuItemHtml(!this.datePart&&!this.aggFunc&&this.isContinuous,"Exact Date and Time"),click:function(){return e.setAggregate(null,!0)}},null)),this.isValid&&"discrete"!==this.varType&&!this.isNumberType&&(this.isDateType||"continuous"===this.varType||t.push({html:this.getMenuItemHtml(!this.aggFunc&&!this.isContinuous,"No Aggregate"),click:function(){return e.setAggregate(null,!1)}},null),t.push({html:this.getMenuItemHtml("COUNT"===this.aggFunc,"Count"),click:function(){return e.setAggregate("COUNT",!0)}},{html:this.getMenuItemHtml("COUNTD"===this.aggFunc,"Count (Distinct)"),click:function(){return e.setAggregate("COUNTD",!0)}},null)),this.isValid&&null==this.varType&&(this.isNumberType||this.isDateType)&&t.push({html:this.getMenuItemHtml(Ya.a.Fields.isDiscrete(this.viewField),"Discrete"),click:function(){return e.setVariableType(fr.VariableType.DISCRETE)}},{html:this.getMenuItemHtml(Ya.a.Fields.isContinuous(this.viewField),"Continuous"),click:function(){return e.setVariableType(fr.VariableType.CONTINUOUS)}},null),this.sortDirectionIcon&&t.push({html:this.getMenuItemHtml(!1,"Clear Sort"),click:function(){return e.removeSort()}},null),t.push({html:this.getMenuItemHtml(!1,"Remove"),click:function(){return e.removeField()}}),t)},ViewCalcFieldController.prototype.removeSort=function(){this.onRemoveSort({$source:this.viewField.formula.source})},ViewCalcFieldController.prototype.removeField=function(){this.onRemove({$field:this.field})},ViewCalcFieldController.prototype.dispatchEncodingUpdate=function(e){this.onUpdate({$result:e})},ViewCalcFieldController.prototype.setAggregate=function(e,t){if(void 0===t&&(t=void 0),this.formula.expr.form!==xi.Expression.Form.Generic){this.viewField.type;var n=this.formula.expr.ref.name,r={id:this.field.id,formula:e?e+"(["+n+"])":"["+n+"]",variable:void 0===t?this.field.variable:{type:t?fr.VariableType.CONTINUOUS:fr.VariableType.DISCRETE}},o=this.chartModel.buildViewCalcField(r.formula,r.variable.type,r.id),i=void 0;e&&(i=Object(Wa.d)(this.encoding,this.chartModel,o)),i?this.AlertService.error("\n          Y-Axis already uses "+o.name+".\n          To use fields more than once they must have unique aggregates.\n        "):this.dispatchEncodingUpdate(Object(Ha.F)(this.encoding,r))}},ViewCalcFieldController.prototype.setDatePart=function(e){if(this.formula.expr.form!==xi.Expression.Form.Generic){var t=this.formula.expr.ref.name,n=Object(Ha.F)(this.encoding,{id:this.field.id,formula:"DATEPART('"+e+"', ["+t+"])",variable:{type:fr.VariableType.DISCRETE}});this.dispatchEncodingUpdate(n)}},ViewCalcFieldController.prototype.setDateTrunc=function(e){if(this.formula.expr.form!==xi.Expression.Form.Generic){var t=this.formula.expr.ref.name,n=fr.VariableType.CONTINUOUS;"discrete"===this.varType&&(n=fr.VariableType.DISCRETE);var r=Object(Ha.F)(this.encoding,{id:this.field.id,formula:"DATETRUNC('"+e+"', ["+t+"])",variable:{type:n}});this.dispatchEncodingUpdate(r)}},ViewCalcFieldController.prototype.setVariableType=function(e){var t=Object(Ha.F)(this.encoding,{id:this.field.id,variable:{type:e}});this.dispatchEncodingUpdate(t)},Object.defineProperty(ViewCalcFieldController.prototype,"canToggleDimension",{get:function(){return!(this.isNames||this.isValues)},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"datePart",{get:function(){if(this.viewField.formula.role.name===xi.DataRole.Name.DatePart||this.viewField.formula.role.name===xi.DataRole.Name.DateTrunc)return this.viewField.formula.role.unit},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"isDateTrunc",{get:function(){return this.viewField.formula.role.name===xi.DataRole.Name.DateTrunc},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"isDatePart",{get:function(){return this.viewField.formula.role.name===xi.DataRole.Name.DatePart},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"aggFunc",{get:function(){if(this.formula.expr.form===xi.Expression.Form.Aggregate)return this.formula.expr.call.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"isNumberType",{get:function(){if(this.formula.expr.form===xi.Expression.Form.Generic)return Ya.a.Fields.isValues(this.viewField);switch(Ya.a.Attrs.find(this.model,this.relName,this.formula.expr.ref.name).formula.type.name){case xi.DataType.Name.Float:case xi.DataType.Name.Integer:case xi.DataType.Name.Decimal:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"isDateType",{get:function(){if(this.formula.expr.form===xi.Expression.Form.Generic)return!1;switch(Ya.a.Attrs.find(this.model,this.relName,this.formula.expr.ref.name).formula.type.name){case xi.DataType.Name.Timestamp:return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"sortDirectionIcon",{get:function(){var e=this;if(this.encoding&&this.encoding.sorts){var t=this.encoding.sorts.filter(function(t){return t.source===e.field.formula})[0];if(t&&this.viewField){if(Ya.a.Fields.isNames(this.viewField))return t.descending?Ga.sortAscNames:Ga.sortDescNames;if(Ya.a.Fields.isDiscrete(this.viewField))return t.descending?Ga.sortDescDiscrete:Ga.sortAscDiscrete}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(ViewCalcFieldController.prototype,"caretIcon",{get:function(){return this.isValid?this.isDiscrete?"icon-caret-blue":this.isContinuous?"icon-caret-green":Ya.a.Fields.isNames(this.viewField)&&this.sortDirectionIcon?"icon-caret-gray":void 0:"icon-caret-red"},enumerable:!0,configurable:!0}),ViewCalcFieldController.$inject=["$element","AlertService"],ViewCalcFieldController}(qa),tl=Ka({},Ja,{bindings:Ka({},Ja.bindings,{encoding:"<",varType:"@",onUpdate:"&",onRemove:"&",onRemoveSort:"&"}),controller:el});r.module("mode.components").component("encViewCalcField",tl);var nl,rl=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),ol=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},il=function(e){function FilterFieldController(t){var n=e.call(this)||this;n.handleDoubleClick=n.triggerEdit;var r=$("meta[name=owner-username]").attr("content");return n.datetime_dilation=t.enabled(di.a.Type.DatetimeDialation)||t.enabled(di.a.Type.DatetimeDialation,r),n}return rl(FilterFieldController,e),FilterFieldController.prototype.triggerEdit=function(e,t){this.onTriggerEdit({$encFilterField:e||this.field,$oldFilter:t})},FilterFieldController.prototype.buildContextMenuOptions=function(){var e=this;if(!this.isValid)return[{html:this.getMenuItemHtml(!1,"Remove"),click:function(t){return e.onRemove({$field:e.field})}}];if(!this.datetime_dilation)return[{html:this.getMenuItemHtml(!1,"Edit Filter..."),click:function(){return e.triggerEdit()}},null,{html:this.getMenuItemHtml(!1,"Remove"),click:function(){return e.onRemove({$field:e.field})}}];var t=[{html:this.getMenuItemHtml(!1,"Edit Filter..."),click:function(){return e.triggerEdit()}},null],n=!1;switch(this.viewField.formula.role.name){case xi.DataType.Name.Timestamp:case xi.DataRole.Name.DatePart:case xi.DataRole.Name.DateTrunc:n=!0}if(n){var r=function(t,n){for(var r,o=0,i=e.encoding.filter;o<i.length;o++){var a=i[o];if(a.formula===t){r=a;break}}if(n===fr.FilterType.Discrete){var l={mode:fr.SelectionMode.ALL,selected:[]};if(r){if(r.filterType===fr.FilterType.DiscreteBoolean||r.filterType===fr.FilterType.RelativeDate)throw new Error("Unexpected filter type, our system never creates these: "+r.filterType);l=r.filterType===fr.FilterType.Discrete?r.selection:Object(Ha.t)(r,e.chartModel).selection}e.triggerEdit({filterType:fr.FilterType.Discrete,variable:{type:fr.VariableType.DISCRETE},formula:t,selection:l},e.field)}else{var s={min:null,max:null};if(r){if(r.filterType===fr.FilterType.DiscreteBoolean||r.filterType===fr.FilterType.RelativeDate)throw new Error("Unexpected filter type, our system never creates these: "+r.filterType);s=r.filterType===fr.FilterType.Discrete?Object(Ha.u)(r,e.chartModel).newFilter.range:r.range}e.triggerEdit({filterType:fr.FilterType.Continuous,variable:{type:fr.VariableType.CONTINUOUS},formula:t,range:s,includeMin:!0,includeMax:!0,includeNulls:!1},e.field)}},o=a.utc(),i=null;switch(this.viewField.formula.role.name){case xi.DataRole.Name.DatePart:case xi.DataRole.Name.DateTrunc:i=this.viewField.formula.role.unit}var l=function(t){if(i!==t){var n=Ya.a.Attrs.findByFormula(e.model,e.relName,e.formula);r("DATETRUNC('"+t+"', ["+n.name+"])",fr.FilterType.Discrete)}};t.push({html:this.getMenuHeadingHtml("Dates and Times",Za.continuousDate),click:function(){return!1},enabled:function(){return!1}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Year,"Year",o.format("YYYY")),click:function(){return l(xi.DateTime.Unit.Year)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Quarter,"Quarter",o.format("[Q]Q YYYY")),click:function(){return l(xi.DateTime.Unit.Quarter)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Month,"Month",o.format("MMM YYYY")),click:function(){return l(xi.DateTime.Unit.Month)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Week,"Week Of",a(o).startOf("week").format("MMM D YYYY")),click:function(){return l(xi.DateTime.Unit.Week)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Day,"Day",o.format("MMM D YYYY")),click:function(){return l(xi.DateTime.Unit.Day)}},null);var s=function(t){if(i!==t){var n=Ya.a.Attrs.findByFormula(e.model,e.relName,e.formula),o=i?e.field.filterType:fr.FilterType.Discrete;r("DATEPART('"+t+"', ["+n.name+"])",o)}};t.push({html:this.getMenuHeadingHtml("Date Parts",Za.discreteDate),click:function(){return!1},enabled:function(){return!1}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Year,"Year",o.format("YYYY")),click:function(){return s(xi.DateTime.Unit.Year)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Quarter,"Quarter",o.format("[Q]Q")),click:function(){return s(xi.DateTime.Unit.Quarter)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Month,"Month",o.format("MMM")),click:function(){return s(xi.DateTime.Unit.Month)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Weekday,"Weekday",o.format("ddd")),click:function(){return s(xi.DateTime.Unit.Weekday)}},{html:this.getMenuItemHtml(i===xi.DateTime.Unit.Day,"Day",o.format("D")),click:function(){return s(xi.DateTime.Unit.Day)}},null,{html:this.getMenuItemHtml(this.formula.expr.form===xi.Expression.Form.Access,"Exact Date and Time"),click:function(){if(e.formula.expr.form!==xi.Expression.Form.Access){var t=Ya.a.Attrs.findByFormula(e.model,e.relName,e.formula);r("["+t.name+"]",fr.FilterType.Discrete)}}},null)}switch(this.viewField.formula.role.name){case xi.DataType.Name.Integer:case xi.DataType.Name.Float:case xi.DataType.Name.Decimal:case xi.DataType.Name.Timestamp:case xi.DataRole.Name.DatePart:case xi.DataRole.Name.DateTrunc:t.push({html:this.getMenuItemHtml(this.field.filterType===fr.FilterType.Discrete||this.field.filterType===fr.FilterType.DiscreteBoolean,"Discrete"),click:function(){e.field.filterType!==fr.FilterType.Continuous&&e.field.filterType!==fr.FilterType.ContinuousDate||e.triggerEdit(Object(Ha.t)(e.field,e.chartModel))}},{html:this.getMenuItemHtml(this.field.filterType===fr.FilterType.Continuous||this.field.filterType===fr.FilterType.ContinuousDate,"Continuous"),click:function(){if(e.field.filterType===fr.FilterType.Discrete){var t=Object(Ha.u)(e.field,e.chartModel),n=t.newFilter,r=t.equivalent;e.triggerEdit(n,!r&&e.field)}},enabled:function(){if(e.formula.state!==xi.Formula.State.Compiled)return!1;var t=e.formula.expr.form===xi.Expression.Form.Access,n=e.formula.role.name===xi.DataRole.Name.DateTrunc,r=e.viewField.formula.type.name===xi.DataType.Name.Timestamp;return!(n||t&&r)}},null)}return t.push({html:this.getMenuItemHtml(!1,"Remove"),click:function(){return e.onRemove({$field:e.field})}}),t},FilterFieldController.$inject=["DataLayerFlipperService"],FilterFieldController}(qa),al=ol({},Ja,{bindings:ol({},Ja.bindings,{encoding:"<",onTriggerEdit:"&",onRemove:"&"}),controller:il});r.module("mode.components").component("encFilterField",al),function(e){e.Bar="bar",e.LineCombo="linecombo",e.Area="area",e.Circle="circle",e.Scatter="scatter",e.Map="map"}(nl||(nl={}));var ll=function(){function VegasMarksController(e,t,n,r,o){this.colorPicker=e,this.flipperService=t,this.themeService=n,this.Utils=r,this.owner=o,this.paletteType="categorical",this.chartPickerOpen=!1,this.dragHovered=null,this.dragCounter=0,this.chartTypes=[{value:"stackedBar",text:"Bar Chart",pickerText:"Bar",iconClass:"icon-chart-bar-color",thumbnailClass:"icon-chart-thumbnail-bar"},{value:"bar",text:"Grouped Bar Chart",pickerText:"Grouped Bar",iconClass:"icon-chart-grouped-bar-color",thumbnailClass:"icon-chart-thumbnail-groupedbar"},{value:"line",text:"Line Chart",pickerText:"Line",iconClass:"icon-chart-line-color",thumbnailClass:"icon-chart-thumbnail-line"},{value:"linePlusBar",text:"Line + Bar Chart",pickerText:"Line + Bar",iconClass:"icon-chart-linebar-color",thumbnailClass:"icon-chart-thumbnail-linebar"},{value:"area",text:"Area Chart",pickerText:"Area",iconClass:"icon-chart-area-color",thumbnailClass:"icon-chart-thumbnail-area"},{value:"totalArea",text:"100% Area Chart",pickerText:"100% Area",iconClass:"icon-chart-area100-color",thumbnailClass:"icon-chart-thumbnail-area-100"},{value:"scatter",text:"Scatter Chart",pickerText:"Scatter",iconClass:"icon-chart-scatter-color",thumbnailClass:"icon-chart-thumbnail-scatter"},{value:"pie",text:"Pie Chart",pickerText:"Pie",iconClass:"icon-chart-pie-color",thumbnailClass:"icon-chart-thumbnail-pie"},{value:"donut",text:"Donut Chart",pickerText:"Donut",iconClass:"icon-chart-donut-color",thumbnailClass:"icon-chart-thumbnail-donut"}];var i=$("meta[name=report-owner-username]").attr("content")||$("meta[name=owner-username]").attr("content")||r.locationSearchLookup(window.location.search,"report_owner_username");this.customize_wide_shut=t.enabled(di.a.Type.CustomizeWideShut)||t.enabled(di.a.Type.CustomizeWideShut,i),this.owner=i}return VegasMarksController.prototype.$onInit=function(){var e=this;this.mousePosSub=V.Observable.fromEvent(window,"dragover").map(function(e){return{x:e.pageX,y:e.pageY}}).subscribe(function(t){return e.mouseDragoverPos=t}),this.selectedPalette=this.currentPalette,this.mapQuestEnabled=this.flipperService.enabled(di.a.Type.MapQuest,this.owner),this.horizontalPieEnabled=this.flipperService.enabled(di.a.Type.HorizontalPie,this.owner),this.horizontalPieEnabled&&(this.chartTypes=[{value:"bar",text:"Grouped Bar Chart",pickerText:"Grouped Bar",iconClass:"icon-chart-grouped-bar-color",thumbnailClass:"icon-chart-thumbnail-groupedbar",type:nl.Bar},{value:"stackedBar",text:"Bar Chart",pickerText:"Bar",iconClass:"icon-chart-bar-color",thumbnailClass:"icon-chart-thumbnail-bar",type:nl.Bar},{value:"stackedBar100",text:"100% Bar Chart",pickerText:"100% Bar",iconClass:"icon-chart-bar-100-color",thumbnailClass:"icon-chart-thumbnail-bar-100",type:nl.Bar},{value:"hBar",text:"Grouped Bar Chart",pickerText:"Grouped Bar",iconClass:"icon-chart-h-grouped-bar-color",thumbnailClass:"icon-chart-thumbnail-h-groupedbar",type:nl.Bar},{value:"hStackedBar",text:"Bar Chart",pickerText:"Bar",iconClass:"icon-chart-h-bar-color",thumbnailClass:"icon-chart-thumbnail-h-bar",type:nl.Bar},{value:"hStackedBar100",text:"100% Bar Chart",pickerText:"100% Bar",iconClass:"icon-chart-h-bar-100-color",thumbnailClass:"icon-chart-thumbnail-h-bar-100",type:nl.Bar},{value:"line",text:"Line Chart",pickerText:"Line",iconClass:"icon-chart-line-color",thumbnailClass:"icon-chart-thumbnail-line",type:nl.LineCombo},{value:"linePlusBar",text:"Line + Bar Chart",pickerText:"Line + Bar",iconClass:"icon-chart-linebar-color",thumbnailClass:"icon-chart-thumbnail-linebar",type:nl.LineCombo},{value:"area",text:"Area Chart",pickerText:"Area",iconClass:"icon-chart-area-color",thumbnailClass:"icon-chart-thumbnail-area",type:nl.Area},{value:"totalArea",text:"100% Area Chart",pickerText:"100% Area",iconClass:"icon-chart-area100-color",thumbnailClass:"icon-chart-thumbnail-area-100",type:nl.Area},{value:"scatter",text:"Scatter Chart",pickerText:"Scatter",iconClass:"icon-chart-scatter-color",thumbnailClass:"icon-chart-thumbnail-scatter",type:nl.Scatter},{value:"pie",text:"Pie Chart",pickerText:"Pie",iconClass:"icon-chart-pie-color",thumbnailClass:"icon-chart-thumbnail-pie",type:nl.Circle},{value:"donut",text:"Donut Chart",pickerText:"Donut",iconClass:"icon-chart-donut-color",thumbnailClass:"icon-chart-thumbnail-donut",type:nl.Circle}])},VegasMarksController.prototype.$onChanges=function(e){e.chartType&&(this.selectedChart=this.chartType,this.updateAxisLabels()),this.selectedPalette=this.currentPalette},VegasMarksController.prototype.$onDestroy=function(){this.mousePosSub.unsubscribe()},Object.defineProperty(VegasMarksController.prototype,"canDropColor",{get:function(){switch(this.chartType){case"area":case"totalArea":case"bar":case"hBar":case"stackedBar":case"hStackedBar":case"stackedBar100":case"hStackedBar100":case"line":case"pie":case"donut":case"scatter":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"canDropAngle",{get:function(){switch(this.chartType){case"pie":case"donut":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"canDropSize",{get:function(){switch(this.chartType){case"scatter":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"canDropTooltip",{get:function(){switch(this.chartType){case"scatter":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showX",{get:function(){switch(this.chartType){case"pie":case"donut":return!1;default:return!0}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showYValues",{get:function(){switch(this.chartType){case"pie":case"donut":case"linePlusBar":return!1;default:return!0}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showDualY",{get:function(){switch(this.chartType){case"linePlusBar":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showSize",{get:function(){switch(this.chartType){case"scatter":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showTooltip",{get:function(){return this.chartType,!1},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showLabel",{get:function(){switch(this.chartType){case"scatter":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showAngle",{get:function(){switch(this.chartType){case"pie":case"donut":return!0;default:return!1}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"showMeasureNamesColor",{get:function(){return this.encoding&&this.encoding.value.length>1||this.encoding.y.length>1},enumerable:!0,configurable:!0}),VegasMarksController.prototype.hasFields=function(e){return this.summary&&this.summary[e].length>0},Object.defineProperty(VegasMarksController.prototype,"canAcceptMoreRowFields",{get:function(){return this.encoding&&(!this.encoding.marks.series.length||!this.encoding.marks.series[0].properties.color.values.length||this.hasMeasureNames(this.encoding.marks.series[0].properties.color.values)||!this.encoding.value.length)&&("linePlusBar"!==this.chartType||!this.encoding.y2.length)},enumerable:!0,configurable:!0}),VegasMarksController.prototype.updateAxisLabels=function(){switch(this.isHorizontal=!1,this.chartType){case"hBar":case"hStackedBar":case"hStackedBar100":this.isHorizontal=!0;break;default:this.isHorizontal=!1}this.xAxisLabel=this.isHorizontal?"Y-Axis":"X-Axis",this.yAxisLabel=this.isHorizontal?"X-Axis":"Y-Axis"},VegasMarksController.prototype.getChannelField=function(e){var t=this.encoding.marks,n=t.series,r=t.properties;return(n.length?n[0].properties:r)[e].values[0]},VegasMarksController.prototype.fieldDragStart=function(e,t,n,r){this.onFieldDrag({$field:t,$channel:n,$valid:r})},VegasMarksController.prototype.dragOver=function(e){this.dragHovered?("field-list"!==this.dragHovered?e.dataTransfer.dropEffect="move":e.dataTransfer.dropEffect="copy",e.preventDefault()):e.dataTransfer.dropEffect="none"},VegasMarksController.prototype.dragEnter=function(e,t){if(this.dragInfo.source!==t&&this.dragInfo.valid)switch(this.dragCounter++,t){case"row":case"value":this.canAcceptMoreRowFields?this.dragHovered=t:(this.dragCounter=1,this.dragHovered=null);break;case"color":this.encoding.value.length<=1?this.dragHovered=t:(this.dragCounter=1,this.dragHovered=null);break;default:this.dragHovered=t}},VegasMarksController.prototype.dragLeave=function(e){this.dragHovered&&this.dragCounter--,this.dragCounter<=0&&(this.dragCounter=0,this.dragHovered=null)},VegasMarksController.prototype.fieldDropped=function(e){this.dragHovered=null;Ha.q.has(this.chartType)&&"column"===e&&(e="row"),this.fieldDrop({$channel:e,$encoding:this.encoding})},VegasMarksController.prototype.dragEnd=function(e,t,n,r){this.dragInfo.field&&!$(document.elementFromPoint(this.mouseDragoverPos.x,this.mouseDragoverPos.y)).closest("#"+t).length&&this.onFieldRemoved({$field:n,$filterField:r})},VegasMarksController.prototype.hasMeasureNames=function(e){return!!e&&e.some(function(e){return e.formula===fr.SystemFieldName.NAMES})},VegasMarksController.prototype.hasMeasureValues=function(e){return!!e&&e.some(function(e){return e.formula===fr.SystemFieldName.VALUES})},VegasMarksController.prototype.fieldUpdated=function(e){this.onUpdate({$result:e})},VegasMarksController.prototype.updatePalette=function(e){this.chartService.updateTheme("",e.token,e.value.split(","))},VegasMarksController.prototype.selectPalette=function(e){this.selectedPalette=e},VegasMarksController.prototype.resetColorPicker=function(e){e||(this.selectedPalette=this.currentPalette)},VegasMarksController.prototype.getChartTypes=function(e){return this.chartTypes.filter(function(t){return t.type===e})},Object.defineProperty(VegasMarksController.prototype,"currentPalette",{get:function(){var e=this;if(this.colorPalette&&this.colorPalette.length){var t=this.colorPalettes.filter(function(t){return t.token===e.colorPalette});return t.length?t[0]:void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"secondaryChannel",{get:function(){return"x"===this.encoding.marks.channel?this.encoding.y:this.encoding.x},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"secondaryDiscreteChannel",{get:function(){return"x"===this.encoding.marks.channel?this.encoding.row:this.encoding.column},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"primaryChannel",{get:function(){return"x"===this.encoding.marks.channel?this.encoding.x:this.encoding.y},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"hasNamesOnX",{get:function(){return Ha.q.has(this.chartType)?this.encoding&&this.encoding.y.length&&this.encoding.y[0].formula===fr.SystemFieldName.NAMES:this.encoding&&this.encoding.x.length&&this.encoding.x[0].formula===fr.SystemFieldName.NAMES},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"hasNamesOnColor",{get:function(){return this.encoding&&this.encoding.marks.series.length&&this.encoding.marks.series[0].properties.color.values.length&&this.encoding.marks.series[0].properties.color.values[0].formula===fr.SystemFieldName.NAMES},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"chartTypeText",{get:function(){var e=this;if(this.chartType)return this.chartTypes.filter(function(t){return t.value===e.chartType})[0].pickerText},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"chartTypeIcon",{get:function(){var e=this;if(this.chartType)return this.chartTypes.filter(function(t){return t.value===e.chartType})[0].iconClass},enumerable:!0,configurable:!0}),Object.defineProperty(VegasMarksController.prototype,"config",{get:function(){return{colorPaletteDropup:!0}},enumerable:!0,configurable:!0}),VegasMarksController.prototype.editColor=function(){this.colorPicker.open(this)},VegasMarksController.$inject=["ColorPickerModalService","DataLayerFlipperService","ChartThemeService","Utils"],VegasMarksController}(),sl={bindings:{dragInfo:"<",model:"<",relName:"<",encoding:"<",summary:"<",chartType:"<",chartModel:"<",fieldDrop:"&",onTriggerEditFilter:"&",onUpdate:"&",onFieldDrag:"&",onFieldRemoved:"&",onSortRemoved:"&",onTypeChanged:"&",showPalettesUpsell:"<",format:"<",colorPalettes:"<",colorPalette:"<",palettesLink:"<",chartService:"<"},template:'<div class="vegas-marks-container">\n<div class="card">\n    <div class="card-block" ng-class="{ horizontal: ctrl.isHorizontal }">\n        <div>\n          <div class="header main">\n            CHART SETTINGS\n          </div>\n          \x3c!-- Chart Picker --\x3e\n          <div uib-dropdown dropdown-append-to-body class="chart-picker dropdown" ng-if="!ctrl.horizontalPieEnabled">\n            <div uib-dropdown-toggle class="form-control">\n              <i class="chart-icon" ng-class="ctrl.chartTypeIcon"></i>\n              <span class="selected-chart-text">{{ctrl.chartTypeText}}</span>\n              <i class="pull-right icon-dropdown-arrow-hover"></i>\n            </div>\n            <div uib-dropdown-menu class="chart-picker-dropdown dropdown-menu-right">\n              <div class="chart-picker-option" ng-class="{active: chartType.value === ctrl.chartType}" ng-repeat="chartType in ctrl.chartTypes" ng-click="ctrl.onTypeChanged({ $type: chartType.value }); ctrl.chartPickerOpen = false;">\n                <div class="picker-icon-container"><i ng-class="chartType.thumbnailClass" class="chart-picker-thumbnail"></i></div>\n                <span>{{ chartType.pickerText }}</span>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- New chart picker dropdown --\x3e\n          <div uib-dropdown dropdown-append-to-body class="chart-picker dropdown" ng-if="ctrl.horizontalPieEnabled">\n            <div uib-dropdown-toggle class="form-control">\n              <i class="chart-icon" ng-class="ctrl.chartTypeIcon"></i>\n              <span class="selected-chart-text">{{ctrl.chartTypeText}}</span>\n              <i class="pull-right icon-dropdown-arrow-hover"></i>\n            </div>\n            <div uib-dropdown-menu class="chart-picker-dropdown dropdown-menu-right horizontal-pie">\n              <div class="chart-picker-header">Bar</div>\n              <div class="chart-picker-options">\n                <div class="chart-picker-option" ng-class="{active: chartType.value === ctrl.chartType}" ng-repeat="chartType in ctrl.getChartTypes(\''+nl.Bar+'\')" ng-click="ctrl.onTypeChanged({ $type: chartType.value }); ctrl.chartPickerOpen = false;">\n                  <div class="picker-icon-container"><i ng-class="chartType.thumbnailClass" class="chart-picker-thumbnail"></i></div>\n                </div>\n              </div>\n\n              <div class="chart-picker-header">Line + Combo</div>\n              <div class="chart-picker-options">\n                <div class="chart-picker-option" ng-class="{active: chartType.value === ctrl.chartType}" ng-repeat="chartType in ctrl.getChartTypes(\''+nl.LineCombo+'\')" ng-click="ctrl.onTypeChanged({ $type: chartType.value }); ctrl.chartPickerOpen = false;">\n                  <div class="picker-icon-container"><i ng-class="chartType.thumbnailClass" class="chart-picker-thumbnail"></i></div>\n                </div>\n              </div>\n\n              <div class="chart-picker-header">Area</div>\n              <div class="chart-picker-options">\n                <div class="chart-picker-option" ng-class="{active: chartType.value === ctrl.chartType}" ng-repeat="chartType in ctrl.getChartTypes(\''+nl.Area+'\')" ng-click="ctrl.onTypeChanged({ $type: chartType.value }); ctrl.chartPickerOpen = false;">\n                  <div class="picker-icon-container"><i ng-class="chartType.thumbnailClass" class="chart-picker-thumbnail"></i></div>\n                </div>\n              </div>\n\n              <div class="chart-picker-header">Pie + Donut</div>\n              <div class="chart-picker-options">\n                <div class="chart-picker-option" ng-class="{active: chartType.value === ctrl.chartType}" ng-repeat="chartType in ctrl.getChartTypes(\''+nl.Circle+'\')" ng-click="ctrl.onTypeChanged({ $type: chartType.value }); ctrl.chartPickerOpen = false;">\n                  <div class="picker-icon-container"><i ng-class="chartType.thumbnailClass" class="chart-picker-thumbnail"></i></div>\n                </div>\n              </div>\n\n              <div class="chart-picker-header">Scatter</div>\n              <div class="chart-picker-options">\n                <div class="chart-picker-option" ng-class="{active: chartType.value === ctrl.chartType}" ng-repeat="chartType in ctrl.getChartTypes(\''+nl.Scatter+'\')" ng-click="ctrl.onTypeChanged({ $type: chartType.value }); ctrl.chartPickerOpen = false;">\n                  <div class="picker-icon-container"><i ng-class="chartType.thumbnailClass" class="chart-picker-thumbnail"></i></div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n\n          \x3c!-- End Chart Picker --\x3e\n        </div>\n        \x3c!-- X-Axis --\x3e\n        <div id="column" ng-if="ctrl.showX"\n                         ng-class="{\'drag-over\': ctrl.dragHovered === \'column\'}"\n                         ng-dragenter="ctrl.dragEnter($event, \'column\')"\n                         ng-dragover="ctrl.dragOver($event)"\n                         ng-dragleave="ctrl.dragLeave(\'column\')"\n                         ng-dragend="ctrl.dragLeave(\'column\')"\n                         ng-drop="ctrl.fieldDropped(\'column\')">\n            <div class="header">{{ ctrl.xAxisLabel }}</div>\n            <div class="drop-area">\n                <div class="placeholder" ng-if="!ctrl.hasNamesOnX && !ctrl.secondaryChannel.length || ctrl.hasNamesOnX && !ctrl.secondaryDiscreteChannel.length">Drop field here...</div>\n                <enc-view-calc-field ng-if="!ctrl.hasNamesOnX && ctrl.chartModel"\n                           ng-repeat="field in ctrl.secondaryChannel"\n                           on-update="ctrl.fieldUpdated($result)"\n                           on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                           on-remove-sort="ctrl.onSortRemoved({ $source: $source })"\n                           field="field"\n                           model="ctrl.model"\n                           rel-name="ctrl.relName"\n                           chart-model="ctrl.chartModel"\n                           encoding="ctrl.encoding"\n                           on-drag-start="ctrl.fieldDragStart($event, $field, \'column\', $valid)"\n                           on-drag-cancel="ctrl.dragEnd($event, \'column\', $field)" />\n                <enc-view-calc-field ng-if="ctrl.hasNamesOnX && ctrl.chartModel"\n                           ng-repeat="field in ctrl.secondaryDiscreteChannel"\n                           on-update="ctrl.fieldUpdated($result)"\n                           on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                           on-remove-sort="ctrl.onSortRemoved({ $source: $source })"\n                           field="field"\n                           model="ctrl.model"\n                           rel-name="ctrl.relName"\n                           chart-model="ctrl.chartModel"\n                           encoding="ctrl.encoding"\n                           var-type="discrete"\n                           on-drag-start="ctrl.fieldDragStart($event, $field, \'column\', $valid)"\n                           on-drag-cancel="ctrl.dragEnd($event, \'column\', $field)" />\n            </div>\n        </div>\n\n        \x3c!-- Measure Values --\x3e\n        <div id="value" ng-if="ctrl.showYValues"\n                        ng-class="{\'drag-over\': ctrl.dragHovered === \'value\' && ctrl.canAcceptMoreRowFields}"\n                        ng-dragenter="ctrl.dragEnter($event, \'value\')"\n                        ng-dragover="ctrl.dragOver($event)"\n                        ng-dragleave="ctrl.dragLeave(\'value\')"\n                        ng-dragend="ctrl.dragLeave(\'value\')"\n                        ng-drop="ctrl.fieldDropped(\'value\')">\n            <div class="header">{{ ctrl.yAxisLabel }}</div>\n            <div class="drop-area">\n                <div class="placeholder" ng-if="!ctrl.encoding.value.length">Drop fields here...</div>\n                <ul class="list-unstyled" ng-if="ctrl.chartModel">\n                    <li ng-repeat="field in ctrl.encoding.value">\n                        <enc-view-calc-field field="field"\n                                   on-update="ctrl.fieldUpdated($result)"\n                                   on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                                   model="ctrl.model"\n                                   rel-name="ctrl.relName"\n                                   chart-model="ctrl.chartModel"\n                                   encoding="ctrl.encoding"\n                                   var-type="continuous"\n                                   on-drag-start="ctrl.fieldDragStart($event, $field, \'value\', $valid)"\n                                   on-drag-cancel="ctrl.dragEnd($event, \'value\', $field)" />\n                    </li>\n                    <li ng-if="ctrl.canAcceptMoreRowFields && ctrl.encoding.value.length" class="placeholder"></li>\n                </ul>\n\n            </div>\n        </div>\n\n        \x3c!-- Dual Y --\x3e\n        <div id="dualy" ng-if="ctrl.showDualY"\n                        ng-class="{\'drag-over\': ctrl.dragHovered === \'row\' && ctrl.canAcceptMoreRowFields}"\n                        ng-dragenter="ctrl.dragEnter($event, \'row\')"\n                        ng-dragover="ctrl.dragOver($event)"\n                        ng-dragleave="ctrl.dragLeave(\'row\')"\n                        ng-dragend="ctrl.dragLeave(\'row\')"\n                        ng-drop="ctrl.fieldDropped(\'row\')">\n            <div class="header">Y-Axes</div>\n            <div class="drop-area">\n                <div class="placeholder" ng-if="!ctrl.encoding.y.length">Drop fields here...</div>\n                <ul class="list-unstyled" ng-if="ctrl.chartModel">\n                    <li ng-if="ctrl.encoding.y.length && ctrl.chartModel">\n                        <enc-view-calc-field field="ctrl.encoding.y[0]"\n                                   on-update="ctrl.fieldUpdated($result)"\n                                   on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                                   model="ctrl.model"\n                                   rel-name="ctrl.relName"\n                                   chart-model="ctrl.chartModel"\n                                   encoding="ctrl.encoding"\n                                   var-type="continuous"\n                                   on-drag-start="ctrl.fieldDragStart($event, $field, \'row\', $valid)"\n                                   on-drag-cancel="ctrl.dragEnd($event, \'dualy\', $field)" />\n                    </li>\n                    <li ng-if="ctrl.encoding.y2.length && ctrl.chartModel">\n                        <enc-view-calc-field field="ctrl.encoding.y2[0]"\n                                   on-update="ctrl.fieldUpdated($result)"\n                                   on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                                   model="ctrl.model"\n                                   rel-name="ctrl.relName"\n                                   chart-model="ctrl.chartModel"\n                                   encoding="ctrl.encoding"\n                                   var-type="continuous"\n                                   on-drag-start="ctrl.fieldDragStart($event, $field, \'row\', $valid)"\n                                   on-drag-cancel="ctrl.dragEnd($event, \'dualy\', $field)" />\n                    </li>\n                    <li ng-if="ctrl.canAcceptMoreRowFields && ctrl.encoding.y.length" class="placeholder"></li>\n                </ul>\n\n            </div>\n        </div>\n\n        \x3c!-- Color --\x3e\n        <div id="color" ng-class="{\'drag-over\': ctrl.dragHovered === \'color\' && ctrl.encoding.value.length <= 1}"\n                        ng-dragenter="ctrl.dragEnter($event, \'color\')"\n                        ng-dragover="ctrl.dragOver($event)"\n                        ng-dragleave="ctrl.dragLeave(\'color\')"\n                        ng-dragend="ctrl.dragLeave(\'color\')"\n                        ng-drop="ctrl.fieldDropped(\'color\')">\n            <div uib-accordion class="color-palette-accordion">\n              <div uib-accordion-group>\n                <div uib-accordion-heading>\n                  <div ng-click="ctrl.resetColorPicker($parent.isOpen)">\n                    <span class="title-swatches" ng-if="ctrl.currentPalette">\n                      <span class="swatch" ng-repeat="color in ctrl.currentPalette.value.split(\',\') track by $index" ng-if="$index < 2" style="background:{{color}}"></span>\n                    </span>\n                    <span class="invalid-palette-container" ng-if="!ctrl.currentPalette">\n                      <i class="icon-color-palette-unavailable invalid-palette-icon"></i>\n                    </span>\n                    <span class="title">Color</span>\n                    <button\n                      ng-if="ctrl.customize_wide_shut"\n                      class="pull-right btn btn-sm btn-default"\n                      style="line-height: 15px; margin-top: 2px; padding: 0 5px; min-width: 0"\n                      ng-click="ctrl.editColor()"\n                    >...</button>\n                    <i ng-class="{\'open\': $parent.isOpen}" class="toggle icon-caret-gray pull-right"></i>\n                  </div>\n                </div>\n                <div>\n                  <div class="color-palette-dropdown-menu">\n                    <span class="title">Palette</span>\n                    <color-palettes-dropdown\n                      color-palette="ctrl.selectedPalette.token"\n                      color-palettes="ctrl.colorPalettes"\n                      dropup-class="ctrl.config.colorPaletteDropup"\n                      update-palette="ctrl.updatePalette(palette)"\n                      select-palette="ctrl.selectPalette(palette)"\n                      palette-type="ctrl.paletteType"\n                      palettes-link="ctrl.palettesLink"\n                      owner="ctrl.owner"\n                      accordion="true"\n                      show-palettes-upsell="ctrl.showPalettesUpsell"\n                    />\n                  </div>\n                  <div class="swatch-preview" ng-if="ctrl.selectedPalette">\n                    <div class="swatches" ng-if="ctrl.paletteType === \'categorical\'">\n                      <span class="swatch" ng-repeat="color in ctrl.selectedPalette.value.split(\',\') track by $index" ng-if="$index < 8" style="background:{{color}}"></span>\n                    </div>\n                  </div>\n                  <div class="assign-button" ng-if="ctrl.selectedPalette">\n                    <a href class="btn btn-sm btn-secondary" ng-click="ctrl.updatePalette(ctrl.selectedPalette)">Assign Palette</a>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="drop-area" ng-if="ctrl.canDropColor">\n                <div class="placeholder" ng-if="!ctrl.hasFields(\'color\') || (ctrl.hasNamesOnColor && !ctrl.showMeasureNamesColor)">Drop field here...</div>\n                <enc-view-calc-field ng-if="ctrl.hasFields(\'color\') && ctrl.chartModel && (!ctrl.hasNamesOnColor || ctrl.showMeasureNamesColor)"\n                           field="ctrl.getChannelField(\'color\')"\n                           on-update="ctrl.fieldUpdated($result)"\n                           on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                           on-remove-sort="ctrl.onSortRemoved({ $source: $source })"\n                           model="ctrl.model"\n                           rel-name="ctrl.relName"\n                           chart-model="ctrl.chartModel"\n                           encoding="ctrl.encoding"\n                           var-type="discrete"\n                           on-drag-start="ctrl.fieldDragStart($event, $field, \'color\', $valid)"\n                           on-drag-cancel="ctrl.dragEnd($event, \'color\', $field)" />\n            </div>\n        </div>\n\n        \x3c!-- Angle --\x3e\n        <div id="angle" ng-if="ctrl.showAngle"\n                        ng-class="{\'drag-over\': ctrl.dragHovered === \'angle\'}"\n                        ng-dragenter="ctrl.dragEnter($event, \'angle\')"\n                        ng-dragover="ctrl.dragOver($event)"\n                        ng-dragleave="ctrl.dragLeave(\'angle\')"\n                        ng-dragend="ctrl.dragLeave(\'angle\')"\n                        ng-drop="ctrl.fieldDropped(\'angle\')">\n            <div class="header"><img src="'+Ua+'" class="icon-sm" />Angle</div>\n            <div class="drop-area" ng-if="ctrl.canDropAngle">\n                <div class="placeholder" ng-if="!ctrl.hasFields(\'angle\')">Drop field here...</div>\n                <enc-view-calc-field ng-if="ctrl.hasFields(\'angle\') && ctrl.chartModel"\n                           field="ctrl.getChannelField(\'angle\')"\n                           on-update="ctrl.fieldUpdated($result)"\n                           on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                           model="ctrl.model"\n                           rel-name="ctrl.relName"\n                           chart-model="ctrl.chartModel"\n                           encoding="ctrl.encoding"\n                           var-type="continuous"\n                           on-drag-start="ctrl.fieldDragStart($event, $field, \'angle\', $valid)"\n                           on-drag-cancel="ctrl.dragEnd($event, \'angle\', $field)" />\n            </div>\n        </div>\n\n        \x3c!-- Size --\x3e\n        <div id="size" ng-if="ctrl.showSize"\n                       ng-class="{\'drag-over\': ctrl.dragHovered === \'size\'}"\n                       ng-dragenter="ctrl.dragEnter($event, \'size\')"\n                       ng-dragover="ctrl.dragOver($event)"\n                       ng-dragleave="ctrl.dragLeave(\'size\')"\n                       ng-dragend="ctrl.dragLeave(\'size\')"\n                       ng-drop="ctrl.fieldDropped(\'size\')">\n            <div class="header"><img src="'+Ba+'" class="icon-sm" />Size</div>\n            <div class="drop-area" ng-if="ctrl.canDropSize">\n                <div class="placeholder" ng-if="!ctrl.hasFields(\'size\')">Drop field here...</div>\n                <enc-view-calc-field ng-if="ctrl.hasFields(\'size\') && ctrl.chartModel"\n                           field="ctrl.getChannelField(\'size\')"\n                           on-update="ctrl.fieldUpdated($result)"\n                           on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                           model="ctrl.model"\n                           rel-name="ctrl.relName"\n                           chart-model="ctrl.chartModel"\n                           encoding="ctrl.encoding"\n                           var-type="continuous"\n                           on-drag-start="ctrl.fieldDragStart($event, $field, \'size\', $valid)"\n                           on-drag-cancel="ctrl.dragEnd($event, \'size\', $field)" />\n            </div>\n        </div>\n\n        \x3c!-- Tooltip --\x3e\n        <div id="tooltip" ng-if="ctrl.showTooltip"\n                          ng-class="{\'drag-over\': ctrl.dragHovered === \'tooltip\'}"\n                          ng-dragenter="ctrl.dragEnter($event, \'tooltip\')"\n                          ng-dragover="ctrl.dragOver($event)"\n                          ng-dragleave="ctrl.dragLeave(\'tooltip\')"\n                          ng-dragend="ctrl.dragLeave(\'tooltip\')"\n                          ng-drop="ctrl.fieldDropped(\'tooltip\')">\n            <div class="header"><img src="'+Va+'" class="icon-sm" />Tooltip</div>\n            <div class="drop-area" ng-if="ctrl.canDropTooltip">\n                <div class="placeholder" ng-if="!ctrl.hasFields(\'tooltip\')">Drop fields here...</div>\n                <enc-view-calc-field ng-if="ctrl.hasFields(\'tooltip\') && ctrl.chartModel"\n                           field="ctrl.getChannelField(\'tooltip\')"\n                           on-update="ctrl.fieldUpdated($result)"\n                           on-remove="ctrl.onFieldRemoved({ $field: $field })"\n                           model="ctrl.model"\n                           rel-name="ctrl.relName"\n                           chart-model="ctrl.chartModel"\n                           encoding="ctrl.encoding"\n                           on-drag-start="ctrl.fieldDragStart($event, $field, \'tooltip\', $valid)"\n                           on-drag-cancel="ctrl.dragEnd($event, \'tooltip\', $field)" />\n            </div>\n        </div>\n    </div>\n</div>\n<div id="filter" class="card">\n    <div class="card-block" ng-class="{\'drag-over\': ctrl.dragHovered === \'filter\'}"\n                            ng-dragenter="ctrl.dragEnter($event, \'filter\')"\n                            ng-dragover="ctrl.dragOver($event)"\n                            ng-dragleave="ctrl.dragLeave(\'filter\')"\n                            ng-dragend="ctrl.dragLeave(\'filter\')"\n                            ng-drop="ctrl.fieldDropped(\'filter\')">\n        <div class="header main">FILTERS</div>\n        <div class="drop-area">\n            <div class="placeholder" ng-if="ctrl.encoding.filter.length === 0">Drop field here...</div>\n            <ul class="list-unstyled" ng-if="ctrl.chartModel">\n              <li ng-repeat="filter in ctrl.encoding.filter">\n                <enc-filter-field\n                       on-trigger-edit="ctrl.onTriggerEditFilter({ $encFilterField: $encFilterField, $oldFilter: $oldFilter })"\n                       on-remove="ctrl.onFieldRemoved({ $filterField: $field })"\n                       field="filter"\n                       model="ctrl.model"\n                       rel-name="ctrl.relName"\n                       chart-model="ctrl.chartModel"\n                       encoding="ctrl.encoding"\n                       on-drag-start="ctrl.fieldDragStart($event, $field, \'filter\', $valid)"\n                       on-drag-cancel="ctrl.dragEnd($event, \'filter\', null, $field)" />\n              </li>\n              <li class="placeholder" ng-if="ctrl.encoding.filter.length"></li>\n            </ul>\n        </div>\n    </div>\n</div>\n</div>',controller:ll,controllerAs:"ctrl"};r.module("mode.components").component("vegasMarks",sl);var cl,dl=n("DAkD"),ul=n("qmkL"),pl=n("9g1q");!function(e){e.saveAs=function(e,t){var n=a().format("YYYY-MM-DD"),r=(t||"Untitled Chart")+" "+n+".csv";ul.saveAs(new Blob(e,{type:"text/plain;charset=utf-8"}),r)},e.makeCsv=function(e){var t=[];t.push('"'+e.columns.map(function(e){return e.name}).join('","')+'"\r\n');for(var n=e.content.length,r=function(r){var o=e.content[r];t.push('"'+e.columns.map(function(e){switch(e.type.name){case pl.a.Column.Type.Name.Date:return a.utc(o[e.name]).format("MM/DD/YYYY HH:mm:ss");case pl.a.Column.Type.Name.String:return o[e.name]&&o[e.name].replace(/"/g,'""')||"";default:return o[e.name]}}).join('","')+(r<n-1?'"\r\n':'"'))},o=0;o<n;o++)r(o);return t}}(cl||(cl={}));var hl,gl,ml,fl,Cl=n("w5gf"),yl=n.n(Cl),bl=n("qLI4"),vl=n.n(bl),Il=n("/kuU"),Sl=n.n(Il),wl=n("EBwt"),Al=n.n(wl),Ml=n("zdl5"),kl=n("P6nd");!function(e){e.ViewChartData="[SharedChart] ViewChartData",e.ViewChartDataSelectSuccess="[SharedChart] ViewChartDataSelectSuccess",e.ViewChartDataSelectFailure="[SharedChart] ViewChartDataSelectFailure",e.CloseAllModals="[SharedChart] CloseAllModals"}(hl||(hl={})),function(e){e.ExploreChart="ExploreChart",e.ExploreChartMark="[Explorer] ExploreChartMark",e.ExploreChartOnLoad="[Explorer] ExploreChartOnLoad",e.CloseExploration="[Explorer] CloseExploration",e.UpdateEncoding="[Explorer] UpdateEncoding",e.UpdateType="[Explorer] UpdateType",e.UpdateTypeComplete="[Explorer] UpdateTypeComplete",e.ExploreChartWithData="[Explorer] ExploreChartWithData",e.ViewChartData="[Explorer] ViewChartData",e.MinimizeDataPane="[Explorer] MinimizeDataPane",e.MaximizeDataPane="[Explorer] MaximizeDataPane",e.MinimizeChartPane="[Explorer] MinimizeChartPane",e.MaximizeChartPane="[Explorer] MaximizeChartPane",e.LoadChartSummaryData="[Explorer] LoadChartSummaryData",e.LoadChartSummaryDataSuccess="[Explorer] LoadChartSummaryDataSuccess",e.LoadChartSummaryDataFailure="[Designer] LoadChartSummaryDataFailure",e.ClearEncoding="[Explorer] ClearEncoding",e.ResetEncoding="[Explorer] ResetEncoding",e.ClearFilters="[Explorer] ClearFilters",e.ClearSorts="[Explorer] ClearSorts",e.RemoveSort="[Explorer] RemoveSort",e.Undo="[Explorer] Undo",e.Redo="[Explorer] Redo",e.SwapAxes="[Explorer] SwapAxes",e.ChangeHierarchy="[Explorer] ChangeHierarchy",e.DrillDown="[Explorer] DrillDown",e.QuickSort="[Explorer] QuickSort",e.UpdateFormat="[Explorer] UpdateFormat",e.UpdateColors="[Explorer] UpdateColors",e.UpdateSeriesSpecificColor="[Explorer] UpdateSeriesSpecificColor"}(gl||(gl={})),function(e){e.UpdateEncoding="[ChartEdit] UpdateEncoding",e.UpdateEncodingFailure="[ChartEdit] UpdateEncodingFailure",e.UpdateTitle="[ChartEdit] UpdateTitle",e.UpdateTitleSuccess="[ChartEdit] UpdateTitleSuccess",e.UpdateTitleFailure="[ChartEdit] UpdateTitleFailure",e.ChangeHierarchy="[ChartEdit] ChangeHierarchy",e.ChangeHierarchyFailure="[ChartEdit] ChangeHierarchyFailure",e.DrillDown="[ChartEdit] DrillDown",e.DrillDownFailure="[ChartEdit] DrillDownFailure",e.Undo="[ChartEdit] Undo",e.UndoSuccess="[ChartEdit] UndoSuccess",e.UndoFailure="[ChartEdit] UndoFailure",e.Redo="[ChartEdit] Redo",e.RedoSuccess="[ChartEdit] RedoSuccess",e.RedoFailure="[ChartEdit] RedoFailure"}(ml||(ml={})),function(e){!function(e){e.Regular="REGULAR",e.Minimized="MINIMIZED",e.Maximized="MAXIMIZED"}(e.PaneView||(e.PaneView={}))}(fl||(fl={}));var Tl,xl,Dl=n("tt/G");(xl=Tl||(Tl={})).getNormalizedChart=function(e){return e.transient.explorer.chart},xl.getModalIsOpen=Object(Co.createSelector)(function(e){return e.transient.explorer.isOpen},Ae.a.getModelForSelectedChart,function(e,t){return null!=t&&e}),xl.getModalIsFocused=function(e){return e.transient.explorer.isFocused},xl.getChart=Object(Co.createSelector)(xl.getNormalizedChart,Ae.a.getChartModels,function(e,t){if(e){var n=t.getRecord(e.queryToken);if(n)return Object(Wa.c)(e,n?n.model:void 0)}}),xl.getFocusedChart=Object(Co.createSelector)(xl.getChart,xl.getModalIsFocused,function(e,t){return t&&e||void 0}),xl.getModelForSelectedChart=Object(Co.createSelector)(Ae.a.getChartModels,xl.getChart,function(e,t){return t?e.getRecord(t.queryToken):void 0}),xl.getSelectedChartType=Object(Co.createSelector)(xl.getChart,function(e){return e.chartType}),xl.getSelectedChartRelName=Object(Co.createSelector)(xl.getChart,function(e){return e.queryToken}),xl.getSelectedChartPaletteToken=Object(Co.createSelector)(xl.getChart,function(e){return e.colorPaletteToken}),xl.getSelectedChartTitle=Object(Co.createSelector)(xl.getChart,function(e){return e.title}),xl.getSelectedChartEncResult=Object(Co.createSelector)(xl.getChart,function(e){return e.encResult}),xl.getSelectedChartFormat=Object(Co.createSelector)(xl.getChart,function(e){return e.format}),xl.getChartDesigner=function(e){return e.transient.explorer.chartDesigner},xl.getChartDesignerDataset=function(e){return e.transient.explorer.chartDesigner.dataPane.dataset},xl.getChartSummaryData=Object(Co.createSelector)(xl.getChartDesignerDataset,xl.getChart,xl.getModelForSelectedChart,function(e,t,n){if(null!=e.summary&&null!=t&&null!=n){var r=t.format;if(n&&n.model){var o=n.model,i=e.encoding,a=e.summary;if(i&&a)return Dl.a.summary(o,i,a,r)}}return null});var Ll=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Rl={types:{bar:{name:"Bar Chart",type:"bar",icon:"barchart"},bigNumber:{name:"Big Number",type:"bigNumber",icon:"bignumber"},line:{name:"Line Chart",type:"line",icon:"linechart"},area:{name:"Area Chart",type:"area",icon:"areachart"},pie:{name:"Pie Chart",type:"pie",icon:"piechart"},scatter:{name:"Scatter Plot",type:"scatter",icon:"scatterplot"},pivotTable:{name:"Pivot Table",type:"pivotTable",icon:"table"}}},Nl={bindings:{withSidebar:"<",state:"<",token:"<",readOnly:"<",queryRun:"<",palettesLink:"<",chartDataExportEnabled:"<",onOpenSidebar:"&",communityContext:"<?"},controller:function(e){function ChartDesignerController(t,n,r,o,i,a,l,s,c,d,u,p,h,g,m,f,C,y){var b=e.call(this)||this;return b.$rootScope=t,b.$scope=n,b.$compile=r,b.$timeout=o,b.AlertService=i,b.vs=a,b.ChartSanitizerService=l,b.ChartInterpolaterService=s,b.chartDesignerService=c,b.chartExplorerService=d,b.reportApiService=u,b.rxStore=p,b.configureFilterModal=h,b.wms=g,b.flipperService=m,b.chartViewService=f,b.featureService=C,b.rls=y,b.selectedTab="fields",b.errorImg=ASSET_PATHS.ERROR_GIF_PATH,b.token$=new V.BehaviorSubject(void 0),b.queryRun$=new V.BehaviorSubject(void 0),b.drilldownEnabled$=C.featureDrilldownEnabled$,b.vizToolbarEnabled$=C.featureVizToolbarEnabled$,b}return Ll(ChartDesignerController,e),ChartDesignerController.prototype.$onInit=function(){var e,t,n,r=this;S("meta[name=owner-username]").attr("content"),S("meta[name=report-owner-username]").attr("content");this.readOnly?(this.chartService=this.chartExplorerService,this.appendToSelector=".report-view-container",e=this.rxStore.select(Tl.getChart).filter(function(e){return null!=e}),t=this.rxStore.select(Tl.getModelForSelectedChart),n=this.rxStore.select(K.m).filter(function(e){return null!=e}),this.model$=this.rxStore.select(Ae.a.getModel),this.isFocused$=this.rxStore.select(Tl.getModalIsFocused),this.chartData$=this.rxStore.select(Tl.getChartSummaryData),this.relName$=this.rxStore.select(Tl.getSelectedChartRelName)):(this.chartService=this.chartDesignerService,this.isFocused$=V.Observable.from([!0]),this.appendToSelector="body",e=this.rxStore.selectWithParam(Ae.a.Parameterized.getChart,this.token$).filter(function(e){return null!=e}),t=this.rxStore.selectWithParam(Ae.a.Parameterized.getChartModel,this.token$),n=this.rxStore.select(K.G).filter(function(e){return null!=e}),this.model$=this.rxStore.select(Ae.a.getModel),this.relName$=this.rxStore.selectWithParam(Ae.a.Parameterized.getChartRelName,this.token$),this.chartData$=this.rxStore.select(Ae.a.getChartSummaryData)),this.version1$=e.map(function(e){return 1===e.version}),this.version2$=e.map(function(e){return 2===e.version}),this.chartModel$=t.filter(function(e){return null!=e}).map(function(e){return e.model}),t.takeWhile(function(){return r.isAlive}).filter(function(e){return null!=e}).subscribe(function(e){return r.modelResult=e}),this.chartTitle$=e.map(function(e){return e.title}),this.chartType$=e.map(function(e){return e.chartType||"bar"}),this.encodingResult$=e.map(function(e){return e.encResult}),this.format$=e.map(function(e){return e.format}),this.chartPalette$=e.map(function(e){return e.colorPaletteToken}),this.hasVizToolbar$=this.version2$.combineLatest(this.vizToolbarEnabled$).map(function(e){var t=e[0],n=e[1];return t&&(!r.readOnly||n)}),this.canGoUp$=e.map(function(e){return e.canGoUp}),this.canGoDown$=e.map(function(e){return e.canGoDown}),this.canChangeHierarchy$=this.canGoDown$.combineLatest(this.canGoUp$,function(e,t){return e||t}),this.chartPaneView$=n.map(function(e){return e.chartPane.view}),this.dataPaneView$=n.map(function(e){return e.dataPane.view}),this.showChartPane$=this.chartPaneView$.map(function(e){return e===fl.PaneView.Regular||e===fl.PaneView.Maximized}),this.showDataPane$=this.dataPaneView$.map(function(e){return e===fl.PaneView.Regular||e===fl.PaneView.Maximized}),this.colorPalettes$=this.rxStore.select(K.r),this.encodingData$=this.encodingResult$.combineLatest(this.format$,function(e,t){return{result:e,format:t}}).withLatestFrom(this.chartType$,function(e,t){return{encoding:e.result.encoding,summary:e.result.summary,format:e.format,type:t}}),this.chartData$.takeWhile(function(){return r.isAlive}).subscribe(function(e){return r.chartData=e}),this.summary$=this.encodingResult$.map(function(e){return e.summary}),this.encoding$=this.encodingResult$.map(function(e){return e.encoding}),this.invalidEncodingErrors$=e.map(function(e){return e.invalidEncodingErrors}),this.isValidEncoding$=e.map(function(e){return e.isValidEncoding}),this.isCompleteEncoding$=e.map(function(e){return e.isCompleteEncoding}),this.canRender$=e.map(function(e){return e.canRender}),this.hasData$=this.encoding$.combineLatest(t,this.queryRun$,e,function(e,t,n,r){return null!=(e&&t&&n&&r)}),this.datasetTooLarge$=this.hasData$.combineLatest(this.queryRun$,t,function(e,t,n){return e&&t&&"failed"!==t.state&&"cancelled"!==t.state&&n&&!n.content}),this.queryFailed$=this.hasData$.combineLatest(this.queryRun$,function(e,t){return e&&t&&"failed"===t.state}),this.queryRunning$=this.hasData$.combineLatest(this.queryRun$,this.rxStore.select(K.R),t,function(e,t,n,r){return e&&n&&"disconnected"!==n.state&&t&&t.running||!r&&t&&"succeeded"===t.state}),this.showChart$=this.hasData$.combineLatest(this.queryRun$,t,function(e,t,n){return e&&t&&"failed"!==t.state&&"cancelled"!==t.state&&n&&null!=n.content})},ChartDesignerController.prototype.$onChanges=function(e){var t=this;if(e.state&&(this.prevState={chart:e.state.previousValue.chart,queryMode:e.state.previousValue.queryMode,viz:e.state.previousValue.viz},this.state.viz&&this.updateSelectedChartState(this.state.viz),this.prevState&&this.state.viz===this.prevState.viz&&r.equals(this.state.viz.chartView,this.prevState.viz.chartView)||this.requestChartRefresh(this.prevState,this.state)),e.queryRun&&this.queryRun$.next(this.queryRun),e.token&&(this.token$.next(this.token),this.contextMenuSubscriber&&this.contextMenuSubscriber.unsubscribe(),e.token.currentValue)){var n=this.queryRun.query_token,o=e.token.currentValue;this.contextMenuSubscriber=this.reportApiService.subscribe(o,function(e){if(e.type===Ml.a.Type.ContextClick)switch(e.item.type){case Ml.a.ContextItemType.ViewData:t.readOnly?t.rxStore.dispatch({chartToken:o,queryToken:n,target:e.item.target,type:gl.ViewChartData}):t.rxStore.dispatch({chartToken:o,queryToken:n,target:e.item.target,type:hl.ViewChartData})}})}e.withSidebar&&Object(Ce.a)(window,"resize")},ChartDesignerController.prototype.$onDestroy=function(){this.contextMenuSubscriber&&this.contextMenuSubscriber.unsubscribe(),this.wms.unsubscribe(this)},ChartDesignerController.prototype.dispatchEncodingUpdate=function(e,t){this.chartService.dispatchEncodingUpdate(e,t)},ChartDesignerController.prototype.convertEmbedActionAndDispatch=function(e){var t=this;this.$scope.$apply(function(){switch(e.type){case kl.a.ChangeHierarchy:t.readOnly?t.rxStore.dispatch({type:gl.ChangeHierarchy,forward:e.forward}):t.chartService.changeHierarchy(t.token,e.forward);break;case kl.a.DrillDown:t.readOnly?t.rxStore.dispatch({type:gl.DrillDown,target:e.target}):t.chartService.drillDown(e.chartToken,e.target);break;case kl.a.ExploreChartMark:if(t.readOnly){var n=e.target,r=e.filters;t.rxStore.dispatch({target:n,filters:r,chartToken:e.chartToken,type:gl.ExploreChartMark})}}})},ChartDesignerController.prototype.updateTitle=function(e){this.rxStore.dispatch({type:ml.UpdateTitle,chartToken:this.token,title:e})},ChartDesignerController.prototype.requestChartRefresh=function(e,t){if(this.selectedChart&&1===this.selectedChart.viewVersion){var n=t.chart&&t.queryMode,r=!e||!e.chart||!e.queryMode||2===e.viz.viewVersion;n&&r&&this.refreshChart('\n  <div mode-chart id="{{ctrl.selectedChart.token}}"\n    ng-if="ctrl.selectedChart && ctrl.modelResult && ctrl.modelResult.content"\n    dataset="ctrl.modelResult"\n    options="{}"\n    set-view="ctrl.selectedChart.view"\n    status="ctrl.$rootScope.chartStatus"\n    on-edit="ctrl.updateChartSettings($id, $view)"\n    view-version="ctrl.selectedChart.viewVersion"\n    model="ctrl.model"\n    rel-name="ctrl.relName"\n    chart-model="ctrl.modelResult.model">\n  </div>\n')}},ChartDesignerController.prototype.updateSelectedChartState=function(e){this.selectedChart="chart"===e.type?{view:e.chartView,queryToken:e.queryToken,token:e.token,viewVersion:e.viewVersion}:null},ChartDesignerController.prototype.shouldRefreshValidChartTypes=function(){return this.modelResult&&this.modelResult.content&&this.modelResult.count<=1e4},ChartDesignerController.prototype.refreshChart=function(e){var t=this;if(this.chartTimeoutHandler&&(this.$timeout.cancel(this.chartTimeoutHandler),this.chartTimeoutHandler=null),this.chartScope&&(this.chartScope.$destroy(),this.chartScope=null),S(".chart-preview-container").empty(),this.$rootScope.chartStatus={unavailable:!1,message:""},this.shouldRefreshValidChartTypes()){var n=r.copy(this.selectedChart.view);this.ChartSanitizerService.sanitize(n,this.modelResult),this.$rootScope.validChartTypes=this.ChartInterpolaterService.interpolate(n,this.modelResult,Rl)}this.chartTimeoutHandler=this.$timeout(function(){t.chartScope=t.$scope.$new();var n=t.$compile(e)(t.chartScope);S(".chart-preview-container").append(n)})},ChartDesignerController.prototype.fieldDrag=function(e,t,n){this.dragInfo={field:e,source:t,valid:n}},ChartDesignerController.prototype.fieldDropped=function(e,t,n,r,o){var i=this,a=Ya.a.Compat.makeField(r,this.dragInfo.field);if("value"===e&&Object(Wa.d)(n,r,a))return this.AlertService.error("\n          Y-Axis already uses "+a.name+".\n          To use fields more than once they must have unique aggregates.\n        "),void(this.dragInfo={});if("linePlusBar"===t&&"row"===e)this.chartService.addDualAxisFieldToChartEncoding(n,a,e,r,fr.MarkType.Bar,fr.MarkType.Line);else if("filter"===e)this.configureFilterModal.addFilter(a,r,function(e){var t=Object(Ha.d)(n,e);i.dispatchEncodingUpdate(t)},{appendTo:S(this.appendToSelector)});else{var l=Object(Ha.c)({encoding:n,summary:o},a,e,r);this.dispatchEncodingUpdate(l)}this.dragInfo={}},ChartDesignerController.prototype.editFilter=function(e,t,n,r){var o=this;this.configureFilterModal.editFilter(n,t,!!r,function(t){r&&(e=Object(Ha.z)(e,r).encoding,r=void 0);var n=Object(Ha.d)(e,t);o.dispatchEncodingUpdate(n)},{appendTo:S(this.appendToSelector)})},ChartDesignerController.prototype.updateChartSettings=function(e,t){this.vs.updateChartSettings(e,t)},ChartDesignerController.prototype.updateChartType=function(e){1===this.selectedChart.viewVersion?(this.selectedChart.view.selectedChart=e,this.updateChartSettings(this.token,this.selectedChart.view)):this.chartService.updateChartType(e)},ChartDesignerController.prototype.removeField=function(e,t,n){var r=e.$field,o=e.$filterField,i=r?Object(Ha.y)(t,n,r.id):Object(Ha.z)(t,o);this.dispatchEncodingUpdate(i,dl.a.RemovePill)},ChartDesignerController.prototype.removeSort=function(e){this.chartService.removeSort(e)},ChartDesignerController.prototype.updatePill=function(e){this.dispatchEncodingUpdate(e,dl.a.ChangePillFormula)},ChartDesignerController.prototype.linkToData=function(e){this.rls.isLinkable()&&(e.preventDefault(),e.stopPropagation(),mode&&mode.linkToPage&&mode.linkToPage(this.modelResult.token,"data"))},ChartDesignerController.prototype.changeHierarchy=function(e){this.readOnly?this.rxStore.dispatch({type:gl.ChangeHierarchy,forward:e}):this.chartService.changeHierarchy(this.token,e)},ChartDesignerController.prototype.minimizeChartPane=function(){this.chartService.minimizeChartPane()},ChartDesignerController.prototype.maximizeChartPane=function(){this.chartService.maximizeChartPane()},ChartDesignerController.prototype.maximizeDataPane=function(){this.chartService.maximizeDataPane()},ChartDesignerController.prototype.minimizeDataPane=function(){this.chartService.minimizeDataPane()},ChartDesignerController.prototype.export=function(e,t){t&&cl.saveAs(cl.makeCsv(t),e)},ChartDesignerController.$inject=["$rootScope","$scope","$compile","$timeout","AlertService","ViewService","ChartSanitizerService","ChartInterpolaterService","ChartDesignerService","ChartExplorerService","ReportApiService","RxStoreService","ConfigureFilterModalService","WindowMessageService","DataLayerFlipperService","ChartViewService","FeatureToggleService","ReportLinkService"],ChartDesignerController}(q),controllerAs:"ctrl",template:'\n    <viz-toolbar\n      read-only="ctrl.readOnly"\n      model="ctrl.model$ | async:this"\n      rel-name="ctrl.relName$ | async:this"\n      chart-model="ctrl.chartModel$ | async:this"\n      encoding="ctrl.encoding$ | async:this"\n      on-open-sidebar="ctrl.onOpenSidebar()"\n      ng-if="ctrl.hasVizToolbar$ | async:this">\n    </viz-toolbar>\n    <div class="vegas-sidebar" ng-if="ctrl.withSidebar && (ctrl.version2$ | async:this)">\n      <vegas-marks ng-if="ctrl.isFocused$ | async:this"\n                   drag-info="ctrl.dragInfo"\n                   field-drop="ctrl.fieldDropped($channel, ctrl.chartType$ | async:this, ctrl.encoding$ | async:this, ctrl.chartModel$ | async:this, ctrl.summary$ | async:this)"\n                   encoding="ctrl.encoding$ | async:this"\n                   chart-type="ctrl.chartType$ | async:this"\n                   summary="ctrl.summary$ | async:this"\n                   model="ctrl.model$ | async:this"\n                   rel-name="ctrl.relName$ | async:this"\n                   chart-model="ctrl.chartModel$ | async:this"\n                   on-field-drag="ctrl.fieldDrag($field, $channel, $valid)"\n                   on-field-removed="ctrl.removeField({ $field, $filterField }, ctrl.encoding$ | async:this, ctrl.chartType$ | async:this)"\n                   on-sort-removed="ctrl.removeSort($source)"\n                   on-type-changed="ctrl.updateChartType($type)"\n                   on-trigger-edit-filter="ctrl.editFilter(ctrl.encoding$ | async:this, ctrl.chartModel$ | async:this, $encFilterField, $oldFilter)"\n                   on-update="ctrl.updatePill($result)"\n                   format="ctrl.format$ | async: this"\n                   color-palettes="ctrl.colorPalettes$ | async:this"\n                   color-palette="ctrl.chartPalette$ | async:this"\n                   palettes-link="ctrl.palettesLink"\n                   show-palettes-upsell="!ctrl.communityContext"\n                   chart-service="ctrl.chartService"></vegas-marks>\n      <div class="tab-container chart-sidebar">\n        <ul class="nav nav-tabs nav-tabs-inline nav-tabs-bottom tabs">\n          <li ng-class="{ active: ctrl.selectedTab === \'fields\' }"><a href="#" ng-click="ctrl.selectedTab = \'fields\'">Fields</a></li>\n          <li ng-class="{ active: ctrl.selectedTab === \'format\' }"><a href="#" ng-click="ctrl.selectedTab = \'format\'">Format</a></li>\n        </ul>\n        <field-list\n          ng-if="ctrl.isFocused$ | async:this"\n          ng-show="ctrl.selectedTab === \'fields\'"\n          model="ctrl.model$ | async:this"\n          rel-name="ctrl.relName$ | async:this"\n          drag-start="ctrl.fieldDrag($field, null, true)">\n        </field-list>\n        <chart-format\n          ng-if="ctrl.selectedTab === \'format\'"\n          model="ctrl.model$ | async:this"\n          rel-name="ctrl.relName$ | async:this"\n          chart-model="ctrl.chartModel$ | async:this"\n          format="ctrl.format$ | async:this"\n          encoding="ctrl.encoding$ | async:this" chart-type="ctrl.chartType$ | async:this"\n          color-palettes="ctrl.colorPalettes$ | async:this"\n          color-palette="ctrl.chartPalette$ | async:this"\n          palettes-link="ctrl.palettesLink"\n          read-only="ctrl.readOnly">\n        </chart-format>\n      </div>\n    </div>\n\n    <div ng-if="ctrl.state.viz.type === \'chart\'" class="designer-container">\n      <div class="chart-designer" ng-class="{\'with-sidebar\': ctrl.withSidebar}" ng-show="ctrl.showChart$ | async:this">\n        <div ng-if="ctrl.version1$ | async:this" class="chart-preview-container"></div>\n        <div ng-if="ctrl.version2$ | async:this"\n             class="vegas-chart-preview-container chart-preview-container">\n\n          <tiled-panes\n            vertical="true"\n            adjustable="false"\n            show-primary="ctrl.showChartPane$ | async:this"\n            hide-primary-header="true"\n            show-secondary="ctrl.showDataPane$ | async:this"\n            secondary-collapsed-title="Chart Data"\n            on-primary-maximized="ctrl.maximizeChartPane()"\n            on-primary-minimized="ctrl.minimizeChartPane()"\n            on-secondary-maximized="ctrl.maximizeDataPane()"\n            on-secondary-minimized="ctrl.minimizeDataPane()">\n\n            <primary-header></primary-header>\n\n            <primary-pane>\n              <div class="editor-module editor-chart mode-object editor-multi" ng-if="ctrl.showChart$ | async:this">\n                <div class="chart-content">\n                  <div class="chart">\n                    <div class="chart-title clearfix">\n                      <in-place-edit text="ctrl.chartTitle$ | async:this" alt-text="Click to add title" on-change="ctrl.updateTitle($text)" no-edit="ctrl.readOnly"></in-place-edit>\n                    </div>\n                    <chart-renderer\n                      ng-if="ctrl.canRender$ | async:this"\n                      render-context="designer"\n                      chart-id="ctrl.token"\n                      chart-type="ctrl.chartType$ | async:this"\n                      model="ctrl.model$ | async:this"\n                      rel-name="ctrl.relName$ | async:this"\n                      chart-model="ctrl.chartModel$ | async:this"\n                      encoding="ctrl.encoding$ | async:this"\n                      format="ctrl.format$ | async: this"\n                      drilldown-enabled="(ctrl.drilldownEnabled$ | async:this) && (ctrl.format$ | async:this).drilldownEnabled"\n                      on-embed-action="ctrl.convertEmbedActionAndDispatch($action)">\n                    </chart-renderer>\n                    <div ng-if="(ctrl.drilldownEnabled$ | async:this) && (ctrl.format$ | async:this).drilldownEnabled && (ctrl.canChangeHierarchy$ | async:this) && (ctrl.canRender$ | async:this)" class="drill-actions">\n                      <button class="drill-action-btn"\n                        ng-class="{ disabled: !(ctrl.canGoUp$ | async:this) }"\n                        ng-click="ctrl.changeHierarchy(false)">\n                        <svg-icon\n                          class="icon-hierarchy-up"\n                          type="\'hierarchy-up\'"\n                          uib-tooltip="Decrease Granularity"\n                          tooltip-append-to-body="true"\n                          tooltip-placement="top"\n                          tooltip-class="hierarchy-tooltip">\n                        </svg-icon>\n                      </button>\n                      <button class="drill-action-btn"\n                        ng-class="{ disabled: !(ctrl.canGoDown$ | async:this)}"\n                        ng-click="ctrl.changeHierarchy(true)">\n                        <svg-icon\n                          class="icon-hierarchy-down"\n                          type="\'hierarchy-down\'"\n                          uib-tooltip="Increase Granularity"\n                          tooltip-append-to-body="true"\n                          tooltip-placement="top"\n                          tooltip-class="hierarchy-tooltip">\n                        </svg-icon>\n                      </button>\n                    </div>\n                    <div ng-if="!(ctrl.canRender$ | async:this)" class="chart-placeholder">\n                      <div class="empty-chart-state" ng-if="!(ctrl.isCompleteEncoding$ | async:this) && (ctrl.isValidEncoding$ | async:this)">\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'line\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a line chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'totalArea\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a 100% area chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'bar\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a grouped bar chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'hBar\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a horizontal grouped bar chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'stackedBar\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a bar chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'stackedBar100\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a 100% bar chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'hStackedBar\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a horizontal bar chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'hStackedBar100\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create a 100% horizontal bar chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'area\'">\n                          <img src="'+yl.a+'" />\n                          <p>To create an area chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'linePlusBar\'">\n                          <img src="'+vl.a+'" />\n                          <p>To create a line + bar chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 2 fields in the y-axes</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'donut\'">\n                          <img src="'+Sl.a+'" />\n                          <p>To create a donut chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in color</li>\n                            <li>&#8226; 1 field in angle</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'pie\'">\n                          <img src="'+Sl.a+'" />\n                          <p>To create a pie chart, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in color</li>\n                            <li>&#8226; 1 field in angle</li>\n                          </ul>\n                        </div>\n                        <div ng-if="(ctrl.chartType$ | async:this) === \'scatter\'">\n                          <img src="'+Al.a+'" />\n                          <p>To create a scatter plot, drop:</p>\n                          <ul>\n                            <li>&#8226; 1 field in the x-axis</li>\n                            <li>&#8226; 1 or more fields in the y-axis</li>\n                          </ul>\n                        </div>\n                      </div>\n                      <div ng-if="!(ctrl.isValidEncoding$ | async:this)">Sorry, unable to render a chart with the given data</div>\n                    </div>\n                  </div>\n                </div>\n                <div class="error-message" ng-show="ctrl.modelResult.state === \'failed\'"><img ng-src="{{ ctrl.errorImg }}" class="error-icon"><div class="message">Looks like something went wrong with your query</div><a ng-click="ctrl.linkToData($event)" ng-href="{{ ctrl.modelResult.reportDataUrl }}" target="_blank" rel="noopener" class="sub-message">Take a look at the issue</a></div>\n                <div class="error-message" ng-show="ctrl.modelResult.state === \'cancelled\'"><i class="icon-warning-small error-icon"></i><div class="message">This query was canceled</div><div class="sub-message"></div></div>\n                <div class="error-message" ng-show="ctrl.modelResult.state === \'running\'"><i class="icon-warning-small error-icon"></i><div class="message">This query is still running. Refresh the page to see the results.</div><div class="sub-message"></div></div>\n                <div class="error-message" ng-show="ctrl.modelResult.state !== \'cancelled\' && ctrl.modelResult.state !== \'failed\' && ctrl.modelResult.state !== \'running\' && !ctrl.modelResult.model"><i class="icon-warning-small error-icon"></i><div class="message">This query is too large to show in browser</div><a ng-click="ctrl.linkToData($event)" ng-href="{{ ctrl.modelResult.reportDataUrl }}" target="_blank" rel="noopener" class="sub-message">Access the data</a></div>\n              </div>\n            </primary-pane>\n\n            <secondary-header>\n              <div ng-if="ctrl.chartDataExportEnabled">\n                <a href="javascript:void(0)" id="viewdata-copy-to-clipboard" class="btn btn-primary-link" clippy ng-if="ctrl.chartData$ | async:this" ng-model="ctrl.chartData">Copy</a>\n                <a href class="btn btn-primary-link" ng-click="ctrl.export(ctrl.chartTitle$ | async:this, ctrl.chartData$ | async:this)" ng-if="ctrl.chartData$ | async:this">Export</a>\n              </div>\n            </secondary-header>\n\n            <secondary-pane>\n              <designer-empty-table\n                ng-if="!(ctrl.chartData$ | async: this) && (ctrl.showDataPane$ | async:this)"\n                pane-view="ctrl.dataPaneView$ | async:this"\n                chart-type="ctrl.chartType$ | async:this">\n              </designer-empty-table>\n              <div class="view-data-modal-table-container" ng-if="(ctrl.chartData$ | async:this) && (ctrl.isFocused$ | async:this)">\n                <view-data-grid\n                  id="view-data-grid"\n                  dataset="ctrl.chartData$ | async:this"\n                  toolbar-enabled="false"\n                  sorting-enabled="false"\n                  chart-title="ctrl.chartTitle$ | async:this">\n                </view-data-grid>\n              </div>\n            </secondary-pane>\n          </tiled-panes>\n        </div>\n      </div>\n    </div>\n    <div ng-if="ctrl.queryFailed$ | async:this" class="chart-error-container">\n      <div class="error-message error-empty-message">\n        <div class="message">\n          <h2 class="heading">Sorry, unable to render chart with the given data.</h2>\n        </div>\n      </div>\n    </div>\n    <div ng-if="ctrl.datasetTooLarge$ | async:this" class="editor-error alert alert-warning clearfix">\n      <h3 class="pull-left running-text">This dataset is too large to view in browser</h3>\n    </div>\n    <div ng-if="ctrl.queryRunning$ | async:this" class="empty-report-msg design-loader clearfix">\n      <i class="icon-logo-animated"></i>\n      <p>Query is running</p>\n    </div>\n    <div ng-if="ctrl.selectedChart && ctrl.modelResult && ctrl.queryRun && ctrl.modelResult.state === \'cancelled\'" class="editor-error alert alert-warning clearfix">\n      <h3 class="pull-left running-text">This run has been cancelled</h3>\n    </div>'};r.module("mode.components").component("chartDesigner",Nl);n("DovP");var El=n("ieZ5"),jl=n("ZLRu"),Ol=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pl={bindings:{model:"<",relName:"<",chartModel:"<",encoding:"<",format:"<",readOnly:"<",chartType:"<"},controller:function(){function ChartFormatController(e,t){this.chartDesignerService=e,this.chartExplorerService=t,this.isHorizontal=!1,this.rotations=[{name:"Auto",value:null},{name:"0\xb0",value:0},{name:"+45\xb0",value:45},{name:"+90\xb0",value:90},{name:"-45\xb0",value:-45},{name:"-90\xb0",value:-90}],this.formats=[{name:"Percent",value:"percent"},{name:"Currency",value:"currency"},{name:"Thousands",value:"thousands"},{name:"Millions",value:"millions"},{name:"Billions",value:"billions"},{name:"None",value:"none"}],this.precisions=[{name:"0",value:0},{name:"0.1",value:1},{name:"0.01",value:2},{name:"0.001",value:3}],this.dateFormats=[{name:"Auto",value:"auto"},{name:"YYYY-MM-DD HH:MM:SS",value:"hour"},{name:"Mon YYYY",value:"full_mon"},{name:"Day Mon YYYY",value:"full_day"},{name:"Mon Day YYYY",value:"usa_full"},{name:"MM/DD",value:"mon_day"},{name:"YYYY",value:"year"},{name:"None",value:"none"}],this.legendPositions=[{name:"Auto",value:"auto"},{name:"Top",value:"top"},{name:"Right",value:"right"},{name:"Bottom",value:"bottom"},{name:"Left",value:"left"}],this.scaleTypes=[{name:"Linear",value:"linear"},{name:"Logarithmic",value:"logarithmic"}],this.defaultConfigs={bar:{planeType:"cartesian",hideableValues:!0},hBar:{planeType:"cartesian",hideableValues:!0},stackedBar:{planeType:"cartesian",hideableValues:!0},stackedBar100:{planeType:"cartesian",hideableValues:!1},hStackedBar:{planeType:"cartesian",hideableValues:!0},hStackedBar100:{planeType:"cartesian",hideableValues:!1},line:{planeType:"cartesian",nullToZeroCheckbox:!0},linePlusBar:{planeType:"cartesian",y2Axis:!0,nullToZeroCheckbox:!0},area:{planeType:"cartesian",yNumberRangeMin:!1,nullToZeroCheckbox:!0},totalArea:{planeType:"cartesian",yNumberRange:!1,yNumberFormat:!1},scatter:{planeType:"cartesian",chooseXRange:!0},pie:{planeType:"polar",colorPaletteDropup:!1},donut:{planeType:"polar",colorPaletteDropup:!1}},this.configs=this.defaultConfigs}return ChartFormatController.prototype.$onChanges=function(){if(this.format&&(this.currentChartService=this.readOnly?this.chartExplorerService:this.chartDesignerService,this.mod=r.copy(this.format),this.dimension=null,this.encoding&&this.chartModel)){this.isHorizontal="x"===this.encoding.marks.channel;var e,t=Object(Ha.o)(this.encoding),n=(t.primary,t.secondary),o=t.secondaryDiscrete;if(n.length)(e=Object(El.a)(this.chartModel,n[0])).isNames||"VIEWCALC"!==e.type||this.chartModel.validate(e.source).length||(this.dimension=e);if(o.length)"VIEWCALC"!==(e=Object(El.a)(this.chartModel,o[0])).type||this.chartModel.validate(e.source).length||(this.dimension=e);if(!Object(Wa.p)(this.encoding,this.chartModel).length&&Object(Wa.g)(this.encoding,this.chartType))switch(this.chartType){case"bar":this.configs=Object(y.merge)(this.defaultConfigs,{bar:{titles:jl.a.makeGroupedTitles(this.chartModel,this.encoding)}});break;case"hBar":this.configs=Object(y.merge)(this.defaultConfigs,{hBar:{titles:jl.a.makeGroupedTitles(this.chartModel,this.encoding)}});break;case"linePlusBar":this.configs=Object(y.merge)(this.defaultConfigs,{linePlusBar:{titles:jl.a.makeComboTitles(this.chartModel,this.encoding)}});break;case"stackedBar":this.configs=Object(y.merge)(this.defaultConfigs,{stackedBar:{titles:jl.a.makeStackedTitles(this.chartModel,this.encoding)}});break;case"hStackedBar":this.configs=Object(y.merge)(this.defaultConfigs,{hStackedBar:{titles:jl.a.makeStackedTitles(this.chartModel,this.encoding)}});break;case"stackedBar100":this.configs=Object(y.merge)(this.defaultConfigs,{stackedBar100:{titles:jl.a.makeStackedTitles(this.chartModel,this.encoding)}});break;case"hStackedBar100":this.configs=Object(y.merge)(this.defaultConfigs,{hStackedBar100:{titles:jl.a.makeStackedTitles(this.chartModel,this.encoding)}});break;case"line":this.configs=Object(y.merge)(this.defaultConfigs,{line:{titles:jl.a.makeStackedTitles(this.chartModel,this.encoding)}});break;case"area":this.configs=Object(y.merge)(this.defaultConfigs,{area:{titles:jl.a.makeStackedTitles(this.chartModel,this.encoding)}});break;case"totalArea":this.configs=Object(y.merge)(this.defaultConfigs,{totalArea:{titles:jl.a.makeStackedTitles(this.chartModel,this.encoding)}});break;case"pie":this.configs=Object(y.merge)(this.defaultConfigs,{pie:{titles:jl.a.makePieTitles(this.chartModel,this.encoding)}});break;case"donut":this.configs=Object(y.merge)(this.defaultConfigs,{donut:{titles:jl.a.makePieTitles(this.chartModel,this.encoding)}})}}},Object.defineProperty(ChartFormatController.prototype,"config",{get:function(){return Ol({yNumberRangeMin:!0,yNumberRange:!0,yNumberFormat:!0,colorPaletteDropup:!0},this.configs[this.chartType])},enumerable:!0,configurable:!0}),Object.defineProperty(ChartFormatController.prototype,"xFormatType",{get:function(){if(!this.dimension)return"NONE";var e=this.dimension.formula;if(e.form===fr.FormType.DATEFUNC)switch(e.funcName.toUpperCase()){case"DATETRUNC":return"DATE";case"DATEPART":switch(e.datePart.toUpperCase()){case"MONTH":return"MONTH";case"WEEKDAY":return"WEEKDAY";case"HOUR":return"HOUR";case"MINUTE":return"MINUTE";case"SECOND":return"SECOND"}}switch(this.dimension.dataType){case"NUMBER":case"FLOAT":case"INTEGER":return"NUMBER";default:return"NONE"}},enumerable:!0,configurable:!0}),ChartFormatController.prototype.save=function(){this.currentChartService.updateChartFormat(this.mod)},ChartFormatController.$inject=["ChartDesignerService","ChartExplorerService"],ChartFormatController}(),controllerAs:"ctrl",template:'\n    <div ng-if="ctrl.config.planeType === \'cartesian\'" class="cartesian" ng-class="{ horizontal: ctrl.isHorizontal }">\n      <div class="secondary-axis">\n        <h3 class="setting-title">{{ ctrl.isHorizontal ? \'Y\' : \'X\' }}-Axis</h3>\n        <div class="form-field">\n          <label class="axis-label">Title</label>\n          <input type="text"\n                 class="form-control form-control-sm axis-title-input"\n                 placeholder="{{ ctrl.config.titles.xAxis }}"\n                 ng-model-options="{ updateOn: \'blur\' }"\n                 ng-model="ctrl.mod.xAxis.title"\n                 ng-change="ctrl.save()"\n                 mode-enter />\n        </div>\n\n        <div class="form-field check-field">\n          <span class="checkbox-icon">\n            <input type="checkbox" id="xshowtitle" value="xshowtitle" ng-model="ctrl.mod.xAxis.titleEnabled" ng-change="ctrl.save()" />\n            <label class="inline-icon icon-editor-checkbox-light-unchecked" for="xshowtitle">\n            Show Title\n            </label>\n          </span>\n        </div>\n\n        <div class="form-field check-field" ng-if="ctrl.config.hideableValues && ctrl.encoding.y.length <= 1">\n          <span class="checkbox-icon">\n            <input type="checkbox" id="xshowval" value="angle" ng-model="ctrl.mod.showValues" ng-change="ctrl.save()" />\n            <label class="inline-icon icon-editor-checkbox-light-unchecked" for="xshowval">\n            Show Bar Values\n            </label>\n          </span>\n        </div>\n\n        <div class="form-field">\n          <label class="axis-label">Rotate Label</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.xAxis.rotate" ng-change="ctrl.save()" ng-options="item.value as item.name for item in ::ctrl.rotations">\n          </select>\n        </div>\n\n        <div class="form-field" ng-show="ctrl.xFormatType === \'NUMBER\'" ng-if="ctrl.config.chooseXRange">\n          <label class="axis-label">Range</label>\n          <div class="range-input-container">\n            <input class="form-control form-control-sm range-input"\n                   placeholder="min"\n                   type="text"\n                   ng-model="ctrl.mod.xAxis.numberRange.min"\n                   ng-model-options="{ updateOn: \'blur\' }"\n                   ng-change="ctrl.save()"\n                   mode-enter />\n            <span class="range-input-separator">&#8722;</span>\n            <input class="form-control form-control-sm range-input pull-right"\n                   placeholder="max"\n                   type="text"\n                   ng-model="ctrl.mod.xAxis.numberRange.max"\n                   ng-model-options="{ updateOn: \'blur\' }"\n                   ng-change="ctrl.save();"\n                   mode-enter />\n          </div>\n        </div>\n\n        <div class="form-field" ng-if="ctrl.xFormatType === \'NUMBER\'">\n          <div class="fields-container">\n            <div class="half-width">\n              <label class="axis-label">Format</label>\n              <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.xAxis.numberFormat.format" ng-change="ctrl.save()" ng-options="item.value as item.name for item in ::ctrl.formats">\n                <option value="">Auto</option>\n              </select>\n            </div>\n            <div class="half-width">\n              <label class="axis-label">Precision</label>\n              <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.xAxis.numberFormat.precision" ng-change="ctrl.save()" ng-options="item.value as item.name for item in ::ctrl.precisions">\n                <option value="">Auto</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-field" ng-show="ctrl.xFormatType === \'DATE\'">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.xAxis.dateFormat" ng-change="ctrl.save()" ng-options="item.value as item.name for item in ::ctrl.dateFormats">\n          </select>\n        </div>\n      </div>\n      <div class="primary-axis">\n        <h3 class="setting-title">{{ ctrl.isHorizontal ? \'X\' : \'Y\' }}-Axis</h3>\n\n        <div class="form-field">\n          <label class="axis-label">Title</label>\n          <input type="text"\n                 class="form-control form-control-sm axis-title-input"\n                 placeholder="{{ ctrl.config.titles.yAxis }}"\n                 ng-model-options="{ updateOn: \'blur\' }"\n                 ng-model="ctrl.mod.yAxis.title"\n                 ng-change="ctrl.save()"\n                 mode-enter />\n        </div>\n\n        <div class="form-field check-field">\n          <span class="checkbox-icon">\n            <input type="checkbox" id="yshowtitle" value="yshowtitle" ng-model="ctrl.mod.yAxis.titleEnabled" ng-change="ctrl.save()" />\n            <label class="inline-icon icon-editor-checkbox-light-unchecked" for="yshowtitle">\n            Show Title\n            </label>\n          </span>\n        </div>\n\n        <div class="form-field" ng-class="{clearfix: !ctrl.config.yNumberRangeMin}" ng-if="ctrl.config.yNumberRange">\n          <label class="axis-label">Range</label>\n          <div class="range-input-container">\n            {{ !ctrl.config.yNumberRangeMin ? 0 : \'\' }}\n            <input ng-if="ctrl.config.yNumberRangeMin"\n                   class="form-control form-control-sm range-input"\n                   placeholder="min"\n                   type="text"\n                   ng-model="ctrl.mod.yAxis.numberRange.min"\n                   ng-model-options="{ updateOn: \'blur\' }"\n                   ng-change="ctrl.save()"\n                   mode-enter />\n            <span class="range-input-separator">&#8722;</span>\n            <input class="form-control form-control-sm pull-right"\n                   ng-class="{\'range-input\': ctrl.config.yNumberRangeMin, \'range-input-lg\': !ctrl.config.yNumberRangeMin}"\n                   placeholder="max" type="text"\n                   ng-model="ctrl.mod.yAxis.numberRange.max"\n                   ng-model-options="{ updateOn: \'blur\' }"\n                   ng-change="ctrl.save();"\n                   mode-enter />\n          </div>\n        </div>\n\n        <div class="form-field" ng-if="ctrl.config.yNumberFormat">\n          <div class="fields-container">\n            <div class="half-width">\n              <label class="axis-label">Format</label>\n              <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.yAxis.numberFormat.format" ng-options="item.value as item.name for item in ::ctrl.formats" ng-change="ctrl.save()">\n                <option value="">Auto</option>\n              </select>\n            </div>\n            <div class="half-width">\n              <label class="axis-label">Precision</label>\n              <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.yAxis.numberFormat.precision" ng-options="item.value as item.name for item in ::ctrl.precisions" ng-change="ctrl.save()">\n                <option value="">Auto</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-field">\n          <label class="axis-label">Scale Type</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.yAxis.scaleType" ng-change="ctrl.save()" ng-options="item.value as item.name for item in ::ctrl.scaleTypes"></select>\n        </div>\n\n        <div ng-if="ctrl.config.y2Axis">\n          <h3 class="setting-title">Y2-Axis</h3>\n\n          <div class="form-field">\n            <label class="axis-label">Title</label>\n            <input type="text"\n                   class="form-control form-control-sm axis-title-input"\n                   placeholder="{{ ctrl.config.titles.y2Axis }}"\n                   ng-model-options="{ updateOn: \'blur\' }"\n                   ng-model="ctrl.mod.y2Axis.title"\n                   ng-change="ctrl.save()"\n                   mode-enter />\n          </div>\n\n          <div class="form-field check-field">\n            <span class="checkbox-icon">\n              <input type="checkbox" id="y2showtitle" value="y2showtitle" ng-model="ctrl.mod.y2Axis.titleEnabled" ng-change="ctrl.save()" />\n              <label class="inline-icon icon-editor-checkbox-light-unchecked" for="y2showtitle">\n              Show Title\n              </label>\n            </span>\n          </div>\n\n          <div class="form-field" ng-class="{clearfix: !ctrl.config.yNumberRangeMin}" ng-if="ctrl.config.yNumberRange">\n            <label class="axis-label">Range</label>\n            <div class="range-input-container">\n              {{ !ctrl.config.yNumberRangeMin ? 0 : \'\' }}\n              <input ng-if="ctrl.config.yNumberRangeMin"\n                     class="form-control form-control-sm range-input"\n                     placeholder="min"\n                     type="text"\n                     ng-model="ctrl.mod.y2Axis.numberRange.min"\n                     ng-model-options="{ updateOn: \'blur\' }"\n                     ng-change="ctrl.save()"\n                     mode-enter />\n              <span class="range-input-separator">&#8722;</span>\n              <input class="form-control form-control-sm pull-right"\n                     ng-class="{\'range-input\': ctrl.config.yNumberRangeMin, \'range-input-lg\': !ctrl.config.yNumberRangeMin}"\n                     placeholder="max"\n                     type="text"\n                     ng-model="ctrl.mod.y2Axis.numberRange.max"\n                     ng-model-options="{ updateOn: \'blur\' }"\n                     ng-change="ctrl.save();"\n                     mode-enter />\n            </div>\n          </div>\n\n          <div class="form-field" ng-if="ctrl.config.yNumberFormat">\n            <div class="fields-container">\n              <div class="half-width">\n                <label class="axis-label">Format</label>\n                <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.y2Axis.numberFormat.format" ng-options="item.value as item.name for item in ::ctrl.formats" ng-change="ctrl.save()">\n                  <option value="">Auto</option>\n                </select>\n              </div>\n              <div class="half-width">\n                <label class="axis-label">Precision</label>\n                <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.y2Axis.numberFormat.precision" ng-options="item.value as item.name for item in ::ctrl.precisions" ng-change="ctrl.save()">\n                  <option value="">Auto</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-field">\n            <label class="axis-label">Scale Type</label>\n            <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.y2Axis.scaleType" ng-change="ctrl.save()" ng-options="item.value as item.name for item in ::ctrl.scaleTypes"></select>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Polar Planes --\x3e\n\n    <div ng-if="ctrl.config.planeType === \'polar\'">\n      <h3 class="setting-title no-border-top">Chart Options</h3>\n      <div class="form-field check-field">\n        <span class="checkbox-icon">\n          <input type="checkbox" id="pieshowval" value="angle" ng-model="ctrl.mod.showValues" ng-change="ctrl.save()" />\n          <label class="inline-icon icon-editor-checkbox-light-unchecked" for="pieshowval">\n          Show Chart Values\n          </label>\n        </span>\n      </div>\n      <div class="form-field check-field">\n        <span class="checkbox-icon">\n          <input type="checkbox" id="pieformat" value="angle" ng-model="ctrl.mod.pieLabelsNotPercentages" ng-change="ctrl.save()" />\n          <label class="inline-icon icon-editor-checkbox-light-unchecked" for="pieformat">\n          Use Color Values For Labels\n          </label>\n        </span>\n      </div>\n    </div>\n\n    <h3 class="setting-title">Legend</h3>\n\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="showlegend" value="showLegend" ng-model="ctrl.mod.legend.enabled" ng-change="ctrl.save()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="showlegend">\n        Show Legend\n        </label>\n      </span>\n    </div>\n\n    <div class="form-field">\n      <label class="axis-label">Position</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="ctrl.mod.legend.position" ng-change="ctrl.save()" ng-options="item.value as item.name for item in ::ctrl.legendPositions">\n      </select>\n    </div>\n\n    <div class="form-field">\n      <label class="axis-label">Title</label>\n      <input type="text"\n             class="form-control form-control-sm axis-title-input"\n             placeholder="{{ ctrl.config.titles.legend }}"\n             ng-model-options="{ updateOn: \'blur\' }"\n             ng-model="ctrl.mod.legend.title"\n             ng-change="ctrl.save()"\n             mode-enter />\n    </div>\n\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="legendshowtitle" value="legendshowtitle" ng-model="ctrl.mod.legend.titleEnabled" ng-change="ctrl.save()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="legendshowtitle">\n        Show Title\n        </label>\n      </span>\n    </div>\n\n    <h3 class="setting-title">Details</h3>\n\n    <div class="form-field check-field" ng-if="ctrl.config.nullToZeroCheckbox">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="linenulltozero" value="nullToZero" ng-model="ctrl.mod.nullToZero" ng-change="ctrl.save()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="linenulltozero">\n        Show Null Values as Zero\n        </label>\n      </span>\n    </div>\n\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="drilldownEnabled" value="drilldownEnabled" ng-model="ctrl.mod.drilldownEnabled" ng-change="ctrl.save()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="drilldownEnabled">\n        Enable Drilldowns\n        </label>\n      </span>\n    </div>\n'};r.module("mode.components").component("chartFormat",Pl);var Fl={bindings:{readOnly:"<",model:"<",relName:"<",chartModel:"<",encoding:"<",onOpenSidebar:"&"},controller:function(){function VizToolbarController(e,t,n,r,o){this.rxStore=e,this.reportSaveService=t,this.chartDesignerService=n,this.chartExplorerService=r,this.flipperService=o,this.horizontalPieEnabled=!1}return VizToolbarController.prototype.$onInit=function(){var e=this,t=$("meta[name=report-owner-username]").attr("content");$("meta[name=owner-username]").attr("content");this.horizontalPieEnabled=this.flipperService.enabled(di.a.Type.HorizontalPie,t),this.chartService=this.readOnly?this.chartExplorerService:this.chartDesignerService;var n=(this.readOnly?this.rxStore.select(Tl.getChart):this.rxStore.select(Ae.a.getSelectedChart)).filter(function(e){return null!=e});this.selectedQuerySubscriber=this.rxStore.select(K.F).subscribe(function(t){e.selectedQuery=t}),this.selectedChartSubscriber=n.subscribe(function(t){e.selectedChart=t})},VizToolbarController.prototype.$onDestroy=function(){this.selectedChartSubscriber.unsubscribe(),this.selectedQuerySubscriber.unsubscribe()},VizToolbarController.prototype.addVegasChart=function(){this.reportSaveService.createEmptyChart({queryToken:this.selectedQuery.token,version:2}),this.onOpenSidebar()},VizToolbarController.prototype.addPivotTable=function(){this.reportSaveService.createEmptyChart({queryToken:this.selectedQuery.token,defaultType:"pivotTable"})},VizToolbarController.prototype.addBigNumber=function(){this.reportSaveService.createEmptyChart({queryToken:this.selectedQuery.token,defaultType:"bigNumber"})},VizToolbarController.prototype.cloneChart=function(){this.reportSaveService.cloneChart({token:this.selectedChart.token})},VizToolbarController.prototype.clearViz=function(){this.selectedChart&&(this.chartService.clearEncoding(),this.onOpenSidebar())},VizToolbarController.prototype.resetViz=function(){this.selectedChart&&this.chartService.resetEncoding()},VizToolbarController.prototype.clearFilters=function(){this.selectedChart&&this.chartService.clearFilters()},VizToolbarController.prototype.clearSort=function(){this.selectedChart&&this.chartService.clearSorts()},VizToolbarController.prototype.sortAscending=function(){this.selectedChart&&this.selectedChart.canSort&&this.chartService.quickSort(!1)},VizToolbarController.prototype.sortDescending=function(){this.selectedChart&&this.selectedChart.canSort&&this.chartService.quickSort(!0)},VizToolbarController.prototype.stepBack=function(){this.selectedChart&&this.selectedChart.canUndo&&this.chartService.undo(this.selectedChart.token)},VizToolbarController.prototype.stepForward=function(){this.selectedChart&&this.selectedChart.canRedo&&this.chartService.redo(this.selectedChart.token)},VizToolbarController.prototype.swapAxes=function(){this.selectedChart&&this.selectedChart.canSwap&&this.chartService.swapAxes()},VizToolbarController.prototype.sortTooltip=function(e){if(this.selectedChart&&this.chartModel)return Object(Ha.x)(this.selectedChart.encResult.encoding,this.chartModel,e)},VizToolbarController.$inject=["RxStoreService","ReportSaveService","ChartDesignerService","ChartExplorerService","DataLayerFlipperService"],VizToolbarController}(),controllerAs:"ctrl",template:'\n    <div class="viz-toolbar">\n      <div class="button-group">\n        <span uib-tooltip="Back" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.stepBack()" class="viz-toolbar-button" ng-class="{ disabled: !ctrl.selectedChart.canUndo }">\n          <i class="icon-back-gray"></i>\n        </span>\n        <span uib-tooltip="Forward" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.stepForward()" class="viz-toolbar-button" ng-class="{ disabled: !ctrl.selectedChart.canRedo }">\n          <i class="icon-forward-gray"></i>\n        </span>\n      </div>\n      <div class="button-group">\n        <span ng-if="!ctrl.readOnly" uib-dropdown class="viz-toolbar-button split-button">\n          <span uib-tooltip="Add New Chart" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" class="split-left" ng-click="ctrl.addVegasChart()"><i class="icon-new-chart-gray"></i></span>\n          <span uib-dropdown-toggle class="split-right"><i class="split-button-caret icon-split-caret-gray"></i></span>\n          <ul uib-dropdown-menu class="dropdown-menu">\n            <li><a href="#" ng-click="ctrl.addVegasChart()">Add Chart</a></li>\n            <li class="divider"></li>\n            <li><a href="#" ng-click="ctrl.addPivotTable()" class="button-link">Add Pivot Table</a></li>\n            <li><a href="#" ng-click="ctrl.addBigNumber()" class="button-link">Add Big Number</a></li>\n          </ul>\n        </span>\n        <span ng-if="!ctrl.readOnly" uib-tooltip="Duplicate Chart" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.cloneChart()" class="viz-toolbar-button">\n          <i class="icon-duplicate-chart-gray"></i>\n        </span>\n        <span ng-if="ctrl.readOnly" uib-tooltip="New Chart" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.clearViz()" class="viz-toolbar-button">\n          <i class="icon-new-chart-gray"></i>\n        </span>\n        <span ng-if="!ctrl.readOnly" uib-dropdown class="viz-toolbar-button split-button">\n          <span uib-tooltip="Clear Chart" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.clearViz()" class="split-left">\n            <i class="icon-reset-chart-gray"></i>\n          </span>\n          <span uib-dropdown-toggle class="split-right"><i class="split-button-caret icon-split-caret-gray"></i></span>\n          <ul uib-dropdown-menu>\n            <li><a href="#" ng-click="ctrl.clearViz()">Clear Chart</a></li>\n            <li class="divider"></li>\n            <li ng-class="{\'disabled\':!ctrl.encoding.filter.length}"><a href="#" ng-click="ctrl.clearFilters()">Clear Filters</a></li>\n            <li ng-class="{\'disabled\':!ctrl.encoding.sorts.length}"><a href="#" ng-click="ctrl.clearSort()">Clear Sort</a></li>\n          </ul>\n        </span>\n        <span ng-if="ctrl.readOnly" uib-dropdown class="viz-toolbar-button split-button">\n          <span uib-tooltip="Back to Start" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.resetViz()" class="split-left"><i class="icon-reset-chart-gray"></i></span>\n          <span uib-dropdown-toggle class="split-right"><i class="split-button-caret icon-split-caret-gray"></i></span>\n          <ul uib-dropdown-menu>\n            <li><a href="#" ng-click="ctrl.resetViz()">Back to Start</a></li>\n            <li class="divider"></li>\n            <li ng-class="{\'disabled\':!ctrl.encoding.filter.length}"><a href="#" ng-click="ctrl.clearFilters()">Clear Filters</a></li>\n            <li ng-class="{\'disabled\':!ctrl.encoding.sorts.length}"><a href="#" ng-click="ctrl.clearSort()">Clear Sort</a></li>\n          </ul>\n        </span>\n      </div>\n      <div class="button-group">\n        <span ng-if="ctrl.horizontalPieEnabled" uib-tooltip="Swap Axes" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.swapAxes()" class="viz-toolbar-button" ng-class="{ disabled: !ctrl.selectedChart.canSwap }">\n          <i class="icon-swap-axes-gray"></i>\n        </span>\n        <span uib-tooltip="{{ ctrl.sortTooltip(false) }}" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.sortAscending()" class="viz-toolbar-button" ng-class="{ disabled: !ctrl.selectedChart.canSort }">\n          <i class="icon-sort-ascending-gray"></i>\n        </span>\n        <span uib-tooltip="{{ ctrl.sortTooltip(true) }}" tooltip-append-to-body="true" tooltip-placement="bottom" tooltip-class="viz-toolbar-tooltip" ng-click="ctrl.sortDescending()" class="viz-toolbar-button" ng-class="{ disabled: !ctrl.selectedChart.canSort }">\n          <i class="icon-sort-descending-gray"></i>\n        </span>\n      </div>\n    </div>\n  '};r.module("mode.components").component("vizToolbar",Fl);var zl={bindings:{paneView:"<",chartType:"<"},template:'\n    <div ng-if="ctrl.paneView === \'MAXIMIZED\'" class="empty-table-maximized">\n      <p>Create a chart to see its table results:</p>\n      <ul ng-show="!ctrl.isRadialChart(ctrl.chartType) && !ctrl.isLinePlusBarChart(ctrl.chartType)">\n        <li>&#8226; 1 field in the x-axis</li>\n        <li>&#8226; 1 or more fields in the y-axis</li>\n      </ul>\n      <ul ng-show="ctrl.isRadialChart(ctrl.chartType)">\n        <li>&#8226; 1 field in color</li>\n        <li>&#8226; 1 field in angle</li>\n      </ul>\n      <ul ng-show="ctrl.isLinePlusBarChart(ctrl.chartType)">\n        <li>&#8226; 1 field in the x-axis</li>\n        <li>&#8226; 2 fields in the y-axes</li>\n      </ul>\n      <i class="icon-empty-table-mini empty-table"></i>\n    </div>\n    <div ng-if="ctrl.paneView === \'REGULAR\'" class="empty-table-split">\n      <div class="header-container">\n        <i class="icon-empty-table-header header"></i>\n      </div>\n      <div class="cells-container">\n        <i class="icon-empty-table-cells cells"></i>\n      </div>\n    </div>\n  ',controller:function(){function DesignerEmptyTableController(){}return DesignerEmptyTableController.prototype.isRadialChart=function(e){return"pie"===e||"donut"===e},DesignerEmptyTableController.prototype.isLinePlusBarChart=function(e){return"linePlusBar"===e},DesignerEmptyTableController}(),controllerAs:"ctrl"};r.module("mode.components").component("designerEmptyTable",zl);var _l=n("+YZJ"),$l=n.n(_l),Bl=function(){function ReportSettingsController(e,t,n,r,o,i){this.$scope=e,this.$rootScope=t,this.DataLayerFlipperService=n,this.$stateParams=r,this.AlertService=o,this.ReportDataService=i}return Object.defineProperty(ReportSettingsController.prototype,"form",{get:function(){return this.report._resource.hasForm("update_settings")&&this.report._resource.forms("update_settings")._inputs.report},enumerable:!0,configurable:!0}),ReportSettingsController.prototype.$onInit=function(){this.toggles={fullWidth:this.report.full_width,manualRunDisabled:this.report.manual_run_disabled},this.form&&(this.theme=r.copy(this.form.theme),this.manualRunDisabled=this.form.manual_run_disabled)},ReportSettingsController.prototype.submit=function(){var e=this,t={"report.full_width":this.toggles.fullWidth,"report.manual_run_disabled":this.toggles.manualRunDisabled,"report.theme":this.theme.value,includes:["report_theme"]};this.report.saveReportSettings(t).then(function(t){e.AlertService.success("Report settings saved"),e.ReportDataService.updateReportSettingsSilently(t._resource),e.$rootScope.$broadcast("preview.update",{updateSettings:{full_width:t.full_width,theme:t.localTheme}})},function(){e.AlertService.error("Could not save report settings")}),this.onSubmit()},ReportSettingsController.prototype.cancel=function(){this.onCancel()},ReportSettingsController.$inject=["$scope","$rootScope","DataLayerFlipperService","$stateParams","AlertService","ReportDataService"],ReportSettingsController}(),Vl={bindings:{report:"<",owner:"<",onSubmit:"&",onCancel:"&"},controller:Bl,controllerAs:"ctrl",template:$l.a};r.module("mode.components").component("reportSettings",Vl);var Ul=function(e){return{restrict:"A",scope:{report:"<",owner:"<"},link:function(t,n,r){n.on("click.reportSettings",function(n){e.open({report:t.report,owner:t.owner},{controllerAs:"ctrl",bindToController:!0,template:'<report-settings report="report" owner="owner" on-submit="$close()" on-cancel="$dismiss()"/>'})}),t.$on("$destroy",function(){return n.off("click.reportSettings")})}}};Ul.$inject=["ModalService"],r.module("mode.components").directive("reportSettingsModal",Ul);var Zl=n("sdeH"),Gl=n.n(Zl),Yl=function(e){return{restrict:"A",scope:{report:"=",reportRun:"<",owner:"<"},link:function(t,n,r){n.on("click.embedModal",function(n){if(t.reportRun&&t.owner)e.open({report:t.report,reportRun:t.reportRun,owner:t.owner},{controller:function(){},controllerAs:"ctrl",bindToController:!0,template:Gl.a})}),t.$on("$destroy",function(){return n.off("click.embedModal")})}}};Yl.$inject=["ModalService"],r.module("mode.components").directive("embedModal",Yl);var Ql=n("jzb9"),Hl=n.n(Ql),Wl=function(){function ShareEmbedController(e,t,n,r,o){this.$scope=e,this.DatasetService=t,this.$window=n,this.$timeout=r,this.EmbedKeyModel=o}return ShareEmbedController.prototype.$onInit=function(){var e=this;this.signedEmbedEnabled=this.report.canToggleSigning,this.secretEmbedEnabled=!this.report.public&&(this.report.canToggleSecret||this.report.is_embedded),this.view={embed:!0,whiteLabel:!1},this.toggles={embedEnabled:!1},this.report.embedKey().then(function(t){e.embedKey=t,e.toggles.embedEnabled=!!t,e.report.initEmbedKey(t),e.reportRun.initEmbedKey(t)}).catch(function(){})},ShareEmbedController.prototype.setView=function(e){this.view.embed=!1,this.view.whiteLabel=!1,this.view[e]=!0},ShareEmbedController.prototype.enableSecretEmbed=function(){var e=this;this.$window.confirm("Are you sure you want to enable secret embeds?")?this.EmbedKeyModel.create({report:this.report.token,params:{}}).then(function(t){e.report.initEmbedKey(t),e.reportRun.initEmbedKey(t),e.embedKey=t}):this.toggles.embedEnabled=!1},ShareEmbedController.prototype.disableSecretEmbed=function(){var e=this;this.$window.confirm("Are you sure you want to disable secret embeds?  This will permanently disable existing secret embeds for this report.")?this.embedKey.destroy().then(function(){e.report.cleanupEmbedKey(),e.reportRun.cleanupEmbedKey(),e.embedKey=null}):this.toggles.embedEnabled=!0},ShareEmbedController.prototype.toggleSignedEmbed=function(){this.report.toggleSignedEmbed(!this.report.is_signed)},ShareEmbedController.$inject=["$scope","DatasetService","$window","$timeout","EmbedKeyModel"],ShareEmbedController}(),ql={bindings:{reportRun:"<",report:"=",owner:"<",dismiss:"&"},template:Hl.a,controller:Wl,controllerAs:"ctrl"};r.module("mode.components").component("shareEmbedComponent",ql);var Jl=n("mWHA"),Xl=n.n(Jl),Kl=function(e){return{restrict:"A",scope:{report:"<",reportRun:"<",owner:"<",account:"<",inEditor:"@?",detailsLink:"&",social:"@?"},link:function(t,n,r){n.on("click.shareModal",function(n){if(t.reportRun&&t.owner)e.open({report:t.report,reportRun:t.reportRun,owner:t.owner,account:t.account,inEditor:!!r.inEditor,detailsLink:t.detailsLink,social:!!r.social},{controller:function(){},controllerAs:"ctrl",bindToController:!0,template:Xl.a}).result.catch(function(){})}),t.$on("$destroy",function(){return n.off("click.shareModal")})}}};Kl.$inject=["ModalService"],r.module("mode.components").directive("shareModal",Kl);var es=n("y90i"),ts=n.n(es),ns=n("DN7e"),rs=n.n(ns),os=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,is=function(){function ShareController(e,t,n,r,o,i,a,l,s,c,d){this.$scope=e,this.DatasetService=t,this.ReportDataService=n,this.$window=r,this.$timeout=o,this.EmbedKeyModel=i,this.ModeCollection=a,this.ReportRunEmailModel=l,this.Modal=s,this.AlertService=c,this.ReportRunDataService=d}return ShareController.prototype.$onInit=function(){var e=this;this.fbAppId=$("meta[name=fb-app-id]").attr("content"),this.hasSlackApp=this.owner._resource.hasLink("slack_app"),this.ReportDataService.selectedReportResourceState$.subscribe(function(t){e.extSharingEnabled=t&&t.shared||e.report.canToggleSharing,e.report.shared=t.shared}),this.view={share:!0,email:!1,slack:!1},this.runStatus={completed:!1,exportableDatasets:!1},this.reportRun.canCreateFromForm_reportRunSlackMessages()&&(this.slackObject=this.reportRun.modelFromForm_reportRunSlackMessages(),this.slackForm=this.slackObject._formElements,this.hasSlackApp&&this.initSlackApp()),this.reportRun.canCreateFromForm_reportRunEmails()&&(this.emailObject=this.reportRun.modelFromForm_reportRunEmails(),this.emailForm=this.emailObject._formElements),this.emailObject&&!this.report.public&&(this.view.share=!1,this.view.email=!0),this.ReportRunDataService.selectedQueryReportRunState$.subscribe(function(t){var n=t.reportRun&&t.reportRun.running;e.runStatus.completed=!n,e.runStatus.completed&&(e.runStatus.exportableDatasets=e.DatasetService.datasetsAreExportable())})},ShareController.prototype.initSlackApp=function(){var e=this;this.owner.slackApp().then(function(t){"active"===t.state?(e.slackAppInstaller=t.installer_name,t.channels().then(e.ModeCollection.elements).then(function(t){e.slackChannels=t,e.selectedChannel=Object(y.find)(e.slackChannels,function(e){return"general"===e.name})||e.slackChannels[0],e.hasSlackApp=!0}).catch(function(t){e.hasSlackApp=!1,console.log("slack channels not found")})):e.hasSlackApp=!1}).catch(function(e){console.log("slack app not found")})},ShareController.prototype.setView=function(e){this.view.share=!1,this.view.email=!1,this.view.slack=!1,this.view[e]=!0},ShareController.prototype.toggleSharedReport=function(){this.ReportDataService.updateSelectedReportSharedState(!this.report.shared)},ShareController.prototype.emailAdding=function(e,t){return!Object(y.some)(t,{value:e.attrs.value})},ShareController.prototype.emailAdded=function(e,t){os.test(e.attrs.value)?!this.hasExternalEmails&&this.extSharingEnabled&&(this.hasExternalEmails=this.isOutsideDomain(e.attrs.value)):$(e.relatedTarget).addClass("invalid")},ShareController.prototype.checkOutsideEmails=function(e){var t=this;this.extSharingEnabled&&(this.hasExternalEmails=Object(y.some)(e,function(e){return t.isOutsideDomain.bind(t,e.value)}))},ShareController.prototype.isOutsideDomain=function(e){return!(!e||e.indexOf("@")<0)&&!Object(y.includes)(this.owner.authorized_domains,e.split("@")[1].toLowerCase())},ShareController.prototype.email=function(){var e=this;this.ReportRunEmailModel.create({reportRun:this.reportRun.token,report:this.report.token,params:this.emailObject.toParams()}).then(function(t){var n=Object(y.uniq)(Object(y.map)(t._embedded.succeeded,"recipient_address")),r=Object(y.uniq)(Object(y.map)(t._embedded.failed,"address"));e.dismiss(),r.length?e.Modal.open({succeeded:n,failed:r},{template:rs.a}):e.AlertService.success("Email sent")})},ShareController.prototype.closeWithLink=function(){this.detailsLink&&this.detailsLink(),this.dismiss()},ShareController.prototype.fbShare=function(){if(this.fbAppId){var e=location.protocol+"//"+document.domain;location.port&&(e+=":"+location.port),this.openPopup("https://www.facebook.com/dialog/share?app_id="+this.fbAppId+"&href="+encodeURIComponent(this.report.link)+"&display=popup&redirect_uri="+encodeURIComponent(e+"/fbredirect.html"),"facebook")}},ShareController.prototype.twitterShare=function(){this.openPopup("https://twitter.com/share?url="+encodeURIComponent(this.report.link),"twitter")},ShareController.prototype.openPopup=function(e,t){var n=void 0!==window.screenX?window.screenX:window.screenLeft,r=void 0!==window.screenY?window.screenY:window.screenTop,o=n+((void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth)-555)/2,i=r+((void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22)-260)/2.5;window.open(e,t,"height=260,width=555,top="+i+",left="+o)},ShareController.prototype.createScheduleEnabled=function(){return So.a.canCreateReportSchedule(this.report&&this.report._resource)},ShareController.$inject=["$scope","DatasetService","ReportDataService","$window","$timeout","EmbedKeyModel","ModeCollection","ReportRunEmailModel","ModalService","AlertService","ReportRunDataService"],ShareController}(),as={bindings:{reportRun:"<",report:"<",owner:"<",account:"<",dismiss:"&",detailsLink:"&",inEditor:"<",social:"<"},template:ts.a,controller:is,controllerAs:"ctrl"};r.module("mode.components").component("shareComponent",as);n("Vfoa");var ls={bindings:{},controller:function(){function OSPickerController(e){this.$timeout=e,this.tabs=[{type:"osx",display:"OSX",active:!1},{type:"ubuntu",display:"Ubuntu",active:!1},{type:"centos",display:"CentOS",active:!1},{type:"debian",display:"Debian",active:!1},{type:"redhat",display:"Redhat",active:!1},{type:"windows",display:"Windows",active:!1}]}return OSPickerController.prototype.select=function(e){this.tabs.forEach(function(e){e.active=!1,e.currentTab=!1}),e.active=!0,e.currentTab=!0,this.content=e.type},OSPickerController.prototype.mouseenterTab=function(e){this.$timeout(function(){e.active=!0},0)},OSPickerController.prototype.mouseleaveTab=function(e){e.currentTab||(e.active=!1)},OSPickerController.$inject=["$timeout"],OSPickerController}(),controllerAs:"ctrl",template:'\n<div class="data-sources-container clearfix">\n  <div class="connector-title clearfix">\n    <div class="connect-step-container">\n      <div class="connect-step-inner">1</div>\n    </div>\n    <h3 class="connect-step-text">Choose your Operating System</h3>\n  </div>\n  <div class="data-source-link" ng-repeat="tab in ctrl.tabs" ng-click="ctrl.select(tab)" ng-mouseenter="ctrl.mouseenterTab(tab)" ng-mouseleave="ctrl.mouseleaveTab(tab)">\n    <div class="data-source data-source-container text-center">\n      <div class="data-source-inner">\n        <i class="icon-bridge-connect-{{tab.type}} lg-icon datasource-icon"></i>\n        <div class="data-source-name">{{ tab.display }}</div>\n      </div>\n      <div class="btn btn-primary db-connect-btn">Select</div>\n    </div>\n  </div>\n</div>\n\n<div class="install-instructions">\n  <div ng-class="{\'no-content\': !ctrl.content}" class="connector-title clearfix">\n    <div class="connect-step-container">\n      <div class="connect-step-inner">2</div>\n    </div>\n    <h3 class="connect-step-text">Install</h3>\n  </div>\n\n  <div ng-show="ctrl.content == \'osx\'" ng-transclude="osx" ng-cloak></div>\n  <div id="ubuntu-content" ng-show="ctrl.content == \'ubuntu\' || ctrl.content == \'debian\'" ng-transclude="linux" ng-cloak></div>\n  <div id="redhat-content" ng-show="ctrl.content == \'redhat\' || ctrl.content == \'centos\'" ng-transclude="redhat" ng-cloak></div>\n  <div id="windows-content" ng-show="ctrl.content == \'windows\'" ng-transclude="windows" ng-cloak></div>\n</div>\n\n<div ng-transclude="footer" class="clearfix"></div>\n  ',transclude:{osx:"osPickerTabOsx",linux:"osPickerTabLinux",redhat:"osPickerTabRedhat",windows:"osPickerTabWindows",footer:"osPickerFooter"}};r.module("mode.components").component("osPicker",ls);var ss={transclude:!0,template:'\n<div class="console" ng-transclude></div>\n',controller:function(){function ConsoleController(e,t){this.$scope=e,this.$element=t,e.lines=[]}return ConsoleController.prototype.$onInit=function(){this.lines=this.$scope.lines},ConsoleController.prototype.select=function(e){this.lines.forEach(function(t){t.active=!1,t.currentLine=!1,t!==e&&t.element.find(".btn").css({visibility:"hidden"})}),e.active=!0,e.currentLine=!0},ConsoleController.prototype.addLine=function(e){this.lines.push(e);var t=this.lines.indexOf(e)+1,n=t.toString();t<10&&(n="0"+t),e.index=n},ConsoleController.$inject=["$scope","$element"],ConsoleController}(),controllerAs:"ctrl"};r.module("mode.components").component("console",ss);var cs={bindings:{options:"<",index:"@"},require:{consoleCtrl:"^console"},template:'\n<div class="console-item" ng-class="{\'console-line-active\': active}">\n  <div class="console-index">{{index}}</div>\n  <div class="console-text">{{ctrl.options.stringValue}}</div>\n  <button clippy string-value="{{ctrl.options.stringValue}}" class="btn btn-filled-primary">Copy</button>\n</div>\n',controller:function(){function ConsoleLineController(e,t){this.$scope=e,this.$element=t,e.active=!1,e.currentLine=!1,e.element=this.$element}return ConsoleLineController.prototype.$onInit=function(){var e=this;this.consoleCtrl.addLine(this.$scope),this.$element.on("click",function(){e.$scope.$apply(function(){e.consoleCtrl.select(e.$scope)})}).on("mouseenter",function(){e.$scope.$apply(function(){e.$scope.active=!0,e.$element.find(".btn").css({visibility:"visible"})})}).on("mouseleave",function(){e.$scope.$apply(function(){e.$scope.currentLine||(e.$scope.active=!1,e.$element.find(".btn").css({visibility:"hidden"}))})})},ConsoleLineController.prototype.$onDestroy=function(){$(this.$element).off("click mouseenter mouseleave")},ConsoleLineController.$inject=["$scope","$element"],ConsoleLineController}(),controllerAs:"ctrl"};r.module("mode.components").component("consoleLine",cs);var ds=n("dmqm"),us=function(e){return{restrict:"A",scope:{url:"@",key:"@",awsAccessKeyId:"@",acl:"@",policy:"@",signature:"@",filename:"@",successRedirect:"@",onProgress:"&",onError:"&",control:"="},link:function(e,t,n){var r;$("html").attr("id","drop_target"),e.init=function(){(r=new ds.Uploader({run_times:"html5",drop_element:"drop_target",browse_button:n.id,url:n.url,multi_selection:!1,multipart_params:{utf8:!0,key:n.key,"x-amz-server-side-encryption":"AES256","x-amz-meta-filename":n.filename,Filename:n.filename,acl:n.acl,"Content-Type":"text/csv",AWSAccessKeyId:n.awsAccessKeyId,policy:n.policy,signature:n.signature,success_action_status:"201"},filters:{mime_types:[{title:"Delimited files",extensions:"csv,tsv,txt"}]}})).init(),r.bind("UploadProgress",function(t,n){e.$apply(function(){e.onProgress({percent:n.percent,name:n.name})})}),r.bind("Error",function(t,n){n&&"File extension error."===n.message?e.$apply(function(){e.onError({message:"Oops!  That file format is not supported."})}):e.control.cancel()}),r.bind("FilesAdded",function(t,n){e.$apply(function(){e.onProgress({percent:0,name:n[0].name}),$(".moxie-shim").hide(),r.start()})}),r.bind("FileUploaded",function(e,t,r){var o=$(r.response).find("key").text(),i=$(r.response).find("bucket").text(),a=$(r.response).find("etag").text();window.location.href=n.successRedirect+"?key="+encodeURIComponent(o)+"&bucket="+encodeURIComponent(i)+"&etag="+encodeURIComponent(a)})},e.init(),e.control.cancel=function(){e.onProgress(null,null),$(".moxie-shim").show(),r.stop(),r.destroy(),$(".moxie-shim").remove(),e.init()}}}};us.$inject=["$timeout"],r.module("mode.components").directive("modeUploader",us);var ps=n("ouuP"),hs=n("+G1s"),gs=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ms={autogrow:!0,link:!0,ready:!0,click:!0,capture:!0,applyReportFilters:!0,resetReportFilters:!0,embedLayoutEnd:!0,embedRenderEnd:!0,getNewSize:!0},fs={bindings:{reportOwnerId:"<",filterPanelIsOpen:"<",onFilterPanelDisplayChange:"&",embedId:"@",linkToPage:"&",guest:"@",isRefreshing:"=",src:"@"},template:'\n<div class="iframe-loading icon-logo-animated" ng-hide="ctrl.run.state == \'failed\' || ctrl.run.state == \'cancelled\' || ctrl.whiteLabel"></div>\n<div class="iframe-loading" ng-hide="ctrl.run.state == \'failed\' || ctrl.run.state == \'cancelled\' || !ctrl.whiteLabel">\n  <span class="loading-beacon gray-beacon lg-beacon">\n    <span class="pulse one"></span>\n    <span class="pulse two"></span>\n    <span class="pulse three"></span>\n    <span class="spinner"></span>\n  </span>\n</div>\n<iframe\n  name="mode-embed-frame"\n  class="embed-iframe invisible"\n  height="100%"\n  frameborder="0"\n  sandbox="allow-scripts allow-popups allow-top-navigation allow-same-origin">\n</iframe>\n',controller:function(){function EmbedFrameController(e,t,n,r,o,i,a,l,s,c,d,u,p,h,g,m,f,C){this.$scope=e,this.$element=t,this.$log=n,this.ReportStateService=r,this.FeatureToggleService=o,this.WindowMessageService=i,this.$window=a,this.$timeout=l,this.IFrameSetupService=s,this.Utils=c,this.ReportFilterService=d,this.RxStoreService=u,this.$q=p,this.StoreService=h,this.AnalyticsService=g,this.chartViewService=m,this.explorerService=f,this.alertService=C}return EmbedFrameController.prototype.$onInit=function(){var e=this;this.AnalyticsService.recordPerformanceEvent("embedInit",{}),this.$frameElement=this.$element.find("iframe"),this.embedFrame=this.$frameElement[0],this.$loaderElement=this.$element.find(".iframe-loading");var t=w()("meta[name=secret-token]").attr("content");this.whiteLabel=!!t,this.embedId&&(this.src+="&embed_id="+this.embedId),this.initFilterPanelDisplayToggleMessaging(),this.ReportStateService.getReportRun().then(function(t){e.run=t}),this.$frameElement.attr("src",this.src).on("load",function(){e.ReportStateService.getDatasets().then(function(){e.showContent()})}),this.initRefreshHandler(),this.IFrameSetupService.attach(window),this.initQueryString(),this.heightNormalizer=this.Utils.numberDeviationClamp({depth:4,threshold:28,boundary:"upper"}),window.addEventListener("message",this.applyMessage.bind(this)),window.addEventListener("message",this.handleParentMessage.bind(this)),this.$scope.$on("$destroy",function(){window.removeEventListener("message",e.applyMessage)}),this.WindowMessageService.subscribe(null,function(t){e.convertEmbedActionAndDispatch(t)}),this.RxStoreService.select(K.i).subscribe(function(t){e.currentReportToken=t})},EmbedFrameController.prototype.convertEmbedActionAndDispatch=function(e){var t=this;this.$scope.$apply(function(){switch(e.type){case kl.a.ChangeHierarchy:var n=e.forward?ee.a.Name.ClickIncreaseGranularity:ee.a.Name.ClickDecreaseGranularity;t.AnalyticsService.run(ee.c.Track,n,t.addReportTokenToAnalyticsProps(e.props)),t.chartViewService.changeHierarchy(e.chartToken,e.forward);break;case kl.a.DrillDown:t.chartViewService.drillDown(e.chartToken,e.target);break;case kl.a.ExploreChartMark:var r=e.target,o=e.filters,i=e.chartToken;t.chartViewService.exploreMark(i,r,o);break;case kl.a.Back:t.chartViewService.undo(e.chartToken);break;case kl.a.Forward:t.chartViewService.redo(e.chartToken);break;case kl.a.ShowAlert:e.success?t.alertService.success(e.message):t.alertService.error(e.message);break;case kl.a.ToggleExpandedView:t.chartViewService.toggleExpandedView(e.expandedViewOpen);break;case kl.a.ExploreChart:t.AnalyticsService.run(ee.c.Track,ee.a.Name.ClickExplore,t.addReportTokenToAnalyticsProps(e.props)),t.explorerService.exploreChart(e.chartToken);break;case kl.a.ExpandKebab:t.AnalyticsService.run(ee.c.Track,ee.a.Name.ClickKebab,t.addReportTokenToAnalyticsProps(e.props));break;case kl.a.ClickChartMark:t.AnalyticsService.run(ee.c.Track,ee.a.Name.ClickChartDataSeries,t.addReportTokenToAnalyticsProps(e.props));break;case kl.a.ClickDrilldownInterval:t.AnalyticsService.run(ee.c.Track,ee.a.Name.ClickDrilldownInterval,t.addReportTokenToAnalyticsProps(e.props));break;case kl.a.ClickViewData:t.AnalyticsService.run(ee.c.Track,ee.a.Name.ClickViewData,t.addReportTokenToAnalyticsProps(e.props));break;case kl.a.ClickExploreFromHere:t.AnalyticsService.run(ee.c.Track,ee.a.Name.ClickExploreFromHere,t.addReportTokenToAnalyticsProps(e.props))}})},EmbedFrameController.prototype.addReportTokenToAnalyticsProps=function(e){return e.report_id=this.currentReportToken,e},EmbedFrameController.prototype.handleParentMessage=function(e){if(e.data.id===this.embedId)switch(e.data.name){case ps.a.GetNewSize:this.embedFrame.contentWindow.postMessage(this.sanitizeForSerialization({type:ps.a.GetNewSize,current:e.data.current}),this.embedFrame.src)}},EmbedFrameController.prototype.applyMessage=function(e){var t=this;e&&e.data&&e.data.name&&ms[e.data.name]&&this.$scope.$apply(function(){t.inject(e)})},EmbedFrameController.prototype.inject=function(e){var t=this,n=e.data.name;if("autogrow"===n&&r.isDefined(this.queryString.embed_id)){if(this.embedId&&this.embedId!==e.data.id)return;var o=this.heightNormalizer(1*e.data.height);o-=this.$element.hasClass("without-footer")?24:0,window.parent.postMessage({height:o,id:this.queryString.embed_id},"*")}else if("link"===n&&e.data.query&&this.linkToPage)this.$scope.$evalAsync(function(){t.linkToPage({query:e.data.query,type:e.data.type})});else if("ready"==n){if(this.embedId&&this.embedId!==e.data.id)return;this.setupContent(e)}else"click"==n?this.$timeout(function(){t.$element.click()}):"capture"==n?window.callPhantom({top:e.data.top,left:e.data.left,width:e.data.width,height:e.data.height}):"applyReportFilters"===n?this.ReportFilterService.applyReportFilters(e.data.reportFilterControls):"resetReportFilters"===n?this.ReportFilterService.resetReportFilters(e.data.reportFilterControls):"resetReportFilter"===n?this.ReportFilterService.resetReportFilter(e.data.reportFilterControl):"embedLayoutEnd"==n?this.AnalyticsService.recordPerformanceEvent(n,{}):"embedRenderEnd"==n&&this.AnalyticsService.recordPerformanceEvent(n,{},!0)},EmbedFrameController.prototype.showContent=function(){this.$loaderElement.css("display","none"),this.$frameElement.removeClass("invisible"),this.AnalyticsService.recordPerformanceEvent("embedLayoutShown",{})},EmbedFrameController.prototype.setupContent=function(e){var t=this,n={charts:{}};this.AnalyticsService.recordPerformanceEvent("embedReady",{});var r=this.RxStoreService.select("transient","report","filterControls").map(function(e){return e.keys.map(function(t){return e.byKey.get(t).toJS()})}).subscribe(function(e){e.size>0&&(t.embedFrame.contentWindow.postMessage({type:ps.a.ReportFilterPanelDisplay,filterPanelIsOpen:!0},"*"),t.onFilterPanelDisplayChange&&t.onFilterPanelDisplayChange({$isOpen:!0}),t.StoreService.dispatch({type:Q.b.OpenFilterPanel})),t.embedFrame.contentWindow.postMessage({type:ps.a.UpdateReportFilterControls,filterControls:e.toJSON()},"*")}),o=this.RxStoreService.select("transient","report","datasets").subscribe(function(e){e.size<=0||t.ReportStateService.getReportQueries().then(function(n){var r=Object(y.sortBy)(n,"created_at"),o=Object(y.keyBy)(e.getRecords(),"query_token"),i=Object(hs.b)(o,r);i.length?t.embedFrame.contentWindow.postMessage({type:ps.a.UpdateReportDatasets,reportDatasets:i},"*"):t.$log.error("no datasets for queries found",Object.keys(o),Object(y.map)(r,"token"))})}),i=this.RxStoreService.select(Ae.a.getCharts).subscribe(function(e){t.chartStates=e,e.getRecords().map(function(e){return{token:e.token,queryToken:e.queryToken,canUndo:e.canUndo,canRedo:e.canRedo,canSort:e.canSort}}).forEach(function(e){n.charts[e.token]=e});var r={type:ps.a.ReportStateUpdate,state:n};t.embedFrame.contentWindow.postMessage(t.sanitizeForSerialization(r),"*")}),a=this.RxStoreService.select(Ae.a.getModel).subscribe(function(e){var n={model:e,type:ps.a.UpdateReportModel};t.embedFrame.contentWindow.postMessage(t.sanitizeForSerialization(n),"*")}),l=this.RxStoreService.select(Ae.a.getNotebookVizTokens).switchMap(function(e){return V.Observable.merge.apply(V.Observable,e.map(function(e){return t.RxStoreService.select(A.b.createVizRenderSelector(e))}).toArray())});this.$scope.$on("$destroy",function(){r&&r.unsubscribe(),o&&o.unsubscribe(),i&&i.unsubscribe(),a&&a.unsubscribe()}),this.ReportStateService.getReportAndReportRun().then(this.$q.spread(function(n,r){return t.ReportStateService.getDatasets().then(function(o){e.source.postMessage(t.sanitizeForSerialization({type:ps.a.ReportRenderAsyncInit,layout:n.layout,report:{title:n.name,owner:t.reportOwnerId,description:n.description,full_width:n.full_width,theme:n.localTheme},whiteLabel:t.whiteLabel,guest:void 0!==t.guest}),"*"),t.AnalyticsService.recordPerformanceEvent("embedLayoutStart",{}),t.ReportStateService.getQueryVisualizations().then(function(i){var a=[],s=[];Object(y.each)(i,function(e){a=a.concat(e.storedCharts),s=s.concat(e.storedTables)});s&&s.length&&s[0];var c={},d={};Object(y.each)(a,function(e){var n=e.renderEmbed(r.token),o=t.chartStates.getRecord(e.token);d["chart_"+e.token]=gs({},n,{format:o.format})}),Object(y.each)(s,function(e){c["table_"+e.token]=e.renderEmbed(r.token)});var u=Object(y.sortBy)(i,"created_at"),p=Object(y.map)(u,function(e){var t=o[e.token];return t&&(t.queryName=e.name||"Query"),t}),h={type:ps.a.ReportRenderAsyncUpdate,datasets:p,report:{title:n.name,owner:t.reportOwnerId,description:n.description,chart_view:d,table_view:c,python_view:{}}};l.bufferTime(150).filter(function(e){return e.length>0}).subscribe(function(e){var n=e.reduce(function(e,t){return(e[t.id]=t)&&e},{});t.embedFrame.contentWindow.postMessage(t.sanitizeForSerialization({type:ps.a.ReportVizUpdate,updateVizOptions:{type:"python",options:n}}),"*")}),e.source.postMessage(t.sanitizeForSerialization(h),"*"),t.AnalyticsService.recordPerformanceEvent("embedRenderStart",{})})})}))},EmbedFrameController.prototype.sanitizeForSerialization=function(e){return JSON.parse(JSON.stringify(e))},EmbedFrameController.prototype.initFilterPanelDisplayToggleMessaging=function(){var e=this;this.$scope.$watch("ctrl.filterPanelIsOpen",function(t,n){t!==n&&e.embedFrame.contentWindow.postMessage({type:ps.a.ReportFilterPanelDisplay,filterPanelIsOpen:t},"*")}),this.$window.addEventListener("message",function(t){t.data.type===ps.a.ReportFilterPanelDisplay&&(e.onFilterPanelDisplayChange&&e.onFilterPanelDisplayChange({$isOpen:t.data.filterPanelIsOpen}),t.data.filterPanelIsOpen?e.StoreService.dispatch({type:Q.b.OpenFilterPanel}):e.StoreService.dispatch({type:Q.b.CloseFilterPanel}),t.data.wleFilterPanelToggle&&e.$timeout(function(){e.filterPanelIsOpen=!e.filterPanelIsOpen}))},!1)},EmbedFrameController.prototype.initQueryString=function(){this.queryString={};for(var e=window.location.search.substring(1).split("&"),t=0;t<e.length;t++){var n=e[t].split("=");if(void 0===this.queryString[n[0]])this.queryString[n[0]]=n[1];else if("string"==typeof this.queryString[n[0]]){var r=[this.queryString[n[0]],n[1]];this.queryString[n[0]]=r}else this.queryString[n[0]].push(n[1])}},EmbedFrameController.prototype.initRefreshHandler=function(){var e=this;this.$scope.$watch("ctrl.isRefreshing",function(t,n){t&&t!==n&&(e.$frameElement.attr("src",e.src),e.isRefreshing=!1)})},EmbedFrameController.$inject=["$scope","$element","$log","ReportStateService","FeatureToggleService","WindowMessageService","$window","$timeout","IFrameSetupService","Utils","ReportFilterService","RxStoreService","$q","StoreService","AnalyticsService","ChartViewService","ChartExplorerService","AlertService"],EmbedFrameController}(),controllerAs:"ctrl"};r.module("mode.components").component("embedFrame",fs);var Cs={controller:Yo,controllerAs:"ctrl",bindings:{headerStyle:"@",menuType:"@",onSimpleShare:"&?",navPanelEnabled:"<?",standaloneEnabled:"<?"},template:'\n    <div ng-class="ctrl.getHeaderClasses()" class="platform-header">\n\n      \x3c!-- Header Wrapper Begins --\x3e\n      <div class="mode-header-component">\n\n        \x3c!-- Logo Begins --\x3e\n        <nav-flyout\n          ng-if="ctrl.isLoggedIn$ | async:this"\n          account="ctrl.account$ | async:this"\n          owner="ctrl.accountContext$ | async:this"\n          organizations="ctrl.orgs$ | async:this"\n          datasources="ctrl.orgDatasources$ | async:this"\n          spaces="ctrl.orgSpaces$ | async:this"\n          with-platform-header="true">\n        </nav-flyout>\n        <div\n          ng-if="!(ctrl.isLoggedIn$ | async:this)">\n          <a href="/" class="mode-header-logo dark-sidebar" target="_self">\n            <i class="icon-logo"></i>\n          </a>\n        </div>\n        \x3c!-- @Logo Ends --\x3e\n\n        \x3c!-- Default Content Container --\x3e\n        <div class="platform-header-default-content-container" ng-if="!ctrl.navPanelEnabled"></div>\n        \n        <platform-header-nav-panel\n          ng-if="ctrl.navPanelEnabled"\n          nav-display-mode="ctrl.navDisplayMode"\n          menu-type="ctrl.menuType"\n          breakpoint="ctrl._breakpoint"\n          on-simple-share="ctrl.handleSimpleShare()"\n          panel-display-mode="ctrl.panelDisplayMode$ | async:this" />\n\n        <sidebar-search\n          ng-if="ctrl.accountContext$ | async:this"\n          ng-class="{\'editor-search\': ctrl.headerStyle === \''+Bo.Dark+'\'}"\n          owner="ctrl.accountContext$ | async:this" />\n\n        \x3c!-- New Report Trigger Begins --\x3e\n        <a class="header-new-report-link"\n           ng-if="ctrl.orgContextNewReportLink && ctrl.orgContextNewReportLinkIsAvailable"\n           ng-href="{{ ctrl.orgContextNewReportLink }}"\n           target="_self">\n          <i class="icon-plus-large-white header-new-report-icon"></i>\n        </a>\n        \x3c!-- @New Report Trigger Ends --\x3e\n\n        <div class="header-item-wrapper" ng-if="(ctrl.isLoggedIn$ | async:this) === false">\n          <a href="/signup" class="btn btn-primary header-item-content" target="_self">\n            Sign Up\n          </a>\n        </div>\n\n        <div class="header-item-wrapper header-item-content" ng-if="(ctrl.isLoggedIn$ | async:this) === false">\n         <a href="/signin" class="nav-link nav-link-contrast header-item-content" target="_self">\n            Sign In\n          </a>\n        </div>\n\n        <help-menu\n          class="help-menu-component"\n          is-community="(ctrl.accountContext$ | async:this).user"\n          guest="(ctrl.isLoggedIn$ | async:this) === false"\n          theme="ctrl.headerStyle" />\n        <trial-banner owner="ctrl.accountContext$ | async:this" />\n        <mode-studio-badge\n          org-username="(ctrl.orgContext$ | async:this).username"\n          theme="ctrl.getStudioBadgeTheme()">\n        </mode-studio-badge>\n      </div>\n      \x3c!-- @Header Wrapper Ends --\x3e\n\n    </div>\n  '};r.module("mode.components").component("platformHeader",Cs);var ys,bs,vs=n("mz/H"),Is=n.n(vs),Ss="Chart";!function(e){function getTitle(e){return 1===e.view_version?e.view.chartTitle:e.view_vegas.title}function getVizReportRunLink(e,t){return e.hasLink("report_run_viz_web")?e.links("report_run_viz_web").$expand({token:t},{excludeSSLPort:!0}):""}function getVizLink(e){if(e&&e.hasLink("report_viz_web"))return e.links("report_viz_web").href}e.CHART_TYPE_ICONS={bar:"icon-chart-grouped-bar-gray",hBar:"icon-chart-h-grouped-bar-gray",stackedBar:"icon-chart-bar-gray",stackedBar100:"icon-chart-bar-100-gray",hStackedBar:"icon-chart-h-bar-gray",hStackedBar100:"icon-chart-h-bar-100-gray",bigNumber:"icon-chart-bignumber-gray",pivotTable:"icon-chart-pivot-gray",linePlusBar:"icon-chart-linebar-gray",line:"icon-chart-line-gray",area:"icon-chart-area-gray",totalArea:"icon-chart-area100-gray",scatter:"icon-chart-scatter-gray",pie:"icon-chart-pie-gray",donut:"icon-chart-donut-gray"},e.getTitle=getTitle,e.getTitleOrDefault=function(e){var t=1===e.view_version?e.view.selectedChart:e.view_vegas.chartType,n=Ss;return e.view.bar&&e.view.bar.stacked||"stackedBar"===t?t="Bar":"bar"===t?t="Grouped Bar":"hBar"===t?t="Grouped Bar":"hStackedBar"===t?t="Bar":"stackedBar100"===t?t="100% Bar":"hStackedBar100"===t?t="100% Bar":"pie"===t&&e.view.pie&&e.view.pie.donut?t="Donut":"bigNumber"===t?t="Big Number":"pivotTable"===t?(t="Pivot Table",n=""):"linePlusBar"===t?t="Line + Bar":"totalArea"===t&&(t="Area"),getTitle(e)||(t?t[0].toUpperCase()+t.slice(1)+" "+n:n)},e.getVizReportRunLink=getVizReportRunLink,e.getVizLink=getVizLink,e.renderEmbed=function(e,t,n){return r.extend({},2===e.view_version?e.view_vegas:e.view,{_dataset:n,_token:e.token,_vizLink:getVizLink(e),_vizReportRunLink:getVizReportRunLink(e,t)})},e.getChartIcon=function(t){return 1===t.view_version?e.CHART_TYPE_ICONS[t.view.selectedChart]||e.CHART_TYPE_ICONS.bar:t.view_vegas&&e.CHART_TYPE_ICONS[t.view_vegas.chartType]||e.CHART_TYPE_ICONS.bar}}(ys||(ys={})),function(e){function renderVizContentResult(e){return e.map(function(e){return{content:e.content,type:e.content_type,result_type:e.result_type}})}e.renderCellEmbed=function(e,t,n){return{title:t.title,state:n&&n.length?"succeeded":"empty",vizLink:t.links("report_pythonviz_web").href,vizReportRunLink:t.hasLink("report_run_pythonviz_web")?t.links("report_run_pythonviz_web").$expand({token:e},{excludeSSLPort:!0}):"",results:renderVizContentResult(n)}},e.renderVizContentResult=renderVizContentResult,e.isSessionEmpty=function(e){return!e.hasLink("last_loaded_run")},e.isSessionReportRunOutdated=function(e,t){return!e.hasLink("last_loaded_run")||Object(Rt.getTokenFromModeLink)(e.links("last_loaded_run"))!==t}}(bs||(bs={}));var ws=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},As=ys.renderEmbed,Ms=function(){function ReportBuilderController(e,t,n,r,o,i,a,l,s,c,d,u,p,h,g,m){var f=this;this.$element=e,this.$window=t,this.$log=n,this.$scope=r,this.$rootScope=o,this.$timeout=i,this.StoreService=a,this.$q=l,this.AssetService=s,this.RxStoreService=c,this.IFrameSetupService=d,this.ReportFilterService=u,this.ViewService=p,this.ReportSaveService=h,this.ChartModel=g,this.chartDataService=m,this.promptRefresh=!1,this.viewContainer=this.$element.find("iframe")[0],this.viewElem=S(this.viewContainer),this.loader=this.$element.find(".iframe-loading"),this.reportOwnerId=S("meta[name=owner-username]").attr("content"),this.filterControlsObserver=null,this.reportDatasetsObserver=null,this.$rootScope.$on("designer.focus",function(){f.$timeout(function(){f.viewContainer.contentWindow.focus()})}),this.$scope.$watchGroup(["ctrl.report.name","ctrl.report.description"],function(e,t){e&&t&&(e[0]!==t[0]||e[1]!==t[1])&&f.sendDataMessage({report:{title:e[0],description:e[1]}})}),this.StoreService.connectPath(this.$scope,"editor",function(e){e.notebookShown||e.queryMode||e.noPreviewRefresh||!f.promptRefresh||(f.promptRefresh=!1,f.$timeout(function(){f.refresh()}))}),this.chartsSubscriber=c.select(Ae.a.getCharts).subscribe(function(e){f.charts=e}),this.reportLayoutSubscriber=c.select(K.N).subscribe(function(e){f.reportLayout=e}),this.boundMessageHandler=this.messageHandler.bind(this),this.$scope.$on("preview.update",this.handlePreviewUpdate.bind(this)),this.initFilterPanelDisplayToggleMessaging(),this.$window.addEventListener("message",this.boundMessageHandler)}return ReportBuilderController.prototype.$onChanges=function(e){e.datasets&&this.updateDatasets()},ReportBuilderController.prototype.$onDestroy=function(){this.filterControlsObserver&&this.filterControlsObserver.unsubscribe(),this.reportDatasetsObserver&&this.reportDatasetsObserver.unsubscribe(),this.reportModelObserver&&this.reportModelObserver.unsubscribe(),this.chartsSubscriber.unsubscribe(),this.$window.removeEventListener("message",this.boundMessageHandler)},ReportBuilderController.prototype.updateDatasets=function(){this.promptRefresh=!0,this.ViewService.views.notebookShown||this.ViewService.views.queryMode||this.refresh()},ReportBuilderController.prototype.loadIframe=function(){this.iframeDeferred&&(this.iframeDeferred.reject(),this.iframeDeferred=null,this.iframePromise=null),this.iframeDeferred=this.$q.defer(),this.iframePromise=this.iframeDeferred.promise,this.viewElem.attr("src",this.previewSrcUrl()),this.registerReportModelObserver(),this.registerReportDatasetsObserver(),this.registerFilterControlsObserver(),this.IFrameSetupService.attach(window)},ReportBuilderController.prototype.sendDataMessage=function(e){var t=this;this.iframePromise&&(this.viewElem.css("display","block"),this.loader.css("display","none"),this.iframePromise.then(function(){e=Object(y.assign)({type:ps.a.PreviewUpdate},e),t.viewContainer.contentWindow.postMessage(t.sanitizeForSerialization(e),"*")}).catch(function(){}))},ReportBuilderController.prototype.refresh=function(){var e=this;if(this.promptRefresh=!1,r.isDefined(this.datasets)){this.loadIframe();var t=Object(y.sortBy)(this.ReportSaveService.storedQueries,function(e){return e.resource?e.resource.created_at:e.name}),n=(t.length&&this.datasets[t[0].token],Object(y.map)(t,function(t){var n=e.datasets[t.token];return n&&(n.queryName=t.name||"Query"),n})),o=this.report,i=Object(y.sortBy)(this.charts.getRecords(),"created_at"),a=this.tables,l={},s={},c={},d=Object(y.map)(this.ReportSaveService.storedQueries,function(e){return{name:e.name,token:e.token,chartIds:[],tableIds:[]}});Object(y.each)(i,function(e){var t="chart_"+e.token,n=e.resource.generate(e.resource);n.view_vegas=ws({},n.view_vegas,{format:e.format}),s[t]=As(n,null,e.queryToken),Object(y.find)(d,{token:e.queryToken}).chartIds.push(t)}),Object(y.each)(a,function(e){var t="table_"+e.token;l[t]=e.renderEmbed(),Object(y.find)(d,{token:e.parent}).tableIds.push(t)}),Object(y.each)(this.pythonCells,function(e){c["python_"+e.token]=bs.renderCellEmbed("",e.vizResource,e.results)});var u={type:ps.a.ReportRenderAsyncUpdate,datasets:n,layout:this.reportLayout,report:{title:o.name,description:o.description,owner:this.reportOwnerId,chart_view:s,table_view:l,python_view:c,full_width:o.full_width,theme:o.localTheme},allQueries:d};this.sendDataMessage(Object(y.assign)({},u,{type:ps.a.ReportRenderAsyncInit})),this.sendDataMessage(u)}},ReportBuilderController.prototype.initFilterPanelDisplayToggleMessaging=function(){var e=this;this.$scope.$watch("ctrl.filterPanelIsOpen",function(t,n){t!==n&&e.viewContainer.contentWindow.postMessage({type:ps.a.ReportFilterPanelDisplay,filterPanelIsOpen:t},"*")}),this.$window.addEventListener("message",this.handleFilterMessage,!1)},ReportBuilderController.prototype.handleFilterMessage=function(e){e.data.type===ps.a.ReportFilterPanelDisplay&&(this.onFilterPanelDisplayChange&&this.onFilterPanelDisplayChange({$isOpen:e.data.filterPanelIsOpen}),e.data.filterPanelIsOpen?this.StoreService.dispatch({type:Q.b.OpenFilterPanel}):this.StoreService.dispatch({type:Q.b.CloseFilterPanel}))},ReportBuilderController.prototype.stripId=function(e){return e.replace(/^(chart_|table_)/,"")},ReportBuilderController.prototype.previewSrcUrl=function(){return[this.AssetService.embedPreviewPath+"?theme_href="+this.report.localTheme.css_href,"report_owner_username="+this.reportOwnerId,"report_owner_plan="+this.owner.plan_code,Pr.a.serializeObjToURI(this.$window.dataLayer[0].features,"feature"),Pr.a.serializeObjToURI(Object(y.pick)(this.$window.dataLayer[0].orgFeatures,this.reportOwnerId),"org_feature")].join("&")},ReportBuilderController.prototype.registerFilterControlsObserver=function(){var e=this;this.filterControlsObserver&&this.filterControlsObserver.unsubscribe(),this.iframePromise.then(function(){e.filterControlsObserver=e.RxStoreService.select("transient","report","filterControls").map(function(e){return e.keys.map(function(t){return e.byKey.get(t).toJS()})}).subscribe(function(t){t.size>0&&(e.viewContainer.contentWindow.postMessage({type:ps.a.ReportFilterPanelDisplay,filterPanelIsOpen:!0},"*"),e.StoreService.dispatch({type:Q.b.OpenFilterPanel})),e.viewContainer.contentWindow.postMessage({type:ps.a.UpdateReportFilterControls,filterControls:t.toJSON()},"*")})})},ReportBuilderController.prototype.registerReportDatasetsObserver=function(){var e=this;this.reportDatasetsObserver&&this.reportDatasetsObserver.unsubscribe(),this.iframePromise.then(function(){e.reportDatasetsObserver=e.RxStoreService.select("transient","report","datasets").withLatestFrom(e.RxStoreService.select("client","selectedReport","queries")).subscribe(function(t){var n=t[0],r=t[1];if(!(n.size<=0)){var o=Object(y.sortBy)(r.getRecords(),"resource.created_at"),i=Object(y.keyBy)(n.getRecords(),"query_token"),a=Object(hs.b)(i,o);a.length?e.viewContainer.contentWindow.postMessage({type:ps.a.UpdateReportDatasets,reportDatasets:a},"*"):e.$log.error("no datasets for queries found",Object.keys(i),Object(y.map)(o,"token"))}})})},ReportBuilderController.prototype.registerReportModelObserver=function(){var e=this;this.reportModelObserver&&this.reportModelObserver.unsubscribe(),this.iframePromise.then(function(){e.reportModelObserver=e.RxStoreService.select(Ae.a.getModel).subscribe(function(t){var n={model:t,type:ps.a.UpdateReportModel};e.viewContainer.contentWindow.postMessage(e.sanitizeForSerialization(n),"*")})})},ReportBuilderController.prototype.iframeContentReady=function(){this.iframeDeferred&&this.iframeDeferred.resolve()},ReportBuilderController.prototype.handlePreviewUpdate=function(e,t){if(t&&t.rearrange)this.sendDataMessage({rearrange:t.rearrange});else if(t&&t.updateChart){var n=this.charts.getRecord(t.updateChart.token);n&&(t.updateChart.view.format=n.format),this.sendDataMessage({updateChart:t.updateChart})}else t&&t.removeViz?this.sendDataMessage({removeViz:t.removeViz}):t&&t.addViz?"chart"===t.addViz.type?this.sendDataMessage({addChart:t.addViz}):"python"===t.addViz.type?this.sendDataMessage({addViz:t.addViz}):"text"===t.addViz.type?this.sendDataMessage({addText:t.addViz}):this.sendDataMessage({addTable:t.addViz}):t&&t.updateViz?this.sendDataMessage({updateViz:t.updateViz}):t&&t.updateTable?this.sendDataMessage({updateTable:t.updateTable}):t&&t.updateQuery?this.sendDataMessage({updateQuery:t.updateQuery}):t&&t.setRowHeight?this.sendDataMessage({setRowHeight:t.setRowHeight}):t&&t.setTableFullHeight?this.sendDataMessage({setTableFullHeight:t.setTableFullHeight}):t&&t.updateSettings?this.sendDataMessage({report:t.updateSettings}):this.refresh()},ReportBuilderController.prototype.messageHandler=function(e){var t=this;switch(e.data.name){case"ready":this.iframeContentReady();break;case"chart":e.data.id?this.$scope.$apply(function(){t.modal({id:e.data.id})}):this.$log.debug("trying to edit undefined chart");break;case"chartClose":e.data.id?this.$scope.$apply(function(){t.removeChart({id:e.data.id})}):this.$log.debug("trying to close undefined chart");break;case"chartClone":e.data.id?this.$scope.$apply(function(){t.cloneChart({id:e.data.id,position:e.data.position})}):this.$log.debug("trying to clone undefined chart");break;case"table":e.data.id&&this.$scope.$apply(function(){t.tableModal({id:e.data.id})});break;case"tableClose":e.data.id?this.$scope.$apply(function(){t.removeTable({id:e.data.id})}):this.$log.debug("trying to close undefined table");break;case"vizClose":e.data.id?this.$scope.$apply(function(){t.removeViz({id:e.data.id});var n=e.data.id.split("_"),r=n[0],o=n[1];"python"===r&&t.RxStoreService.dispatch({type:Z.Type.RemoveFromLayoutViaBuilder,vizToken:o})}):this.$log.debug("trying to close undefined viz");break;case"link":e.data.query&&"string"==typeof e.data.query&&this.$scope.$evalAsync(function(){t.linkToPage({query:e.data.query,type:e.data.type})});break;case"hotkey":var n=S.Event("keydown");n.which=n.keyCode=e.data.value,13===e.data.value||83===e.data.value?n.metaKey=!0:n.altKey=!0,this.$element.trigger(n);break;case"click":this.$element.click();break;case"moveViz":this.$scope.$apply(function(){t.moveGridElement({id:e.data.id,type:e.data.id.split("_")[0],row:e.data.row,column:e.data.column})});break;case"resizeGridElement":this.$scope.$apply(function(){t.resizeGridElement({id:e.data.id,type:e.data.id.split("_")[0],dir:e.data.dir,size:e.data.size})});break;case"moveGridRow":this.$scope.$apply(function(){t.moveGridRow({sourceRow:e.data.sourceRow,targetRow:e.data.targetRow})});break;case"resizeRowHeight":this.$scope.$apply(function(){t.resizeRowHeight({rowIndex:e.data.rowIndex,size:e.data.size})});break;case"applyReportFilters":this.ReportFilterService.applyReportFilters(e.data.reportFilterControls);break;case"resetReportFilters":this.ReportFilterService.resetReportFilters(e.data.reportFilterControls);break;case"setDefaultReportFilters":this.ReportFilterService.setDefaultReportFilters(e.data.reportFilterControls);break;case"resetReportFilter":this.ReportFilterService.resetReportFilter(e.data.reportFilterControl);break;case"destroyReportFilter":this.ReportFilterService.destroyReportFilter(e.data.reportFilterControl);break;case"moveReportFilterToBottom":this.ReportFilterService.moveReportFilterToBottom(e.data.reportFilterControl);break;case"moveReportFilterToPosition":this.ReportFilterService.moveReportFilterToPosition(e.data.reportFilterControl,e.data.nextReportFilterControl);break;case"setReportFilterType":this.ReportFilterService.setReportFilterType(e.data.reportFilterControl,e.data.filterType);break;case"setReportFilterSelectControlType":this.ReportFilterService.setReportFilterSelectControlType(e.data.reportFilterControl,e.data.controlType);break;case"setReportFilterRangeIncludeNulls":this.ReportFilterService.setReportFilterRangeIncludeNulls(e.data.reportFilterControl,e.data.includeNulls);break;default:e.data&&this.handleEmbedAction(e.data)}},ReportBuilderController.prototype.handleEmbedAction=function(e){switch(e.type){case kl.a.DrillDown:this.chartDataService.drillDown(e.chartToken,e.target);break;case kl.a.ChangeHierarchy:this.chartDataService.changeHierarchy(e.chartToken,e.forward)}},ReportBuilderController.prototype.sanitizeForSerialization=function(e){return JSON.parse(JSON.stringify(e))},ReportBuilderController.$inject=["$element","$window","$log","$scope","$rootScope","$timeout","StoreService","$q","AssetService","RxStoreService","IFrameSetupService","ReportFilterService","ViewService","ReportSaveService","ChartModel","ChartDataService"],ReportBuilderController}(),ks={bindings:{dataset:"<",datasets:"<",report:"<",tables:"<",pythonCells:"<",filterPanelIsOpen:"<",owner:"<",isViewQueryMode:"<",modal:"&",tableModal:"&",removeChart:"&",cloneChart:"&",toggleTable:"&",removeTable:"&",removeViz:"&",moveGridRow:"&",moveGridElement:"&",resizeGridElement:"&",resizeRowHeight:"&",linkToPage:"&",onFilterPanelDisplayChange:"&?"},template:Is.a,controller:Ms,controllerAs:"ctrl"};r.module("mode.components").component("reportBuilder",ks);var Ts={controller:function(){function PlatformHeaderLogoController(){}return PlatformHeaderLogoController.prototype.toggle=function(){this.onToggle&&this.onToggle()},PlatformHeaderLogoController.$inject=[],PlatformHeaderLogoController}(),controllerAs:"ctrl",bindings:{isHidden:"<?",onToggle:"&?"},template:'\n    <div class="mode-nav-actions">\n      <a href="#"\n         class="mode-header-logo dark-sidebar"\n         ng-click="ctrl.toggle()"\n         ng-class="{\'nav-open\': ctrl.isHidden}">\n        <div class="burger-wrapper dark">\n          <div class="burger"></div>\n        </div>\n        <i class="icon-logo"></i>\n      </a>\n    </div>\n  '};r.module("mode.components").component("platformHeaderLogo",Ts);var xs,Ds=function(){function PlatformHeaderBreadcrumbController(){}return PlatformHeaderBreadcrumbController.prototype.handleBreadcrumbClick=function(e,t){this.onBreadcrumbClick({$event:e,$type:t})},PlatformHeaderBreadcrumbController.$inject=[],PlatformHeaderBreadcrumbController}(),Ls=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rs=Rt.ModeResourceHelper.resourceToModel;!function(e){e.Org="Org",e.Domain="Domain",e.Page="Page"}(xs||(xs={}));var Ns=function(){function PlatformHeaderNavContainerController(e,t,n,r,o,i,a,l,s,c,d,u,p,h,g,m,f,C,y,b,v){var I=this;this.$state=e,this.$timeout=t,this.$window=n,this.$log=r,this.AccountModel=o,this.DataSourceModel=i,this.OrgModel=a,this.ReportModel=l,this.ReportRunModel=s,this.SpaceModel=c,this.store=d,this.storeLegacy=u,this.ClientDataService=p,this.DefinitionRunDataService=h,this.DataSourceService=g,this.DatasetService=m,this.FeatureToggleService=f,this.ReportDataService=C,this.ReportRunDataService=y,this.ReportSaveService=b,this.ReportStateService=v,this.panelDisplayMode=Uo.Full,this._mobileMenuIsOpen=!1,this.businessUpsellEnabled$=this.FeatureToggleService.featureBusinessUpsellEnabled$,this.modeStudioEnabled$=this.FeatureToggleService.featureModeStudioEnabled$,this.hasUnsyncedChanges$=this.store.select(K.K),this.reportRunsLink$=this.store.select(K._3),this.lastSuccessfulRunToken$=this.store.select(K.L),this.account$=this.store.select(K.f),this.orgs$=this.store.select(K.d).map(function(e){return Rt.ModeResourceHelper.resourcesToModels(e,I.OrgModel.model)}),this.orgAvatar$=this.store.select(K.u),this.orgContext$=this.store.select(K.v).map(function(e){return Rt.ModeResourceHelper.resourceToModel(e,I.AccountModel.model)}),this.orgDatasources$=this.DataSourceService.orgDataSources$.map(function(e){return Rt.ModeResourceHelper.resourcesToModels(e,I.DataSourceModel.model)}),this.expectedRuntime$=this.store.select(K.J),this.sharingBannerHidden$=this.store.select(K.e).filter(function(e){return!!e}).map(function(e){return e.hidden_banners.external_sharing}),this.report$=this.store.select(K.S).map(function(e){return Rt.ModeResourceHelper.resourceToModel(e,I.ReportModel.model)}),this.reportIsExternal$=this.store.select(K.S).filter(function(e){return!!e}).map(function(e){return e.shared||e.is_embedded}),this.reportOptions$=this.store.select(K.t).combineLatest(this.store.select(wo.getOptionsById),function(e,t){return e.merge(t)}),this.reportRun$=this.store.select(K.R).map(function(e){return Rt.ModeResourceHelper.resourceToModel(e&&e.resource,I.ReportRunModel.model)}),this.reportRunAt$=this.store.select(K.T),this.reportSpace$=this.store.select(K.W).map(function(e){return Rs(e,I.SpaceModel.model)}),this.selectedDefinition$=this.DefinitionRunDataService.definitionRunState$.map(function(e){return e.definition}),this.lastSyncedAt$=this.store.select(K.M).combineLatest(this.store.select(K.E)).map(function(e){var t=e[0],n=e[1];switch(I.menuType){case po.DefinitionEditor:return n;case po.Editor:case po.Report:return t}}),this.definitionOptions$=this.store.select(K.k),this.reportPythonNotebookAvailable$=this.store.select(K.P).filter(function(e){return null!=e}).take(1),this.menuOptions$=this.reportOptions$.combineLatest(this.definitionOptions$).map(function(e){var t=e[0],n=e[1];switch(I.menuType){case po.Report:return t;case po.DefinitionEditor:return n;default:return t}}).map(this.shamefullyPatchOptionsStream.bind(this)),this.defaultCommitMessageText$=this.store.select(K.S).filter(function(e){return null!=e}).combineLatest(this.DefinitionRunDataService.definitionRunState$,function(e,t){switch(I.menuType){case po.Editor:return"Update Report '"+(e.name||e.token)+"'";case po.DefinitionEditor:return"Update Definition '"+t.definition.name+"'"}}),this.breadcrumbs$=this.store.select(K.I).combineLatest(this.store.select(K.V),this.store.select(K.Y),this.store.select(K.X),this.DefinitionRunDataService.definitionRunState$,this.orgContext$).map(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],l=I.DataSourceService.selectedDataSource,s=i.definition;switch(I.menuType){case po.DefinitionEditor:return[{type:xs.Domain,name:l.fullname||"Private",href:l.homeLink||a.publicDSLink,self:!0},{type:xs.Page,name:s.name||"Untitled Definition"}];case po.Editor:case po.Report:return[{type:xs.Domain,name:n,href:o&&r||null,self:!0},{type:xs.Page,name:t}]}}).combineLatest(this.store.select(K.v),this.store.select(K.w),this.store.select(K.p),this.store.select(K.S),this.store.select(K.j)).map(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5];if(I.menuType===po.Report){if(n&&!n.user&&!o)return[{type:xs.Org,name:n.name,href:"/",self:!0}].concat(t);if(n&&!n.user&&So.a.isCommunity(i))return[{type:xs.Org,name:n.name,href:a?r:null,self:!0}].concat(t)}return t}),this.relativeBreadcrumbs$=this.breadcrumbs$.map(function(e){return e.filter(function(e){return"Page"===e.type}).map(function(e){return Ls({},e,{href:void 0})})}),this.reportRunsLinkSubscription=this.reportRunsLink$.subscribe(function(e){I._reportRunsLink=e}),this.lastSuccessfulRunTokenSubscription=this.lastSuccessfulRunToken$.subscribe(function(e){I._lastSuccessfulRunToken=e}),this.reportUserStar$=this.store.select(K._0),this.starOptionSubscription=this.reportOptions$.map(function(e){switch(I.menuType){case po.Report:return e.get("[Report] StarReport");default:return null}}).subscribe(function(e){I.starOption=e})}return PlatformHeaderNavContainerController.prototype.$onInit=function(){var e=this;this.reportPythonNotebookAvailable$.subscribe(function(){e.ReportStateService.getNotebook().then(function(t){e._savedNotebook=t})})},PlatformHeaderNavContainerController.prototype.$onDestroy=function(){this.lastSuccessfulRunTokenSubscription&&this.lastSuccessfulRunTokenSubscription.unsubscribe(),this.reportRunsLinkSubscription&&this.reportRunsLinkSubscription.unsubscribe(),this.starOptionSubscription&&this.starOptionSubscription.unsubscribe()},PlatformHeaderNavContainerController.prototype.handleExternalBadgeClick=function(e){this.ClientDataService.updateAccountPreference({hidden_banners:{external_sharing:!1}})},PlatformHeaderNavContainerController.prototype.handleBreadcrumbClick=function(e,t){this.hasMobileMenu(t)&&(e.preventDefault(),this.toggleMobileMenu())},PlatformHeaderNavContainerController.prototype.toggleMobileMenu=function(){var e=this;this.$timeout(function(){e._mobileMenuIsOpen=!e._mobileMenuIsOpen})},PlatformHeaderNavContainerController.prototype.toggleReportUserStar=function(){this.ReportDataService.toggleReportUserStar()},PlatformHeaderNavContainerController.prototype.handleMobileMenuToggle=function(e){this._mobileMenuIsOpen=e},PlatformHeaderNavContainerController.prototype.hasMobileMenu=function(e){return e===xs.Page&&this.breakpoint===Vo.Small},Object.defineProperty(PlatformHeaderNavContainerController.prototype,"mobileMenuIsOpen",{get:function(){return this._mobileMenuIsOpen},enumerable:!0,configurable:!0}),PlatformHeaderNavContainerController.prototype.isRelativeMode=function(){return this.panelDisplayMode===Uo.Relative},PlatformHeaderNavContainerController.prototype.isFullMode=function(){return this.panelDisplayMode===Uo.Full},PlatformHeaderNavContainerController.prototype.shamefullyPatchOptionsStream=function(e){var t=this;switch(this.menuType){case po.Report:var n=function(e){return t.DatasetService.datasetsAreExportable()},r=this._savedNotebook&&this._savedNotebook._resource.links("export").$expand({markdown_comments:!1,cell_headers:!1})||"#",o=!!this._savedNotebook;return e.update("[Report] ExportAll",function(e){return e.update("enabled",n)}).update("[Report] ExportPython",function(e){return e.update("href",function(e){return r})}).update("[Report] ExportPython",function(e){return e.update("enabled",function(e){return o})});case po.Editor:var i=function(e){return e&&t.ReportSaveService.reportHasChanged()};return e.update("[Report] Save",function(e){return e.update("enabled",i)})}return e},PlatformHeaderNavContainerController.prototype.handleDefinitionCreated=function(e){e&&(this.$window.location.href=e)},PlatformHeaderNavContainerController.prototype.handleDefinitionUpdate=function(e){this.storeLegacy.dispatch(Object(ai.h)(e))},PlatformHeaderNavContainerController.prototype.handleDefinitionDelete=function(){this.DefinitionRunDataService.deleteSelectedDefinition()},PlatformHeaderNavContainerController.prototype.handleSimpleShare=function(){this.onSimpleShare&&this.onSimpleShare()},PlatformHeaderNavContainerController.prototype.handleViewDetails=function(){this.$state.go("reportShow.reports.details")},PlatformHeaderNavContainerController.prototype.handleViewReport=function(){this.$state.go("reportShow.reports")},PlatformHeaderNavContainerController.prototype.handleSave=function(){this.ReportDataService.updateReportWithAlertAndRefreshPreview()},PlatformHeaderNavContainerController.prototype.handleSync=function(e){switch(this.menuType){case po.Editor:this.ReportDataService.saveAndSync(e);break;case po.DefinitionEditor:this.DefinitionRunDataService.saveAndSync(e)}},PlatformHeaderNavContainerController.prototype.handleRunReport=function(){var e=r.element(".run-parameters form#report-form",this.$window.document);this._reportRunsLink?e.length?e.submit():this.ReportRunDataService.runReport(this._lastSuccessfulRunToken,this._reportRunsLink):this.$log.error("Failed to run report. Run link unavailable")},PlatformHeaderNavContainerController.prototype.handleReportSpaceTransfer=function(e){this.ReportDataService.updateSelectedReportSpace(e)},PlatformHeaderNavContainerController.$inject=["$state","$timeout","$window","$log","AccountModel","DataSourceModel","OrgModel","ReportModel","ReportRunModel","SpaceModel","RxStoreService","StoreService","ClientDataService","DefinitionRunDataService","DataSourceService","DatasetService","FeatureToggleService","ReportDataService","ReportRunDataService","ReportSaveService","ReportStateService"],PlatformHeaderNavContainerController}(),Es={controller:Ds,controllerAs:"ctrl",bindings:{breadcrumbs:"<",displayMode:"<",onBreadcrumbClick:"&"},template:'\n    <div class="platform-header-breadcrumbs">\n      <ul class="crumb-list">\n        <li class="crumb-item"\n            ng-repeat="breadcrumb in ctrl.breadcrumbs"\n            ng-if="breadcrumb.name">\n          <a class="crumb-link"\n             ng-click="ctrl.handleBreadcrumbClick($event, breadcrumb.type)"\n             ng-if="!breadcrumb.self"\n             ng-href="{{breadcrumb.href}}">\n            <span class="crumb-text">\n              {{ breadcrumb.name }}\n              <i class="crumb-item--menu-icon icon-org-menu-caret"\n                 ng-if="ctrl.displayMode === \''+uo.Dropdown+"' && breadcrumb.type === '"+xs.Page+'\'">\n              </i>\n            </span>\n          </a>\n          <a class="crumb-link"\n             rel="noopener noreferrer"\n             target="_self"\n             ng-click="ctrl.handleBreadcrumbClick($event, breadcrumb.type)"\n             ng-if="breadcrumb.self"\n             ng-href="{{breadcrumb.href}}">\n            <span class="crumb-text">\n              {{ breadcrumb.name }}\n            </span>\n          </a>\n          <span class="crumb-separator"\n                ng-if="$index < ctrl.breadcrumbs.length - 1">\n            <i class="icon-tree-caret-default"></i>\n          </span>\n        </li>\n      </ul>\n    <div>\n  '};r.module("mode.components").component("platformHeaderBreadcrumb",Es);var js,Os=function(){function PlatformHeaderAvatarController(){}return PlatformHeaderAvatarController.$inject=[],PlatformHeaderAvatarController}();!function(e){e.Community="community"}(js||(js={}));var Ps={controller:Os,controllerAs:"ctrl",bindings:{avatar:"<",size:"@"},template:'\n    <div class="platform-header-avatar">\n      <a class="avatar"\n         target="_self"\n         ng-href="{{ctrl.avatar.targetUrl}}"\n         rel="noopener noreferrer">\n      \n        <div ng-if="ctrl.avatar.type === \''+Nt.a.Initials+'\'"\n          class="mode-avatar mode-avatar-initials mode-icon-{{ctrl.size}} {{ctrl.avatar.colorClass}}">\n          {{ctrl.avatar.initials}}\n        </div> \n        \n        <div ng-if="ctrl.avatar.type === \''+js.Community+'\'"\n          class="mode-avatar mode-avatar-initials mode-icon-{{ctrl.size}} ">\n          <i class="icon-community-blue-24"></i>\n        </div>\n        \n        <img\n          ng-if="ctrl.avatar.type === \''+Nt.a.Uploaded+"' || ctrl.avatar.type === '"+Nt.a.Gravatar+'\'"\n          class="avatar-image"\n          alt="{{ctrl.avatar.name}}"\n          ng-src="{{ctrl.avatar.imageSrc}}" />\n          \n      </a>\n    </div>\n  '};r.module("mode.components").component("platformHeaderAvatar",Ps);var Fs={controller:mo,controllerAs:"ctrl",bindings:{account:"<",options:"<",datasource:"<",datasources:"<",defaultCommitMessageText:"<",displayMode:"<",expectedRuntime:"<",hasUnsyncedChanges:"<",lastSyncedAt:"<",mobileMenuIsOpen:"<",navType:"<",onDefinitionCreated:"&",onDefinitionUpdate:"&",onDefinitionDelete:"&",onNavItemClick:"&",onMobileMenuToggle:"&",onReportSpaceTransfer:"&",onRunReport:"&",onSimpleShare:"&",onViewDetails:"&",onViewReport:"&",onSaveClick:"&",onSyncClick:"&",organizations:"<",owner:"<",popOverEnabled:"<",report:"<",reportRun:"<",reportRunAt:"<",reportSpace:"<",selectedDefinition:"<",staleRunAtEnabled:"<"},template:'\n    <div class="platform-header-nav">\n\n      \x3c!-- Menu Begins --\x3e\n      <div ng-hide="ctrl.displayMode !== \''+uo.Menu+'\'">\n      <ul class="nav-list" ng-if="ctrl.navType === \''+po.Report+'\'">\n        \x3c!-- Visible Option Link Begins --\x3e\n        \x3c!-- @todo move logic out of directives and handle in PlatformHeaderComponent --\x3e\n        <li class="nav-item"\n            data-app-action-id="{{ctrl.resolveOption(option).get(\'id\')}}"\n            ng-repeat="option in ctrl.orderedVisibleOptionsArray track by ctrl.resolveOption(option).get(\'id\')"\n            ng-class="{disabled: !ctrl.resolveOption(option).isEnabled()}"\n            ng-if="ctrl.resolveOption(option).isGranted()">\n\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] ViewDetails\')" ng-click="ctrl.handleViewDetailsClick($event)">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] ViewReport\')" ng-click="ctrl.handleViewReportClick($event)">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Edit\')" ng-href="{{option.href}}" target="_self">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Share\')"\n             share-modal\n             report="ctrl.report"\n             report-run="ctrl.reportRun"\n             owner="ctrl.owner"\n             account="ctrl.account"\n             details-link="ctrl.handleOpenViewDetails()"\n             social="true">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] SimpleShare\')"\n             ng-click="ctrl.handleSimpleShareClick($event)">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Subscribe\')"\n             schedules-modal\n             report="ctrl.report"\n             report-run="ctrl.reportRun"\n             account="ctrl.account"\n             owner="ctrl.owner">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Clone\')"\n             clone-modal\n             account="ctrl.account"\n             owner="ctrl.owner"\n             orgs="ctrl.organizations"\n             report-run="ctrl.reportRun"\n             report-space="ctrl.reportSpace"\n             current-context="{{ctrl.owner && ctrl.owner.token}}"\n             clone-path="{{ctrl.getClonePath()}}">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] CloneLoggedOut\')"\n             clone-modal\n             account="ctrl.account"\n             orgs="ctrl.organizations"\n             report-run="ctrl.reportRun"\n             report-space="ctrl.reportSpace"\n             current-context="{{ctrl.owner && ctrl.owner.token}}"\n             logged-out="true"\n             clone-path="{{ctrl.getClonePath()}}">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Embed\')"\n             embed-modal\n             report="ctrl.report"\n             report-run="ctrl.reportRun"\n             owner="ctrl.owner">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Fullscreen\')" fullscreen-buttons ng-click="ctrl.enterFullScreen()">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] ExportAll\')"\n             ng-href="{{option.get(\'href\')}}"\n             target="_self"\n             uib-tooltip="Export to CSV"\n             tooltip-placement="bottom">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n\n          \x3c!-- Nested Option Template Begins --\x3e\n          <div uib-dropdown dropdown-append-to-body class="nav-link-container" ng-if="ctrl.optionHasChildren(option)">\n            <a uib-dropdown-toggle href="#" class="dropdown-toggle nav-link nav-link-dropdown">\n              <span class="nav-link-text">{{ ctrl.getIndexOption(option).get(\'name\') }}</span>\n            </a>\n            <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-left platform-header-more-menu">\n              <li ng-repeat="childOption in ctrl.getChildrenOptionsAsArray(option)"\n                  ng-class="{disabled: !childOption.isEnabled()}"\n                  data-app-action-id="{{childOption.get(\'id\')}}"\n                  ng-if="childOption.isGranted()">\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] Export\') && ctrl.optionIs(childOption, \'[Report] ExportCsv\')"\n                   target="_self"\n                   ng-href="{{ childOption.get(\'href\') }}">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] Export\') && ctrl.optionIs(childOption, \'[Report] ExportPdf\')"\n                   pdf-export\n                   report="ctrl.report"\n                   report-run="ctrl.reportRun">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] Export\') && ctrl.optionIs(childOption, \'[Report] ExportPdfDownload\')"\n                   target="_self"\n                   ng-href="{{ childOption.get(\'href\') }}"\n                   ng-class="{disabled: !childOption.isEnabled()}">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] Export\') && ctrl.optionIs(childOption, \'[Report] ExportPython\')"\n                   target="_self"\n                   ng-href="{{ childOption.get(\'href\') }}"\n                   ng-class="{disabled: !childOption.isEnabled()}">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n              </li>\n            </ul>\n          </div>\n          \x3c!-- @Nested Option Template Ends--\x3e\n\n        </li>\n        \x3c!-- @Visible Option Ends --\x3e\n\n        <li uib-dropdown dropdown-append-to-body class="nav-item dropdown" ng-if="ctrl.orderedOverflowOptions.size" is-open="dropOpen">\n          <a uib-dropdown-toggle href="#" class="dropdown-toggle nav-link nav-link-dropdown">\n            <span class="nav-link-text">More</span>\n          </a>\n          <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-left platform-header-more-menu">\n            <li ng-repeat="option in ctrl.orderedOverflowOptionsArray"\n                ng-class="{disabled: !option.isEnabled()}"\n                data-app-action-id="{{option.get(\'id\')}}"\n                ng-if="option.isGranted()">\n\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] Clone\')"\n                 clone-modal\n                 account="ctrl.account"\n                 orgs="ctrl.organizations"\n                 owner="ctrl.owner"\n                 report-run="ctrl.reportRun"\n                 report-space="ctrl.reportSpace"\n                 current-context="{{ctrl.owner && ctrl.owner.token}}"\n                 clone-path="{{ctrl.getClonePath()}}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] CloneLoggedOut\')"\n                 clone-modal\n                 account="ctrl.account"\n                 orgs="ctrl.organizations"\n                 report-run="ctrl.reportRun"\n                 report-space="ctrl.reportSpace"\n                 current-context="{{ctrl.owner && ctrl.owner.token}}"\n                 logged-out="true"\n                 clone-path="{{ctrl.getClonePath()}}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] Embed\')"\n                 embed-modal\n                 report="ctrl.report"\n                 report-run="ctrl.reportRun"\n                 owner="ctrl.owner">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] Fullscreen\')" fullscreen-buttons ng-click="ctrl.enterFullScreen()">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n\n            </li>\n          </ul>\n        </li>\n        <li class="nav-item nav-divider" ng-if="ctrl.reportRunAt">\n          <span class="nav-divider">&bullet;</span>\n        </li>\n        <li class="nav-item" ng-if="ctrl.reportRunAt">\n          <span ng-if="!ctrl.popOverEnabled">\n            Run <span am-time-ago="ctrl.reportRunAt"></span>\n          </span>\n          <promo-popover-link\n            ng-if="ctrl.popOverEnabled"\n            org-username="ctrl.owner.username"\n            org-id="ctrl.owner.id"\n            placement="bottom">\n            <span ng-class="{\'nav-item-warn\': ctrl.staleRunAtEnabled && ctrl.reportRunIsStale()}">\n              Run <span am-time-ago="ctrl.reportRunAt"></span>\n            </span>\n          </promo-popover-link>\n        </li>\n        <li class="nav-item" ng-if="ctrl.options.get(\'[Report] Run\').isGranted()" data-app-action-id="{{ctrl.options.get(\'[Report] Run\').get(\'id\')}}">\n          <a class="nav-link nav-run-link"\n             uib-tooltip="{{ ctrl.runButtonTooltipText(ctrl.options.get(\'[Report] Run\').isEnabled()) }}"\n             tooltip-placement="bottom"\n             tooltip-append-to-body="true"\n             tooltip-class="tooltip-pre-wrap"\n             ng-click="ctrl.handleRunReportClick($event)"\n             ng-disabled="!ctrl.options.get(\'[Report] Run\').isEnabled()">\n            <i class="run-arrow"></i>\n            <span class="nav-link-text">{{ ctrl.options.get(\'[Report] Run\').get(\'name\') }}</span>\n          </a>\n        </li>\n\n      </ul>\n\n      \x3c!-- TODO Consider making this a separate component --\x3e\n      <ul class="nav-list" ng-if="ctrl.navType === \''+po.Editor+'\'">\n        \x3c!-- Visible Option Link Begins --\x3e\n        \x3c!-- @todo move logic out of directives and handle in PlatformHeaderComponent --\x3e\n        <li class="nav-item"\n            data-app-action-id="{{ctrl.resolveOption(option).get(\'id\')}}"\n            ng-repeat="option in ctrl.orderedVisibleOptionsArray track by ctrl.resolveOption(option).get(\'id\')"\n            ng-class="{disabled: !ctrl.resolveOption(option).isEnabled()}"\n            ng-if="ctrl.resolveOption(option).isGranted()">\n\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] ViewReport\')"\n             save-report-alert\n             report="ctrl.report"\n             ng-href="{{ ctrl.report.share }}"\n             target="_blank"\n             rel="noopener">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Share\')"\n             share-modal\n             report="ctrl.report"\n             report-run="ctrl.reportRun"\n             owner="ctrl.owner"\n             account="ctrl.account"\n             details-link="ctrl.handleOpenViewDetails()"\n             in-editor="true"\n             social="true">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Embed\')"\n             embed-modal\n             report="ctrl.report"\n             report-run="ctrl.reportRun"\n             owner="ctrl.owner">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Schedule\')"\n             schedules-modal\n             report="ctrl.report"\n             report-run="ctrl.reportRun"\n             owner="ctrl.owner"\n             account="ctrl.account">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          \x3c!-- Nested Option Template Begins --\x3e\n          <div uib-dropdown dropdown-append-to-body class="nav-link-container" ng-if="ctrl.optionHasChildren(option)">\n            <a uib-dropdown-toggle href="#" class="dropdown-toggle nav-link nav-link-dropdown">\n              <span class="nav-link-text">{{ ctrl.getIndexOption(option).get(\'name\') }}</span>\n            </a>\n            <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-left platform-header-more-menu">\n              <li ng-repeat="childOption in ctrl.getChildrenOptionsAsArray(option)"\n                  ng-class="{disabled: !childOption.isEnabled()}"\n                  data-app-action-id="{{childOption.get(\'id\')}}"\n                  ng-if="childOption.isGranted()">\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] Clone\')"\n                   clone-modal\n                   account="ctrl.account"\n                   orgs="ctrl.organizations"\n                   owner="ctrl.owner"\n                   report-run="ctrl.reportRun"\n                   report-space="ctrl.reportSpace"\n                   current-context="{{ctrl.owner && ctrl.owner.token}}"\n                   clone-path="{{ctrl.getClonePath()}}">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] Delete\')"\n                   delete-report\n                   space="ctrl.reportSpace"\n                   report="ctrl.report">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] Settings\')"\n                   report-settings-modal\n                   report="ctrl.report"\n                   owner="ctrl.owner">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] Rename\')"\n                   rename-report\n                   report="ctrl.report">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] Move\')"\n                   move-space\n                   report="ctrl.report"\n                   account="ctrl.account"\n                   owner="ctrl.owner"\n                   on-report-space-update="ctrl.handleReportSpaceTransfer($space)">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] Save\')"\n                  ng-click="ctrl.handleSave()">\n                  <span class="hotkey">Ctrl/Cmd-S</span><span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] Sync\')"\n                  sync-to-github-modal\n                  commit-message="ctrl.defaultCommitMessageText"\n                  on-sync="ctrl.handleSync($commitMessage)">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link"\n                   ng-href="{{childOption.href}}"\n                   ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] ViewGithub\')"\n                   target="_blank">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n                <a class="nav-more-link" ng-if="ctrl.optionIs(ctrl.getIndexOption(option), \'[Report] ManageReport\') && ctrl.optionIs(childOption, \'[Report] CreateShortcut\')"\n                   shortcut-space\n                   report="ctrl.report"\n                   space="ctrl.reportSpace"\n                   owner="ctrl.owner"\n                   account="ctrl.account">\n                  <span class="nav-link-text">{{ childOption.get(\'name\') }}</span>\n                </a>\n              </li>\n            </ul>\n          </div>\n          \x3c!-- @Nested Option Template Ends--\x3e\n\n        </li>\n        \x3c!-- @Visible Option Ends --\x3e\n\n        <li uib-dropdown dropdown-append-to-body class="nav-item dropdown" ng-if="ctrl.orderedOverflowOptions.size" is-open="dropOpen">\n          <a uib-dropdown-toggle href="#" class="dropdown-toggle nav-link nav-link-dropdown">\n            <span class="nav-link-text">More</span>\n          </a>\n          <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-left platform-header-more-menu">\n            <li ng-repeat="option in ctrl.orderedOverflowOptionsArray"\n                ng-class="{disabled: !option.isEnabled()}"\n                data-app-action-id="{{option.get(\'id\')}}"\n                ng-if="option.isGranted()">\n\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] Clone\')"\n                 clone-modal\n                 account="ctrl.account"\n                 orgs="ctrl.organizations"\n                 owner="ctrl.owner"\n                 report-run="ctrl.reportRun"\n                 report-space="ctrl.reportSpace"\n                 current-context="{{ctrl.owner && ctrl.owner.token}}"\n                 clone-path="{{ctrl.getClonePath()}}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] Embed\')"\n                 embed-modal\n                 report="ctrl.report"\n                 report-run="ctrl.reportRun"\n                 owner="ctrl.owner">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] Fullscreen\')" fullscreen-buttons ng-click="ctrl.enterFullScreen()">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n            </li>\n          </ul>\n        </li>\n        <li class="nav-item nav-divider" ng-if="ctrl.options.get(\'[Report] Sync\').isGranted()">\n          <span class="nav-divider">\u2022</span>\n        </li>\n        <li class="nav-item" ng-if="ctrl.options.get(\'[Report] Sync\').isGranted()">\n          <github-sync-indicator last-synced-at="ctrl.lastSyncedAt" has-unsynced-changes="ctrl.hasUnsyncedChanges" never-synced-label="This report has not been synced">\n          </github-sync-indicator>\n        </li>\n      </ul>\n\n      \x3c!-- TODO Consider making this a separate component --\x3e\n      <ul class="nav-list" ng-if="ctrl.navType === \''+po.DefinitionEditor+'\'">\n        <li class="nav-item"\n            ng-repeat="option in ctrl.orderedVisibleOptionsArray track by option.get(\'id\')"\n            ng-class="{disabled: !option.isEnabled()}"\n            data-app-action-id="{{option.get(\'id\')}}"\n            ng-if="option.isGranted()">\n\n          \x3c!-- Visible Option Link Begins --\x3e\n          \x3c!-- @todo move logic out of directives and handle in PlatformHeaderComponent --\x3e\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Definition] Create\')"\n             create-definition\n             datasource="ctrl.datasource"\n             datasources="ctrl.datasources"\n             modal-confirm="ctrl.handleDefinitionCreated($definition)"\n             owner="ctrl.owner"\n             account="ctrl.account">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Definition] Settings\')"\n             rename-definition="ctrl.selectedDefinition"\n             account="ctrl.owner"\n             datasource="ctrl.datasource"\n             datasources="ctrl.datasources"\n             modal-title="Manage Definition"\n             modal-confirm="ctrl.handleDefinitionUpdate($definition)">\n            <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n          </a>\n          \x3c!-- @Visible Option Ends --\x3e\n\n        </li>\n\n        <li uib-dropdown dropdown-append-to-body class="nav-item dropdown" ng-if="ctrl.orderedOverflowOptions.size" is-open="dropOpen">\n          <a uib-dropdown-toggle href="#" class="dropdown-toggle nav-link nav-link-dropdown">\n            <span class="nav-link-text">More</span>\n          </a>\n          <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-left platform-header-more-menu">\n            <li ng-repeat="option in ctrl.orderedOverflowOptionsArray"\n                ng-class="{disabled: !option.isEnabled()}"\n                data-app-action-id="{{option.get(\'id\')}}"\n                ng-if="option.isGranted()">\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Definition] Sync\')"\n                 sync-to-github-modal\n                 commit-message="ctrl.defaultCommitMessageText"\n                 on-sync="ctrl.handleSync($commitMessage)">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Definition] ViewGithub\')"\n                 ng-href="{{ option.get(\'href\') }}"\n                 target="_blank">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Definition] Delete\')"\n                 confirm-modal="Are you sure you want to delete definition {{ ctrl.selectedDefinition.name }}?"\n                 confirm-modal-on-confirm="ctrl.handleDefinitionDelete($event)"\n                 confirm-modal-button-class="btn-error"\n                 confirm-modal-button-confirm="Delete Definition"\n                 confirm-modal-button-cancel="Close"\n                 confirm-modal-title="Delete Definition">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n            </li>\n          </ul>\n        </li>\n\n        <li class="nav-item nav-divider" ng-if="ctrl.options.get(\'[Definition] Sync\').isGranted()">\n          <span class="nav-divider">\u2022</span>\n        </li>\n        <li class="nav-item" ng-if="ctrl.options.get(\'[Definition] Sync\').isGranted()">\n          <github-sync-indicator has-unsynced-changes="false" last-synced-at="ctrl.lastSyncedAt" never-synced-label="This definition has not been synced">\n          </github-sync-indicator>\n        </li>\n      </ul>\n      </div>\n      \x3c!-- @Menu Ends --\x3e\n\n      \x3c!-- Dropdown Begins --\x3e\n      <div ng-if="ctrl.displayMode === \''+uo.Dropdown+'\'">\n        <div uib-dropdown\n            dropdown-append-to-body\n            class="nav-item dropdown"\n            ng-if="ctrl.orderedDropdownOptions.size"\n            is-open="ctrl.mobileMenuIsOpen"\n            on-toggle="ctrl.handleMobileMenuToggle(open)">\n          <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-left platform-header-mobile-menu">\n            <li ng-repeat="option in ctrl.orderedDropdownOptionsArray"\n                ng-class="{disabled: !ctrl.resolveOption(option).isEnabled()}"\n                data-app-action-id="{{ctrl.resolveOption(option).get(\'id\')}}"\n                ng-if="ctrl.resolveOption(option).isGranted()">\n              <a class="nav-link"\n                 ng-click="ctrl.handleNavDropdownItemClick($event, ctrl.resolveOption(option).get(\'id\'))"\n                 ng-if="!ctrl.isInlineMobileOption(ctrl.resolveOption(option))">\n                <span class="nav-link-text" ng-if="!ctrl.optionHasChildren(option)">{{ option.get(\'name\') }}</span>\n              </a>\n\n              \x3c!-- Temporary Mobile Menu Items Begin --\x3e\n              \x3c!-- @todo (Franklin): refactor to prevent this duplication https://app.asana.com/0/0/497047490591455 --\x3e\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Embed\')"\n                 embed-modal\n                 report="ctrl.report"\n                 report-run="ctrl.reportRun"\n                 owner="ctrl.owner">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Fullscreen\')" fullscreen-buttons ng-click="ctrl.enterFullScreen()">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Clone\')"\n                 clone-modal\n                 account="ctrl.account"\n                 owner="ctrl.owner"\n                 orgs="ctrl.organizations"\n                 report-run="ctrl.reportRun"\n                 report-space="ctrl.reportSpace"\n                 current-context="{{ctrl.owner && ctrl.owner.token}}"\n                 clone-path="{{ctrl.getClonePath()}}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] CloneLoggedOut\')"\n                 clone-modal\n                 account="ctrl.account"\n                 orgs="ctrl.organizations"\n                 report-run="ctrl.reportRun"\n                 report-space="ctrl.reportSpace"\n                 current-context="{{ctrl.owner && ctrl.owner.token}}"\n                 logged-out="true"\n                 clone-path="{{ctrl.getClonePath()}}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Delete\')"\n                 delete-report\n                 space="ctrl.reportSpace"\n                 report="ctrl.report">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Settings\')"\n                 report-settings-modal\n                 report="ctrl.report"\n                 owner="ctrl.owner">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Rename\')"\n                 rename-report\n                 report="ctrl.report">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Move\')"\n                 move-space\n                 report="ctrl.report"\n                 account="ctrl.account"\n                 owner="ctrl.owner"\n                 on-report-space-update="ctrl.handleReportSpaceTransfer($space)"\n                 >\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] Save\')"\n                ng-click="ctrl.handleSave()">\n                <span class="hotkey">Ctrl/Cmd-S</span><span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] ViewGithub\') || ctrl.optionIs(option, \'[Definition] ViewGithub\')"\n                ng-href="{{option.href}}"\n                target="_blank">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] CreateShortcut\')"\n                 shortcut-space\n                 report="ctrl.report"\n                 space="ctrl.reportSpace"\n                 owner="ctrl.owner"\n                 account="ctrl.account">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.navType === \''+po.Editor+'\' && ctrl.optionIs(option, \'[Report] ViewReport\')"\n                 save-report-alert\n                 report="ctrl.report"\n                 ng-href="{{ ctrl.report.share }}"\n                 target="_blank"\n                 rel="noopener">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              \x3c!-- @Temporary Editor Mobile Menu Items End --\x3e\n\n              \x3c!-- Temporary Report Mobile Menu Items Begin --\x3e\n              \x3c!-- @todo (Franklin): refactor to prevent this duplication https://app.asana.com/0/0/497047490591455 --\x3e\n              <a class="nav-link" ng-if="ctrl.navType === \''+po.Report+'\' && ctrl.optionIs(option, \'[Report] ViewReport\')" ng-click="ctrl.handleViewReportClick($event)">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-link" ng-if="ctrl.optionIs(option, \'[Report] Edit\')" ng-href="{{option.href}}" target="_self">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] ExportCsv\')"\n                 target="_self"\n                 ng-href="{{ option.get(\'href\') }}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] ExportPdf\')"\n                 pdf-export\n                 report="ctrl.report"\n                 report-run="ctrl.reportRun">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] ExportPdfDownload\')"\n                 target="_self"\n                 ng-href="{{ option.get(\'href\') }}"\n                 ng-class="{disabled: !option.isEnabled()}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              <a class="nav-more-link" ng-if="ctrl.optionIs(option, \'[Report] ExportPython\')"\n                 target="_self"\n                 ng-href="{{ option.get(\'href\') }}"\n                 ng-class="{disabled: !option.isEnabled()}">\n                <span class="nav-link-text">{{ option.get(\'name\') }}</span>\n              </a>\n              \x3c!-- @Temporary Report Mobile Menu Items End --\x3e\n\n            </li>\n          </ul>\n        </div>\n\n      </div>\n      \x3c!-- @Dropdown Ends --\x3e\n    </div>\n  '};r.module("mode.components").component("platformHeaderNav",Fs);var zs={controller:Ns,controllerAs:"ctrl",bindings:{breakpoint:"<",menuType:"<",navDisplayMode:"<",onSimpleShare:"&?",panelDisplayMode:"<"},template:'\n    <platform-header-avatar\n      avatar="ctrl.orgAvatar$ | async:this"\n      size="30" />\n\n    \x3c!-- Relative Nav Panel Container --\x3e\n    <div class="platform-header-nav-container relative"\n         ng-if="ctrl.isRelativeMode()" >\n      <platform-header-breadcrumb breadcrumbs="ctrl.relativeBreadcrumbs$ | async:this" />\n    </div>\n\n    \x3c!-- Full Nav Panel Container--\x3e\n    <div class="platform-header-nav-container full"\n         ng-if="ctrl.isFullMode()">\n      <platform-header-breadcrumb\n        breadcrumbs="ctrl.breadcrumbs$ | async:this"\n        on-breadcrumb-click="ctrl.handleBreadcrumbClick($event, $type)"\n        display-mode="ctrl.navDisplayMode" />\n\n      \x3c!-- Platform Header Badges --\x3e\n      <div class="platform-header-badges"\n           ng-if="ctrl.sharingBannerHidden$ | async:this">\n        <a class="header-badge"\n           ng-if="ctrl.reportIsExternal$ | async:this"\n           ng-click="ctrl.handleExternalBadgeClick($event)" >\n          <i class="icon-ext-share-small"></i>\n          <span class="header-badge--text">External</span>\n        </a>\n      </div>\n\n      \x3c!-- Dirty state flag --\x3e\n      <div class="platform-header-dirty-state" ng-if="ctrl.ReportSaveService.reportHasChanged()">\n        <div class="dirty-flag"\n          uib-tooltip-html="\'There are unsaved changes.<br />Ctrl/Cmd-S to save.\'"\n          tooltip-append-to-body="true"\n          tooltip-placement="bottom"></div>\n      </div>\n\n      \x3c!-- Report star --\x3e\n      <div class="platform-header-star" ng-if="ctrl.starOption && ctrl.starOption.isGranted()">\n        <report-user-star\n          user-star="ctrl.reportUserStar$ | async:this"\n          on-star-clicked="ctrl.toggleReportUserStar({ $event })">\n        </report-user-star>\n      </div>\n\n      <platform-header-nav\n        account="ctrl.account$ | async:this"\n        options="ctrl.menuOptions$ | async:this"\n        default-commit-message-text="ctrl.defaultCommitMessageText$ | async:this"\n        datasource="ctrl.DataSourceService.selectedDataSource"\n        datasources="ctrl.orgDatasources$ | async:this"\n        expected-runtime="ctrl.expectedRuntime$ | async:this"\n        has-unsynced-changes="ctrl.ReportSaveService.reportHasChanged() || (ctrl.hasUnsyncedChanges$ | async:this)"\n        last-synced-at="ctrl.lastSyncedAt$ | async:this"\n        mobile-menu-is-open="ctrl.mobileMenuIsOpen"\n        nav-type="ctrl.menuType"\n        display-mode="ctrl.navDisplayMode"\n        on-definition-created="ctrl.handleDefinitionCreated($redirectLink)"\n        on-definition-update="ctrl.handleDefinitionUpdate($definitionModel)"\n        on-definition-delete="ctrl.handleDefinitionDelete()"\n        on-mobile-menu-toggle="ctrl.handleMobileMenuToggle($isOpen)"\n        on-report-space-transfer="ctrl.handleReportSpaceTransfer($space)"\n        on-run-report="ctrl.handleRunReport()"\n        on-view-details="ctrl.handleViewDetails()"\n        on-view-report="ctrl.handleViewReport()"\n        on-simple-share="ctrl.handleSimpleShare()"\n        on-save-click="ctrl.handleSave()"\n        on-sync-click="ctrl.handleSync($commitMessage)"\n        organizations="ctrl.orgs$ | async:this"\n        owner="ctrl.orgContext$ | async:this"\n        pop-over-enabled="ctrl.businessUpsellEnabled$ | async:this"\n        report="ctrl.report$ | async:this"\n        report-run="ctrl.reportRun$ | async:this"\n        report-run-at="ctrl.reportRunAt$ | async:this"\n        report-space="ctrl.reportSpace$ | async:this"\n        selected-definition="ctrl.selectedDefinition$ | async:this"\n        stale-run-at-enabled="ctrl.modeStudioEnabled$ | async:this" />\n    </div>\n  '};r.module("mode.components").component("platformHeaderNavPanel",zs);var _s=n("famc"),$s=n.n(_s),Bs=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i,Vs=w()("meta[name=owner-username]").attr("content"),Us={bindings:{token:"@",account:"<?"},controller:function(){function EditColorPaletteController(e,t,n,r,o,i,a){this.$scope=e,this.$element=t,this.ColorPaletteModel=n,this.AccountModel=r,this.ModeCollection=o,this.AlertService=i,this.$q=a,this.paletteTypes=yr.d,this.defaultPreviewColor=yr.o}return EditColorPaletteController.prototype.$onInit=function(){this.account||this.getAccount(Vs),this.token?this.getColorPalette(this.token):this.palette={palette_type:"categorical"}},EditColorPaletteController.prototype.updateDefaultColors=function(){switch(this.palette.palette_type){case"categorical":this.palette.value="";break;case"divergent":this.startColor="",this.middleColor=yr.p,this.endColor="",this.palette.value=""}},EditColorPaletteController.prototype.getAccount=function(e){var t=this;this.AccountModel.find({username:e,useEntryPath:!0,refresh:!0,includes:["new_color_palette"]}).then(function(e){t.account=e})},EditColorPaletteController.prototype.getColorPalette=function(e){var t=this;this.ColorPaletteModel.find({account:Vs,token:this.token,useEntryPoint:!0}).then(function(e){if(t.palette=e,t.$element.find("#color-input").tokenfield("setTokens",e.value),"divergent"===t.palette.palette_type){var n=t.palette.value.split(",");t.startColor=y.trim(y.first(n)),t.endColor=y.trim(y.last(n)),t.middleColor=y.trim(n[1])}})},EditColorPaletteController.prototype.paletteLength=function(){return this.palette&&this.palette.value?this.palette.value.split(",").length:0},EditColorPaletteController.prototype.paletteColorAtIndex=function(e){return this.palette&&this.palette.value&&this.palette.value.split(",")[e]||yr.o},EditColorPaletteController.prototype.paletteIsValid=function(){return!!this.palette&&(!!this.palette.name&&("categorical"===this.palette.palette_type?!!this.palette.value&&(this.palette.name.length&&this.palette.value.split(",").length>1):"divergent"===this.palette.palette_type?this.palette.name.length&&Bs.test(this.startColor)&&Bs.test(this.endColor):void 0))},EditColorPaletteController.prototype.saveColorPalette=function(){var e=this;"divergent"===this.palette.palette_type&&(this.palette.value=this.startColor+","+yr.p+","+this.endColor),this.palette.token?this.ColorPaletteModel.update(this.palette).then(function(t){window.location.href=e.account.colorPalettesLink}).catch(function(t){e.AlertService.error("Error saving palette")}):this.ColorPaletteModel.create({account:Vs,params:{"color_palette.name":this.palette.name,"color_palette.palette_type":this.palette.palette_type,"color_palette.value":this.palette.value}}).then(function(t){window.location.href=e.account.colorPalettesLink}).catch(function(t){e.AlertService.error("Error saving palette")})},EditColorPaletteController.prototype.colorAdded=function(e,t){Bs.test(e.attrs.value)?w()(e.relatedTarget).prepend('\n        <span class="swatch-container">\n          <span class="swatch" style="background-color: '+e.attrs.value+'"></span>\n        </span>\n      '):w()(e.relatedTarget).addClass("invalid")},EditColorPaletteController.prototype.colorCreating=function(e,t){if(!Bs.test(e.attrs.value))return e.preventDefault(),!1;"#"!==e.attrs.value.charAt(0)&&(e.attrs.value="#"+e.attrs.value,e.attrs.label=e.attrs.value)},EditColorPaletteController.prototype.updateStartColor=function(){Bs.test(this.startColor)||(this.startColor="")},EditColorPaletteController.prototype.updateEndColor=function(){Bs.test(this.endColor)||(this.endColor="")},EditColorPaletteController.$inject=["$scope","$element","ColorPaletteModel","AccountModel","ModeCollection","AlertService","$q"],EditColorPaletteController}(),controllerAs:"ctrl",template:'\n    <label class="control-label">Details</label>\n    <div class="well">\n      <div class="details-container">\n        <span>Name (4-64)</span>\n        <input type="text" class="form-control" ng-model="ctrl.palette.name" />\n      </div>\n      <div ng-if="!ctrl.token" class="details-container">\n        <span>Palette Type</span>\n        <select\n          class="form-control"\n          ng-model="ctrl.palette.palette_type"\n          ng-options="type.id as type.name for type in ctrl.paletteTypes"\n          ng-change="ctrl.updateDefaultColors()"\n        ></select>\n      </div>\n      <div ng-if="ctrl.token" class="details-container">\n        <span>Palette Type</span>\n        <div class="form-control palette-type">{{ctrl.palette.palette_type}}</div>\n      </div>\n    </div>\n    <br />\n    <label class="control-label">Color Values</label>\n    <div class="well">\n      <div class="color-input-container" ng-show="ctrl.palette.palette_type === \'categorical\'">\n        <p>Hex Codes (2-20)</p>\n        <input\n          id="color-input"\n          type="text"\n          class="form-control form-control-sm"\n          ng-model="ctrl.palette.value"\n          autocomplete="off"\n          tokenfield\n          writable="true"\n          on-token-creating="ctrl.colorCreating($event, $tokens)"\n          on-token-created="ctrl.colorAdded($event, $tokens)" />\n      </div>\n      <div class="divergent-container" ng-if="ctrl.palette.palette_type === \'divergent\'">\n        <div class="divergent-input-headers">\n          <span>Hex Code</span>\n          <span>Hex Code</span>\n        </div>\n        <div class="divergent-inputs">\n\n          <div class="input-container left">\n            <input\n              id="color-input-1"\n              type="text"\n              spellcheck="false"\n              class="form-control form-control-sm"\n              ng-blur="ctrl.updateStartColor()"\n              ng-model="ctrl.startColor" />\n\n              <div class="swatch-container">\n                <span\n                class="divergent-color-swatch"\n                ng-style="{\'background-color\': ctrl.startColor}">\n                </span>\n              </div>\n            </div>\n\n            <div class="gradient-container">\n              <span class="divergent-gradient"\n              ng-style="{\'background\':\'linear-gradient(to right,\' + {{ ctrl.startColor || DEFAULT_PALETTE_PREVIEW_COLOR }} + \',\' + ctrl.middleColor  + \',\' + {{ ctrl.endColor || DEFAULT_PALETTE_PREVIEW_COLOR }} + \')\'}">\n              </span>\n            </div>\n\n            <div class="input-container right">\n              <div class="swatch-container">\n                <span\n                class="divergent-color-swatch"\n                ng-style="{\'background-color\': ctrl.endColor}">\n                </span>\n              </div>\n\n              <input\n                id="color-input-2"\n                type="text"\n                spellcheck="false"\n                class="form-control form-control-sm"\n                ng-blur="ctrl.updateEndColor()"\n                ng-model="ctrl.endColor" />\n            </div>\n          <br>\n        </div>\n      </div>\n      <div class="svg-preview-container" ng-if="ctrl.palette.palette_type === \'categorical\'">\n        <div class="svg-preview">\n          '+$s.a+'\n        </div>\n      </div>\n      <button type="submit" ng-disabled="!ctrl.paletteIsValid()" class="pull-right btn btn-lg btn-filled-primary save-palette" ng-click="ctrl.saveColorPalette()">Save</button>\n      <span class="clearfix"></span>\n    </div>\n  '};r.module("mode.components").component("editColorPalette",Us);var Zs=n("rmMU"),Gs=function(e){return{$inject:["AlertService"],require:"?ngModel",link:function(t,n,o,i){r.isDefined(o.stringValue)?n.data("dataset",o.stringValue):r.isDefined(i)&&t.$watch(function(){return i.$modelValue},function(e){r.isDefined(e)&&n.data("dataset",e)});var a=new Zs(n[0],{text:function(e){var t=$(e).data("dataset");if(r.isDefined(t.columns)){for(var n=[t.columns.map(function(e){return e.name}).join("\t")],o=0,i=t.content;o<i.length;o++){for(var a=i[o],s=[],c=0,d=t.columns;c<d.length;c++){var u=d[c],p=a[u.name];if("datetime"===u.type||"date"===u.type){var h=l()(p);h&&h.isValid()?(Pr.a.isUTC(p)?h.utc():h._tzm&&(h=l.a.parseZone(h)),s.push(h.format("YYYY-MM-DD HH:mm:ss"))):s.push(p)}else s.push(p)}n.push(s.join("\t"))}return n.join("\n")}return t}});a.on("success",function(n){t.$apply(function(){return e.success("Copied to clipboard")})}),a.on("error",function(n){t.$apply(function(){return e.error("Sorry, copy-and-pasting is not supported in your browser")})}),t.$on("$destroy",function(){return a.destroy()})}}};Gs.$inject=["AlertService"],r.module("mode.components").directive("clippy",Gs);var Ys=n("Lp8k"),Qs=n.n(Ys),Hs=function(){function ReportParametersController(e,t,n){var r=this;this.$element=e,this.RxStoreService=t,this.FeatureToggleService=n,this.parametersFeatureToggleAvailable=!1,this.formFields$=t.select(Ae.a.getReportRunFormFields),this.manualRunDisabled$=t.select(Ae.a.getReportManualRunDisabled),this.showRunButton$=n.featureParameterRunButtonEnabled$,this.expectedRuntime$=t.select(K.J),this.parametersEnabled$=n.featureParametersEnabled$,this.parametersEnabled$.combineLatest(this.RxStoreService.select(K.v)).takeWhile(function(){return!r.parametersFeatureToggleAvailable}).subscribe(function(e){var t=e[0];null!=e[1]&&"boolean"==typeof t&&(r.parametersFeatureToggleAvailable=!0)})}return ReportParametersController.prototype.$onInit=function(){this.isDisposed=!1},ReportParametersController.prototype.$postLink=function(){var e=this;this.RxStoreService.select(K._3).withLatestFrom(this.manualRunDisabled$,this.RxStoreService.select(Ae.a.getReportRunToken)).takeWhile(function(){return!e.isDisposed}).subscribe(function(t){var n=t[0],r=t[1],o=t[2];"boolean"!=typeof r||r||(e.$element.find("form[name='utf8']").val("\u2713"),e.$element.find("form[name='report-form']").attr("action",n),e.$element.find("form[name='report-form'] > input[name='last_run_id']").val(o),e.$element.find("form[name='report-form'] > input[name='authenticity_token']").val(w()("meta[name=csrf-token]").attr("content")))})},ReportParametersController.prototype.$onDestroy=function(){this.isDisposed=!0},ReportParametersController.prototype.handleRunClick=function(){this.$element.find("form[name='report-form']").submit()},ReportParametersController.$inject=["$element","RxStoreService","FeatureToggleService"],ReportParametersController}(),Ws={bindings:{},template:Qs.a,controller:Hs,controllerAs:"ctrl"};r.module("mode.components").component("reportParameters",Ws);r.module("mode.components").component("reportParameterField",{bindings:{field:"<",isDisabled:"<?"},template:'\n<div class="label-container">\n  <i ng-if="ctrl.field.description" class="icon-info" uib-tooltip="{{ ctrl.field.description }}" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip-class="wrapping-tooltip"></i>\n  <label for="report_run_params_{{ ctrl.field.name }}" class="control-label" title="{{ ctrl.field.human_name }}">\n    {{ ctrl.field.label }}\n  </label>\n</div>\n\n<select ng-if="ctrl.field.type == \'select\' && !ctrl.isDisabled"\n  id="report_run_params_{{ ctrl.field.name }}"\n  name="report_run[params][{{ ctrl.field.name }}]"\n  class="form-control form-control-sm next-form-control light-form form-control-block">\n\n  <option value="{{ option[1] }}"\n    label="{{ option[0] }}"\n    ng-repeat="option in ctrl.field.options"\n    ng-selected="ctrl.field.value == option[1]">\n    {{ option[0] }}\n  </option>\n</select>\n\n<select ng-if="ctrl.field.type == \'multiselect\' && !ctrl.isDisabled"\n  multiselect-dropdown="{{ ctrl.field.name}}"\n  append-to-body="true"\n  id="report_run_params_{{ ctrl.field.name }}"\n  name="report_run[params][{{ ctrl.field.name }}][]"\n  block="true"\n  class="form-control form-control-sm next-form-control light-form form-control-block"\n  classes="light-form form-control-block next-form-control"\n  select-all="true"\n  select-all-text="(Select All)"\n  select-all-value="all"\n  auto-height="584"\n  multiple="multiple"\n  multiselect-filter="true">\n  <option value="all" label="(Select All)" ng-selected="ctrl.field.value.indexOf(\'all\') >= 0">(Select All)</option>\n  <option value="{{ option[1] }}"\n    label="{{ option[0] }}"\n    ng-repeat="option in ctrl.field.options"\n    ng-selected="paramHelperFind(option[1], ctrl.field.value)">\n    {{ option[0] }}\n  </option>\n</select>\n\n<input type="text" ng-if="ctrl.field.type == \'text\' || ctrl.isDisabled"\n  ng-disabled="ctrl.isDisabled"\n  id="report_run_params_{{ ctrl.field.name }}"\n  name="report_run[params[{{ ctrl.field.name }}]]" value="{{ ctrl.field.value }}"\n  class="form-control form-control-sm next-form-control light-form form-control-block" />\n\n<input type="text" mode-date-picker="{{ ctrl.field.value }}"\n  ng-if="ctrl.field.type == \'date\' && !ctrl.isDisabled"\n  id="report_run_params_{{ ctrl.field.name }}"\n  name="report_run[params[{{ ctrl.field.name }}]]"\n  class="form-control form-control-sm next-form-control light-form form-control-block"\n  show-icon="true" />\n  ',controllerAs:"ctrl"});var qs={bindings:{disabled:"<",expectedRuntime:"<",classes:"@",onRunClick:"&"},template:'\n<button class="{{ ctrl.classes }}"\n        ng-click="ctrl.handleRunClick(!ctrl.disabled)"\n        ng-class="{ \'disabled-run-button\': ctrl.disabled }"\n        uib-tooltip="{{ ctrl.runButtonTooltipText(!ctrl.disabled) }}"\n        tooltip-placement="bottom-right">\nRun\n</button>\n  ',controller:function(){function ReportRunButtonController(){}return ReportRunButtonController.prototype.runButtonTooltipText=function(e){return e?"Usually finishes in "+l.a.duration(1e3*this.expectedRuntime).humanize():"Running this report has been disabled. It will \n continue to run on a schedule."},ReportRunButtonController.prototype.handleRunClick=function(e){e&&this.onRunClick()},ReportRunButtonController.$inject=["RxStoreService"],ReportRunButtonController}(),controllerAs:"ctrl"};r.module("mode.components").component("reportRunButton",qs);r.module("mode.components").directive("hostPortFieldFormatter",function(){return{link:function(e){var t=e.dataSourceForm["data_source[port]"];t&&e.$watch("dataSource.host",function(n,o){if(r.isDefined(n)&&null!=n){var i=n.split(":");2==i.length&&i[1].length>0&&(e.dataSource.host=i[0],e.dataSource.port=parseInt(i[1]),t.$$element.focus())}})}}});r.module("mode.components").directive("selectOnClick",function(){return{link:function(e,t){t.bind("click",function(){"INPUT"===this.nodeName?this.select():function(e){var t=window.getSelection();t.removeAllRanges();var n=document.createRange();n.selectNode(e),t.addRange(n)}(this)})}}});var Js={bindings:{dataset:"<",chartTitle:"<",toolbarEnabled:"<",sortingEnabled:"<"},controller:function(){function ViewDataGridController(e,t){this.$element=e,this.$window=t}return ViewDataGridController.prototype.$onInit=function(){},ViewDataGridController.prototype.$onChanges=function(e){var t=e.dataset&&!r.equals(e.dataset.currentValue,e.dataset.previousValue);this.dataset&&t&&(this.current&&this.current.destroy(),this.current=this.renderTable(this.getContainer(),this.dataset))},ViewDataGridController.prototype.export=function(){var e=cl.makeCsv(this.dataset);cl.saveAs(e,this.chartTitle)},ViewDataGridController.prototype.renderTable=function(e,t){for(var n=[],r=0,o=t.content;r<o.length;r++){for(var i=o[r],a=[],l=0,s=t.columns;l<s.length;l++){var d=s[l];a.push(this.getValue(d,i[d.name]))}n.push(a)}for(var u=[],p=[],h=0,g=t.columns;h<g.length;h++){d=g[h];p.push(d.name),u.push(this.makeTableColumn(d))}return new c.a(e,{data:n,columns:u,colHeaders:p,stretchH:"all",rowHeaders:!0,contextMenu:!1,columnSorting:this.sortingEnabled||!1,sortIndicator:this.sortingEnabled||!1,fillHandle:!1})},ViewDataGridController.prototype.getContainer=function(){return this.$element.find(".js-table-container").get(0)},ViewDataGridController.prototype.getValue=function(e,t){switch(e.type.name){case pl.a.Column.Type.Name.Date:var n=a.utc(t);return n.isValid()?n.format("YYYY-MM-DD HH:mm:ss"):t;default:return t}},ViewDataGridController.prototype.makeTableColumn=function(e){switch(e.type.name){default:case pl.a.Column.Type.Name.Boolean:case pl.a.Column.Type.Name.String:return{type:"text",readOnly:!0};case pl.a.Column.Type.Name.Float:return{type:"numeric",readOnly:!0,format:"0.[000000000000]"};case pl.a.Column.Type.Name.Decimal:return{type:"numeric",readOnly:!0,format:"0.["+"0".repeat(e.type.precision)+"]"};case pl.a.Column.Type.Name.Integer:return{type:"numeric",readOnly:!0};case pl.a.Column.Type.Name.Date:return{type:"text",readOnly:!0}}},ViewDataGridController.$inject=["$element","$window"],ViewDataGridController}(),controllerAs:"ctrl",template:'\n    <div class="view-data-table-container">\n      \x3c!-- Table Toolbar Begins --\x3e\n\n      <div class="view-data-table-toolbar" ng-if="ctrl.toolbarEnabled">\n        <a href="javascript:void(0)" id="viewdata-copy-to-clipboard" class="btn btn-primary-link" clippy ng-model="ctrl.dataset">Copy</a>\n        <a href class="btn btn-primary-link" ng-click="ctrl.export()">Export</a>\n      </div>\n\n      \x3c!-- @Table Toolbar Ends --\x3e\n\n      \x3c!-- Table Container Begins --\x3e\n\n      <div ng-show="ctrl.dataset.state === \'succeeded\'" class="js-table-container"></div>\n\n      \x3c!-- @Table Container Ends --\x3e\n\n      \x3c!-- Intermediary Messages Begin --\x3e\n\n      <div ng-if="ctrl.dataset.state === \'empty\'" class="error-message">\n        <div class="message">No rows in dataset</div>\n      </div>\n\n      \x3c!-- @Intermediary Messages End --\x3e\n    </div>\n  '};r.module("mode.components").component("viewDataGrid",Js);var Xs,Ks=n("tXka"),ec=n.n(Ks);!function(e){e.OpenViewDataModal="OpenViewDataModal",e.CloseViewDataModal="CloseViewDataModal"}(Xs||(Xs={}));var tc={bindings:{container:"@",readOnly:"<"},controller:function(){function ViewDataLightboxModalController(e,t,n){this.$scope=e,this.rxStoreService=t,this.modalService=n,this.isOpen=!1}return ViewDataLightboxModalController.prototype.$onInit=function(){var e=this;this.viewDataStateSubscription=this.rxStoreService.select(K._1).subscribe(function(t){t?e.handleOpen():e.handleClose()})},ViewDataLightboxModalController.prototype.$onDestroy=function(){this.viewDataStateSubscription.unsubscribe()},ViewDataLightboxModalController.prototype.handleOpen=function(){this.isOpen||(this.isOpen=!0,this.openLightbox())},ViewDataLightboxModalController.prototype.handleClose=function(){this.isOpen=!1,this.modal&&this.modal.close(!0)},ViewDataLightboxModalController.prototype.onLightboxClose=function(e){e?this.rxStoreService.dispatch({type:hl.CloseAllModals}):this.rxStoreService.dispatch({type:Xs.CloseViewDataModal})},ViewDataLightboxModalController.prototype.openLightbox=function(){var e=this;this.modal=this.modalService.openFullModal({onLightboxClose:this.onLightboxClose.bind(this),readOnly:this.readOnly},{template:ec.a,appendTo:$(this.container)}),this.rxStoreService.dispatch({type:te.a.ToggleExpandedView,expandedViewOpen:!0}),this.modal.result.catch(function(){return e.onLightboxClose(!1)})},ViewDataLightboxModalController.$inject=["$scope","RxStoreService","ModalService"],ViewDataLightboxModalController}(),controllerAs:"ctrl"};r.module("mode.components").component("viewDataLightboxModal",tc);var nc={bindings:{onDismiss:"&",readOnly:"<"},controller:function(){function ViewDataLightboxTableController(e,t,n){this.$q=e,this.rxStoreService=t,this.DataLayerFlipperService=n,this.title=null,this.dataset=null,this.errorMessage=null}return ViewDataLightboxTableController.prototype.$onInit=function(){var e=this;$("meta[name=report-owner-username]").attr("content"),$("meta[name=owner-username]").attr("content");this.viewDataState$=this.rxStoreService.select(K._2),this.chartTitle$=this.rxStoreService.select(Ae.a.getSelectedChartTitle),this.modalChartTitle$=this.rxStoreService.select(Ae.a.getSelectedModalChartTitle),this.account$=this.rxStoreService.select(K.f),this.viewDataStateWithAccount=this.viewDataState$.withLatestFrom(this.account$).map(function(t){var n=t[0];t[1];try{n.title,n.chartToken,n.queryToken;var r=n.chartType,o=n.datasets,i=o.format,a=o.model,l=o.encoding,s=(o.summary,o.complete),c=yr.a.find(function(e){return e.id===r});e.readOnly?e.title="Viewing Data":e.title=c&&c.name?"Viewing Data for "+c.name:"Viewing Data",null!=a&&null!=l&&(e.dataset=Dl.a.complete(a,l,s,i))}catch(e){console.error(e)}}).subscribe()},ViewDataLightboxTableController.prototype.onClickBreadcrumb=function(){this.rxStoreService.dispatch({type:Xs.CloseViewDataModal})},ViewDataLightboxTableController.prototype.$onDestroy=function(){this.viewDataStateWithAccount.unsubscribe()},ViewDataLightboxTableController.$inject=["$q","RxStoreService","DataLayerFlipperService"],ViewDataLightboxTableController}(),controllerAs:"ctrl",template:'\n    <lightbox-header\n      on-dismiss="ctrl.onDismiss({ $closeAll: true });"\n      viz-title="ctrl.title"\n      viz-breadcrumb="ctrl.modalChartTitle$ | async:this"\n      on-click-breadcrumb="ctrl.onClickBreadcrumb();"\n      explore-enabled="false"\n      read-only="ctrl.readOnly"\n    ></lightbox-header>\n\n    <div class="view-data-modal-table-container modal-container">\n      <view-data-grid\n        id="view-data-lightbox-table"\n        chart-title="ctrl.chartTitle$ | async:this"\n        dataset="ctrl.dataset"\n        toolbar-enabled="true"\n        sorting-enabled="true">\n      </view-data-grid>\n    </div>\n  '};r.module("mode.components").component("viewDataLightboxTable",nc);var rc={bindings:{onDismiss:"&",owner:"<"},controller:function(){function ChartLightboxController(e,t,n,r,o){this.$q=e,this.$scope=t,this.rxStoreService=n,this.DataLayerFlipperService=r,this.FeatureToggleService=o,this.v1State={viz:{type:"chart",viewVersion:2}},this.vizType="vegas",this.sidebarOpen=!0}return ChartLightboxController.prototype.$onInit=function(){var e=this.rxStoreService.select(Tl.getFocusedChart).filter(function(e){return null!=e});this.title$=this.rxStoreService.select(Ae.a.getSelectedModalChartTitle),this.token$=e.map(function(e){return e.token}),this.queryRun$=this.rxStoreService.selectWithParam(Ae.a.Parameterized.getQueryRunByChart,this.token$),this.exploreEnabled$=this.FeatureToggleService.featureExploreEnabled$,this.chartDataExportEnabled$=this.FeatureToggleService.featureChartDataExportEnabled$},ChartLightboxController.$inject=["$q","$scope","RxStoreService","DataLayerFlipperService","FeatureToggleService"],ChartLightboxController}(),controllerAs:"ctrl",template:'\n    <lightbox-header\n      explore-enabled="(ctrl.exploreEnabled$ | async:this)"\n      on-dismiss="ctrl.onDismiss();"\n      on-toggle-sidebar="ctrl.sidebarOpen = !ctrl.sidebarOpen"\n      read-only="true"\n      sidebar-open="ctrl.sidebarOpen"\n      viz-title="ctrl.title$ | async:this"\n      viz-type="ctrl.vizType"\n    ></lightbox-header>\n\n    <div pivot-resize\n         class="modal-container chart-content"\n         ng-class="{\'sidebar-enabled\': ctrl.sidebarOpen && (ctrl.exploreEnabled$ | async: this)}">\n      <chart-designer\n        token="ctrl.token$ | async:this"\n        state="ctrl.v1State"\n        query-run="ctrl.queryRun$ | async:this"\n        read-only="true"\n        with-sidebar="ctrl.sidebarOpen && (ctrl.exploreEnabled$ | async: this)"\n        on-open-sidebar="ctrl.openSidebar()"\n        community-context="ctrl.owner.user"\n        chart-data-export-enabled="ctrl.chartDataExportEnabled$ | async: this">\n      </chart-designer>\n    </div>\n  '};r.module("mode.components").component("chartLightboxContainer",rc);var oc=n("mSuT"),ic=n.n(oc),ac={bindings:{container:"@"},controller:function(){function ChartLightboxModalController(e,t,n){this.$scope=e,this.rxStoreService=t,this.modalService=n,this.isOpen=!1}return ChartLightboxModalController.prototype.$onInit=function(){var e=this;this.isOpenSubscription=this.rxStoreService.select(Tl.getModalIsOpen).subscribe(function(t){t?e.handleOpen():e.handleClose()})},ChartLightboxModalController.prototype.$onDestroy=function(){this.isOpenSubscription.unsubscribe()},ChartLightboxModalController.prototype.handleOpen=function(){this.isOpen||(this.isOpen=!0,this.openLightbox())},ChartLightboxModalController.prototype.handleClose=function(){this.isOpen=!1,this.modal&&this.modal.close()},ChartLightboxModalController.prototype.onLightboxClose=function(){this.rxStoreService.dispatch({type:gl.CloseExploration})},ChartLightboxModalController.prototype.openLightbox=function(){var e=this;this.modal=this.modalService.openFullModal({onLightboxClose:this.onLightboxClose.bind(this)},{template:ic.a,appendTo:$(this.container)}),this.modal.result.catch(function(){return e.onLightboxClose()})},ChartLightboxModalController.$inject=["$scope","RxStoreService","ModalService"],ChartLightboxModalController}(),controllerAs:"ctrl"};r.module("mode.components").component("chartLightboxModal",ac);var lc={bindings:{onDismiss:"&",exploreEnabled:"<",sidebarOpen:"<",vizTitle:"<",vizBreadcrumb:"<",vizType:"<",onToggleSidebar:"&",onClickBreadcrumb:"&",readOnly:"<"},controller:function(){return function(){}}(),controllerAs:"ctrl",template:'\n<div class="breadcrumb-container" ng-class="{\'no-explore\': !ctrl.exploreEnabled || (ctrl.vizType !== \'pivot\' && ctrl.vizType !== \'vegas\')}">\n  <span class="close-lightbox" ng-click="ctrl.onDismiss();" ng-class="{\'no-viz-title\': !ctrl.vizTitle.length}">\n    <i class="icon-org-menu-caret back-to-report-icon"></i>\n    {{ ctrl.readOnly ? \'Back to Report\' : \'Back to Editor\' }}\n  </span>\n  <div class="viz-title">\n    <div class="viz-breadcrumb" ng-if="ctrl.vizBreadcrumb && ctrl.readOnly" ng-click="ctrl.onClickBreadcrumb();">{{ctrl.vizBreadcrumb}}</div>\n    <i ng-if="ctrl.vizBreadcrumb && ctrl.readOnly" class="icon-org-menu-caret breadcrumb-separator-icon"></i>\n    <div class="secondary-breadcrumb">{{ ctrl.vizTitle }}</div>\n  </div>\n</div>\n<div class="explore-action">\n  <a href=""\n    ng-if="ctrl.exploreEnabled && (ctrl.vizType === \'pivot\' || ctrl.vizType === \'vegas\')"\n    class="icon-panel-collapse-left-default dark-bg"\n    ng-class="{\'icon-panel-collapse-left-default\': !ctrl.sidebarOpen, \'icon-panel-collapse-right-default\': ctrl.sidebarOpen}"\n    ng-click="ctrl.onToggleSidebar();">\n  </a>\n</div>\n  '};r.module("mode.components").component("lightboxHeader",lc);var sc={controller:function(){return function(){}}(),controllerAs:"ctrl",bindings:{onThemeToggled:"&",onVerticalModeToggled:"&",theme:"<",vertical:"<"},template:'\n    <a uib-dropdown-toggle href="#" id="editor-settings-dropdown-trigger" title="Toggle editor settings"><i class="icon-menu-dots-gray align-md-icon"></i></a>\n      <ul uib-dropdown-menu class="dropdown-menu pull-right" aria-labelledby="editor-settings-dropdown-trigger">\n        <li><a href="#" ng-click="ctrl.onThemeToggled()">{{ ctrl.theme === \'dark\' ? \'Light Theme\' : \'Dark Theme\' }}</a></li>\n        <li><a href="#" ng-click="ctrl.onVerticalModeToggled()">{{ ctrl.vertical ? \'Side by Side\' : \'Stacked\' }} Panels</a></li>\n      </ul>\n    </a>\n'};r.module("mode.components").component("editorSettingsDropdownMenu",sc);var cc=function(e,t){return{link:function(n,r,o){r.on("click",".push-button",function(o){t({method:"PATCH",url:n.syncUrl}).then(function(){e.success("Push started"),r.remove()},function(t){var n=t&&t.data&&t.data.message||"Push failed";e.error(n)})})},restrict:"A",scope:{syncUrl:"@"}}};cc.$inject=["AlertService","$http"],r.module("mode.components").directive("syncGithub",cc);var dc=function(e){return{link:function(t,n,r){n.on("change",function(t){e.location.href=n.val()})}}};dc.$inject=["$window"],r.module("mode.components").directive("selectNavigator",dc);var uc={bindings:{hasUnsyncedChanges:"<",lastSyncedAt:"<?",neverSyncedLabel:"@"},template:'\n<span ng-if="ctrl.lastSyncedAt">\n  Pushed <span title="{{ ctrl.preciseTimestamp() }}"\n               am-time-ago="ctrl.lastSyncedAt">\n          </span>\n</span>\n<span ng-if="!ctrl.lastSyncedAt">\n  {{ ctrl.neverSyncedLabel }}\n</span>\n<i class="icon icon-github-unsynced platform-header--unsynced-flag"\n   uib-tooltip="There are uncommitted changes."\n   tooltip-placement="bottom"\n   ng-if="ctrl.hasUnsyncedChanges"></i>\n  ',controller:function(){function GithubSyncIndicatorController(){}return GithubSyncIndicatorController.prototype.preciseTimestamp=function(){return a(this.lastSyncedAt).format("MM/DD/YYYY h:mm:ssa")},GithubSyncIndicatorController}(),controllerAs:"ctrl"};r.module("mode.components").component("githubSyncIndicator",uc);var pc=n("rOrC"),hc=n.n(pc),gc=function(e,t,n,r){return{scope:{},link:function(o,i,a){var l=$("meta[name=current-username]").attr("content"),s=$("meta[name=owner-username]").attr("content"),c=!1,d=function(e){e&&r.location.reload()};void 0===hc.a&&e.warn("ChiliPiper not connected"),$("#chili-piper-form").submit(function(e){e.preventDefault()}),t.find({username:l,useEntryPath:!0,refresh:!0,includes:["trial_appointment","new_trial_appointment"]}).then(function(e){!function(e,t,n){var r=e.split(" "),o=r[0],i=r[1];$("input.first-name").val(o),$("input.last-name").val(i),$("input.email").val(t),$("input.company-name").val(n)}(e.name,e.email,s)}).catch(function(t){e.error(t)}),i.on("click.chiliPiper",function(){var o=$(".trial-page");o.addClass("modal-open");var i={title:"Schedule a quick call to activate your trial and ask us questions.",titleStyle:"Roboto 22px #EA5938",formId:"chili-piper-form",onSuccess:function(){c=!0,t.find({username:s,useEntryPath:!0,refresh:!0,includes:["trial_appointment","new_trial_appointment"]}).then(function(t){if(t._resource)return n.create(t._resource,"new_trial_appointment",{"organization_trial_appointment.rep_name":"","organization_trial_appointment.appointment_time":Math.round((new Date).getTime()/1e3)}).catch(function(t){e.error(t)})}).catch(function(t){e.error(t)})},onClose:function(){o.removeClass("modal-open"),d(c)}};hc.a.submit("modeanalytics","in-product-mode-business",i),$(".chilipiper-popup").one("click",function(e){r.document.body.removeChild(e.target),$("body").removeClass("modal-open"),d(c)}),$(r).one("keydown",function(e){27===e.keyCode&&($(".chilipiper-popup").remove(),$("body").removeClass("modal-open"),d(c))})}),o.$on("$destroy",function(){return i.off("click.chiliPiper")})}}};gc.$inject=["$log","AccountModel","ApiService","$window"],r.module("mode.components").directive("scheduleTrial",gc);var mc={controller:ro,controllerAs:"ctrl",bindings:{theme:"@?",orgUsername:"<"},template:'\n    <a class="mode-studio-badge-wrapper"\n       target="_self"\n       rel="noopener"\n       ng-href="/organizations/{{ctrl.orgUsername}}/start_trial?trk_element_id=1">\n      <aside class="mode-studio-badge"\n             ng-if="ctrl.isEnabled$ | async:this"\n             ng-class="ctrl.getClasses()">\n        <div class="badge-wrapper">\n          <h3 class="badge-heading">Mode Studio</h3>\n          <span class="badge-subheading">Try Mode Business</span>\n        </div>\n      </aside>\n    </a>\n  '};r.module("mode.components").component("modeStudioBadge",mc);var fc={controller:function(){function ConnectDbBannerController(){}return ConnectDbBannerController.$inject=[],ConnectDbBannerController}(),controllerAs:"ctrl",bindings:{ctaLink:"<",owner:"<"},template:'\n    <aside class="connect-db-banner">\n      <div class="banner-content">\n        <figure class="banner-illo">\n          <i class="icon-add-db-green"></i>\n        </figure>\n        <div class="banner-heading-group">\n          <h3 class="banner-heading">\n            Connect your data to Mode\n          </h3>\n          <span class="banner-sub-heading">\n            Use your own database to work on problems that matter to you.\n          </span>\n        </div>\n      </div>\n      <div class="banner-controls">\n        <a ng-href="{{ ctrl.ctaLink }}"\n           connect-db-instrumentation\n           connect-db-instrumentation-element-id="7"\n           connect-db-instrumentation-org-id="{{ ctrl.owner.id }}"\n           rel="nofollow"\n           class="btn btn-lg btn-filled-primary banner-btn"\n           target="_self"\n        >Connect Database</a>\n      </div>\n    </aside>\n  '};r.module("mode.components").component("connectDbBanner",fc);var Cc=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),yc={controller:function(e){function RunnerController(t,n,r,o,i,a){var l=e.call(this)||this;return l.$rootScope=t,l.rxStore=n,l.editorService=r,l.queryDataService=o,l.reportRunDataService=i,l.modalService=a,l.limits={},l.limitsLoaded={},l}return Cc(RunnerController,e),RunnerController.prototype.$onInit=function(){var e=this;this.canCancelQueryRun$=this.rxStore.select(Ae.a.canCancelSelectedQueryRun),this.canceling$=this.rxStore.select(Ae.a.isCancelingSelectedQueryRun),this.running$=this.rxStore.select(Ae.a.isSelectedQueryRunning),this.query$=this.rxStore.select(K.F),this.queryToken$=this.query$.filter(function(e){return null!=e}).map(function(e){return e.token}),this.reportToken$=this.rxStore.select(K.S).filter(function(e){return null!=e}).map(function(e){return e.token}),this.formatDisabled$=this.query$.filter(function(e){return null!=e&&null!=e.raw_query}).map(function(e){return e.raw_query.trim().length<=0}),this.historyDisabled$=this.query$.filter(function(e){return null!=e&&null!=e.resource&&null!=e.resource.last_run_id}).map(function(e){return e.resource.last_run_id.length>0}),this.theme$=this.rxStore.select(K.e).map(function(e){return e.editor_theme});var t=this.rxStore.select(K.o);this.hasHighlighted$=t.map(function(e){return null!=e&&e.length>0}),this.reportRunDataService.selectedQueryReportRunState$.takeWhile(function(){return e.isAlive}).subscribe(function(t){t.queryRun&&!e.limitsLoaded[t.queryToken]?(e.limitsLoaded[t.queryToken]=!0,e.limits[t.queryToken]=t.queryRun.limit,e.reportRunDataService.setQueryLimits(e.limits)):!t.query||t.query.last_run_id||e.limitsLoaded[t.queryToken]||(e.limitsLoaded[t.queryToken]=!0,e.limits[t.queryToken]=!0,e.reportRunDataService.setQueryLimits(e.limits))})},RunnerController.prototype.toggleLimit=function(e){this.queryDataService.updateQueryLimit(e,this.limits[e]),this.reportRunDataService.setQueryLimits(this.limits)},RunnerController.prototype.format=function(e,t){this.queryDataService.formatQuery(e,t)},RunnerController.prototype.formatButtonText=function(e){return e&&this.queryDataService.formatUndoable(e)?"Undo Format":"Format SQL"},RunnerController.prototype.history=function(e){var t=this;this.modalService.openCustom({query:e.resource},{templateUrl:ASSET_PATHS.HISTORY_TEMPLATE,controller:"HistoryController"}).result.then(function(e){t.queryDataService.updateQueryText(e.queryRun.query_token,e.queryRun.raw_source)}).catch(function(){})},RunnerController.prototype.run=function(){var e=this.editorService.editorInstance(),t=e?e.getSelectedText():"";t?this.$rootScope.$broadcast("report.create",{selectedText:t}):this.$rootScope.$broadcast("report.create")},RunnerController.prototype.runText=function(e){return e?"Run Selected":"Run"},RunnerController.prototype.cancel=function(e){this.reportRunDataService.cancel(e)},RunnerController.$inject=["$rootScope","RxStoreService","EditorService","QueryDataService","ReportRunDataService","ModalService"],RunnerController}(q),controllerAs:"ctrl",template:'\n<div id="run_button">\n  <button ng-if="ctrl.running$ | async:this" ng-click="ctrl.cancel(ctrl.queryToken$ | async:this)" class="btn btn-filled-primary run-button" ng-disabled="!(ctrl.canCancelQueryRun$ | async:this)">Cancel</button>\n  <button ng-if="!(ctrl.running$ | async:this)" ng-click="ctrl.run()" class="btn btn-filled-primary run-button">{{ ctrl.runText(ctrl.hasHighlighted$ | async:this) }}</button>\n  <div class="limit-addon" ng-class="{unchecked: !ctrl.limits[(ctrl.queryToken$ | async:this)], running: (ctrl.running$ | async:this)}">\n    <span class="checkbox-limit checkbox-icon" ondblclick="event.stopPropagation()">\n      <input id="limit" type="checkbox" ng-model="ctrl.limits[(ctrl.queryToken$ | async:this)]" ng-change="ctrl.toggleLimit(ctrl.queryToken$ | async:this)">\n      <label for="limit" class="inline-icon icon-editor-checkbox-{{ ctrl.theme$ | async:this }}-unchecked">Limit 100</label>\n    </span>\n  </div>\n  <a href="#" ng-click="ctrl.format(ctrl.queryToken$ | async:this, ctrl.reportToken$ | async:this)" ng-disabled="ctrl.formatDisabled$ | async:this" class="btn btn-strong btn-filled-primary btn-link bordered-left">{{ ctrl.formatButtonText(ctrl.query$ | async:this) }}</a>\n  <a href="#" ng-click="ctrl.history(ctrl.query$ | async:this)" ng-disabled="ctrl.historyDisabled$ | async:this" class="btn btn-strong btn-filled-primary btn-link bordered-left">View History...</a>\n</div>\n'};r.module("mode.editor").component("reportRunner",yc);var bc=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vc={controller:function(){function SelectDbConnectController(){this.individualSelectorDbNames=["Amazon Redshift","Google BigQuery","Microsoft SQL Server","MySQL","PostgreSQL"]}return SelectDbConnectController.prototype.$onInit=function(){var e=this;this.allDbList=this.dbList.map(function(t){return bc({},t,{link:"/"+e.username+"/data_sources/"+t.provider+"/"+t.vendor+"/new"})}),this.individualDbSelectorList=this.individualSelectorDbNames.map(function(t){return Object(y.find)(e.allDbList,{name:t})})},SelectDbConnectController.$inject=[],SelectDbConnectController}(),controllerAs:"ctrl",bindings:{dbList:"<",username:"<"},template:'\n  <div class="db-list">\n    <div class="individual-db-selector">\n      <selector-list\n        db-list="ctrl.individualDbSelectorList"\n      ></selector-list>\n    </div>\n    <db-typeahead-selector\n      db-list="ctrl.allDbList"\n    ></db-typeahead-selector>\n    <div class="support-link">Database not listed? <a href intercom-show="Hi, I\'d like to request support in Mode for the following database: " intercom-email="support@modeanalytics.com" class="intercom-link new-db-request">Request support for it</a>\n  </div>'};r.module("mode.components").component("selectDbConnect",vc);var Ic={controller:function(){function SelectorListController(){}return SelectorListController.$inject=[],SelectorListController}(),controllerAs:"ctrl",bindings:{dbList:"<"},template:'\n    <div class="individual-selector-list-container">\n      <selector-item\n        ng-repeat="individualDb in ctrl.dbList"\n        selector-info="individualDb"\n        class="selector-item"\n      ></selector-item>\n    </div>'};r.module("mode.components").component("selectorList",Ic);var Sc={controller:function(){function SelectorItemController(){}return SelectorItemController.$inject=[],SelectorItemController}(),controllerAs:"ctrl",bindings:{selectorInfo:"<"},template:'\n    <a class="selector-item-link" ng-href="{{ctrl.selectorInfo.link}}">\n      <div class="selector-item-container">\n        <div class="individual-selector-name">{{ctrl.selectorInfo.name}}</div>\n        <div class="selection-arrow">&rarr;</div>\n      </div>\n    </a>'};r.module("mode.components").component("selectorItem",Sc);var wc={controller:function(){function DbTypeaheadSelectorController(e){this.$window=e,this.highlightDbLogo=!1,this.selected=""}return DbTypeaheadSelectorController.prototype.onOpenCloseMenu=function(){this.highlightDbLogo=!this.highlightDbLogo},DbTypeaheadSelectorController.prototype.redirectToDbCredentials=function(e){this.$window.location.href=e.link},DbTypeaheadSelectorController.$inject=["$window"],DbTypeaheadSelectorController}(),controllerAs:"ctrl",bindings:{dbList:"<"},template:'<div class="db-typeahead-selector">\n    <div class="all-db-copy">Or choose from a list of databases we support:</div>\n    <ui-select\n      ng-model="ctrl.selected"\n      theme="bootstrap"\n      uis-open-close="ctrl.onOpenCloseMenu()"\n      on-select="ctrl.redirectToDbCredentials($item)"\n    >\n      <ui-select-match placeholder="Search databases...">{{ $select.selected.name }}</ui-select-match>\n      <ui-select-choices repeat="dbChoice in (ctrl.dbList | filter: $select.search)">\n        <a class="db-connection-link" ng-href="{{dbChoice.link}}">\n          <div ng-bind-html="dbChoice.name | highlight: $select.search"></div>\n        </a>\n      </ui-select-choices>\n      <ui-select-no-choice>\n        No matches found. <a href intercom-show="Hi, I\'d like to request support in Mode for the following database: " intercom-email="support@modeanalytics.com" class="intercom-link new-db-request">Request support</a> for a database type.\n      </ui-select-no-choice>\n    </ui-select>\n  </div>'};r.module("mode.components").component("dbTypeaheadSelector",wc);var Ac=function(e){return{scope:!1,link:function(t,n,r){n.on("click.connectDbLink",function(){e.run(ee.c.Track,ee.a.Name.ConnectDbIntentSignaled,{interaction_type:"click",element_id:r.connectDbInstrumentationElementId,account_id:r.connectDbInstrumentationOrgId})}),t.$on("$destroy",function(){return n.off("click.connectDbLink")})}}};Ac.$inject=["AnalyticsService"],r.module("mode.components").directive("connectDbInstrumentation",Ac);var Mc=n("Uei4"),kc=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Tc="ready",xc={ready:{containerStyle:"status-ready",iconStyle:null,message:"Ready",state:Tc},cancelled:{containerStyle:"status-error status-cancelled",iconStyle:"icon-warning-small-inverted",message:"Query has been cancelled"},running:{containerStyle:"status-running",iconStyle:""},warning:{containerStyle:"status-warning",iconStyle:"icon-warning-small",message:"Database may be unavailable"},pending:{containerStyle:"status-running",iconStyle:""},failed:{containerStyle:"status-error",iconStyle:"icon-warning-small-inverted",message:"There was a problem with your query"},succeeded:{containerStyle:"status-success",iconStyle:"icon-success-check-color"}};var Dc={controller:function(e){function ReportRunStatusController(t,n,r,o){var i=e.call(this)||this;return i.rxStore=t,i.dataSourceService=n,i.$scope=r,i.$rootScope=o,i._runStatus={state:Tc,containerStyle:"status-ready",iconStyle:null},i.hasFocused$=new V.Subject,i.isReady$=new V.Subject,i.$scope.$watch("$root.focused",function(){i.$scope.focused=i.$rootScope.focused,i.hasFocused$.next(i.$scope.focused)}),i}return kc(ReportRunStatusController,e),ReportRunStatusController.prototype.$onInit=function(){var e=this;this.$rootScope.focused=!1,this.hasRunningQuery$=this.rxStore.select(Ae.a.isSelectedQueryRunning).takeWhile(function(){return e.isAlive});var t=this.rxStore.select(Ae.a.selectedQueryRunRecord).filter(function(e){return!!e}).takeWhile(function(){return e.isAlive});t.subscribe(function(t){var n,r;e.queryCreationTime=t.localCreatedAt||t.resource.created_at,"succeeded"===t.state&&(n=t.state,void 0===(r="Succeeded in "+t.timeCompleted)&&(r="Ready"),Object.assign(xc[n||Tc],{message:r})),e.status=xc[t.state]}),t.map(function(e){var t=e.state,n=e.running,r=e.warning;return!n&&!r&&!["failed","succeeded","cancelled"].includes(t)}).subscribe(function(t){return e.isReady$.next(t)}),Object(Mc.combineLatest)(t.pluck("warning").filter(function(e){return!!e}),this.hasRunningQuery$.filter(function(e){return!e})).map(function(t){var n=t[0],r=t[1];return n&&r&&e.dataSourceService.selectedDataSource&&e.dataSourceService.selectedDataSource.asleep}).filter(function(e){return e}).subscribe(function(){return e.status=xc.warning}),this.hasFocused$.filter(function(e){return e}).takeWhile(function(){return e.isAlive}).subscribe(function(t){e.status=xc.ready,e.isReady$.next(t)})},Object.defineProperty(ReportRunStatusController.prototype,"status",{get:function(){return this._runStatus},set:function(e){Object.assign(this._runStatus,e)},enumerable:!0,configurable:!0}),ReportRunStatusController.$inject=["RxStoreService","DataSourceService","$scope","$rootScope"],ReportRunStatusController}(q),controllerAs:"ctrl",template:'\n\t\t<div class="status-msg" ng-class="ctrl.status.containerStyle">\n\t\t\t<i class="status-icon" ng-class="ctrl.status.iconStyle">\n\t\t\t\t<span class="ready-icon" ng-show = "ctrl.isReady$ | async: this"></span>\n\t\t\t</i>\n\t\t\t<span class="message" ng-show = "!(ctrl.hasRunningQuery$ | async:this)">{{ctrl.status.message}}</span>\n\t\t\t<status-loader\n\t\t\t\tng-if="ctrl.hasRunningQuery$ | async:this"\n\t\t\t\tcreated-at="ctrl.queryCreationTime"\n\t\t\t\tclass="status-loader">\n\t\t\t</status-loader>\n\t\t</div>\n\t'};r.module("mode.components").component("reportRunStatus",Dc);n("k3BA");var Lc,Rc=function(){function AlertService(e,t){this.ngToast=e,this.AssetService=t}return AlertService.prototype.success=function(e){this.ngToast.create({className:"toast",content:'<img class="toast-img" alt="" src="'+this.AssetService.toastSuccess+"?"+Pr.a.generateUUID()+'" /><span>'+e+"</span>"})},AlertService.prototype.error=function(e){this.ngToast.create({className:"toast toast-error",content:'<i class="toast-img icon-fail-inverted"></i><span>'+e+"</span>"})},AlertService.$inject=["ngToast","AssetService"],AlertService}(),Nc=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Ec=function(){function ApiService(e){this.$q=e}return ApiService.prototype.getSelf=function(e,t){if(e.hasLink("self")){var n=this.getParamsHelper(t);return e.links("self").$follow(n)}return this.$q.reject(new jc(e,"self"))},ApiService.prototype.getResource=function(e,t,n){if(this.canGetEmbedded(e,t,n))return this.$q.resolve(e.embedded(t));if(e.hasLink(t)){var r=this.getParamsHelper(n);return e.links(t).$follow(r)}return this.$q.reject(new jc(e,t))},ApiService.prototype.getResources=function(e,t,n){if(this.canGetEmbedded(e,t,n))return this.$q.resolve(e.embedded(t)._embedded[n&&n.relationAs||t]);if(e.hasLink(t)){var r=this.getParamsHelper(n);return e.links(t).$follow(r).then(function(e){return e.embedded(n&&n.relationAs||t)})}return this.$q.reject(new jc(e,t))},ApiService.prototype.create=function(e,t,n){if(this.canGetEmbedded(e,t)){var r=e.embedded(t);return r.hasForm("create")?r.forms("create").$submit(n):this.$q.reject(new jc(r,"create"))}return this.$q.reject(new jc(e,t))},ApiService.prototype.canGetEmbedded=function(e,t,n){return e.hasEmbedded(t)&&(!n||!n.includes)},ApiService.prototype.getParamsHelper=function(e){var t={};return e&&e.includes&&(t.includes=e.includes),t},ApiService.$inject=["$q"],ApiService}(),jc=function(e){function NoResourceError(t,n){var r=Object(Rt.getTypeFromModeLink)(t.links("self")),o=Object(Rt.getTokenFromModeLink)(t.links("self"));return e.call(this,(r||"Resource")+" "+o+" has no link '"+n+"'")||this}return Nc(NoResourceError,e),NoResourceError}(Error);!function(e){e.LoadCharts="PersistentLoadCharts",e.LoadEmbeddedCharts="LoadEmbeddedCharts",e.LoadEmbeddedChartsSuccess="LoadEmbeddedChartsSuccess",e.LoadEmbeddedChartsFailure="LoadEmbeddedChartsFailure",e.LoadEmbeddedTables="LoadEmbeddedTables",e.LoadEmbeddedTablesSuccess="LoadEmbeddedTablesSuccess",e.LoadEmbeddedTablesFailure="LoadEmbeddedTablesFailure",e.LoadEmbeddedChartColorPaletteSuccess="LoadEmbeddedChartColorPaletteSuccess",e.LoadEmbeddedChartColorPaletteFailure="LoadEmbeddedChartColorPaletteFailure",e.UpdateChart="UpdateChart",e.UpdateChartSuccess="UpdateChartSuccess",e.UpdateChartFailure="UpdateChartFailure",e.DestroyChart="DestroyChart",e.DestroyChartSuccess="DestroyChartSuccess",e.DestroyChartFailure="DestroyChartFailure",e.AddChart="AddChart",e.AddChartSuccess="AddChartSuccess",e.AddChartFailure="AddChartFailure",e.AddTableSuccess="AddTableSuccess"}(Lc||(Lc={}));var Oc,Pc=n("3Os4"),Fc=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zc=function(){function ChartDataService(e,t,n,r,o,i,a){var l=this;this.$q=e,this.ds=t,this.store=n,this.ChartModel=r,this.wms=o,this.viewService=i,this.api=a,this.store.actions.filter(function(e){return e.type===Pc.a.LoadQueriesSuccess}).map(function(e){return e.type===Pc.a.LoadQueriesSuccess?e:null}).switchMap(function(e){for(var t=[],n=function(e){e.hasEmbedded("charts")&&t.push(l.api.getResources(e,"charts").then(function(t){return l.store.dispatch({type:Lc.LoadEmbeddedChartsSuccess,queryToken:e.token,payload:t})}).catch(function(e){return l.store.dispatch({type:Lc.LoadEmbeddedChartsFailure,error:e})})),e.hasEmbedded("query_tables")&&t.push(l.api.getResources(e,"query_tables").then(function(t){return l.store.dispatch({type:Lc.LoadEmbeddedTablesSuccess,queryToken:e.token,payload:t})}).catch(function(e){return l.store.dispatch({type:Lc.LoadEmbeddedTablesFailure,error:e})}))},r=0,o=e.queries;r<o.length;r++){n(o[r])}return l.$q.all(t)}).subscribe(),this.store.actions.filter(function(e){return e.type===ml.UpdateTitle}).map(function(e){return e.type===ml.UpdateTitle?e:null}).withLatestFrom(n.select(Ae.a.getCharts)).switchMap(function(e){var t=e[0],n=e[1].getRecord(t.chartToken),r=Fc({},n.resource.view_vegas,{title:t.title});return l.updateChart(n.resource,{view_vegas:r}).then(function(e){l.store.dispatch({type:ml.UpdateTitleSuccess,chartToken:t.chartToken,title:t.title}),l.viewService.emitPreviewUpdate("Chart",e.token,e._parent,e.view_vegas)}).catch(function(e){return l.store.dispatch({type:ml.UpdateTitleFailure,chartToken:t.chartToken,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===ml.ChangeHierarchy}).map(function(e){return e.type===ml.ChangeHierarchy?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.chartToken)}}).switchMap(function(e){e.action;var t=e.chart;if(t)return l.saveVegasChartSettings(t).then(function(e){return l.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:ml.ChangeHierarchyFailure,chartToken:t.token,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===ml.DrillDown}).map(function(e){return e.type===ml.DrillDown?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.chartToken)}}).switchMap(function(e){var t=e.action,n=e.chart;if(n)return l.saveVegasChartSettings(n).then(function(e){return l.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:ml.DrillDownFailure,chartToken:n.token,target:t.target,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===ml.Undo}).map(function(e){return e.type===ml.Undo?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.token)}}).switchMap(function(e){e.action;var t=e.chart;return l.saveVegasChartSettings(t).then(function(e){return l.store.dispatch({type:ml.UndoSuccess,resource:e})}).catch(function(e){return l.store.dispatch({type:ml.UndoFailure,token:t.token,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===ml.Redo}).map(function(e){return e.type===ml.Redo?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.token)}}).switchMap(function(e){e.action;var t=e.chart;return l.saveVegasChartSettings(t).then(function(e){return l.store.dispatch({type:ml.RedoSuccess,resource:e})}).catch(function(e){return l.store.dispatch({type:ml.RedoFailure,token:t.token,error:e})})}).subscribe(),this.wms.subscribe(this,function(e){e.type===ps.a.UpdateChartTitle&&l.store.dispatch({type:ml.UpdateTitle,chartToken:e.data.id.replace("chart_",""),title:e.data.title})},ps.a.UpdateChartTitle)}return ChartDataService.prototype.saveVegasChartSettings=function(e){var t=this;return this.updateChart(e.resource,{view_vegas:{format:e.format,title:e.title,chartType:e.chartType,encoding:e.encResult.encoding},color_palette_token:e.colorPaletteToken}).then(function(e){return t.viewService.emitPreviewUpdate("Chart",e.token,e._parent,e.view_vegas),e})},ChartDataService.prototype.updateChart=function(e,t){var n=Object.assign(new this.ChartModel.model(e),t);return this.ChartModel.update(n).then(function(e){return e._resource._parent=e.parent,e._resource})},ChartDataService.prototype.undo=function(e){this.store.dispatch({type:ml.Undo,token:e})},ChartDataService.prototype.redo=function(e){this.store.dispatch({type:ml.Redo,token:e})},ChartDataService.prototype.drillDown=function(e,t){this.store.dispatch({chartToken:e,target:t,type:ml.DrillDown})},ChartDataService.prototype.changeHierarchy=function(e,t){this.store.dispatch({type:ml.ChangeHierarchy,chartToken:e,forward:t})},ChartDataService.prototype.loadEmbeddedTables=function(e,t){this.store.dispatch({type:Lc.LoadEmbeddedTablesSuccess,payload:t,queryToken:e})},ChartDataService.prototype.loadCharts=function(e){this.store.dispatch({type:Lc.LoadCharts,payload:e})},ChartDataService.prototype.hasContent=function(e){var t=this.ds.getDatasetByKey(e);return t&&t.content&&t.content.length},ChartDataService.prototype.dataOversized=function(e){var t=this.ds.getDatasetByKey(e);return"boolean"==typeof t.oversized?t.oversized:null},ChartDataService.prototype.queryData=function(e){return this.ds.getDatasetByKey(e)},ChartDataService.prototype.datasetState=function(e){return this.ds.getDatasetState(e)},ChartDataService.$inject=["$q","DatasetService","RxStoreService","ChartModel","WindowMessageService","ViewService","ApiService"],ChartDataService}(),_c=function(){function SpaceSearchService(e,t,n,r){var o=this;this.$q=e,this.ReportModel=t,this.Search=n,this.ModeCollection=r,this.handleSearchResponse=function(e){var t=o.getIdsFromSearch(e.results[0].hits);return o.handleIdsResponse(t,e)},this.handleSearchResponseWithSpaces=function(e){var t=o.getIdsFromSearch(e.results[0].hits);return o.handleIdsResponse(t,e,{reports:["creator","star","new_star","new_space_link",{space:"creator"}]})},this.handleIdsResponse=function(e,t,n){return o.buildReportListFromIds(e,n).then(function(e){var n=null;t&&t.pins;return t&&t.results&&t.results[0]&&t.results[0].page<t.results[0].nbPages-1&&(n=t.results[0].page+1),e.forEach(function(e){var n=Object(y.find)(t.pins,function(t){return t.report_id===e.id});e.savedSpaceReportPin=n||null}),{nextPage:n,reports:e}})},this.handleArchivedResponse=function(e,t){return t.reports.length?t:o.querySpace(e).then(function(e){return e.reportLastEdited&&e.reportLastEdited.length&&(t.archivedReports=!0),t})}}return SpaceSearchService.prototype.setOwner=function(e){this.owner=e},SpaceSearchService.prototype.querySpace=function(e){return this.Search.query(e)},SpaceSearchService.prototype.querySpaceAndPinnedReports=function(e,t,n){void 0===n&&(n=!1);var r=[this.Search.query(e)];return t&&t._resource.hasLink("space_report_pins")&&r.push(t.spaceReportPins({refresh:!0}).then(this.ModeCollection.elements)),this.$q.all(r).then(this.mergeSpaceAndPinResults.bind(this,n))},SpaceSearchService.prototype.mergeSpaceAndPinResults=function(e,t){void 0===e&&(e=!1);var n=t.length>1?t[1]:[];return e&&(t[0].results[0].hits=Object(y.unionBy)(t[0].results[0].hits,n,function(e){return e.report_id||e.id})),{pins:n,results:t[0].results}},SpaceSearchService.prototype.reportModelsFromResponse=function(e){var t=this;return this.$q.all(e._embedded.reports.map(function(e){var n=new t.ReportModel.model(e);return t.ReportModel.putLocal(n)}))},SpaceSearchService.prototype.buildReportListFromIds=function(e,t){return e.ids&&e.ids.length?this.owner._resource.links("by_ids_reports").$follow({ids:e.ids,includes:t||{reports:["creator","star","new_star","new_space_link"]}}).then(this.reportModelsFromResponse.bind(this)):this.$q.resolve([])},SpaceSearchService.prototype.getIdsFromSearch=function(e){var t={ids:[]};return e&&(t.ids=e.map(function(e){return e.report_id||e.id})),t},SpaceSearchService.$inject=["$q","ReportModel","Search","ModeCollection"],SpaceSearchService}(),$c=n("i4XC"),Bc=n("8Ylw"),Vc=n("4o5c"),Uc=n("ne/m");!function(e){e.Init="Init"}(Oc||(Oc={}));var Zc,Gc=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function combineReducers(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]?n[o]=e[o]:"object"==typeof e[o]&&(n[o]=combineReducers(e[o]))}var i=Object.keys(n);return function(e,t,r){for(var o=!1,a=Gc({},t),l=0;l<i.length;l++){var s=i[l],c=n[s],d=a[s],u=c(e,a[s],r);(o=o||u!==d)&&(a[s]=u)}return o?a:t}}!function(e){e.UpdateRoute="UpdateRoute"}(Zc||(Zc={}));var Yc,Qc,Hc=n("VAhw"),Wc=n("8SYn"),qc=n("zzE+"),Jc=n("+OPr");!function(e){e.UpdateEncoding="[Designer] UpdateEncoding",e.UpdateEncodingFailure="[Designer] UpdateEncodingFailure",e.MinimizeDataPane="[Designer] MinimizeDataPane",e.MaximizeDataPane="[Designer] MaximizeDataPane",e.MinimizeChartPane="[Designer] MinimizeChartPane",e.MaximizeChartPane="[Designer] MaximizeChartPane",e.LoadChartSummaryData="[Designer] LoadChartSummaryData",e.LoadChartSummaryDataSuccess="[Designer] LoadChartSummaryDataSuccess",e.LoadChartSummaryDataFailure="[Designer] LoadChartSummaryDataFailure",e.UpdateType="[Designer] UpdateType",e.UpdateTypeSuccess="[Designer] UpdateTypeSuccess",e.UpdateTypeFailure="[Designer] UpdateTypeFailure",e.SwapAxes="[Designer] SwapAxes",e.SwapAxesFailure="[Designer] SwapAxesFailure",e.QuickSort="[Designer] QuickSort",e.QuickSortFailure="[Designer] QuickSortFailure",e.ClearEncoding="[Designer] ClearEncoding",e.ClearEncodingFailure="[Designer] ClearEncodingFailure",e.ClearFilters="[Designer] ClearFilters",e.ClearFiltersFailure="[Designer] ClearFiltersFailure",e.ClearSorts="[Designer] ClearSorts",e.ClearSortsFailure="[Designer] ClearSortsFailure",e.RemoveSort="[Designer] ClearSort",e.RemoveSortFailure="[Designer] ClearSortFailure",e.UpdateFormat="[Designer] UpdateFormat",e.UpdateColors="[Designer] UpdateColors",e.UpdateSeriesSpecificColor="[Designer] UpdateSeriesSpecificColor",e.UpdateFormatFailure="[Designer] UpdateFormatFailure"}(Yc||(Yc={})),function(e){e.ClearEncoding="[ViewChart] ClearEncoding",e.ClearFilters="[ViewChart] ClearFilters",e.ClearSorts="[ViewChart] ClearSorts",e.QuickSort="[ViewChart] QuickSort",e.DrillDown="[ViewChart] DrillDown",e.ChangeHierarchy="[ViewChart] ChangeHierarchy",e.Undo="[ViewChart] Undo",e.Redo="[ViewChart] Redo"}(Qc||(Qc={}));var Xc=n("YzgE"),Kc=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ed={state:"",model:fr.Model.build([],[]),token:"",columns:[],content:[],underBrowserSizeLimit:!1,csv:"",oversized:!1,count:0,queryName:"",reportDataUrl:void 0,reportQueryUrl:void 0,content_length:0};function getModel(e,t){return function(e,t){return e.client.selectedReport.chartModels.hasRecord(t)?e.client.selectedReport.chartModels.getRecord(t):Kc({},ed,{token:t})}(e,t).model}function generateChartHistoryEntry(e,t){return{action:t,state:{colorPaletteToken:e.colorPaletteToken,title:e.title,encoding:e.encoding,format:e.format,chartType:e.chartType}}}var td=100;function peekUndoStack(e,t){var n=e.client.selectedReport.charts.histories.get(t);if(n)return n.undoStack.last()}function peekRedoStack(e,t){var n=e.client.selectedReport.charts.histories.get(t);if(n)return n.redoStack.peek()}function pushUndoStack(e,t){for(var n=e.history.undoStack;n.size>=td;)n=n.shift();return{undoStack:n.push(generateChartHistoryEntry(e,t)),redoStack:e.history.redoStack.clear()}}function getSelectedChart(e){var t=Ae.a.getSelectedVizToken(e);return{chartToken:t,chart:Ae.a.Parameterized.getNormalizedChart(e,t)}}function revertUndoStack(e,t){var n=e.get(t);return e.set(t,Kc({},n,{undoStack:n.undoStack.pop()}))}function getResource(e,t){return e.client.selectedReport.charts.resources.get(t)}var nd={tokens:Object(ho.d)(),versions:Object(ho.b)(),queryTokens:Object(ho.b)(),resources:Object(ho.b)(),titles:Object(ho.b)(),chartTypes:Object(ho.b)(),encodings:Object(ho.b)(),formats:Object(ho.b)(),colorPaletteTokens:Object(ho.b)(),v1Views:Object(ho.b)(),histories:Object(ho.b)()},rd={tokens:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return e.token}));case Lc.AddChartSuccess:return t.add(n.payload.token);case Lc.DestroyChart:return t.filter(function(e){return e!==n.payload});case Pc.a.DestroyQuerySuccess:var r=Ae.a.getChartTokensByQueryMap(e).get(n.payload.token);if(r)return t.filterNot(function(e){return r.has(e)})}return t},versions:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,e.view_version]}));case Lc.AddChartSuccess:return t.set(n.payload.token,n.payload.view_version);case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token))}return t},queryTokens:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,n.queryToken]}));case Lc.AddChartSuccess:return t.set(n.payload.token,n.queryToken);case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token))}return t},resources:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,e]}));case Lc.AddChartSuccess:case Lc.UpdateChartSuccess:return t.set(n.payload.token,n.payload);case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token))}return t},titles:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,e.view_vegas?e.view_vegas.title:""]}));case Lc.AddChartSuccess:return t.set(n.payload.token,n.payload.view_vegas&&n.payload.view_vegas?n.payload.view_vegas.title:"");case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token));case ml.UpdateTitle:return t.set(n.chartToken,n.title);case ml.UpdateTitleFailure:return t.set(n.chartToken,getResource(e,n.chartToken).view_vegas.title);case Qc.Undo:case ml.Undo:case ml.RedoFailure:var r=peekUndoStack(e,n.token);if(r)return t.set(n.token,r.state.title);break;case Qc.Redo:case ml.Redo:case ml.UndoFailure:var o=peekRedoStack(e,n.token);if(o)return t.set(n.token,o.state.title)}return t},chartTypes:function(e,t,n){var r=e.client.selectedReport.currentVizToken;switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,e.view_vegas?e.view_vegas.chartType:"line"]}));case Lc.AddChartSuccess:return t.set(n.payload.token,n.payload.view_vegas?n.payload.view_vegas.chartType:"line");case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token));case Yc.UpdateType:return t.set(r,n.chartType);case Yc.UpdateTypeFailure:return t.set(r,getResource(e,r).view_vegas.chartType);case Qc.DrillDown:case ml.DrillDown:return t.set(n.chartToken,Xc.a.newChartType(t.get(n.chartToken),n.target));case Qc.Undo:case ml.Undo:case ml.RedoFailure:var o=peekUndoStack(e,n.token);if(o)return t.set(n.token,o.state.chartType);break;case Qc.Redo:case ml.Redo:case ml.UndoFailure:var i=peekRedoStack(e,n.token);if(i)return t.set(n.token,i.state.chartType);break;case Yc.SwapAxes:return t.set(r,Object(Ha.C)(t.get(r)));case Yc.SwapAxesFailure:return t.set(r,getResource(e,r).view_vegas.chartType)}return t},encodings:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return 2===e.view_version?[e.token,e.view_vegas&&e.view_vegas.encoding?e.view_vegas.encoding:Object(Ha.r)(e.view_vegas.chartType).encoding]:[e.token,fr.EMPTY_ENCODING]}));case Lc.AddChartSuccess:if(2===n.payload.view_version){if(n.payload.view_vegas.encoding)return t.set(n.payload.token,n.payload.view_vegas.encoding);var r=n.payload.view_vegas.chartType||"line";return t.set(n.payload.token,Object(Ha.r)(r).encoding)}return t.set(n.payload.token,fr.EMPTY_ENCODING);case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token));case Yc.UpdateEncoding:return t.set(Ae.a.getSelectedVizToken(e),n.result.encoding);case ml.UpdateEncoding:return t.set(n.chartToken,n.result.encoding);case Qc.ChangeHierarchy:case ml.ChangeHierarchy:if((i=Ae.a.Parameterized.getChart(e,n.chartToken)).canGoDown&&n.forward||i.canGoUp&&!n.forward){var o=e.client.selectedReport.chartModels.getRecord(i.queryToken);return t.set(n.chartToken,Object(Ha.i)(i.encResult.encoding,o.model,n.forward).encoding)}break;case Qc.DrillDown:case ml.DrillDown:var i=Ae.a.Parameterized.getNormalizedChart(e,n.chartToken);return o=e.client.selectedReport.chartModels.getRecord(i.queryToken),t.set(n.chartToken,Xc.a.encode(o.model,i.encoding,n.target).encoding);case Qc.Undo:case ml.Undo:case ml.RedoFailure:var a=peekUndoStack(e,n.token);if(a)return t.set(n.token,a.state.encoding);break;case Qc.Redo:case ml.Redo:case ml.UndoFailure:var l=peekRedoStack(e,n.token);if(l)return t.set(n.token,l.state.encoding);break;case Yc.UpdateType:var s=Ae.a.getSelectedVizToken(e);return t.set(s,Object(Ha.l)(Ae.a.Parameterized.getChartType(e,s),n.chartType,t.get(s)).encoding);case Yc.SwapAxes:return s=Ae.a.getSelectedVizToken(e),t.set(s,Object(Ha.B)(Ae.a.Parameterized.getChartEncoding(e,s)));case Yc.QuickSort:s=Ae.a.getSelectedVizToken(e);var c=Ae.a.Parameterized.getNormalizedChart(e,s);return t.set(s,Object(Ha.w)(c.encoding,n.descending).encoding);case Yc.ClearEncoding:var d=getSelectedChart(e);return t.set(d.chartToken,Object(Ha.r)(d.chart.chartType).encoding);case Yc.ClearFilters:return d=getSelectedChart(e),t.set(d.chartToken,Object(Ha.j)(d.chart.encoding).encoding);case Yc.ClearSorts:return d=getSelectedChart(e),t.set(d.chartToken,Object(Ha.k)(d.chart.encoding).encoding);case Yc.RemoveSort:return s=Ae.a.getSelectedVizToken(e),c=Ae.a.Parameterized.getNormalizedChart(e,s),t.set(s,Object(Ha.A)(c.encoding,n.source).encoding);case Yc.SwapAxesFailure:case Yc.ClearEncodingFailure:case Yc.ClearFiltersFailure:case Yc.ClearSortsFailure:case Yc.RemoveSortFailure:case Yc.QuickSortFailure:return d=getSelectedChart(e),t.set(d.chartToken,peekUndoStack(e,d.chartToken).state.encoding);case ml.DrillDownFailure:case ml.ChangeHierarchyFailure:var u=Ae.a.Parameterized.getResourceByToken(e,n.chartToken);return t.set(n.chartToken,u.view_vegas.encoding)}return t},formats:function(e,t,n){var r,o=e.client.selectedReport.currentVizToken,i=(t.get(o),e.client.orgColorPalettes);switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,Object(Wa.h)(e)]}));case Lc.AddChartSuccess:var a=Object(Wa.h)(n.payload),l=n.payload.color_palette_token,s=void 0,c=i.find(function(e){return e.token===l});c&&c.value&&(s={theme:l,map:{},custom:c.value.split(",")});var d=n.payload.view_vegas&&n.payload.view_vegas.encoding||Object(Ha.r)(n.payload.view_vegas.chartType).encoding;if(2===n.payload.view_version){var u=getModel(e,n.queryToken),p=Kc({},a,{colors:Kc({},s||a.colors,{map:Object(Wa.a)(a,u,d)})});return t.set(n.payload.token,Kc({},p,{colors:Kc({},p.colors,{map:Object(Wa.o)(p,u,d)})}))}return t.set(n.payload.token,a);case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token));case Qc.Undo:case ml.Undo:case ml.RedoFailure:var h=peekUndoStack(e,n.token);if(h)return t.set(n.token,h.state.format);break;case Qc.Redo:case ml.Redo:case ml.UndoFailure:var g=peekRedoStack(e,n.token);if(g)return t.set(n.token,g.state.format);break;case Yc.UpdateEncoding:var m=Ae.a.getSelectedVizToken(e),f=(u=getModel(e,(b=Ae.a.Parameterized.getNormalizedChart(e,m)).queryToken),Object(Wa.o)(b.format,u,b.encoding,n.result.encoding,n.pillAction));return t.set(m,Kc({},b.format,{colors:Kc({},b.format.colors,{map:f})}));case Yc.UpdateColors:u=getModel(e,(b=Ae.a.Parameterized.getChart(e,Ae.a.getSelectedVizToken(e))).queryToken);var C=Kc({},b.format,{colors:Kc({},b.format.colors,n.colors)});return t.set(b.token,Kc({},C,{colors:Kc({},C.colors,{map:Object(Wa.l)(b,C,u)})}));case Yc.UpdateSeriesSpecificColor:return m=Ae.a.getSelectedVizToken(e),a=t.get(m),t.set(m,Kc({},a,{colors:Kc({},a.colors,{map:Kc({},a.colors.map,(r={},r[n.seriesName]=n.color,r))})}));case qc.a.LoadQueryResultSuccess:var y=Ae.a.Parameterized.getNormalizedChartsByQuery(e,n.queryRun.query_token);return t.merge(y.filter(function(e){return 2===e.version}).map(function(e){var t=Kc({},e.format,{colors:Kc({},e.format.colors,{map:Object(Wa.a)(e.format,n.model,e.encoding)})});return[e.token,Kc({},t,{colors:Kc({},t.colors,{map:Object(Wa.o)(t,n.model,e.encoding)})})]}));case Qc.DrillDown:case ml.DrillDown:var b;if(b=Ae.a.Parameterized.getNormalizedChart(e,n.chartToken)){d=b.encoding,u=getModel(e,b.queryToken);var v=Xc.a.encode(u,d,n.target);return t.set(b.token,Kc({},b.format,{colors:Kc({},b.format.colors,{map:Object(Wa.o)(b.format,u,d,v.encoding)})}))}break;case Yc.UpdateFormat:return t.set(o,n.format)}return t},colorPaletteTokens:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,e.color_palette_token]}));case Yc.UpdateColors:var r=Ae.a.getSelectedVizToken(e);return t.set(r,n.palette||t.get(r));case Lc.AddChartSuccess:return t.set(n.payload.token,n.payload.color_palette_token);case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token));case Qc.Undo:case ml.Undo:case ml.RedoFailure:var o=peekUndoStack(e,n.token);if(o)return t.set(n.token,o.state.colorPaletteToken);break;case Qc.Redo:case ml.Redo:case ml.UndoFailure:var i=peekRedoStack(e,n.token);if(i)return t.set(n.token,i.state.colorPaletteToken)}return t},v1Views:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,e.view]}));case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token));case Lc.AddChartSuccess:return t.set(n.payload.token,n.payload.view);case Lc.DestroyChart:return t.remove(n.payload)}return t},histories:function(e,t,n){var r,o,i,a=e.client.selectedReport.charts,l=e.client.selectedReport.currentVizToken;switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedChartsSuccess:return t.merge(n.payload.map(function(e){return[e.token,{undoStack:Object(ho.a)(),redoStack:Object(ho.g)()}]}));case Lc.AddChartSuccess:return t.set(n.payload.token,{undoStack:Object(ho.a)(),redoStack:Object(ho.g)()});case Lc.DestroyChart:return t.remove(n.payload);case Pc.a.DestroyQuerySuccess:return t.removeAll(Ae.a.getChartTokensByQueryMap(e).get(n.payload.token));case ml.UpdateTitle:return t.set(n.chartToken,pushUndoStack(Object(Wa.e)(a,n.chartToken),"chart title change"));case Yc.UpdateType:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"chart type change"));case Yc.UpdateEncoding:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"chart encoding change"));case Yc.QuickSort:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"sort"));case Yc.RemoveSort:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"remove sort"));case Yc.ClearSorts:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"clear sorts"));case Yc.ClearFilters:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"clear filters"));case Yc.ClearEncoding:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"clear settings"));case Qc.DrillDown:case ml.DrillDown:return t.set(n.chartToken,pushUndoStack(Ae.a.Parameterized.getNormalizedChart(e,n.chartToken),"drill down"));case Qc.ChangeHierarchy:case ml.ChangeHierarchy:var s=Ae.a.Parameterized.getChart(e,n.chartToken);if(s.canGoDown&&n.forward||s.canGoUp&&!n.forward)return t.set(n.chartToken,pushUndoStack(Ae.a.Parameterized.getNormalizedChart(e,n.chartToken),"change hierarchy"));break;case ml.DrillDownFailure:case ml.ChangeHierarchyFailure:return revertUndoStack(t,n.chartToken);case Qc.Undo:case ml.Undo:case ml.RedoFailure:return t.set(n.token,(r=Ae.a.Parameterized.getNormalizedChart(e,n.token),o=r.history,(i=o.undoStack.last())?{undoStack:o.undoStack.pop(),redoStack:o.redoStack.push(generateChartHistoryEntry(r,i.action))}:r.history));case Qc.Redo:case ml.Redo:case ml.UndoFailure:return t.set(n.token,function(e){var t=e.history,n=t.redoStack.last();return n?{undoStack:t.undoStack.push(generateChartHistoryEntry(e,n.action)),redoStack:t.redoStack.pop()}:e.history}(Ae.a.Parameterized.getNormalizedChart(e,n.token)));case Yc.SwapAxes:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"swap axes"));case Yc.SwapAxesFailure:return revertUndoStack(t,l);case Yc.UpdateFormat:case Yc.UpdateColors:case Yc.UpdateSeriesSpecificColor:return t.set(l,pushUndoStack(Object(Wa.e)(a,l),"update chart format"))}return t}};var od={runState:W.b.Uninitialized,tokens:Object(ho.d)(),cellTokens:Object(ho.b)(),titles:Object(ho.b)(),frozen:Object(ho.d)(),resources:Object(ho.b)()},id={runState:function(e,t,n){switch(n.type){case Z.Type.StubLayoutVisuals:return W.b.Loading;case Z.Type.LoadEmbeddedLayoutVisualsSuccess:case Z.Type.LoadLayoutVisualsSuccess:return W.b.Succeeded;case Z.Type.LoadLayoutVisualsFailure:return W.b.Failed}return t},tokens:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:return t.clear();case Z.Type.StubLayoutVisuals:case Z.Type.LoadEmbeddedLayoutVisualsSuccess:case Z.Type.LoadLayoutVisualsSuccess:return t.merge(n.vizResources.map(function(e){return e.token}));case Z.Type.RemoveFromLayoutViaBuilder:return t.remove(n.vizToken);case Z.Type.RemoveFromLayout:var r=A.b.vizTokenByCell(e,n.cellToken);if(r)return t.remove(r);break;case Z.Type.RemoveFromLayoutFailure:return t.add(n.vizToken);case Z.Type.AddToLayoutSuccess:return t.add(n.vizResource.token)}return t},cellTokens:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:return t.clear();case Z.Type.LoadVizCellSuccess:return t.set(n.vizToken,n.cellToken);case Z.Type.RemoveFromLayoutSuccess:return t.remove(n.vizToken);case Z.Type.AddToLayoutSuccess:return t.set(n.vizResource.token,n.cellToken)}return t},titles:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:return t.clear();case Z.Type.StubLayoutVisuals:case Z.Type.LoadEmbeddedLayoutVisualsSuccess:case Z.Type.LoadLayoutVisualsSuccess:return t.merge(n.vizResources.map(function(e){return[e.token,e.title]}));case Z.Type.RemoveFromLayoutSuccess:return t.remove(n.vizToken);case Z.Type.AddToLayoutSuccess:return t.set(n.vizResource.token,n.vizResource.title);case Z.Type.UpdateVizTitle:return t.set(n.vizToken,n.title);case Z.Type.UpdateVizTitleFailure:if(A.b.vizResourcesArray(e).has(n.vizToken))return t.set(n.vizToken,A.b.vizResourcesArray(e).get(n.vizToken).title)}return t},frozen:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:return t.clear();case Z.Type.StubLayoutVisuals:case Z.Type.LoadEmbeddedLayoutVisualsSuccess:case Z.Type.LoadLayoutVisualsSuccess:return t.merge(n.vizResources.filter(function(e){return e.frozen_in_layout}).map(function(e){return e.token}));case Z.Type.RemoveFromLayoutSuccess:return t.remove(n.vizToken)}return t},resources:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:return t.clear();case Z.Type.StubLayoutVisuals:case Z.Type.LoadEmbeddedLayoutVisualsSuccess:case Z.Type.LoadLayoutVisualsSuccess:return t.merge(n.vizResources.map(function(e){return[e.token,e]}));case Z.Type.UpdateVizSuccess:case Z.Type.AddToLayoutSuccess:return t.set(n.vizResource.token,n.vizResource);case Z.Type.RemoveFromLayoutSuccess:return t.remove(n.vizToken)}return t}};function isExplorerUrl(e){return"reportShow.reports.chart"===e||"reportShow.reports.runs.chart"===e}var ad=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function queryResourceToState(e){return{name:e.name,token:e.token,resource:e,raw_query:e.raw_query,data_source_id:e.data_source_id,limit:e.limit,last_run_id:e.last_run_id,formatted:e.formatted}}function reportRunResourceToState(e){return{resource:e,state:e.state,running:"running"===e.state||"pending"===e.state,loading:!1,canceling:!1,share:e.share,token:e.token,createdAt:new Date(e.created_at)}}function tableResourceToState(e,t){return{vizType:Jc.b.Table,resource:t,currentView:t.view,history:[],token:t.token,queryToken:e}}function queryRunResourceToState(e,t,n){return{resource:e,token:e.token,state:e.state,query_token:e.query_token,limit:e.limit,running:n||function(e){return yr.z.indexOf(e.state)>=0}(e),warning:t||"failed"===e.state||"cancelled"===e.state,runQueued:n,cancelQueued:t,timeCompleted:function(e){var t=new Date(e.completed_at),n=new Date(e.startedAt||e.created_at),r=Math.max(0,t.getTime()-n.getTime()),o=Math.floor(r/36e5),i=0,a=0;return o>0?o+"h"+((i=Math.floor(r%36e5/6e4))>0?" "+i+"m":""):(i=Math.floor(r/6e4))>0?i+"m"+((a=Math.floor(r%6e4/1e3))>0?" "+a+"s":""):(a=Math.floor(r/1e3))>0?a+"s":r+"ms"}(e),reportDataUrl:e.hasLink("result_web")?e.links("result_web").href:"",reportQueryUrl:e.hasLink("query_web")?e.links("result_web").href:"",reportRunUrl:e.hasLink("report_run_web")?e.links("result_web").href:"",errorLineHtml:function(e){if("failed"===e.state&&e.error_message){var t=e.error_message.match(/position: ([0-9]+)/i);if(t&&t[1]){var n=parseInt(t[1],10),r=e.rendered_source.substring(0,n),o=e.rendered_source.substring(n),i=r.lastIndexOf("\n"),a=r.lastIndexOf("\n",i-1),l=o.indexOf("\n"),s=o.indexOf("\n",l+1),c="",d="";i>=0&&(c=a>=0?"<pre>"+Pr.a.escapeHTML(r.substring(a+1,i))+"</pre>":"<pre>"+Pr.a.escapeHTML(r.substring(0,i))+"</pre>",r=r.substring(i+1)),l>=0&&(d=s>=0?"<pre>"+Pr.a.escapeHTML(o.substring(l+1,s))+"</pre>":"<pre>"+Pr.a.escapeHTML(o.substring(l+1))+"</pre>",o=o.substring(0,l));var u=new Array(r.length).join(" ");return c+"<pre>"+Pr.a.escapeHTML(r+o)+'</pre><pre class="highlight">'+u+"^</pre>"+d}}}(e),errorMessage:e.error_message}}function queryResultToState(e,t,n,r,o){var i=t.content_length>=15728640;return{token:n.query_token,model:r,state:n.state,count:t.count,content:o,columns:t.columns,underBrowserSizeLimit:!i,csv:t.links?t.links("csv").href:void 0,oversized:i,queryName:e.name,reportDataUrl:n.hasLink("result_web")?n.links("result_web").href:void 0,reportQueryUrl:n.hasLink("query_web")?n.links("query_web").href:void 0,content_length:t.content_length}}var ld={model:Ya.a.Models.empty(),charts:nd,chartModels:new Hc.a("token"),chartsByQuery:Object(ho.b)(),chartDesigner:{chartPane:{view:fl.PaneView.Maximized},dataPane:{view:fl.PaneView.Minimized,dataset:{encoding:null,summary:null}}},creator:null,currentVizToken:"",editorSelectedQuery:{name:"",token:"",last_run_id:"",storedTables:[],storedCharts:[]},queries:new Hc.a("token"),queryRuns:new Hc.a("query_token"),report:null,reportDisplayName:null,reportHasUnsyncedChanges:!1,reportLayout:"",reportLastSyncedAt:null,reportRun:null,reportRunPdfExport:null,reportSpace:null,reportSpaceDisplayName:null,tables:new Hc.a("token"),tablesByQuery:Object(ho.b)(),userStar:null,pollingReportRun:!1,viewDataModal:{title:null,chartType:null,isOpen:!1,chartToken:null,queryToken:null,datasets:{model:null,encoding:null,format:null,summary:null,complete:null}},notebookViz:od},sd={model:function(e,t,n){switch(n.type){case qc.a.LoadQueryResultSuccess:if(n.view){var r=n.view;r=Ya.a.Views.merge(t,r);var o=Ya.a.Views.add(t,r);return Ya.a.Relations.add(o,Ya.a.Relations.from(o,r))}return t;default:return t}},charts:rd,chartModels:function(e,t,n){switch(n.type){case qc.a.PollReportRun:return t.clear();case qc.a.ExecuteReportRun:if(n.runningQueryToken)return t.removeRecordByKey(n.runningQueryToken);break;case qc.a.LoadQueryRunSuccess:return t.removeRecordByKey(n.resource.token);case qc.a.LoadQueryResultSuccess:var r=e.client.selectedReport.queries.getRecord(n.queryRun.query_token);return t.mergeRecords([queryResultToState(r.resource,n.resource,n.queryRun,n.model,n.dataset&&n.dataset.content)]);case qc.a.LoadQueryResultFailure:return r=e.client.selectedReport.queries.getRecord(n.queryRun.query_token),t.mergeRecord(function(e,t){return{token:t.query_token,model:fr.Model.build([],[]),state:t.state,error_message:t.error_message,count:0,content:[],columns:[],underBrowserSizeLimit:!1,csv:void 0,oversized:!1,queryName:e.name,reportDataUrl:t.hasLink("result_web")?t.links("result_web").href:void 0,reportQueryUrl:t.hasLink("query_web")?t.links("query_web").href:void 0,content_length:0}}(r.resource,n.queryRun))}return t},chartDesigner:function(e,t,n){var r=function(){return ad({},t,{dataPane:ad({},t.dataPane,{dataset:{summary:null,encoding:null}})})};switch(n.type){case ml.Undo:case ml.Redo:case Yc.UpdateType:case Yc.ClearEncoding:return r();case Yc.UpdateEncoding:var o=e.client.selectedReport.currentVizToken,i=e.client.selectedReport.charts.encodings[o];return Object(y.isEqual)(n.result.encoding,i)?t:r();case Yc.MinimizeChartPane:case Yc.MaximizeDataPane:return ad({},t,{chartPane:ad({},t.chartPane,{view:t.chartPane.view===fl.PaneView.Minimized?fl.PaneView.Regular:fl.PaneView.Minimized}),dataPane:ad({},t.dataPane,{view:t.dataPane.view===fl.PaneView.Maximized?fl.PaneView.Regular:fl.PaneView.Maximized})});case Yc.MaximizeChartPane:case Yc.MinimizeDataPane:return ad({},t,{chartPane:ad({},t.chartPane,{view:t.chartPane.view===fl.PaneView.Maximized?fl.PaneView.Regular:fl.PaneView.Maximized}),dataPane:ad({},t.dataPane,{view:t.dataPane.view===fl.PaneView.Minimized?fl.PaneView.Regular:fl.PaneView.Minimized})});case Q.c.SelectChart:return r();case Yc.LoadChartSummaryDataSuccess:return ad({},t,{dataPane:ad({},t.dataPane,{dataset:ad({},t.dataPane.dataset,{summary:n.result,encoding:n.encoding})})});default:return t}},chartsByQuery:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.AddChartSuccess:return t.has(n.queryToken)?t.update(n.queryToken,function(e){return e.add(n.payload.token)}):t.set(n.queryToken,Object(ho.d)([n.payload.token]));case Lc.LoadEmbeddedChartsSuccess:return t.set(n.queryToken,Object(ho.d)(n.payload.map(function(e){return e.token})));case Lc.DestroyChart:return o=t,i=n.payload,o.withMutations(function(e){var t=e.findEntry(function(e){return e.has(i)});t&&e.set(t[0],t[1].filter(function(e){return e!==i}))});case Pc.a.DestroyQuerySuccess:return t.remove(n.payload.token);case Pc.a.BatchUpdateQueries:var r=n.payload.find(function(e){return null!=e.mapping_id});if(r)return t.set(r.token,Object(ho.d)())}var o,i;return t},creator:function(e,t,n){switch(n.type){case te.a.LoadReportCreatorSuccess:return n.creatorResource}return t},currentVizToken:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(isExplorerUrl(e.router.name))return e.router.params.vizId;break;case gl.ExploreChart:return n.token;case gl.ExploreChartMark:case gl.ExploreChartWithData:return n.chartToken;case Q.c.SelectChart:return n.payload.chartToken;case Q.c.SelectChartSuccess:return n.payload.chart.token;case Q.c.SelectTable:return n.token}return t},editorSelectedQuery:function(e,t,n){switch(n.type){case Q.c.SelectChart:return{name:e.client.selectedReport.queries.getRecord(n.payload.selectedQueryToken).name,token:n.payload.selectedQueryToken,last_run_id:e.client.selectedReport.queries.getRecord(n.payload.selectedQueryToken).resource.last_run_id,storedCharts:Ae.a.Parameterized.getNormalizedChartsByQuery(e,n.payload.selectedQueryToken).map(function(e){return e.resource}).toArray(),storedTables:e.client.selectedReport.tables.getRecords(e.client.selectedReport.tablesByQuery.get(n.payload.selectedQueryToken).toArray()).map(function(e){return e.resource})};case Q.c.SelectQuery:return{name:e.client.selectedReport.queries.getRecord(n.token).name,token:n.token,last_run_id:e.client.selectedReport.queries.getRecord(n.token).resource.last_run_id,storedCharts:Ae.a.Parameterized.getNormalizedChartsByQuery(e,n.token).map(function(e){return e.resource}).toArray(),storedTables:e.client.selectedReport.tablesByQuery.has(n.token)?e.client.selectedReport.tables.getRecords(e.client.selectedReport.tablesByQuery.get(n.token).toArray()).map(function(e){return e.resource}):[]};case Q.c.SelectTable:return{name:e.client.selectedReport.queries.getRecord(n.queryToken).name,token:n.queryToken,last_run_id:e.client.selectedReport.queries.getRecord(n.queryToken).resource.last_run_id,storedCharts:Ae.a.Parameterized.getNormalizedChartsByQuery(e,n.queryToken).map(function(e){return e.resource}).toArray(),storedTables:e.client.selectedReport.tables.getRecords(e.client.selectedReport.tablesByQuery.get(n.queryToken).toArray()).map(function(e){return e.resource})};case Pc.a.BatchUpdateQueries:var r=n.payload.find(function(e){return e.mapping_id===(t&&t.token)});if(r)return{name:r.name,token:r.token,last_run_id:r.last_run_id,storedCharts:[],storedTables:[]};break;case Pc.a.UpdateQueryName:if(t.token===n.payload.queryToken)return ad({},t,{name:n.payload.queryName});break;case Lc.LoadEmbeddedChartsSuccess:if((o=e.transient.editor.selectedQueryToken)===n.queryToken)return{name:e.client.selectedReport.queries.hasRecord(o)?e.client.selectedReport.queries.getRecord(o).name:"",token:o,last_run_id:e.client.selectedReport.queries.hasRecord(o)?e.client.selectedReport.queries.getRecord(o).resource.last_run_id:"",storedCharts:n.payload,storedTables:t&&t.storedTables||[]};break;case Lc.LoadEmbeddedTablesSuccess:var o;if((o=e.transient.editor.selectedQueryToken)===n.queryToken)return{name:e.client.selectedReport.queries.hasRecord(o)?e.client.selectedReport.queries.getRecord(o).name:"",token:o,last_run_id:e.client.selectedReport.queries.hasRecord(o)?e.client.selectedReport.queries.getRecord(o).resource.last_run_id:"",storedCharts:t&&t.storedCharts||[],storedTables:n.payload}}return t},notebookViz:id,pollingReportRun:function(e,t,n){switch(n.type){case qc.a.CancelPollReportRun:case qc.a.PollReportRunComplete:return!1;case qc.a.PollReportRun:case qc.a.ExecuteReportRun:return!0}return t},queries:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Pc.a.UpdateQuerySuccess:return t.mergeRecord(queryResourceToState(n.payload));case Pc.a.DestroyQuerySuccess:return t.removeRecordByKey(n.payload.token);case Pc.a.BatchUpdateQueries:var r=t.getRecords().filter(function(e){return e.resource._new_query}).map(function(e){return e.token});return t.mergeRecords(n.payload.map(function(e){return queryResourceToState(e)})).removeRecordsByKey(r);case Pc.a.SaveQuerySuccess:return t.mergeRecord(queryResourceToState(n.payload.query)).removeRecordByKey(n.payload.oldToken);case Pc.a.CreateQuerySuccess:return t.mergeRecord(queryResourceToState(n.payload));case Pc.a.LoadQueriesSuccess:return t.replaceRecords(n.queries.map(function(e){return queryResourceToState(e)}));case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Pc.a.FormatQuerySuccess:return t.mergeRecord(ad({},t.getRecord(n.payload.query.token),{resource:n.payload.query,raw_query:n.payload.raw_query,formatted:n.payload.formatted,original_query:n.payload.original_query,formatted_query:n.payload.formatted_query}));case Pc.a.UpdateQueryText:return t.mergeRecord(ad({},t.getRecord(n.payload.queryToken),{raw_query:n.payload.queryText}));case Pc.a.UpdateSelectedQueryText:return t.mergeRecord(ad({},t.getRecord(e.transient.editor.selectedQueryToken),{raw_query:n.payload.queryText}));case Pc.a.UpdateQueryName:return t.mergeRecord(ad({},t.getRecord(n.payload.queryToken),{name:n.payload.queryName}));case Pc.a.UpdateQueryLimit:if(t.hasRecord(n.payload.queryToken))return t.mergeRecord(ad({},t.getRecord(n.payload.queryToken),{limit:n.payload.queryLimit}));break;case Pc.a.UpdateQueryDatasource:return t.mergeRecord(ad({},t.getRecord(n.payload.queryToken),{data_source_id:n.payload.queryDatasource}))}return t},queryRuns:function(e,t,n){switch(n.type){case qc.a.PollReportRun:return t.clear();case qc.a.ExecuteReportRun:if(n.runningQueryToken){var r=t.getRecord(n.runningQueryToken);return r?t.mergeRecord(ad({},r,{state:"pending",running:!0,cancelQueued:!1,runQueued:!0,localCreatedAt:new Date,resource:void 0})):t.mergeRecord({query_token:n.runningQueryToken,resource:null,state:"pending",running:!0,warning:!1,cancelQueued:!1,runQueued:!0,timeCompleted:"",reportDataUrl:"",reportQueryUrl:"",reportRunUrl:"",errorLineHtml:"",errorMessage:"",limit:n.runningQueryLimit,localCreatedAt:new Date})}return t.mergeRecords(t.getRecords().map(function(e){return ad({},e,{state:"pending",running:!0,cancelQueued:!1,runQueued:!0,localCreatedAt:new Date,resource:void 0})}));case Pc.a.BatchUpdateQueries:var o=n.payload.find(function(e){return t.hasRecord(e.mapping_id)});if(o)return t.mergeRecord(ad({},t.getRecord(o.mapping_id),{query_token:o.token})).removeRecordByKey(o.mapping_id);break;case Pc.a.DestroyQuerySuccess:return t.removeRecordByKey(n.payload.token);case qc.a.LoadQueryRunSuccess:var i=!1,a=!1,l=null,s=t.getRecord(n.resource.query_token),c=e.client.selectedReport.queries.getRecord(n.resource.query_token);c&&c.resource&&c.resource.mapping_id&&(s=t.getRecord(c.resource.mapping_id),t=t.removeRecordByKey(c.resource.mapping_id)),s&&(l=s.localCreatedAt,i=s.cancelQueued,a=s.runQueued);var d=queryRunResourceToState(n.resource,i,a);return t.mergeRecord(ad({},d,{localCreatedAt:l}));case qc.a.LoadQueryResultSuccess:case qc.a.LoadQueryResultFailure:return t.mergeRecord(ad({},t.getRecord(n.queryRun.query_token),{running:!1,cancelQueued:!1,runQueued:!1,localCreatedAt:t.hasRecord(n.queryRun.query_token)?t.getRecord(n.queryRun.query_token).localCreatedAt:null}));case qc.a.CancelQueryRun:if(t.hasRecord(n.token))return t.mergeRecord(ad({},t.getRecord(n.token),{state:"cancelled",running:!1,cancelQueued:!0,runQueued:!1}))}return t},report:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return null;break;case te.a.LoadReportSuccess:return n.reportResource;case Wc.a.UpdateSelectedReportSpaceSuccess:var r=n.payload.report;return t.generate(ad({},t,{space_token:n.payload.space._resource.token,github_link:r.github_link,_embedded:r._embedded,_forms:r._forms,_links:r._links}));case Wc.a.UpdateReportSuccess:return t.generate(ad({},n.payload.report,{_embedded:t._embedded,_forms:t._forms,_links:t._links}));case Wc.a.SetSelectedReportSharedSuccess:return t.generate(ad({},t,{shared:n.payload.reportResource.shared}));case Wc.a.SetSelectedReportEmbeddedSuccess:return t.generate(ad({},t,{is_embedded:n.payload.reportResource.is_embedded}))}return t},reportHasUnsyncedChanges:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:var r=n.reportResource;return!(r.last_successful_sync_at&&new Date(r.last_successful_sync_at)>new Date(r.last_saved_at));case Wc.a.UpdateSelectedReportLastSavedAt:return!0;case Wc.a.SyncReportSuccess:return!1}return t},reportLayout:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return"";break;case Wc.a.UpdateReportLayout:return n.layout;case te.a.LoadReportSuccess:return n.reportResource.layout}return t},reportLastSyncedAt:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:var r=n.reportResource.last_successful_sync_at;return r&&new Date(r);case Wc.a.SyncReportSuccess:case Wc.a.UpdateSelectedReportSpaceSuccess:return new Date}return t},reportDisplayName:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return null;break;case te.a.LoadReportSuccess:return So.a.displayName(n.reportResource.name);case Wc.a.UpdateReportSuccess:return So.a.displayName(n.payload.report.name)}return t},reportRun:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return null;break;case te.a.LoadReportRunSuccess:case qc.a.ExecuteReportRunSuccess:return reportRunResourceToState(n.reportRunResource);case qc.a.ExecuteReportRun:return ad({},t,{running:!0,loading:!0,canceling:!1,localCreatedAt:new Date});case qc.a.PollReportRun:return ad({},t,{loading:!0,canceling:!1});case qc.a.PollReportRunComplete:return ad({},t,{loading:!1,running:!1,canceling:!1});case qc.a.PollReportRunFailed:return ad({},t,{state:"disconnected",loading:!1});case qc.a.CancelPollReportRun:return ad({},t,{loading:!1,running:!1,canceling:!0})}return t},reportRunPdfExport:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return null;break;case te.a.LoadReportRunEmbeddedPdfExportSuccess:return n.pdfExportResource}return t},reportSpace:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return null;break;case te.a.LoadReportEmbeddedSpaceSuccess:return n.spaceResource;case Wc.a.UpdateSelectedReportSpaceSuccess:return n.payload.space._resource}return t},reportSpaceDisplayName:function(e,t,n){var r,o;switch(n.type){case te.a.LoadReportCreatorSuccess:o=n.creatorResource;break;case te.a.LoadReportEmbeddedSpaceSuccess:r=n.spaceResource}switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return null;break;case te.a.LoadReportSuccess:return n.isNew?"Personal":t;case Wc.a.UpdateSelectedReportSpaceSuccess:return Vt.a.resolveDisplayName(n.payload.space._resource,Object(K.H)(e));case qc.a.LoadQueryResultSuccess:case te.a.LoadReportCreatorSuccess:case te.a.LoadReportEmbeddedSpaceSuccess:r=r||Object(K.W)(e),o=o||Object(K.H)(e);var i=Object(K.S)(e),a=Object(K.v)(e);return o&&i&&i.hasLink("space")?Vt.a.resolveDisplayName(r,o,i,a):t;case Wc.a.UpdateReportSuccess:return Vt.a.resolveDisplayName(Object(K.W)(e),Object(K.H)(e))||t}return t},tables:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedTablesSuccess:return t.mergeRecords(n.payload.map(function(e){return tableResourceToState(n.queryToken,e)}));case Lc.AddTableSuccess:return t.mergeRecord(tableResourceToState(n.queryToken,n.payload));case Pc.a.DestroyQuerySuccess:return t.removeRecordsByKey(Object(K.D)(e,"client","selectedReport","tablesByQuery")[n.payload.token])}return t},tablesByQuery:function(e,t,n){switch(n.type){case Zc.UpdateRoute:if(!n.payload.params.reportId)return t.clear();break;case Wc.a.LoadEmbeddedReport:case te.a.LoadReportSuccess:return t.clear();case Lc.LoadEmbeddedTablesSuccess:return t.set(n.queryToken,Object(ho.d)(n.payload.map(function(e){return e.token})));case Lc.AddTableSuccess:return t.set(n.queryToken,t.get(n.queryToken).add(n.payload.token));case Pc.a.BatchUpdateQueries:var r=n.payload.find(function(e){return null!=e.mapping_id});if(r)return t.set(r.token,Object(ho.d)());break;case Pc.a.DestroyQuerySuccess:return t.remove(n.payload.token)}return t},userStar:function(e,t,n){switch(n.type){case te.a.LoadReportUserStarSuccess:case Wc.a.ToggleReportUserStarSuccess:return n.starResource}return t},viewDataModal:function(e,t,n){switch(n.type){case gl.ViewChartData:case gl.ExploreChartWithData:case hl.ViewChartData:case Xs.OpenViewDataModal:var r=n.chartToken,o=n.queryToken,i=function(t){return e.client.selectedReport.charts.titles.get(t)}(r),a=function(t){return e.client.selectedReport.charts.chartTypes.get(t)}(r);return ad({},t,{chartToken:r,queryToken:o,title:i,isOpen:!0,chartType:a});case Xs.CloseViewDataModal:case hl.CloseAllModals:return ad({},t,{isOpen:!1});case Zc.UpdateRoute:if(!isExplorerUrl(e.router.name))return ad({},t,{isOpen:!1});break;case hl.ViewChartDataSelectSuccess:return r=n.chartToken,o=n.queryToken,ad({},t,{chartToken:r,queryToken:o,datasets:n.result});case hl.ViewChartDataSelectFailure:return ad({},t,{datasets:{model:null,encoding:null,format:null,summary:null,complete:null}})}return t}};var cd,dd,ud={type:function(e,t,n){switch(n.type){case te.a.LoadReportContext:return Nt.b.isCommunityOrg(n.organization)?js.Community:n.organization.avatar.type}return t},name:function(e,t,n){switch(n.type){case te.a.LoadReportContext:return n.organization.name}return t},targetUrl:function(e,t,n){switch(n.type){case te.a.ComputeIfUserBelongsToReportContext:var r=n.result,o=Object(K.v)(e),i=o&&o.hasLink("home_web")&&o.links("home_web").href;return i&&r?i:""}return t},initials:function(e,t,n){switch(n.type){case te.a.LoadReportContext:if(n.organization.avatar.type===Nt.a.Initials)return n.organization.avatar.initials}return t},imageSrc:function(e,t,n){switch(n.type){case te.a.LoadReportContext:switch(n.organization.avatar.type){case Nt.a.Uploaded:case Nt.a.Gravatar:return n.organization.avatar.href}}return t},colorClass:function(e,t,n){switch(n.type){case te.a.LoadReportContext:if(n.organization.avatar.type===Nt.a.Initials)return n.organization.avatar.color_class}return t}},pd=n("bexz"),hd=n.n(pd);!function(e){e.reportHasBeenExportedToPdf=function(e){return!(!e||"completed"!==e.state)}}(cd||(cd={})),function(e){e.LoadReportFilterResources="LoadReportFilterResources",e.LoadReportFilterControls="LoadReportFilterControls",e.RemoveReportFilterControl="RemoveReportFilterControl",e.LoadReportFilterFields="LoadReportFilterFields",e.LoadReportFilterOpts="LoadReportFilterOpts",e.LoadReportFilterOptsSuccess="LoadReportFilterOptsSuccess",e.LoadReportFilterOptsFailure="LoadReportFilterOptsFailure",e.FilterReportDatasets="FilterReportDatasets",e.FilterReportDatasetsSuccess="FilterReportDatasetsSuccess",e.FilterReportDatasetsFailure="FilterReportDatasetsFailure",e.CreateReportFilter="CreateReportFilter",e.CreateReportFilterSuccess="CreateReportFilterSuccess",e.CreateReportFilterFailure="CreateReportFilterFailure",e.DestroyReportFilter="DestroyReportFilter",e.DestroyReportFilterSuccess="DestroyReportFilterSuccess",e.DestroyReportFilterFailure="DestroyReportFilterFailure",e.UpdateReportFilter="UpdateReportFilter",e.UpdateReportFilterSuccess="UpdateReportFilterSuccess",e.UpdateReportFilterFailure="UpdateReportFilterFailure",e.UpdateReportFilterType="UpdateReportFilterType",e.UpdateReportFilterTypeSuccess="UpdateReportFilterTypeSuccess",e.UpdateReportFilterTypeFailure="UpdateReportFilterTypeFailure",e.UpdateReportFilterDefaults="UpdateReportFilterDefaults",e.UpdateReportFilterDefaultsSuccess="UpdateReportFilterDefaultsSuccess",e.UpdateReportFilterDefaultsFailure="UpdateReportFilterDefaultsFailure",e.UpdateReportFilterPosition="UpdateReportFilterPosition",e.UpdateReportFilterPositionSuccess="UpdateReportFilterPositionSuccess",e.UpdateReportFilterPositionFailure="UpdateReportFilterPositionFailure",e.ResetReportFilter="ResetReportFilter",e.SetReportFilterType="SetReportFilterType",e.ApplyReportFilters="ApplyReportFilters",e.ResetReportFilters="ResetReportFilters",e.SetDefaultReportFilters="SetDefaultReportFilters"}(dd||(dd={}));var gd={clone:new Io({name:"Clone",id:"[Report] Clone"}),cloneLoggedOut:new Io({name:"Clone",id:"[Report] CloneLoggedOut"}),delete:new Io({name:"Delete",id:"[Report] Delete"}),export:new Io({name:"Export",id:"[Report] Export"}),exportAll:new Io({name:"Export All",id:"[Report] ExportAll"}),exportPdf:new Io({name:"PDF",id:"[Report] ExportPdf"}),exportPdfDownload:new Io({name:"PDF",id:"[Report] ExportPdfDownload"}),exportPython:new Io({name:"Notebook",id:"[Report] ExportPython"}),fullscreen:new Io({name:"Fullscreen",id:"[Report] Fullscreen"}),manageReport:new Io({name:"Report",id:"[Report] ManageReport"}),move:new Io({name:"Move to\u2026",id:"[Report] Move"}),rename:new Io({name:"Rename",id:"[Report] Rename"}),run:new Io({name:"Run Now",id:"[Report] Run"}),save:new Io({name:"Save",id:"[Report] Save"}),settings:new Io({name:"Settings",id:"[Report] Settings"}),share:new Io({name:"Share",id:"[Report] Share"}),simpleShare:new Io({name:"Share",id:"[Report] SimpleShare"}),viewDetails:new Io({name:"View Details",id:"[Report] ViewDetails"}),viewReport:new Io({name:"View Report",id:"[Report] ViewReport"}),starReport:new Io({name:"Star Report",id:"[Report] StarReport"})},md={clone:function(e,t,n){var r,o;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource;break;case te.a.LoadAccountSuccess:n.payload.account;break;case te.a.LoadLoggedInState:o=n.loggedIn}switch(n.type){case te.a.LoadAccountSuccess:case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case te.a.LoadReportRunSuccess:var i=r||Object(K.S)(e),a=Object(K.R)(e),l=o||Object(K.p)(e),s=!!(a&&a.resource&&a.resource.hasLink("web_clone"));return t.merge({enabled:!!(i&&a&&a.resource),granted:l&&s})}return t},cloneLoggedOut:function(e,t,n){var r,o;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource;break;case te.a.LoadAccountSuccess:n.payload.account;break;case te.a.LoadLoggedInState:o=n.loggedIn}switch(n.type){case te.a.LoadAccountSuccess:case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case te.a.LoadReportRunSuccess:var i=r||Object(K.S)(e),a=Object(K.R)(e),l=o||Object(K.p)(e),s=!(!i||!i.public);return t.merge({enabled:!!(i&&a&&a.resource),granted:!l&&s})}return t},delete:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case te.a.LoadReportRunSuccess:var o=r||Object(K.S)(e),i=!1,a=!1;return o&&(i=So.a.hasBeenRun(o),a=o.hasForm("destroy")),t.merge({enabled:i,granted:a})}return t},export:function(e,t,n){var r,o;switch(n.type){case te.a.LoadAccountSuccess:r=n.payload.account;break;case te.a.LoadLoggedInState:o=n.loggedIn}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:case te.a.LoadAccountSuccess:r=r||Object(K.f)(e);var i=Object(K.U)(e).reportRun,a=o||Object(K.p)(e);return t.merge({enabled:!0,granted:!(!i||!a)})}return t},exportAll:function(e,t,n){var r,o;switch(n.type){case te.a.LoadAccountSuccess:r=n.payload.account;break;case te.a.LoadLoggedInState:o=n.loggedIn}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:case te.a.LoadAccountSuccess:case dd.FilterReportDatasetsSuccess:r=r||Object(K.f)(e);var i=Object(K.U)(e).reportRun,a=!(o||Object(K.p)(e)),l=i&&i.resource&&i.resource.hasLink("content")&&i.resource.links("content").href||"";return t.merge({enabled:!1,granted:!(!i||!a),href:l})}return t},exportPdf:function(e,t,n){var r,o,i;switch(n.type){case qc.a.CancelQueryRun:case qc.a.CancelPollReportRun:case qc.a.PollReportRunComplete:case qc.a.ExecuteReportRunFailed:r=!1;break;case qc.a.ExecuteReportRun:case qc.a.PollReportRun:r=!0;break;case te.a.LoadReportRunEmbeddedPdfExportSuccess:o=n.pdfExportResource;break;case te.a.LoadReportSuccess:i=n.reportResource}switch(n.type){case qc.a.CancelQueryRun:case qc.a.CancelPollReportRun:case qc.a.PollReportRunComplete:case qc.a.ExecuteReportRunFailed:case qc.a.ExecuteReportRun:case qc.a.PollReportRun:case te.a.LoadReportRunEmbeddedPdfExportSuccess:case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:o=o||Object(K.Q)(e);var a=Object(K.R)(e),l=i||Object(K.S)(e),s=!cd.reportHasBeenExportedToPdf(o);if(l)return t.merge({enabled:!r,granted:!!(l.last_run_at&&a&&s)})}return t},exportPdfDownload:function(e,t,n){var r,o,i;switch(n.type){case qc.a.CancelQueryRun:case qc.a.CancelPollReportRun:case qc.a.PollReportRunComplete:case qc.a.ExecuteReportRunFailed:r=!1;break;case qc.a.ExecuteReportRun:case qc.a.PollReportRun:r=!0;break;case te.a.LoadReportRunEmbeddedPdfExportSuccess:o=n.pdfExportResource;break;case te.a.LoadReportSuccess:i=n.reportResource}switch(n.type){case qc.a.CancelQueryRun:case qc.a.CancelPollReportRun:case qc.a.PollReportRunComplete:case qc.a.ExecuteReportRunFailed:case qc.a.ExecuteReportRun:case qc.a.PollReportRun:case te.a.LoadReportRunEmbeddedPdfExportSuccess:case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:var a=o||Object(K.Q)(e),l=i||Object(K.S)(e),s=cd.reportHasBeenExportedToPdf(a),c="";if(l)return s&&(c=a.links("download").href),t.merge({enabled:!r,granted:!!l.last_run_at&&s,href:c})}return t},exportPython:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:var r=Object(K.U)(e);return r.report,r.reportRun,t.merge({enabled:!1,granted:!0})}return t},fullscreen:function(e,t,n){switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:var r=Object(K.U)(e),o=(r.report,r.reportRun,hd.a.fullscreenEnabled);return t.merge({enabled:o,granted:!0})}return t},manageReport:function(e,t,n){switch(n.type){case te.a.LoadAccountSuccess:return t.merge({enabled:!0,granted:!0})}return t},move:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case te.a.LoadReportRunSuccess:var o=r||Object(K.S)(e),i=!1;return o&&(i=So.a.hasBeenRun(o)),t.merge({enabled:i,granted:!0})}return t},rename:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case te.a.LoadReportRunSuccess:var o=r||Object(K.S)(e),i=!1;return o&&(i=So.a.hasBeenRun(o)),t.merge({enabled:i,granted:i})}return t},run:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:var o=r||Object(K.S)(e),i=t.enabled,a=o&&!o.manual_run_disabled;return o&&(i=o.hasLink("web_report_runs")),t.merge({enabled:a,granted:i})}return t},save:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case Wc.a.LoadEmbeddedReport:case te.a.LoadReportRunSuccess:case Wc.a.UpdateReportSuccess:case te.a.LoadReportSuccess:var o=r||Object(K.S)(e),i=!1;return o&&(i=So.a.hasBeenRun(o)),t.merge({enabled:i,granted:!0})}return t},settings:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case te.a.LoadReportRunSuccess:var o=r||Object(K.S)(e),i=!1;return o&&(i=So.a.hasBeenRun(o)),t.merge({enabled:i,granted:!0})}return t},share:function(e,t,n){var r,o;switch(n.type){case te.a.ComputeIfUserBelongsToReportContext:r=n.result;break;case te.a.LoadReportSuccess:o=n.reportResource}switch(n.type){case te.a.ComputeIfUserBelongsToReportContext:case te.a.LoadReportSuccess:case te.a.LoadReportRunSuccess:case te.a.LoadReportContextSpacesSuccess:case Wc.a.UpdateReportSuccess:case te.a.LoadAccountOrganizationsSuccess:var i=Object(K.R)(e),a=o||Object(K.S)(e),l=a&&a.last_run_at;r=r||Object(K.j)(e);var s=!!(l&&i&&r&&a),c=!1,d=!1,u=$o.a.isEditor(Object(K.C)(e)),p=u,h=u;return s&&(c=!!(l&&i.resource&&i.resource.hasLink("share")),d=a.public,h=u||c),t.merge({enabled:c,granted:r&&h&&(!d||p)})}return t},simpleShare:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.ComputeIfUserBelongsToReportContext:case te.a.LoadReportSuccess:case te.a.LoadReportRunSuccess:case te.a.LoadReportContextSpacesSuccess:case Wc.a.UpdateReportSuccess:case te.a.LoadAccountOrganizationsSuccess:var o=r||Object(K.S)(e),i=!1;return o&&(i=o.public),t.merge({enabled:i,granted:i})}return t},viewDetails:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case Zc.UpdateRoute:var o=Object(K.C)(e).name,i=!1,a=!1;return(r||Object(K.S)(e))&&(i=/^reportShow\.reports(\.runs)?(\.viz)?(\.pythonviz)?$/.test(o),a=!0),t.merge({enabled:a,granted:i})}return t},viewReport:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:case Wc.a.UpdateReportSuccess:case Zc.UpdateRoute:var o=Object(K.C)(e),i=$o.a.isReportDetails(o),a=$o.a.isEditor(o),l=r||Object(K.S)(e),s=!1;return l&&(s=So.a.hasBeenRun(l)),t.merge({enabled:!a||s,granted:i||a})}return t},starReport:function(e,t,n){var r;switch(n.type){case te.a.LoadReportSuccess:r=n.reportResource}switch(n.type){case te.a.LoadReportSuccess:case Wc.a.LoadEmbeddedReport:var o=r||Object(K.S)(e),i=o&&o.hasEmbedded("new_star");return t.merge({enabled:!0,granted:i})}return t}};var fd,Cd,yd={create:new Io({name:"New Definition",id:"[Definition] Create"}),delete:new Io({name:"Delete",id:"[Definition] Delete"}),settings:new Io({name:"Settings",id:"[Definition] Settings"}),sync:new Io({name:"Push to GitHub",id:"[Definition] Sync"}),viewGithub:new Io({name:"View in GitHub",id:"[Definition] ViewGithub"})},bd={create:function(e,t,n){switch(n.type){case te.a.LoadAccountSuccess:return t.merge({enabled:!0,granted:!0})}return t},delete:function(e,t,n){switch(n.type){case te.a.LoadAccountSuccess:return t.merge({enabled:!0,granted:!0})}return t},settings:function(e,t,n){switch(n.type){case te.a.LoadAccountSuccess:return t.merge({enabled:!0,granted:!0})}return t},sync:function(e,t,n){switch(n.type){case te.a.LoadDefinitionSuccess:return t.merge({enabled:!0,granted:n.definitionResource.hasForm("sync_to_github")})}return t},viewGithub:function(e,t,n){switch(n.type){case te.a.LoadDefinitionSuccess:var r=n.definitionResource.github_link;return t.merge({enabled:!0,granted:!!r,href:r})}return t}};!function(e){e.ManageDefinition="ManageDefinition",e.UpdateDefinition="UpdateDefinition",e.UpdateDefinitionSuccess="UpdateDefinitionSuccess",e.UpdateDefinitionFailed="UpdateDefinitionFailed",e.SyncDefinition="SyncDefinition",e.SyncDefinitionSuccess="SyncDefinitionSuccess",e.SyncDefinitionFailure="SyncDefinitionFailure",e.PollDefinitionRun="PollDefinitionRun",e.PollDefinitionRunFailed="PollDefinitionRunFailed",e.DeleteDefinition="DeleteDefinition",e.DeleteDefinitionSuccess="DeleteDefinitionSuccess",e.DeleteDefinitionFailure="DeleteDefinitionFailure",e.ExecuteDefinitionRun="ExecuteDefinitionRun",e.ExecuteDefinitionRunFailed="ExecuteDefinitionRunFailed",e.CancelPollDefinitionRun="CancelPollDefinitionRun",e.CancelDefinitionQueryRun="CancelDefinitionQueryRun",e.CancelDefinitionQueryRunSuccess="CancelDefinitionQueryRunSuccess",e.CancelDefinitionQueryRunFailed="CancelDefinitionQueryRunFailed",e.DefinitionReportRunLoadSuccess="DefinitionReportRunLoadSuccess",e.DefinitionReportRunLoadFailure="DefinitionReportRunLoadFailure",e.PollDefinitionRunComplete="PollDefinitionRunComplete",e.LoadDefinitionQuerySuccess="LoadDefinitionQuerySuccess",e.LoadDefinitionQueryRunSuccess="LoadDefinitionQueryRunSuccess",e.LoadDefinitionQueryRunFailure="LoadDefinitionQueryRunFailure",e.LoadDefinitionQueryResultSuccess="LoadDefinitionQueryResultSuccess",e.LoadDefinitionQueryResultFailure="LoadDefinitionQueryResultFailure",e.UpdateDefinitionSource="UpdateDefinitionSource"}(fd||(fd={})),function(e){e.SaveOnly="SaveOnly",e.SaveAndSync="SaveAndSync"}(Cd||(Cd={}));var vd=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function definitionResourceToState(e){return{resource:e,name:e.name,source:e.source,description:e.description,dataSourceId:e.data_source_id,token:e.token,created_at:e.created_at,updated_at:e.updated_at,lastSyncedAt:e.last_successful_sync_at&&new Date(e.last_successful_sync_at)}}var Id={definition:null,query:null,reportRun:null,space:null,queryRun:null,chartModel:null,model:Ya.a.Models.empty(),pollingDefinitionRun:!1},Sd={definition:function(e,t,n){switch(n.type){case te.a.LoadDefinitionSuccess:return definitionResourceToState(n.definitionResource);case fd.UpdateDefinitionSuccess:return definitionResourceToState(n.definition);case fd.UpdateDefinitionSource:return vd({},t,{source:n.source});case fd.SyncDefinitionSuccess:return vd({},t,{lastSyncedAt:new Date})}return t},query:function(e,t,n){switch(n.type){case fd.LoadDefinitionQuerySuccess:return queryResourceToState(n.resource)}return t},reportRun:function(e,t,n){switch(n.type){case fd.DefinitionReportRunLoadSuccess:return reportRunResourceToState(n.resource)}return t},queryRun:function(e,t,n){switch(n.type){case fd.LoadDefinitionQueryRunSuccess:return vd({},queryRunResourceToState(n.resource,t&&t.cancelQueued,t&&t.runQueued),{localCreatedAt:t&&t.localCreatedAt});case fd.CancelDefinitionQueryRunSuccess:return queryRunResourceToState(n.resource,!1,!1);case fd.ExecuteDefinitionRun:return vd({},t,{state:"running",running:!0,limit:n.limit,cancelQueued:!1,localCreatedAt:new Date});case fd.CancelDefinitionQueryRun:return vd({},t,{running:!1,cancelQueued:!0,runQueued:!1});case fd.CancelDefinitionQueryRunFailed:return vd({},t,{running:!0,cancelQueued:!1});case fd.LoadDefinitionQueryResultSuccess:case fd.LoadDefinitionQueryResultFailure:return vd({},t,{runQueued:!1,cancelQueued:!1})}return t},model:function(e,t,n){switch(n.type){case fd.LoadDefinitionQueryResultSuccess:if(n.view){var r=n.view;r=Ya.a.Views.merge(t,r);var o=Ya.a.Views.add(t,r);return Ya.a.Relations.add(o,Ya.a.Relations.from(o,r))}return t;default:return t}},chartModel:function(e,t,n){switch(n.type){case fd.LoadDefinitionQueryResultSuccess:return queryResultToState(e.client.selectedDefinition.query.resource,n.resource,n.queryRun,n.model,n.dataset?n.dataset.content:[]);case fd.ExecuteDefinitionRun:return null}return t},pollingDefinitionRun:function(e,t,n){switch(n.type){case fd.PollDefinitionRun:return!0;case fd.PollDefinitionRunComplete:return!1}return t},space:function(e,t,n){return t}};var wd,Ad={tokens:Object(ho.d)(),pusherChannelNames:Object(ho.b)(),sessions:Object(ho.b)(),resources:Object(ho.b)(),initialized:Object(ho.b)(),states:Object(ho.b)(),awaitingInitialRun:Object(ho.b)(),notebookTypes:Object(ho.b)(),cellTokensByNotebook:Object(ho.b)()},Md={tokens:function(e,t,n){switch(n.type){case U.Type.AddSuccess:case U.Type.LoadSuccess:case U.Type.LoadWithInitSuccess:return t.add(n.notebookResource.token);case U.Type.Destroy:return t.remove(n.notebookToken)}return t},pusherChannelNames:function(e,t,n){switch(n.type){case U.Type.UpdateSuccess:case U.Type.AddSuccess:case U.Type.LoadSuccess:case U.Type.LoadWithInitSuccess:return t.set(n.notebookResource.token,n.notebookResource.pusher_channel_name);case U.Type.Destroy:return t.remove(n.notebookToken)}return t},initialized:function(e,t,n){switch(n.type){case U.Type.LoadSuccess:return t.set(n.notebookResource.token,!1);case U.Type.AddSuccess:case U.Type.LoadWithInitSuccess:return t.set(n.notebookResource.token,!0);case U.Type.InitComplete:var r=A.b.notebookTokensArray(e).first();if(r)return t.set(r,!0);break;case U.Type.Destroy:return t.remove(n.notebookToken)}return t},sessions:function(e,t,n){switch(n.type){case U.Type.LoadSessionSuccess:return t.set(n.notebookToken,n.sessionResource);case U.Type.NoSession:case U.Type.Destroy:return t.remove(n.notebookToken)}return t},resources:function(e,t,n){switch(n.type){case U.Type.UpdateSuccess:case U.Type.AddSuccess:case U.Type.LoadSuccess:case U.Type.LoadWithInitSuccess:return t.set(n.notebookResource.token,n.notebookResource);case U.Type.Destroy:return t.remove(n.notebookToken)}return t},states:function(e,t,n){switch(n.type){case U.Type.LoadSessionSuccess:if(n.sessionResource.active){var r=Object(K.L)(e);if(bs.isSessionEmpty(n.sessionResource))return t.set(n.notebookToken,W.a.Loading);var o=bs.isSessionReportRunOutdated(n.sessionResource,r);return t.set(n.notebookToken,o?W.a.Alert:W.a.Ready)}return t.set(n.notebookToken,W.a.Error);case U.Type.NoSession:case U.Type.RunFailed:case Z.Type.RunFailed:return t.set(n.notebookToken,W.a.Error);case U.Type.InitSession:return t.set(n.notebookToken,W.a.Session);case U.Type.Terminated:var i=A.b.notebookSessionsArray(e).findKey(function(e){return e.token===n.sessionToken});if(i)return"OBO_USER"!==n.terminationReason?t.set(i,W.a.Error):t.set(i,W.a.Loading);break;case U.Type.InitSessionFailure:return t.set(n.notebookToken,W.a.Busy);case qc.a.PollReportRunComplete:r=n.token;var a=A.b.selectedNotebookSession(e);if(a){var l=bs.isSessionReportRunOutdated(a,r);return t.map(function(){return l?W.a.Alert:W.a.Ready})}break;case U.Type.RefreshSessionReportRun:return t.map(function(){return W.a.Loading});case U.Type.DataLoaded:return t.map(function(){return W.a.Ready})}return t},awaitingInitialRun:function(e,t,n){switch(n.type){case U.Type.InitSession:return t.set(n.notebookToken,!0===n.runNewCells);case U.Type.InitialRunSuccess:return t.set(n.notebookToken,!1);case U.Type.Destroy:return t.remove(n.notebookToken)}return t},notebookTypes:function(e,t,n){switch(n.type){case U.Type.UpdateType:return t.set(n.notebookToken,n.notebookType);case U.Type.UpdateTypeFailure:var r=A.b.notebookResourcesArray(e).get(n.notebookToken);if(r)return t.set(n.notebookToken,r.notebook_type);break;case U.Type.UpdateSuccess:case U.Type.AddSuccess:case U.Type.LoadSuccess:case U.Type.LoadWithInitSuccess:return t.set(n.notebookResource.token,n.notebookResource.notebook_type);case U.Type.Destroy:return t.remove(n.notebookToken)}return t},cellTokensByNotebook:function(e,t,n){switch(n.type){case U.Type.LoadSuccess:case U.Type.LoadWithInitSuccess:case U.Type.AddSuccess:return t.set(n.notebookResource.token,Object(ho.d)());case U.Type.Destroy:return t.remove(n.notebookToken);case Z.Type.LoadNotebookCellsSuccess:return t.set(n.notebookToken,Object(ho.d)(n.cellResources.map(function(e){return e.token})));case Z.Type.AddCellSuccess:return n.nextToken?((o=t.get(n.notebookToken).toArray()).splice(o.indexOf(n.nextToken),0,n.cellResource.token),t.set(n.notebookToken,Object(ho.d)(o))):t.set(n.notebookToken,t.get(n.notebookToken).add(n.cellResource.token));case Z.Type.DestroyCell:return t.set(n.notebookToken,t.get(n.notebookToken).remove(n.cellToken));case Z.Type.DestroyCellFailure:return t.set(n.notebookToken,t.get(n.notebookToken).add(n.cellToken));case Z.Type.MoveCell:var r=A.b.selectedNotebookToken(e);if(t.has(r)&&(i=(o=t.get(r).toArray()).indexOf(n.cellToken))>=0)return o.splice(i,1),n.down?o.splice(i+1,0,n.cellToken):o.splice(i-1>=0?i-1:0,0,n.cellToken),t.set(r,Object(ho.d)(o));break;case Z.Type.MoveCellFailure:var o,i;if(r=A.b.selectedNotebookToken(e),t.has(r)&&(i=(o=t.get(r).toArray()).indexOf(n.cellToken))>=0){o.splice(i,1);var a=o.indexOf(n.nextCellToken);return o.splice(a,0,n.cellToken),t.set(r,Object(ho.d)(o))}}return t}};!function(e){!function(e){e.CreateRunSuccess="[Cell] CreateRunSuccess",e.LoadLastCellRun="[Cell] LoadLastCellRun",e.LoadLastCellRunFailure="[Cell] LoadLastCellRunFailure",e.LoadLastCellRunSuccess="[Cell] LoadLastCellRunSuccess",e.LoadEmbeddedCellRunSuccess="[Cell] LoadLastCellRunSuccess",e.LoadCellRunFromBatchSuccess="[Cell] LoadCellRunFromBatchSuccess",e.LoadCellRunResultSuccess="[Cell] LoadCellRunResultSuccess",e.LoadCellRunResults="[Cell] LoadCellRunResults",e.LoadCellRunResultsFailure="[Cell] LoadCellRunResultsFailure",e.LoadCellRunResultsSuccess="[Cell] LoadCellRunResultsSuccess",e.LoadCellRunResultContent="[Cell] LoadCellRunResultContent",e.LoadCellRunResultContentFailure="[Cell] LoadCellRunResultContentFailure",e.LoadCellRunResultContentSuccess="[Cell] LoadCellRunResultContentSuccess"}(e.Type||(e.Type={}))}(wd||(wd={}));var kd={tokens:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return n.nextToken?((o=t.toArray()).splice(o.indexOf(n.nextToken),0,n.cellResource.token),Object(ho.d)(o)):t.add(n.cellResource.token);case Z.Type.DestroyCell:return t.remove(n.cellToken);case Z.Type.DestroyCellFailure:case Z.Type.LoadVizCellSuccess:return t.add(n.cellToken);case Z.Type.LoadNotebookCellsSuccess:var r=n.cellResources.map(function(e){return e.token});return t.filterNot(function(e){return r.indexOf(e)>=0}).merge(r);case Z.Type.MoveCell:var o,i=(o=t.toArray()).indexOf(n.cellToken);return i>=0?(o.splice(i,1),n.down?o.splice(i+1,0,n.cellToken):o.splice(i-1>=0?i-1:0,0,n.cellToken),Object(ho.d)(o)):t}return t},contents:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return t.set(n.cellResource.token,n.cellResource.content);case Z.Type.EditCellContent:return t.set(n.cellToken,n.content);case Z.Type.UpdateCellFailure:return t.set(n.cellToken,A.b.cellResourcesArray(e).get(n.cellToken).content);case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken);case Z.Type.LoadNotebookCellsSuccess:return t.merge(n.cellResources.map(function(e){return[e.token,e.content]}))}return t},frozen:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return t.set(n.cellResource.token,n.cellResource.frozen_in_layout);case Z.Type.ToggleFreezeCell:return t.set(n.cellToken,!t.get(n.cellToken));case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken);case Z.Type.LoadNotebookCellsSuccess:return t.merge(n.cellResources.map(function(e){return[e.token,e.frozen_in_layout]}));case Z.Type.UpdateContentType:return t.set(n.cellToken,!1);case Z.Type.UpdateContentTypeFailure:return t.set(n.cellToken,A.b.cellResourcesArray(e).get(n.cellToken).frozen_in_layout)}return t},folded:function(e,t,n){switch(n.type){case Z.Type.FoldCell:return t.set(n.cellToken,!t.get(n.cellToken));case Z.Type.Select:return t.set(n.cellToken,!1)}return t},contentTypes:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return t.set(n.cellResource.token,n.cellResource.content_type);case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken);case Z.Type.LoadNotebookCellsSuccess:return t.merge(n.cellResources.map(function(e){return[e.token,e.content_type]}));case Z.Type.UpdateContentType:return t.set(n.cellToken,n.contentType);case Z.Type.UpdateContentTypeFailure:return t.set(n.cellToken,A.b.cellResourcesArray(e).get(n.cellToken).content_type)}return t},createdAt:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return t.set(n.cellResource.token,n.cellResource.created_at);case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken);case Z.Type.LoadNotebookCellsSuccess:return t.merge(n.cellResources.map(function(e){return[e.token,e.created_at]}))}return t},resources:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return t.set(n.cellResource.token,n.cellResource);case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken);case Z.Type.LoadNotebookCellsSuccess:return t.merge(n.cellResources.map(function(e){return[e.token,e]}));case Z.Type.UpdateCellSuccess:return t.set(n.cellResource.token,n.cellResource)}return t},executing:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return t.set(n.cellResource.token,!1);case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken);case Z.Type.LoadNotebookCellsSuccess:return t.merge(n.cellResources.map(function(e){return[e.token,!1]}));case U.Type.Run:var r=A.b.runnableCellTokensByNotebook(e,n.notebookToken);if(null==n.cellTokensToRun)return t.map(function(e,t){return!!r.has(t)||e});var o=n.cellTokensToRun.filter(function(e){return r.has(e)});return t.merge(o.map(function(e){return[e,!0]}));case wd.Type.LoadCellRunResultSuccess:return t.set(n.cellToken,!1);case Z.Type.RunFailed:case Z.Type.Idle:return t.set(n.cellToken,!1);case U.Type.InitSession:case U.Type.RunFailed:case U.Type.Disconnected:case U.Type.Terminated:return t.some(function(e){return e})?t.map(function(e,t){return!1}):t}return t},lastRunTokens:function(e,t,n){switch(n.type){case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken);case wd.Type.CreateRunSuccess:case wd.Type.LoadLastCellRunSuccess:case wd.Type.LoadCellRunFromBatchSuccess:return t.set(n.cellToken,n.resource.token)}return t},missingRuns:function(e,t,n){switch(n.type){case wd.Type.LoadLastCellRunFailure:if(n.error instanceof jc)return t.add(n.cellToken);break;case Z.Type.DestroyCellSuccess:return t.remove(n.cellToken)}return t}};var Td={tokens:function(e,t,n){switch(n.type){case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(r);case wd.Type.CreateRunSuccess:case wd.Type.LoadLastCellRunSuccess:case wd.Type.LoadCellRunFromBatchSuccess:var o=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(o).add(n.resource.token)}return t},resources:function(e,t,n){switch(n.type){case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(r);case wd.Type.CreateRunSuccess:case wd.Type.LoadLastCellRunSuccess:case wd.Type.LoadCellRunFromBatchSuccess:var o=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(o).set(n.resource.token,n.resource)}return t},executionCounts:function(e,t,n){switch(n.type){case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(r);case wd.Type.CreateRunSuccess:case wd.Type.LoadLastCellRunSuccess:case wd.Type.LoadCellRunFromBatchSuccess:var o=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(o).set(n.resource.token,n.resource.execution_count)}return t},resultTokens:function(e,t,n){switch(n.type){case wd.Type.CreateRunSuccess:case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(r);case wd.Type.LoadCellRunResultsSuccess:return t.set(n.runToken,Object(ho.d)(n.resultResources.map(function(e){return e.token})));case wd.Type.LoadCellRunResultSuccess:return t.has(n.runToken)?t.set(n.runToken,t.get(n.runToken).add(n.resultResource.token)):t.set(n.runToken,Object(ho.d)([n.resultResource.token]));case wd.Type.LoadLastCellRunSuccess:var o=A.b.cellLastRunTokensArray(e).get(n.cellToken);return t.remove(o);case U.Type.CreateRunSuccess:var i=A.b.cellRunTokensByNotebook(e,n.notebookToken);return t.filterNot(function(e,t){return i.has(t)})}return t},missingResults:function(e,t,n){switch(n.type){case wd.Type.LoadCellRunResultsFailure:if(n.error instanceof jc)return t.add(n.runToken)}return t}};var xd={loggedIn:!1,currentReportToken:null,currentAccountUsername:null,currentUserBelongsToReportContext:null,account:null,accountOrganizations:null,accountPreference:null,accountContext:null,accountContextSpaces:null,accountContextDatasources:null,accountContextFeatures:null,api:null,apiDatasources:null,definitionActions:yd,featureFlippers:{userFlippers:null,orgFlippers:null},selectedReport:ld,selectedDefinition:Id,reportContext:null,reportContextAvatar:{type:null,name:null,targetUrl:"#",initials:null,imageSrc:null,colorClass:null},reportContextDatasources:null,reportContextFeatures:null,reportContextSpaces:null,reportActions:gd,orgColorPalettes:[],expandedViewOpen:!1,notebooks:{books:Ad,cells:{tokens:Object(ho.d)(),contents:Object(ho.b)(),frozen:Object(ho.b)(),folded:Object(ho.b)(),contentTypes:Object(ho.b)(),createdAt:Object(ho.b)(),resources:Object(ho.b)(),executing:Object(ho.b)(),lastRunTokens:Object(ho.b)(),missingRuns:Object(ho.f)()},cellRuns:{tokens:Object(ho.d)(),resources:Object(ho.b)(),executionCounts:Object(ho.b)(),resultTokens:Object(ho.b)(),missingResults:Object(ho.f)()},cellRunResults:{tokens:Object(ho.d)(),resultTypes:Object(ho.b)(),contentTypes:Object(ho.b)(),contents:Object(ho.b)(),resources:Object(ho.b)()},editor:{selectedNotebookToken:null,selectedCellToken:null,isResultSelected:!1,isEditing:!1}}},Dd={loggedIn:function(e,t,n){switch(n.type){case te.a.LoadLoggedInState:return n.loggedIn}return t},currentReportToken:function(e,t,n){switch(n.type){case Zc.UpdateRoute:return n.payload.params.reportId}return t},currentAccountUsername:function(e,t,n){switch(n.type){case Zc.UpdateRoute:return n.payload.params.ownerId}return t},currentUserBelongsToReportContext:function(e,t,n){switch(n.type){case te.a.ComputeIfUserBelongsToReportContext:return n.result}return t},account:function(e,t,n){switch(n.type){case te.a.LoadAccountSuccess:return n.payload.account}return t},accountOrganizations:function(e,t,n){switch(n.type){case te.a.LoadAccountOrganizationsSuccess:return n.organizations}return t},accountPreference:function(e,t,n){switch(n.type){case te.a.LoadAccountPreferenceSuccess:return n.preferenceResource;case te.a.UpdatePreferenceSuccess:return t.generate(n.preferenceResource)}return t},accountContext:function(e,t,n){switch(n.type){case te.a.LoadAccountContextSuccess:return n.organization}return t},accountContextSpaces:function(e,t,n){switch(n.type){case te.a.LoadAccountContextSpacesSuccess:return n.spaces}return t},accountContextDatasources:function(e,t,n){switch(n.type){case te.a.LoadAccountContextDatasourcesSuccess:return n.datasources}return t},accountContextFeatures:function(e,t,n){switch(n.type){case te.a.LoadAccountContextFeaturesSuccess:return n.features}return t},api:function(e,t,n){switch(n.type){case te.a.LoadApi:return n.payload.api}return t},apiDatasources:function(e,t,n){switch(n.type){case te.a.LoadApiDatasourcesSuccess:return n.datasources}return t},definitionActions:bd,featureFlippers:{userFlippers:function(e,t,n){switch(n.type){case te.a.LoadFlippers:return n.userFlippers}return t},orgFlippers:function(e,t,n){switch(n.type){case te.a.LoadFlippers:return n.orgFlippers}return t}},selectedReport:sd,selectedDefinition:Sd,reportContext:function(e,t,n){switch(n.type){case te.a.LoadReportContext:return n.organization}return t},reportContextAvatar:ud,reportContextDatasources:function(e,t,n){switch(n.type){case te.a.LoadReportContextDatasourcesSuccess:return n.datasources}return t},reportContextFeatures:function(e,t,n){switch(n.type){case te.a.LoadReportContextFeaturesSuccess:return n.features}return t},reportContextSpaces:function(e,t,n){switch(n.type){case te.a.LoadReportContextSpacesSuccess:return n.spaces}return t},reportActions:md,orgColorPalettes:function(e,t,n){switch(n.type){case te.a.LoadAccountEmbeddedColorPalettesSuccess:return n.colorPalettes}return t},expandedViewOpen:function(e,t,n){switch(n.type){case gl.ExploreChartMark:return!0;case te.a.ToggleExpandedView:return n.expandedViewOpen;case Xs.CloseViewDataModal:return e.transient.explorer.isOpen;case hl.CloseAllModals:case gl.CloseExploration:return!1;case Zc.UpdateRoute:if(Object(y.includes)(n.payload.name,"reportShow.reports"))return $o.a.isPythonLightbox(Object(K.C)(e))||$o.a.isVizLightbox(Object(K.C)(e));if(!isExplorerUrl(e.router.name))return!1}return t},notebooks:{books:Md,cells:kd,cellRuns:Td,cellRunResults:{tokens:function(e,t,n){switch(n.type){case wd.Type.CreateRunSuccess:case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(r){var o=A.b.runsResultTokensArray(e).get(r);if(o)return t.filterNot(function(e){return o.contains(e)})}break;case wd.Type.LoadCellRunResultsSuccess:return t.merge(n.resultResources.map(function(e){return e.token}));case wd.Type.LoadCellRunResultSuccess:return t.add(n.resultResource.token);case wd.Type.LoadLastCellRunSuccess:var i=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(i){var a=e.client.notebooks.cellRuns.resultTokens.get(i);if(a)return t.filterNot(function(e){return a.contains(e)})}break;case U.Type.CreateRunSuccess:var l=A.b.cellRunResultTokensByNotebook(e,n.notebookToken);return t.filterNot(function(e,t){return l.has(t)})}return t},resultTypes:function(e,t,n){switch(n.type){case wd.Type.CreateRunSuccess:case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(r){var o=A.b.runsResultTokensArray(e).get(r);if(o)return t.removeAll(o)}break;case wd.Type.LoadCellRunResultsSuccess:return t.merge(n.resultResources.map(function(e){return[e.token,e.result_type]}));case wd.Type.LoadCellRunResultSuccess:return t.set(n.resultResource.token,n.resultResource.result_type);case wd.Type.LoadLastCellRunSuccess:var i=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(i){var a=A.b.runsResultTokensArray(e).get(i);return t.removeAll(a)}break;case U.Type.CreateRunSuccess:var l=A.b.cellRunResultTokensByNotebook(e,n.notebookToken);return t.filterNot(function(e,t){return l.has(t)})}return t},contentTypes:function(e,t,n){switch(n.type){case wd.Type.CreateRunSuccess:case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(r){var o=A.b.runsResultTokensArray(e).get(r);if(o)return t.removeAll(o)}break;case wd.Type.LoadCellRunResultsSuccess:return t.merge(n.resultResources.map(function(e){return[e.token,e.content_type]}));case wd.Type.LoadCellRunResultSuccess:return t.set(n.resultResource.token,n.resultResource.content_type);case wd.Type.LoadLastCellRunSuccess:var i=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(i){var a=A.b.runsResultTokensArray(e).get(i);return t.removeAll(a)}break;case U.Type.CreateRunSuccess:var l=A.b.cellRunResultTokensByNotebook(e,n.notebookToken);return t.filterNot(function(e,t){return l.has(t)})}return t},contents:function(e,t,n){switch(n.type){case wd.Type.CreateRunSuccess:case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(r){var o=A.b.runsResultTokensArray(e).get(r);if(o)return t.removeAll(o)}break;case wd.Type.LoadCellRunResultContentSuccess:return t.set(n.resultToken,n.content);case wd.Type.LoadLastCellRunSuccess:var i=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(i){var a=A.b.runsResultTokensArray(e).get(i);return t.removeAll(a)}break;case U.Type.CreateRunSuccess:var l=A.b.cellRunResultTokensByNotebook(e,n.notebookToken);return t.filterNot(function(e,t){return l.has(t)})}return t},resources:function(e,t,n){switch(n.type){case wd.Type.CreateRunSuccess:case Z.Type.DestroyCellSuccess:var r=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(r){var o=A.b.runsResultTokensArray(e).get(r);if(o)return t.removeAll(o)}break;case wd.Type.LoadCellRunResultsSuccess:return t.merge(n.resultResources.map(function(e){return[e.token,e]}));case wd.Type.LoadCellRunResultSuccess:return t.set(n.resultResource.token,n.resultResource);case wd.Type.LoadLastCellRunSuccess:var i=A.b.cellLastRunTokensArray(e).get(n.cellToken);if(i){var a=A.b.runsResultTokensArray(e).get(i);return t.removeAll(a)}break;case U.Type.CreateRunSuccess:var l=A.b.cellRunResultTokensByNotebook(e,n.notebookToken);return t.filterNot(function(e,t){return l.has(t)})}return t}},editor:{selectedNotebookToken:function(e,t,n){return t},selectedCellToken:function(e,t,n){switch(n.type){case Z.Type.Select:case Z.Type.BeginEdit:return n.cellToken;case Z.Type.AddCellSuccess:return n.cellResource.token;case Z.Type.DestroyCell:var r=A.b.selectedNextCellToken(e);if(null!=r)return r;var o=A.b.cellTokensByNotebook(e,A.b.selectedNotebookToken(e)).toArray();if(o.length>1){var i=o.indexOf(n.cellToken);if(i>=0)return o[i-1]}return null;case Z.Type.LoadNotebookCellsSuccess:return n.cellResources[0]&&n.cellResources[0].token}return t},isResultSelected:function(e,t,n){switch(n.type){case Z.Type.Select:return n.resultPane;case Z.Type.BeginEdit:return!1}return t},isEditing:function(e,t,n){switch(n.type){case Z.Type.AddCellSuccess:return!0;case Z.Type.BeginEdit:return!A.b.cellFrozenArray(e).get(n.cellToken);case Z.Type.Select:case Z.Type.EndEdit:case Z.Type.UpdateCell:case Z.Type.DestroyCell:return!1}return t}}}};var Ld=function(e,t,n){switch(n.type){case Zc.UpdateRoute:return{name:n.payload.name,url:n.payload.url,params:n.payload.params}}return t},Rd=n("xEvw"),Nd=n("0e28"),Ed=n("sGhr");var jd={reports:new Hc.a("token"),datasets:new Hc.a,filterFields:{keys:[],byKey:{}},filterControls:new Hc.a},Od={reports:function(e,t,n){var r;switch(n.type){case Wc.a.LoadReportResources:return t.mergeRecords(n.payload);case Wc.a.RenameReport:return(r=t.byKey.get(n.payload.token).generate(t.byKey.get(n.payload.token))).name=n.payload.name,r.description=n.payload.description,t.mergeRecord(r)}return t},datasets:function(e,t,n){switch(n.type){case dd.FilterReportDatasetsSuccess:return t.mergeRecords(n.payload);case dd.FilterReportDatasetsFailure:console.warn(n.error)}return t},filterFields:function(e,t,n){switch(n.type){case dd.LoadReportFilterFields:return Object(Hc.b)(n.payload)}return t},filterControls:function(e,t,n){switch(n.type){case dd.LoadReportFilterResources:return t.mergeRecords(n.payload.map(function(e){return Nd.d.buildFromResource(e)}));case dd.CreateReportFilterSuccess:return t.mergeRecords([Nd.d.buildFromResource(n.payload)]);case dd.DestroyReportFilterSuccess:return t.removeRecords([Nd.d.buildFromResource(n.payload)]);case dd.UpdateReportFilterSuccess:return t.mergeRecords([Nd.d.buildFromResource(n.payload)]);case dd.ResetReportFilter:var r=t.byKey.get(n.payload.id);if(!r)return t;switch(r.filterType){case Rd.b.Single:case Rd.b.Multi:case Rd.b.Range:return t.mergeRecords([r.with({selected:r.default})]);default:return t}case dd.UpdateReportFilterTypeSuccess:var o=Nd.d.buildFromResource(n.payload.resource);switch(o.filterType){case Rd.b.Single:n.payload.control.filterType===Rd.b.Single&&(o=o.with({selected:n.payload.control.selected}));break;case Rd.b.Multi:n.payload.control.filterType===Rd.b.Multi&&(o=o.with({selected:n.payload.control.selected}));break;case Rd.b.Range:n.payload.control.filterType===Rd.b.Range&&(o=o.with({selected:n.payload.control.selected}))}return t.mergeRecords([o]);case dd.UpdateReportFilterDefaultsSuccess:for(var i=new Array,a=0,l=n.payload;a<l.length;a++){var s=l[a],c=Nd.d.buildFromResource(s),d=t.byKey.get(c.id);if(d)switch(c.filterType){case Rd.b.Single:d.filterType===Rd.b.Single&&i.push(d.with({default:c.default,selected:c.default}));break;case Rd.b.Multi:d.filterType===Rd.b.Multi&&i.push(d.with({default:c.default,selected:c.default}));break;case Rd.b.Range:d.filterType===Rd.b.Range&&i.push(d.with({default:c.default,selected:c.default}))}}return t.mergeRecords(i);case dd.UpdateReportFilterPositionSuccess:var u=new Array;return n.payload.forEach(function(e){var n=t.byKey.get(e.token);if(n)switch(n.filterType){case Rd.b.Single:case Rd.b.Multi:case Rd.b.Range:u.push(n.with({position:e.row_order}))}}),t.mergeRecords(u);case dd.LoadReportFilterOptsSuccess:var p=new Array;return n.payload.forEach(function(e){var n=t.byKey.get(e.id);n&&(e.filterType===Rd.b.Single&&n.filterType===Rd.b.Single&&p.push(n.with({options:new Ed.b({isLoaded:!0,values:Object(ho.a)(e.values)})})),e.filterType===Rd.b.Multi&&n.filterType===Rd.b.Multi&&p.push(n.with({options:new Ed.b({isLoaded:!0,values:Object(ho.a)(e.values)})})),e.filterType===Rd.b.Range&&n.filterType===Rd.b.Range&&p.push(n.with({options:new Ed.d({isLoaded:!0,values:new Ed.c(e.values)})})))}),t.mergeRecords(p);case dd.LoadReportFilterOptsFailure:console.warn(n.error);break;case dd.ApplyReportFilters:return t.mergeRecords(n.payload);case dd.ResetReportFilters:for(var h=new Array,g=0,m=n.payload;g<m.length;g++){var f=m[g],C=t.byKey.get(f.id);if(C)switch(C.filterType){case Rd.b.Single:case Rd.b.Multi:case Rd.b.Range:h.push(C.with({selected:C.default}))}}return t.mergeRecords(h)}return t}};function getDatasourceId(e){return null!=e&&void 0!==e?e.toString():""}var Pd,Fd={selectedQueryToken:null,highlightedQueryText:null,editorIsDirty:!1,reports:new Hc.a("token")},zd={selectedQueryToken:function(e,t,n){switch(n.type){case Q.c.SelectReport:return n.payload.selectedQueryToken;case Q.c.SelectQuery:return n.token;case Pc.a.BatchUpdateQueries:var r=n.payload.find(function(e){return e.mapping_id===t});return r&&r.token||t;case Q.c.SelectChart:return n.payload.selectedQueryToken;case Q.c.SelectTable:return n.queryToken}return t},highlightedQueryText:function(e,t,n){switch(n.type){case Q.c.HighlightQueryText:return n.queryText;case Q.c.SelectQuery:return null}return t},editorIsDirty:function(e,t,n){switch(n.type){case Wc.a.UpdateReportState:case Wc.a.UpdateReportSuccess:case Wc.a.LoadReportResources:case Pc.a.UpdateQueryState:case Pc.a.UpdateQuerySuccess:case Pc.a.FormatQuerySuccess:case Pc.a.SaveQuerySuccess:var r=Object(K.S)(e);return r&&So.a.hasBeenRun(r)&&(!function(e){return e.client.selectedReport.queries.getRecords().reduce(function(e,t){return e?!!t.token&&(n=t).name===n.resource.name&&n.raw_query===n.resource.raw_query&&getDatasourceId(n.data_source_id)===getDatasourceId(n.resource.data_source_id):e;var n},!0)}(e)||!function(e){var t=e.client.selectedReport.reportLayout,n=e.persistent.reports.getRecord(e.client.selectedReport.report.token);return n&&t===n.layout}(e));case Pc.a.BatchUpdateQueries:case Q.c.SelectReport:return!1}return t},reports:function(e,t,n){switch(n.type){case Wc.a.LoadReportResources:return t.mergeRecords(n.payload)}return t}},_d=n("iJVT");!function(e){(Pd||(Pd={})).encode=function(e,t,n){for(var r=0,o=n;r<o.length;r++){var i=o[r],a={id:i.name,formula:i.name,variable:{type:fr.VariableType.DISCRETE}};t=_d.a.addNamesOrFilter(e,t,a,name,i.value).encoding}return Object(Ha.s)(t)}}();var $d=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};var Bd,Vd={chart:null,originalChart:null,chartDesigner:{chartPane:{view:fl.PaneView.Regular},dataPane:{view:fl.PaneView.Regular,dataset:{encoding:null,summary:null}}},isOpen:!1,isFocused:!1},Ud={chart:function(e,t,n){var r;switch(Object(K.r)(e),n.type){case qc.a.PollReportRunComplete:if(isExplorerUrl(e.router.name)){var o=e.router.params.vizId;return Ae.a.Parameterized.getNormalizedChart(e,o)}break;case gl.ExploreChart:return Ae.a.Parameterized.getNormalizedChart(e,n.token);case gl.ExploreChartMark:o=n.chartToken,n.target;var i=n.filters,a=Ae.a.Parameterized.getNormalizedChart(e,o),l=e.client.selectedReport.chartModels.getRecord(a.queryToken).model;return $d({},a,{encoding:Pd.encode(l,a.encoding,i).encoding});case gl.ExploreChartWithData:return Ae.a.Parameterized.getNormalizedChart(e,n.chartToken);case gl.UpdateTypeComplete:return $d({},t,{chartType:n.chartType});case gl.UpdateEncoding:return Object(Wa.m)(Object(Wa.k)(t,"update chart settings"),e.client.selectedReport.chartModels.getRecord(t.queryToken).model,n.result,n.pillAction);case gl.ClearEncoding:var s=Object(Ha.r)(t.chartType);return $d({},Object(Wa.k)(t,"clear chart settings"),{encoding:s.encoding});case gl.ResetEncoding:var c=Object(K.n)(e);return $d({},Object(Wa.k)(t,"reset chart settings"),{encoding:c.encoding,chartType:c.chartType,colorPaletteToken:c.colorPaletteToken,format:c.format});case gl.ClearFilters:return $d({},Object(Wa.k)(t,"clear chart filters"),{encoding:Object(Ha.j)(t.encoding).encoding});case gl.ClearSorts:return $d({},Object(Wa.k)(t,"clear chart sorts"),{encoding:Object(Ha.k)(t.encoding).encoding});case gl.QuickSort:return $d({},Object(Wa.k)(t,"quick sort"),{encoding:Object(Ha.w)(t.encoding,n.descending).encoding});case gl.RemoveSort:return $d({},Object(Wa.k)(t,"remove sort on "+n.source),{encoding:Object(Ha.A)(t.encoding,n.source).encoding});case gl.Undo:return Object(Wa.j)(t,Object(K.A)(e).getRecord(t.queryToken));case gl.Redo:return Object(Wa.i)(t,Object(K.A)(e).getRecord(t.queryToken));case gl.SwapAxes:return $d({},Object(Wa.k)(t,"swap axes"),{chartType:Object(Ha.C)(t.chartType),encoding:Object(Ha.B)(t.encoding)});case gl.DrillDown:var d=t.encoding;return l=Object(K.A)(e).getRecord(t.queryToken).model,$d({},Object(Wa.k)(t,"drill down"),{encoding:Xc.a.encode(l,d,n.target).encoding,chartType:Xc.a.newChartType(t.chartType,n.target)});case gl.ChangeHierarchy:return $d({},Object(Wa.k)(t,"change hierarchy"),{encoding:Object(Ha.i)(t.encoding,Object(K.A)(e).getRecord(t.queryToken).model,n.forward).encoding});case gl.UpdateFormat:return Object(Wa.n)(t,n.format);case gl.UpdateColors:var u=Object(Wa.n)(t,$d({},t.format,{colors:$d({},t.format.colors,n.colors)})),p=(l=Object(K.A)(e).getRecord(t.queryToken).model,Object(Wa.c)(u,l));return $d({},u,{colorPaletteToken:n.palette||t.colorPaletteToken,format:$d({},u.format,{colors:$d({},u.format.colors,{map:Object(Wa.l)(p,p.format,l)})})});case gl.UpdateSeriesSpecificColor:return Object(Wa.n)(t,$d({},t.format,{colors:$d({},t.format.colors,{map:$d({},t.format.colors.map,(r={},r[n.seriesName]=n.color,r))})}))}return t},originalChart:function(e,t,n){switch(n.type){case qc.a.PollReportRunComplete:if(isExplorerUrl(e.router.name)){var r=e.router.params.vizId;return Ae.a.Parameterized.getNormalizedChart(e,r)}break;case gl.ExploreChart:return Ae.a.Parameterized.getNormalizedChart(e,n.token);case gl.ExploreChartMark:n.target;var o=n.filters,i=Ae.a.Parameterized.getNormalizedChart(e,n.chartToken),a=e.client.selectedReport.chartModels.getRecord(i.queryToken).model;return $d({},i,{encoding:Pd.encode(a,i.encoding,o).encoding});case gl.ExploreChartWithData:return Ae.a.Parameterized.getNormalizedChart(e,n.chartToken);default:return t}},chartDesigner:function(e,t,n){var r=e.transient.explorer.chart;switch(n.type){case gl.Undo:case gl.Redo:case gl.ClearEncoding:case gl.CloseExploration:case hl.CloseAllModals:return $d({},t,{dataPane:$d({},t.dataPane,{dataset:{summary:null,encoding:null}})});case gl.UpdateEncoding:var o=r.encoding;return Object(y.isEqual)(n.result.encoding,o)?t:$d({},t,{dataPane:$d({},t.dataPane,{dataset:{summary:null,encoding:null}})});case gl.MinimizeChartPane:case gl.MaximizeDataPane:return $d({},t,{chartPane:$d({},t.chartPane,{view:t.chartPane.view===fl.PaneView.Minimized?fl.PaneView.Regular:fl.PaneView.Minimized}),dataPane:$d({},t.dataPane,{view:t.dataPane.view===fl.PaneView.Maximized?fl.PaneView.Regular:fl.PaneView.Maximized})});case gl.MaximizeChartPane:case gl.MinimizeDataPane:return $d({},t,{chartPane:$d({},t.chartPane,{view:t.chartPane.view===fl.PaneView.Maximized?fl.PaneView.Regular:fl.PaneView.Maximized}),dataPane:$d({},t.dataPane,{view:t.dataPane.view===fl.PaneView.Minimized?fl.PaneView.Regular:fl.PaneView.Minimized})});case gl.LoadChartSummaryDataSuccess:return $d({},t,{dataPane:$d({},t.dataPane,{dataset:$d({},t.dataPane.dataset,{summary:n.result,encoding:n.encoding})})});default:return t}},isOpen:function(e,t,n){switch(n.type){case Zc.UpdateRoute:return isExplorerUrl(e.router.name);case gl.ExploreChart:case gl.ExploreChartMark:case gl.ExploreChartOnLoad:case gl.ExploreChartWithData:case gl.ViewChartData:return!0;case gl.CloseExploration:case hl.CloseAllModals:return!1}return t},isFocused:function(e,t,n){switch(n.type){case gl.ExploreChart:case gl.ExploreChartMark:case gl.ExploreChartOnLoad:return!0;case gl.ExploreChartWithData:case gl.ViewChartData:case hl.CloseAllModals:return!1;case Xs.CloseViewDataModal:return e.transient.explorer.isOpen}return t}};!function(e){var t;!function(e){e.EnterFullscreen="[Window] EnterFullscreen",e.EnterFullscreenFailure="[Window] EnterFullscreenFailure",e.EnterFullscreenSuccess="[Window] EnterFullscreenSuccess",e.ExitFullscreen="[Window] ExitFullscreen"}(t=e.Type||(e.Type={}));var n=function(){return function(e){this.element=e,this.type=t.EnterFullscreen}}();e.EnterFullscreen=n;var r=function(){return function(e){this.error=e,this.type=t.EnterFullscreenFailure}}();e.EnterFullscreenFailure=r;var o=function(){return function(){this.type=t.EnterFullscreenSuccess}}();e.EnterFullscreenSuccess=o;var i=function(){return function(){this.type=t.ExitFullscreen}}();e.ExitFullscreen=i}(Bd||(Bd={}));var Zd={report:jd,editor:Fd,explorer:Vd,accountPreference:void 0,window:{isFullscreen:!1}},Gd={report:Od,editor:zd,explorer:Ud,accountPreference:function(e,t,n){switch(n.type){case te.a.LoadAccountPreferenceSuccess:return n.preferenceResource;case te.a.UpdatePreference:return Object(y.merge)(o.a.copy(t),n.params);case Q.c.ToggleNotebookSidebar:return Object(y.merge)(o.a.copy(t),{notebook_sidebar:{open:!t.notebook_sidebar.open,items:{intro:!1,shortcuts:!0}}})}return t},window:{isFullscreen:function(e,t,n){switch(n.type){case Bd.Type.EnterFullscreenSuccess:return!0;case Bd.Type.EnterFullscreenFailure:case Bd.Type.ExitFullscreen:return!1}return t}}};var Yd=function(e,t,n){switch(n.type){case Wc.a.LoadReportResources:return t.mergeRecords(n.payload);case Wc.a.UpdateReportSuccess:return t.mergeRecords([n.payload.report]);case Wc.a.UpdateSelectedReportSpaceSuccess:return t.mergeRecords([Object(y.assign)(t.getRecords()[0],{space_token:n.payload.space._resource.token})])}return t};var Qd,Hd={reports:new Hc.a("token"),reportFilters:new Hc.a("token")},Wd=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]?n[o]=e[o]:"object"==typeof e[o]&&(n[o]=combineReducers(e[o]))}var i=Object.keys(n);return function(e,t){void 0===e&&(e={});for(var r=!1,o=Gc({},e),a=0;a<i.length;a++){var l=i[a],s=n[l],c=e[l],d=s(o,o[l],t);y.extend(o[l],d),r=r||d[l]!==c}return r?o:e}}({router:Ld,client:Dd,persistent:{reports:Yd,reportFilters:function(e,t,n){switch(n.type){case dd.LoadReportFilterResources:return t.mergeRecords(n.payload);case dd.CreateReportFilterSuccess:return t.mergeRecords([n.payload]);case dd.DestroyReportFilterSuccess:return t.removeRecords([n.payload]);case dd.UpdateReportFilterSuccess:return t.mergeRecords([n.payload]);case dd.UpdateReportFilterDefaultsSuccess:return t.mergeRecords(n.payload)}return t}},transient:Gd}),qd={router:{name:"",url:"",params:{}},client:xd,transient:Zd,persistent:Hd},Jd=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Xd=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kd=function(e){function ActionSubject(){return null!==e&&e.apply(this,arguments)||this}return Jd(ActionSubject,e),ActionSubject.prototype.ofType=function(e){return this.filter(function(t){return t.type===e}).map(function(t){return t.type===e?t:null})},ActionSubject}(V.BehaviorSubject),eu=function(){function RxStoreService(){var e=this;this._state=new V.BehaviorSubject(qd),this.actions$=new Kd({type:Oc.Init}),this.actions$.observeOn($c.queue).withLatestFrom(V.Observable.from([Wd])).scan(this.reduceState,qd).subscribe(function(t){e._state.next(t)},function(e){console.error(e)})}return Object.defineProperty(RxStoreService.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(RxStoreService.prototype,"actions",{get:function(){return this.actions$},enumerable:!0,configurable:!0}),RxStoreService.prototype.select=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if("string"==typeof e)t=Vc.pluck.call.apply(Vc.pluck,[this._state,e].concat(n));else{if("function"!=typeof e)throw new TypeError("Unexpected type '"+typeof e+"' in select operator, expected 'string' or 'function'");t=Bc.map.call(this._state,e)}return Uc.distinctUntilChanged.call(t)},RxStoreService.prototype.selectWithParam=function(e,t){var n;return n=this._state.combineLatest(t.filter(function(e){return null!=e}),e),Uc.distinctUntilChanged.call(n)},RxStoreService.prototype.dispatch=function(e){e&&e.type&&Pr.a.attemptOrLog(fo.a.leaveBreadcrumbSafely,"DISPATCH:RX",{type:e.type}),e.hasOwnProperty("error")&&console.error(e.type,e.error),this.actions$.next(e)},RxStoreService.prototype.reduceState=function(e,t){var n=t[0],r=t[1];return Xd({},e,r(e,n))},RxStoreService}(),tu=function(){function RouterStoreService(e,t,n){var r=this;this.$rootScope=e,this.$state=t,this._storeService=n,this.updateRouterState(t.current,t.params),e.$on("$stateChangeSuccess",function(e,t,n,o,i){r.updateRouterState(t,n)}),n.actions.filter(function(e){return e.type===gl.ExploreChart}).map(function(e){return e.type===gl.ExploreChart?e:null}).subscribe(function(e){t.go(".chart",{vizId:e.token})}),n.actions.filter(function(e){return e.type===Xs.CloseViewDataModal}).map(function(e){return e.type===Xs.CloseViewDataModal?e:null}).withLatestFrom(n.select(Tl.getModalIsOpen),n.select(Tl.getChart)).subscribe(function(e){e[0];var n=e[1],r=e[2];n&&t.go(".chart",{vizId:r.token})}),n.actions.filter(function(e){return e.type===gl.CloseExploration}).map(function(e){return e.type===gl.CloseExploration?e:null}).withLatestFrom(n.select(K.C)).subscribe(function(e){e[0];null!=e[1].params.vizId&&t.go("^")}),n.actions.filter(function(e){return e.type===hl.CloseAllModals}).map(function(e){return e.type===hl.CloseAllModals?e:null}).withLatestFrom(n.select(K.C)).subscribe(function(e){e[0];null!=e[1].params.vizId&&t.go("^")})}return Object.defineProperty(RouterStoreService.prototype,"store",{get:function(){return this._storeService},enumerable:!0,configurable:!0}),RouterStoreService.prototype.updateRouterState=function(e,t){this.store.dispatch({type:Zc.UpdateRoute,payload:{name:e.name,url:e.url,params:t}})},RouterStoreService.$inject=["$rootScope","$state","RxStoreService"],RouterStoreService}(),nu=n("rauQ"),ru=n.n(nu),ou=$("meta[name=algolia-id]").attr("content"),iu=($("meta[name=algolia-key]").attr("content"),$("meta[name=algolia-security-tags]").attr("content"),$("meta[name=algolia-user-token]").attr("content")),au=$("meta[name=search-settings]").attr("content"),lu=12e4,su=$("meta[name=editor-showcase]").attr("content"),cu=function(){function SearchService(e,t,n){var r=this;this.$q=e,this.$timeout=t,this.$http=n,this.searchCacheTimeout=lu,this.attrMap={table:["objectType","objectID","name","fullName","description","schema","columns","viewCount","createdAt","updatedAt","webPath","showPath","accountUsername"],tableAlphabetical:["objectType","objectID","name","fullName","description","schema","columns","viewCount","createdAt","updatedAt","webPath","showPath","accountUsername"],user:["objectType","objectID","name","username","viewCount","createdAt","updatedAt","webPath","avatar","email","token"],userEmail:["objectType","objectID","name","username","viewCount","createdAt","updatedAt","webPath","avatar","email","token"],group:["objectType","objectID","name","memberCount","webPath","apiPath","token","groupType"],report:["objectType","dataSourceID","token","name","description","queryKeywords","viewCount","reportAccountUsername","createdAt","updatedAt","webPath","public","id"],reportLastEdited:["objectType","dataSourceID","token","name","description","queryKeywords","viewCount","reportAccountUsername","createdAt","updatedAt","webPath","public","id"],reportLastRun:["objectType","dataSourceID","token","name","description","queryKeywords","viewCount","reportAccountUsername","createdAt","updatedAt","webPath","public","id"],reportCreated:["objectType","dataSourceID","token","name","description","queryKeywords","viewCount","reportAccountUsername","createdAt","updatedAt","webPath","public","id"],dataSourceTable:["objectType","accountID","objectID","dataSourceID","name","fullName","schema","columns","columnNames","dataSourceName","dataSourceAccountUsername","webPath","showPath"],dataSourceTableAlphabetical:["objectType","accountID","objectID","dataSourceID","name","fullName","schema","columns","columnNames","dataSourceName","dataSourceAccountUsername","webPath","showPath"],organization:["objectType","objectID","name","username","viewCount","createdAt","updatedAt","webPath","avatar"],dataSource:["objectType","objectID","name","accountUsername","adapter","createdAt","updatedAt","webPath"],definition:["objectType","objectID","name","token","source","description","created_at","updated_at","creatorUsername","webEditPath"],definitionAlphabetical:["objectType","objectID","name","token","source","description","created_at","updated_at","creatorUsername","webEditPath"]},this.settingsResponseMap={"Report-relevance":"report","Report-created":"reportCreated","Report-last-edited":"reportLastEdited","Report-last-run":"reportLastRun","Report-alphabetical":"reportAlphabetical","Report-alphabetical-desc":"reportAlphabeticalDesc","Definition-relevance":"definition","Definition-alphabetical":"definitionAlphabetical","DataSource-relevance":"dataSource","DataSourceTable-relevance":"dataSourceTable","DataSourceTable-alphabetical":"dataSourceTableAlphabetical","Table-relevance":"table","Table-alphabetical":"tableAlphabetical","User-relevance":"user","User-email":"userEmail","Organization-relevance":"organization","UserGroup-relevance":"group"},this.deferredClients=e.defer(),this.indexMap={},this.algoliaMap={},this.indexClientMap={},this.clients={},this.showcaseTableArray=su?su.split(","):[],this.fetchAlgoliaSearchSettings().then(function(e){Object(y.forOwn)(e,function(e,t){r.clients[e.key]||(r.clients[e.key]=ru()(ou,e.key),r.clients[e.key].setUserToken(iu)),r.algoliaMap[e.indexName]=r.settingsResponseMap[t],r.indexMap[r.settingsResponseMap[t]]=e.indexName,r.indexClientMap[r.algoliaMap[e.indexName]]=e.key}),r.deferredClients.resolve()})}return Object.defineProperty(SearchService.prototype,"INDEX_MAP",{get:function(){return this.algoliaMap},enumerable:!0,configurable:!0}),SearchService.prototype.query=function(e){var t=this;return this.deferredClients.promise.then(function(){return t.handleQuery(e)})},SearchService.prototype.executeClientSearch=function(e,t,n){var r=this,o=this.$q.defer();return n.clearCache&&e.clearCache(),e.search(t).then(function(e){return r.getClientResponse(n,e)}).then(o.resolve).catch(o.reject),this.searchCachePromise&&this.$timeout.cancel(this.searchCachePromise),this.searchCachePromise=this.$timeout(function(){e.clearCache()},this.searchCacheTimeout),o.promise},SearchService.prototype.showcaseTables=function(e){var t=this;return this.deferredClients.promise.then(function(){var n=t.$q.defer(),r=t.showcaseTableArray.slice();r.push(e.user);var o=(r=r.map(function(e){return"schema_"+e})).map(function(e){var n={hitsPerPage:30,attributesToRetrieve:t.attrMap.tableAlphabetical,restrictSearchableAttributes:["schema"],tagFilters:e};return{indexName:t.indexMap.tableAlphabetical,query:"",params:n}});return t.clients[t.indexClientMap.tableAlphabetical].search(o).then(function(e){var t=[];e.results.forEach(function(e){t=t.concat(e.hits)}),n.resolve(t)}).catch(n.reject),n.promise})},SearchService.prototype.getClientResponse=function(e,t){var n=this;if(e.rawResults)return t;var r={};return t.results.forEach(function(e){r[n.algoliaMap[e.index]]=e.hits}),r},SearchService.prototype.handleQuery=function(e){var t=this,n=Object(y.filter)(e.indexes,function(e){return t.indexMap[e]}).map(this.buildIndexOptions.bind(this,e)),r=Object(y.groupBy)(n,"clientKey");if(1==Object(y.size)(r)){var o=Object(y.keys)(r)[0];return this.executeClientSearch(this.clients[o],r[o],e)}return this.$q.all(Object(y.map)(r,function(n,r){return t.executeClientSearch(t.clients[r],n,e)})).then(function(n){return t.mergeSearchResults(e.rawResults,n)})},SearchService.prototype.buildIndexOptions=function(e,t){var n={hitsPerPage:e.perPage,attributesToRetrieve:this.attrMap[t]};return e.filters&&e.filters[t]?n.tagFilters=e.filters[t]:"string"==typeof e.filters&&(n.tagFilters=e.filters),e.facets&&e.facets[t]&&(n.facetFilters=e.facets[t],n.facets="*"),e.page&&e.page[t]?n.page=e.page[t]:"number"==typeof e.page&&(n.page=e.page),e.range&&(n.numericFilters=e.range),e.queryType&&(n.queryType=e.queryType),e.typoTolerance&&(n.typoTolerance=e.typoTolerance),e.advancedSyntax&&(n.advancedSyntax=e.advancedSyntax),e.restrictAttributes&&e.restrictAttributes[t]&&(n.restrictSearchableAttributes=e.restrictAttributes[t]),{indexName:this.indexMap[t],clientKey:this.indexClientMap[t],query:e.query,params:n}},SearchService.prototype.mergeSearchResults=function(e,t){return e?{results:Object(y.reduceRight)(t,function(e,t){return e.concat(t.results)},[])}:y.merge.apply(null,t)},SearchService.prototype.fetchAlgoliaSearchSettings=function(){var e=this.$q.defer();return this.$http.get(au).then(function(t){e.resolve(t.data.settings)},function(t){e.reject(t)}),e.promise},SearchService.$inject=["$q","$timeout","$http"],SearchService}(),du=n("kdBv"),uu=n("AKo7");!function(e){var t=uu.a.QuarterNamesByNumber,n=uu.a.WeekdayNamesByNumber,r=uu.a.MonthNamesByNumber;function makeLine(e,t,n){var r=new Array,o=t.marks,i=o.series,a=o.properties,l=i.length?i[0].properties:a,s=t.x[0],c=l.color.values[0];if(s){var d=n.x,u=d.name,p=d.value;(h=makeFilter(e,t,makeField(e,s),u,p))&&r.push(h)}if(c){var h,g=n.series.color,m=g.name;p=g.value;(h=makeFilter(e,t,makeField(e,c),m,p))&&r.push(h)}return r}function makePie(e,t,n){var r=new Array,o=t.marks,i=o.series,a=o.properties,l=(i.length?i[0].properties:a).color.values[0];if(l){var s=n.series.color,c=s.name,d=s.value,u=makeFilter(e,t,makeField(e,l),c,d);u&&r.push(u)}return r}function makeField(e,t){return e.buildViewCalcField(t.formula,t.variable.type,t.id)}function makeFilter(e,o,i,a,l){if(i.name!==fr.SystemFieldName.NAMES&&i.type===du.FieldType.VIEWCALC)return{field:i,selection:function(e,o,i,a){var l=function(){return new Set(a.map(function(e){return parseFloat(e)}))},s=function(e){return{selected:e,mode:fr.SelectionMode.INCLUDE,type:fr.ConditionType.SELECTION}};if(i.type===du.FieldType.VIEWCALC)switch(i.formula.form){case fr.FormType.DATEFUNC:var c=new Set;if("DATETRUNC"===i.formula.funcName)c=l();else switch(i.formula.datePart.toUpperCase()){case"WEEKDAY":c=new Set(a.map(function(e){return n[e]}));break;case"MONTH":c=new Set(a.map(function(e){return r[e]}));break;case"QUARTER":c=new Set(a.map(function(e){return t[e]}));break;default:c=l()}return s(c);default:switch(i.dataType){case fr.DataType.BOOLEAN:return s(new Set(a.map(function(e){return!0===e||"true"===e})));case fr.DataType.STRING:return s(new Set(a.map(function(e){return""+e})));case fr.DataType.DATE:case fr.DataType.DATETIME:return s(l());case fr.DataType.INTEGER:case fr.DataType.FLOAT:case fr.DataType.NUMBER:return s(l())}}}(0,0,i,[l]),varType:fr.VariableType.DISCRETE}}e.makeFilters=function(e,t,n){var r=!1,o=!1,i=function(e){return fr.MarkType.Line,e.marks.series.length>0?e.marks.series[0].properties.type.value:e.marks.properties.type.value}(t);switch(t.marks.series.length>1&&(o=!0),t.x.length>0&&t.x[0].formula===fr.SystemFieldName.NAMES&&(r=!0),t.marks.series.length&&t.marks.series[0].properties.size.values.length,i){case fr.MarkType.Bar:return o?function(e,t,n){var r=new Array,o=t.x[0];if(o){var i=n.x,a=i.name,l=i.value,s=makeField(e,o),c=makeFilter(e,t,s,a,l);c&&r.push(c)}return r}(e,t,n):r?function(e,t,n){var r=new Array,o=t.marks,i=o.series,a=o.properties,l=i.length?i[0].properties:a,s=t.column[0],c=l.color.values[0];if(s){var d=n.columns[0],u=d.name,p=d.value,h=makeField(e,s),g=makeFilter(e,t,h,u,p);g&&r.push(g)}if(c){var m=n.series.color,f=m.name,p=m.value,h=makeField(e,c),g=makeFilter(e,t,h,f,p);g&&r.push(g)}return r}(e,t,n):function(e,t,n){return makeLine(e,t,n)}(e,t,n);default:case fr.MarkType.Line:return makeLine(e,t,n);case fr.MarkType.Area:case fr.MarkType.TotalArea:case fr.MarkType.Circle:return function(e,t,n){return makeLine(e,t,n)}(e,t,n);case fr.MarkType.Pie:return makePie(e,t,n);case fr.MarkType.Donut:return function(e,t,n){return makePie(e,t,n)}(e,t,n)}}}(Qd||(Qd={}));var pu,hu=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},gu=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};!function(e){e.summary=function(e,t){return hu(this,void 0,void 0,function(){return gu(this,function(n){return t=Object(Ha.m)(t),[2,fr.PivotBuilder.makePivot(e,t).execute(e)]})})},e.fromTarget=function(e,t,n){return hu(this,void 0,void 0,function(){var r,o,i,a,l;return gu(this,function(s){return t=Object(Ha.m)(t),r=fr.PivotBuilder.makeFilters(e,t),o=Qd.makeFilters(e,t,n),i=_d.a.make(e,t,n).encoding,a=fr.PivotBuilder.makePivot(e,i).execute(e),l=e.onFilter(function(e){for(var t=0,n=r;t<n.length;t++){var i=n[t];e.where(i)}for(var a=0,l=o;a<l.length;a++)i=l[a],e.where(i)}).execute(),[2,{encoding:i,summary:a,complete:l}]})})}}(pu||(pu={}));var mu=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fu=function(){function ChartViewService(e,t,n){var r=this;this.store=e,this.ChartModel=t,this.wms=n,this.store.actions.filter(function(e){return e.type===hl.ViewChartData}).map(function(e){return e.type===hl.ViewChartData?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),this.store.select(K.O)).switchMap(function(e){var t=e[0],n=e[1],o=e[2],i=t.target,a=t.chartToken,l=t.queryToken,s=n.getRecord(a),c=o.getRecord(l).model,d=(s.title,s.format),u=s.encResult.encoding;return pu.fromTarget(c,u,i).then(function(e){var t=e.encoding,n=e.summary,o=e.complete,s={format:d,model:c,encoding:t,summary:n,complete:o};return r.store.dispatch({target:i,chartToken:a,queryToken:l,result:s,type:hl.ViewChartDataSelectSuccess})}).catch(function(e){return r.store.dispatch({target:i,chartToken:a,queryToken:l,error:e,type:hl.ViewChartDataSelectFailure})})}).subscribe(),this.store.actions.filter(function(e){return e.type===Qc.ChangeHierarchy}).map(function(e){return e.type===Qc.ChangeHierarchy?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.chartToken)}}).subscribe(function(e){var t=e.chart;return r.updateEmbeddedViz(t)}),this.store.actions.filter(function(e){return e.type===Qc.DrillDown}).map(function(e){return e.type===Qc.DrillDown?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.chartToken)}}).subscribe(function(e){var t=e.chart;return r.updateEmbeddedViz(t)}),this.store.actions.filter(function(e){return e.type===Qc.Undo}).map(function(e){return e.type===Qc.Undo?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.token)}}).subscribe(function(e){var t=e.chart;return r.updateEmbeddedViz(t)}),this.store.actions.filter(function(e){return e.type===Qc.Redo}).map(function(e){return e.type===Qc.Redo?e:null}).withLatestFrom(this.store.select(Ae.a.getCharts),function(e,t){return{action:e,chart:t.getRecord(e.token)}}).subscribe(function(e){var t=e.chart;return r.updateEmbeddedViz(t)})}return ChartViewService.prototype.updateEmbeddedViz=function(e){var t;this.wms.postMessage({type:ps.a.ReportVizUpdate,updateVizOptions:{type:"chart",options:(t={},t[e.token]=mu({},e.resource.view_vegas,{format:e.format,encoding:e.encResult.encoding,chartType:e.chartType}),t)}})},ChartViewService.prototype.openChart=function(e){this.store.dispatch({type:gl.ExploreChart,token:e.token})},ChartViewService.prototype.undo=function(e){this.store.dispatch({type:Qc.Undo,token:e})},ChartViewService.prototype.redo=function(e){this.store.dispatch({type:Qc.Redo,token:e})},ChartViewService.prototype.quickSort=function(e,t){this.store.dispatch({type:Qc.QuickSort,token:e,descending:t})},ChartViewService.prototype.drillDown=function(e,t){this.store.dispatch({chartToken:e,target:t,type:Qc.DrillDown})},ChartViewService.prototype.changeHierarchy=function(e,t){this.store.dispatch({type:Qc.ChangeHierarchy,chartToken:e,forward:t})},ChartViewService.prototype.exploreMark=function(e,t,n){this.store.dispatch({chartToken:e,target:t,filters:n,type:gl.ExploreChartMark})},ChartViewService.prototype.viewData=function(e,t,n,r){this.store.dispatch({type:hl.ViewChartData,target:e,chartToken:n,queryToken:r})},ChartViewService.prototype.viewDataWithChart=function(e,t,n,r){this.store.dispatch({type:gl.ExploreChartWithData,target:e,chartToken:n,queryToken:r})},ChartViewService.prototype.toggleExpandedView=function(e){this.store.dispatch({type:te.a.ToggleExpandedView,expandedViewOpen:e})},ChartViewService.$inject=["RxStoreService","ChartModel","WindowMessageService"],ChartViewService}(),Cu=function(){function PollingService(e,t,n,r,o,i){this.$timeout=e,this.$interval=t,this.$q=n,this.ReportRunModel=r,this.ReportModel=o,this.timer=i}return PollingService.prototype.pollReport=function(e,t,n){var r=this;void 0===t&&(t=!0),t?this.timer=this.$interval(function(){(function(t){var r=e._resource.links("last_successful_run").href;this.ReportModel.refresh(t).then(function(e){e._resource.links("last_successful_run").href!==r&&n(e)})}).call(r,e)},5e3):this.$interval.cancel(this.timer)},PollingService.$inject=["$timeout","$interval","$q","ReportRunModel","ReportModel"],PollingService}(),yu=function(){function ReportSaveService(e,t,n,r,o,i,a,l,s,c){var d=this;this.$rootScope=e,this.$log=t,this.$timeout=n,this.DS=r,this.ChartSanitizerService=o,this.ChartInterpolaterService=i,this.ChartModel=a,this.PythonVisualizationModel=l,this.DataLayerFlipperService=s,this.rxStore=c,this.oldReport=null,this.report=null,this.oldCharts=[],this.charts=[],this.oldTables=[],this.tables=[],this.pythonCells=[],this.queries={},this.oldQueries=[],this.reportIsNew=!1,this.name=null,this.description="",this.space=null,this.editorIsDirty=!1,this.storedQueries={},this.chartOptions={types:Object(y.keyBy)(yr.a.map(optionTypeToChartOption),"type")},this.editorDirtySubscriber=c.select("transient","editor","editorIsDirty").subscribe(function(e){d.editorIsDirty=e}),this.editorQueriesSubscriber=c.select("client","selectedReport","queries").subscribe(function(e){d.storedQueries=e.byKey.toObject()})}return ReportSaveService.prototype.reportHasChanged=function(){return!(!this.oldReport||!this.report)&&(this.editorIsDirty||null!=this.oldReport.name&&this.oldReport.name!==this.name||null==this.oldReport.name&&this.name||this.oldReport.description!==this.description||this.tablesHaveChanged()||this.chartsHaveChanged())},ReportSaveService.prototype.setNewReport=function(e){this.reportIsNew=e},ReportSaveService.prototype.copyReport=function(e){this.oldReport={name:e.name,description:e.description,layout:e.layout,table_view:r.copy(e.table_view)},this.description=e.description},ReportSaveService.prototype.updateReport=function(e){this.oldReport&&(this.oldReport.name=e.name,this.oldReport.description=e.description,this.oldReport.layout=e.layout,this.oldReport.table_view=r.copy(e.table_view))},ReportSaveService.prototype.updateSpace=function(e){this.space=e},ReportSaveService.prototype.updateChart=function(e){var t=y.find(this.oldCharts,{token:e.token});t?t.view=r.copy(e.view):this.oldCharts.push({token:e.token,view:r.copy(e.view)}),this.rxStore.dispatch({type:Lc.UpdateChartSuccess,payload:e._resource})},ReportSaveService.prototype.removeChart=function(e){y.remove(this.oldCharts,{token:e}),y.remove(this.charts,{token:e}),this.rxStore.dispatch({type:Lc.DestroyChart,payload:e})},ReportSaveService.prototype.chartHasChanged=function(e){return y.some(this.oldCharts,function(t){return t.token===e.token&&(t.view.selectedChart!==e.view.selectedChart||t.view.chartIcon!==e.view.chartIcon||!r.equals(e.view[e.view.selectedChart],t.view[e.view.selectedChart]))})||!y.some(this.oldCharts,function(t){return t.token===e.token})},ReportSaveService.prototype.chartsHaveChanged=function(){var e=this;return y.some(this.charts,function(t){return e.chartHasChanged(t)})},ReportSaveService.prototype.updateTable=function(e){var t=y.find(this.oldTables,{token:e.token});t?t.view=r.copy(e.view):this.oldTables.push({token:e.token,view:r.copy(e.view)})},ReportSaveService.prototype.removeTable=function(e){y.remove(this.oldTables,{token:e}),y.remove(this.tables,{token:e})},ReportSaveService.prototype.tableHasChanged=function(e){return y.some(this.oldTables,function(t){return t.token===e.token&&!r.equals(e.view,t.view)})||!y.some(this.oldTables,function(t){return t.token===e.token})},ReportSaveService.prototype.tablesHaveChanged=function(){var e=this;return y.some(this.tables,function(t){return e.tableHasChanged(t)})},ReportSaveService.prototype.updateQuery=function(e){var t=y.find(this.oldQueries,{token:e.token});t?(t.raw_query=e.raw_query,t.name=e.name):this.oldQueries.push({token:e.token,raw_query:e.raw_query,name:e.name})},ReportSaveService.prototype.removeQuery=function(e){y.remove(this.oldQueries,{token:e}),y.remove(this.$rootScope.queries,{token:e}),delete this.queries[e]},ReportSaveService.prototype.refreshOldQueries=function(){this.oldQueries=y.map(this.queries,function(e){return{token:e.token,raw_query:e.raw_query,name:e.name}})},ReportSaveService.prototype.getVizById=function(e){if(e&&2===e.split("_").length){var t=e.split("_")[0],n=e.split("_")[1];switch(t){case"table":return y.find(this.tables,{token:n});case"chart":return y.find(this.charts,{token:n});case"python":return y.find(this.pythonCells,{token:n})}}},ReportSaveService.prototype.getChartById=function(e){var t;return e&&(e=e.replace("chart_","")),e&&y.some(this.charts,{token:e})&&(t=y.find(this.charts,{token:e})),t},ReportSaveService.prototype.getTableById=function(e){var t;return e&&(e=e.replace("table_","")),e&&y.some(this.tables,{token:e})&&(t=y.find(this.tables,{token:e})),t},ReportSaveService.prototype.getQueryById=function(e){return e&&(e=e.replace("query_","")),this.storedQueries[e]},ReportSaveService.prototype.setCharts=function(e){this.charts=e},ReportSaveService.prototype.setTables=function(e){this.tables=e},ReportSaveService.prototype.removeViz=function(e){e._name===this.PythonVisualizationModel.name&&e.destroy()},ReportSaveService.prototype.cloneChart=function(e){var t=this.getChartById(e.token);t&&this.createChart({view:r.copy(t.view),viewVegas:r.copy(t.view_vegas),query:t.parent,holdView:e.holdView,position:e.position,placement:e.placement,version:t.view_version,color_palette_token:t.color_palette_token})},ReportSaveService.prototype.createEmptyChart=function(e){var t=e.queryToken,n=e.holdView,r=void 0!==n&&n,o=e.position,i=e.placement,a=e.defaultType,l=e.version,s=void 0===l?1:l;this.createChart({query:t,holdView:r,position:o,placement:i,defaultType:a,version:s})},ReportSaveService.prototype.createChart=function(e){var t,n,r,o=this,i=e.defaultType,a=e&&e.query?e.query:null;this.DS.datasets&&a&&this.DS.datasets[a]&&this.DS.datasets[a].content&&(t=e&&e.view?e.view:this.ChartModel.EmptyChart(),this.DS.datasets[a].count<=yr.k&&(n=this.ChartInterpolaterService.interpolate(t,this.DS.datasets[a],this.chartOptions),this.ChartSanitizerService.sanitize(t,this.DS.datasets[a]),(!t.selectedChart&&n.length||n.length&&!y.find(n,{type:t.selectedChart}))&&(t.selectedChart=n[0].type,t.chartIcon=n[0].icon)),r=e&&e.viewVegas?e.viewVegas:this.ChartModel.EmptyVegasChart(),yr.c.indexOf(i)>=0&&(t.selectedChart=i,t.chartIcon=yr.b[i].icon,r.chartType=i),this.ChartModel.create({report:this.report.token,query:a,params:{"chart.view":JSON.stringify(t),"chart.view_vegas":JSON.stringify(r),"chart.view_version":e.version||1,"chart.color_palette_token":e.color_palette_token,includes:"color_palette"}}).then(this.ChartModel.buildChartWithColorPalette.bind(this)).then(function(t){o.queries[a].storedCharts.push(t),o.charts.push(t),o.oldCharts.push(t),o.rxStore.dispatch({type:Lc.AddChartSuccess,payload:t._resource,queryToken:a}),o.$timeout(function(){o.$rootScope.$broadcast("preview.addChart",{token:t.token,saveReport:!0,isNew:!0,position:e?e.position:null,placement:e?e.placement:void 0}),o.$rootScope.$broadcast("chartDesigner.openChart",{token:t.token,holdView:e.holdView})})}).catch(function(e){o.$log.debug("chart save error",e)}))},ReportSaveService.$inject=["$rootScope","$log","$timeout","DatasetService","ChartSanitizerService","ChartInterpolaterService","ChartModel","PythonVisualizationModel","DataLayerFlipperService","RxStoreService"],ReportSaveService}();function optionTypeToChartOption(e){return{name:e.name,type:e.id,icon:e.icon}}var bu="application.reports.edit.notebook",vu=function(){function ViewService(e,t,n,r,o,i,a,l,s,c,d,u){var p=this;this.$rootScope=e,this.$state=t,this.$timeout=n,this.$window=r,this.store=o,this.rxStore=i,this.wms=a,this.rss=l,this.designerService=s,this.ChartModel=c,this.TableModel=d,this.PythonVisualizationModel=u,this.views=o.getState().editor,e.$on("$stateChangeSuccess",this.handleRouterChanges.bind(this)),this.reportLayoutSubscriber=this.rxStore.select(K.N).subscribe(function(e){p.reportLayout=e}),a.subscribe(this,function(e){switch(e.type){case ps.b.MSG_TYPES.ClearSelected:p.store.dispatch(Q.g());break;case ps.b.MSG_TYPES.OpenSidebar:p.store.dispatch(Q.k());break;case ps.b.MSG_TYPES.CloseSidebar:p.store.dispatch(Q.h());break;case ps.b.MSG_TYPES.UpdateChart:p.updateChartSettings(e.data.id,e.data.view);break;case ps.b.MSG_TYPES.UpdateViz:p.updateVizSettings(e.data.id,e.data.view);break;case ps.b.MSG_TYPES.SelectTableColumn:p.selectTableColumn(e.data.id,e.data.column);break;case ps.b.MSG_TYPES.SetRowSize:p.setRowSize(e.data.index,e.data.size);break;case ps.b.MSG_TYPES.SetFullTable:p.setFullTable(e.data.id);break;case ps.b.MSG_TYPES.ToggleTextMargins:p.toggleTextMargins(e.id);break;case ps.b.MSG_TYPES.EditChart:p.selectChart(e.data.id,!0);break;case ps.b.MSG_TYPES.EditTable:p.selectTable(e.data.id,!0)}p.$rootScope.$apply()}),o.subscribe(function(){p.updateEditorState(o.getState().editor)}),e.$on("chartDesigner.openChart",function(e,t){t.token&&p.selectChart(t.token,!t.holdView,!t.holdView)})}return ViewService.prototype.emitPreviewUpdate=function(e,t,n,o){var i=r.copy(o);i._token=t,i._dataset=n;var a={};a["update"+("Python"===e?"Viz":e)]={token:t,view:i,id:(e+"_"+t).toLowerCase(),type:e.toLowerCase()},this.$rootScope.$broadcast("preview.update",a)},ViewService.prototype.updateEditorState=function(e){this.views.notebookShown!==e.notebookShown&&(this.views.notebookShown||this.$state.includes(bu)?this.views.notebookShown&&this.$state.includes(bu)&&this.$state.go("^"):this.$state.go(".notebook")),this.views=e},ViewService.prototype.handleRouterChanges=function(e,t,n,r,o){t.name!==bu||this.views.notebookShown?t.name!==bu&&this.views.notebookShown&&this.toggleNotebookShown(!1):this.toggleNotebookShown(!0)},ViewService.prototype.setView=function(e,t){this.store.dispatch(Q.x(e,t))},ViewService.prototype.selectReport=function(e,t){var n=this.designerService.getSafeDOM("<div>"+e.layout+"</div>"),r=w()(n).find("mode-chart,mode-table").toArray().map(function(e,t){return e.getAttribute("id")});this.store.dispatch(Q.p(e,r,t)),this.rxStore.dispatch({type:Q.c.SelectReport,payload:{reportToken:e.token,selectedQueryToken:t.token}})},ViewService.prototype.selectChart=function(e,t,n){var r=this;void 0===n&&(n=!0);var o=this.rss.getChartById(e);o&&o.query().then(function(e){r.store.dispatch(Q.n(t,o,e)),r.selectV2Chart(o),n&&r.wms.selectViz(o.token,"chart")})},ViewService.prototype.selectV2Chart=function(e){this.rxStore.dispatch({type:Q.c.SelectChart,payload:{chartToken:e.token,selectedQueryToken:e.parent}}),this.rxStore.dispatch({type:Q.c.SelectQuery,token:e.parent})},ViewService.prototype.selectTable=function(e,t,n){var r=this;void 0===n&&(n=!0);var o=this.rss.getTableById(e);o&&o.query().then(function(e){r.store.dispatch(Q.r(t,o,e)),r.rxStore.dispatch({type:Q.c.SelectTable,token:o.token,queryToken:e.token}),n&&r.wms.selectViz(o.token,"table")})},ViewService.prototype.selectTableColumn=function(e,t){this.store.dispatch(Q.s(e,t))},ViewService.prototype.remapQuery=function(e){this.store.dispatch(Q.l(e.token,e.mapping_id))},ViewService.prototype.selectQuery=function(e,t){var n=e?e.token:null;this.store.dispatch(Q.o(n,t,e)),this.rxStore.dispatch({type:Q.c.SelectQuery,token:n}),t&&this.$rootScope.$broadcast("sql.focus"),this.wms.clearSelected()},ViewService.prototype.selectRow=function(e,t){this.store.dispatch(Q.q(e,t))},ViewService.prototype.setRowSize=function(e,t){var n=this.designerService.resizeRowHeight(this.reportLayout,e,t);this.updateReportLayout(n),this.$rootScope.$broadcast("preview.update",{setRowHeight:{row:e,height:t}})},ViewService.prototype.setFullTable=function(e){var t=this.designerService.setFullTable(this.reportLayout,null,e);this.updateReportLayout(t),this.$rootScope.$broadcast("preview.update",{setTableFullHeight:{id:e}})},ViewService.prototype.toggleTextMargins=function(e){var t=this.designerService.toggleTextMargins(this.reportLayout,null,e);this.updateReportLayout(t)},ViewService.prototype.clearSelected=function(){this.store.dispatch(Q.g()),this.wms.clearSelected()},ViewService.prototype.toggleSidebar=function(){this.store.dispatch(Q.z())},ViewService.prototype.toggleSecondarySidebar=function(){this.store.dispatch(Q.y())},ViewService.prototype.closeDesignerSidebar=function(){this.store.dispatch(Q.h()),this.wms.closeSidebar()},ViewService.prototype.minimize=function(e,t){this.store.dispatch(Q.j(e,t))},ViewService.prototype.maximize=function(e,t){this.store.dispatch(Q.i(e,t))},ViewService.prototype.toggleQueryMode=function(e,t){var n=this,o=this.store.getState().editor;!e&&t&&t.altKey?this.store.dispatch(Q.t(!0)):this.store.dispatch(Q.v(e)),o.queryMode!==e&&this.$timeout(function(){r.element(n.$window).trigger("resize")},0,!1)},ViewService.prototype.toggleNotebookShown=function(e){var t=this,n=this.store.getState().editor;this.store.dispatch(Q.u(e)),n.notebookShown!==e&&this.$timeout(function(){r.element(t.$window).trigger("resize")},0,!1)},ViewService.prototype.addVizToLayout=function(e,t,n,r){void 0===n&&(n=-1);var o=t+"_"+e,i=this.designerService.addViz(this.reportLayout,{token:e},null,t,n,r);this.updateReportLayout(i),this.store.dispatch(Q.f(o))},ViewService.prototype.removeVizFromLayout=function(e,t){var n=this.designerService.removeViz(this.reportLayout,e);this.updateReportLayout(n),this.store.dispatch(Q.m(e))},ViewService.prototype.hasVisual=function(e){return this.views.currentVisuals.indexOf(e)>=0},ViewService.prototype.toggleVerticalMode=function(){this.store.dispatch(Q.A())},ViewService.prototype.setVerticalMode=function(e){this.store.dispatch(Q.w(e))},ViewService.prototype.selectEditorSchemaTab=function(e){this.store.dispatch(Q.e(e))},ViewService.prototype.updateTableSettings=function(e,t){var n=this,o=this.rss.getTableById(e);o&&(o.view=r.copy(t),this.TableModel.update(o).then(function(t){n.rss.updateChart(o),n.emitPreviewUpdate("Table",o.token,o.parent,o.view),n.selectTable(e,!1)}))},ViewService.prototype.updateTableColumnSettings=function(e,t,n){var o=this,i=this.rss.getTableById(e);i&&(i.view.columns=i.view.columns||{},i.view.columns[t]=r.copy(n),this.TableModel.update(i).then(function(n){o.rss.updateChart(i),o.emitPreviewUpdate("Table",i.token,i.parent,i.view),o.selectTableColumn(e,t)}))},ViewService.prototype.updateChartType=function(e,t,n,r){var o=this,i=this.rss.getChartById(e);if(i){switch(i.view.selectedChart=t,i.view.chartIcon=r,n){case"bar":i.view.bar.stacked=!1;break;case"stackedBar":i.view.bar.stacked=!0;break;case"area":i.view.area.expanded=!1;break;case"expandedArea":i.view.area.expanded=!0;break;case"pie":i.view.pie.donut=!1;break;case"donut":i.view.pie.donut=!0}this.ChartModel.update(i).then(function(t){o.rss.updateChart(i),o.emitPreviewUpdate("Chart",t.token,t.parent,t.view),o.selectChart(e,!1)})}},ViewService.prototype.updateChartSettings=function(e,t){var n=this,r=this.rss.getChartById(e);r&&(r.view=t,this.ChartModel.update(r).then(function(t){n.rss.updateChart(r),n.selectChart(e,!1),n.emitPreviewUpdate("Chart",t.token,t.parent,t.view)}))},ViewService.prototype.updateChartSettingsForType=function(e,t){var n=this.rss.getChartById(e);n&&(n.view[n.view.selectedChart]=t,this.updateChartSettings(e,n.view))},ViewService.prototype.updateChartPaletteForType=function(e,t,n){var r=this.rss.getChartById(e);r&&(r.color_palette_token=t,r.view.bigNumber.colors=n,this.updateChartSettings(e,r.view))},ViewService.prototype.updateChartTheme=function(e,t,n){var r=this,o=this.rss.getChartById(e);o&&(o.view.theme=t,o.view.chartColors=n,this.ChartModel.update(o).then(function(t){r.rss.updateChart(o),r.selectChart(e,!1),r.emitPreviewUpdate("Chart",t.token,t.parent,t.view)}))},ViewService.prototype.updateVizSettings=function(e,t){var n=this,r=this.rss.getVizById(e);if(r){var o=e.split("_")[0];"python"===o?(r.title=t.title,this.PythonVisualizationModel.update(r).then(function(e){n.emitPreviewUpdate("Python",e.token,void 0,r.renderEmbed())})):"chart"===o&&this.updateChartSettings(r.token,t)}},ViewService.prototype.updateReportLayout=function(e){this.rxStore.dispatch({type:Wc.a.UpdateReportLayout,layout:e})},ViewService.$inject=["$rootScope","$state","$timeout","$window","StoreService","RxStoreService","WindowMessageService","ReportSaveService","DesignerService","ChartModel","TableModel","PythonVisualizationModel"],ViewService}(),Iu=function(){function PythonCellService(e,t,n,r){this.$q=e,this.$sce=t,this.ModeCollection=n,this.rxStore=r}return PythonCellService.prototype.buildPythonCells=function(e,t){var n=this;return this.$q.all(y.chain(e).sortBy(this.positionSort.bind(this,t)).map(function(e){return e.savedCellRunResults&&e.savedCellRunResults.length?e:e.lastPythonCellRun().then(n.buildResults.bind(n,e)).catch(function(t){return e.savedCellRunResults=[],e})}).value())},PythonCellService.prototype.buildTrustedResult=function(e){return e.trustedResult||"image"===e.result_type||"text/html"===e.result_type||(e.trustedResult=this.$sce.trustAsHtml(L.a.ansi_to_html(L.a.escape_for_html(e.content),{use_classes:!0}))),e},PythonCellService.prototype.positionSort=function(e,t){var n=y.find(t._collections,{id:e});return n?n.position:null},PythonCellService.prototype.getResultContent=function(e){var t=this;return this.$q.all(e.map(function(e){return e.result().then(function(n){return t.rxStore.dispatch({type:wd.Type.LoadCellRunResultContentSuccess,resultToken:e._resource.token,content:n.content}),n})}))},PythonCellService.prototype.buildResults=function(e,t){var n=this;return t.pythonCellRunResults().then(this.ModeCollection.elements).then(this.getResultContent.bind(this)).then(function(r){return e.savedCellRunResults=y.map(r,n.buildTrustedResult.bind(n)),e.executionCount=t.execution_count,e})},PythonCellService.$inject=["$q","$sce","ModeCollection","RxStoreService"],PythonCellService}(),Su=n("GtTN");function getDataSourceByFilter(e,t){return e.filter(t).map(function(e){return e.id})[0]}var wu,Au=function(){function DataSourceService(e,t,n){this.QueryDataService=e,this.ReportSaveService=t,this.store=n,this.selectedDataSource=null,this.dataSources=null,this.owner=null}return DataSourceService.prototype.setDataSourceOwner=function(e){this.owner=e},DataSourceService.prototype.setDataSources=function(e){this.dataSources=e},DataSourceService.prototype.setSelectedDataSourceById=function(e){var t=y.find(this.dataSources,function(t){return t.id.toString()===e.toString()});this.setSelectedDataSource(t)},DataSourceService.prototype.setSelectedDataSource=function(e){this.selectedDataSource=e},DataSourceService.prototype.updateSelectedDataSourceDefault=function(e){this.dataSources.forEach(function(t){e===t.default_for_organization_id&&(t.default_for_organization_id=null)}),this.selectedDataSource.default_for_organization_id=e},DataSourceService.prototype.watchSelectedQuery=function(e){var t=this;e.$watch("queryInfo",function(e){e&&e.token&&t.setupSelectedDataSource(t.ReportSaveService.storedQueries[e.token])})},DataSourceService.prototype.setupSelectedDataSource=function(e){if(e){if(!e.data_source_id){var t=this;e.data_source_id=getDataSourceByFilter(this.dataSources,function(e){return e.queryable&&e.default_for_organization_id===t.owner.token})||getDataSourceByFilter(this.dataSources,function(e){return e.queryable&&e.default})||getDataSourceByFilter(this.dataSources,function(e){return e.public})}this.QueryDataService.updateQueryDatasource(e.token,e.data_source_id),this.setSelectedDataSourceById(e.data_source_id)}},Object.defineProperty(DataSourceService.prototype,"orgDataSources$",{get:function(){return this.store.select(K.a).combineLatest(this.store.select(K.g),function(e,t){return y.compact([].concat(e,t))})},enumerable:!0,configurable:!0}),DataSourceService.$inject=["QueryDataService","ReportSaveService","RxStoreService"],DataSourceService}();!function(e){e.AddReportModel="AddReportModel",e.RemoveReportModel="RemoveReportModel"}(wu||(wu={}));var Mu=n("h3aq"),ku=n("6KMn"),Tu=function(){function ReportFilterService(e,t,n,r,o,i,a){var l=this;this.$q=e,this._storeService=t,this._datasetService=n,this.ReportModel=r,this.ReportFilterModel=o,this.ModeResource=i,this.AlertService=a,this.store.select(K.i).subscribe(function(e){l._currentReportToken=e}),this.store.select(K.h).subscribe(function(e){l._currentAccountUsername=e});var s=function(e,t){l.store.dispatch({type:dd.LoadReportFilterFields,payload:l.getFilterFields(e,t)}),l.store.dispatch({type:dd.LoadReportFilterOpts,payload:{models:e,filters:t}}),l.store.dispatch({type:dd.FilterReportDatasets,payload:{models:e,filters:t}})};this.store.actions.filter(function(e){return e.type===wu.AddReportModel}).map(function(e){return e.type===wu.AddReportModel?e:null}).withLatestFrom(this.store.select(K.x),this.store.select(K._5)).subscribe(function(e){e[0];var t=e[1],n=e[2];return s(n,t.toArray())}),this.store.actions.filter(function(e){return e.type===dd.LoadReportFilterControls}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K._5)).subscribe(function(e){var t=e[0],n=e[1];return s(n,t)}),this.store.actions.filter(function(e){return e.type===dd.LoadReportFilterOpts}).map(function(e){return e.payload}).switchMap(function(e){return l.getFilterOptions(e.models,e.filters).then(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.ApplyReportFilters}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K._5)).switchMap(function(e){var t=e[0],n=e[1];return l._datasetService.loadFilteredDatasets(n,t).then(function(e){return l.store.dispatch({type:dd.FilterReportDatasetsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.FilterReportDatasetsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.FilterReportDatasets}).map(function(e){return e.payload}).switchMap(function(e){return l._datasetService.loadFilteredDatasets(e.models,e.filters).then(function(e){return l.store.dispatch({type:dd.FilterReportDatasetsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.FilterReportDatasetsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.CreateReportFilter}).map(function(e){return e.payload}).switchMap(function(e){return l.createReportFilterModel(e.accountUsername,e.reportToken,e.filterField).then(function(e){return l.store.dispatch({type:dd.CreateReportFilterSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.CreateReportFilterFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.DestroyReportFilter}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K.z)).switchMap(function(e){var t=e[0],n=e[1];return l.destroyReportFilterModel(t,n.get(t.id)).then(function(e){return l.store.dispatch({type:dd.DestroyReportFilterSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.DestroyReportFilterFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilter}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K.z)).switchMap(function(e){var t=e[0],n=e[1];return l.updateReportFilterModel(t,n.get(t.id)).then(function(e){return l.store.dispatch({type:dd.UpdateReportFilterSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.UpdateReportFilterFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterType}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K.z)).switchMap(function(e){var t=e[0],n=e[1];return l.updateReportFilterModel(t,n.get(t.id)).then(function(e){return l.store.dispatch({type:dd.UpdateReportFilterTypeSuccess,payload:{control:t,resource:e}})}).catch(function(e){return l.store.dispatch({type:dd.UpdateReportFilterTypeFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterDefaults}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K.B)).switchMap(function(e){var t=e[0],n=e[1];return l.updateReportFilterDefaultsModel(t,n.get(l.currentReportToken)).then(function(e){return l.store.dispatch({type:dd.UpdateReportFilterDefaultsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.UpdateReportFilterDefaultsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterPosition}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K.z)).switchMap(function(e){var t=e[0],n=e[1];return l.updateReportFilterPositionModel(n.get(t.reportFilterToken),t.nextReportFilterToken).then(function(e){return l.store.dispatch({type:dd.UpdateReportFilterPositionSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.UpdateReportFilterPositionFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.CreateReportFilterSuccess}).map(function(e){return Nd.d.buildFromResource(e.payload)}).withLatestFrom(this.store.select(K.x),this.store.select(K._5)).subscribe(function(e){e[0];var t=e[1],n=e[2];return s(n,t.toArray())}),this.store.actions.filter(function(e){return e.type===dd.DestroyReportFilterSuccess}).map(function(e){return Nd.d.buildFromResource(e.payload)}).withLatestFrom(this.store.select(K.x),this.store.select(K._5)).subscribe(function(e){e[0];var t=e[1],n=e[2],r=t.toArray();l.store.dispatch({type:dd.LoadReportFilterFields,payload:l.getFilterFields(n,r)}),l.store.dispatch({type:dd.FilterReportDatasets,payload:{models:n,filters:r}})}),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterTypeSuccess}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K._5),this.store.select(K.x)).switchMap(function(e){e[0];var t=e[1],n=e[2];return l._datasetService.loadFilteredDatasets(t,n.toArray()).then(function(e){return l.store.dispatch({type:dd.FilterReportDatasetsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.FilterReportDatasetsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterSuccess}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K._5),this.store.select(K.x)).switchMap(function(e){e[0];var t=e[1],n=e[2];return l.getFilterOptions(t,n.toArray()).then(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterDefaultsSuccess}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K._5),this.store.select(K.x)).switchMap(function(e){e[0];var t=e[1],n=e[2];return l.AlertService.success("Defaults Set"),l.getFilterOptions(t,n.toArray()).then(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsFailure,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterDefaultsSuccess}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K._5),this.store.select(K.x)).subscribe(function(e){e[0];var t=e[1],n=e[2];l.store.dispatch({type:dd.FilterReportDatasets,payload:{models:t,filters:n.toArray()}})}),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterDefaultsFailure}).do(function(e){l.AlertService.error("Error saving defaults"),l.store.dispatch(e)}).subscribe(),this.store.actions.filter(function(e){return e.type===dd.UpdateReportFilterTypeSuccess}).map(function(e){return e.payload}).withLatestFrom(this.store.select(K._5),this.store.select(K.x)).switchMap(function(e){e[0];var t=e[1],n=e[2];return l.getFilterOptions(t,n.toArray()).then(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsSuccess,payload:e})}).catch(function(e){return l.store.dispatch({type:dd.LoadReportFilterOptsFailure,error:e})})}).subscribe()}return Object.defineProperty(ReportFilterService.prototype,"store",{get:function(){return this._storeService},enumerable:!0,configurable:!0}),Object.defineProperty(ReportFilterService.prototype,"currentReportToken",{get:function(){return this._currentReportToken},enumerable:!0,configurable:!0}),Object.defineProperty(ReportFilterService.prototype,"currentAccountUsername",{get:function(){return this._currentAccountUsername},enumerable:!0,configurable:!0}),ReportFilterService.prototype.updateModels=function(){this.store.dispatch({type:wu.AddReportModel})},ReportFilterService.prototype.loadReportFilterResources=function(e){this.store.dispatch({type:dd.LoadReportFilterResources,payload:e})},ReportFilterService.prototype.createReportFilter=function(e){this.store.dispatch({type:dd.CreateReportFilter,payload:{accountUsername:this.currentAccountUsername,reportToken:this.currentReportToken,filterField:e}})},ReportFilterService.prototype.updateReportFilter=function(e){this.store.dispatch({type:dd.UpdateReportFilter,payload:e})},ReportFilterService.prototype.destroyReportFilter=function(e){this.store.dispatch({type:dd.DestroyReportFilter,payload:e})},ReportFilterService.prototype.resetReportFilter=function(e){var t;switch(e.filterType){case Rd.b.Single:t=Nd.e.fromJS(e);break;case Rd.b.Multi:t=Nd.a.fromJS(e);break;case Rd.b.Range:t=Nd.c.fromJS(e)}this.store.dispatch({type:dd.ResetReportFilter,payload:t})},ReportFilterService.prototype.applyReportFilters=function(e){for(var t=new Array,n=0,r=e;n<r.length;n++){var o=r[n];switch(o.filterType){case Rd.b.Single:t.push(Nd.e.fromJS(o));break;case Rd.b.Multi:t.push(Nd.a.fromJS(o));break;case Rd.b.Range:t.push(Nd.c.fromJS(o))}}this.store.dispatch({type:dd.ApplyReportFilters,payload:t})},ReportFilterService.prototype.resetReportFilters=function(e){for(var t=new Array,n=0,r=e;n<r.length;n++){var o=r[n];switch(o.filterType){case Rd.b.Single:t.push(Nd.e.fromJS(o));break;case Rd.b.Multi:t.push(Nd.a.fromJS(o));break;case Rd.b.Range:t.push(Nd.c.fromJS(o))}}this.store.dispatch({type:dd.ResetReportFilters,payload:t})},ReportFilterService.prototype.setDefaultReportFilters=function(e){this.store.dispatch({type:dd.UpdateReportFilterDefaults,payload:e.map(function(e){switch(e.filterType){case Rd.b.Single:return Nd.e.fromJS(e);case Rd.b.Multi:return Nd.a.fromJS(e);case Rd.b.Range:return Nd.c.fromJS(e)}})})},ReportFilterService.prototype.moveReportFilterToBottom=function(e){this.store.dispatch({type:dd.UpdateReportFilterPosition,payload:{reportFilterToken:e.id,nextReportFilterToken:null}})},ReportFilterService.prototype.moveReportFilterToPosition=function(e,t){this.store.dispatch({type:dd.UpdateReportFilterPosition,payload:{reportFilterToken:e.id,nextReportFilterToken:t.id}})},ReportFilterService.prototype.setReportFilterType=function(e,t){var n;switch(e.filterType){case Rd.b.Single:n=Nd.e.fromJS(e);break;case Rd.b.Multi:n=Nd.a.fromJS(e);break;case Rd.b.Range:n=Nd.c.fromJS(e)}this.store.dispatch({type:dd.UpdateReportFilterType,payload:Nd.d.convertToFilterType(n,t)})},ReportFilterService.prototype.setReportFilterSelectControlType=function(e,t){switch(e.filterType){case Rd.b.Single:this.store.dispatch({type:dd.UpdateReportFilter,payload:new Nd.e(e).with({controlType:t})});break;case Rd.b.Multi:this.store.dispatch({type:dd.UpdateReportFilter,payload:new Nd.a(e).with({controlType:t})})}},ReportFilterService.prototype.setReportFilterRangeIncludeNulls=function(e,t){this.store.dispatch({type:dd.UpdateReportFilter,payload:new Nd.c(e).with({includeNulls:t})})},ReportFilterService.prototype.createReportFilterModel=function(e,t,n){var r=this.$q.defer();return this.ReportFilterModel.create({report:t,account:e,params:{"report_filter.name":n.control.name,"report_filter.formula":n.control.formula,"report_filter.data_type":n.control.dataType,"report_filter.formula_type":n.control.formulaType,"report_filter.variable_type":n.control.varType,"report_filter.filter_type":n.control.filterType,"report_filter.control_type":n.control.controlType}}).then(function(e){return r.resolve(e._resource)}).catch(function(e){return r.reject(e)}),r.promise},ReportFilterService.prototype.destroyReportFilterModel=function(e,t){var n=this.$q.defer();return new this.ReportFilterModel.model(t).destroy().then(function(e){return n.resolve(t)}).catch(function(e){return n.reject(e)}),n.promise},ReportFilterService.prototype.updateReportFilterModel=function(e,t){var n=this.$q.defer();return this.ReportFilterModel.update(new this.ReportFilterModel.model(t),{"report_filter.name":e.name,"report_filter.formula":e.formula,"report_filter.data_type":e.dataType,"report_filter.formula_type":e.formulaType,"report_filter.variable_type":e.varType,"report_filter.filter_type":e.filterType,"report_filter.control_type":e.controlType}).then(function(e){return n.resolve(e._resource)}).catch(function(e){return n.reject(e)}),n.promise},ReportFilterService.prototype.updateReportFilterDefaultsModel=function(e,t){var n=this.$q.defer();return t.forms("batch_edit_filters").$submit({"report.filters[]":e.map(function(e){return{token:e.id,options:{default:e.selected.toJS()}}})}).then(function(e){return n.resolve(e._embedded.report_filters)}).catch(function(e){return n.reject(e)}),n.promise},ReportFilterService.prototype.updateReportFilterPositionModel=function(e,t){var n=this.$q.defer();return e.forms("edit_position").$submit({"report_filter.next_filter_token":t}).then(function(e){return n.resolve(e._embedded.report_filters)}).catch(function(e){return n.reject(e)}),n.promise},ReportFilterService.prototype.getFilterFields=function(e,t){for(var n=new Array,r=new Map,o=0,i=e;o<i.length;o++){var a=i[o];if(a.model)for(var l=0,s=a.model.fields;l<s.length;l++){var c=s[l],d=r.get(c.name);if(void 0===d&&(d=new Set,r.set(c.name,d)),!d.has(c.dataType)){switch(c.dataType){case fr.DataType.DATE:case fr.DataType.DATETIME:n.push(ku.a.buildDefaultDateFilterFolder(c,t));break;case fr.DataType.FLOAT:case fr.DataType.INTEGER:case fr.DataType.NUMBER:n.push(ku.a.buildDefaultRangeFilterField(c,t));break;default:n.push(ku.a.buildDefaultSelectFilterField(c,t))}d.add(c.dataType)}}}return y.sortBy(n,function(e){return e.name.toLocaleLowerCase()})},ReportFilterService.prototype.getFilterOptions=function(e,t){try{for(var n=new Array,r={},o=0,i=e;o<i.length;o++){var a=i[o];a.model&&(r[a.token]=a.model)}for(var l=this.getValidFilters(r,t),s=this.getFilterDomains(r,t,l),c=0,d=t;c<d.length;c++){var u=d[c],p=null,h=s[u.formula];switch(u.varType){case fr.VariableType.CONTINUOUS:p=new fr.ContinuousDomain(u.formulaType);for(var g=0,m=h;g<m.length;g++){var f=m[g];p.type===fr.VariableType.CONTINUOUS&&f.type===fr.VariableType.CONTINUOUS&&p.merge(f)}break;case fr.VariableType.DISCRETE:p=new fr.DiscreteDomain(u.formulaType);for(var C=0,y=h;C<y.length;C++){f=y[C];p.type===fr.VariableType.DISCRETE&&f.type===fr.VariableType.DISCRETE&&p.merge(f)}}var b=Mu.a.buildFilterOptions(u,p);b&&n.push(b)}return this.$q.resolve(n)}catch(e){return this.$q.reject(e)}},ReportFilterService.prototype.getFilterDomains=function(e,t,n){for(var r={},o=0,i=t;o<i.length;o++){var a=i[o];r[a.formula]=new Array}for(var l=function(t){for(var o={},i=e[t],a=0,l=n[t];a<l.length;a++){null==o[(u=l[a]).formula]&&(o[u.formula]=new Array),o[u.formula].push(i.buildViewCalcField(u.formula,u.varType,u.name))}for(var s=new Array,c=0,d=n[t];c<d.length;c++){var u=d[c];s=s.concat(o[u.formula])}for(var p=i.onDomain(function(e){return e.onField.apply(e,s)}).execute(),h=0,g=s;h<g.length;h++){var m=g[h];r[m.source].push(p.getDomain(m.alias))}},s=0,c=Object.keys(n);s<c.length;s++){l(c[s])}return r},ReportFilterService.prototype.getValidFilters=function(e,t){for(var n={},r=0,o=Object.keys(e);r<o.length;r++){var i=o[r],a=e[i];n[i]=new Array;for(var l=0,s=t;l<s.length;l++){var c=s[l],d=a.compile(c.formula);d.isValid&&this.modelHasField(a,d,c)&&n[i].push(c)}}return n},ReportFilterService.prototype.modelHasField=function(e,t,n){if("FIELD"===t.form||"DATEFUNC"===t.form){var r=e.getField(t.fieldName);if(null==r)return!1;for(var o=0,i=e.fields;o<i.length;o++){var a=i[o];switch(a.dataType){case"FLOAT":case"INTEGER":case"NUMBER":switch(r.dataType){case"FLOAT":case"INTEGER":case"NUMBER":if(a.name===r.name)return!0}break;case"DATE":case"DATETIME":switch(r.dataType){case"DATE":case"DATETIME":if(a.name===r.name)return!0}break;default:if(a.name===r.name&&a.dataType===r.dataType)return!0}}}return!1},ReportFilterService.$inject=["$q","RxStoreService","ReportDatasetService","ReportModel","ReportFilterModel","ModeResource","AlertService"],ReportFilterService}(),xu=function(){function ReportRunDataService(e,t,n,o,i,l,s,c,d,u,p,h,g,m,f,C,y,b,v){var I=this;this.$q=e,this.$root=t,this.$timeout=n,this.StoreService=o,this.store=i,this.ReportSaveService=l,this.ReportDataService=s,this.QueryDataService=c,this.AlertService=d,this.AnalyticsService=u,this.ChartDataService=p,this.DatasetService=h,this.ReportFilterService=g,this.ViewService=m,this.ReportStateService=f,this.ReportRunModel=C,this.ModeCollection=y,this.QueryRunModel=b,this.ResultModel=v,this.limits={},this.loadedQueryResults=new Map,i.actions.filter(function(e){return e.type===qc.a.CancelPollReportRun}).map(function(e){return e.type===qc.a.CancelPollReportRun?e:null}).subscribe(function(){n.cancel(I.timeoutPromise)}),i.actions.filter(function(e){return e.type===qc.a.ExecuteReportRun}).map(function(e){return e.type===qc.a.ExecuteReportRun?e:null}).withLatestFrom(this.store.select("client","selectedReport","queries"),this.store.select("client","selectedReport","queryRuns"),this.store.select(K._4)).switchMap(function(e){var o=e[0],i=e[1],d=e[2];e[3];o.runningQueryToken?I.loadedQueryResults.delete(o.runningQueryToken):I.loadedQueryResults.clear();var u=o.reportModel;n.cancel(I.timeoutPromise),I.currentRunToken=null;var h={"report.report_pins[]":u.pins,"report.queries[]":o.queryModels.filter(function(e){return null!=e}).map(function(e){var t=!d.hasRecord(e.token)||d.getRecord(e.token).limit;o.runningQueryToken&&o.runningQueryToken===e.token&&(t=I.limits[o.runningQueryToken]);var n={create_query_run:!o.runningQueryToken||e.token===o.runningQueryToken,limit:t,data_source_id:e.data_source_id,name:e.name,raw_query:e.raw_query,token:e.token,mapping_id:"",selected_query:"",selected_run:!1};return e.resource._new_query&&(n.mapping_id=e.token,delete n.token),o.selectedText&&o.runningQueryToken===e.token&&(n.selected_query=o.selectedText,n.selected_run=!0),n}),includes:["new_report_run_email","new_report_run_slack_message",{report:["new_python_notebook","new_report_schedule","new_report_filter","new_report_subscription","new_embed_key","new_python_visualization","new_space_link","report_filters","sql_formatter",{report_pins:"pinned"},{queries:{queries:["new_chart",{charts:{charts:["color_palette"]}},"new_query_table","query_tables"]}}]}]};r.extend(h,u.toParams());var g=a();return C.create({account:o.accountModel,report:u.token,params:h,useEntryPath:!0}).then(function(e){I.trackRunEvent(o.reportModel.public),I.store.dispatch({type:qc.a.ExecuteReportRunSuccess,reportRunResource:e._resource}),l.refreshOldQueries();var n=e._resource.embedded("report").embedded("queries").embedded("queries");c.batchUpdateQueries(n);var r=n.find(function(e){return o.runningQueryToken&&e.mapping_id===o.runningQueryToken});return r&&I.ViewService.remapQuery(r),I.pollLoadedReportRun(e,o.runningQueryToken).then(function(e){e.localCreatedAt=g,e.report().then(function(e){return e.queries()}).then(function(e){return e.elements()}).then(function(n){t.reportRun=e,s.updateIfReportNeedsUpdate(),l.copyReport(l.report);var r=i.getRecords().filter(function(e){return e.resource._new_query});n.filter(function(e){return r.some(function(t){return t.token===e._old_mapping_id})}).forEach(function(e){var t=e._resource.embedded("query_tables").embedded("query_tables");t.length&&(p.loadEmbeddedTables(e.token,t),m.addVizToLayout(t[0].token,"table"))}),t.focused=!1})})}).catch(function(e){I.store.dispatch({type:qc.a.ExecuteReportRunFailed,runningQueryToken:o.runningQueryToken,error:e}),"Queries executing"!==e&&I.AlertService.error(e.data&&e.data.message?e.data.message:"Problem running report. Please try again.")})}).subscribe(),i.actions.filter(function(e){return e.type===qc.a.PollReportRun}).map(function(e){return e.type===qc.a.PollReportRun?e:null}).switchMap(function(e){return I.ReportRunModel.find({token:e.token,useEntryPath:!0,includes:["executed_by","pdf_export","new_pdf_export","new_report_run_email","new_report_run_slack_message",{python_cell_runs:{python_cell_runs:"python_cell_run_results"}},{report:["space","report_filters","new_report_subscription","new_report_schedule","new_embed_key","new_star","report_theme",{queries:{queries:[{charts:{charts:["color_palette"]}},"query_tables"]}},{python_visualizations:{python_visualizations:["python_cell",{python_cell_run:"python_cell_run_results"}]}}]}]}).then(function(e){return I.pollLoadedReportRun(e)}).catch(function(t){I.store.dispatch({type:qc.a.PollReportRunFailed,token:e.token,error:t})})}).subscribe(),i.actions.filter(function(e){return e.type===qc.a.CancelQueryRun}).map(function(e){return e.type===qc.a.CancelQueryRun?e:null}).withLatestFrom(i.select("client","selectedReport","queryRuns")).switchMap(function(e){var t=e[0],n=e[1];return n&&n.hasRecord(t.token)&&n.getRecord(t.token).resource&&n.getRecord(t.token).resource.hasForm("cancel")?n.getRecord(t.token).resource.forms("cancel").$submit().then(function(e){h.queryRuns[t.token].state="cancelled",h.datasets[t.token]={query_token:t.token,state:"cancelled"},I.loadedQueryResults[t.token]=!0,i.dispatch({type:qc.a.LoadQueryRunSuccess,resource:e})}).catch(function(e){console.log("cancelling failed",e)}):n.hasRecord(t.token)?null!=n.getRecord(t.token).resource?I.$q.reject("Query run does not have cancel link"):I.$q.reject("Query run not loaded yet"):I.$q.reject("Unable to find query run to cancel")}).subscribe()}return ReportRunDataService.prototype.pollReportRun=function(e){this.store.dispatch({type:qc.a.PollReportRun,token:e})},ReportRunDataService.prototype.executeReportRun=function(e,t,n,r,o){this.store.dispatch({type:qc.a.ExecuteReportRun,reportModel:e,queryModels:t,accountModel:n,runningQueryToken:r,selectedText:o,runningQueryLimit:this.limits[r]})},ReportRunDataService.prototype.setQueryLimits=function(e){this.limits=e},ReportRunDataService.prototype.pollLoadedReportRun=function(e,t){var n=this,r=this.$q.defer(),o=new Gn.a({min:50,max:5e3,factor:1.2});this.currentRunToken=e.token;var i=function(e){e.queryRuns().then(n.ModeCollection.reload).then(n.ModeCollection.elements).then(function(t){if(n.currentRunToken===e.token){var a=t.every(function(e){return-1===yr.z.indexOf(e.state)});if(t.forEach(function(e){var t=e._resource,r=n.loadedQueryResults.get(t.query_token),o=yr.z.indexOf(t.state)<0,i=r&&r.queryRunToken!==e._resource.token;n.store.dispatch({type:qc.a.LoadQueryRunSuccess,resource:t}),!o||r&&!i||n.loadedQueryResults.set(t.query_token,{queryRunResultPromise:n.loadQueryRunResult(e._resource),queryRunToken:e._resource.token})}),n.DatasetService.queryRuns=Object(y.keyBy)(t,"query_token"),n.DatasetService.dismissed={},a){t.forEach(function(e){n.QueryDataService.updateQueryLimit(e.query_token,e.limit)});var l=Array.from(n.loadedQueryResults.values()).map(function(e){return e.queryRunResultPromise});n.$q.all(l).then(function(e){n.ReportFilterService.updateModels(),n.ReportStateService.setDatasets(n.DatasetService.datasets),n.StoreService.dispatch({type:"REPORT_RUN_DATA_LOADED"}),n.DatasetService.loadRawDatasets(e.filter(function(e){return null!=e}))}),n.store.dispatch({type:qc.a.PollReportRunComplete,token:e.token}),r.resolve(e)}else n.timeoutPromise=n.$timeout(function(){return i(e)},o.duration())}}).catch(function(e){r.reject(e)})};return i(e),r.promise},ReportRunDataService.prototype.cancelPollReportRun=function(){this.store.dispatch({type:qc.a.CancelPollReportRun})},Object.defineProperty(ReportRunDataService.prototype,"reportRun",{get:function(){return this.store.select(K._4).combineLatest(this.store.select("client","selectedReport","queries"),this.store.select("client","selectedReport","reportRun"),this.store.select("client","selectedReport","chartModels"),this.store.select("client","selectedReport","queryRuns"),function(e,t,n,r,o){return{queryToken:e,query:t.getRecord(e),queries:t,reportRun:n,modelState:r.hasRecord(e)?r.getRecord(e):{},dataset:r.hasRecord(e)&&r.getRecord(e).model?r.getRecord(e).model.engine.dataset:{},queryRuns:o,queryRun:o.getRecord(e)}})},enumerable:!0,configurable:!0}),Object.defineProperty(ReportRunDataService.prototype,"reportRunState$",{get:function(){return this.store.select("client","selectedReport","queries").combineLatest(this.store.select("client","selectedReport","reportRun"),this.store.select("client","selectedReport","chartModels"),this.store.select("client","selectedReport","queryRuns"),function(e,t,n,r){return{queries:e,reportRun:t,models:n,queryRuns:r}})},enumerable:!0,configurable:!0}),Object.defineProperty(ReportRunDataService.prototype,"selectedQueryReportRunState$",{get:function(){return this.store.select(K._4).combineLatest(this.store.select("client","selectedReport","queries"),this.store.select("client","selectedReport","reportRun"),this.store.select("client","selectedReport","chartModels"),this.store.select("client","selectedReport","queryRuns"),function(e,t,n,r,o){return{queryToken:e,query:t.getRecord(e),queries:t,reportRun:n,modelStates:r,modelState:r.hasRecord(e)?r.getRecord(e):{},dataset:r.hasRecord(e)&&r.getRecord(e).model?r.getRecord(e).model.engine.dataset:{},queryRuns:o,queryRun:o.getRecord(e)}})},enumerable:!0,configurable:!0}),Object.defineProperty(ReportRunDataService.prototype,"selectedTableState$",{get:function(){return this.store.select("client","selectedReport","currentVizToken").combineLatest(this.store.select("client","selectedReport","tables"),this.store.select("client","selectedReport","chartModels"),this.store.select("client","selectedReport","reportRun"),this.store.select("client","selectedReport","queryRuns"),function(e,t,n,r,o){var i=t.getRecord(e);return i?{queryToken:i.queryToken,modelState:n.hasRecord(i.queryToken)?n.getRecord(i.queryToken):{},reportRun:r,queryRun:o.getRecord(i.queryToken),table:i}:{reportRun:r}})},enumerable:!0,configurable:!0}),Object.defineProperty(ReportRunDataService.prototype,"canCancelSelectedQueryRun$",{get:function(){return this.store.select(Ae.a.canCancelSelectedQueryRun)},enumerable:!0,configurable:!0}),ReportRunDataService.prototype.cancelPolling=function(){this.store.dispatch({type:qc.a.CancelPollReportRun})},ReportRunDataService.prototype.cancel=function(e){this.store.dispatch({type:qc.a.CancelQueryRun,token:e})},ReportRunDataService.prototype.runReport=function(e,t){Pr.a.formSubmit(t,{fields:{last_run_id:e,authenticity_token:$("meta[name=csrf-token]").attr("content"),trk_source:"refresh_button"}})},ReportRunDataService.prototype.loadQueryRunResult=function(e){var t=this;if("succeeded"===e.state)return new this.QueryRunModel.model(e).result().then(function(n){if(n.csv&&!n.oversized)return n.dataset().then(function(r){var o=e.token,i=e.query_token,a=Ya.a.Views.make(i,o,r.columns);return t.store.dispatch({type:qc.a.LoadQueryResultSuccess,queryRun:e,resource:n._resource,dataset:r,view:a,model:fr.Model.build(fr.Model.convertModeSchema(n.columns),r.content)}),t.DatasetService.models[e.query_token]=t.buildModelResult(r),r});if(n.oversized){var r=t.buildOversizedDataset(e,n._resource),o=e.token,i=e.query_token;Ya.a.Views.make(i,o,r.columns);return t.store.dispatch({type:qc.a.LoadQueryResultSuccess,queryRun:e,resource:n._resource,dataset:r,model:fr.Model.build(fr.Model.convertModeSchema([]),[])}),t.DatasetService.models[e.query_token]=t.buildModelResult(r),r}return t.store.dispatch({type:qc.a.LoadQueryResultSuccess,queryRun:e,resource:n._resource}),null});this.store.dispatch({type:qc.a.LoadQueryResultFailure,queryRun:e});var n=this.buildFailedDataset(e);return this.DatasetService.datasets[e.query_token]=n,this.DatasetService.models[e.query_token]=this.buildModelResult(n),this.$q.resolve(n)},ReportRunDataService.prototype.buildModelResult=function(e){var t={isLoaded:!0,queryName:null,state:e.state,columns:e.columns,content:e.content,count:e.count,query_token:e.query_token,reportDataUrl:e.reportDataUrl,reportQueryUrl:e.reportQueryUrl,content_length:e.content_length,csv:e.csv,oversized:e.oversized,model:fr.Model.build(fr.Model.convertModeSchema([]),[])};return e.state||(t.state="succeeded",t.model=fr.Model.build(fr.Model.convertModeSchema(e.columns),e.content)),t},ReportRunDataService.prototype.buildOversizedDataset=function(e,t){return{columns:[],content_length:t.content_length,content:[],csv:t.hasLink("csv")?t.links("csv").href:null,count:t.count,query_token:e.query_token,state:e.state,reportDataUrl:e.hasLink("result_web")?e.links("result_web").href:void 0,reportQueryUrl:e.hasLink("query_web")?e.links("query_web").href:void 0}},ReportRunDataService.prototype.buildFailedDataset=function(e){return{query_token:e.query_token,state:e.state,reportDataUrl:e.hasLink("result_web")?e.links("result_web").href:void 0,reportQueryUrl:e.hasLink("query_web")?e.links("query_web").href:void 0}},ReportRunDataService.prototype.updateModels=function(e){var t={};e.forEach(function(e){t[e.query_token]=this.buildModelResult(e)}),this.DatasetService.models=t},ReportRunDataService.prototype.updateDatasets=function(e){this.DatasetService.loadKeyedDatasets?this.DatasetService.loadKeyedDatasets(e):this.DatasetService.datasets=e},ReportRunDataService.prototype.trackRunEvent=function(e){var t=ee.b.EVENT_PRIVATE_EDITOR_RUN;!1===e&&this.AnalyticsService.run(ee.c.Track,t)},ReportRunDataService.$inject=["$q","$rootScope","$timeout","StoreService","RxStoreService","ReportSaveService","ReportDataService","QueryDataService","AlertService","AnalyticsService","ChartDataService","DatasetService","ReportFilterService","ViewService","ReportStateService","ReportRunModel","ModeCollection","QueryRunModel","ResultModel","DataLayerFlipperService"],ReportRunDataService}(),Du=function(){function DefinitionRunService(e,t,n,r,o,i,a,l,s,c,d,u,p,h,g,m){var f=this;this.$q=e,this.$root=t,this.$log=n,this.$timeout=r,this.$window=o,this.StoreService=i,this.store=a,this.DataSourceService=l,this.LibraryDefinitionModel=s,this.alertService=c,this.ReportRunModel=d,this.QueryRunModel=u,this.DataSourceModel=p,this.ResultModel=h,this.ModeCollection=g,this.api=m,this.cancelling=!1,a.actions.filter(function(e){return e.type===fd.ManageDefinition}).map(function(e){return e.type===fd.ManageDefinition?e:null}).withLatestFrom(a.select("client","selectedDefinition","definition")).switchMap(function(e){var t=e[0],n=e[1],r=new s.model(n.resource);return r.name=t.name,r.source=t.source,r.dataSourceId=t.dataSourceId,r.description=t.description,f.updateDefinition(r,Cd.SaveOnly,{successCallback:t.modalConfirm})}).subscribe(),a.actions.filter(function(e){return e.type===fd.UpdateDefinition}).map(function(e){return e.type===fd.UpdateDefinition?e:null}).withLatestFrom(a.select("client","selectedDefinition","definition")).switchMap(function(e){var t=e[0],n=e[1],r=new s.model(n.resource);return r.name=n.name,r.source=n.source,r.dataSourceId=n.dataSourceId,r.description=n.description,f.updateDefinition(r,t.strategy,{commitMessage:t.commitMessage})}).subscribe(),a.actions.filter(function(e){return e.type===fd.UpdateDefinitionSuccess}).map(function(e){return e.type===fd.UpdateDefinitionSuccess?e:null}).withLatestFrom(this.DataSourceService.orgDataSources$).subscribe(function(e){var t=e[0],n=e[1];switch(t.strategy){case Cd.SaveOnly:var r=t.definition.data_source_id;[n].filter(Array.isArray).map(function(e){return Object(y.find)(e,{id:r})}).forEach(function(e){f.DataSourceService.setSelectedDataSource(new f.DataSourceModel.model(e)),f.alertService.success("Updated definition")});break;case Cd.SaveAndSync:f.store.dispatch({type:fd.SyncDefinition,definition:t.definition,commitMessage:t.commitMessage})}}),a.actions.filter(function(e){return e.type===fd.UpdateDefinitionFailed}).map(function(e){return e.type===fd.UpdateDefinitionFailed?e:null}).subscribe(function(e){c.error("Error saving definition"),console.error(e.error)}),a.actions.filter(function(e){return e.type===fd.SyncDefinition}).map(function(e){return e.type===fd.SyncDefinition?e:null}).subscribe(function(e){f.syncToGithub(e.definition,e.commitMessage)}),a.actions.filter(function(e){return e.type===fd.SyncDefinitionSuccess}).map(function(e){return e.type===fd.SyncDefinitionSuccess?e:null}).subscribe(function(e){c.success("Push started")}),a.actions.filter(function(e){return e.type===fd.SyncDefinitionFailure}).map(function(e){return e.type===fd.SyncDefinitionFailure?e:null}).subscribe(function(e){c.error(e.error.message)}),a.actions.filter(function(e){return e.type===fd.CancelPollDefinitionRun}).map(function(e){return e.type===fd.CancelPollDefinitionRun?e:null}).subscribe(function(){f.cancelling=!0,r.cancel(f.timeoutPromise)}),this.store.actions.filter(function(e){return e.type===fd.DeleteDefinition}).map(function(e){return e.type===fd.DeleteDefinition?e:null}).withLatestFrom(a.select("client","selectedDefinition","definition")).switchMap(function(e){e[0];var t=e[1];return f.destroyDefinition(t.resource).then(function(){return f.store.dispatch({type:fd.DeleteDefinitionSuccess})}).catch(function(e){return f.store.dispatch({type:fd.DeleteDefinitionFailure,error:e})})}).subscribe(),a.actions.filter(function(e){return e.type===fd.DeleteDefinitionSuccess}).map(function(e){return e.type===fd.DeleteDefinitionSuccess?e:null}).withLatestFrom(a.select(K.v)).subscribe(function(e){e[0];var t=e[1];f.alertService.success("Definition deleted successfully"),f.$window.location.href=t.links("home_web").href}),a.actions.filter(function(e){return e.type===fd.DeleteDefinitionFailure}).map(function(e){return e.type===fd.DeleteDefinitionFailure?e:null}).subscribe(function(e){f.alertService.error("Error deleting definition"),f.$log.error(e.error)}),a.actions.filter(function(e){return e.type===fd.ExecuteDefinitionRun}).map(function(e){return e.type===fd.ExecuteDefinitionRun?e:null}).withLatestFrom(this.store.select("client","selectedDefinition","definition"),this.store.select("client","selectedDefinition","query")).switchMap(function(e){var n=e[0],r=e[1];e[2];f.cancelling=!1;var o=new s.model(r.resource);return o.source=n.source,f.LibraryDefinitionModel.update(o).then(function(){o._resource.forms("execute").$submit({source:o.source,limit:n.limit}).then(function(e){t.focused=!1,f.currentRunToken=e.token,f.StoreService.dispatch(Object(ai.f)());var n=new f.ReportRunModel.model(e);return n.queryRuns().then(f.ModeCollection.elements).then(function(e){e.length&&f.store.dispatch({type:fd.LoadDefinitionQueryRunSuccess,resource:e[0]._resource})}),f.pollLoadedReportRun(n).then(function(){return f.cancelling=!1})}).catch(function(e){f.alertService.error("Error running definition"),f.$log.error(e),f.StoreService.dispatch(Object(ai.g)(!1,!0)),f.store.dispatch({type:fd.ExecuteDefinitionRunFailed,error:e})})})}).subscribe(),a.actions.filter(function(e){return e.type===fd.PollDefinitionRun}).map(function(e){return e.type===fd.PollDefinitionRun?e:null}).switchMap(function(e){return m.getResource(e.definitionModel._resource,"query").then(function(t){return f.store.dispatch({type:fd.LoadDefinitionQuerySuccess,resource:t}),e.definitionModel.lastRun().then(function(e){return f.StoreService.dispatch(Object(ai.f)()),f.store.dispatch({type:fd.LoadDefinitionQueryRunSuccess,resource:e._resource}),e.reportRun().then(function(e){f.currentRunToken=e.token,f.pollLoadedReportRun(e)})}).catch(function(){})})}).subscribe(),a.actions.filter(function(e){return e.type===fd.CancelDefinitionQueryRun}).map(function(e){return e.type===fd.CancelDefinitionQueryRun?e:null}).withLatestFrom(a.select("client","selectedDefinition","queryRun")).switchMap(function(e){e[0];var t=e[1];return f.cancelPollReportRun(),t.resource.forms("cancel").$submit().then(function(e){f.store.dispatch({type:fd.CancelDefinitionQueryRunSuccess,resource:e})}).catch(function(e){f.$log.warn("cancelling failed",e),f.store.dispatch({type:fd.CancelDefinitionQueryRunFailed,error:e})})}).subscribe()}return DefinitionRunService.prototype.updateDefinition=function(e,t,n){var r=this;return this.LibraryDefinitionModel.update(e).then(function(e){r.updateDefinitionSuccess(e._resource,n.commitMessage);var t=n.successCallback;t&&t({$definition:e})}).catch(function(n){r.store.dispatch({type:fd.UpdateDefinitionFailed,error:n,token:e.token,strategy:t})})},DefinitionRunService.prototype.updateDefinitionSuccess=function(e,t){void 0===t&&(t=null),"string"==typeof t?this.store.dispatch({type:fd.UpdateDefinitionSuccess,strategy:Cd.SaveAndSync,definition:e,commitMessage:t}):this.store.dispatch({type:fd.UpdateDefinitionSuccess,strategy:Cd.SaveOnly,definition:e})},DefinitionRunService.prototype.pollDefinitionRun=function(e){this.store.dispatch({type:fd.PollDefinitionRun,definitionModel:e})},DefinitionRunService.prototype.executeDefinitionRun=function(e,t,n){this.store.dispatch({type:fd.ExecuteDefinitionRun,source:e,limit:t,selectedText:n})},DefinitionRunService.prototype.pollLoadedReportRun=function(e){var t=this,n=this.$q.defer(),r=new Gn.a({min:50,max:5e3,factor:1.2});this.store.dispatch({type:fd.DefinitionReportRunLoadSuccess,resource:e._resource});var o=function(e){e.queryRuns().then(t.ModeCollection.reload).then(t.ModeCollection.elements).then(function(i){if(t.currentRunToken===e.token){var a=i.every(function(e){return-1===yr.z.indexOf(e.state)});if(i.forEach(function(e){t.store.dispatch({type:fd.LoadDefinitionQueryRunSuccess,resource:e._resource})}),a){i.map(function(e){return t.loadQueryRunResult(e._resource)});t.StoreService.dispatch(Object(ai.g)(!1,!1)),t.store.dispatch({type:fd.PollDefinitionRunComplete,token:e.token}),n.resolve(e)}else t.cancelling||(t.timeoutPromise=t.$timeout(function(){return o(e)},r.duration()))}}).catch(function(e){n.reject(e)})};return o(e),n.promise},DefinitionRunService.prototype.cancelDefinitionRun=function(){this.store.dispatch({type:fd.CancelDefinitionQueryRun})},DefinitionRunService.prototype.cancelPollReportRun=function(){this.store.dispatch({type:fd.CancelPollDefinitionRun})},DefinitionRunService.prototype.manageDefinition=function(e,t,n,r,o,i){this.store.dispatch({type:fd.ManageDefinition,name:t,token:e,description:n,dataSourceId:r,source:o,modalConfirm:i})},DefinitionRunService.prototype.saveAndSync=function(e){this.store.dispatch({type:fd.UpdateDefinition,strategy:Cd.SaveAndSync,commitMessage:e})},DefinitionRunService.prototype.deleteSelectedDefinition=function(){this.store.dispatch({type:fd.DeleteDefinition})},DefinitionRunService.prototype.updateDefinitionSource=function(e){this.store.dispatch({type:fd.UpdateDefinitionSource,source:e})},Object.defineProperty(DefinitionRunService.prototype,"definitionRunState$",{get:function(){return this.store.select("client","selectedDefinition","definition").combineLatest(this.store.select("client","selectedDefinition","query"),this.store.select("client","selectedDefinition","reportRun"),this.store.select("client","selectedDefinition","chartModel"),this.store.select("client","selectedDefinition","queryRun"),function(e,t,n,r,o){return{definition:e,query:t,reportRun:n,queryRun:o,modelState:r,dataset:r&&r.model?r.model.engine.dataset:{}}})},enumerable:!0,configurable:!0}),Object.defineProperty(DefinitionRunService.prototype,"definitionPolling$",{get:function(){return this.store.select("client","selectedDefinition","pollingDefinitionRun")},enumerable:!0,configurable:!0}),DefinitionRunService.prototype.loadQueryRunResult=function(e){var t=this;if("succeeded"===e.state)return new this.QueryRunModel.model(e).result().then(function(n){return n.csv&&!n.oversized?n.dataset().then(function(r){var o=e.token,i=e.query_token,a=Ya.a.Views.make(i,o,r.columns);return t.store.dispatch({type:fd.LoadDefinitionQueryResultSuccess,queryRun:e,resource:n._resource,dataset:r,view:a,model:fr.Model.build(fr.Model.convertModeSchema(n.columns),r.content)}),r}):(t.store.dispatch({type:fd.LoadDefinitionQueryResultSuccess,queryRun:e,resource:n._resource}),null)});this.store.dispatch({type:fd.LoadDefinitionQueryResultFailure,queryRun:e});var n=this.buildFailedDataset(e);return this.$q.resolve(n)},DefinitionRunService.prototype.buildModelResult=function(e){var t={isLoaded:!0,queryName:null,state:e.state,columns:e.columns,content:e.content,count:e.count,query_token:e.query_token,reportDataUrl:e.reportDataUrl,reportQueryUrl:e.reportQueryUrl,content_length:e.content_length,csv:e.csv,oversized:e.oversized,model:fr.Model.build(fr.Model.convertModeSchema([]),[])};return e.state||(t.state="succeeded",t.model=fr.Model.build(fr.Model.convertModeSchema(e.columns),e.content)),t},DefinitionRunService.prototype.destroyDefinition=function(e){return e.forms("destroy").$submit()},DefinitionRunService.prototype.buildFailedDataset=function(e){return{query_token:e.query_token,state:e.state,reportDataUrl:e.hasLink("result_web")?e.links("result_web").href:void 0,reportQueryUrl:e.hasLink("query_web")?e.links("query_web").href:void 0}},DefinitionRunService.prototype.syncToGithub=function(e,t){var n=this;return e.forms("sync_to_github")?e.forms("sync_to_github").$submit({commit_message:t}).then(function(e){return n.store.dispatch({type:fd.SyncDefinitionSuccess})}).catch(function(e){var t=e&&e.data&&e.data.id||"Unknown error",r=e&&e.data&&e.data.message||"Push failed";n.store.dispatch({type:fd.SyncDefinitionFailure,error:{name:t,message:r}})}):this.$q.reject("Sync unavailable").catch(function(e){n.store.dispatch({type:fd.SyncDefinitionFailure,error:{name:"Unknown",message:"Push unavailable"}})})},DefinitionRunService.$inject=["$q","$rootScope","$log","$timeout","$window","StoreService","RxStoreService","DataSourceService","LibraryDefinitionModel","AlertService","ReportRunModel","QueryRunModel","DataSourceModel","ResultModel","ModeCollection","ApiService"],DefinitionRunService}(),Lu=function(){function ReportStateService(e,t,n,r,o,i,a,l,s){this.$rootScope=e,this.DatasetService=t,this.PythonVisualizationModel=n,this.flipperService=r,this.$q=o,this.ModeCollection=i,this.PythonCellService=a,this.QueryModel=l,this.RxStoreService=s,this.reportDeferred=o.defer(),this.reportRunDeferred=o.defer(),this.datasetsDeferred=o.defer(),this.notebookDeferred=o.defer()}return ReportStateService.prototype.resetState=function(){this.setReport(),this.setReportRun(),this.setDatasets(),this.setNotebook()},ReportStateService.prototype.setReport=function(e){e?(this.report=e,this.reportDeferred.resolve(this.report)):(this.report=null,this.reportDeferred=this.$q.defer(),this.reportDeferred.promise.catch(function(){}))},ReportStateService.prototype.getReport=function(){return this.report?this.$q.resolve(this.report):this.reportDeferred.promise},ReportStateService.prototype.setReportRun=function(e){e?(this.reportRun=e,this.reportRunDeferred.resolve(this.reportRun)):(this.reportRun=null,this.reportRunDeferred=this.$q.defer(),this.reportRunDeferred.promise.catch(function(){}))},ReportStateService.prototype.getReportRun=function(){return this.reportRun?this.$q.resolve(this.reportRun):this.reportRunDeferred.promise},ReportStateService.prototype.getReportAndReportRun=function(){return this.$q.all([this.getReport(),this.getReportRun()])},ReportStateService.prototype.setDatasets=function(e){e?(this.datasetsUpdated=!0,this.datasetsDeferred.resolve(e)):(this.datasetsUpdated=!1,this.datasetsDeferred=this.$q.defer(),this.datasetsDeferred.promise.catch(function(){}))},ReportStateService.prototype.getDatasets=function(){return this.datasetsUpdated?this.$q.resolve(this.DatasetService.datasets):this.datasetsDeferred.promise},ReportStateService.prototype.getNotebook=function(){return this.notebook?this.$q.resolve(this.notebook):this.notebookDeferred.promise},ReportStateService.prototype.setNotebook=function(e){e?(this.notebook=e,this.notebookDeferred.resolve(this.notebook)):(this.notebook=null,this.notebookDeferred=this.$q.defer(),this.notebookDeferred.promise.catch(function(){}))},ReportStateService.prototype.rejectNotebook=function(e){this.notebookDeferred&&this.notebookDeferred.reject(e)},ReportStateService.prototype.getReportQueries=function(){var e=this;return this.getReport().then(function(t){return t.queries().then(e.ModeCollection.elements)})},ReportStateService.prototype.getQueryVisualizations=function(){var e=this;return this.getReport().then(function(t){return t.queries().then(e.ModeCollection.elements).then(e.QueryModel.buildQueriesWithVisualizations)})},ReportStateService.$inject=["$rootScope","DatasetService","PythonVisualizationModel","DataLayerFlipperService","$q","ModeCollection","PythonCellService","QueryModel","RxStoreService"],ReportStateService}(),Ru=function(){function ChartExplorerService(e,t,n,r,o){var i=this;this.$rootScope=e,this.store=t,this.ChartModel=n,this.wms=r,this.alertService=o,t.actions.filter(function(e){return e.type===gl.UpdateType}).map(function(e){return e.type===gl.UpdateType?e:null}).withLatestFrom(this.store.select(Tl.getChart),function(e,t){return{oldType:t.chartType,newType:e.chartType,encoding:t.encResult.encoding}}).subscribe(function(e){i.store.dispatch({type:gl.UpdateTypeComplete,chartType:e.newType}),i.dispatchEncodingUpdate(Object(Ha.l)(e.oldType,e.newType,e.encoding))}),this.store.actions.filter(function(e){return e.type===gl.ViewChartData||e.type===gl.ExploreChartWithData}).map(function(e){return e.type===gl.ViewChartData||e.type===gl.ExploreChartWithData?e:null}).withLatestFrom(this.store.select(Tl.getChart),this.store.select(K.O)).switchMap(function(e){var t=e[0],n=e[1],r=e[2],o=t.target,a=t.chartToken,l=t.queryToken,s=r.getRecord(l).model,c=(n.title,n.format),d=(n.encResult,n.encResult.encoding);return pu.fromTarget(s,d,o).then(function(e){var t=e.summary,n=e.complete,r=e.encoding,d={format:c,model:s,encoding:r,summary:t,complete:n};return i.store.dispatch({target:o,chartToken:a,queryToken:l,result:d,type:hl.ViewChartDataSelectSuccess})}).catch(function(e){return i.store.dispatch({target:o,chartToken:a,queryToken:l,error:e,type:hl.ViewChartDataSelectFailure})})}).subscribe(),this.makeDataPaneUpdateEffect(gl.ExploreChart),this.makeDataPaneUpdateEffect(gl.ExploreChartMark),this.makeDataPaneUpdateEffect(gl.ExploreChartWithData),this.makeDataPaneUpdateEffect(gl.ExploreChartOnLoad),this.makeDataPaneUpdateEffect(gl.MinimizeDataPane),this.makeDataPaneUpdateEffect(gl.MaximizeDataPane),this.makeDataPaneUpdateEffect(gl.ChangeHierarchy),this.makeDataPaneUpdateEffect(gl.ClearEncoding),this.makeDataPaneUpdateEffect(gl.ClearFilters),this.makeDataPaneUpdateEffect(gl.ClearSorts),this.makeDataPaneUpdateEffect(gl.DrillDown),this.makeDataPaneUpdateEffect(gl.QuickSort),this.makeDataPaneUpdateEffect(gl.Redo),this.makeDataPaneUpdateEffect(gl.RemoveSort),this.makeDataPaneUpdateEffect(gl.ResetEncoding),this.makeDataPaneUpdateEffect(gl.Undo),this.makeDataPaneUpdateEffect(gl.UpdateEncoding),this.store.actions.filter(function(e){return e.type===gl.LoadChartSummaryData}).map(function(e){return e.type===gl.LoadChartSummaryData?e:null}).withLatestFrom(this.store.select(Tl.getChart),this.store.select(K.O)).filter(function(e){e[0];var t=e[1],n=e[2];return t.canRender&&n.hasRecord(t.queryToken)}).switchMap(function(e){e[0];var t=e[1],n=e[2],r=t.encResult.encoding,o=n.getRecord(t.queryToken).model;return pu.summary(o,r).then(function(e){i.store.dispatch({result:e,encoding:r,type:gl.LoadChartSummaryDataSuccess}),i.$rootScope.$apply()}).catch(function(e){i.store.dispatch({error:e,type:gl.LoadChartSummaryDataFailure}),i.$rootScope.$apply()})}).subscribe(),this.store.actions.filter(function(e){return e.type===gl.UpdateColors}).map(function(e){return e.type===gl.UpdateColors?e:null}).withLatestFrom(this.store.select(K.r)).subscribe(function(e){var t=e[0],n=e[1].find(function(e){return e.token===t.palette});i.alertService.success(n.name+" applied.")}),this.store.actions.filter(function(e){return e.type===qc.a.LoadQueryResultSuccess}).map(function(e){return e.type===qc.a.LoadQueryResultSuccess?e:null}).withLatestFrom(t.select(K.C),this.store.select(Ae.a.getQueryTokens)).filter(function(e){var t=e[0],n=e[1],r=e[2];return isExplorerUrl(n.name)&&r.get(n.params.vizId)===t.queryRun.query_token}).subscribe(function(e){e[0];var n=e[1];e[2];t.dispatch({type:gl.ExploreChartOnLoad,token:n.params.vizId})}),this.store.actions.filter(function(e){return e.type===Xs.CloseViewDataModal}).map(function(e){return e.type===Xs.CloseViewDataModal}).withLatestFrom(this.store.select(Tl.getModalIsOpen)).subscribe(function(e){e[0];e[1]&&setTimeout(function(){return Object(Ce.a)(window,"resize")},0)})}return ChartExplorerService.prototype.makeDataPaneUpdateEffect=function(e){var t=this;this.withLatestExplorerChart(this.store.actions.filter(function(t){return t.type===e})).subscribe(function(e){e.action;switch(e.designer.dataPane.view){case fl.PaneView.Minimized:break;case fl.PaneView.Regular:case fl.PaneView.Maximized:t.store.dispatch({type:gl.LoadChartSummaryData})}})},ChartExplorerService.prototype.withLatestExplorerChart=function(e){return e.withLatestFrom(this.store.select(K.m),function(e,t){return{action:e,designer:t}})},ChartExplorerService.prototype.dispatchEncodingUpdate=function(e,t){this.store.dispatch({type:gl.UpdateEncoding,result:e,pillAction:t})},ChartExplorerService.prototype.addDualAxisFieldToChartEncoding=function(e,t,n,r,o,i){var a=Object(Ha.b)(e,t,n,r,o,i);this.dispatchEncodingUpdate(a)},ChartExplorerService.prototype.openChart=function(e){this.store.dispatch({type:gl.ExploreChart,token:e.token})},ChartExplorerService.prototype.exploreChart=function(e){this.store.dispatch({type:gl.ExploreChart,token:e})},ChartExplorerService.prototype.removeSort=function(e){this.store.dispatch({type:gl.RemoveSort,source:e})},ChartExplorerService.prototype.updateChartType=function(e){this.store.dispatch({type:gl.UpdateType,chartType:e})},ChartExplorerService.prototype.updateChartFormat=function(e){this.store.dispatch({type:gl.UpdateFormat,format:e})},ChartExplorerService.prototype.updateTheme=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=[]),this.store.dispatch({type:gl.UpdateColors,colors:{theme:e,custom:n},palette:t})},ChartExplorerService.prototype.updateSeriesSpecificColor=function(e,t){this.store.dispatch({type:gl.UpdateSeriesSpecificColor,seriesName:e,color:t})},ChartExplorerService.prototype.clearEncoding=function(){this.store.dispatch({type:gl.ClearEncoding})},ChartExplorerService.prototype.resetEncoding=function(){this.store.dispatch({type:gl.ResetEncoding})},ChartExplorerService.prototype.clearSorts=function(){this.store.dispatch({type:gl.ClearSorts})},ChartExplorerService.prototype.clearFilters=function(){this.store.dispatch({type:gl.ClearFilters})},ChartExplorerService.prototype.undo=function(e){this.store.dispatch({type:gl.Undo})},ChartExplorerService.prototype.redo=function(e){this.store.dispatch({type:gl.Redo})},ChartExplorerService.prototype.swapAxes=function(){this.store.dispatch({type:gl.SwapAxes})},ChartExplorerService.prototype.quickSort=function(e){this.store.dispatch({type:gl.QuickSort,descending:e})},ChartExplorerService.prototype.drillDown=function(e,t){this.store.dispatch({target:t,type:gl.DrillDown})},ChartExplorerService.prototype.changeHierarchy=function(e,t){this.store.dispatch({type:gl.ChangeHierarchy,forward:t})},ChartExplorerService.prototype.minimizeChartPane=function(){this.store.dispatch({type:gl.MinimizeChartPane})},ChartExplorerService.prototype.maximizeChartPane=function(){this.store.dispatch({type:gl.MaximizeChartPane})},ChartExplorerService.prototype.minimizeDataPane=function(){this.store.dispatch({type:gl.MinimizeDataPane})},ChartExplorerService.prototype.maximizeDataPane=function(){this.store.dispatch({type:gl.MaximizeDataPane})},ChartExplorerService.$inject=["$rootScope","RxStoreService","ChartModel","WindowMessageService","AlertService"],ChartExplorerService}(),Nu=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Eu=function(){function ChartDesignerService(e,t,n,r,o){var i=this;this.$rootScope=e,this.store=t,this.ChartModel=n,this.viewService=r,this.alertService=o,this.store.actions.filter(function(e){return e.type===Q.c.SelectChart}).map(function(e){return e.type===Q.c.SelectChart?e:null}).withLatestFrom(this.store.select(Ae.a.getSelectedNormalizedChart),function(e,t){return{action:e,chart:t}}).subscribe(function(e){e.action;var t=e.chart;if(2===t.resource.view_version)if(t.chartType&&t.resource.view_vegas.encoding)i.store.dispatch({type:Q.c.SelectChartSuccess,payload:{chart:t.resource,encResult:Object(Ha.s)(t.encoding)}});else{var n=t.chartType||"line",r=Object(Ha.r)(t.chartType),o=Nu({},t.resource.view_vegas,{encoding:r.encoding,chartType:n});i.saveChart(t.resource,{view_vegas:o}).then(function(e){i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e}),i.store.dispatch({type:Q.c.SelectChartSuccess,payload:{chart:e,encResult:r}})})}}),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.UpdateType}).map(function(e){return e.type===Yc.UpdateType?e:null})).switchMap(function(e){var t=e.action,n=e.chart,r=n.resource.view_vegas.chartType,o=Nu({},n.resource.view_vegas,{chartType:t.chartType}),a=Object(Ha.l)(r,t.chartType,o.encoding);return o.encoding=a.encoding,i.saveChart(n.resource,{view_vegas:o}).then(function(e){return i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e}),i.viewService.emitPreviewUpdate("Chart",e.token,e._parent,e.view_vegas),e}).catch(function(e){return i.store.dispatch({type:Yc.UpdateTypeFailure,error:e})})}).subscribe(),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.UpdateEncoding}).map(function(e){return e.type===Yc.UpdateEncoding?e:null})).switchMap(function(e){var t=e.action,n=e.chart,r=Nu({},n.resource.view_vegas,{encoding:t.result.encoding,format:n.format});return i.saveChart(n.resource,{view_vegas:r}).then(function(e){i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e}),i.viewService.emitPreviewUpdate("Chart",e.token,e._parent,e.view_vegas)}).catch(function(e){return i.store.dispatch({type:Yc.UpdateEncodingFailure,error:e})})}).subscribe(),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.RemoveSort}).map(function(e){return e.type===Yc.RemoveSort?e:null})).switchMap(function(e){var t=e.action,n=e.chart;return i.saveVegasChartSettings(n).then(function(e){return i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return i.store.dispatch({type:Yc.RemoveSortFailure,source:t.source,error:e})})}).subscribe(),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.QuickSort}).map(function(e){return e.type===Yc.QuickSort?e:null})).switchMap(function(e){e.action;var t=e.chart;if(t)return i.saveVegasChartSettings(t).then(function(e){return i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return i.store.dispatch({type:Yc.QuickSortFailure,error:e})})}).subscribe(),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.ClearEncoding}).map(function(e){return e.type===Yc.ClearEncoding?e:null})).switchMap(function(e){e.action;var t=e.chart;return i.saveVegasChartSettings(t).then(function(e){return i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return i.store.dispatch({type:Yc.ClearEncodingFailure,token:t.token,error:e})})}).subscribe(),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.ClearFilters}).map(function(e){return e.type===Yc.ClearFilters?e:null})).switchMap(function(e){e.action;var t=e.chart;return i.saveVegasChartSettings(t).then(function(e){return i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return i.store.dispatch({type:Yc.ClearFiltersFailure,token:t.token,error:e})})}).subscribe(),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.ClearSorts}).map(function(e){return e.type===Yc.ClearSorts?e:null})).switchMap(function(e){e.action;var t=e.chart;return i.saveVegasChartSettings(t).then(function(e){return i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return i.store.dispatch({type:Yc.ClearSortsFailure,token:t.token,error:e})})}).subscribe(),this.withLatestSelectedChart(this.store.actions.filter(function(e){return e.type===Yc.SwapAxes}).map(function(e){return e.type===Yc.SwapAxes?e:null})).switchMap(function(e){e.action;var t=e.chart;return i.saveVegasChartSettings(t).then(function(e){return i.store.dispatch({type:Lc.UpdateChartSuccess,payload:e})}).catch(function(e){return i.store.dispatch({type:Yc.SwapAxesFailure,token:t.token,error:e})})}).subscribe(),this.store.actions.filter(function(e){return e.type===Q.c.SelectChartSuccess}).map(function(e){return e.type===Q.c.SelectChartSuccess?e:null}).withLatestFrom(this.store.select(K.G)).subscribe(function(e){e[0];switch(e[1].dataPane.view){case fl.PaneView.Minimized:break;case fl.PaneView.Regular:case fl.PaneView.Maximized:i.store.dispatch({type:Yc.LoadChartSummaryData})}}),this.store.actions.filter(function(e){return e.type===Yc.LoadChartSummaryData}).map(function(e){return e.type===Yc.LoadChartSummaryData?e:null}).withLatestFrom(this.store.select(Ae.a.getSelectedChart),this.store.select(K.O)).filter(function(e){e[0];var t=e[1],n=e[2];return t&&t.canRender&&n.hasRecord(t.queryToken)}).switchMap(function(e){e[0];var t=e[1],n=e[2],r=t.encResult.encoding,o=n.getRecord(t.queryToken).model;return pu.summary(o,t.encResult.encoding).then(function(e){i.store.dispatch({result:e,encoding:r,type:Yc.LoadChartSummaryDataSuccess}),i.$rootScope.$apply()}).catch(function(e){i.store.dispatch({error:e,type:Yc.LoadChartSummaryDataFailure}),i.$rootScope.$apply()})}).subscribe(),this.chartEditorDataPaneUpdateEffect(ml.ChangeHierarchy),this.chartEditorDataPaneUpdateEffect(ml.DrillDown),this.chartEditorDataPaneUpdateEffect(ml.Redo),this.chartEditorDataPaneUpdateEffect(ml.Undo),this.chartDesignerDataPaneUpdateEffect(Yc.ClearSorts),this.chartDesignerDataPaneUpdateEffect(Yc.ClearEncoding),this.chartDesignerDataPaneUpdateEffect(Yc.ClearFilters),this.chartDesignerDataPaneUpdateEffect(Yc.QuickSort),this.chartDesignerDataPaneUpdateEffect(Yc.RemoveSort),this.chartDesignerDataPaneUpdateEffect(Yc.UpdateType),this.chartDesignerDataPaneUpdateEffect(Yc.UpdateEncoding),this.chartDesignerDataPaneUpdateEffect(Yc.MinimizeDataPane),this.chartDesignerDataPaneUpdateEffect(Yc.MaximizeDataPane),this.store.actions.filter(function(e){return e.type===Yc.UpdateColors}).map(function(e){return e.type===Yc.UpdateColors?e:null}).withLatestFrom(this.store.select(K.r)).subscribe(function(e){var t=e[0],n=e[1].find(function(e){return e.token===t.palette});i.alertService.success(n.name+" applied.")}),this.chartFormatUpdateEffect(Yc.UpdateFormat),this.chartFormatUpdateEffect(Yc.UpdateColors),this.chartFormatUpdateEffect(Yc.UpdateSeriesSpecificColor)}return ChartDesignerService.prototype.saveChartFormat=function(e,t){var n=this,r=Nu({},e.resource.view_vegas,{format:t});return this.saveChart(e.resource,{view_vegas:r,color_palette_token:e.colorPaletteToken}).then(function(e){n.store.dispatch({type:Lc.UpdateChartSuccess,payload:e}),n.viewService.emitPreviewUpdate("Chart",e.token,e._parent,e.view_vegas)}).catch(function(e){return n.store.dispatch({type:Yc.UpdateFormatFailure,error:e})})},ChartDesignerService.prototype.chartFormatUpdateEffect=function(e){var t=this;this.withLatestSelectedChart(this.store.actions.filter(function(t){return t.type===e})).switchMap(function(e){e.action;var n=e.chart;return t.saveChartFormat(n,n.format)}).subscribe()},ChartDesignerService.prototype.chartEditorDataPaneUpdateEffect=function(e){var t=this;this.withLatestSelectedDesigner(this.store.actions.filter(function(t){return t.type===e})).subscribe(function(e){e.action;switch(e.designer.dataPane.view){case fl.PaneView.Minimized:break;case fl.PaneView.Regular:case fl.PaneView.Maximized:t.store.dispatch({type:Yc.LoadChartSummaryData})}})},ChartDesignerService.prototype.chartDesignerDataPaneUpdateEffect=function(e){var t=this;this.withLatestSelectedDesigner(this.store.actions.filter(function(t){return t.type===e})).subscribe(function(e){e.action;switch(e.designer.dataPane.view){case fl.PaneView.Minimized:break;case fl.PaneView.Regular:case fl.PaneView.Maximized:t.store.dispatch({type:Yc.LoadChartSummaryData})}})},ChartDesignerService.prototype.withLatestSelectedDesigner=function(e){return e.withLatestFrom(this.store.select(K.G),function(e,t){return{action:e,designer:t}})},ChartDesignerService.prototype.withLatestSelectedChart=function(e){return e.withLatestFrom(this.store.select(Ae.a.getSelectedChart),function(e,t){return{action:e,chart:t}}).filter(function(e){return null!=e.chart})},ChartDesignerService.prototype.saveVegasChartSettings=function(e){var t=this;return this.saveChart(e.resource,{view_vegas:{format:e.format,title:e.title,chartType:e.chartType,encoding:e.encResult.encoding},color_palette_token:e.colorPaletteToken}).then(function(e){return t.viewService.emitPreviewUpdate("Chart",e.token,e._parent,e.view_vegas),e})},ChartDesignerService.prototype.saveChart=function(e,t){var n=Object.assign(new this.ChartModel.model(e),t);return this.ChartModel.update(n).then(function(e){return e._resource._parent=e.parent,e._resource})},ChartDesignerService.prototype.dispatchEncodingUpdate=function(e,t){this.store.dispatch({type:Yc.UpdateEncoding,result:e,pillAction:t})},ChartDesignerService.prototype.updateChartType=function(e){this.store.dispatch({type:Yc.UpdateType,chartType:e})},ChartDesignerService.prototype.addDualAxisFieldToChartEncoding=function(e,t,n,r,o,i){var a=Object(Ha.b)(e,t,n,r,o,i);this.dispatchEncodingUpdate(a)},ChartDesignerService.prototype.removeSort=function(e){this.store.dispatch({type:Yc.RemoveSort,source:e})},ChartDesignerService.prototype.updateChartFormat=function(e){this.store.dispatch({type:Yc.UpdateFormat,format:e})},ChartDesignerService.prototype.updateTheme=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=[]),this.store.dispatch({type:Yc.UpdateColors,colors:{theme:e,custom:n},palette:t})},ChartDesignerService.prototype.updateSeriesSpecificColor=function(e,t){this.store.dispatch({type:Yc.UpdateSeriesSpecificColor,seriesName:e,color:t})},ChartDesignerService.prototype.clearEncoding=function(){this.store.dispatch({type:Yc.ClearEncoding})},ChartDesignerService.prototype.resetEncoding=function(){this.clearEncoding()},ChartDesignerService.prototype.clearFilters=function(){this.store.dispatch({type:Yc.ClearFilters})},ChartDesignerService.prototype.clearSorts=function(){this.store.dispatch({type:Yc.ClearSorts})},ChartDesignerService.prototype.undo=function(e){this.store.dispatch({type:ml.Undo,token:e})},ChartDesignerService.prototype.redo=function(e){this.store.dispatch({type:ml.Redo,token:e})},ChartDesignerService.prototype.swapAxes=function(){this.store.dispatch({type:Yc.SwapAxes})},ChartDesignerService.prototype.quickSort=function(e){this.store.dispatch({type:Yc.QuickSort,descending:e})},ChartDesignerService.prototype.drillDown=function(e,t){this.store.dispatch({chartToken:e,target:t,type:ml.DrillDown})},ChartDesignerService.prototype.changeHierarchy=function(e,t){this.store.dispatch({type:ml.ChangeHierarchy,chartToken:e,forward:t})},ChartDesignerService.prototype.minimizeChartPane=function(){this.store.dispatch({type:Yc.MinimizeChartPane})},ChartDesignerService.prototype.maximizeChartPane=function(){this.store.dispatch({type:Yc.MaximizeChartPane})},ChartDesignerService.prototype.minimizeDataPane=function(){this.store.dispatch({type:Yc.MinimizeDataPane})},ChartDesignerService.prototype.maximizeDataPane=function(){this.store.dispatch({type:Yc.MaximizeDataPane})},ChartDesignerService.$inject=["$rootScope","RxStoreService","ChartModel","ViewService","AlertService"],ChartDesignerService}(),ju=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),Ou=function(e){function PollingObservable(t,n){return e.call(this,function(e){var r=new Gn.a(t),o=0,i=setTimeout(function tick(){n.subscribe(function(t){e.next({count:o,value:t}),i>0&&(i=setTimeout(tick,r.duration()))},function(t){e.error(t),e.complete()});o+=1},r.duration());return new V.Subscription(function(){clearTimeout(i),i=-1})})||this}return ju(PollingObservable,e),PollingObservable}(V.Observable);var Pu=500,Fu=5e3,zu=1.2,_u="python_cells",$u="last_python_cell_run",Bu="new_python_cell_run",Vu="new_python_cell_batch_run",Uu="python_cell_run",Zu="cell_runs",Gu="perspective_python_sessions",Yu="new_python_session",Qu="python_visualizations",Hu="new_python_visualization",Wu="python_cell",qu="new_python_cell",Ju="python_cell_run_results",Xu="result",Ku=function(){function NotebookDataService(e,t,n,r,o,i,a,l,s,c,d,u,p,h){var g=this;this.$rootScope=e,this.store=t,this.realtime=n,this.modeCollection=r,this.ModeResource=o,this.PythonSessionModel=i,this.notebookModel=a,this.cellModel=l,this.api=s,this.wms=c,this.$http=d,this.$timeout=u,this.analytics=p,this.$q=h,t.actions.ofType(Q.c.SelectReport).withLatestFrom(t.actions.ofType(te.a.LoadReportSuccess)).switchMap(function(e){e[0];var t=e[1];return g.loadNotebook(t.reportResource)}).subscribe(),t.actions.filter(function(e){return e.type===te.a.LoadReportSuccess}).map(function(e){return e.type===te.a.LoadReportSuccess?e:null}).filter(function(e){return!e.isEmbedded}).switchMap(function(e){return e.reportResource.hasEmbedded(Qu)?g.api.getResources(e.reportResource,Qu).then(function(e){return g.store.dispatch({type:Z.Type.LoadEmbeddedLayoutVisualsSuccess,vizResources:e})}).catch(function(e){return g.store.dispatch({type:Z.Type.LoadLayoutVisualsFailure,error:e})}):V.Observable.from([])}).subscribe(),t.actions.ofType(U.Type.LoadFromSelectedReport).combineLatest(t.select(K.S).filter(function(e){return null!=e})).switchMap(function(e){e[0];var t=e[1];return g.loadNotebook(t).then(function(){return g.initNotebook()})}).subscribe(),t.actions.ofType(U.Type.Init).withLatestFrom(t.select("client","notebooks","books","resources"),t.select("client","notebooks","books","initialized")).filter(function(e){e[0];var t=e[1],n=e[2];return t.count()>0&&!n.get(t.first().token)}).switchMap(function(e){e[0];var t=e[1].first();return t&&(g.store.dispatch({type:U.Type.InitComplete}),t.hasLink(_u))?g.api.getResources(t,_u,{includes:{python_cells:[Bu]}}).then(function(e){return g.store.dispatch({type:Z.Type.LoadNotebookCellsSuccess,notebookToken:t.token,cellResources:e})}).catch(function(e){return g.store.dispatch({type:Z.Type.LoadNotebookCellsFailure,notebookToken:t.token,error:e})}):V.Observable.from([])}).subscribe(),t.actions.filter(function(e){return e.type===U.Type.LoadWithInitSuccess||e.type===U.Type.AddSuccess}).map(function(e){return e.type===U.Type.LoadWithInitSuccess||e.type===U.Type.AddSuccess?e:null}).switchMap(function(e){return g.realtime.connect(e.notebookResource.pusher_channel_name),e.notebookResource.hasLink(_u)?g.api.getResources(e.notebookResource,_u,{includes:{python_cells:[{last_python_cell_run:"python_cell_run_results"},Bu]}}).then(function(t){return g.store.dispatch({type:Z.Type.LoadNotebookCellsSuccess,notebookToken:e.notebookResource.token,cellResources:t})}).catch(function(t){return g.store.dispatch({type:Z.Type.LoadNotebookCellsFailure,notebookToken:e.notebookResource.token,error:t})}):V.Observable.from([])}).subscribe(),t.actions.ofType(Z.Type.LoadNotebookCellsSuccess).mergeMap(function(e){return e.cellResources}).filter(function(e){return e.hasLink($u)}).subscribe(function(e){return s.getResource(e,$u).then(function(t){return g.store.dispatch({type:wd.Type.LoadLastCellRunSuccess,cellToken:e.token,resource:t})}).catch(function(t){return g.store.dispatch({type:wd.Type.LoadLastCellRunFailure,cellToken:e.token,error:t})})}),t.actions.ofType(wd.Type.LoadLastCellRunSuccess).switchMap(function(e){return s.getResources(e.resource,Ju).then(function(t){return g.store.dispatch({type:wd.Type.LoadCellRunResultsSuccess,runToken:e.resource.token,resultResources:t})}).catch(function(t){return g.store.dispatch({type:wd.Type.LoadCellRunResultsFailure,runToken:e.resource.token,error:t})})}).subscribe(),t.actions.ofType(wd.Type.LoadCellRunResultSuccess).switchMap(function(e){var t=e.resultResource;return t.hasLink(Xu)||t.hasEmbedded(Xu)?"image"===t.result_type||"csv"===t.result_type?(g.store.dispatch({type:wd.Type.LoadCellRunResultContentSuccess,resultToken:t.token,content:t.links("web_result").href}),V.Observable.from([t.links("web_result").href])):d.get(t.links(Xu).href,{responseType:"text",transformResponse:function(e){return e}}).then(function(e){return g.store.dispatch({type:wd.Type.LoadCellRunResultContentSuccess,resultToken:t.token,content:e.data})}).catch(function(e){return g.store.dispatch({type:wd.Type.LoadCellRunResultContentFailure,resultToken:t.token,error:e})}):V.Observable.from([])}).subscribe(),t.actions.ofType(wd.Type.LoadCellRunResultSuccess).switchMap(function(e){return g.api.getResource(e.resultResource,Uu).then(function(t){return g.store.dispatch({type:wd.Type.LoadCellRunFromBatchSuccess,resource:t,cellToken:e.cellToken})}).catch(function(t){return g.store.dispatch({type:wd.Type.LoadLastCellRunFailure,error:t,cellToken:e.cellToken})})}).subscribe(),t.actions.ofType(wd.Type.LoadCellRunResultsSuccess).switchMap(function(e){return V.Observable.merge(e.resultResources.map(function(e){return"image"===e.result_type||"csv"===e.result_type?(g.store.dispatch({type:wd.Type.LoadCellRunResultContentSuccess,resultToken:e.token,content:e.links("web_result").href}),V.Observable.empty()):d.get(e.links(Xu).href,{responseType:"text",transformResponse:function(e){return e}}).then(function(t){return g.store.dispatch({type:wd.Type.LoadCellRunResultContentSuccess,resultToken:e.token,content:t.data})}).catch(function(t){return g.store.dispatch({type:wd.Type.LoadCellRunResultContentFailure,resultToken:e.token,error:t})})}))}).subscribe(),this.store.actions.ofType(Z.Type.LoadLayoutVisuals).withLatestFrom(this.store.select(K.R)).switchMap(function(e){e[0];var t=e[1];return g.api.getResource(t.resource,"report").then(function(e){return g.api.getResources(e,Qu).then(function(n){return{visuals:n,reportResource:e,reportRunState:t}})})}).filter(function(e){var t=e.visuals;e.reportResource,e.reportRunState;return t.length>0}).switchMap(function(e){var t,n=e.visuals,r=e.reportResource,o=e.reportRunState;return g.store.dispatch({type:Z.Type.StubLayoutVisuals,vizResources:n}),new Ou({min:Pu,max:Fu,factor:zu},(t=function(){return g.api.getSelf(o.resource)},V.Observable.create(function(e){t().then(function(t){return e.next(t)}).catch(function(t){return e.error(t)}).finally(function(){return e.complete()})}))).takeUntil(V.Observable.merge(g.store.actions.ofType(Z.Type.LoadLayoutVisualsReady),g.store.actions.ofType(Z.Type.LoadLayoutVisualsFailure))).map(function(e){return{type:Z.Type.PolledLayoutVisuals,report:r,reportRun:e.value}})}).subscribe(function(e){return g.store.dispatch(e)},function(e){return g.store.dispatch({type:Z.Type.LoadLayoutVisualsFailure,error:e})}),this.store.actions.ofType(Z.Type.PolledLayoutVisuals).switchMap(function(e){var t,n,r=e.report,o=e.reportRun;if("failed"===o.python_state)g.store.dispatch({type:Z.Type.LoadLayoutVisualsFailure,error:new Error("python_state on report run returned as 'failed' by server")});else if("succeeded"===o.python_state||"none"===o.python_state){if(g.store.dispatch({type:Z.Type.LoadLayoutVisualsReady}),r.hasLink(Qu))return g.api.getResources(r,Qu,{includes:(t={},t[Qu]=(n={},n[Uu]=Ju,n),t)}).then(function(e){return g.store.dispatch({type:Z.Type.LoadLayoutVisualsSuccess,reportRun:o,vizResources:e})}).catch(function(e){return g.store.dispatch({type:Z.Type.LoadLayoutVisualsFailure,error:e})});g.store.dispatch({type:Z.Type.LoadLayoutVisualsSuccess,reportRun:o,vizResources:[]})}return[]}).subscribe(),V.Observable.merge(t.actions.ofType(Z.Type.LoadLayoutVisualsSuccess),t.actions.ofType(Z.Type.LoadEmbeddedLayoutVisualsSuccess)).switchMap(function(e){return V.Observable.merge(e.vizResources.map(function(e){var t=Object(Rt.getTokenFromModeLink)(e.links(Wu));return g.store.dispatch({type:Z.Type.LoadVizCellSuccess,vizToken:e.token,cellToken:t}),s.getResource(e,Uu).then(function(e){return g.store.dispatch({type:wd.Type.LoadLastCellRunSuccess,cellToken:t,resource:e})}).catch(function(e){return g.store.dispatch({type:wd.Type.LoadLastCellRunFailure,cellToken:t,error:e})})}))}).subscribe(),t.actions.ofType(U.Type.UpdateType).withLatestFrom(t.select(A.b.notebookResourcesArray)).switchMap(function(e){var n=e[0],r=e[1].get(n.notebookToken);return r?r.forms("edit").$submit({"python_notebook.notebook_type":n.notebookType,includes:["new_python_session","new_python_cell_batch_run","new_python_cell"]}).then(function(e){t.dispatch({type:U.Type.UpdateSuccess,notebookResource:e})}):V.Observable.empty()}).subscribe(),t.actions.ofType(U.Type.UpdateSuccess).subscribe(function(e){var t=e.notebookResource.token;g.initSession(t,!1)}),t.actions.ofType(U.Type.Add).switchMap(function(e){return g.notebookModel.create({report:e.reportToken,params:{"python_notebook.doc_cells":!0,includes:["perspective_python_sessions","python_cells","new_python_cell","new_python_session","new_python_cell_batch_run"]}}).then(function(e){return g.store.dispatch({type:U.Type.AddSuccess,notebookResource:e._resource})}).catch(function(t){return g.store.dispatch({type:U.Type.AddFailure,error:t,reportToken:e.reportToken})})}).subscribe(),t.actions.ofType(Z.Type.AddCell).withLatestFrom(t.select(A.b.selectedNotebookResource)).switchMap(function(e){var t=e[0],n=e[1],r={"python_cell.content":t.content||"","python_cell.content_type":t.contentType||"python",includes:Bu};return t.nextToken&&(r["python_cell.next_cell_token"]=t.nextToken),g.api.create(n,qu,r).then(function(e){return g.store.dispatch({type:Z.Type.AddCellSuccess,cellResource:e,notebookToken:t.notebookToken,nextToken:t.nextToken})}).catch(function(e){return g.store.dispatch({type:Z.Type.AddCellFailure,error:e,notebookToken:t.notebookToken})})}).subscribe(),t.actions.ofType(Z.Type.AddCellAndRun).withLatestFrom(t.select(A.b.selectedNotebookResource)).switchMap(function(e){var t=e[0],n=e[1],r={"python_cell.content":t.content,"python_cell.content_type":"python",includes:Bu};return t.nextToken&&(r["python_cell.next_cell_token"]=t.nextToken),g.api.create(n,qu,r).then(function(e){g.store.dispatch({type:Z.Type.AddCellSuccess,cellResource:e,notebookToken:t.notebookToken,nextToken:t.nextToken}),g.store.dispatch({type:U.Type.Run,notebookToken:t.notebookToken,cellTokensToRun:[e.token]})}).catch(function(e){return g.store.dispatch({type:Z.Type.AddCellFailure,error:e,notebookToken:t.notebookToken})})}).subscribe(),t.actions.ofType(Z.Type.MoveCell).withLatestFrom(t.select(A.b.selectedNotebookCellTokens),t.select(A.b.cellResourcesArray),t.select(A.b.selectedNextCellToken)).switchMap(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=r.get(t.cellToken);if(i&&n){var a=n.toArray(),l=a.indexOf(t.cellToken),s=a[l+1];if(t.down&&(i=r.get(a[l-1]),s=t.cellToken),l>=0&&s)return g.updateCell(i,{next_cell_token:s}).then(function(e){return g.store.dispatch({type:Z.Type.UpdateCellSuccess,cellResource:e})}).catch(function(e){return g.store.dispatch({type:Z.Type.MoveCellFailure,error:e,cellToken:t.cellToken,nextCellToken:o})})}return V.Observable.empty()}).subscribe(),t.actions.ofType(Z.Type.UpdateCell).withLatestFrom(t.select(A.b.cellResourcesArray),t.select(A.b.cellContentsArray),t.select(A.b.cellContentTypesArray),function(e,t,n,r){return{cellToken:e.cellToken,resource:t.get(e.cellToken),content:n.get(e.cellToken),content_type:r.get(e.cellToken)}}).filter(function(e){return e.resource.content!==e.content||e.resource.content_type!==e.content_type}).switchMap(function(e){return g.updateCell(e.resource,{content:e.content,content_type:e.content_type}).then(function(e){return g.store.dispatch({type:Z.Type.UpdateCellSuccess,cellResource:e})}).catch(function(t){return g.store.dispatch({type:Z.Type.UpdateCellFailure,error:t,cellToken:e.cellToken})})}).subscribe(),t.actions.ofType(Z.Type.DestroyCell).withLatestFrom(this.store.select(A.b.cellResourcesArray),this.store.select(A.b.notebookCellTokensArray)).switchMap(function(e){var t=e[0],n=e[1],r=e[2],o=n.get(t.cellToken);return o?o.forms("destroy").$submit().then(function(){g.store.dispatch({type:Z.Type.RemoveFromLayout,cellToken:t.cellToken}),g.store.dispatch({type:Z.Type.DestroyCellSuccess,cellToken:t.cellToken,notebookToken:t.notebookToken}),r.get(t.notebookToken).isEmpty()&&g.store.dispatch({type:Z.Type.AddCell,notebookToken:t.notebookToken})}).catch(function(e){return g.store.dispatch({type:Z.Type.DestroyCellFailure,cellToken:t.cellToken,notebookToken:t.notebookToken,error:e})}):V.Observable.empty()}).subscribe(),t.actions.ofType(Z.Type.ToggleFreezeCell).withLatestFrom(t.select(A.b.cellFrozenArray),t.select(A.b.cellResourcesArray)).switchMap(function(e){var t=e[0],n=e[1],r=e[2];return r.has(t.cellToken)?g.updateCell(r.get(t.cellToken),{frozen_in_layout:n.get(t.cellToken)}).then(function(e){return g.store.dispatch({type:Z.Type.UpdateCellSuccess,cellResource:e})}).catch(function(e){return g.store.dispatch({type:Z.Type.ToggleFreezeCellFailure,error:e,cellToken:t.cellToken})}):V.Observable.empty()}).subscribe(),t.actions.ofType(Z.Type.UpdateContentType).withLatestFrom(t.select(A.b.cellResourcesArray)).filter(function(e){var t=e[0];return e[1].has(t.cellToken)}).switchMap(function(e){var t=e[0],n=e[1];return g.updateCell(n.get(t.cellToken),{content_type:t.contentType,frozen_in_layout:!1}).then(function(e){g.store.dispatch({type:Z.Type.UpdateCellSuccess,cellResource:e}),g.store.dispatch({type:Z.Type.RemoveFromLayout,cellToken:t.cellToken})}).catch(function(e){return g.store.dispatch({type:Z.Type.UpdateContentTypeFailure,error:e,cellToken:t.cellToken})})}).subscribe(),t.actions.ofType(Z.Type.AddToLayout).withLatestFrom(t.select(K.S)).switchMap(function(e){var t=e[0],n=e[1];return g.api.create(n,Hu,{"report_layout_python_cell.python_cell.token":t.cellToken}).then(function(e){g.store.dispatch({type:Z.Type.AddToLayoutSuccess,vizResource:e,cellToken:t.cellToken}),g.$timeout(function(){return g.$rootScope.$broadcast("preview.addViz",{id:"python_"+e.token,saveReport:!0,position:null,placement:void 0})})}).catch(function(e){return g.store.dispatch({type:Z.Type.AddToLayoutFailure,error:e,cellToken:t.cellToken})})}).subscribe(),t.actions.ofType(Z.Type.RemoveFromLayout).withLatestFrom(t.select("client","selectedReport","notebookViz","cellTokens"),t.select("client","selectedReport","notebookViz","resources")).switchMap(function(e){var t=e[0],n=e[1],r=e[2],o=n.findKey(function(e){return e===t.cellToken}),i=r.get(o);return o&&i?(g.$rootScope.$broadcast("preview.removeViz",{id:"python_"+o}),i.forms("destroy").$submit().then(function(){g.store.dispatch({type:Z.Type.RemoveFromLayoutSuccess,cellToken:t.cellToken,vizToken:o})}).catch(function(e){return g.store.dispatch({type:Z.Type.RemoveFromLayoutFailure,cellToken:t.cellToken,vizToken:o,error:e})})):V.Observable.empty()}).subscribe(),t.actions.ofType(Z.Type.RemoveFromLayoutViaBuilder).withLatestFrom(t.select("client","selectedReport","notebookViz","cellTokens"),t.select("client","selectedReport","notebookViz","resources")).switchMap(function(e){var t=e[0],n=e[1],r=e[2],o=t.vizToken,i=r.get(o);return o&&i?i.forms("destroy").$submit().then(function(){g.store.dispatch({type:Z.Type.RemoveFromLayoutSuccess,cellToken:n.get(o),vizToken:o})}).catch(function(e){return g.store.dispatch({type:Z.Type.RemoveFromLayoutFailure,cellToken:n.get(o),vizToken:o,error:e})}):V.Observable.empty()}).subscribe(),t.actions.ofType(Z.Type.UpdateVizTitle).withLatestFrom(t.select("client","selectedReport","notebookViz","resources"),t.select("client","selectedReport","notebookViz","cellTokens")).switchMap(function(e){var t=e[0],n=e[1],r=(e[2],n.get(t.vizToken));return r?r.forms("edit").$submit({"report_layout_python_cell.title":t.title}).then(function(e){return g.store.dispatch({type:Z.Type.UpdateVizSuccess,vizResource:e})}).catch(function(e){return g.store.dispatch({type:Z.Type.UpdateVizTitleFailure,error:e,vizToken:t.vizToken})}):V.Observable.empty()}).subscribe(),t.actions.ofType(U.Type.InitSession).withLatestFrom(this.store.select("client","notebooks","books")).switchMap(function(e){var t=e[0],n=e[1],r=n.resources.get(t.notebookToken),o=n.sessions.get(t.notebookToken),i=n.pusherChannelNames.get(t.notebookToken);if(g.realtime.connect(i),r.hasLink(Gu)){var a=function(){return g.api.getResources(r,Gu,{relationAs:"python_sessions"}).then(function(e){var t=e.find(function(e){return e.active});if(!t)return g.api.create(r,Yu,{}).then(function(e){return g.store.dispatch({type:U.Type.LoadSessionSuccess,notebookToken:r.token,sessionResource:e})}).catch(function(e){return g.store.dispatch({type:U.Type.InitSessionFailure,notebookToken:r.token,error:e})});g.store.dispatch({type:U.Type.LoadSessionSuccess,notebookToken:r.token,sessionResource:t})})};return o&&o.active?o.forms("destroy").$submit().then(a).catch(function(e){return g.store.dispatch({type:U.Type.InitSessionFailure,notebookToken:r.token,error:e})}):a()}return V.Observable.from([])}).subscribe(),t.actions.ofType(U.Type.RefreshSessionReportRun).withLatestFrom(t.select(K.R),t.select(A.b.selectedNotebookSession)).switchMap(function(e){e[0];var t=e[1],n=e[2];return n.forms("load_report_run").$submit({"report_run.token":t.token}).catch(function(e){return g.store.dispatch({type:U.Type.Terminated,terminationReason:e.message,sessionToken:n.token})})}).subscribe(),t.actions.ofType(U.Type.LoadSessionSuccess).filter(function(e){return e.sessionResource.active}).withLatestFrom(t.select(K.R)).switchMap(function(e){var t=e[0],n=e[1];return g.store.dispatch({type:U.Type.PollSession,notebookToken:t.notebookToken}),n&&bs.isSessionEmpty(t.sessionResource)?t.sessionResource.forms("load_report_run").$submit({"report_run.token":n.token}).catch(function(e){return g.store.dispatch({type:U.Type.Terminated,terminationReason:e.message,sessionToken:t.sessionResource.token})}):V.Observable.empty()}).subscribe(),t.actions.ofType(U.Type.PollSession).withLatestFrom(this.store.select("client","notebooks","books","sessions")).switchMap(function(e){var t=e[0],n=!1,r=e[1].get(t.notebookToken);return V.Observable.interval(3e4).takeWhile(function(e){return!n}).switchMap(function(){return g.api.getSelf(r).then(function(e){e.active||(n=!0,g.store.dispatch({type:U.Type.LoadSessionSuccess,notebookToken:t.notebookToken,sessionResource:e}))})}).catch(function(e){return g.store.dispatch({type:U.Type.NoSession,notebookToken:t.notebookToken,error:e}),V.Observable.empty()})}).subscribe(),t.actions.ofType(U.Type.AddSuccess).subscribe(function(e){g.store.dispatch({type:U.Type.InitSession,notebookToken:e.notebookResource.token,reuseIfActive:!1,runNewCells:!0})}),t.actions.ofType(U.Type.Run).filter(function(e){return null!=e.cellTokensToRun&&e.cellTokensToRun.length>0}).withLatestFrom(t.select(A.b.selectedNotebookSession),t.selectWithParam(A.b.cellsByNotebook,t.select(A.b.selectedNotebookToken))).switchMap(function(e){var t=e[0],n=e[1],r=e[2];return n&&n.active&&r?V.Observable.merge(r.filter(function(e){return e.content_type===ne.a.Python&&e.content&&t.cellTokensToRun.indexOf(e.token)>=0}).map(function(e){return e.resource.hasEmbedded(Bu)?g.api.create(e.resource,Bu,{"python_cell.content":e.content,"python_cell.content_type":e.content_type,"python_cell.python_session.token":n.token}).then(function(t){g.store.dispatch({type:wd.Type.CreateRunSuccess,cellToken:e.token,resource:t})}).catch(function(n){return g.store.dispatch({type:Z.Type.RunFailed,notebookToken:t.notebookToken,cellToken:e.token,error:n})}):(g.store.dispatch({type:Z.Type.RunFailed,notebookToken:t.notebookToken,cellToken:e.token,error:new Error("No new run form in cell")}),console.error("No new run form in cell",e.token),V.Observable.empty())})):(g.store.dispatch({type:U.Type.NoSession,notebookToken:t.notebookToken}),V.Observable.from([]))}).subscribe(),t.actions.ofType(U.Type.Run).filter(function(e){return null==e.cellTokensToRun}).withLatestFrom(t.select(A.b.selectedNotebookResource),t.select(A.b.selectedNotebookSession)).switchMap(function(e){var t=e[0],n=e[1],r=e[2];return n&&r&&r.active?g.api.create(n,Vu,{"python_cell_batch_run.python_session.token":r.token,"python_cell_batch_run.run_all":!0,includes:{python_cells:{python_cells:"last_python_cell_run"}}}).then(function(e){if(g.store.dispatch({type:U.Type.CreateRunSuccess,notebookToken:t.notebookToken}),e.hasEmbedded(Zu))for(var n=0,r=e.embedded(Zu);n<r.length;n++){var o=r[n];g.store.dispatch({type:wd.Type.LoadCellRunFromBatchSuccess,cellToken:Object(Rt.getTokenFromModeLink)(o.links(Wu)),resource:o})}}).catch(function(e){return g.store.dispatch({type:U.Type.RunFailed,notebookToken:t.notebookToken,error:e})}):(n&&r&&g.store.dispatch({type:U.Type.NoSession,notebookToken:t.notebookToken}),V.Observable.from([]))}).subscribe(),t.actions.ofType(U.Type.DataLoaded).withLatestFrom(t.select(A.b.notebookAwaitingRunArray)).filter(function(e){var t=e[0];return e[1].get(t.notebookToken)}).map(function(e){var t=e[0];e[1];return t}).withLatestFrom(t.select(A.b.notebookCellTokensArray),t.select(A.b.cellResourcesArray),t.select(A.b.notebookSessionsArray),function(e,t,n,r){return{action:e,cellResources:t.get(e.notebookToken).map(function(e){return n.get(e)}).toArray(),session:r.get(e.notebookToken)}}).filter(function(e){e.action;var t=e.cellResources,n=e.session;return t.length>0&&null!=n}).switchMap(function(e){var t=e.action,n=e.cellResources,r=e.session;if(n.length>0){var o=n.find(function(e){return e.content_type!==ne.a.Markdown});if(o)return g.api.create(o,Bu,{"python_cell.content":o.content,"python_cell.content_type":o.content_type,"python_cell.python_session.token":r.token}).then(function(e){g.store.dispatch({type:wd.Type.LoadLastCellRunSuccess,cellToken:o.token,resource:e}),g.store.dispatch({type:U.Type.InitialRunSuccess,notebookToken:t.notebookToken})}).catch(function(e){return g.store.dispatch({type:Z.Type.RunFailed,cellToken:o.token,error:e,notebookToken:t.notebookToken})})}return V.Observable.from([])}).subscribe(),this.wms.subscribe(this,function(e){e.type===ps.a.UpdateNotebookVizTitle&&g.store.dispatch({type:Z.Type.UpdateVizTitle,vizToken:e.data.id.split("_")[1],title:e.data.title})},ps.a.UpdateNotebookVizTitle),this.realtime.events$.withLatestFrom(t.select("client","notebooks","books","pusherChannelNames").map(function(e){return e.toSet()})).filter(function(e){var t=e[0];return e[1].has(t.channel)}).subscribe(function(e){var t=e[0],n=(e[1],t.channel.split("-").pop());switch(t.name){case Su.a.NotebookIdle:g.handleCellIdleEvent(t.data);break;case Su.a.BatchRunComplete:g.handleNotebookIdleEvent(t.data,n);break;case Su.a.DataLoaded:g.handleNotebookDataLoaded(t.data,n);break;case Su.a.ResultCreated:g.handleCellRunResultEvent(t.data);break;case Su.a.SessionTerminated:g.handleErrorState(t.data);break;case Su.c.Disconnected:g.handleDisconnectState(t.data)}}),t.actions.ofType(Q.c.ToggleNotebookSidebar).withLatestFrom(t.select(A.b.selectedNotebookToken),t.select(A.b.selectedNotebookType),t.select(K.e)).subscribe(function(e){e[0];var t=e[1],n=e[2],r=e[3].notebook_sidebar,o=r.open,i=r.tab,a=o?ee.a.Name.NotebookSidebarExpanded:ee.a.Name.NotebookSidebarCollapsed;g.analytics.run(ee.c.Track,a,{product_context:ee.a.Context.Notebook,product_subcontext:ee.a.SubContext.Sidebar,interaction_type:"click",notebook_token:t,notebook_kernel:n,tab:i})})}return NotebookDataService.prototype.updateCell=function(e,t){var n={"python_cell.content":t.content||e.content,"python_cell.content_type":t.content_type||e.content_type,"python_cell.frozen_in_layout":null!=t.frozen_in_layout?t.frozen_in_layout:e.frozen_in_layout,includes:Bu};return t.next_cell_token&&(n["python_cell.next_cell_token"]=t.next_cell_token),e.forms("edit").$submit(n)},NotebookDataService.prototype.loadNotebook=function(e){var t=this;if(e.hasLink("python_notebook")){var n=Object(Rt.getTokenFromModeLink)(e.links("python_notebook"));return this.api.getResource(e,"python_notebook").then(function(e){return t.store.dispatch({type:U.Type.LoadSuccess,notebookResource:e})}).catch(function(e){return t.store.dispatch({type:U.Type.LoadFailure,notebookToken:n,error:e})})}return this.$q.resolve()},NotebookDataService.prototype.handleCellRunResultEvent=function(e){var t=this,n=new this.ModeResource(e),r=Object(Rt.getTokenFromModeLink)(n.links("python_cell_run")),o=Object(Rt.getTokenFromModeLink)(n.links("python_cell"));this.api.getSelf(n,{includes:"python_cell_run"}).then(function(e){return t.store.dispatch({type:wd.Type.LoadCellRunResultSuccess,runToken:r,cellToken:o,resultResource:e})})},NotebookDataService.prototype.handleCellIdleEvent=function(e){var t=new this.ModeResource(e),n=this.cellModel.getIdFromLink(t.links("python_cell").href);this.store.dispatch({type:Z.Type.Idle,runToken:t.token,cellToken:n})},NotebookDataService.prototype.handleNotebookIdleEvent=function(e,t){new this.ModeResource(e);this.store.dispatch({notebookToken:t,type:U.Type.Idle})},NotebookDataService.prototype.handleNotebookDataLoaded=function(e,t){this.store.dispatch({type:U.Type.DataLoaded,notebookToken:t})},NotebookDataService.prototype.handleErrorState=function(e){var t=new this.ModeResource(e),n=e.termination_reason;this.store.dispatch({type:U.Type.Terminated,terminationReason:n,sessionToken:t.token})},NotebookDataService.prototype.handleDisconnectState=function(e){this.store.dispatch({type:U.Type.Disconnected})},NotebookDataService.prototype.loadNotebookInSelectedReport=function(){this.store.dispatch({type:U.Type.LoadFromSelectedReport})},NotebookDataService.prototype.pollPython=function(){return this.store.dispatch({type:Z.Type.LoadLayoutVisuals}),{success:this.store.actions.ofType(Z.Type.LoadLayoutVisualsSuccess).map(function(e){return e.reportRun}),failure:this.store.actions.ofType(Z.Type.LoadLayoutVisualsFailure).map(function(e){return e.error})}},NotebookDataService.prototype.initSession=function(e,t){this.store.dispatch({type:U.Type.InitSession,notebookToken:e,reuseIfActive:t})},NotebookDataService.prototype.refreshSessionReportRun=function(e){this.store.dispatch({notebookToken:e,type:U.Type.RefreshSessionReportRun})},NotebookDataService.prototype.initNotebook=function(){this.store.dispatch({type:U.Type.Init})},NotebookDataService.prototype.loadNotebookWithInitSuccess=function(e){this.store.dispatch({type:U.Type.LoadWithInitSuccess,notebookResource:e})},NotebookDataService.prototype.updateNotebookType=function(e,t){this.store.dispatch({type:U.Type.UpdateType,notebookToken:e,notebookType:t})},NotebookDataService.prototype.addCell=function(e,t){this.store.dispatch({type:Z.Type.AddCell,notebookToken:e,nextToken:t})},NotebookDataService.prototype.addCellWithContent=function(e,t,n){this.store.dispatch({type:Z.Type.AddCell,notebookToken:e,content:t,contentType:n})},NotebookDataService.prototype.addCellAndRun=function(e,t){this.store.dispatch({notebookToken:e,content:t,type:Z.Type.AddCellAndRun})},NotebookDataService.prototype.editCellContent=function(e,t){this.store.dispatch({cellToken:e,content:t,type:Z.Type.EditCellContent})},NotebookDataService.prototype.saveCell=function(e){this.store.dispatch({cellToken:e,type:Z.Type.UpdateCell})},NotebookDataService.prototype.updateContentType=function(e,t){this.store.dispatch({cellToken:e,contentType:t,type:Z.Type.UpdateContentType})},NotebookDataService.prototype.removeCell=function(e,t){this.store.dispatch({type:Z.Type.DestroyCell,cellToken:t,notebookToken:e})},NotebookDataService.prototype.moveCell=function(e,t){this.store.dispatch({type:Z.Type.MoveCell,cellToken:e,down:t})},NotebookDataService.prototype.addCellToLayout=function(e){this.store.dispatch({type:Z.Type.AddToLayout,cellToken:e})},NotebookDataService.prototype.removeCellFromLayout=function(e){this.store.dispatch({type:Z.Type.RemoveFromLayout,cellToken:e})},NotebookDataService.prototype.selectCell=function(e,t){this.store.dispatch({type:Z.Type.Select,cellToken:e,resultPane:t})},NotebookDataService.prototype.beginEditCell=function(e){this.store.dispatch({type:Z.Type.BeginEdit,cellToken:e})},NotebookDataService.prototype.endEditCell=function(e){this.store.dispatch({type:Z.Type.EndEdit,cellToken:e})},NotebookDataService.prototype.runCell=function(e,t){this.store.dispatch({type:U.Type.Run,notebookToken:e,cellTokensToRun:[t]})},NotebookDataService.prototype.setupVizChangeNotifier=function(e,t){var n=this,r=A.b.createVizByCellSelector(e);return this.store.actions.ofType(wd.Type.LoadCellRunResultContentSuccess).withLatestFrom(this.store.select(K.R),this.store.select(r)).skip(1).takeWhile(t).subscribe(function(e){e[0];var t=e[1],r=e[2];r.vizToken&&n.$rootScope.$broadcast("preview.update",{updateViz:{id:"python_"+r.vizToken,view:bs.renderCellEmbed(t.token,r.vizResource,r.results),type:"python"}})},function(e){return console.error(e)})},Object.defineProperty(NotebookDataService.prototype,"reportNotebookViz$",{get:function(){return this.store.select(A.b.reportVisuals)},enumerable:!0,configurable:!0}),Object.defineProperty(NotebookDataService.prototype,"sidebarOpen$",{get:function(){return this.store.select(function(e){return e.transient.accountPreference.notebook_sidebar.open})},enumerable:!0,configurable:!0}),Object.defineProperty(NotebookDataService.prototype,"selectedNotebookType$",{get:function(){return this.store.select(A.b.selectedNotebookType)},enumerable:!0,configurable:!0}),NotebookDataService.$inject=["$rootScope","RxStoreService","RealtimeService","ModeCollection","ModeResource","PythonSessionModel","PythonNotebookModel","PythonCellModel","ApiService","WindowMessageService","$http","$timeout","AnalyticsService","$q"],NotebookDataService}(),ep=function(){function LoggingService(e,t){var n=this;this.store=e,this.QueryDataService=t,this.store.select(K._4).combineLatest(this.store.select("client","selectedReport","queries")).subscribe(function(e){var t=e[0],r=e[1];t&&!r.getRecord(t)&&n.notify(new ReferenceError("Selected query token not available in queries"))}),this.QueryDataService.editorQueriesAndSelected$.subscribe(function(e){e.selectedToken&&!e.selectedQuery&&this.notify(new ReferenceError("Invalid query selection made in editor"))})}return LoggingService.prototype.notify=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];fo.a.notifySafely.apply(fo.a,e)},LoggingService.prototype.breadcrumb=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];fo.a.leaveBreadcrumbSafely.apply(fo.a,e)},LoggingService.$inject=["RxStoreService","QueryDataService"],LoggingService}(),tp=function(){function FullscreenService(e){var t=this;this.store=e,hd.a.addEventListener("fullscreenchange",function(){null!=hd.a.fullscreenElement?t.store.dispatch(new Bd.EnterFullscreenSuccess):t.store.dispatch(new Bd.ExitFullscreen)},!1),hd.a.addEventListener("fullscreenerror",function(){t.store.dispatch(new Bd.EnterFullscreenFailure(new Error("unable to fullscreen")))},!1),this.store.actions.ofType(Bd.Type.EnterFullscreen).subscribe(function(e){return hd.a.requestFullscreen(e.element)}),this.store.actions.ofType(Bd.Type.ExitFullscreen).subscribe(function(e){return hd.a.exitFullscreen()})}return FullscreenService.prototype.enterFullscreen=function(e){this.store.dispatch(new Bd.EnterFullscreen(e))},FullscreenService.prototype.exitFullscreen=function(){this.store.dispatch(new Bd.ExitFullscreen)},Object.defineProperty(FullscreenService.prototype,"isFullscreen$",{get:function(){return this.store.select("transient","window","isFullscreen")},enumerable:!0,configurable:!0}),FullscreenService.$inject=["RxStoreService"],FullscreenService}();r.module("mode.app.services",["mode.assets","ngToast","ngAnimate"]).config(["$animateProvider",function(e){e.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/)}]).config(["ngToastProvider",function(e){e.configure({additionalClasses:"toast-fly-in angular-animate"})}]).service("AlertService",Rc).service("AnalyticsService",ee.b).service("RxStoreService",eu).service("ReportFilterService",Tu).service("DataSourceService",Au).service("RouterStoreService",tu).service("Search",cu).service("PollingService",Cu).service("ChartDataService",zc).service("ChartViewService",fu).service("ReportSaveService",yu).service("ReportStateService",Lu).service("ViewService",vu).service("PythonCellService",Iu).service("RealtimeService",Su.d).service("SpaceSearchService",_c).service("ReportRunDataService",xu).service("NotebookDataService",Ku).service("DefinitionRunDataService",Du).service("ApiService",Ec).service("LoggingService",ep).service("ChartDesignerService",Eu).service("ChartExplorerService",Ru).service("FullscreenService",tp).constant("ChartResFunctions",ys);n("unlu"),n("8Flc"),n("zLSN"),n("cRYW"),n("2BGn"),n("dOaS"),n("k/lX"),n("PKNu"),n("pV/n"),n("r02N");r.module("mode.spaces").config(["$locationProvider","$stateProvider","$urlRouterProvider","$provide",function(e,t,n,r){e.html5Mode({enabled:!0,requireBase:!1}),r.decorator("$sniffer",["$delegate",function(e){return e.history=!0,e}]);var o={account:["AccountModel",function(e){var t=w()("meta[name=current-username]").attr("content");return e.find({username:t,useEntryPath:!0,refresh:!0,includes:["data_sources","organizations","preference","new_definition","organization_features"]})}],owner:["AccountModel",function(e){var t=w()("meta[name=owner-username]").attr("content");return e.find({username:t,useEntryPath:!0,includes:["data_sources","new_space","new_definition","organization_features","organization_space"]})}],api:["ApiModel",function(e){return e.find({id:"root",useEntryPath:!0,includes:"data_sources"})}],organizations:["account","ModeCollection",function(e,t){return e.organizations().then(t.elements)}],preference:["account",function(e){return e.preference()}],dataSources:["owner","api","$q",function(e,t,n){var r=n.defer();return n.all([t.dataSources(),e.dataSources()]).then(n.spread(function(e,t){n.all([e.elements(),t.elements()]).then(n.spread(function(e,t){var n=t.concat(e);r.resolve(n)})).catch(r.reject)})).catch(r.reject),r.promise}]},i={"":{controller:["$scope","$timeout","api","owner","account","organizations","preference","dataSources","$state","SpaceModel","FeatureToggleService",function(e,t,n,r,o,i,a,l,s,c,d){e.api=n,e.owner=r,e.account=o,e.organizations=i,e.preference=a,e.dataSources=l,e.state=s,d.updateLocalState(oo.a.orgToFeatureFlags(o._resource,r._resource))}],template:'<spaces\n          api="api"\n          owner="owner"\n          account="account"\n          organizations="organizations"\n          preference="preference"\n          datasources="dataSources"\n          state="state">\n        </spaces>'}};t.state("root",{url:"/",resolve:o,views:i}).state("root.spaces",{url:":ownerId/spaces"}).state("root.spaces.space",{url:"/:spaceId"}).state("root.home",{url:"home"}).state("root.homeOrg",{url:"home/:ownerId"}).state("root.homeMyWork",{url:"home/:ownerId/search"}).state("root.homeMyWorkDefault",{url:"home/search"}).state("root.homeDiscover",{url:"home/:ownerId/discover"}).state("root.homeDiscoverDefault",{url:"home/discover"}).state("root.homeDatasource",{url:"home/:ownerId/data_sources/:dataSourceToken"}).state("root.homeStarred",{url:"home/:ownerId/starred"}).state("root.homeStarredDefault",{url:"home/starred"}).state("root.homeReports",{url:"home/:ownerId/reports"}).state("root.homeReportsDefault",{url:"home/reports"}),n.when("/home/:ownerId/spaces/:spaceId/reports",["$match","$stateParams","$state",function(e,t,n){n.transitionTo("root.space",e,{location:"replace"})}])}]).run(["$rootScope","StoreService","$window","SpaceModel","AccountModel","ModeCollection",function(e,t,n,r,o,i){e.$on("$stateChangeSuccess",function(e,a,l,s,c){switch(n.scrollTo(0,0),a.name){case"root.homeMyWork":case"root.homeMyWorkDefault":t.dispatch(Je.v());break;case"root.homeStarred":case"root.homeStarredDefault":t.dispatch(Je.A());break;case"root.homeDiscover":case"root.homeDiscoverDefault":t.dispatch(Je.u());break;case"root.spaces":t.dispatch(Je.z(l.ownerId,o,i,r));break;case"root.spaces.space":t.dispatch(Je.y(l.spaceId,l.ownerId,r));break;case"root.homeReports":case"root.homeReportsDefault":t.dispatch(Je.x());break;case"root.homeDatasource":t.dispatch(Je.t(l.dataSourceToken));break;case"root":case"root.home":case"root.homeOrg":var d=w()("meta[name=home-view]").attr("content"),u=w()("meta[name=owner-username]").attr("content");switch(d){case"starred":t.dispatch(Je.A());break;case"reports":t.dispatch(Je.x());break;case"discover":t.dispatch(Je.u());break;case"organization_space":t.dispatch(Je.w(u,o,r));break;default:t.dispatch(Je.v())}}})}]);var np=n("ktMo"),rp=n("emhp"),op=n("M/pt"),ip=n("4cGI");function HighlightFilter(e){return function(t,n,o){return"string"==typeof t&&(n||r.isNumber(n))?(t=Pr.a.escapeHTML(t.toString()),n=n.toString(),o?e.trustAsHtml(t.split(n).join('<span class="match">'+n+"</span>")):e.trustAsHtml(t.replace(new RegExp(Pr.a.escapeRegExp(n),"gi"),'<span class="match">$&</span>'))):t}}function TruncateEndFilter(e){return function(t,n){if(t)return t.length<=n?t:e("limitTo")(t,n)+"\u2026"}}HighlightFilter.$inject=["$sce"],TruncateEndFilter.$inject=["$filter"];var ap=r.module("mode.filters",["mode.utils"]);ap.filter("highlight",HighlightFilter),ap.filter("orderByNatural",function(){return function(e,t){return Array.isArray(e)?e.sort(function(e,n){return Pr.a.naturalSort(e[t],n[t])}):e}}),ap.filter("truncateMiddle",function(){return function(e,t,n){if(!e||e.length<=t)return e;var r=t-(n=n||"...").length,o=Math.ceil(r/2),i=Math.floor(r/2);return e.substr(0,o)+n+e.substr(e.length-i)}}),ap.filter("truncateEnd",TruncateEndFilter),Object(np.a)(),Prism.languages.sql=Prism.languages.extend("sql",{definition:/\{\{ ?\@[0-9a-zA-Z_]+ ?\}\}/}),rp.a.init({scope:window,linkProps:["dataLayer"]}),rp.a.instance().set("linkable","true"===w()("meta[name=linkable-report]").attr("content")),"undefined"==typeof ASSET_PATHS&&(window.ASSET_PATHS={ERROR_GIF_PATH:"",HISTORY_TEMPLATE:"",BASE:""}),window.define&&delete window.define,r.module("mode.common.constants").constant("EDITOR_ACTIONS",Object.freeze(Q.b)),r.module("mode.common.constants").constant("DEFAULT_CHART_FORMAT",Object.freeze(op.a)),r.module("mode.shared.services").constant("ModeGlobal",rp.a),r.module("mode.components").directive("dropdownAutoOrient",ip.a),"undefined"!=typeof bootstrap&&w()(document).ready(bootstrap)},rOrC:function(e,t){e.exports=window.ChiliPiper},rwX7:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iN3B4IiBoZWlnaHQ9IjlweCIgdmlld0JveD0iMCAwIDcgOSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDIgKDM2NzgxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5zb3J0LWRlc2NlbmRpbmctY29udGludW91czwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiPgogICAgICAgIDxnIGlkPSIyMi1jb3B5LTEzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA0NS4wMDAwMDAsIC02NjYuMDAwMDAwKSIgc3Ryb2tlPSIjMjA5NTUxIj4KICAgICAgICAgICAgPGcgaWQ9InNvcnQtZGVzY2VuZGluZy1jb250aW51b3VzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDQ4LjUwMDAwMCwgNjcxLjAwMDAwMCkgc2NhbGUoMSwgLTEpIHRyYW5zbGF0ZSgtMTA0OC41MDAwMDAsIC02NzEuMDAwMDAwKSB0cmFuc2xhdGUoMTA0NS4wMDAwMDAsIDY2Ny4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zLjUsMC41IEwzLjUsNy41IiBpZD0iTGluZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJQYXRoLTEyIiBwb2ludHM9IjAgNSAzLjUgOCA3IDUiPjwvcG9seWxpbmU+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},s5rD:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDE0IDE0Ij4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPHBhdGggc3Ryb2tlPSIjQjFCMkJBIiBkPSJNNy41IDMuNUwxMy41IDMuNSA3LjUgMy41ek03LjUgNi41TDExLjUgNi41IDcuNSA2LjV6TTcuNSA5LjVMOS41IDkuNSA3LjUgOS41eiIvPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAzKSI+CiAgICAgIDxwYXRoIHN0cm9rZT0iI0IxQjJCQSIgZD0iTTIuNSwyLjUgTDIuNSw3LjUgTDIuNSwyLjUgWiIvPgogICAgICA8cGF0aCBmaWxsPSIjQjFCMkJBIiBkPSJNMi42ODcwMDE4OSwwLjA4MjYzMjUzNzMgTDQuOTM0ODgyMjYsMi41ODI4NTQxMSBDNS4wMjcxOTQzOSwyLjY4NTUyODk1IDUuMDE4NzkzNzUsMi44NDM1OTcxMyA0LjkxNjExODksMi45MzU5MDkyNSBDNC44NzAyMjQ0MSwyLjk3NzE3MTczIDQuODEwNjg5MjcsMyA0Ljc0ODk3MzAxLDMgTDAuMjUzMjEyMjU0LDMgQzAuMTE1MTQxMDY3LDMgMC4wMDMyMTIyNTQyOCwyLjg4ODA3MTE5IDAuMDAzMjEyMjU0MjgsMi43NSBDMC4wMDMyMTIyNTQyOCwyLjY4ODI4Mzc1IDAuMDI2MDQwNTI2MiwyLjYyODc0ODYgMC4wNjczMDMwMDAxLDIuNTgyODU0MTEgTDIuMzE1MTgzMzgsMC4wODI2MzI1MzczIEMyLjQwNzQ5NTUxLC0wLjAyMDA0MjMwODcgMi41NjU1NjM2OCwtMC4wMjg0NDI5NTIxIDIuNjY4MjM4NTIsMC4wNjM4NjkxNzUxIEMyLjY3NDgyMDczLDAuMDY5Nzg3MDU2IDIuNjgxMDg0MDEsMC4wNzYwNTAzMzA0IDIuNjg3MDAxODksMC4wODI2MzI1MzczIFoiLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="},sGhr:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return u});var r,o=n("vqB5"),i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=function(e){function DiscreteValueOption(t){return t?e.call(this,t)||this:e.call(this)||this}return i(DiscreteValueOption,e),Object.defineProperty(DiscreteValueOption.prototype,"value",{get:function(){return this.get("value",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(DiscreteValueOption.prototype,"label",{get:function(){return this.get("label",void 0)},enumerable:!0,configurable:!0}),DiscreteValueOption.prototype.with=function(e){return this.merge(e)},DiscreteValueOption}(Object(o.e)({value:null,label:null})),l={isLoaded:!1,values:Object(o.a)()},s=function(e){function DiscreteValueOptions(t){return t?e.call(this,t)||this:e.call(this)||this}return i(DiscreteValueOptions,e),Object.defineProperty(DiscreteValueOptions.prototype,"isLoaded",{get:function(){return this.get("isLoaded",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(DiscreteValueOptions.prototype,"values",{get:function(){return this.get("values",void 0)},enumerable:!0,configurable:!0}),DiscreteValueOptions.prototype.with=function(e){return this.merge(e)},DiscreteValueOptions}(Object(o.e)(l)),c=function(e){function RangeValueOption(t){return t?e.call(this,t)||this:e.call(this)||this}return i(RangeValueOption,e),Object.defineProperty(RangeValueOption.prototype,"min",{get:function(){return this.get("min",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueOption.prototype,"max",{get:function(){return this.get("max",void 0)},enumerable:!0,configurable:!0}),RangeValueOption.prototype.with=function(e){return this.merge(e)},RangeValueOption}(Object(o.e)({min:null,max:null})),d={isLoaded:!1,values:new c},u=function(e){function RangeValueOptions(t){return t?e.call(this,t)||this:e.call(this)||this}return i(RangeValueOptions,e),Object.defineProperty(RangeValueOptions.prototype,"isLoaded",{get:function(){return this.get("isLoaded",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(RangeValueOptions.prototype,"values",{get:function(){return this.get("values",void 0)},enumerable:!0,configurable:!0}),RangeValueOptions.prototype.with=function(e){return this.merge(e)},RangeValueOptions}(Object(o.e)(d))},sdeH:function(e,t){e.exports='<div class="default-modal">\n  <share-embed-component\n    report-run="ctrl.reportRun"\n    report="ctrl.report"\n    owner="ctrl.owner"\n    dismiss="ctrl.$dismiss()">\n  </share-embed-component>\n</div>'},smPo:function(e,t){e.exports='<div class="default-modal scroll-modal">\n  <h3 class="modal-header">Have people join you in this space<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <div class="modal-container-lg">\n    <space-membership space="ctrl.space" owner="ctrl.owner" account="ctrl.account"></space-membership>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-primary" ng-click="ctrl.$close()">Done</button>\n  </div>\n</div>'},t1Yu:function(e,t,n){"use strict";var r=n("0YuG");n.n(r),n("PiCI");r.module("mode.components").directive("modeEnter",function(){return{require:"ngModel",link:function(e,t,n,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){r.$commitViewValue()}),t.preventDefault())})}}})},tGHj:function(e,t){e.exports='<div class="save-modal schedules-modal">\n  <mode-new-schedules\n    report="ctrl.report"\n    run="ctrl.run"\n    start-schedule="ctrl.schedule"\n    dismiss="ctrl.$dismiss()"\n    account="ctrl.account"\n    owner="ctrl.reportOwner"\n    view="{{ ctrl.view }}">\n  </mode-new-schedules>\n</div>'},tXka:function(e,t){e.exports='<div class="default-modal view-data-modal-content viz-lightbox-modal-content">\n  <view-data-lightbox-table\n    title="title"\n    dataset="dataset"\n    read-only="readOnly"\n    on-dismiss="onLightboxClose($closeAll);">\n  </view-data-lightbox-table>\n</div>\n'},tf9N:function(e,t){e.exports='<div class="well next-well">\n<ul class="dynamic-rows">\n  <li ng-repeat="schedule in schedules" class="dynamic-row">\n    <div class="dynamic-row-link row">\n      <div class="col-xs-1">\n        <i class="icon-email align-md-icon" ng-if="schedule.savedSubscriptions.length && !isSlackSchedule(schedule)"></i>\n        <i class="icon-report-run-details align-md-icon" ng-if="!schedule.savedSubscriptions.length"></i>\n        <i class="icon-slack align-md-icon" ng-if="isSlackSchedule(schedule)"></i>\n      </div>\n      <div class="col-xs-4">\n        <div class="inline-text" title="{{ schedule.frequencyText }}">{{ schedule.frequencyText }}</div>\n      </div>\n      <div class="col-xs-4" ng-if="!isSlackSchedule(schedule)">\n        <span ng-if="schedule.savedSubscriptions.length"><ng-pluralize count="schedule.savedSubscriptions[0].email_subscriber_count" when="{\'1\': \'{} subscriber\', \'other\': \'{} subscribers\'}"></ng-pluralize></span>\n      </div>\n      <div class="col-xs-4" ng-if="isSlackSchedule(schedule)">\n        <span ng-if="schedule.savedSubscriptions.length">{{ schedule.savedSubscriptions[0].savedSlackMemberships[0].getDisplayName() }}</span>\n      </div>\n      <div uib-dropdown class="col-xs-1 pull-right">\n        <a uib-dropdown-toggle href="#" class="dropdown-toggle">\n          <i class="icon-settings-mini"></i>\n        </a>\n        <ul uib-dropdown-menu class="dropdown-menu popover bottom schedules-popover">\n          <li>\n            <span\n              schedules-modal\n              report="report"\n              report-run="reportRun"\n              owner="owner"\n              account="account"\n              schedule="schedule"\n              class="button-link">\n              Edit Schedule\n            </span>\n          </li>\n          <li ng-if="!schedule.savedSubscriptions.length">\n            <span\n              schedules-modal\n              report="report"\n              report-run="reportRun"\n              owner="owner"\n              account="account"\n              schedule="schedule"\n              class="button-link">\n              Add Subscription\n            </span>\n          </li>\n          <li ng-if="schedule.savedSubscriptions.length && !isSlackSchedule(schedule)">\n            <span\n              schedules-modal\n              report="report"\n              report-run="reportRun"\n              owner="owner"\n              account="account"\n              schedule="schedule"\n              view="users"\n              class="button-link">\n              Edit Subscribers\n            </span>\n          </li>\n          <li ng-if="schedule.savedSubscriptions.length && account.email_verified && !isSlackSchedule(schedule)">\n            <span ng-click="testEmail(schedule.savedSubscriptions[0])" class="button-link">Send Test Email</span>\n          </li>\n          <li>\n            <span ng-if="schedule._resource.hasForm(\'destroy\')"\n              class="button-link"\n              confirm-modal="Are you sure you want to delete this schedule?"\n              confirm-modal-on-confirm="deleteSchedule(schedule);"\n              confirm-modal-button-confirm="Delete Schedule"\n              confirm-modal-title="Delete Schedule">\n              Delete Schedule\n            </span>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </li>\n</ul>\n<span class="runs-loader icon-logo-animated" ng-show="loading"></span>\n<p class="empty-msg" ng-show="!loading && !schedules.length">This report has not been scheduled yet.</p>\n</div>'},"tt/G":function(e,t,n){"use strict";var r,o=n("m9my"),i=n("kZ7C"),a=n("8SPo"),l=n("yfIQ"),s=n("9g1q");!function(e){function hasMultipleNamesOrField(e,t){return t.isStandard||t.isNames&&e.value.length>1}var t;!function(e){e.make=function(){return{fields:[],columns:new Map}},e.add=function(e,t,n){var r=t.getDefaultFieldName(n);n.isValues&&(r="Values");var i=function(e,t){var n,r;switch(e.dataType){default:case o.DataType.BOOLEAN:case o.DataType.STRING:n={name:s.a.Column.Type.Name.String};break;case o.DataType.DATE:case o.DataType.DATETIME:n={name:s.a.Column.Type.Name.Date};break;case o.DataType.INTEGER:n={name:s.a.Column.Type.Name.Integer};break;case o.DataType.FLOAT:case o.DataType.NUMBER:n={scale:32,precision:2,name:s.a.Column.Type.Name.Decimal}}return r="VIEWCALC"===e.type&&e.formula.form===o.FormType.DATEFUNC&&"DATEPART"===e.formula.funcName.toUpperCase()?{name:s.a.Column.Role.Name.DatePart}:n,{name:t,type:n,role:r}}(n,r),a=[n.alias,i];return{fields:e.fields.concat([n]),columns:new Map(Array.from(e.columns).concat([a]))}},e.name=function(e,t){var n=e.columns.get(t.alias);return n&&n.name}}(t=e.Schema||(e.Schema={})),e.makeLineData=function(e,n,r,o,i,a,c){var d=a,u=t.make();if(u=t.add(u,e,i),o&&hasMultipleNamesOrField(n,o)&&(u=t.add(u,e,o)),a.isValues&&1===n.value.length){var p=n.value[0],h=p.formula,g=p.variable,m=p.id;d=e.buildViewCalcField(h,g.type,m)}u=t.add(u,e,d);var f=r.getResultSet(a.alias).data,C=l.a.makeXValueFormatter(e,n,i,c),y=l.a.makeSeriesNameFormatter(e,n,o,c),b=f.map(function(e){var r={};return o&&hasMultipleNamesOrField(n,o)&&(r[t.name(u,o)]=y(e[o.alias])),r[t.name(u,i)]=C(e[i.alias]),r[t.name(u,d)]=e[a.alias],r}),v=f.length,I=s.a.Dataset.State.Succeeded;return{count:v,content:b,columns:Array.from(u.columns.values()),state:I}},e.makeBubbleData=function(e,n,r,o,i,a,c,d){var u=a,p=t.make();if(p=t.add(p,e,i),o&&hasMultipleNamesOrField(n,o)&&(p=t.add(p,e,o)),a.isValues&&1===n.value.length){var h=n.value[0],g=h.formula,m=h.variable,f=h.id;u=e.buildViewCalcField(g,m.type,f)}p=t.add(p,e,u),p=t.add(p,e,c);var C=r.getResultSet(a.alias).data,y=l.a.makeXValueFormatter(e,n,i,d),b=l.a.makeSeriesNameFormatter(e,n,o,d),v=C.map(function(e){var r={};return o&&hasMultipleNamesOrField(n,o)&&(r[t.name(p,o)]=b(e[o.alias])),r[t.name(p,i)]=y(e[i.alias]),r[t.name(p,c)]=e[c.alias],r[t.name(p,u)]=e[a.alias],r}),I=C.length,S=s.a.Dataset.State.Succeeded;return{count:I,content:v,columns:Array.from(p.columns.values()),state:S}},e.makeComboData=function(e,n,r,o,i,a){var c=t.make();c=t.add(c,e,o);for(var d=l.a.makeXValueFormatter(e,n,o,a),u=i.map(function(e){return r.getResultSet(e.yField.alias).data}),p=[],h=0;h<i.length;h++)c=t.add(c,e,i[h].yField);for(var g=0;g<u[0].length;g++){var m={};for(m[t.name(c,o)]=d(u[0][g][o.alias]),h=0;h<i.length;h++){var f=u[h][g],C=i[h].yField;m[t.name(c,C)]=f[C.alias]}p.push(m)}var y=p.length,b=s.a.Dataset.State.Succeeded;return{count:y,content:p,columns:Array.from(c.columns.values()),state:b}},e.makePieData=function(e,n,r,o,i,a){var c=t.make();c=t.add(c,e,o),c=t.add(c,e,i);var d=r.getResultSet("*").data,u=l.a.makeSeriesNameFormatter(e,n,o,a),p=d.map(function(e){var n={};return n[t.name(c,o)]=u(e[o.alias]),n[t.name(c,i)]=e[i.alias],n}),h=d.length,g=s.a.Dataset.State.Succeeded;return{count:h,content:p,columns:Array.from(c.columns.values()),state:g}}}(r||(r={}));var c,d=n("yqn6");n.d(t,"a",function(){return c}),function(e){e.summary=function(e,t,n,l){switch(t=Object(d.m)(t),i.a.shape(t)){case i.a.Shape.Grouped:return function(e,t,n,o){a.a.makeViewField(e,t.x[0]);var i=a.a.makeViewField(e,t.y[0]),l=a.a.makeViewField(e,t.column[0]),s=null;return t.marks.series[0].properties.color.values.length&&(s=a.a.makeViewField(e,t.marks.series[0].properties.color.values[0])),r.makeLineData(e,t,n,s,l,i,o)}(e,t,n,l);case i.a.Shape.Combo:return function(e,t,n,i){var l=a.a.makeViewField(e,t.x[0]),s=new Array;return t.marks.series.forEach(function(n,r){var i,l,c=a.a.lookupYField(t,n.field),d=a.a.makeViewField(e,c);switch(n.properties.color&&n.properties.color.values.length&&(i=a.a.makeViewField(e,n.properties.color.values[0])),n.properties.type.value){case o.MarkType.Bar:l="column";break;case o.MarkType.Line:l="line";break;case o.MarkType.Area:l="area";break;default:l="line"}s.push({type:l,name:a.a.makeDefaultFieldName(e,d),groupField:i,yField:d,yAxis:r})}),r.makeComboData(e,t,n,l,s,i)}(e,t,n,l);case i.a.Shape.Stacked:return i.a.hasFieldOnSize(t)?function(e,t,n,o){var i=a.a.makeViewField(e,t.x[0]),l=a.a.makeViewField(e,t.y[0]),s=a.a.makeViewField(e,t.marks.series[0].properties.size.values[0]),c=null;return t.marks.series[0].properties.color.values.length&&(c=a.a.makeViewField(e,t.marks.series[0].properties.color.values[0])),r.makeBubbleData(e,t,n,c,i,l,s,o)}(e,t,n,l):function(e,t,n,o){var i,l=a.a.makeViewField(e,t.x[0]),s=a.a.makeViewField(e,t.y[0]||t.y2[0]);return t.marks.series[0].properties.color.values.length&&(i=a.a.makeViewField(e,t.marks.series[0].properties.color.values[0])),r.makeLineData(e,t,n,i,l,s,o)}(e,t,n,l);case i.a.Shape.Radial:return function(e,t,n,o){var i=a.a.makeViewField(e,t.marks.properties.color.values[0]),l=a.a.makeViewField(e,t.marks.properties.angle.values[0]);return r.makePieData(e,t,n,i,l,o)}(e,t,n,l)}},e.complete=function(e,t,n,r){t=Object(d.m)(t);var i=e.engine.dataset.schema.columns.map(function(e){var t,n=e.name;switch(e.type){case o.ColumnType.BOOLEAN:t={name:s.a.Column.Type.Name.Boolean};break;case o.ColumnType.INTEGER:t={name:s.a.Column.Type.Name.Integer};break;case o.ColumnType.FLOAT:t={name:s.a.Column.Type.Name.Float};break;case o.ColumnType.DATE:case o.ColumnType.DATETIME:t={name:s.a.Column.Type.Name.Date};break;default:case o.ColumnType.STRING:t={name:s.a.Column.Type.Name.String}}return{name:n,type:t,role:t}}),a=n.result.data;return{count:a.length,content:a,columns:i,state:s.a.Dataset.State.Succeeded}}}(c||(c={}))},u5Rt:function(e,t){e.exports='<div class="new-signup-flow default-modal">\n  <h3 class="modal-header">{{ ctrl.title }}<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n\n  <form class="new-signup-form" ng-submit="ctrl.createInvite()">\n    <div class="modal-container-sm">\n      <h4 class="signup-sm-font">We\'ll send them the information they need to connect a database to Mode.</h4>\n\n      <div class="form-group">\n        <label class="control-label">Email Address:</label>\n        <input type="email" class="form-control"\n               autofocus="true"\n               maxlength="255"\n               ng-model="ctrl.email">\n      </div>\n    </div>\n\n    <div class="modal-action-bar">\n      <button type="submit" class="btn btn-lg btn-filled-secondary">Invite</button>\n    </div>\n  </form>\n</div>'},u5jn:function(e,t,n){"use strict";n.d(t,"k",function(){return o}),n.d(t,"v",function(){return i}),n.d(t,"y",function(){return a}),n.d(t,"i",function(){return l}),n.d(t,"g",function(){return s}),n.d(t,"h",function(){return c}),n.d(t,"q",function(){return d}),n.d(t,"A",function(){return u}),n.d(t,"m",function(){return p}),n.d(t,"l",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return f}),n.d(t,"j",function(){return C}),n.d(t,"t",function(){return y}),n.d(t,"D",function(){return b}),n.d(t,"x",function(){return v}),n.d(t,"u",function(){return I}),n.d(t,"B",function(){return S}),n.d(t,"C",function(){return w}),n.d(t,"a",function(){return A}),n.d(t,"b",function(){return M}),n.d(t,"c",function(){return k}),n.d(t,"w",function(){return T}),n.d(t,"d",function(){return x}),n.d(t,"p",function(){return D}),n.d(t,"o",function(){return L}),n.d(t,"n",function(){return R}),n.d(t,"r",function(){return N}),n.d(t,"s",function(){return E}),n.d(t,"z",function(){return j});var r=n("PbPb"),o=(n.n(r),2e4),i=2e3,a="data-row-height",l="modeHideTrial",s="modeHideDatasourceBanner",c="modeHideSlackBanner",d=25e3,u=[{name:"three digits",id:3},{name:"four digits",id:4}],p=[{name:"comma",id:","},{name:"decimal",id:"."},{name:"space",id:" "},{name:"none",id:""}],h=[{name:"YYYY-MM-DD HH:MM:SS",id:"YYYY-MM-DD HH:mm:ss"},{name:"YYYY-MM-DD",id:"YYYY-MM-DD"},{name:"Mon YYYY",id:"MMM YYYY"},{name:"Day Mon YYYY",id:"D MMM YYYY"},{name:"Mon Day YYYY",id:"MMM D YYYY"},{name:"None",id:"none"}],g=[{name:"Number",id:"number",type:"number"},{name:"Integer",id:"integer",type:"number"},{name:"Float",id:"float",type:"number"},{name:"Date",id:"date",type:"date"},{name:"Datetime",id:"datetime",type:"date"},{name:"String",id:"string",type:"string"}],m=g.filter(function(e){return"number"===e.type}).map(function(e){return e.id}),f=(g.filter(function(e){return"date"===e.type}).map(function(e){return e.id}),g.filter(function(e){return"string"===e.type}).map(function(e){return e.id}),[{name:"Automatic",id:"automatic",defaultSettings:function(){return{}}},{name:"Plain Text",id:"plain-text",defaultSettings:function(){return{}}},{name:"Date",id:"date",defaultSettings:function(){return{preset:"YYYY-MM-DD HH:mm:ss"}}},{name:"Number",id:"number",defaultSettings:function(){return{decimalStyle:".",decimalPlaces:2,thousandSeparator:",",thousandGroup:3}},sample:"1,000.16"},{name:"Percentage",id:"percentage",defaultSettings:function(){return{decimalStyle:".",decimalPlaces:2}},sample:"10.16%"},{name:"Financial",id:"financial",defaultSettings:function(){return{type:"usd"}},sample:"(1,000.16)"},{name:"Currency",id:"currency",defaultSettings:function(){return{type:"usd"}},sample:"$1,000.16"}]),C=[{name:"US Dollar",id:"usd",symbol:"$",symbolPlacement:"before",thousandSeparator:",",thousandGroup:3,decimalStyle:".",decimalPlaces:2},{name:"Euro",id:"eur",symbol:"\u20ac",symbolPlacement:"before",thousandSeparator:",",thousandGroup:3,decimalStyle:".",decimalPlaces:2},{name:"Japanese Yen",id:"jpy",symbol:"\xa5",symbolPlacement:"before",thousandSeparator:",",thousandGroup:4,decimalStyle:".",decimalPlaces:2},{name:"British Pound Sterling",id:"gbp",symbol:"\xa3",symbolPlacement:"before",thousandSeparator:",",thousandGroup:3,decimalStyle:".",decimalPlaces:2},{name:"Australian Dollar",id:"aud",symbol:"$",symbolPlacement:"before",thousandSeparator:",",thousandGroup:3,decimalStyle:".",decimalPlaces:2},{name:"Swiss Franc",id:"chf",symbol:"CHF",symbolPlacement:"before",thousandSeparator:" ",thousandGroup:3,decimalStyle:",",decimalPlaces:2},{name:"Canadian Dollar",id:"cad",symbol:"$",symbolPlacement:"before",thousandSeparator:" ",thousandGroup:3,decimalStyle:",",decimalPlaces:2},{name:"Mexican Peso",id:"mxn",symbol:"$",symbolPlacement:"before",thousandSeparator:",",thousandGroup:3,decimalStyle:".",decimalPlaces:2},{name:"Chinese Yuan",id:"cny",symbol:"\xa5",symbolPlacement:"before",thousandSeparator:",",thousandGroup:4,decimalStyle:".",decimalPlaces:2},{name:"New Zealand Dollar",id:"nzd",symbol:"$",symbolPlacement:"before",thousandSeparator:",",thousandGroup:3,decimalStyle:".",decimalPlaces:2},{name:"Custom...",id:"custom"}],y=[{id:"last_value",name:"Last Value"},{id:"min_value",name:"Min Value"},{id:"max_value",name:"Max Value"},{id:"average",name:"Average"},{id:"count",name:"Count"},{id:"count_distinct",name:"Count (distinct)"},{id:"median",name:"Median"},{id:"sum",name:"Sum"}],b=[{id:"change_rate",name:"Rate of change"},{id:"total_change",name:"Total change"},{id:"none",name:"None"}],v=[{id:"previous",name:"Previous value"},{id:"first",name:"First value"},{id:"custom",name:"Custom..."}],I=[{id:"asc",name:"Ascending"},{id:"desc",name:"Descending"}],S=[{id:"ggr",name:"Green/Gray/Red",colors:["#25b261","#c3cbcb","#e95968"]},{id:"rgg",name:"Red/Gray/Green",colors:["#e95968","#c3cbcb","#25b261"]}],w=[{id:"auto",name:"Auto"},{id:0,name:"1"},{id:1,name:"0.1"},{id:2,name:"0.01"},{id:3,name:"0.001"}],A=[{id:"area",name:"Area Chart",subtype:"area",icon:"icon-chart-area-gray",iconTrunc:"chart-area-gray",iconShort:"area"},{id:"totalArea",name:"100% Area Chart",subtype:"totalArea",icon:"icon-chart-area100-gray",iconTrunc:"chart-area100-gray",iconShort:"area100"},{id:"bar",name:"Grouped Bar Chart",subtype:"bar",icon:"icon-chart-grouped-bar-gray",iconTrunc:"chart-grouped-bar-gray",iconShort:"bar"},{id:"hBar",name:"Bar Chart",subtype:"bar",icon:"icon-chart-grouped-bar-gray",iconTrunc:"chart-grouped-bar-gray",iconShort:"bar"},{id:"stackedBar",name:"Bar Chart",subtype:"stackedBar",icon:"icon-chart-bar-gray",iconTrunc:"chart-bar-gray",iconShort:"stackedbar"},{id:"stackedBar100",name:"100% Bar Chart",subtype:"stackedBar100",icon:"icon-chart-bar-gray",iconTrunc:"chart-bar-gray",iconShort:"stackedbar100"},{id:"hStackedBar",name:"Bar Chart",subtype:"hStackedBar",icon:"icon-chart-bar-gray",iconTrunc:"chart-bar-gray",iconShort:"hStackedbar"},{id:"hStackedBar100",name:"100% Bar Chart",subtype:"hStackedBar100",icon:"icon-chart-bar-gray",iconTrunc:"chart-bar-gray",iconShort:"hStackedbar100"},{id:"bigNumber",name:"Big Number",subtype:"bigNumber",icon:"icon-chart-bignumber-gray",iconTrunc:"chart-bignumber-gray",iconShort:"bignumber"},{id:"line",name:"Line Chart",subtype:"line",icon:"icon-chart-line-gray",iconTrunc:"chart-line-gray",iconShort:"line"},{id:"linePlusBar",name:"Line + Bar Chart",subtype:"linePlusBar",icon:"icon-chart-linebar-gray",iconTrunc:"chart-linebar-gray",iconShort:"linebar"},{id:"pie",name:"Pie Chart",subtype:"pie",icon:"icon-chart-pie-gray",iconTrunc:"chart-pie-gray",iconShort:"pie"},{id:"donut",name:"Donut Chart",subtype:"donut",icon:"icon-chart-donut-gray",iconTrunc:"chart-donut-gray",iconShort:"donut"},{id:"pivotTable",name:"Pivot Table",subtype:"pivotTable",icon:"icon-chart-pivot-gray",iconTrunc:"chart-pivot-gray",iconShort:"pivot"},{id:"scatter",name:"Scatter Plot",subtype:"scatter",icon:"icon-chart-scatter-gray",iconTrunc:"chart-scatter-gray",iconShort:"scatter"}],M=Object(r.keyBy)(A,"id"),k=A.map(function(e){return e.id}),T=[{id:"filters",name:"Filters",icon:"icon-pivot-filter"},{id:"columns",name:"Columns",icon:"icon-columns"},{id:"rows",name:"Rows",icon:"icon-rows"},{id:"values",name:"Values",icon:"icon-pivot-value"}],x=[{id:"categorical",name:"Categorical"},{id:"divergent",name:"Divergent"}],D="#B1B2BA",L="#E4E7ED",R=["#25B261","#B1B2BA","#E95968"],N=12,E=2,j=["new","running","enqueued","pending"]},unlu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ROW_SIZE_1X",function(){return u}),n.d(t,"ROW_SIZE_2X",function(){return p}),n.d(t,"ROW_SIZE_4X",function(){return h}),n.d(t,"ROW_SIZE_MAP",function(){return g});var r=n("0YuG"),o=(n.n(r),n("0iPh")),i=n.n(o),a=n("JFI/"),l=n("4bxi"),s=n.n(l),c=n("u5jn"),d=n("Y+t6"),u="small",p="medium",h="large",g={1:u,2:"",4:h},m=function(){function DesignerService(e,t){this.ViewOptionsService=t,this.$log=e,this.currentVisuals=[]}return DesignerService.prototype.joinDom=function(e){var t=[];return e.length&&r.forEach(e,function(e){"string"==typeof e?t.push(e):3===e.nodeType?t.push(e.textContent):8===e.nodeType?t.push("\x3c!--"+e.textContent+"--\x3e"):t.push(e.outerHTML)}),s.a.html(t.join(""),{indent_size:2})},DesignerService.prototype.clearEmptyRows=function(e){var t=this;e.children(".row").each(function(e,n){var r=i()(n);r.children("div[class^=col-]").length&&r.children("div[class^=col-]").is(function(e,t){return i.a.trim(i()(t).html()).length>0})||t.removeNodeAndEmptyLine(r)})},DesignerService.prototype.balanceColumns=function(e){var t=this;e.children(".row").each(function(e,n){var r=i()(n),o=r.children("div[class^=col-]"),l=0;if(o.toArray().forEach(function(e){var n=i()(e),r=Object(a.b)(n);r<=0?t.removeNodeAndEmptyLine(n):l+=r}),o=r.children("div[class^=col-]"),l!==c.r){var s=Math.floor(c.r/o.length);o.each(function(e,t){t.setAttribute("class","col-md-"+s)}),s*o.length!==c.r&&i()(n).add('<div class="col-md-'+c.r%o.length+'"></div>')}})},DesignerService.prototype.removeNodeAndEmptyLine=function(e,t){void 0===t&&(t=!1);var n=e.parent(),r=n.contents().index(e);n.contents().length;if(t?e.detach():e.remove(),n.contents()[r]&&3===n.contents()[r].nodeType)if("remove"in Element.prototype)n.contents()[r].remove();else{var o=n.contents()[r];o.parentNode.removeChild(o)}},DesignerService.prototype.addVizDOM=function(e,t,n,r,o,a,l){void 0===l&&(l=void 0);var s=o+"_"+n.token,c=this.ViewOptionsService.getOptionResource(n.token),d=n?"<mode-"+o+' id="'+s+'" '+("python"!==o?'dataset="dataset"':"")+'options="'+o+'_options"></mode-'+o+">":"<mode-"+o+' dataset="dataset" options="'+o+'_options"></mode-'+o+">",u=c&&"bigNumber"===c.chartType()?'<div class="row" data-row-height="small">\n<div class="col-md-3"></div><div class="col-md-9"></div>\n</div>\n':'<div class="row">\n<div class="col-md-12"></div>\n</div>\n',p=i()(u);p.children().first().append(i()(d));var h=e.filter(".mode-grid");h.length||(h=i()('\n<div class="mode-grid container">\n</div>\n'),t.append(h));var g=e.filter(".mode-grid").children(".row");if(l)switch(l.dir){case"below":a=g.has("#"+l.id).index()+1;break;case"above":a=g.has("#"+l.id).index()}if(g.length)if(a>=0)a<g.length?i()(g[a]).before(p):i()(g[g.length-1]).after(p);else{var m=h.find("mode-table").first();if("table"!==o&&m.length)m.parents(".row").before(p);else g.last().after(p)}else h.append(p)},DesignerService.prototype.updateVizDOM=function(e,t,n,r){var o=t.find("#"+n);o.length&&(o[0].innerHTML=r)},DesignerService.prototype.updateViz=function(e,t,n){var r=a.c("<div>"+e+"</div>"),o=i()(r.body);return this.updateVizDOM(o.children(),o,t,n),this.joinDom(r.head.concat(o.children().toArray()))},DesignerService.prototype.addViz=function(e,t,n,r,o,l){if(!t||!t.token)return this.$log.warn("viz is empty"),e;var s=a.c("<div>"+e+"</div>"),c=i()(s.body);return this.addVizDOM(c.children(),c,t,n,r,o,l),this.joinDom(s.head.concat(c.children().toArray()))},DesignerService.prototype.removeVizDOM=function(e,t,n){var r=t.find("#"+n);r.length&&this.removeNodeAndEmptyLine(r),this.clearEmptyRows(e.filter(".mode-grid"))},DesignerService.prototype.removeViz=function(e,t){var n=a.c("<div>"+e+"</div>"),r=i()(n.body);return this.removeVizDOM(r.children(),r,t),this.joinDom(n.head.concat(r.children().toArray()))},DesignerService.prototype.moveGridRowDOM=function(e,t,n){var r=e.filter(".mode-grid").children(".row"),o=i()(r[t]),a=n<r.length?i()(r[n]):r.last();o.detach(),n<r.length?a.before(o):a.after(o)},DesignerService.prototype.moveGridRow=function(e,t,n){var r=a.c(e),o=i()(r.body);return this.moveGridRowDOM(o,t,n),this.joinDom(r.head.concat(o.toArray()))},DesignerService.prototype.moveGridElementDOM=function(e,t,n,r,o){var l=e.filter(".mode-grid").find("#"+t),s=e.filter(".mode-grid").children(".row"),c=l.parents('div[class^="col-md-"]');if(this.removeNodeAndEmptyLine(l,!0),r%2==0){var d=i()('<div class="row"><div class="col-md-12"></div></div>');d.children().first().append(l),2*s.length===r?s.last().after(d):i()(s[r/2]).before(d)}else{var u=i()(s[Math.floor(r/2)]).children(),p=i()(u[o]).children();p.length&&(this.removeNodeAndEmptyLine(p,!0),p.appendTo(c)),l.appendTo(i()(u[o]))}if(!c.html().trim()){var h=c.next(),g=c.prev();if(h.length&&!h.html().trim()){var m=a.b(h)+a.b(c);this.removeNodeAndEmptyLine(h),c.removeClass("col-md-"+a.b(c)),c.addClass("col-md-"+m)}if(g.length&&!g.html().trim()){m=a.b(g)+a.b(c);this.removeNodeAndEmptyLine(g),c.removeClass("col-md-"+a.b(c)),c.addClass("col-md-"+m)}}var f=e.filter(".mode-grid");this.clearEmptyRows(f),this.balanceColumns(f)},DesignerService.prototype.moveGridElement=function(e,t,n,r,o){var l=a.c(e),s=i()(l.body);return this.moveGridElementDOM(s,t,n,r,o),this.joinDom(l.head.concat(s.toArray()))},DesignerService.prototype.resizeGridElementDOM=function(e,t,n,r,o){var i=e.find("#"+t).parentsUntil("div.row").last(),l=a.b(i),s=l-o;switch(12===l&&0===t.indexOf("table")&&i.parent().attr(c.y,"large"),12===l&&0===t.indexOf("text")&&i.parent().attr(c.y,"small"),r){case"left":i.removeClass(),i.addClass("col-md-"+o);var d=i.prev();if(d.length)if(d.children().length)i.before('<div class="col-md-'+s+'"></div>');else{var u=a.b(d);u+s>0?(d.removeClass(),d.addClass("col-md-"+(u+s))):this.removeNodeAndEmptyLine(d)}else i.before('<div class="col-md-'+s+'"></div>');break;default:i.removeClass(),i.addClass("col-md-"+o);var p=i.next();if(p.length)if(p.children().length)i.after('<div class="col-md-'+s+'"></div>');else{var h=a.b(p);h+s>0?(p.removeClass(),p.addClass("col-md-"+(h+s))):this.removeNodeAndEmptyLine(p)}else i.after('<div class="col-md-'+s+'"></div>')}},DesignerService.prototype.resizeGridElement=function(e,t,n,r,o){var l=a.c(e),s=i()(l.body);return this.resizeGridElementDOM(s,t,n,r,o),this.joinDom(l.head.concat(s.toArray()))},DesignerService.prototype.resizeRowHeightDOM=function(e,t,n){var r=e.filter(".mode-grid").children(".row");r.length>t&&t>=0&&i()(r[t]).attr(c.y,n)},DesignerService.prototype.resizeRowHeight=function(e,t,n){var r=a.c(e),o=i()(r.body);return this.resizeRowHeightDOM(o,t,n),this.joinDom(r.head.concat(o.toArray()))},DesignerService.prototype.setFullTableDOM=function(e,t,n){var r=e.find("#"+t),o=r.parents(".row");if(r.parents("[class^=col-md]").hasClass("col-md-12"))o.removeAttr(c.y);else{var i=o.parent().children(".row").index(o);this.moveGridElementDOM(e,t,n,2*(i+1),0)}},DesignerService.prototype.setFullTable=function(e,t,n){var r=a.c(e),o=i()(r.body);return this.setFullTableDOM(o,n,t),this.joinDom(r.head.concat(o.toArray()))},DesignerService.prototype.toggleTextMarginsDOM=function(e,t,n){e.find("#"+t).toggleClass(d.a)},DesignerService.prototype.toggleTextMargins=function(e,t,n){var r=a.c(e),o=i()(r.body);return this.toggleTextMarginsDOM(o,n,t),this.joinDom(r.head.concat(o.toArray()))},DesignerService.prototype.getSafeDOM=function(e){return a.c(e).body},DesignerService.$inject=["$log","ViewOptionsService"],DesignerService}();t.default=m,r.module("mode.editor.designerService",[]).service("DesignerService",m)},uqgC:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDx0aXRsZT4KICAgICAgICB0b29sdGlwLW1hcmsKICAgIDwvdGl0bGU+CiAgICA8cGF0aCBkPSJNMi41IDIuMDA0YzAtLjI3NS4yMjgtLjUwNC40OTUtLjUwNGg4LjAxYy4yNyAwIC40OTUuMjI3LjQ5NS41MDR2MTAuNDg0YzAgLjEzNy4xLjA4Ny0uMDE3LjAwMkw3LjM4IDkuNDk2IDcuMjQ2IDkuNEgzLjAwNGMtLjI3NiAwLS41MDQtLjIyOC0uNTA0LS41MDRWMi4wMDR6IiBzdHJva2U9IiM3NTc3ODMiIGZpbGw9Im5vbmUiLz4KPC9zdmc+"},v0tr:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+bmV3LXZpc3VhbGl6YXRpb248L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTMiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgbWFza0NvbnRlbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIG1hc2tVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHg9IjAiIHk9IjAiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxMyIgZmlsbD0id2hpdGUiPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgIDwvbWFzaz4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJtb2NrdXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8dXNlIGlkPSJSZWN0YW5nbGUtMzUtQ29weS0zIiBzdHJva2U9IiNCMUIyQkEiIG1hc2s9InVybCgjbWFzay0yKSIgc3Ryb2tlLXdpZHRoPSIyIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTQtQ29weS03IiBmaWxsPSIjQUVBRkI3IiB4PSIzIiB5PSI3IiB3aWR0aD0iMSIgaGVpZ2h0PSI2IiByeD0iMC41Ij48L3JlY3Q+CiAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00LUNvcHktOCIgZmlsbD0iI0FFQUZCNyIgeD0iOSIgeT0iNSIgd2lkdGg9IjEiIGhlaWdodD0iOCIgcng9IjAuNSI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtNC1Db3B5LTkiIGZpbGw9IiNBRUFGQjciIHg9IjYiIHk9IjMiIHdpZHRoPSIxIiBoZWlnaHQ9IjEwIiByeD0iMC41Ij48L3JlY3Q+CiAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbC0xMi1Db3B5IiBzdHJva2U9IiM2MzY1NkUiIGZpbGw9IiNGRkZGRkYiIGN4PSIxNC41IiBjeT0iMTAuNSIgcj0iNC41Ij48L2NpcmNsZT4KICAgICAgICA8cGF0aCBkPSJNMTQuNSw4LjUgTDE0LjUsMTIuNSIgaWQ9IkxpbmUiIHN0cm9rZT0iIzYzNjU2RSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTE2LjUsMTAuNSBMMTIuNSwxMC41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+"},vgkc:function(e,t){e.exports='<div class="chart-accordion">\n  <div class="chart-nav">\n    <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n    <li ng-class="{active:accordion.chart}"><a ng-click="switchAccordion(\'chart\')">Data</a></li>\x3c!--\n    --\x3e<li ng-class="{active:accordion.format}"><a ng-click="switchAccordion(\'format\')">Format</a></li>\n    </ul>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.chart">\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.label" ng-options="column.name as column.name for column in columns.all" ng-change="updateSettings()"></select>\n    </div>\n    <div class="form-field">\n      <label class="axis-label">X-Axis</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.x" ng-options="column.name as column.name for column in columns.numberAndDate" ng-change="updateXColumns()"></select>\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Y-Axis</label>\n      <select multiselect-dropdown="scatter-y" class="multiselect" block="true" ng-multiple="true" multiple="multiple" ng-model="view.y" ng-options="column.name as column.name for column in columns.number" ng-change="updateYColumns()"></select>\n    </div>\n    <div class="form-field" ng-if="columns.number.length">\n      <label class="axis-label">Size</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.size" ng-options="column.name as column.name for column in columns.number" ng-change="updateSettings()">\n        <option value="">None</option>\n      </select>\n    </div>\n\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.format">\n    <h3 class="setting-title">X-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.xlabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Rotate Label</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xangle" ng-options="item.value as item.name for item in ::rotations" ng-change="updateSettings()">\n        <option value="">none</option>\n      </select>\n    </div>\n    <div class="form-field" ng-show="!isDateType();">\n      <label class="axis-label">Range</label>\n      <input class="form-control form-control-sm range-input" placeholder="min" type="text" ng-model="tempXmin" ng-model-options="{ updateOn: \'blur\' }" ng-change="setXMin(true);" mode-enter /> to\n      <input class="form-control form-control-sm range-input pull-right" placeholder="max" type="text" ng-model="tempXmax" ng-model-options="{ updateOn: \'blur\' }" ng-change="setXMax(true);" mode-enter />\n    </div>\n    <div class="clearfix">\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="form-field" ng-show="isDateType();">\n      <label class="axis-label">Format</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::dateFormats" ng-change="updateSettings()">\n        <option value="">auto</option>\n      </select>\n    </div>\n\n    <h3 class="setting-title">Y-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.ylabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Range</label>\n      <input class="form-control form-control-sm range-input" placeholder="min" type="text" ng-model="tempYmin" ng-model-options="{ updateOn: \'blur\' }" ng-change="setYMin(true);" mode-enter /> to\n      <input class="form-control form-control-sm range-input pull-right" placeholder="max" type="text" ng-model="tempYmax" ng-model-options="{ updateOn: \'blur\' }" ng-change="setYMax(true);" mode-enter />\n    </div>\n    <div class="clearfix">\n      <div class="half-width">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <h3 class="setting-title">Legend</h3>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="scatterhidelegend" value="hideLegend" ng-model="view.hideLegend" ng-change="updateSettings()" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="scatterhidelegend">\n        Hide Legend\n        </label>\n      </span>\n    </div>\n    <h3 class="setting-title">Color Palette</h3>\n    <div uib-dropdown class="advanced-theme dropdown dropup">\n      <a href="#" class="chart-toggle-container clearfix dropdown-toggle" uib-dropdown-toggle>\n        <div href="#" class="chart-toggle-theme">\n          <div class="angle" style="{{currentTheme}}"></div>\n          <i class="icon-double-carets pull-right"></i>\n        </div>\n      </a>\n      <ul uib-dropdown-menu class="dropdown-menu">\n        <li ng-repeat="color in ::themes">\n          <a href="javascript:void(0);" ng-click="setTheme(color.value);" class="checkbox-icon"><div class="swatches"><span class="swatch" style="background:{{color.color_0}}"></span><span class="swatch" style="background:{{color.color_1}}"></span><span class="swatch" style="background:{{color.color_2}}"></span><span class="swatch" style="background:{{color.color_3}}"></span><span class="swatch" style="background:{{color.color_4}}"></span></div>{{ color.name }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>'},w5gf:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzcycHgiIGhlaWdodD0iMTA2cHgiIHZpZXdCb3g9IjAgMCAzNzIgMTA2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZW1wdHktZ3JhcGhpYzwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAiIHk9IjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMDIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHBhdGggZD0iTTAsMS45OTQwNjAyOCBDMCwwLjg5Mjc3MTE5NiAwLjkwNDcyNDEyMSwwIDIuMDAzMjk4NjMsMCBMNjEuOTk2NzAxNCwwIEM2My4xMDMwOTI3LDAgNjQsMC44OTQ1MTM3NTYgNjQsMS45OTQwNjAyOCBMNjQsMTYgTDAsMTYgTDAsMS45OTQwNjAyOCBaIiBpZD0icGF0aC0yIj48L3BhdGg+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMyIgeD0iMCIgeT0iMzYiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxNiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTQiIHg9IjAiIHk9IjcyIiB3aWR0aD0iNjQiIGhlaWdodD0iMTIiPjwvcmVjdD4KICAgICAgICA8cmVjdCBpZD0icGF0aC01IiB4PSI2IiB5PSIyMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTYiIHg9IjAiIHk9IjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMDIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHBhdGggZD0iTTAsMS45OTQwNjAyOCBDMCwwLjg5Mjc3MTE5NiAwLjkwNDcyNDEyMSwwIDIuMDAzMjk4NjMsMCBMNjEuOTk2NzAxNCwwIEM2My4xMDMwOTI3LDAgNjQsMC44OTQ1MTM3NTYgNjQsMS45OTQwNjAyOCBMNjQsMTYgTDAsMTYgTDAsMS45OTQwNjAyOCBaIiBpZD0icGF0aC03Ij48L3BhdGg+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtOCIgeD0iMCIgeT0iMzYiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxNiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTkiIHg9IjAiIHk9IjcyIiB3aWR0aD0iNjQiIGhlaWdodD0iMTIiPjwvcmVjdD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xMCIgeD0iNiIgeT0iMjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxMiIgcng9IjIiPjwvcmVjdD4KICAgICAgICA8cmVjdCBpZD0icGF0aC0xMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjEyIiByeD0iMiI+PC9yZWN0PgogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEyIiB4PSIwIiB5PSIwIiB3aWR0aD0iNTIiIGhlaWdodD0iMTIiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgPHBhdGggZD0iTTIzMSw4OSBMMjMxLDkyLjk5MDc0NTUgQzIzMSw5NC42NTI3MTA5IDIzMi4wNzE5MjcsOTUuMTk2MDU1MSAyMzMuMzk2MDk1LDk0LjIwMjkyODkgTDIzNSw5MyBMMjM3LDk3IEwyMzksOTYgTDIzNyw5MiBMMjM5LjA2MjU1OSw5MS41ODc0ODgzIEMyNDAuNjg0ODYzLDkxLjI2MzAyNzUgMjQwLjk1MTgzNiw5MC4xNjE0Njg5IDIzOS42NjEwMzQsODkuMTI4ODI2OSBMMjM3LDg3IEwyMzMuMzAyNTk3LDgzLjkxODgzMDkgQzIzMi4wMzA5MDgsODIuODU5MDg5OCAyMzEsODMuMzQ5NjcwNCAyMzEsODUuMDA5MjU0NSBMMjMxLDg5IFoiIGlkPSJwYXRoLTEzIj48L3BhdGg+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMTQiIHg9IjE2MCIgeT0iNTYiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxMiIgcng9IjIiPjwvcmVjdD4KICAgIDwvZGVmcz4KICAgIDxnIGlkPSJjaGFydC1lZGl0b3IiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJlbXB0eS1zdGFja2VkLWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMzOS4wMDAwMDAsIC0xMzguMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJlbXB0eS1ncmFwaGljIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMzkuMDAwMDAwLCAxMzguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTYiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHkiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktMyIgZmlsbD0iI0ZGRkZGRiIgeD0iMCIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktNCIgZmlsbD0iI0ZGRkZGRiIgeD0iMjI4IiB5PSIxMiIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS0yIiBmaWxsPSIjRjdGN0Y5IiB4PSIxMzEiIHk9IjI0IiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOCIgZmlsbD0iI0Y3RjdGOSIgeD0iMTE5IiB5PSIwIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9InBlcmZvcm1hbmNlLXRhYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI1IiB3aWR0aD0iNjIiIGhlaWdodD0iMTAwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0yIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTYzLDE1IEwxLDE1IEwxLDEuOTk0MDYwMjggQzEsMS40NDkzNzk4MiAxLjQ1MjY3ODU3LDEgMi4wMDMyOTg2MywxIEw2MS45OTY3MDE0LDEgQzYyLjU1MTEwMTMsMSA2MywxLjQ0NzA5ODMxIDYzLDEuOTk0MDYwMjggTDYzLDE1IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5LTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0zIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iMzciIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHktNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTQiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI3MyIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0xNC1Db3B5LTciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjQ0FGMEY5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTUiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3Qgc3Ryb2tlPSIjODlEQUVEIiBzdHJva2Utd2lkdGg9IjIiIHg9IjciIHk9IjIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPHRleHQgaWQ9IngtYXhpcyIgZm9udC1mYW1pbHk9IkdyYXBoaWstQm9sZCwgR3JhcGhpayIgZm9udC1zaXplPSI4IiBmb250LXdlaWdodD0iYm9sZCIgbGV0dGVyLXNwYWNpbmc9IjAuNTMzMzMzMzYxIiBmaWxsPSIjQjFCMkJBIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRzcGFuIHg9IjE2MS42OCIgeT0iMTEiPngtYXhpczwvdHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICAgICAgICAgIDx0ZXh0IGlkPSJ5LWF4aXMiIGZvbnQtZmFtaWx5PSJHcmFwaGlrLUJvbGQsIEdyYXBoaWsiIGZvbnQtc2l6ZT0iOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxldHRlci1zcGFjaW5nPSIwLjUzMzMzMzM2MSIgZmlsbD0iI0IxQjJCQSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIxNjEuMTY0IiB5PSI0NyI+eS1heGlzPC90c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTYiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHkiIGZpbGw9IiNGN0Y3RjkiIHg9IjExOSIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktMyIgZmlsbD0iI0ZGRkZGRiIgeD0iMCIgeT0iMTIiIHdpZHRoPSIxNDQiIGhlaWdodD0iMTIiIHJ4PSI2Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMTA4LUNvcHktNCIgZmlsbD0iI0ZGRkZGRiIgeD0iMjI4IiB5PSIxMiIgd2lkdGg9IjE0NCIgaGVpZ2h0PSIxMiIgcng9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS0xMDgtQ29weS0yIiBmaWxsPSIjRjdGN0Y5IiB4PSIxMzEiIHk9IjI0IiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTEwOCIgZmlsbD0iI0Y3RjdGOSIgeD0iMTE5IiB5PSIwIiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjEyIiByeD0iNiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0LjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9InBlcmZvcm1hbmNlLXRhYmxlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTYiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI1IiB3aWR0aD0iNjIiIGhlaWdodD0iMTAwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC03Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTYzLDE1IEwxLDE1IEwxLDEuOTk0MDYwMjggQzEsMS40NDkzNzk4MiAxLjQ1MjY3ODU3LDEgMi4wMDMyOTg2MywxIEw2MS45OTY3MDE0LDEgQzYyLjU1MTEwMTMsMSA2MywxLjQ0NzA5ODMxIDYzLDEuOTk0MDYwMjggTDYzLDE1IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNy1Db3B5LTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0YxRjJGNSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC04Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiNDOENBRDAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMSIgeT0iMzciIHdpZHRoPSI2MiIgaGVpZ2h0PSIxNCI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHktNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjFGMkY1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTkiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iI0M4Q0FEMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSI3MyIgd2lkdGg9IjYyIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS0xNC1Db3B5LTciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjQ0FGMEY5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEwIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzg5REFFRCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSI3IiB5PSIyMSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTkuNDEyLDExIEwxNjEuMTgsOC4wNTYgTDE1OS41NDgsNS4yOCBMMTYxLjQxMiw1LjI4IEwxNjIuMzA4LDYuOTg0IEwxNjMuMTg4LDUuMjggTDE2NC44NjgsNS4yOCBMMTYzLjMzMiw4IEwxNjUuMSwxMSBMMTYzLjIyOCwxMSBMMTYyLjE2NCw5LjAzMiBMMTYxLjEsMTEgTDE1OS40MTIsMTEgWiBNMTY1LjYxNzMzMyw4Ljk2IEwxNjUuNjE3MzMzLDcuODI0IEwxNjguMDQxMzMzLDcuODI0IEwxNjguMDQxMzMzLDguOTYgTDE2NS42MTczMzMsOC45NiBaIE0xNjguNzY2NjY3LDExIEwxNzAuNTk4NjY3LDUuMjggTDE3Mi43MTg2NjcsNS4yOCBMMTc0LjUzNDY2NywxMSBMMTcyLjc5ODY2NywxMSBMMTcyLjQ5NDY2Nyw5LjkzNiBMMTcwLjU5ODY2Nyw5LjkzNiBMMTcwLjI5NDY2NywxMSBMMTY4Ljc2NjY2NywxMSBaIE0xNzEuNTUwNjY3LDYuNjA4IEwxNzAuOTE4NjY3LDguODA4IEwxNzIuMTc0NjY3LDguODA4IEwxNzEuNTUwNjY3LDYuNjA4IFogTTE3NS4zMDgsMTEgTDE3Ny4wNzYsOC4wNTYgTDE3NS40NDQsNS4yOCBMMTc3LjMwOCw1LjI4IEwxNzguMjA0LDYuOTg0IEwxNzkuMDg0LDUuMjggTDE4MC43NjQsNS4yOCBMMTc5LjIyOCw4IEwxODAuOTk2LDExIEwxNzkuMTI0LDExIEwxNzguMDYsOS4wMzIgTDE3Ni45OTYsMTEgTDE3NS4zMDgsMTEgWiBNMTgyLjI4OTMzMywxMSBMMTgyLjI4OTMzMyw1LjI4IEwxODMuOTQ1MzMzLDUuMjggTDE4My45NDUzMzMsMTEgTDE4Mi4yODkzMzMsMTEgWiBNMTg3LjcwMjY2NywxMS4wOTYgQzE4Ni45MDc5OTYsMTEuMDk2IDE4Ni4zMDUzMzUsMTAuOTMzMzM1IDE4NS44OTQ2NjcsMTAuNjA4IEMxODUuNDgzOTk4LDEwLjI4MjY2NSAxODUuMjY1MzM0LDkuODA4MDAzMTIgMTg1LjIzODY2Nyw5LjE4NCBMMTg2Ljc5ODY2Nyw5LjE4NCBDMTg2LjgyLDkuNDE4NjY3ODQgMTg2Ljg5NzMzMyw5LjYwMTMzMjY4IDE4Ny4wMzA2NjcsOS43MzIgQzE4Ny4xNjQwMDEsOS44NjI2NjczMiAxODcuMzg3OTk4LDkuOTI4IDE4Ny43MDI2NjcsOS45MjggQzE4Ny45MzIwMDEsOS45MjggMTg4LjExMTk5OSw5Ljg3NjAwMDUyIDE4OC4yNDI2NjcsOS43NzIgQzE4OC4zNzMzMzQsOS42Njc5OTk0OCAxODguNDM4NjY3LDkuNTMwNjY3NTIgMTg4LjQzODY2Nyw5LjM2IEMxODguNDM4NjY3LDkuMTg5MzMyNDggMTg4LjM3NzMzNCw5LjA2ODAwMDM2IDE4OC4yNTQ2NjcsOC45OTYgQzE4OC4xMzE5OTksOC45MjM5OTk2NCAxODcuODkyMDAyLDguODYxMzMzNiAxODcuNTM0NjY3LDguODA4IEMxODYuNzI5MzI5LDguNzExOTk5NTIgMTg2LjE2ODAwMiw4LjUyOTMzNDY4IDE4NS44NTA2NjcsOC4yNiBDMTg1LjUzMzMzMiw3Ljk5MDY2NTMyIDE4NS4zNzQ2NjcsNy41NjUzMzYyNCAxODUuMzc0NjY3LDYuOTg0IEMxODUuMzc0NjY3LDYuNDYxMzMwNzIgMTg1LjU3NTk5OCw2LjAzMzMzNSAxODUuOTc4NjY3LDUuNyBDMTg2LjM4MTMzNSw1LjM2NjY2NSAxODYuOTE4NjYzLDUuMiAxODcuNTkwNjY3LDUuMiBDMTg4Ljk5MzM0LDUuMiAxODkuNzQ1MzMzLDUuNzk0NjYwNzIgMTg5Ljg0NjY2Nyw2Ljk4NCBMMTg4LjMyNjY2Nyw2Ljk4NCBDMTg4LjI2OCw2LjU3MzMzMTI4IDE4OC4wMjI2NjksNi4zNjggMTg3LjU5MDY2Nyw2LjM2OCBDMTg3LjM3NzMzMiw2LjM2OCAxODcuMjEzMzM0LDYuNDExOTk5NTYgMTg3LjA5ODY2Nyw2LjUgQzE4Ni45ODM5OTksNi41ODgwMDA0NCAxODYuOTI2NjY3LDYuNzA2NjY1OTIgMTg2LjkyNjY2Nyw2Ljg1NiBDMTg2LjkyNjY2Nyw3LjAyMTMzNDE2IDE4Ni45ODc5OTksNy4xNDM5OTk2IDE4Ny4xMTA2NjcsNy4yMjQgQzE4Ny4yMzMzMzQsNy4zMDQwMDA0IDE4Ny40Njc5OTgsNy4zNjc5OTk3NiAxODcuODE0NjY3LDcuNDE2IEMxODguNTgyNjcxLDcuNTAxMzMzNzYgMTg5LjEzOTk5OCw3LjY3MDY2NTQgMTg5LjQ4NjY2Nyw3LjkyNCBDMTg5LjgzMzMzNSw4LjE3NzMzNDYgMTkwLjAwNjY2Nyw4LjU5OTk5NzA0IDE5MC4wMDY2NjcsOS4xOTIgQzE5MC4wMDY2NjcsOS43MzYwMDI3MiAxODkuODAxMzM1LDEwLjE4OTMzMTUgMTg5LjM5MDY2NywxMC41NTIgQzE4OC45Nzk5OTgsMTAuOTE0NjY4NSAxODguNDE3MzM3LDExLjA5NiAxODcuNzAyNjY3LDExLjA5NiBaIiBpZD0ieC1heGlzIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2MC45OTYsNDcgTDE2MC45OTYsNDQuNTUyIEwxNTkuMTMyLDQxLjI4IEwxNjAuOTE2LDQxLjI4IEwxNjEuODg0LDQzLjIwOCBMMTYyLjg1Miw0MS4yOCBMMTY0LjQyLDQxLjI4IEwxNjIuNjQ0LDQ0LjU1MiBMMTYyLjY0NCw0NyBMMTYwLjk5Niw0NyBaIE0xNjQuNzg1MzMzLDQ0Ljk2IEwxNjQuNzg1MzMzLDQzLjgyNCBMMTY3LjIwOTMzMyw0My44MjQgTDE2Ny4yMDkzMzMsNDQuOTYgTDE2NC43ODUzMzMsNDQuOTYgWiBNMTY3LjkzNDY2Nyw0NyBMMTY5Ljc2NjY2Nyw0MS4yOCBMMTcxLjg4NjY2Nyw0MS4yOCBMMTczLjcwMjY2Nyw0NyBMMTcxLjk2NjY2Nyw0NyBMMTcxLjY2MjY2Nyw0NS45MzYgTDE2OS43NjY2NjcsNDUuOTM2IEwxNjkuNDYyNjY3LDQ3IEwxNjcuOTM0NjY3LDQ3IFogTTE3MC43MTg2NjcsNDIuNjA4IEwxNzAuMDg2NjY3LDQ0LjgwOCBMMTcxLjM0MjY2Nyw0NC44MDggTDE3MC43MTg2NjcsNDIuNjA4IFogTTE3NC40NzYsNDcgTDE3Ni4yNDQsNDQuMDU2IEwxNzQuNjEyLDQxLjI4IEwxNzYuNDc2LDQxLjI4IEwxNzcuMzcyLDQyLjk4NCBMMTc4LjI1Miw0MS4yOCBMMTc5LjkzMiw0MS4yOCBMMTc4LjM5Niw0NCBMMTgwLjE2NCw0NyBMMTc4LjI5Miw0NyBMMTc3LjIyOCw0NS4wMzIgTDE3Ni4xNjQsNDcgTDE3NC40NzYsNDcgWiBNMTgxLjQ1NzMzMyw0NyBMMTgxLjQ1NzMzMyw0MS4yOCBMMTgzLjExMzMzMyw0MS4yOCBMMTgzLjExMzMzMyw0NyBMMTgxLjQ1NzMzMyw0NyBaIE0xODYuODcwNjY3LDQ3LjA5NiBDMTg2LjA3NTk5Niw0Ny4wOTYgMTg1LjQ3MzMzNSw0Ni45MzMzMzUgMTg1LjA2MjY2Nyw0Ni42MDggQzE4NC42NTE5OTgsNDYuMjgyNjY1IDE4NC40MzMzMzQsNDUuODA4MDAzMSAxODQuNDA2NjY3LDQ1LjE4NCBMMTg1Ljk2NjY2Nyw0NS4xODQgQzE4NS45ODgsNDUuNDE4NjY3OCAxODYuMDY1MzMzLDQ1LjYwMTMzMjcgMTg2LjE5ODY2Nyw0NS43MzIgQzE4Ni4zMzIwMDEsNDUuODYyNjY3MyAxODYuNTU1OTk4LDQ1LjkyOCAxODYuODcwNjY3LDQ1LjkyOCBDMTg3LjEwMDAwMSw0NS45MjggMTg3LjI3OTk5OSw0NS44NzYwMDA1IDE4Ny40MTA2NjcsNDUuNzcyIEMxODcuNTQxMzM0LDQ1LjY2Nzk5OTUgMTg3LjYwNjY2Nyw0NS41MzA2Njc1IDE4Ny42MDY2NjcsNDUuMzYgQzE4Ny42MDY2NjcsNDUuMTg5MzMyNSAxODcuNTQ1MzM0LDQ1LjA2ODAwMDQgMTg3LjQyMjY2Nyw0NC45OTYgQzE4Ny4yOTk5OTksNDQuOTIzOTk5NiAxODcuMDYwMDAyLDQ0Ljg2MTMzMzYgMTg2LjcwMjY2Nyw0NC44MDggQzE4NS44OTczMjksNDQuNzExOTk5NSAxODUuMzM2MDAyLDQ0LjUyOTMzNDcgMTg1LjAxODY2Nyw0NC4yNiBDMTg0LjcwMTMzMiw0My45OTA2NjUzIDE4NC41NDI2NjcsNDMuNTY1MzM2MiAxODQuNTQyNjY3LDQyLjk4NCBDMTg0LjU0MjY2Nyw0Mi40NjEzMzA3IDE4NC43NDM5OTgsNDIuMDMzMzM1IDE4NS4xNDY2NjcsNDEuNyBDMTg1LjU0OTMzNSw0MS4zNjY2NjUgMTg2LjA4NjY2Myw0MS4yIDE4Ni43NTg2NjcsNDEuMiBDMTg4LjE2MTM0LDQxLjIgMTg4LjkxMzMzMyw0MS43OTQ2NjA3IDE4OS4wMTQ2NjcsNDIuOTg0IEwxODcuNDk0NjY3LDQyLjk4NCBDMTg3LjQzNiw0Mi41NzMzMzEzIDE4Ny4xOTA2NjksNDIuMzY4IDE4Ni43NTg2NjcsNDIuMzY4IEMxODYuNTQ1MzMyLDQyLjM2OCAxODYuMzgxMzM0LDQyLjQxMTk5OTYgMTg2LjI2NjY2Nyw0Mi41IEMxODYuMTUxOTk5LDQyLjU4ODAwMDQgMTg2LjA5NDY2Nyw0Mi43MDY2NjU5IDE4Ni4wOTQ2NjcsNDIuODU2IEMxODYuMDk0NjY3LDQzLjAyMTMzNDIgMTg2LjE1NTk5OSw0My4xNDM5OTk2IDE4Ni4yNzg2NjcsNDMuMjI0IEMxODYuNDAxMzM0LDQzLjMwNDAwMDQgMTg2LjYzNTk5OCw0My4zNjc5OTk4IDE4Ni45ODI2NjcsNDMuNDE2IEMxODcuNzUwNjcxLDQzLjUwMTMzMzggMTg4LjMwNzk5OCw0My42NzA2NjU0IDE4OC42NTQ2NjcsNDMuOTI0IEMxODkuMDAxMzM1LDQ0LjE3NzMzNDYgMTg5LjE3NDY2Nyw0NC41OTk5OTcgMTg5LjE3NDY2Nyw0NS4xOTIgQzE4OS4xNzQ2NjcsNDUuNzM2MDAyNyAxODguOTY5MzM1LDQ2LjE4OTMzMTUgMTg4LjU1ODY2Nyw0Ni41NTIgQzE4OC4xNDc5OTgsNDYuOTE0NjY4NSAxODcuNTg1MzM3LDQ3LjA5NiAxODYuODcwNjY3LDQ3LjA5NiBaIiBpZD0ieS1heGlzIiBmaWxsPSIjQjFCMkJBIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5My4wMDAwMDAsIDc2LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS0xMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS05Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsLW9wYWNpdHk9IjAuNCIgZmlsbD0iIzk4RDVCMCIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMiI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzk4RDVCMCIgc3Ryb2tlLXdpZHRoPSIyIiB4PSIxIiB5PSIxIiB3aWR0aD0iNTAiIGhlaWdodD0iMTAiIHJ4PSIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPGcgaWQ9IkZpbGwtMS1Db3B5LTYiPgogICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iIzYzNjU2RSIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMyI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0yMzQuNjQxNDMsOTQuNTE4OTI3NiBMMjM2LjEwNTU3Myw5Ny40NDcyMTM2IEwyMzYuNTUyNzg2LDk4LjM0MTY0MDggTDIzNy40NDcyMTQsOTcuODk0NDI3MiBMMjM5LjQ0NzIxNCw5Ni44OTQ0MjcyIEwyNDAuMzQxNjQxLDk2LjQ0NzIxMzYgTDIzOS44OTQ0MjcsOTUuNTUyNzg2NCBMMjM4LjQ3OTk0Miw5Mi43MjM4MTU1IEwyMzkuMjU4Njc1LDkyLjU2ODA2OSBDMjQxLjcxMzg1NSw5Mi4wNzcwMzI4IDI0Mi4yNDAyNTMsODkuOTExNTc3NCAyNDAuMjg1NzI5LDg4LjM0Nzk1ODEgTDIzNy42MjQ2OTUsODYuMjE5MTMxMiBMMjMzLjk0Mjc4MSw4My4xNTA2MDk2IEMyMzIuMDE4MTQ5LDgxLjU0Njc0OTYgMjMwLDgyLjUwMzkxMTIgMjMwLDg1LjAwOTI1NDUgTDIzMCw4OSBMMjMwLDkyLjk5MDc0NTUgQzIzMCw5NS40NzQyMjEyIDIzMi4wMTA2NDMsOTYuNDkyMDE3NiAyMzMuOTk2MDk1LDk1LjAwMjkyODkgTDIzNC42NDE0Myw5NC41MTg5Mjc2IFoiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtMTQtQ29weS04Ij4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGwtb3BhY2l0eT0iMC40IiBmaWxsPSIjOThENUIwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTE0Ij48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiM5OEQ1QjAiIHN0cm9rZS13aWR0aD0iMiIgeD0iMTYxIiB5PSI1NyIgd2lkdGg9IjUwIiBoZWlnaHQ9IjEwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},wB6Z:function(e,t,n){"use strict";var r,o=function(){function Flipper(e){null==e?(this._features=[],this._orgFeatures={}):(this._features=e.features,this._orgFeatures=e.orgFeatures)}return Object.defineProperty(Flipper.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(Flipper.prototype,"orgFeatures",{get:function(){return this._orgFeatures},enumerable:!0,configurable:!0}),Flipper.prototype.isEnabled=function(e,t){if(void 0===t&&(t=""),t){var n=this.orgFeatures[t];return!!n&&n.indexOf(e)>=0}return this.features.indexOf(e)>=0},Flipper.prototype.getFeatureCount=function(){return this.features.length},Flipper.prototype.getOrgFeatureCount=function(e){return this.orgFeatures[e]?this.orgFeatures[e].length:0},Flipper}();n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),function(e){!function(e){e.CustomizeWideShut="customize_wide_shut",e.DatetimeDialation="datetime_dilation",e.HeaderRivers="header_rivers",e.MapQuest="map_quest",e.HorizontalPie="horizontal_pie_chart",e.SqlDefinitions="sql_definitions",e.TheMalteseFalcon9="the_maltese_falcon9"}(e.Type||(e.Type={})),function(e){e.User="[FlipperContext] User",e.Organization="[FlipperContext] Organization"}(e.Context||(e.Context={}))}(r||(r={}));var i=function(){function FlipperService(e,t){this.FLAG_PLATFORM_HEADER=r.Type.HeaderRivers;var n=this.getFlipperFeatures(t);null==n&&void 0!==e.bugsnagClient&&e.bugsnagClient.notify(new Error("Flipper features are undefined")),this._flipper=new o(n)}return Object.defineProperty(FlipperService.prototype,"flipper",{get:function(){return this._flipper},enumerable:!0,configurable:!0}),FlipperService.prototype.enabled=function(e,t){return void 0===t&&(t=""),this.flipper.isEnabled(e,t)},FlipperService.prototype.isEnabled=function(e,t){return void 0===t&&(t=""),this.enabled(e,t)},FlipperService.prototype.getFeatureCount=function(){return this.flipper.getFeatureCount()},FlipperService.prototype.getFlipperFeatures=function(e){var t=e.instance().get("dataLayer");return null!=t&&Array.isArray(t)&&0!==t.length?t[0]:{features:[],orgFeatures:{}}},FlipperService.$inject=["$window","ModeGlobal"],FlipperService}()},wP0l:function(e,t){e.exports='<div class="chart-accordion">\n  <div class="chart-nav">\n    <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\n    <li ng-class="{active:accordion.chart}"><a ng-click="switchAccordion(\'chart\')">Data</a></li>\x3c!--\n    --\x3e<li ng-class="{active:accordion.format}"><a ng-click="switchAccordion(\'format\')">Format</a></li>\n    </ul>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.chart">\n    <div class="form-field">\n      <label class="axis-label">X-Axis</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.x" ng-options="column.name as column.name for column in columns.all" ng-change="updateXColumns()"></select>\n    </div>\n    <div class="form-field" ng-if="series.number.length">\n      <label class="axis-label">Y-Axis</label>\n      <select\n        multiselect-dropdown="area-y"\n        class="multiselect"\n        classes="form-control form-control-sm form-control-block"\n        block="true"\n        ng-multiple="true"\n        multiple="multiple"\n        ng-model="view.y"\n        ng-options="series.name as series.name for series in series.number"\n        ng-change="updateYColumns()">\n      </select>\n    </div>\n    <div class="form-field" ng-if="(view.y.length && (view.y.length < 2 || !view.g)) || !series.number.length">\n      <label class="axis-label">Aggregate</label>\n      <select ng-if="!view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" ng-model="view.aggregate" ng-options="fn.value as fn.name for fn in ::aggregates" ng-change="updateSettings()"><option value="">None</option></select>\n      <select ng-if="view.g" class="form-control form-control-sm form-control-block ng-animate-disabled" ng-model="view.gValueFn" ng-options="fn.value as fn.name for fn in ::aggregates" ng-change="updateSettings()"></select>\n    </div>\n    <div class="form-field" ng-if="(view.y.length && view.y.length < 2) || !series.number.length">\n      <label class="axis-label">Group By</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.g" ng-options="column.name as column.name for column in columns.grouped" ng-change="updateGroupBy()"><option value="">None</option></select>\n    </div>\n    <div class="form-field" ng-if="view.g && ((view.y.length && view.y.length < 2) || !series.number.length)">\n      <label class="axis-label">Selected</label>\n      <select\n        multiselect-dropdown="area-f"\n        class="multiselect"\n        classes="form-control form-control-sm form-control-block"\n        select-all="true"\n        select-all-text="All Series"\n        select-all-value="string:$mode-select-all$"\n        select-all-button-text="All Series"\n        block="true"\n        ng-multiple="true"\n        multiple="multiple"\n        ng-model="view.f"\n        ng-options="series.name as series.displayName for series in series.grouped"\n        ng-change="updateSettings()">\n      </select>\n    </div>\n  </div>\n  <div class="chart-tab-content" ng-show="accordion.format">\n    <h3 class="setting-title">X-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.xlabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field">\n      <label class="axis-label">Rotate Label</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xangle" ng-options="item.value as item.name for item in ::rotations" ng-change="updateSettings()">\n        <option value="">none</option>\n      </select>\n    </div>\n    <div class="clearfix">\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-options="item.value as item.name for item in ::formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width" ng-show="!isDateType();">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.xprecision" ng-change="updateSettings()">\n            <option value="">auto</option>\n            <option ng-repeat="item in ::precisions" value="{{ ::item.value }}">{{ ::item.name }}</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="form-field" ng-show="isDateType();">\n      <label class="axis-label">Format</label>\n      <select class="form-control form-control-sm form-control-block" ng-model="view.xformat" ng-change="updateSettings()">\n        <option value="">auto</option>\n        <option ng-repeat="item in ::dateFormats" value="{{ ::item.value }}">{{ ::item.name }}</option>\n      </select>\n    </div>\n\n    <h3 class="setting-title">Y-Axis</h3>\n    <div class="form-field">\n      <label class="axis-label">Label</label>\n      <input type="text" class="form-control form-control-sm axis-title-input" ng-model-options="{ updateOn: \'blur\' }" ng-model="view.ylabel" ng-change="updateSettings()" mode-enter />\n    </div>\n    <div class="form-field clearfix" ng-show="!view.expanded">\n      <label class="axis-label">Range</label>\n      0 to <input class="form-control form-control-sm range-input-lg pull-right" placeholder="max" type="text" ng-model-options="{ updateOn: \'blur\' }" ng-model="tempYmax" ng-change="setYMax(true);" mode-enter />\n    </div>\n    <div class="clearfix" ng-show="!view.expanded">\n      <div class="half-width">\n        <div class="form-field half-width-left">\n          <label class="axis-label">Format</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yformat" ng-options="item.value as item.name for item in formats" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n      <div class="half-width">\n        <div class="form-field half-width-right">\n          <label class="axis-label label-inline">Precision</label>\n          <select class="form-control form-control-sm form-control-block" ng-model="view.yprecision" ng-options="item.value as item.name for item in ::precisions" ng-change="updateSettings()">\n            <option value="">auto</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <h3 class="setting-title">Legend</h3>\n    <div class="form-field check-field">\n      <span class="checkbox-icon">\n        <input type="checkbox" id="areahidelegend" value="hideLegend" ng-model="view.hideLegend" ng-change="updateSettings($event)" />\n        <label class="inline-icon icon-editor-checkbox-light-unchecked" for="areahidelegend">\n        Hide Legend\n        </label>\n      </span>\n    </div>\n    <h3 class="setting-title">Color Palette</h3>\n    <div uib-dropdown class="advanced-theme dropdown dropup">\n      <a href="#" class="chart-toggle-container clearfix dropdown-toggle" uib-dropdown-toggle>\n        <div href="#" class="chart-toggle-theme">\n          <div class="angle" style="{{currentTheme}}"></div>\n          <i class="icon-double-carets pull-right"></i>\n        </div>\n      </a>\n      <ul uib-dropdown-menu class="dropdown-menu">\n        <li ng-repeat="color in ::themes">\n          <a href="javascript:void(0);" ng-click="setTheme(color.value);" class="checkbox-icon"><div class="swatches"><span class="swatch" style="background:{{color.color_0}}"></span><span class="swatch" style="background:{{color.color_1}}"></span><span class="swatch" style="background:{{color.color_2}}"></span><span class="swatch" style="background:{{color.color_3}}"></span><span class="swatch" style="background:{{color.color_4}}"></span></div>{{ color.name }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>'},wcGD:function(e,t,n){"use strict";var r=n("0YuG");n.n(r);r.module("mode.python",["mode.shared.services","mode.assets","mode.components"]).constant("ace",window.ace)},xEvw:function(e,t,n){"use strict";var r,o;n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),function(e){e.Single="SINGLE",e.Multi="MULTI",e.Range="RANGE"}(r||(r={})),function(e){e.List="LIST",e.Dropdown="DROPDOWN",e.Range="RANGE"}(o||(o={}))},xGKD:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Y29udGludW91cy1udW1iZXI8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0ibW9ja3VwcyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICAgICAgICA8ZyBpZD0iZGlzY3JldGUtbnVtYmVyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMC4wMDAwMDApIiBzdHJva2U9IiM0Q0QyQTIiPgogICAgICAgICAgICA8cGF0aCBkPSJNMC41NTU1NTU1NTYsNC41IEw5LjQ0NDQ0NDQ0LDQuNSIgaWQ9IkxpbmUiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTAuNTU1NTU1NTU2LDguNSBMOS40NDQ0NDQ0NCw4LjUiIGlkPSJMaW5lLUNvcHktMjUiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTQuMTQ5NjI2OTksMS4yNjY5OTIgTDIuMzM2NzA2MzUsMTEuMjE5ODA4IiBpZD0iTGluZSI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNNy40ODI5NjAzMiwxLjI2Njk5MiBMNS42NzAwMzk2OCwxMS4yMTk4MDgiIGlkPSJMaW5lLUNvcHktMjIiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},"xNe+":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMjAgMTYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQyICgzNjc4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+Zm9yd2FyZF9lbmFibGVkPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9Im1vY2t1cHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJGb3J3YXJkLUVuYWJsZWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCA0LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtNDItQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgMy41MDAwMDApIHJvdGF0ZSgtMTgwLjAwMDAwMCkgdHJhbnNsYXRlKC05LjAwMDAwMCwgLTMuNTAwMDAwKSAiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTQuNSwzLjUgTDE3LjUsMy41IiBpZD0iTGluZSIgc3Ryb2tlPSIjNjM2NTZFIiBzdHJva2UtbGluZWNhcD0icm91bmQiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjMwNDUxNjYyOSw0LjA4NzI5MzEzIEMtMC4xNDQzNTg1MDUsMy43NjM1Nzg0NCAtMC4xNDY4MzI0NDUsMy4yNDA1MTczNiAwLjMwNDUxNjYyOSwyLjkxNTAxODU0IEw0LjE4NzIzOTY3LDAuMTE0OTIwMjc2IEM0LjYzNjExNDgxLC0wLjIwODc5NDQxNCA1LC0wLjAyMTMwOTczNTggNSwwLjUzNDk5MDUxNSBMNSw2LjQ2NzMyMTE2IEM1LDcuMDIzMDM0MjQgNC42Mzg1ODg3NSw3LjIxMjg5MDIyIDQuMTg3MjM5NjcsNi44ODczOTE0IEwwLjMwNDUxNjYyOSw0LjA4NzI5MzEzIFoiIGlkPSJUcmlhbmdsZSIgZmlsbD0iIzYzNjU2RSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},y90i:function(e,t){e.exports='<div class="share-dialog">\n  <div ng-show="ctrl.view.email" ng-if="ctrl.emailObject && !ctrl.report.public">\n    <h3 class="modal-header">Share via Email<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n    <div class="modal-tabs">\n      <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\x3c!--\n        --\x3e<li class="active"><a href="#"><i class="share-icon icon-email-selected"></i>Email</a></li>\x3c!--\n        --\x3e<li><a href="#" ng-click="ctrl.setView(\'slack\')"><i class="share-icon icon-slack"></i>Slack</a></li>\x3c!--\n        --\x3e<li><a href="#" ng-click="ctrl.setView(\'share\')"><i class="share-icon icon-URL-link"></i>Link</a></li>\n      </ul>\n    </div>\n    <div class="modal-external" ng-if="ctrl.view.email && ctrl.extSharingEnabled" ng-class="{ shared: ctrl.report.shared }">\n      <span class="checkbox-lg" ng-if="ctrl.report.canToggleSharing">\n        <input id="toggleSharedReport" type="checkbox" ng-checked="ctrl.report.shared" />\n        <label for="toggleSharedReport" ng-click="ctrl.toggleSharedReport()">\n          <span class="toggle">\n            <i class="icon icon-external-sharing checkmark"></i>\n            <span class="switch"></span>\n            <i class="icon icon-lock-black unchecked"></i>\n          </span>\n        </label>\n      </span>\n      <span class="checkbox-text">External sharing of this report is <strong>{{ ctrl.report.shared ? \'ON\' : \'OFF\' }}</strong></span>\n      <div class="info-text" ng-if="ctrl.report.shared">\n        You can email this report to any email address.\n      </div>\n      <div class="info-text" ng-if="!ctrl.report.shared">\n        You can only email this report to members of {{ ctrl.owner.name }}.\n      </div>\n    </div>\n    <div ng-if="ctrl.account.email_verified && ctrl.runStatus.completed && ctrl.runStatus.exportableDatasets">\n      <form name="reportEmailForm" ng-submit="ctrl.email()">\n        <div class="modal-container clearfix">\n          <div class="email-validation-element">\n            <input id="report_email"\n                   name="report_email"\n                   type="text"\n                   autocomplete="off"\n                   class="email-input form-control next-form-control form-control-block form-nostatus"\n                   ng-model="ctrl.emailObject.recipient_address"\n                   placeholder="Email addresses"\n                   tokenfield\n                   data-inputType="email"\n                   on-token-creating="ctrl.emailAdding($event, $tokens)"\n                   on-token-created="ctrl.emailAdded($event, $tokens)"\n                   on-token-removed="ctrl.checkOutsideEmails($tokens)"\n                   required />\n          </div>\n          <div class="email-form-element">\n            <textarea class="form-control next-form-control" placeholder="Add a message" ng-model="ctrl.emailObject.message"></textarea>\n          </div>\n          <div class="email-form-element">\n            <div class="attachment-options checkbox-icon" ng-if="ctrl.emailForm.data_previews_enabled">\n              <input type="checkbox" id="emailTable" ng-model="ctrl.emailObject.data_previews_enabled" />\n              <label class="inline-icon icon-editor-checkbox-light-unchecked" for="emailTable">Include preview of report</label>\n            </div>\n            <div class="attachment-options checkbox-icon" ng-if="ctrl.emailForm.data_tables_enabled">\n              <input type="checkbox" id="emailHTMLTable" ng-model="ctrl.emailObject.data_tables_enabled" />\n              <label class="inline-icon icon-editor-checkbox-light-unchecked" for="emailHTMLTable">Include HTML tables of your query results</label>\n            </div>\n            <div class="attachment-options checkbox-icon" ng-if="ctrl.emailForm.csv_attachments_enabled">\n              <input type="checkbox" id="emailCSV" ng-model="ctrl.emailObject.csv_attachments_enabled" />\n              <label class="inline-icon icon-editor-checkbox-light-unchecked" for="emailCSV">Attach CSV</label>\n            </div>\n            <div class="attachment-options checkbox-icon" ng-if="ctrl.emailForm.pdf_attachments_enabled">\n              <input type="checkbox" id="emailPDF" ng-model="ctrl.emailObject.pdf_attachments_enabled" />\n              <label class="inline-icon icon-editor-checkbox-light-unchecked" for="emailPDF">Attach PDF</label>\n            </div>\n          </div>\n        </div>\n        <div class="email-external" ng-if="ctrl.report.shared && ctrl.hasExternalEmails">\n          <span>One or more recipients are outside your Mode organization.</span>\n        </div>\n        <div class="modal-action-bar">\n          <div class="modal-action-bar-links"\n               ng-if="ctrl.createScheduleEnabled()">\n            <a href="#"\n              ng-click="ctrl.dismiss()"\n              schedules-modal\n              report="ctrl.report"\n              report-run="ctrl.reportRun"\n              owner="ctrl.owner"\n              account="ctrl.account">\n              Create a schedule\n            </a> to share this regularly.\n          </div>\n          <button type="submit" class="btn btn-lg btn-filled-primary" ng-disabled="reportEmailForm.$invalid || reportEmailForm.$pending">Send</button>\n        </div>\n      </form>\n    </div>\n    <div ng-if="ctrl.account.email_verified && !ctrl.runStatus.completed">\n      <p class="full-message">This report is currently being refreshed. You\'ll be able to email it once it completes. <span ng-if="!ctrl.inEditor">Maybe there\'s a <a href="#" ng-click="ctrl.closeWithLink()">previous run</a> that will work?</span></p>\n      <div class="modal-action-bar">\n        <button class="btn btn-lg btn-link btn-success-hover btn-strong" ng-click="ctrl.dismiss()">Close</button>\n      </div>\n    </div>\n    <div ng-if="ctrl.account.email_verified && ctrl.runStatus.completed && !ctrl.runStatus.exportableDatasets">\n      <p class="full-message">Please review failed queries. Emails can be sent when there is at least one successful query run.</p>\n      <div class="center-action-bar" ng-if="!ctrl.inEditor"><a ng-href="{{ ctrl.report._resource.links(\'web_edit\').href }}" target="_self" class="btn btn-filled-primary">Edit now</a></div>\n      <div class="modal-action-bar">\n        <button class="btn btn-lg btn-link btn-success-hover btn-strong" ng-click="ctrl.dismiss()">Close</button>\n      </div>\n    </div>\n    <div ng-if="!ctrl.account.email_verified">\n      <p class="full-message">You can share Mode reports via email once you verify your email address, <strong>{{ ctrl.account.email }}</strong></p>\n      <div class="center-action-bar"><a ng-href="{{ ctrl.account._resource.links(\'web_settings\').href }}" target="_blank" rel="noopener" class="btn btn-filled-primary">Verify now</a></div>\n      <div class="modal-action-bar">\n        <button class="btn btn-lg btn-link btn-success-hover btn-strong" ng-click="ctrl.dismiss()">Close</button>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="ctrl.view.share">\n    <h3 class="modal-header">Share via Link<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n    <div class="modal-tabs">\n      <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\x3c!--\n        --\x3e<li ng-if="ctrl.emailObject && !ctrl.report.public"><a href="#" ng-click="ctrl.setView(\'email\')"><i class="share-icon icon-email"></i>Email</a>\x3c!--\n        --\x3e<li><a href="#" ng-click="ctrl.setView(\'slack\')"><i class="share-icon icon-slack"></i>Slack</a></li>\x3c!--\n        --\x3e<li class="active"><a href="#"><i class="share-icon icon-URL-link-selected"></i>Link</a></li>\n      </ul>\n    </div>\n    <div class="modal-external" ng-if="ctrl.view.share && ctrl.extSharingEnabled" ng-class="{ shared: ctrl.report.shared }">\n      <span class="checkbox-lg" ng-if="ctrl.report.canToggleSharing">\n        <input id="toggleSharedReport" type="checkbox" ng-checked="ctrl.report.shared" />\n        <label for="toggleSharedReport" ng-click="ctrl.toggleSharedReport()">\n          <span class="toggle">\n            <i class="icon icon-external-sharing checkmark"></i>\n            <span class="switch"></span>\n            <i class="icon icon-lock-black unchecked"></i>\n          </span>\n        </label>\n      </span>\n      <span class="checkbox-text">External sharing of this report is <strong>{{ ctrl.report.shared ? \'ON\' : \'OFF\' }}</strong></span>\n      <div class="info-text" ng-if="ctrl.report.shared">\n        Anyone with external links can view this report.\n      </div>\n      <div class="info-text" ng-if="!ctrl.report.shared">\n        These links are only visible to logged-in members of {{ ctrl.owner.name }}.\n      </div>\n    </div>\n    <div class="modal-container clearfix">\n      <div class="modal-heading-2">Internal Links</div>\n      <div>Logged in members of {{ ctrl.owner.name }} can view this report <a href="https://help.modeanalytics.com/articles/sharing-reports-outside-your-organization" target="_blank" rel="noopener">Learn More</a></div>\n\n      <div class="link-group">\n        <label><strong>Report Link</strong> - Always shows the most recent run</label>\n        <button clippy ng-model="ctrl.report.link" class="btn btn-secondary">Copy</button>\n        <a ng-href="{{ ctrl.report.link }}" target="_blank" rel="noopener">{{ ctrl.report.link }}</a>\n      </div>\n\n      <div class="link-group">\n        <label><strong>Run Link</strong> - A static link to this run</label>\n        <button clippy ng-model="ctrl.reportRun.shareLink" class="btn btn-secondary">Copy</button>\n        <a ng-href="{{ ctrl.reportRun.shareLink }}" target="_blank" rel="noopener">{{ ctrl.reportRun.shareLink }}</a>\n      </div>\n\n      <div class="public-links" ng-if="ctrl.extSharingEnabled" ng-class="{\'disabled\': !ctrl.report.shared}">\n        <hr />\n\n        <div class="modal-heading-2">External Links</div>\n        <div>Anyone with the External link can view this report <a href="https://help.modeanalytics.com/articles/sharing-reports-outside-your-organization" target="_blank" rel="noopener">Learn More</a></div>\n\n        <div class="link-group">\n          <label><strong>Report Link</strong> - Always shows the most recent run</label>\n          <button clippy ng-model="ctrl.report.externalLink" class="btn btn-secondary" ng-disabled="!ctrl.report.shared">Copy</button>\n          <a ng-href="{{ ctrl.report.externalLink }}" ng-click="!ctrl.report.shared && $event.preventDefault()" target="_blank" rel="noopener">{{ ctrl.report.externalLink }}</a>\n        </div>\n\n\n        <div class="link-group">\n          <label><strong>Run Link</strong> - A static link to this run</label>\n          <button clippy ng-model="ctrl.reportRun.externalLink" class="btn btn-secondary" ng-disabled="!ctrl.report.shared">Copy</button>\n          <a ng-href="{{ ctrl.reportRun.externalLink }}" ng-click="!ctrl.report.shared && $event.preventDefault()" target="_blank" rel="noopener">{{ ctrl.reportRun.externalLink }}</a>\n        </div>\n      </div>\n\n      <div class="modal-center-action" ng-if="ctrl.fbAppId && ctrl.social">\n        <button ng-click="ctrl.fbShare();" class="btn btn-lg btn-facebook"><i class="icon-logo-facebook align-md-icon social-fb-icon"></i>Facebook</button>\n        <button ng-click="ctrl.twitterShare();" class="btn btn-lg btn-twitter"><i class="icon-logo-twitter align-md-icon social-tw-icon"></i> Twitter</button>\n      </div>\n    </div>\n  </div>\n\n\n  <div ng-show="ctrl.view.slack">\n    <h3 class="modal-header">Slack Report<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n    <div class="modal-tabs">\n      <ul class="nav nav-tabs nav-tabs-bottom nav-tabs-inline">\x3c!--\n        --\x3e<li ng-if="ctrl.emailObject && !ctrl.report.public"><a href="#" ng-click="ctrl.setView(\'email\')"><i class="share-icon icon-email"></i>Email</a>\x3c!--\n        --\x3e<li class="active"><a href="#"><i class="share-icon icon-slack"></i>Slack</a></li>\x3c!--\n        --\x3e<li><a href="#" ng-click="ctrl.setView(\'share\')"><i class="share-icon icon-URL-link"></i>Link</a>\n      </ul>\n    </div>\n    <slack-cta\n      ng-if="!ctrl.hasSlackApp"\n      scheduling-enabled="ctrl.createScheduleEnabled()"\n      owner="ctrl.owner"\n      account="ctrl.account"></slack-cta>\n    <slack-sharing\n      ng-if="ctrl.hasSlackApp"\n      scheduling-enabled="ctrl.createScheduleEnabled()"\n      owner="ctrl.owner"\n      report-run="ctrl.reportRun"\n      report="ctrl.report"\n      run-status="ctrl.runStatus"\n      details-link="ctrl.detailsLink"\n      account="ctrl.account"\n      slack-object="ctrl.slackObject"\n      slack-form="ctrl.slackForm"\n      slack-channels="ctrl.slackChannels"\n      slack-app-installer="ctrl.slackAppInstaller"\n      selected-channel="ctrl.selectedChannel"\n      on-dismiss="ctrl.dismiss()"></slack-sharing>\n  </div>\n</div>\n'},yOFN:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.LoadAccount="LoadAccount",e.LoadAccountSuccess="LoadAccountSuccess",e.LoadLoggedInState="LoadLoggedInState",e.LoadAccountContext="LoadAccountContext",e.LoadAccountContextSuccess="LoadAccountContextSuccess",e.LoadAccountContextSpaces="LoadAccountContextSpaces",e.LoadAccountContextSpacesSuccess="LoadAccountContextSpacesSuccess",e.LoadAccountContextSpacesFailure="LoadAccountContextSpacesFailure",e.LoadAccountContextDatasources="LoadAccountContextDatasources",e.LoadAccountContextDatasourcesSuccess="LoadAccountContextDatasourcesSuccess",e.LoadAccountContextDatasourcesFailure="LoadAccountContextDatasourcesFailure",e.LoadAccountContextFeatures="LoadAccountContextFeatures",e.LoadAccountContextFeaturesSuccess="LoadAccountContextFeaturesSuccess",e.LoadAccountContextFeaturesFailure="LoadAccountContextFeaturesFailure",e.LoadAccountEmbeddedColorPalettes="LoadAccountEmbeddedColorPalettes",e.LoadAccountEmbeddedColorPalettesSuccess="LoadAccountEmbeddedColorPalettesSuccess",e.LoadAccountEmbeddedColorPalettesFailure="LoadAccountEmbeddedColorPalettesFailure",e.LoadAccountOrganizations="LoadAccountOrganizations",e.LoadAccountOrganizationsSuccess="LoadAccountOrganizationsSuccess",e.LoadAccountOrganizationsFailure="LoadAccountOrganizationsFailure",e.LoadAccountPreference="LoadAccountPreference",e.LoadAccountPreferenceSuccess="LoadAccountPreferenceSuccess",e.LoadAccountPreferenceFailure="LoadAccountPreferenceFailure",e.LoadApi="LoadApi",e.LoadApiSuccess="LoadApiSuccess",e.LoadApiDatasources="LoadApiDatasources",e.LoadApiDatasourcesSuccess="LoadApiDatasourcesSuccess",e.LoadApiDatasourcesFailure="LoadApiDatasourcesFailure",e.LoadFlippers="LoadFlippers",e.LoadReportContext="LoadReportContext",e.LoadReportContextSuccess="LoadReportContextSuccess",e.LoadReportContextDatasources="LoadReportContextDatasources",e.LoadReportContextDatasourcesSuccess="LoadReportContextDatasourcesSuccess",e.LoadReportContextDatasourcesFailure="LoadReportContextDatasourcesFailure",e.LoadReportContextFeatures="LoadReportContextFeatures",e.LoadReportContextFeaturesSuccess="LoadReportContextFeaturesSuccess",e.LoadReportContextFeaturesFailure="LoadReportContextFeaturesFailure",e.LoadReportContextSpaces="LoadReportContextSpaces",e.LoadReportContextSpacesSuccess="LoadReportContextSpacesSuccess",e.LoadReportContextSpacesFailure="LoadReportContextSpacesFailure",e.LoadReport="LoadReport",e.LoadReportSuccess="LoadReportSuccess",e.LoadReportFailure="LoadReportFailure",e.LoadDefinitionSuccess="LoadDefinitionSuccess",e.LoadReportCreator="LoadReportCreator",e.LoadReportCreatorSuccess="LoadReportCreatorSuccess",e.LoadReportCreatorFailure="LoadReportCreatorFailure",e.LoadReportEmbeddedSpace="LoadReportEmbeddedSpace",e.LoadReportEmbeddedSpaceSuccess="LoadReportEmbeddedSpaceSuccess",e.LoadReportEmbeddedSpaceFailure="LoadReportEmbeddedSpaceFailure",e.LoadReportRunEmbeddedPdfExport="LoadReportRunEmbeddedPdfExport",e.LoadReportRunEmbeddedPdfExportSuccess="LoadReportRunEmbeddedPdfExportSuccess",e.LoadReportRunEmbeddedPdfExportFailure="LoadReportRunEmbeddedPdfExportFailure",e.LoadReportUserStar="LoadReportUserStar",e.LoadReportUserStarSuccess="LoadReportUserStarSuccess",e.LoadReportUserStarFailure="LoadReportUserStarFailure",e.LoadReportRun="LoadReportRun",e.LoadReportRunSuccess="LoadReportRunSuccess",e.UpdatePreference="UpdatePreference",e.UpdatePreferenceSuccess="UpdatePreferenceSuccess",e.UpdatePreferenceFailure="UpdatePreferenceFailure",e.ComputeIfUserBelongsToReportContext="ComputeIfUserBelongsToReportContext",e.ToggleExpandedView="ToggleExpandedView"}(r||(r={}))},yfIQ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,o=n("PbPb"),i=(n.n(o),n("OJBd")),a=(n.n(i),n("m9my")),l=(n.n(a),n("AKo7")),s=n("9g1q"),c=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d=s.b.SeriesType;!function(e){function formatNumberWithoutPrecision(e){return i(isNaN(e)?null:e).format("0,0[.][0000]")}function makeDefaultLabelCallback(e){return function(t){return formatNumberWithoutPrecision(e(t))}}function makeNumberFormatter(e,t,n){return function(){var r,a,l,s=n(this),c=function(e,t){if("percent"===t)return 100*e;var n={thousands:1e3,millions:1e6,billions:1e9};return n[t]?e/n[t]:e}(t(this),e.format);switch(null==e.precision?r=formatNumberWithoutPrecision(c):(a=c,l=e.precision,r=i(a).format("0,0"+function(){for(var e,t=0;t<l;t++)e=e?e+"0":".0";return e}())),e.format){case"percent":return r+"%";case"currency":var d="";return e.precision?("-"===r[0]&&(d="-",r=Object(o.trim)(r,"-")),d+"$"+r):("-"===s[0]&&(d="-",s=Object(o.trim)(s,"-")),d+"$"+s);default:return r}}}function makeDateFormatter(e,t,n){return function(){return l.a.makeFormattedTimestamp(e,t,n(this))}}function makeAxisLabelFormatter(e){return null==e.format||e.format,makeNumberFormatter(e,function(e){return e.value},function(e){return e.axis.defaultLabelFormatter.call(e)})}function makeSeriesNameFormatter(e,t,n,r){if(null==n)return function(e){return null==e?"Null":e.toString()};if(n.type===a.FieldType.VIEWCALC&&n.formula.form===a.FormType.DATEFUNC)switch(n.formula.funcName){case"DATEPART":return makeDatePartValueFormatter(e,t,n,r);case"DATETRUNC":return makeDateTruncValueFormatter(e,t,n,r)}switch(n.dataType){case a.DataType.DATE:case a.DataType.DATETIME:return function(e){return null==e?"Null":l.a.makeFormattedTimestamp(a.DatePart.SECOND,"hour",e)};case a.DataType.NUMBER:case a.DataType.INTEGER:case a.DataType.FLOAT:case a.DataType.BOOLEAN:default:return function(e){return null==e?"Null":e.toString()}}}function makeDatePartValueFormatter(e,t,n,r){return function(o){switch(n.varType){case a.VariableType.DISCRETE:return null==o?null:l.a.makeDatePartName(e,t,n,o,r);case a.VariableType.CONTINUOUS:return null==o?null:o.toString()}}}function makeDateTruncValueFormatter(e,t,n,r){return function(t){switch(n.varType){case a.VariableType.DISCRETE:case a.VariableType.CONTINUOUS:return l.a.makeFormattedTimestamp(l.a.getDatePart(e,n),r.xAxis.dateFormat,t)}}}function validateTooltipHighlighting(e,t,n){return t.x===e.category&&t.y===e.y&&n>1?"highlight":""}e.formatChart=function(e,t,n,r,i,a){return Object(o.merge)(n,{chart:{animation:!1,backgroundColor:null,spacing:[10,20,20,20],style:{fontFamily:"Graphik, Arial, sans-serif"}},credits:{enabled:!1}})},e.formatColors=function(e,t,n,r,o,i){var a=new Array;function appendColorFor(e){var t=o.colors.map[e];if(t)a.push(t);else{console.error("No color assigned to "+e,o.colors.map);var n=i.palette;a.push(n[Math.floor(Math.random()*n.length)])}}if(o.colors.map)switch(r.seriesType){case d.LINE:case d.BUBBLE:for(var l=0,s=r.series;l<s.length;l++)appendColorFor(s[l].name);break;case d.PAIRED_POINT:for(var u=0,p=r.categories;u<p.length;u++)appendColorFor(p[u]);break;case d.NAMED_POINT:for(var h=0,g=r.series;h<g.length;h++)for(var m=0,f=g[h].data;m<f.length;m++)appendColorFor(f[m].name)}else console.error("By the time we get to formatColors(), the series-to-color map should be backfilled"),a=i.palette.slice();return c({},n,{colors:a})},e.formatLegend=function(e,t,n,r,i,a){var l={};switch(i.legend.position){case"right":l={legend:{align:"right",verticalAlign:"top",layout:"vertical"}};break;case"top":l={legend:{align:"right",verticalAlign:"top",layout:"horizontal"}};break;case"left":l={legend:{align:"left",verticalAlign:"top",layout:"vertical"}};break;case"bottom":l={legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"}};break;case"auto":l=1===r.series.length&&a.containerHeight>200?{legend:{align:"right",verticalAlign:"top",layout:"horizontal"}}:{legend:{align:"right",verticalAlign:"top",layout:"vertical"}}}return Object(o.merge)(n,l,{legend:{enabled:i.legend.enabled,title:{enabled:i.legend.titleEnabled},itemMarginBottom:4,itemMarginTop:1}})},e.formatPieLegend=function(e,t,n,r,i,a){var l={};switch(i.legend.position){case"right":l={legend:{align:"right",verticalAlign:"middle",layout:"vertical"}};break;case"top":l={legend:{align:"center",verticalAlign:"top",layout:"horizontal"}};break;case"left":l={legend:{align:"left",verticalAlign:"middle",layout:"vertical"}};break;case"auto":case"bottom":l={legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"}}}return Object(o.merge)(n,l,{legend:{enabled:i.legend.enabled,title:{enabled:i.legend.titleEnabled},itemMarginBottom:4,itemMarginTop:1}})},e.formatPieSize=function(e,t,n,r,i,a){var l={},s=[{height:0,size:"116px"},{height:216,size:"95%"},{height:347,size:"90%"},{height:450,size:"85%"},{height:550,size:"75%"},{height:600,size:"70%"},{height:700,size:"65%"},{height:800,size:"60%"}].map(function(e){return{condition:{minHeight:e.height},chartOptions:{plotOptions:{pie:{size:e.size}}}}});return a.size&&(l={responsive:{rules:s}}),Object(o.merge)(n,l)},e.formatPlotSeriesDataLabels=function(e,t,n,r,i,a){var l=function(e){return e.y};return Object(o.merge)(n,{plotOptions:{series:{dataLabels:{enabled:i.showValues,formatter:makeNumberFormatter(i.yAxis.numberFormat,l,makeDefaultLabelCallback(l)),style:{color:"black",fontSize:"11px",fontWeight:"300",textOutline:"1px contrast"}}}}})},e.formatSharedTooltips=function(e,t,n,r,i,a){return Object(o.merge)(n,{tooltip:{shared:!0,hideDelay:0}})},e.formatIndividualTooltipContent=function(e,t,n,r,i,l){var s,c=function(e){return e.y},d=makeNumberFormatter(i.yAxis.numberFormat,c,makeDefaultLabelCallback(c)),u=(makeNumberFormatter(i.y2Axis.numberFormat,c,makeDefaultLabelCallback(c)),makeNumberFormatter({format:null,precision:2},c,makeDefaultLabelCallback(c)),(s=t.x[0].formula!==a.SystemFieldName.NAMES?t.x[0]:t.column[0]).variable.type),p=makeSeriesNameFormatter(e,t,e.buildViewCalcField(s.formula,u,s.id),i);return Object(o.merge)(n,{tooltip:{hideDelay:0,useHTML:!0,padding:0,formatter:function(){return'<div class="tooltip-container">\n            <div class="tooltip-header">\n              '+Object(o.escape)(p(this.key))+'\n            </div>\n            <table class="tooltip-body no-total">\n          \n            <tr class="tooltip-row">\n              <td class="legend single-row">\n                <span class="legend-icon" style="color:'+this.point.color+';">\u25cf</span> '+Object(o.escape)(this.series.name)+'\n              </td>\n              <td class="tooltip-label non-area-label">\n                <span class="label-text">'+Object(o.escape)(d.call(this.point))+"</span>\n              </td>\n            </tr>\n          </table></div>"}}})},e.formatSharedTooltipContent=function(e,t,n,r,i,a){var l=function(e){return e.y},s=makeNumberFormatter(i.yAxis.numberFormat,l,makeDefaultLabelCallback(l)),c=makeNumberFormatter(i.y2Axis.numberFormat,l,makeDefaultLabelCallback(l)),d=(makeNumberFormatter({format:null,precision:2},l,makeDefaultLabelCallback(l)),t.x[0]),u=d.variable.type,p=makeSeriesNameFormatter(e,t,e.buildViewCalcField(d.formula,u,d.id),i);return Object(o.merge)(n,{tooltip:{hideDelay:0,useHTML:!0,padding:0,formatter:function(e){for(var t=e.chart.hoverPoint,n=(t.x,t.y,'\n            <div class="tooltip-header">\n              '+Object(o.escape)(p(this.x))+'\n            </div>\n            <table class="tooltip-body no-total">\n          '),r=new Array,i=0,a=this.points;i<a.length;i++){var l=a[i],d=validateTooltipHighlighting(t,l,this.points.length),u=void 0,h=l.point,g=l.series;switch(l.series.yAxis.opposite){case!0:u=c.call(h);break;default:u=s.call(h)}r.push('\n              <tr class="tooltip-row '+d+'">\n                <td class="legend multi-row">\n                  <span class="legend-icon" style="color:'+h.color+';">\u25cf</span> '+Object(o.escape)(g.name)+'\n                </td>\n                <td class="tooltip-label non-area-label">\n                  <span class="label-text">'+Object(o.escape)(u)+"</span>\n                </td>\n              </tr>\n            ")}return'<div class="tooltip-container">'+n+r.join("")+"</table></div>"}}})},e.formatAreaTooltipContent=function(e,t,n,r,i,a){var l=function(e){return e.y},s=function(e){return e},c=(i.yAxis.numberFormat.precision,makeNumberFormatter(i.yAxis.numberFormat,l,makeDefaultLabelCallback(l))),d=makeNumberFormatter(i.yAxis.numberFormat,s,makeDefaultLabelCallback(s)),u=t.x[0],p=u.variable.type,h=makeSeriesNameFormatter(e,t,e.buildViewCalcField(u.formula,p,u.id),i);return Object(o.merge)(n,{tooltip:{hideDelay:0,useHTML:!0,padding:0,formatter:function(e){for(var t=e.chart.hoverPoint,n=(t.x,t.y,'\n            <div class="tooltip-header">\n              '+Object(o.escape)(h(this.x))+'\n            </div>\n            <table class="tooltip-body">\n          '),r=0,i=new Array,a=0,l=this.points;a<l.length;a++){var s,u=l[a],p=validateTooltipHighlighting(t,u,this.points.length),g=u.point,m=u.series;r+=g.y,s=c.call(g),i.push('\n              <tr class="tooltip-row '+p+'">\n                <td class="legend single-row">\n                  <span class="legend-icon" style="color:'+g.color+';">\u25cf</span> '+Object(o.escape)(m.name)+'\n                </td>\n                <td class="tooltip-label area-label">\n                  <span class="label-text">'+Object(o.escape)(s)+"</span>\n                </td>\n              </tr>")}var f='\n            <tr class="tooltip-footer">\n              <td class="footer-segment">\n                <span class="legend-icon">\u25cf</span>\n                <span class="footer-text">Total</span>\n              </td>\n              <td class="footer-segment footer-value">\n                <span class="footer-text">'+d.call(r)+'</span>\n              </td>\n              <td class="footer-segment">&nbsp;</td>\n            </tr>\n            </table>\n            <div class="total-segment-divider"></div>\n          ';return'<div class="tooltip-container">'+n+i.join("")+f+"</div>"}}})},e.formatTotalAreaTooltipContent=function(e,t,n,r,i,a){var l=function(e){return e.y},s=function(e){return e},c=function(e){return e.percentage/100},d={format:"percent",precision:i.yAxis.numberFormat.precision||2},u=makeNumberFormatter(i.yAxis.numberFormat,l,makeDefaultLabelCallback(l)),p=makeNumberFormatter(i.yAxis.numberFormat,s,makeDefaultLabelCallback(s)),h=makeNumberFormatter(d,c,makeDefaultLabelCallback(c)),g=t.x[0],m=g.variable.type,f=makeSeriesNameFormatter(e,t,e.buildViewCalcField(g.formula,m,g.id),i);return Object(o.merge)(n,{tooltip:{hideDelay:0,useHTML:!0,padding:0,formatter:function(e){var t=e.chart.hoverPoint;t.x,t.y,$(".highcharts-tooltip").show();for(var n='\n            <div class="tooltip-header">\n              '+Object(o.escape)(f(this.x))+'\n            </div>\n            <table class="tooltip-body header">\n          ',r=0,i=new Array,a=0,l=this.points;a<l.length;a++){var s,c,d=l[a],g=validateTooltipHighlighting(t,d,this.points.length),m=d.point,C=d.series;r+=m.y,s=u.call(m),c=h.call(m),i.push('\n              <tr class="tooltip-row '+g+'">\n                <td class="legend single-row">\n                  <span class="legend-icon" style="color:'+m.color+';">\u25cf</span> '+Object(o.escape)(C.name)+'\n                </td>\n                <td class="tooltip-label area-label">\n                  <span class="label-text">'+Object(o.escape)(s)+'</span>\n                </td>\n                <td class="tooltip-label area-label">\n                  <span class="percent-label">'+c+"</span>\n                </td>\n              </tr>")}var y='\n            <tr class="tooltip-footer">\n              <td class="footer-segment">\n                <span class="legend-icon">\u25cf</span>\n                <span class="footer-text">Total</span>\n              </td>\n              <td class="footer-segment footer-value">\n                <span class="footer-text">'+p.call(r)+'</span>\n              </td>\n              <td class="footer-segment">&nbsp;</td>\n            </tr>\n            </table>\n            <div class="total-segment-divider"></div>\n          ';return'<div class="tooltip-container">'+n+i.join("")+y+"</div>"}}})},e.formatPieTooltipContent=function(e,t,n,r,i,a){var l=function(e){return e.y},s=makeNumberFormatter({format:null,precision:i.yAxis.numberFormat.precision||2},l,makeDefaultLabelCallback(l)),c=t.marks.properties.color.values[0],d=c.variable.type,u=makeSeriesNameFormatter(e,t,e.buildViewCalcField(c.formula,d,c.id),i);return Object(o.merge)(n,{tooltip:{hideDelay:0,useHTML:!0,formatter:function(){return'<div class="tooltip-container">\n            <div class="tooltip-header">\n              '+Object(o.escape)(u(this.key))+'\n            </div>\n            <table class="tooltip-body no-total">\n          \n            <tr class="tooltip-row">\n              <td class="legend single-row">\n                <span class="legend-icon" style="color:'+this.point.color+';">\u25cf</span> '+Object(o.escape)(this.series.name)+'\n              </td>\n              <td class="tooltip-label non-area-label">\n                <span class="label-text">'+Object(o.escape)(s.call(this.point))+"</span>\n              </td>\n            </tr>\n          </table></div>"}}})},e.formatPieDataLabels=function(e,t,n,r,i,a){return Object(o.merge)(n,{plotOptions:{pie:{dataLabels:{format:i.pieLabelsNotPercentages?"{point.name}":"{percentage:.2f}%"}}}})},e.formatPlotSeries=function(e,t,n,r,i,a){return Object(o.merge)(n,{plotOptions:Object(o.merge)(n.plotOptions||{},{series:{animation:!1}})})},e.formatSeries=function(e,t,n,r,o,i){return c({},n,{series:r.series})},e.formatTitle=function(e,t,n,r,o,i){return c({},n,{title:{text:null}})},e.formatXAxis=function(e,t,n,r,i,s){var c=t.column.length>0?t.column[0]:t.x[0],u=e.buildViewCalcField(c.formula,c.variable.type,c.id),p="category";if(u.formula.isValid)switch(u.formula.expr.returnType){case a.DataType.DATE:case a.DataType.DATETIME:p="datetime";break;default:switch(u.varType){case a.VariableType.CONTINUOUS:p="linear"}}var h,g=[];switch(r.seriesType){case d.LINE:switch(u.varType){case a.VariableType.DISCRETE:g=r.categories;break;case a.VariableType.CONTINUOUS:g=void 0}break;case d.BUBBLE:g=r.categories}return h=Object(o.isArray)(n.xAxis)?n.xAxis:[n.xAxis],Object(o.merge)(n,{xAxis:h.map(function(t){return Object(o.merge)(t,{type:p,categories:g,title:Object(o.merge)(t.title,{margin:10}),labels:function(e,t,n,r,i,s,c){var d={rotation:s.xAxis.rotate};if(!n.formula.isValid)return d;switch(n.formula.expr.returnType){case a.DataType.DATE:case a.DataType.DATETIME:return Object(o.merge)(d,{formatter:makeDateFormatter(l.a.getDatePart(e,n),s.xAxis.dateFormat,function(e){return e.value})});case a.DataType.FLOAT:case a.DataType.INTEGER:case a.DataType.NUMBER:return null==s.xAxis.numberFormat.format||"none"===s.xAxis.numberFormat.format?d:Object(o.merge)(d,{formatter:makeNumberFormatter(s.xAxis.numberFormat,function(e){return e.value},function(e){return e.axis.defaultLabelFormatter.call(e)})});default:return d}}(e,0,u,0,0,i)})})})},e.formatStackedBarXAxisPadding=function(e,t,n,r,i,l){var s,c=t.x[0],d=t.marks.series[0].properties.color.values[0];return s=Object(o.isArray)(n.xAxis)?n.xAxis:[n.xAxis],Object(o.merge)(n,{xAxis:s.map(function(e){return c.variable.type===a.VariableType.CONTINUOUS&&null!=d&&d.formula!==a.SystemFieldName.NAMES?Object(o.merge)(e,{minPadding:.03,maxPadding:.03}):e})})},e.formatYAxis=function(e,t,n,r,i,a){var l;return l=Object(o.isArray)(n.yAxis)?n.yAxis:[n.yAxis],Object(o.merge)(n,{yAxis:l.map(function(e){return Object(o.merge)(e,{type:i.yAxis.scaleType,gridLineColor:"#f1f2f5",labels:{formatter:makeAxisLabelFormatter(i.yAxis.numberFormat)},min:i.yAxis.numberRange.min||null,max:i.yAxis.numberRange.max||null})})})},e.formatTotalAreaYAxis=function(e,t,n,r,i,a){var l;return l=Object(o.isArray)(n.yAxis)?n.yAxis:[n.yAxis],Object(o.merge)(n,{yAxis:l.map(function(e){return Object(o.merge)(e,{title:Object(o.merge)(e.title,{margin:20}),labels:{format:"{value}%"}})})})},e.formatStackedYAxis=function(e,t,n,r,i,a){var l,s=function(e){return e.total};return l=Object(o.isArray)(n.yAxis)?n.yAxis:[n.yAxis],Object(o.merge)(n,{yAxis:l.map(function(e){return Object(o.merge)(e,{title:Object(o.merge)(e.title,{margin:20}),labels:{formatter:makeAxisLabelFormatter(i.yAxis.numberFormat)},stackLabels:{enabled:i.showValues,formatter:makeNumberFormatter(i.yAxis.numberFormat,s,makeDefaultLabelCallback(s)),style:{color:"black",fontSize:"11px",fontWeight:"300",textOutline:"1px contrast"}},type:i.yAxis.scaleType,min:i.yAxis.numberRange.min||null,max:i.yAxis.numberRange.max||null})})})},e.formatComboYAxis=function(e,t,n,r,i,a){return Object(o.merge)(n,{yAxis:t.marks.series.map(function(e,t){return 0===t?{title:{margin:20},labels:{formatter:makeAxisLabelFormatter(i.yAxis.numberFormat)},type:i.yAxis.scaleType,min:i.yAxis.numberRange.min||null,max:i.yAxis.numberRange.max||null}:{opposite:!0,title:{margin:20,rotation:270},labels:{formatter:makeAxisLabelFormatter(i.y2Axis.numberFormat)},type:i.y2Axis.scaleType,min:i.y2Axis.numberRange.min||null,max:i.y2Axis.numberRange.max||null}})})},e.makeDateFormatter=makeDateFormatter,e.makeXValueFormatter=function(e,t,n,r){if(n.type===a.FieldType.VIEWCALC&&n.formula.form===a.FormType.DATEFUNC)switch(n.formula.funcName){case"DATEPART":return makeDatePartValueFormatter(e,t,n,r)}switch(n.dataType){case a.DataType.DATE:case a.DataType.DATETIME:case a.DataType.NUMBER:case a.DataType.INTEGER:case a.DataType.FLOAT:case a.DataType.BOOLEAN:return function(e){return e};default:return function(e){return null==e?"Null":e.toString()}}},e.makeSeriesNameFormatter=makeSeriesNameFormatter,e.makeDatePartValueFormatter=makeDatePartValueFormatter,e.makeDateTruncValueFormatter=makeDateTruncValueFormatter}(r||(r={}))},yqn6:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"q",function(){return c}),t.p=getDomain,t.o=extractPrimarySecondaryAxes,t.n=function(e,t){switch(e.type){case i.FieldType.DATA:return e;case i.FieldType.VIEWCALC:if(e.formula.form===i.FormType.GENERIC)throw new Error('Unexpected "Generic" ViewCalcField when trying to extract underlying data field');var n=t.getField(e.formula.fieldName);switch(n.type){case i.FieldType.DATA:return n;default:throw new Error("Unexpected model field type underlying ViewCalc field to filter on: "+n.type)}default:throw new Error("Unexpected field type to filter on: "+e.type)}},t.r=initEncoding,t.l=function(e,t,n){var r=i.Model.build([],[]),a=Object(o.f)(["line","stackedBar","hStackedBar","stackedBar100","hStackedBar100","area","totalArea","scatter"]),l=Object(o.f)(["bar","hBar"]),s=Object(o.f)(["donut","pie"]);if(a.has(e)&&a.has(t))return c.has(e)!==c.has(t)&&(n=swapAxes(n)),d.updateMarkType(n,u[t]);if(!l.has(e)||!l.has(t)){if(s.has(e)&&s.has(t))return d.updateMarkType(n,u[t],"*");if(s.has(e)||s.has(t))return initEncoding(t);var p=d.newBatchOperation(n);return c.has(e)&&(p.swapRowsColumns(),n=swapAxes(n)),"linePlusBar"===e?(a.has(t)||l.has(t))&&(n.y.length&&p.updateField({id:n.y[0].id,channel:"value"}),n.y2.length&&n.y2.forEach(function(e){(n.y||[]).some(function(t){return t.formula===e.formula})?p.removeField(e.id):p.updateField({id:e.id,channel:"value"})}),p.addField(r.valuesField,"row"),p.addFieldToSeries(r.namesField,"color"),l.has(t)&&(p.addField(r.namesField,"column"),n.x.length&&n.x[0].variable.type===i.VariableType.CONTINUOUS&&p.removeField(n.x[0].id)),c.has(t)&&p.swapRowsColumns(),p.updateMarkType(u[t])):(l.has(e)&&p.removeField(n.x[0].id),"linePlusBar"===t?(n.marks.series.length&&n.marks.series[0].properties.color.values.length&&p.removeField(n.marks.series[0].properties.color.values[0].id),p.removeField(n.y[0].id),n.value.length>0&&(p.updateField({id:n.value[0].id,channel:"row"}),p.updateMarkType(i.MarkType.Bar,n.value[0].id)),n.value.length>1&&(p.updateField({id:n.value[1].id,channel:"row"}),p.toggleDualAxisField(n.value[1].id),p.updateMarkType(i.MarkType.Line,n.value[1].id)),p.removeFields(n.value.slice(2).map(function(e){return e.id}))):l.has(t)?(p.addField(r.namesField,"column"),n.x.length&&n.x[0].variable.type===i.VariableType.CONTINUOUS&&p.removeField(n.x[0].id),c.has(t)&&p.swapRowsColumns(),p.updateMarkType(i.MarkType.Bar)):(c.has(t)&&p.swapRowsColumns(),p.updateMarkType(u[t]))),p.clearSorts(),p.complete()}if(c.has(e)!==c.has(t))return d.swapRowsColumns(n)},t.f=buildAddFieldParams,t.g=buildUpdateFieldParams,t.t=modifyFilterFieldContinuousToDiscrete,t.u=function(e,t){var n;switch(e.selection.mode){case i.SelectionMode.ALL:n={min:null,max:null};break;case i.SelectionMode.INCLUDE:n={min:Math.min.apply(Math,e.selection.selected),max:Math.max.apply(Math,e.selection.selected)};break;default:throw new Error("Unexpected SelectionMode of filter being modified: "+e.selection.mode)}var r={filterType:i.FilterType.Continuous,formula:e.formula,variable:{type:i.VariableType.CONTINUOUS},range:n,includeMin:!0,includeMax:!0,includeNulls:!1},o=e.selection.selected.slice().sort(),a=modifyFilterFieldContinuousToDiscrete(r,t),l=a.selection.mode===e.selection.mode&&a.selection.selected.sort().every(function(e,t){return e===o[t]});return{newFilter:r,equivalent:l}},t.E=function(e,t){return d.updateField(e,t)},t.D=function(e,t){return d.toggleDualAxisField(e,t)},t.b=function(e,t,n,o,a,l){var c=d.newBatchOperation(e),u="row"===n?e.y:e.x;switch(t.type){case i.FieldType.DATA:case i.FieldType.MODELNAMES:case i.FieldType.MODELVALUES:var p=c.addEncField(buildAddFieldParams(t,r.Aggregate),n);u.length&&(c.autoEncode(),c.updateMarkType(a,u[0].id),c.updateMarkType(l,p.id),c.toggleDualAxisField(p.id));break;case i.FieldType.VIEWVALUES:case i.FieldType.VIEWNAMES:break;case i.FieldType.VIEWCALC:c.updateField(s({},buildUpdateFieldParams(t,o,r.Aggregate),{channel:n})),u.length&&(c.autoEncode(),c.updateMarkType(a,u[0].id),c.updateMarkType(l,t.id),c.toggleDualAxisField(t.id))}return c.complete()},t.d=function(e,t){var n=d.newBatchOperation(e);return n.addEncFilter(t),n.complete()},t.z=function(e,t){var n=d.newBatchOperation(e);return n.removeFilter(t.formula),n.complete()},t.c=function(e,t,n,o){var a=d.newBatchOperation(e.encoding),l=e.encoding,c=e.summary,u=l.marks.series.length?void 0:"*";switch(t.type){case i.FieldType.DATA:case i.FieldType.MODELNAMES:case i.FieldType.MODELVALUES:!function(e,t,n,o,a,l,s){var c=[];switch(a){case"value":e.addEncField(buildAddFieldParams(o,r.Aggregate),a);break;case"row":case"column":var d="row"===a?t.y:t.x,u="row"===a?t.row:t.column,p=r.Continuous,h=void 0;d.length&&d[0].formula===i.SystemFieldName.NAMES?(u.length&&e.removeField(u[0].id),h=d[0].id,p=r.Discrete):d.length&&e.removeField(d[0].id),e.addEncField(buildAddFieldParams(o,p),a,h);break;case"color":n.color.length&&(c=n.colorIds[n.color[0].id]),e.removeFields(c),e.addEncFieldToSeries(buildAddFieldParams(o,r.Discrete),a,s);break;case"angle":n.angle.length&&(c=n.angleIds[n.angle[0].id]),e.removeFields(c),e.addEncFieldToSeries(buildAddFieldParams(o,r.Aggregate),a,s);break;case"size":n.size.length&&(c=n.sizeIds[n.size[0].id]),e.removeFields(c),e.addEncFieldToSeries(buildAddFieldParams(o,r.Aggregate),a,s);break;case"tooltip":e.addFieldToSeries(o,a,s)}}(a,l,c,t,n,0,u);break;case i.FieldType.VIEWVALUES:case i.FieldType.VIEWNAMES:a.updateField({id:t.id,channel:n});break;case i.FieldType.VIEWCALC:!function(e,t,n,o,a,l,c){switch(a){case"row":case"value":e.updateField(s({},buildUpdateFieldParams(o,l,r.Aggregate),{channel:"value"}));break;case"column":t.x.length&&t.x[0].formula===i.SystemFieldName.NAMES?(t.column.length&&e.removeField(t.column[0].id),e.updateField(s({},buildUpdateFieldParams(o,l,r.Discrete),{channel:a,at:t.x[0].id}))):(t.x.length&&e.removeField(t.x[0].id),e.updateField(s({},buildUpdateFieldParams(o,l,r.Continuous),{channel:a})));break;case"color":e.updateField(s({},buildUpdateFieldParams(o,l,r.Discrete),{channel:a,series:t.marks.series.length?t.marks.series[0].field:c}));break;case"size":case"angle":e.updateField(s({},buildUpdateFieldParams(o,l,r.Aggregate),{channel:a,series:t.marks.series.length?t.marks.series[0].field:c}));break;case"tooltip":e.updateField({id:o.id,channel:a,series:t.marks.series.length?t.marks.series[0].field:c})}}(a,l,0,t,n,o,u)}return a.complete()},t.v=function(e){var t=d.newBatchOperation(e),n=e.marks,r=n.series,o=n.properties,i=r.length?r[0].properties:o,a=e.y[0],l=e.value[0],s=i.color.values[0];return t.removeField(s.id),t.updateField({id:l.id,channel:"row"}),t.removeField(a.id),t.complete()},t.y=function(e,t,n){var r=i.Model.build([],[]),o=d.newBatchOperation(e);switch(o.removeField(n),t){case"donut":case"pie":case"linePlusBar":break;default:e.marks.series.length&&e.marks.series[0].properties.color.values.length&&e.marks.series[0].properties.color.values[0].id!==n||o.addFieldToSeries(r.namesField,"color")}return o.complete()},t.e=function(e,t,n){var r=d.newBatchOperation(e),o=e.row,a=e.column,l=e.value,s=e.x,c=e.y,u=e.x2,p=e.y2,h=e.marks.properties,g=h.color,m=h.angle,f=h.size,C=h.tooltip;return[o,a,l,s,u,c,p].forEach(function(e){e.forEach(function(e){var o=t.buildViewCalcField(e.formula,e.variable.type,e.id);if(o.roleType===i.RoleType.MEASURE){var a=t.getDefaultMeasureName(o);n!==a&&r.removeField(e.id)}})}),[g,m,f,C].forEach(function(e){e.values.forEach(function(e){var o=t.buildViewCalcField(e.formula,e.variable.type,e.id);if(o.roleType===i.RoleType.MEASURE){var a=t.getDefaultMeasureName(o);n!==a&&r.removeField(e.id)}})}),r.complete()},t.j=function(e){for(var t=d.newBatchOperation(e),n=0,r=e.filter;n<r.length;n++){var o=r[n];t.removeFilter(o.formula)}return t.complete()},t.k=function(e){for(var t=d.newBatchOperation(e),n=0,r=e.sorts;n<r.length;n++){var o=r[n];t.removeSort(o.source)}return t.complete()},t.A=function(e,t){return d.removeSort(e,t)},t.F=function(e,t){var n=d.newBatchOperation(e);return n.updateField(t),n.complete()},t.s=function(e){return d.load(e)},t.i=function(e,t,n){var r=extractPrimarySecondaryAxes(e),o=(r.primary,r.secondary),l=r.secondaryDiscrete;if(o.length){var s=o[0];i.SystemFieldName.NAMES===s.formula&&l.length&&(s=l[0]);var c=t.buildViewCalcField(s.formula,s.variable.type,s.id);if(c.formula.form===i.FormType.DATEFUNC){var u=c.formula.funcName+"('"+a.a.getNextDatePart(c.formula.datePart,"DATETRUNC"===c.formula.funcName,n)+"', ["+c.formula.fieldName+"])";return d.updateField(e,{id:c.id,formula:u})}}},t.h=function(e,t){if(e&&t){var n=extractPrimarySecondaryAxes(e),r=(n.primary,n.secondary),o=n.secondaryDiscrete;if(r.length){var l=r[0];i.SystemFieldName.NAMES===l.formula&&o.length&&(l=o[0]);var s=t.buildViewCalcField(l.formula,l.variable.type,l.id);if(s&&s.formula.form===i.FormType.DATEFUNC){var c="DATETRUNC"===s.formula.funcName?a.a.DateTruncHierarchy:a.a.DatePartHierarchy,d=c.indexOf(s.formula.datePart);return{back:d>0,forward:d<c.length-1}}}}return{back:!1,forward:!1}},t.w=function(e,t){var n=findSortByFields(e);if(n)return d.addSort(e,n.field.formula,i.SortType.FIELD,t,n.by);return d.load(e)},t.x=function(e,t,n){var r=findSortByFields(e),o=n?"Descending":"Ascending";if(r){var i=Object(l.a)(t,r.field),a=Object(l.a)(t,r.by),s="x"===e.marks.channel?"X-Axis":"Y-Axis";return"Sort "+i.name+" "+o+" by "+(a.isValues?s:a.name)}return"Sort "+o},t.m=function(e){if("x"===e.marks.channel)return swapAxes(e);return e},t.B=swapAxes,t.C=function(e){switch(e){case"hBar":return"bar";case"bar":return"hBar";case"stackedBar":return"hStackedBar";case"hStackedBar":return"stackedBar";case"stackedBar100":return"hStackedBar100";case"hStackedBar100":return"stackedBar100";default:return e}};var r,o=n("vqB5"),i=n("m9my"),a=(n.n(i),n("WRVt")),l=n("ieZ5"),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};!function(e){e.Discrete="DISCRETE",e.Continuous="CONTINUOUS",e.Aggregate="AGGREGATE"}(r||(r={}));var c=Object(o.f)(["hStackedBar","hBar","hStackedBar100"]),d=new i.Guide,u={line:i.MarkType.Line,bar:i.MarkType.Bar,hBar:i.MarkType.Bar,stackedBar:i.MarkType.Bar,stackedBar100:i.MarkType.Bar,hStackedBar:i.MarkType.Bar,hStackedBar100:i.MarkType.Bar,area:i.MarkType.Area,totalArea:i.MarkType.TotalArea,pie:i.MarkType.Pie,donut:i.MarkType.Donut,scatter:i.MarkType.Circle};function getDomain(e,t,n,r){var o=e.buildViewCalcField(t,n,r),i=e.onDomain(function(e){return e.onField(o)}).execute().getDomain(o.alias);if(i.type!==n)throw new Error("ViewCalcField that was hardcoded "+n+" has domain that is instead "+i.type);return i}function extractPrimarySecondaryAxes(e){return{primary:"x"===e.marks.channel?e.x:e.y,secondary:"x"===e.marks.channel?e.y:e.x,secondaryDiscrete:"x"===e.marks.channel?e.row:e.column}}function initEncoding(e){var t=i.Model.build([],[]),n=d.newBatchOperation(i.EMPTY_ENCODING);switch(e){default:case"line":n.addField(t.valuesField,"row"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.Line);break;case"hBar":n.addField(t.valuesField,"column"),n.addField(t.namesField,"row"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.Bar);break;case"bar":n.addField(t.valuesField,"row"),n.addField(t.namesField,"column"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.Bar);break;case"hStackedBar":case"hStackedBar100":n.addField(t.valuesField,"column"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.Bar);break;case"stackedBar":case"stackedBar100":n.addField(t.valuesField,"row"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.Bar);break;case"area":n.addField(t.valuesField,"row"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.Area);break;case"totalArea":n.addField(t.valuesField,"row"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.TotalArea);break;case"pie":n.updateMarkType(i.MarkType.Pie,"*");break;case"donut":n.updateMarkType(i.MarkType.Donut,"*");break;case"scatter":n.addField(t.valuesField,"row"),n.addFieldToSeries(t.namesField,"color"),n.updateMarkType(i.MarkType.Circle);break;case"linePlusBar":}return n.autoEncode(),n.complete()}function buildAddFieldParams(e,t){switch(e.dataType){case i.DataType.BOOLEAN:case i.DataType.STRING:switch(t){case r.Aggregate:return{formula:"COUNT(["+e.name+"])",variable:{type:i.VariableType.CONTINUOUS}};case r.Continuous:case r.Discrete:return{formula:"["+e.name+"]",variable:{type:i.VariableType.DISCRETE}}}break;case i.DataType.DATE:case i.DataType.DATETIME:switch(t){case r.Aggregate:return{formula:"COUNT(["+e.name+"])",variable:{type:i.VariableType.CONTINUOUS}};case r.Continuous:return{formula:"DATETRUNC('day', ["+e.name+"])",variable:{type:i.VariableType.CONTINUOUS}};case r.Discrete:return{formula:"DATEPART('year', ["+e.name+"])",variable:{type:i.VariableType.DISCRETE}}}break;case i.DataType.INTEGER:case i.DataType.FLOAT:case i.DataType.NUMBER:switch(t){case r.Aggregate:return{formula:"SUM(["+e.name+"])",variable:{type:i.VariableType.CONTINUOUS}};case r.Continuous:return{formula:"["+e.name+"]",variable:{type:i.VariableType.CONTINUOUS}};case r.Discrete:return{formula:"["+e.name+"]",variable:{type:i.VariableType.DISCRETE}}}}}function buildUpdateFieldParams(e,t,n){if(e.formula.form!==i.FormType.GENERIC){var o=t.getField(e.formula.fieldName),a={id:e.id};switch(o.dataType){case i.DataType.STRING:case i.DataType.BOOLEAN:switch(n){case r.Aggregate:"AGGFUNC"!==e.formula.form&&(a.formula="COUNT(["+o.name+"])",a.variable={type:i.VariableType.CONTINUOUS});break;case r.Continuous:case r.Discrete:a.formula="["+o.name+"]",a.variable={type:i.VariableType.DISCRETE}}break;case i.DataType.DATE:case i.DataType.DATETIME:switch(n){case r.Discrete:"DATEFUNC"===e.formula.form&&"DATEPART"===e.formula.funcName||(a.formula="DATEPART('year', ["+o.name+"])",a.variable={type:i.VariableType.DISCRETE});break;case r.Continuous:"DATEFUNC"===e.formula.form&&"DATETRUNC"===e.formula.funcName||(a.formula="DATETRUNC('day', ["+o.name+"])",a.variable={type:i.VariableType.CONTINUOUS});break;case r.Aggregate:"AGGFUNC"!==e.formula.form&&(a.formula="COUNT(["+o.name+"])",a.variable={type:i.VariableType.CONTINUOUS})}break;case i.DataType.INTEGER:case i.DataType.FLOAT:case i.DataType.NUMBER:switch(n){case r.Discrete:a.formula="["+o.name+"]",a.variable={type:i.VariableType.DISCRETE};break;case r.Continuous:a.formula="["+o.name+"]",a.variable={type:i.VariableType.CONTINUOUS};break;case r.Aggregate:"AGGFUNC"===e.formula.form?(a.formula=e.formula.funcName+"(["+o.name+"])",a.variable={type:e.varType}):(a.formula="SUM(["+o.name+"])",a.variable={type:i.VariableType.CONTINUOUS})}break;default:return{id:e.id}}return a}}function modifyFilterFieldContinuousToDiscrete(e,t){var n,r=e.range,o=r.min,a=r.max,l=null===o?-1/0:o,s=null===a?1/0:a,c=getDomain(t,e.formula,i.VariableType.CONTINUOUS,e.formula),d=l<=c.min&&c.max<=s;d?n=[]:n=getDomain(t,e.formula,i.VariableType.DISCRETE,e.formula).values.filter(function(t){return l<t&&t<s||e.includeMin&&t===e.range.min||e.includeMax&&t===e.range.max});return{filterType:i.FilterType.Discrete,formula:e.formula,variable:{type:i.VariableType.DISCRETE},selection:{selected:n,mode:d?i.SelectionMode.ALL:i.SelectionMode.INCLUDE}}}function findSortByFields(e){var t="x"===e.marks.channel?e.x[e.x.length-1]:e.y[e.y.length-1],n="x"===e.marks.channel||"*"===e.marks.channel?e.y[e.y.length-1]:e.x[e.x.length-1],r=extractPrimarySecondaryAxes(e).secondary;return"*"===e.marks.channel?(n=e.marks.properties.color.values[0],t=e.marks.properties.angle.values[0]):e.x.length&&e.marks.series.length&&r[0].formula===i.SystemFieldName.NAMES&&e.marks.series[0].properties.color.values.length&&e.marks.series[0].properties.color.values[0].formula!==i.SystemFieldName.NAMES&&(n=e.marks.series[0].properties.color.values[0]),t&&n&&t.variable.type===i.VariableType.CONTINUOUS&&n.variable.type===i.VariableType.DISCRETE?{field:n,by:t}:null}function swapAxes(e){return d.swapRowsColumns(e).encoding}},zD7f:function(e,t){e.exports='<div class="default-modal">\n  <h3 class="modal-header">Rename Report<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.$dismiss();"></a></h3>\n  <form name="saveForm" novalidate ng-submit="ctrl.saveAndClose()">\n    <div class="modal-container">\n      <label class="form-label">Name</label>\n      <span class="form-control-error" ng-show="saveForm.reportName.$invalid && !saveForm.$pristine">Must be 4-64 characters long</span>\n      <input\n        type="text"\n        name="reportName"\n        ng-model="ctrl.name"\n        autocomplete="off"\n        focus-me\n        required\n        ng-minlength="4"\n        ng-maxlength="64"\n        class="form-control next-form-control"\n        placeholder="Untitled Report"\n      />\n      <label class="form-label">Description</label>\n      <textarea ng-model="ctrl.description" class="form-control next-form-control no-resize save-modal-description" maxlength="1000"></textarea>\n    </div>\n    <div class="modal-action-bar">\n      <button type="submit" class="btn btn-lg btn-filled-primary" ng-disabled="saveForm.$invalid">Save</button>\n    </div>\n  </form>\n</div>\n'},zLSN:function(e,t,n){"use strict";var r=n("PbPb"),o=(n.n(r),n("0YuG"));n.n(o);o.module("mode.chart").service("ChartSanitizerService",["$log",function(e){var t=["number","integer","float"],n=["number","integer","float","datetime","date"],i=[];function columnExists(e,t,n){if(void 0===n&&(n=void 0),o.isString(n))n=[n];else if(o.isUndefined(n))var i=!0;return o.isArray(e)||(e=[e]),r.every(e,function(e){return r.some(t.columns,function(t){return String(t.name).toLowerCase()===String(e).toLowerCase()&&(i||r.includes(n,t.type))})})}function columnsDontExist(e,t,n){if(o.isString(n))n=[n];else if(o.isUndefined(n))var i=!0;return o.isArray(e)||(e=[e]),r.reject(e,function(e){return r.some(t.columns,function(t){return String(t.name).toLowerCase()===String(e).toLowerCase()&&(i||r.includes(n,t.type))})})}function sanitizeChart(e,t,n,r,o,a){void 0===r&&(r=void 0),void 0===o&&(o=void 0),void 0===a&&(a=!1);var l=t[e];l&&(l.label=columnExists(l.label,n)?l.label:void 0,l.g=columnExists(l.g,n)?l.g:void 0,l.gValueColumn=columnExists(l.gValueColumn,n)?l.gValueColumn:void 0,l.g||(l.gValueColumn=void 0,l.gValueFn=void 0,l.f=void 0),columnExists(l.x,n,o)||t.selectedChart!==e||(i=i.concat(l.x)),columnExists(l.y,n,r)||t.selectedChart!==e||(i=i.concat(columnsDontExist(l.y,n,r))),l.x=columnExists(l.x,n,o)?l.x:void 0,l.y=columnExists(l.y,n,r)?l.y:void 0,a&&(l.size=columnExists(l.size,n,r)?l.size:void 0))}return{sanitize:function(o,a,l){o&&a&&(sanitizeChart("bar",o,a,t),sanitizeChart("line",o,a),sanitizeChart("linePlusBar",o,a,t),sanitizeChart("area",o,a),sanitizeChart("scatter",o,a,t,n,!0),function(e,n){e.pie&&(columnExists(e.pie.label,n)||"pie"!==e.selectedChart||(i=i.concat(e.pie.label)),columnExists(e.pie.value,n,t)||"pie"!==e.selectedChart||(i=i.concat(columnsDontExist(e.pie.value,n,t))),e.pie.label=columnExists(e.pie.label,n)?e.pie.label:void 0,e.pie.value=columnExists(e.pie.value,n)?e.pie.value:void 0)}(o,a),function(e,t){if(e.pivotTable){var n=function(e){return columnExists(e,t)},o=Object.keys(e.pivotTable.filterValues).filter(function(e){return!columnExists(e,t)});["rows","columns","values","filters"].forEach(function(t){e.pivotTable[t]&&(e.pivotTable[t]=e.pivotTable[t].filter(n))}),e.pivotTable.filterValues=Object(r.omit)(e.pivotTable.filterValues,o),e.pivotTable.filterValues=Object(r.mapValues)(e.pivotTable.filterValues,function(e,n){return e.filter(function(e){return Object(r.findIndex)(t.content,[n,e])>=0})})}}(o,a),i.length&&(o.errorMsg="",r.each(r.uniq(i),function(e){o.errorMsg+='Column "'+e+'" does not exist. '}),l&&e.warn(o.errorMsg)))}}}])},zdl5:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){!function(e){e.MarkClick="MARK_CLICK",e.AxisClick="AXIS_CLICK",e.ChartClick="CHART_CLICK",e.HeaderClick="HEADER_CLICK",e.ContextClick="CONTEXT_CLICK"}(e.Type||(e.Type={})),function(e){e.BarChart="BAR_CHART",e.GroupedBarChart="GROUPED_BAR_CHART",e.LineChart="LINE_CHART",e.LinePlusBarChart="LINE_PLUS_BAR_CHART",e.AreaChart="AREA_CHART",e.TotalAreaChart="TOTAL_AREA_CHART",e.ScatterChart="SCATTER_CHART",e.BubbleChart="BUBBLE_CHART",e.PieChart="PIE_CHART",e.DonutChart="DONUT_CHART",e.PivotTable="PIVOT_TABLE"}(e.TargetType||(e.TargetType={})),function(e){e.ExploreMark="EXPLORE_MARK",e.Drilldown="DRILLDOWN",e.Keep="KEEP",e.Exclude="EXCLUDE",e.ViewData="VIEW_DATA"}(e.ContextItemType||(e.ContextItemType={}))}(r||(r={}))},zjEd:function(e,t){e.exports='<div class="editor-module editor-chart mode-object editor-multi" ng-if="showChart()">\n  <div ng-if="data && data.state != \'failed\' && data.state != \'cancelled\' && data.content" class="chart-content">\n    <div class="chart-header" ng-if="!showSettings">\n      <in-place-edit text="view.chartTitle" alt-text="Click to add title" ng-if="!showSettings" on-update="updateChartTitle" no-edit="ctrl.titleEditDisabled()"></in-place-edit>\n\n      \x3c!-- New report actions start --\x3e\n\n      <div class="new-viz-actions">\n\n        <a class="new-viz-action hide-3"\n           ng-if="viewer !== \'whiteLabel\'"\n           ng-show="isClipboardEnabled"\n           href="javascript:void(0)"\n           uib-tooltip="Copy Link to Chart"\n           copy-to-clipboard\n           clipboard-text="view._vizReportRunLink"\n           clipboard-success="copySuccess()"\n           clipboard-enabled="isClipboardEnabled">\n          <svg-icon type="\'copy-link\'"></svg-icon>\n        </a>\n\n        <a class="new-viz-action" href="javascript:void(0)" ng-if="data && viewer !== \'whiteLabel\'">\n          <kebab-menu targetable="true">\n            <li menu-clipboard-link class="show-2" link="view._vizReportRunLink" clipboard-enabled="isClipboardEnabled" clipboard-success="copySuccess()" ng-show="isClipboardEnabled">Copy Link to Big Number</li>\n            <li class="show-3 show-2 divider"></li>\n            <li menu-item="exp" ng-click="linkToQuery($event)" ng-href="{{ data.reportQueryUrl }}" ng-if="!viewer">View Query <span class="mode-show-embed-inline">in Mode</span></li>\n            <li menu-item="exp" ng-click="linkToData($event)" ng-href="{{ data.reportDataUrl }}">View Query Results <span class="mode-show-embed-inline">in Mode</span></li>\n          </kebab-menu>\n        </a>\n\n        <span class="divider" ng-if="!viewer"></span>\n\n        <a class="new-viz-action" ng-href="{{ view._vizReportRunLink }}"\n           ng-if="!viewer"\n           ng-click="linkToLightbox($event)" class="new-viz-action">\n          <svg-icon class="mode-hide-embed" type="\'toggle-expanded-view\'" uib-tooltip="Expand"></svg-icon>\n          <svg-icon class="mode-show-embed-flex-inline" type="\'toggle-expanded-view\'" uib-tooltip="Expand in Mode" tooltip-placement="left"></svg-icon>\n        </a>\n\n      </div>\n\n      \x3c!-- New report actions end --\x3e\n    </div>\n\n    <div class="chart" ng-show="!status.unavailable && !chartError">\n      <div class="chart-title clearfix" ng-show="!status.unavailable && !chartError && showSettings">\n        <in-place-edit text="view.chartTitle" alt-text="Click to add title" on-update="updateChartTitle"></in-place-edit>\n      </div>\n      <div class="chart-svg"></div>\n      <div class="ylabel" ng-show="view.selectedChart && view[view.selectedChart].ylabel"><h4>{{ view[view.selectedChart].ylabel }}</h4></div>\n      <div class="xlabel" ng-show="view.selectedChart && view[view.selectedChart].xlabel"><h4>{{ view[view.selectedChart].xlabel }}</h4></div>\n    </div>\n    <div class="chart-warning" ng-show="chartMessage && showSettings">{{ chartMessage }}</div>\n    <div class="chart-error" ng-show="status.unavailable || chartError"><h3>Sorry, unable to render a chart with the given data</h3><p ng-if="status.message">{{ status.message }}</p></div>\n  </div>\n  <div class="error-message" ng-show="data && data.state == \'failed\'"><img ng-src="{{ errorImg }}" class="error-icon"><div class="message">Looks like something went wrong with your query</div><a ng-click="linkToData($event)" ng-href="{{ data.reportDataUrl }}" target="_blank" rel="noopener" class="sub-message">Take a look at the issue</a></div>\n  <div class="error-message" ng-show="data && data.state == \'cancelled\'"><i class="icon-warning-small error-icon"></i><div class="message">This query was canceled</div><div class="sub-message"></div></div>\n  <div class="error-message" ng-show="data && data.state == \'running\'"><i class="icon-warning-small error-icon"></i><div class="message">This query is still running. Refresh the page to see the results.</div><div class="sub-message"></div></div>\n  <div class="error-message" ng-show="data && data.state != \'cancelled\' && data.state != \'failed\' && data.state != \'running\' && !data.content"><i class="icon-warning-small error-icon"></i><div class="message">This query is too large to show in browser</div><a ng-click="linkToData($event)" ng-href="{{ data.reportDataUrl }}" target="_blank" rel="noopener" class="sub-message">Access the data</a></div>\n</div>\n'},zotg:function(e,t){e.exports='<div ng-if="!ctrl.account.email_verified">\n  <h3 class="modal-header">{{ ctrl.scheduleTitle }} Schedules<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n  <div class="schedules-container">\n  <p class="full-message">You can share Mode reports via email once you verify your email address, <strong>{{ ctrl.account.email }}</strong></p>\n    <div class="center-action-bar"><a ng-href="{{ account._resource.links(\'web_settings\').href }}" target="_blank" rel="noopener" class="btn btn-filled-primary">Verify now</a></div>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-secondary" ng-click="ctrl.dismiss()">Close</button>\n  </div>\n</div>\n<div ng-if="ctrl.views.index && ctrl.account.email_verified">\n  <h3 class="modal-header">{{ ctrl.scheduleTitle }} Schedules<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n  <div class="schedules-actions" ng-if="ctrl.canCreateSchedule();">\n    <div class="schedules-action-item">\n      <a href="#" ng-click="ctrl.newSchedule();" class="create-schedules-link"><i class="icon-modal-add align-md-icon"></i>Create New Schedule</a>\n    </div>\n  </div>\n  <div class="schedules-scroll">\n    <ul class="schedules-list">\n      <li ng-repeat="schedule in ctrl.schedules" class="clearfix schedule-list-item">\n        <div class="schedule-action">\n          <button\n            ng-if="schedule.savedSubscriptions[0] && !ctrl.isSlackSchedule(schedule.savedSubscriptions[0])"\n            class="btn btn-link btn-strong schedule-action-item"\n            ng-class="{\'btn-success-hover\':schedule.userMembership}"\n            ng-click="ctrl.toggleSubscription($event, schedule.savedSubscriptions[0], schedule.userMembership)">\n              <span class="show-hover">{{ schedule.userMembership ? \'Unsubscribe\' : \'Subscribe\' }}</span>\n              <span class="hide-hover ">{{ schedule.userMembership ? \'Subscribed\' : \'Subscribe\' }}</span>\n          </button>\n          <div uib-dropdown class="schedule-action-item dropdown">\n            <a uib-dropdown-toggle href="#" class="dropdown-toggle"><i class="icon-settings-mini align-md-icon"></i></a>\n            <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right pull-right">\n              <li><a href="#" ng-click="ctrl.editSchedule(schedule, schedule.savedSubscriptions[0] ? schedule.savedSubscriptions[0] : undefined);">Edit Schedule</a></li>\n              <li ng-if="schedule._resource.hasForm(\'destroy\')">\n                <a href="#"\n                  confirm-modal="Are you sure you want to delete this schedule?"\n                  confirm-modal-on-confirm="ctrl.deleteSchedule(schedule);"\n                  confirm-modal-button-confirm="Delete Schedule"\n                  confirm-modal-title="Delete Schedule">\n                  Delete Schedule\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div ng-if="!ctrl.isSlackSchedule(schedule.savedSubscriptions[0])" class="schedule-info">\n          <div class="desc" ng-class="{\'desc-only\':!schedule.savedSubscriptions.length}" title="{{ schedule.frequencyText; }}">{{ schedule.frequencyText }}</div>\n          <div class="name" ng-if="schedule.savedSubscriptions.length">\n            <i class="icon-email-subscription-gray align-md-icon"></i><ng-pluralize count="schedule.savedSubscriptions[0].email_subscriber_count" when="{\'0\': \'0 Subscribers\', \'one\': \'1 Subscriber\', \'other\': \'{} Subscribers\'}">\n            </ng-pluralize>\n          </div>\n        </div>\n        <div ng-if="ctrl.isSlackSchedule(schedule.savedSubscriptions[0])" class="schedule-info">\n          <div class="desc" ng-class="{\'desc-only\':!schedule.savedSubscriptions.length}" title="{{ schedule.frequencyText; }}">{{ schedule.frequencyText }}</div>\n          <div class="name" ng-if="schedule.savedSubscriptions.length">\n            <i class="icon-slack align-md-icon"></i>{{schedule.savedSubscriptions[0].savedSlackMemberships[0].getDisplayName()}}\n          </div>\n        </div>\n      </li>\n    </ul>\n    <p class="icon-logo-animated schedule-loading" ng-show="ctrl.initializingSchedules"></p>\n    <p class="empty-msg" ng-show="!ctrl.schedules.length && !ctrl.initializingSchedules">This {{ ctrl.scheduleName }} has not been scheduled yet.</p>\n  </div>\n  <div class="modal-action-bar">\n    <button class="btn btn-lg btn-filled-primary" ng-click="ctrl.dismiss()">Done</button>\n  </div>\n</div>\n<div ng-if="ctrl.views.edit && ctrl.account.email_verified">\n  <h3 class="modal-header">{{ ctrl.schedule._new_reportSchedule ? \'Create New\' : \'Edit\' }} Schedule<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n  <form name="ctrl.scheduleEditForm" method="post" ng-submit="ctrl.saveOrNext();">\n    <div class="schedules-container">\n      <div class="schedules-scroll scroll-lg no-margin with-padding">\n        \x3c!-- //// Schedule section --\x3e\n        <div>\n          <h3 class="modal-heading">1. When should the report refresh?</h3>\n          <div class="schedule-form-item">\n            <select\n              name="freq"\n              class="form-control form-control-sm form-control-block"\n              ng-model="ctrl.schedule.cron.freq"\n              ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.freq.options"\n              ng-change="ctrl.resetMinutes()">\n            </select>\n          </div>\n          <div class="schedule-form-item" ng-show="ctrl.schedule.cron.freq===\'hourly\' && !ctrl.editForm.cron.minute">\n            This schedule will run every hour at the top of the hour.\n          </div>\n          <div class="schedule-form-item clearfix" ng-show="ctrl.schedule.cron.freq===\'weekly\'">\n            <label class="form-control-label" for="weekly">On</label>\n            <select name="weekly" class="form-control form-control-sm form-control-block" ng-model="ctrl.schedule.cron.day_of_week" ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.day_of_week.options">\n            </select>\n          </div>\n\n          <div class="schedule-form-item clearfix" ng-show="ctrl.schedule.cron.freq===\'monthly\'">\n            <label class="form-control-label" for="day">On the</label>\n            <select name="day" class="form-control form-control-sm form-control-block" ng-model="ctrl.schedule.cron.day_of_month" ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.day_of_month.options">\n            </select>\n          </div>\n\n          \x3c!-- Hour settings --\x3e\n          <div class="schedule-form-item clearfix" ng-show="ctrl.hourlySettings() && !ctrl.editForm.cron.minute">\n            <div class="schedule-col schedule-col-30 pad-right">\n              <select name="daily" class="form-control form-control-sm form-control-block" ng-model="ctrl.schedule.cron.hour" ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.hour.options">\n              </select>\n            </div>\n            <div class="schedule-col schedule-col-70">\n              <select class="form-control form-control-sm form-control-block" ng-model="ctrl.schedule.cron.time_zone" ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.time_zone.options">\n              </select>\n            </div>\n          </div>\n          \x3c!-- Hour and minute settings --\x3e\n          <div class="schedule-form-item clearfix" ng-show="ctrl.hourlySettings() && ctrl.editForm.cron.minute">\n            <div class="schedule-col schedule-col-40 pad-right">\n              <label class="form-control-label">Time</label>\n              <div class="btn-group btn-group-block">\n                <div class="btn btn-sm btn-select">\n                  {{ ctrl.schedule.hourNameFromCron() }}\n                  <div class="icon-dropdown-arrow"></div>\n                  <select name="daily" class="form-control form-control-sm form-control-block schedule-hidden-form" ng-model="ctrl.schedule.cron.hour" ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.hour.options">\n                  </select>\n                </div>\n                <div class="btn btn-sm btn-select">\n                  {{ ctrl.schedule.minuteNameFromCron() }}\n                  <div class="icon-dropdown-arrow"></div>\n                  <select name="daily" class="form-control form-control-sm form-control-block schedule-hidden-form" ng-model="ctrl.schedule.cron.minute" ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.minute.options">\n                  </select>\n                </div>\n              </div>\n            </div>\n            <div class="schedule-col schedule-col-60">\n              <label class="form-control-label" for="time_zone">Time Zone</label>\n              <select name="time_zone" class="form-control form-control-sm form-control-block" ng-model="ctrl.schedule.cron.time_zone" ng-options="opt[1] as opt[0] for opt in ctrl.editForm.cron.time_zone.options">\n              </select>\n            </div>\n          </div>\n          <div class="schedule-form-item clearfix" ng-show="!ctrl.hourlySettings() && ctrl.editForm.cron.minute">\n            <div class="clearfix">\n              <div class="schedule-col schedule-col-30 pad-right"><label class="form-control-label">Start time</label></div>\n              <div class="schedule-col schedule-col-70"></div>\n            </div>\n            <div class="schedule-col schedule-col-30 pad-right">\n              <select name="daily"\n                      class="form-control form-control-sm form-control-block"\n                      ng-model="ctrl.schedule.cron.minute"\n                      ng-options="opt[1] as opt[0] for opt in ctrl.minuteOptions()">\n              </select>\n            </div>\n            <div class="schedule-col schedule-col-70">\n              <label class="schedule-label-inline">minutes past the hour</label>\n            </div>\n          </div>\n        </div>\x3c!-- //// End Schedule section --\x3e\n        \x3c!-- //// Subscription section --\x3e\n        <div>\n          <hr class="schedules-break" />\n          <h3 class="modal-heading">2. Where should the report be delivered?</h3>\n          <div class="schedule-form-item clearfix">\n            <select name="notifications" class="form-control form-control-block form-control-sm" ng-model="ctrl.notify.type" ng-options="opt[1] as opt[0] for opt in ctrl.notify.options"></select>\n          </div>\n          <p class="schedules-label" ng-if="ctrl.notify.type === \'email\' && (ctrl.subscription.data_previews_enabled || ctrl.subscriptionEditForm.csv_attachments_enabled || ctrl.subscriptionEditForm.pdf_attachments_enabled)">Attachments</p>\n          <div class="schedule-form-item clearfix" ng-if="ctrl.notify.type === \'email\'">\n            <span class="checkbox-icon schedule-checkbox-inline" ng-if="ctrl.subscriptionEditForm.data_previews_enabled">\n              <input id="attachmentTable" type="checkbox" ng-model="ctrl.subscription.data_previews_enabled">\n              <label for="attachmentTable" class="inline-icon icon-editor-checkbox-light-unchecked">Report preview</label>\n            </span>\n            <span class="checkbox-icon schedule-checkbox-inline" ng-if="ctrl.subscriptionEditForm.data_tables_enabled">\n              <input id="attachmentHTMLTable" type="checkbox" ng-model="ctrl.subscription.data_tables_enabled">\n              <label for="attachmentHTMLTable" class="inline-icon icon-editor-checkbox-light-unchecked">HTML tables</label>\n            </span>\n            <span class="checkbox-icon schedule-checkbox-inline" ng-if="ctrl.subscriptionEditForm.csv_attachments_enabled">\n              <input id="attachmentCSV" type="checkbox" ng-model="ctrl.subscription.csv_attachments_enabled">\n              <label for="attachmentCSV" class="inline-icon icon-editor-checkbox-light-unchecked">CSV</label>\n            </span>\n            <span class="checkbox-icon schedule-checkbox-inline" ng-if="ctrl.subscriptionEditForm.pdf_attachments_enabled">\n              <input id="attachmentPDF" type="checkbox" ng-model="ctrl.subscription.pdf_attachments_enabled">\n              <label for="attachmentPDF" class="inline-icon icon-editor-checkbox-light-unchecked">PDF</label>\n            </span>\n          </div>\n          <div class="schedule-form-item clearfix" ng-if="ctrl.notify.type === \'slack\'" ng-mouseleave="ctrl.slackScheduleTooltipOpened=false">\n            <label class="form-control-label">Channel</label>\n            <i class="icon-info slack-info-tooltip-icon"\n              ng-mouseover="ctrl.slackScheduleTooltipOpened=true"\n              uib-tooltip-html="ctrl.slackShareHelpText"\n              tooltip-placement="bottom-left"\n              tooltip-trigger="none"\n              tooltip-is-open="ctrl.slackScheduleTooltipOpened"\n              tooltip-class="wrapping-tooltip slack-share-tooltip"></i>\n            <ui-select ng-model="ctrl.schedule.slackChannel" theme="bootstrap" remove-selected="false">\n              <ui-select-match ng-click="ctrl.focusSlackChannelsInput()" placeholder="{{ctrl.getSlackPlaceholder($select.selected)}}">{{ $select.selected.channelName }}</ui-select-match>\n              <ui-select-choices\n                repeat="item in (ctrl.slackChannels | filter: $select.search) track by $index"\n                refresh="ctrl.buildChannelsList($select)" refresh-delay="0">\n                <div ng-bind-html="item.channelName | highlight: $select.search"></div>\n              </ui-select-choices>\n            </ui-select>\n          </div>\n        </div>\x3c!-- //// End subscription section --\x3e\n        \x3c!-- //// Parameters section --\x3e\n        <div ng-show="!ctrl.scheduleParamsEmpty();">\n          <hr class="schedules-break" />\n          <h3 class="modal-heading">3. What would you like your parameters set to?</h3>\n          <div class="schedule-form-item" ng-repeat="(name, param) in ctrl.editForm.params">\n            <label class="form-control-label">{{param.label || name}}</label>\n            <select class="form-control form-control-block form-control-sm" ng-if="param.type===\'select\' && param.options" ng-model="ctrl.schedule.params[name]" ng-options="opt[1] as opt[0] for opt in param.options"></select>\n            <input class="form-control form-control-block form-control-sm" type="text" ng-if="param.type===\'text\' || param.type === \'date\'" ng-model="ctrl.schedule.params[name]">\n            <select class="form-control form-control-block form-control-sm"\n              ng-if="param.type===\'multiselect\' && param.options"\n              multiselect-dropdown="{{name}}_schedule"\n              append-to-body="true"\n              id="report_run_params_{{ name }}_schedule"\n              block="true"\n              classes="form-control-block form-control-sm"\n              dropdown-classes="modal-dropdown"\n              select-all="true"\n              select-all-text="(Select All)"\n              select-all-value="string:all"\n              auto-height="300"\n              multiple="multiple"\n              multiselect-filter="true"\n              init-without-select-all="true"\n              ng-model="ctrl.schedule.params[name]"\n              ng-options="opt[1] as opt[0] for opt in param.options">\n            </select>\n          </div>\n        </div>\n        \x3c!-- //// End parameters section --\x3e\n        <div class="schedule-form-section-end" ng-if="ctrl.editForm.cron.minute">\n          <div class="info-banner">{{ ctrl.infoText() }}</div>\n          <div class="info-action" ng-if="ctrl.notify.type === \'email\'"><a href="#" ng-click="ctrl.testEmail(ctrl.subscription);" class="info-link">Send a test email</a> to {{ ctrl.account.email }}</div>\n        </div>\n      </div>\n    </div>\n    <div class="modal-action-bar-container">\n      <div class="modal-action-bar">\n        <a href="#" ng-if="!ctrl.startSchedule" class="btn btn-lg btn-filled-secondary pull-left" ng-click="ctrl.setView(\'index\');"><i class="icon-caret-right-white back-icon"></i>Back</a>\n        <a href="#"\n          class="btn btn-lg btn-secondary btn-danger-light pull-left"\n          ng-if="!ctrl.schedule._new_reportSchedule && ctrl.startSchedule"\n          confirm-modal="Are you sure you want to delete this schedule?"\n          confirm-modal-on-confirm="ctrl.deleteSchedule(ctrl.schedule);"\n          confirm-modal-button-confirm="Delete Schedule"\n          confirm-modal-title="Delete Schedule">\n          Delete\n        </a>\n        <button type="submit" class="btn btn-lg btn-filled-primary">{{ ctrl.notify.type === \'none\' || ctrl.notify.type === \'slack\' ? (ctrl.schedule._new_reportSchedule ? \'Create Schedule\' : \'Update Schedule\') : (ctrl.schedule._new_reportSchedule ? \'Create + Manage Subscribers\' : (ctrl.scheduleEditForm.$dirty ?  \'Update + Manage Subscribers\' : \'Manage Subscribers\')) }}</button>\n      </div>\n    </div>\n  </form>\n</div>\n<div ng-if="ctrl.views.users && ctrl.account.email_verified">\n  <h3 class="modal-header">Manage Subscribers<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n  <div class="schedules-container">\n    <form name="ctrl.searchForm" class="schedule-form-item first-form clearfix">\n      <div class="email-validation-element">\n        <input id="userSearch" name="email" type="text" autocomplete="off" placeholder="Add a recipient..." class="form-control" ng-model="ctrl.userSearch.query" ng-model-options="{ debounce: 200 }" domain-algolia-validation organization="{{ ctrl.owner.token }}" domains="{{ ctrl.owner.authorized_domains.join(\',\') }}" focus-me focus-observer="ctrl.userSearch.focus" />\n        <div class="email-error no-icon" ng-show="ctrl.searchForm.email.$error.domainAlgolia && !ctrl.searchForm.email.$error.networkError">\n          <p>\n            Emails may only be sent to members of your organization or these authorized domains: {{ ctrl.owner.authorized_domains.join(\', \') }}\n            <a ng-if="!ctrl.report.canToggleSharing" href="https://help.modeanalytics.com/articles/who-can-receive-emails/" target="_blank" rel="noopener">Learn about authorized domains</a>\n          </p>\n          <div ng-if="ctrl.report.canToggleSharing">\n            <p>\n              Authorize this domain or enable External Sharing for this report to add this subscriber.\n              <a href="https://help.modeanalytics.com/articles/who-can-receive-emails/" target="_blank" rel="noopener">Learn about authorized domains</a>  |\n              <a href="https://help.modeanalytics.com/articles/sharing-reports-outside-your-organization" target="_blank" rel="noopener">Learn about External Sharing</a>\n            </p>\n          </div>\n        </div>\n        <div class="email-error no-icon" ng-show="ctrl.searchForm.email.$valid && !ctrl.userSearch.users.length && !(ctrl.subscriptionMemberships | filter:{inSearch:false} | filter:ctrl.userSearch.query).length && !ctrl.validEmails.length">\n          \x3c!-- this will need to be refactored into the above error condition at some point, but the huge conditional will need to be figured out to do so --\x3e\n          <p>\n            No results found. Emails may only be sent to members of your organization or these authorized domains: {{ ctrl.owner.authorized_domains.join(\', \') }}\n            <a ng-if="!ctrl.report.canToggleSharing" href="https://help.modeanalytics.com/articles/who-can-receive-emails/" target="_blank" rel="noopener">Learn about authorized domains</a>\n          </p>\n          <div ng-if="ctrl.report.canToggleSharing">\n            <p>\n              Authorize this domain or enable External Sharing for this report to add this subscriber.\n              <a href="https://help.modeanalytics.com/articles/who-can-receive-emails/" target="_blank" rel="noopener">Learn about authorized domains</a>  |\n              <a href="https://help.modeanalytics.com/articles/sharing-reports-outside-your-organization" target="_blank" rel="noopener">Learn about External Sharing</a>\n            </p>\n          </div>\n        </div>\n        <div class="email-error" ng-show="ctrl.searchForm.email.$error.domainAlgolia && ctrl.searchForm.email.$error.networkError"><i class="icon-warning-small align-md-icon"></i>There was a problem with the request. Please try again</div>\n      </div>\n    </form>\n    <div class="schedules-scroll scroll-lg no-margin with-padding" ng-class="{\'with-footer\': ctrl.hasExternalEmails}">\n      <ul class="user-list">\n        <li ng-if="ctrl.userSearch.query && ctrl.searchForm.email.$valid" ng-repeat="email in ctrl.validEmails">\n          <a href="#" class="clearfix" ng-click="ctrl.toggleMembership(email)">\n            <div class="user-info">\n              <div ng-if="ctrl.isOutsideDomain(email, this)" class="user-avatar"><div class="mode-avatar mode-avatar-initials mode-avatar-external mode-icon-44"><i class="icon-external-sharing align-md-icon"></i></div></div>\n              <div ng-if="!ctrl.isOutsideDomain(email, this)" class="user-avatar"><div class="mode-avatar mode-avatar-initials mode-avatar-email mode-icon-44"><i class="icon-email-subscription-gray align-md-icon"></i></div></div>\n              <div class="email email-only">{{ email }}</div>\n            </div>\n            <div class="action-bar">\n              <span class="show-hover link-color">add</span>\n            </div>\n          </a>\n        </li>\n        <li ng-show="ctrl.searchForm.email.$valid" ng-repeat="membership in ctrl.subscriptionMemberships | filter:{inSearch:false} | filter:ctrl.userSearch.query">\n          <a href="#" class="clearfix" ng-class="{faded: !ctrl.report.shared && ctrl.isOutsideDomain(membership.email)}" ng-click="ctrl.toggleMembership(membership.email, membership)">\n            <div class="user-info">\n              <div ng-if="ctrl.isOutsideDomain(membership.email, this)" class="user-avatar"><div class="mode-avatar mode-avatar-initials mode-avatar-external mode-icon-44"><i class="icon-external-sharing align-md-icon"></i></div></div>\n              <div ng-if="!ctrl.isOutsideDomain(membership.email, this)" class="user-avatar"><div class="mode-avatar mode-avatar-initials mode-avatar-email mode-icon-44"><i class="icon-email-subscription-gray align-md-icon"></i></div></div>\n              <div class="email email-only">{{ membership.email }}</div>\n            </div>\n            <div class="action-bar pull-right">\n              <i class="hide-hover align-md-icon"\n                 ng-class="{\'icon-success-check-color\': ctrl.report.shared || !ctrl.isOutsideDomain(membership.email, this), \'icon-fail-color\': !ctrl.report.shared && ctrl.isOutsideDomain(membership.email, this)}"></i>\n              <span class="show-hover link-color">Remove</span>\n            </div>\n          </a>\n        </li>\n        <li ng-if="ctrl.searchForm.email.$valid" ng-repeat="user in ctrl.userSearch.users | orderBy:[\'membership\', ctrl.isCurrentUser(ctrl.account)]">\n          <a href="#" class="clearfix" ng-click="ctrl.toggleMembership(user.email, user.membership)">\n            <div class="user-info">\n              <mode-avatar options="user.avatar" size="44" class="user-avatar"></mode-avatar>\n              <div class="username">{{ user.name }}</div>\n              <div class="email">{{ user.email }}</div>\n            </div>\n            <div class="action-bar">\n              <i class="hide-hover icon-success-check-color align-md-icon" ng-if="user.membership"></i><span class="show-hover link-color">{{ user.membership ? \'Remove\' : \'Add\' }}</span>\n            </div>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="email-external" ng-if="ctrl.hasExternalEmails">\n    <span>One or more recipients are outside your Mode organization. <a href="https://help.modeanalytics.com/articles/sharing-reports-outside-your-organization" target="_blank" rel="noopener">Learn more</a></span>\n  </div>\n  <div class="modal-action-bar">\n    <a href="#" ng-if="!ctrl.startSchedule" class="btn btn-lg btn-filled-secondary pull-left" ng-click="ctrl.editOrNew()"><i class="icon-caret-right-white back-icon"></i>Back</a>\n    <button ng-click="ctrl.dismiss()" class="btn btn-lg btn-filled-primary">Done</button>\n  </div>\n</div>\n<div ng-if="ctrl.views.loading && ctrl.account.email_verified">\n  <h3 class="modal-header">{{ ctrl.scheduleTitle }} Schedules<a href="#" class="modal-close icon-x-large-white" ng-click="ctrl.dismiss();"></a></h3>\n  <div class="schedules-container">\n    <div class="schedules-list-loading">\n      <i class="icon-logo-animated schedule-loading"></i>\n    </div>\n  </div>\n</div>\n'},zsFr:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"k",function(){return i}),n.d(t,"g",function(){return a}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"f",function(){return u}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return h});var r='\n  <svg class="viz-action-icon" viewBox="0 0 24 24">\n    <g>\n      <path class="svg-icon-fill" fill-rule="nonzero" d="M9.85517224,14.8519271 L14.7821516,9.87951573 C14.9765155,9.68335952 14.9750626,9.36678036 14.7789064,9.17241639 C14.5827502,8.97805243 14.266171,8.97950533 14.0718071,9.17566154 L9.14482776,14.1480729 C8.95046379,14.3442291 8.95191669,14.6608083 9.14807291,14.8551722 C9.34422912,15.0495362 9.66080827,15.0480833 9.85517224,14.8519271 Z"/>\n      <path class="svg-icon-fill" fill-rule="nonzero" d="M17.9852814,5.98528137 C19.5473785,7.54737854 19.4530062,10.1744108 17.7744949,11.8529221 L11.6960678,17.9313492 C10.0175565,19.6098605 7.39052429,19.7042328 5.82842712,18.1421356 C4.26632996,16.5800385 4.36070226,13.9530062 6.03921356,12.2744949 L12.1176407,6.19606781 C13.796152,4.51755651 16.4231842,4.42318421 17.9852814,5.98528137 Z M17.225478,6.74508476 C16.0539051,5.57351189 14.0836309,5.64429112 12.8247475,6.90317459 L6.74632034,12.9816017 C5.48743687,14.2404852 5.41665764,16.2107594 6.58823052,17.3823322 C7.75980339,18.5539051 9.73007755,18.4831259 10.988961,17.2242424 L17.0673882,11.1458153 C18.3262716,9.8869318 18.3970509,7.91665764 17.225478,6.74508476 Z M9.83823052,8.47547798 L8.31862373,9.99508476 L9.02573052,10.7021915 L10.5453373,9.18258476 L9.83823052,8.47547798 Z M14.787978,13.4252255 L13.2683712,14.9448322 L13.975478,15.651939 L15.4950848,14.1323322 L14.787978,13.4252255 Z"/>\n    </g>\n  </svg>\n',o='\n  <svg class="viz-action-icon" viewBox="0 0 24 24">\n    <g fill="none">\n      <path class="svg-icon-fill" fill-rule="nonzero" d="M10,15 L10.4160437,15 C10.5720248,15.3570028 10.7684891,15.6922704 10.9996338,16 L6,16 C5.44771525,16 5,15.5522847 5,15 L5,7 C5,6.44771525 5.44771525,6 6,6 L16,6 C16.5522847,6 17,6.44771525 17,7 L17,8.41604369 C16.6824976,8.277321 16.3478037,8.17061854 16,8.10001812 L16,7 L6,7 L6,15 L7,15 L7,10.4910052 C7,10.2198305 7.23193359,10 7.5,10 C7.77614237,10 8,10.2278805 8,10.4910052 L8,15 L9,15 L9,9.50342274 C9,9.22539004 9.23193359,9 9.5,9 C9.77614237,9 10,9.23290253 10,9.50342274 L10,15 Z"/>\n      <path class="svg-icon-fill" fill-rule="nonzero" d="M17.6854269,15.9645781 L20.2382268,18.517378 C20.4372837,18.7164349 20.4372837,19.0391699 20.2382268,19.2382268 L20.2382268,19.2382268 C20.0391699,19.4372837 19.7164349,19.4372837 19.517378,19.2382268 L16.8345722,16.555421 C16.2850693,16.8395357 15.6612739,17 15,17 C12.790861,17 11,15.209139 11,13 C11,10.790861 12.790861,9 15,9 C17.209139,9 19,10.790861 19,13 C19,14.1755878 18.4928623,15.2327272 17.6854269,15.9645781 Z M15,16 C16.6568542,16 18,14.6568542 18,13 C18,11.3431458 16.6568542,10 15,10 C13.3431458,10 12,11.3431458 12,13 C12,14.6568542 13.3431458,16 15,16 Z"/>\n    </g>\n  </svg>\n',i='\n  <svg class="viz-action-icon" viewBox="0 0 24 24">\n    <g id="Group" transform="translate(6.5, 4.5)">\n      <circle class="svg-icon-fill" id="Oval-Copy-3" cx="1.5" cy="1.5" r="1.5"></circle>\n      <circle class="svg-icon-fill" id="Oval-Copy-4" cx="1.5" cy="6.5" r="1.5"></circle>\n      <circle class="svg-icon-fill" id="Oval-Copy-5" cx="1.5" cy="11.5" r="1.5"></circle>\n    </g>\n  </svg>\n',a='\n  <svg class="viz-action-icon" viewBox="0 0 24 24">\n    <g fill="none">\n      <path class="svg-icon-stroke" d="M10.50714 12.5L13.4797781 12.5 13.4797781 18.5 10.50714 18.5 10.50714 12.5zM5.99879246 7.85033676C5.00947566 6.68012419 5.56108872 5.5 7.09709541 5.5L16.8898227 5.5C18.4230741 5.5 18.9768831 6.68078583 17.9881257 7.85033676L13.2118082 13.5 10.7751099 13.5 5.99879246 7.85033676zM6 8C6 8 12.2785868 10.25 18 8"/>\n    </g>\n  </svg>\n',l='\n  <svg class="viz-action-icon" viewBox="0 0 24 24">\n    <g stroke="none" fill="none" fill-rule="evenodd" transform="translate(4, 8)">\n      <path class="svg-icon-fill" d="M5,4 L5,1.42101643 C5,0.859157662 4.66714268,0.722079464 4.25654238,1.09416949 L1.24119185,3.82670971 C0.836135917,4.19377537 0.830591547,4.80207687 1.24119185,5.17416689 L4.25654238,7.90670711 C4.66159831,8.27377278 5,8.13246278 5,7.57986017 L5,5 L14.5,5 C14.7761424,5 15,4.77614237 15,4.5 C15,4.22385763 14.7761424,4 14.5,4 L5,4 Z"></path>\n    </g>\n  </svg>\n',s='\n  <svg class="viz-action-icon" viewBox="0 0 24 24">\n    <g stroke="none" fill="none" fill-rule="evenodd" transform="translate(4, 8)">\n      <path class="svg-icon-fill" d="M5,4 L5,1.42101643 C5,0.859157662 4.66714268,0.722079464 4.25654238,1.09416949 L1.24119185,3.82670971 C0.836135917,4.19377537 0.830591547,4.80207687 1.24119185,5.17416689 L4.25654238,7.90670711 C4.66159831,8.27377278 5,8.13246278 5,7.57986017 L5,5 L14.5,5 C14.7761424,5 15,4.77614237 15,4.5 C15,4.22385763 14.7761424,4 14.5,4 L5,4 Z" id="Combined-Shape" transform="translate(7.967659, 4.498111) scale(-1, 1) translate(-7.967659, -4.498111) "></path>\n    </g>\n  </svg>\n',c='\n  <svg class="viz-action-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <g fill="none" fill-rule="evenodd">\n      <circle cx="7" cy="7" r="7" transform="translate(5 5)"/>\n      <circle cx="12" cy="12" r="6.5" class="svg-icon-stroke" />\n      <g class="svg-icon-fill" transform="rotate(45 -1.657 17.657)">\n        <rect width="2" height="8" x="3" rx="1"/>\n        <rect width="2" height="8" x="3" rx="1" transform="rotate(90 4 4)"/>\n      </g>\n    </g>\n  </svg>\n',d='\n  <svg class="viz-action-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <g fill="none" fill-rule="evenodd">\n      <g class="svg-icon-fill" transform="rotate(-45 16.182 -10.167)">\n        <rect width="1" height="5" x="2" rx=".5"/>\n        <rect width="1" height="5" x="2" rx=".5" transform="rotate(90 2.5 2.5)"/>\n      </g>\n      <path class="svg-icon-stroke" d="M6.09709541 5.5L12.6941424 5.5 12.1732788 6.27812979C11.7365382 6.93058637 11.5 7.69703581 11.5 8.5 11.5 9.76058583 12.0863865 10.9231039 13.067989 11.6760291L13.4840329 11.99515 12.2118082 13.5 9.77510992 13.5 4.99879246 7.85033676C4.00947566 6.68012419 4.56108872 5.5 6.09709541 5.5zM9.50714002 12.5L12.4797781 12.5 12.4797781 18.5 9.50714002 18.5 9.50714002 12.5zM5 8C5 8 7.91050779 9.04301219 11.5740417 8.99862225"/>\n      <circle cx="15.5" cy="8.5" r="4" class="svg-icon-stroke" />\n    </g>\n  </svg>\n',u='\n  <svg class="viz-action-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">\n    <defs>\n      <path id="explore-mini-a" d="M4,7 L4,12 L0.651453758,12 C0.099467622,12 -0.147386203,11.590829 0.0902796721,11.1061002 L1.66524365,7.8938998 C1.90730189,7.40021257 2.55035966,7 3.09775846,7 L4,7 Z"/>\n      <path id="explore-mini-b" d="M14,7 L14,12 L10.6514538,12 C10.0994676,12 9.8526138,11.590829 10.0902797,11.1061002 L11.6652436,7.8938998 C11.9073019,7.40021257 12.5503597,7 13.0977585,7 L14,7 Z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd" transform="translate(5 4)">\n      <use xlink:href="#explore-mini-a"/>\n      <path class="svg-icon-stroke" d="M3.5,7.5 L3.09775846,7.5 C2.74057165,7.5 2.27199613,7.79215522 2.11418435,8.11401851 L0.539220371,11.3262189 C0.462637625,11.4824124 0.473543604,11.5 0.651453758,11.5 L3.5,11.5 L3.5,7.5 Z"/>\n      <g transform="matrix(-1 0 0 1 24 0)">\n        <use xlink:href="#explore-mini-b"/>\n        <path class="svg-icon-stroke" d="M13.5,7.5 L13.0977585,7.5 C12.7405716,7.5 12.2719961,7.79215522 12.1141843,8.11401851 L10.5392204,11.3262189 C10.4626376,11.4824124 10.4735436,11.5 10.6514538,11.5 L13.5,11.5 L13.5,7.5 Z"/>\n      </g>\n      <path class="svg-icon-stroke" d="M3.5,11.5 L10.5,11.5 L10.5,6.40692281 C10.5,5.40511954 10.049884,3.84045259 9.51507657,2.98834134 L8.7053284,1.69816564 C7.71994928,0.128156319 6.24126392,0.113284431 5.23113892,1.65707257 L4.51141236,2.75704072 C3.96175109,3.5970957 3.5,5.14721231 3.5,6.15399354 L3.5,11.5 Z"/>\n      <path class="svg-icon-stroke" d="M3.5,11.5 L10.5,11.5 L10.5,6.40692281 C10.5,5.40511954 10.049884,3.84045259 9.51507657,2.98834134 L8.7053284,1.69816564 C7.71994928,0.128156319 6.24126392,0.113284431 5.23113892,1.65707257 L4.51141236,2.75704072 C3.96175109,3.5970957 3.5,5.14721231 3.5,6.15399354 L3.5,11.5 Z"/>\n      <circle class="svg-icon-stroke" cx="7" cy="7" r="1" fill="#FFF"/>\n      <rect class="svg-icon-stroke" width="7" height="2" x="3.5" y="11.5" rx="1"/>\n      <path class="svg-icon-fill" d="M6.22742546,14.0265495 C6.65410659,13.675435 7.34413815,13.6739906 7.77257454,14.0265495 L10,15.8594905 L4,15.8594905 L6.22742546,14.0265495 Z" transform="matrix(1 0 0 -1 0 29.705)"/>\n    </g>\n  </svg>\n',p='\n  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path class="svg-icon-stroke" fill="none" stroke="#7C8094" d="M7.5,6 L7.5,7.5 L6,7.5 C5.72385763,7.5 5.5,7.72385763 5.5,8 C5.5,8.27614237 5.72385763,8.5 6,8.5 L7.5,8.5 L7.5,10 C7.5,10.2761424 7.72385763,10.5 8,10.5 C8.27614237,10.5 8.5,10.2761424 8.5,10 L8.5,8.5 L10,8.5 C10.2761424,8.5 10.5,8.27614237 10.5,8 C10.5,7.72385763 10.2761424,7.5 10,7.5 L8.5,7.5 L8.5,6 C8.5,5.72385763 8.27614237,5.5 8,5.5 C7.72385763,5.5 7.5,5.72385763 7.5,6 Z"/>\n  </svg>\n',h='\n  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <rect class="svg-icon-stroke" width="5" height="1" x="5.5" y="7.5" fill="none" stroke="#7C8093" rx=".5"/>\n  </svg>\n'},"zzE+":function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.PollReportRun="PollReportRun",e.PollReportRunFailed="PollReportRunFailed",e.ExecuteReportRun="ExecuteReportRun",e.ExecuteReportRunSuccess="ExecuteReportRunSuccess",e.ExecuteReportRunFailed="ExecuteReportRunFailed",e.CancelPollReportRun="CancelPollReportRun",e.CancelQueryRun="CancelQueryRun",e.ReportRunLoadSuccess="ReportRunLoadSuccess",e.ReportRunLoadFailure="ReportRunLoadFailure",e.PollReportRunComplete="PollReportRunComplete",e.LoadQueryRunSuccess="LoadQueryRunSuccess",e.LoadQueryRunFailure="LoadQueryRunFailure",e.LoadQueryResultSuccess="LoadQueryResultSuccess",e.LoadQueryResultFailure="LoadQueryResultFailure",e.LoadCsvSuccess="LoadCsvSuccess"}(r||(r={}))}},["rIhp"]);
//# sourceMappingURL=app.9c52615ca09283019365.bundle.js.map